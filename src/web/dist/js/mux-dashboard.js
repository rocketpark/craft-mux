import{r as e,A as t,o,c as r,a,n,u as s,w as l,F as i,s as d}from"./vue.esm-bundler.js";import{u,b as p,d as c,e as m}from"./index.js";import"./index2.js";const v="mp4,webm,mov,m4v,mkv",f=524288e5,y=function(e){return function(e){const t=[...new Set(v.toLowerCase().split(",").filter(Boolean))];return-1===Array.from(e).findIndex((e=>{const o=`${e.name.toLowerCase().split(".").pop()}`;return!t.includes(o)}))}(e)?!!function(e){return!!Number.isNaN(f)||-1===Array.from(e).findIndex((e=>e.size>f))}(e)||"FILE_SIZE_ERROR":"EXTENSION_ERROR"};d({name:"MuxDashoard",components:{UploadButton:{__name:"UploadButton",props:{view:{type:String,default:"grid"}},setup(d){const f=d,g=e(null),x=e([]),b=e(null),E=e=>{e&&function(e){return new Promise(((t,o)=>{const r=y(e);if(!0===r)t(r);else switch(r){case"MULTIFILES_ERROR":alert("Please select only one file."),o(r);break;case"EXTENSION_ERROR":alert(`These files are not supported. Upload video file types: (${v})`),o(r);break;case"FILE_SIZE_ERROR":alert("These files are too large. Max file size: 52428800000 GB"),o(r);break;default:alert("Unkown error uploading files."),o(r)}}))}(e).then((()=>{x.value=e.map((e=>({name:e.name,size:e.size,type:e.type,lastModified:e.lastModified}))),p(e).then((()=>{"grid"===f.view?c():"element-index"===f.view&&window.Craft&&setTimeout((()=>{window.Craft.elementIndex.updateElements()}),300)}))})).catch((e=>{console.error(e)}))},{isOverDropZone:L}=u(g,E),w=function(e){E(Array.from(e.target.files))},R=function(e){b.value.click()},h=document.querySelector(".mux-dropzone-overlay"),z=h.querySelector(".mux-dropzone-overlay_label"),I=h.querySelector(".mux-progressbar-inner");z.textContent="Drop files here or click upload button",t((()=>m),(e=>{e.uploading?(h.classList.add("active-upload"),z.textContent=null!=e.uploadingFile?e.uploadingFile.name:"Preparing to uploadâ€¦",I.style.setProperty("--progressbar-width",`${e.progress}%`)):(z.textContent="Drop files here or click upload button",h.classList.remove("mux-dropzone-overlay--dragover","active-dropzone","active-upload"))}),{deep:!0});let _=0;return document.body.addEventListener("dragover",(e=>{e.preventDefault(),h.classList.add("active-dropzone")})),h.addEventListener("dragenter",(e=>{e.preventDefault(),_++,1===_&&h.classList.add("mux-dropzone-overlay--dragover")})),h.addEventListener("dragleave",(e=>{e.preventDefault(),_=Math.max(0,_-1),0===_&&h.classList.remove("mux-dropzone-overlay--dragover","active-dropzone")})),h.addEventListener("drop",(e=>{e.preventDefault(),_=0,h.classList.remove("mux-dropzone-overlay--dragover","active-dropzone"),E(Array.from(e.dataTransfer.files))})),(e,t)=>(o(),r(i,null,[a("input",{ref_key:"fsFileInput",ref:b,type:"file",multiple:"multiple",name:"assets-upload",style:{display:"none",visibility:"hidden"},tabindex:"-1",onChange:w},null,544),a("button",{ref_key:"dropZoneRef",ref:g,type:"button",class:n(["btn",[s(L)?"dashed":"submit"]]),"data-icon":"upload",style:{position:"relative",overflow:"hidden"},"aria-label":"Upload video(s)",onClick:l(R,["stop","prevent"])}," Upload video(s) ",2)],64))}}}}).mount("#mux-upload"),document.addEventListener("DOMContentLoaded",(function(){}));
