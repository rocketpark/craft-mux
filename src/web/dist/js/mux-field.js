/*! For license information please see mux-field.js.LICENSE.txt */
(()=>{var e,t={227:(e,t,n)=>{"use strict";var i={};function r(e,t){const n=Object.create(null),i=e.split(",");for(let e=0;e<i.length;e++)n[i[e]]=!0;return t?e=>!!n[e.toLowerCase()]:e=>!!n[e]}n.r(i),n.d(i,{BaseTransition:()=>gi,BaseTransitionPropsValidators:()=>pi,Comment:()=>Ss,EffectScope:()=>ce,Fragment:()=>_s,KeepAlive:()=>Ii,ReactiveEffect:()=>Se,Static:()=>ks,Suspense:()=>zn,Teleport:()=>Es,Text:()=>As,Transition:()=>so,TransitionGroup:()=>ko,VueElement:()=>Za,assertNumber:()=>an,callWithAsyncErrorHandling:()=>ln,callWithErrorHandling:()=>on,camelize:()=>M,capitalize:()=>N,cloneVNode:()=>js,compatUtils:()=>Pa,computed:()=>Sa,createApp:()=>il,createBlock:()=>Os,createCommentVNode:()=>zs,createElementBlock:()=>Ps,createElementVNode:()=>Hs,createHydrationRenderer:()=>hs,createPropsRestProxy:()=>wr,createRenderer:()=>us,createSSRApp:()=>rl,createSlots:()=>ir,createStaticVNode:()=>Ys,createTextVNode:()=>qs,createVNode:()=>Ws,customRef:()=>Qt,defineAsyncComponent:()=>ki,defineComponent:()=>Ai,defineCustomElement:()=>za,defineEmits:()=>fr,defineExpose:()=>pr,defineModel:()=>vr,defineOptions:()=>mr,defineProps:()=>hr,defineSSRCustomElement:()=>Xa,defineSlots:()=>gr,devtools:()=>Rn,effect:()=>we,effectScope:()=>ue,getCurrentInstance:()=>sa,getCurrentScope:()=>fe,getTransitionRawChildren:()=>_i,guardReactiveProps:()=>Ks,h:()=>ka,handleError:()=>dn,hasInjectionContext:()=>jr,hydrate:()=>nl,initCustomFormatter:()=>Ra,initDirectivesForSSR:()=>ol,inject:()=>Kr,isMemoSame:()=>Ca,isProxy:()=>Mt,isReactive:()=>Ct,isReadonly:()=>Dt,isRef:()=>$t,isRuntimeOnly:()=>ya,isShallow:()=>xt,isVNode:()=>Ns,markRaw:()=>Ot,mergeDefaults:()=>Sr,mergeModels:()=>kr,mergeProps:()=>Js,nextTick:()=>bn,normalizeClass:()=>Q,normalizeProps:()=>Z,normalizeStyle:()=>j,onActivated:()=>Di,onBeforeMount:()=>Bi,onBeforeUnmount:()=>Wi,onBeforeUpdate:()=>Vi,onDeactivated:()=>xi,onErrorCaptured:()=>Yi,onMounted:()=>$i,onRenderTracked:()=>qi,onRenderTriggered:()=>ji,onScopeDispose:()=>pe,onServerPrefetch:()=>Ki,onUnmounted:()=>Gi,onUpdated:()=>Hi,openBlock:()=>Rs,popScopeId:()=>Bn,provide:()=>Gr,proxyRefs:()=>zt,pushScopeId:()=>Un,queuePostFlushCb:()=>_n,reactive:()=>kt,readonly:()=>Lt,ref:()=>Vt,registerRuntimeCompiler:()=>va,render:()=>tl,renderList:()=>nr,renderSlot:()=>rr,resolveComponent:()=>Xi,resolveDirective:()=>Ji,resolveDynamicComponent:()=>Zi,resolveFilter:()=>Ma,resolveTransitionHooks:()=>yi,setBlockTracking:()=>xs,setDevtoolsHook:()=>Dn,setTransitionHooks:()=>Ti,shallowReactive:()=>wt,shallowReadonly:()=>Rt,shallowRef:()=>Ht,ssrContextKey:()=>wa,ssrUtils:()=>xa,stop:()=>Le,toDisplayString:()=>oe,toHandlerKey:()=>F,toHandlers:()=>ar,toRaw:()=>Pt,toRef:()=>tn,toRefs:()=>Zt,toValue:()=>qt,transformVNodeArgs:()=>Us,triggerRef:()=>Kt,unref:()=>jt,useAttrs:()=>Er,useCssModule:()=>Ja,useCssVars:()=>eo,useModel:()=>Tr,useSSRContext:()=>La,useSlots:()=>br,useTransitionState:()=>hi,vModelCheckbox:()=>Mo,vModelDynamic:()=>$o,vModelRadio:()=>Oo,vModelSelect:()=>No,vModelText:()=>xo,vShow:()=>Yo,version:()=>Da,warn:()=>sn,watch:()=>si,watchEffect:()=>ti,watchPostEffect:()=>ni,watchSyncEffect:()=>ii,withAsyncContext:()=>Lr,withCtx:()=>Vn,withDefaults:()=>yr,withDirectives:()=>ci,withKeys:()=>qo,withMemo:()=>Ia,withModifiers:()=>Ko,withScopeId:()=>$n});const s={},a=[],o=()=>{},l=()=>!1,d=/^on[^a-z]/,c=e=>d.test(e),u=e=>e.startsWith("onUpdate:"),h=Object.assign,f=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},p=Object.prototype.hasOwnProperty,m=(e,t)=>p.call(e,t),g=Array.isArray,v=e=>"[object Map]"===w(e),y=e=>"[object Set]"===w(e),b=e=>"[object Date]"===w(e),E=e=>"function"==typeof e,T=e=>"string"==typeof e,_=e=>"symbol"==typeof e,A=e=>null!==e&&"object"==typeof e,S=e=>A(e)&&E(e.then)&&E(e.catch),k=Object.prototype.toString,w=e=>k.call(e),L=e=>"[object Object]"===w(e),R=e=>T(e)&&"NaN"!==e&&"-"!==e[0]&&""+parseInt(e,10)===e,I=r(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),C=r("bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo"),D=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},x=/-(\w)/g,M=D((e=>e.replace(x,((e,t)=>t?t.toUpperCase():"")))),P=/\B([A-Z])/g,O=D((e=>e.replace(P,"-$1").toLowerCase())),N=D((e=>e.charAt(0).toUpperCase()+e.slice(1))),F=D((e=>e?`on${N(e)}`:"")),U=(e,t)=>!Object.is(e,t),B=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},$=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},V=e=>{const t=parseFloat(e);return isNaN(t)?e:t},H=e=>{const t=T(e)?Number(e):NaN;return isNaN(t)?e:t};let W;const G=()=>W||(W="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n.g?n.g:{});const K=r("Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console");function j(e){if(g(e)){const t={};for(let n=0;n<e.length;n++){const i=e[n],r=T(i)?X(i):j(i);if(r)for(const e in r)t[e]=r[e]}return t}return T(e)||A(e)?e:void 0}const q=/;(?![^(]*\))/g,Y=/:([^]+)/,z=/\/\*[^]*?\*\//g;function X(e){const t={};return e.replace(z,"").split(q).forEach((e=>{if(e){const n=e.split(Y);n.length>1&&(t[n[0].trim()]=n[1].trim())}})),t}function Q(e){let t="";if(T(e))t=e;else if(g(e))for(let n=0;n<e.length;n++){const i=Q(e[n]);i&&(t+=i+" ")}else if(A(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function Z(e){if(!e)return null;let{class:t,style:n}=e;return t&&!T(t)&&(e.class=Q(t)),n&&(e.style=j(n)),e}const J=r("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,hgroup,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot"),ee=r("svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistantLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view"),te=r("area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr"),ne="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ie=r(ne);function re(e){return!!e||""===e}function se(e,t){if(e===t)return!0;let n=b(e),i=b(t);if(n||i)return!(!n||!i)&&e.getTime()===t.getTime();if(n=_(e),i=_(t),n||i)return e===t;if(n=g(e),i=g(t),n||i)return!(!n||!i)&&function(e,t){if(e.length!==t.length)return!1;let n=!0;for(let i=0;n&&i<e.length;i++)n=se(e[i],t[i]);return n}(e,t);if(n=A(e),i=A(t),n||i){if(!n||!i)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e){const i=e.hasOwnProperty(n),r=t.hasOwnProperty(n);if(i&&!r||!i&&r||!se(e[n],t[n]))return!1}}return String(e)===String(t)}function ae(e,t){return e.findIndex((e=>se(e,t)))}const oe=e=>T(e)?e:null==e?"":g(e)||A(e)&&(e.toString===k||!E(e.toString))?JSON.stringify(e,le,2):String(e),le=(e,t)=>t&&t.__v_isRef?le(e,t.value):v(t)?{[`Map(${t.size})`]:[...t.entries()].reduce(((e,[t,n])=>(e[`${t} =>`]=n,e)),{})}:y(t)?{[`Set(${t.size})`]:[...t.values()]}:!A(t)||g(t)||L(t)?t:String(t);let de;class ce{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=de,!e&&de&&(this.index=(de.scopes||(de.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const t=de;try{return de=this,e()}finally{de=t}}else 0}on(){de=this}off(){de=this.parent}stop(e){if(this._active){let t,n;for(t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.parent=void 0,this._active=!1}}}function ue(e){return new ce(e)}function he(e,t=de){t&&t.active&&t.effects.push(e)}function fe(){return de}function pe(e){de&&de.cleanups.push(e)}const me=e=>{const t=new Set(e);return t.w=0,t.n=0,t},ge=e=>(e.w&Ee)>0,ve=e=>(e.n&Ee)>0,ye=new WeakMap;let be=0,Ee=1;let Te;const _e=Symbol(""),Ae=Symbol("");class Se{constructor(e,t=null,n){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],this.parent=void 0,he(this,n)}run(){if(!this.active)return this.fn();let e=Te,t=Re;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=Te,Te=this,Re=!0,Ee=1<<++be,be<=30?(({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=Ee})(this):ke(this),this.fn()}finally{be<=30&&(e=>{const{deps:t}=e;if(t.length){let n=0;for(let i=0;i<t.length;i++){const r=t[i];ge(r)&&!ve(r)?r.delete(e):t[n++]=r,r.w&=~Ee,r.n&=~Ee}t.length=n}})(this),Ee=1<<--be,Te=this.parent,Re=t,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Te===this?this.deferStop=!0:this.active&&(ke(this),this.onStop&&this.onStop(),this.active=!1)}}function ke(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}function we(e,t){e.effect&&(e=e.effect.fn);const n=new Se(e);t&&(h(n,t),t.scope&&he(n,t.scope)),t&&t.lazy||n.run();const i=n.run.bind(n);return i.effect=n,i}function Le(e){e.effect.stop()}let Re=!0;const Ie=[];function Ce(){Ie.push(Re),Re=!1}function De(){const e=Ie.pop();Re=void 0===e||e}function xe(e,t,n){if(Re&&Te){let t=ye.get(e);t||ye.set(e,t=new Map);let i=t.get(n);i||t.set(n,i=me());Me(i,void 0)}}function Me(e,t){let n=!1;be<=30?ve(e)||(e.n|=Ee,n=!ge(e)):n=!e.has(Te),n&&(e.add(Te),Te.deps.push(e))}function Pe(e,t,n,i,r,s){const a=ye.get(e);if(!a)return;let o=[];if("clear"===t)o=[...a.values()];else if("length"===n&&g(e)){const e=Number(i);a.forEach(((t,n)=>{("length"===n||n>=e)&&o.push(t)}))}else switch(void 0!==n&&o.push(a.get(n)),t){case"add":g(e)?R(n)&&o.push(a.get("length")):(o.push(a.get(_e)),v(e)&&o.push(a.get(Ae)));break;case"delete":g(e)||(o.push(a.get(_e)),v(e)&&o.push(a.get(Ae)));break;case"set":v(e)&&o.push(a.get(_e))}if(1===o.length)o[0]&&Oe(o[0]);else{const e=[];for(const t of o)t&&e.push(...t);Oe(me(e))}}function Oe(e,t){const n=g(e)?e:[...e];for(const e of n)e.computed&&Ne(e,t);for(const e of n)e.computed||Ne(e,t)}function Ne(e,t){(e!==Te||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const Fe=r("__proto__,__v_isRef,__isVue"),Ue=new Set(Object.getOwnPropertyNames(Symbol).filter((e=>"arguments"!==e&&"caller"!==e)).map((e=>Symbol[e])).filter(_)),Be=je(),$e=je(!1,!0),Ve=je(!0),He=je(!0,!0),We=Ge();function Ge(){const e={};return["includes","indexOf","lastIndexOf"].forEach((t=>{e[t]=function(...e){const n=Pt(this);for(let e=0,t=this.length;e<t;e++)xe(n,0,e+"");const i=n[t](...e);return-1===i||!1===i?n[t](...e.map(Pt)):i}})),["push","pop","shift","unshift","splice"].forEach((t=>{e[t]=function(...e){Ce();const n=Pt(this)[t].apply(this,e);return De(),n}})),e}function Ke(e){const t=Pt(this);return xe(t,0,e),t.hasOwnProperty(e)}function je(e=!1,t=!1){return function(n,i,r){if("__v_isReactive"===i)return!e;if("__v_isReadonly"===i)return e;if("__v_isShallow"===i)return t;if("__v_raw"===i&&r===(e?t?At:_t:t?Tt:Et).get(n))return n;const s=g(n);if(!e){if(s&&m(We,i))return Reflect.get(We,i,r);if("hasOwnProperty"===i)return Ke}const a=Reflect.get(n,i,r);return(_(i)?Ue.has(i):Fe(i))?a:(e||xe(n,0,i),t?a:$t(a)?s&&R(i)?a:a.value:A(a)?e?Lt(a):kt(a):a)}}function qe(e=!1){return function(t,n,i,r){let s=t[n];if(Dt(s)&&$t(s)&&!$t(i))return!1;if(!e&&(xt(i)||Dt(i)||(s=Pt(s),i=Pt(i)),!g(t)&&$t(s)&&!$t(i)))return s.value=i,!0;const a=g(t)&&R(n)?Number(n)<t.length:m(t,n),o=Reflect.set(t,n,i,r);return t===Pt(r)&&(a?U(i,s)&&Pe(t,"set",n,i):Pe(t,"add",n,i)),o}}const Ye={get:Be,set:qe(),deleteProperty:function(e,t){const n=m(e,t),i=(e[t],Reflect.deleteProperty(e,t));return i&&n&&Pe(e,"delete",t,void 0),i},has:function(e,t){const n=Reflect.has(e,t);return _(t)&&Ue.has(t)||xe(e,0,t),n},ownKeys:function(e){return xe(e,0,g(e)?"length":_e),Reflect.ownKeys(e)}},ze={get:Ve,set:(e,t)=>!0,deleteProperty:(e,t)=>!0},Xe=h({},Ye,{get:$e,set:qe(!0)}),Qe=h({},ze,{get:He}),Ze=e=>e,Je=e=>Reflect.getPrototypeOf(e);function et(e,t,n=!1,i=!1){const r=Pt(e=e.__v_raw),s=Pt(t);n||(t!==s&&xe(r,0,t),xe(r,0,s));const{has:a}=Je(r),o=i?Ze:n?Ft:Nt;return a.call(r,t)?o(e.get(t)):a.call(r,s)?o(e.get(s)):void(e!==r&&e.get(t))}function tt(e,t=!1){const n=this.__v_raw,i=Pt(n),r=Pt(e);return t||(e!==r&&xe(i,0,e),xe(i,0,r)),e===r?n.has(e):n.has(e)||n.has(r)}function nt(e,t=!1){return e=e.__v_raw,!t&&xe(Pt(e),0,_e),Reflect.get(e,"size",e)}function it(e){e=Pt(e);const t=Pt(this);return Je(t).has.call(t,e)||(t.add(e),Pe(t,"add",e,e)),this}function rt(e,t){t=Pt(t);const n=Pt(this),{has:i,get:r}=Je(n);let s=i.call(n,e);s||(e=Pt(e),s=i.call(n,e));const a=r.call(n,e);return n.set(e,t),s?U(t,a)&&Pe(n,"set",e,t):Pe(n,"add",e,t),this}function st(e){const t=Pt(this),{has:n,get:i}=Je(t);let r=n.call(t,e);r||(e=Pt(e),r=n.call(t,e));i&&i.call(t,e);const s=t.delete(e);return r&&Pe(t,"delete",e,void 0),s}function at(){const e=Pt(this),t=0!==e.size,n=e.clear();return t&&Pe(e,"clear",void 0,void 0),n}function ot(e,t){return function(n,i){const r=this,s=r.__v_raw,a=Pt(s),o=t?Ze:e?Ft:Nt;return!e&&xe(a,0,_e),s.forEach(((e,t)=>n.call(i,o(e),o(t),r)))}}function lt(e,t,n){return function(...i){const r=this.__v_raw,s=Pt(r),a=v(s),o="entries"===e||e===Symbol.iterator&&a,l="keys"===e&&a,d=r[e](...i),c=n?Ze:t?Ft:Nt;return!t&&xe(s,0,l?Ae:_e),{next(){const{value:e,done:t}=d.next();return t?{value:e,done:t}:{value:o?[c(e[0]),c(e[1])]:c(e),done:t}},[Symbol.iterator](){return this}}}}function dt(e){return function(...t){return"delete"!==e&&this}}function ct(){const e={get(e){return et(this,e)},get size(){return nt(this)},has:tt,add:it,set:rt,delete:st,clear:at,forEach:ot(!1,!1)},t={get(e){return et(this,e,!1,!0)},get size(){return nt(this)},has:tt,add:it,set:rt,delete:st,clear:at,forEach:ot(!1,!0)},n={get(e){return et(this,e,!0)},get size(){return nt(this,!0)},has(e){return tt.call(this,e,!0)},add:dt("add"),set:dt("set"),delete:dt("delete"),clear:dt("clear"),forEach:ot(!0,!1)},i={get(e){return et(this,e,!0,!0)},get size(){return nt(this,!0)},has(e){return tt.call(this,e,!0)},add:dt("add"),set:dt("set"),delete:dt("delete"),clear:dt("clear"),forEach:ot(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach((r=>{e[r]=lt(r,!1,!1),n[r]=lt(r,!0,!1),t[r]=lt(r,!1,!0),i[r]=lt(r,!0,!0)})),[e,n,t,i]}const[ut,ht,ft,pt]=ct();function mt(e,t){const n=t?e?pt:ft:e?ht:ut;return(t,i,r)=>"__v_isReactive"===i?!e:"__v_isReadonly"===i?e:"__v_raw"===i?t:Reflect.get(m(n,i)&&i in t?n:t,i,r)}const gt={get:mt(!1,!1)},vt={get:mt(!1,!0)},yt={get:mt(!0,!1)},bt={get:mt(!0,!0)};const Et=new WeakMap,Tt=new WeakMap,_t=new WeakMap,At=new WeakMap;function St(e){return e.__v_skip||!Object.isExtensible(e)?0:function(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}((e=>w(e).slice(8,-1))(e))}function kt(e){return Dt(e)?e:It(e,!1,Ye,gt,Et)}function wt(e){return It(e,!1,Xe,vt,Tt)}function Lt(e){return It(e,!0,ze,yt,_t)}function Rt(e){return It(e,!0,Qe,bt,At)}function It(e,t,n,i,r){if(!A(e))return e;if(e.__v_raw&&(!t||!e.__v_isReactive))return e;const s=r.get(e);if(s)return s;const a=St(e);if(0===a)return e;const o=new Proxy(e,2===a?i:n);return r.set(e,o),o}function Ct(e){return Dt(e)?Ct(e.__v_raw):!(!e||!e.__v_isReactive)}function Dt(e){return!(!e||!e.__v_isReadonly)}function xt(e){return!(!e||!e.__v_isShallow)}function Mt(e){return Ct(e)||Dt(e)}function Pt(e){const t=e&&e.__v_raw;return t?Pt(t):e}function Ot(e){return $(e,"__v_skip",!0),e}const Nt=e=>A(e)?kt(e):e,Ft=e=>A(e)?Lt(e):e;function Ut(e){Re&&Te&&Me((e=Pt(e)).dep||(e.dep=me()))}function Bt(e,t){const n=(e=Pt(e)).dep;n&&Oe(n)}function $t(e){return!(!e||!0!==e.__v_isRef)}function Vt(e){return Wt(e,!1)}function Ht(e){return Wt(e,!0)}function Wt(e,t){return $t(e)?e:new Gt(e,t)}class Gt{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:Pt(e),this._value=t?e:Nt(e)}get value(){return Ut(this),this._value}set value(e){const t=this.__v_isShallow||xt(e)||Dt(e);e=t?e:Pt(e),U(e,this._rawValue)&&(this._rawValue=e,this._value=t?e:Nt(e),Bt(this))}}function Kt(e){Bt(e)}function jt(e){return $t(e)?e.value:e}function qt(e){return E(e)?e():jt(e)}const Yt={get:(e,t,n)=>jt(Reflect.get(e,t,n)),set:(e,t,n,i)=>{const r=e[t];return $t(r)&&!$t(n)?(r.value=n,!0):Reflect.set(e,t,n,i)}};function zt(e){return Ct(e)?e:new Proxy(e,Yt)}class Xt{constructor(e){this.dep=void 0,this.__v_isRef=!0;const{get:t,set:n}=e((()=>Ut(this)),(()=>Bt(this)));this._get=t,this._set=n}get value(){return this._get()}set value(e){this._set(e)}}function Qt(e){return new Xt(e)}function Zt(e){const t=g(e)?new Array(e.length):{};for(const n in e)t[n]=nn(e,n);return t}class Jt{constructor(e,t,n){this._object=e,this._key=t,this._defaultValue=n,this.__v_isRef=!0}get value(){const e=this._object[this._key];return void 0===e?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return e=Pt(this._object),t=this._key,null==(n=ye.get(e))?void 0:n.get(t);var e,t,n}}class en{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function tn(e,t,n){return $t(e)?e:E(e)?new en(e):A(e)&&arguments.length>1?nn(e,t,n):Vt(e)}function nn(e,t,n){const i=e[t];return $t(i)?i:new Jt(e,t,n)}class rn{constructor(e,t,n,i){this._setter=t,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new Se(e,(()=>{this._dirty||(this._dirty=!0,Bt(this))})),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=n}get value(){const e=Pt(this);return Ut(e),!e._dirty&&e._cacheable||(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function sn(e,...t){}function an(e,t){}function on(e,t,n,i){let r;try{r=i?e(...i):e()}catch(e){dn(e,t,n)}return r}function ln(e,t,n,i){if(E(e)){const r=on(e,t,n,i);return r&&S(r)&&r.catch((e=>{dn(e,t,n)})),r}const r=[];for(let s=0;s<e.length;s++)r.push(ln(e[s],t,n,i));return r}function dn(e,t,n,i=!0){t&&t.vnode;if(t){let i=t.parent;const r=t.proxy,s=n;for(;i;){const t=i.ec;if(t)for(let n=0;n<t.length;n++)if(!1===t[n](e,r,s))return;i=i.parent}const a=t.appContext.config.errorHandler;if(a)return void on(a,null,10,[e,r,s])}!function(e,t,n,i=!0){console.error(e)}(e,0,0,i)}let cn=!1,un=!1;const hn=[];let fn=0;const pn=[];let mn=null,gn=0;const vn=Promise.resolve();let yn=null;function bn(e){const t=yn||vn;return e?t.then(this?e.bind(this):e):t}function En(e){hn.length&&hn.includes(e,cn&&e.allowRecurse?fn+1:fn)||(null==e.id?hn.push(e):hn.splice(function(e){let t=fn+1,n=hn.length;for(;t<n;){const i=t+n>>>1;kn(hn[i])<e?t=i+1:n=i}return t}(e.id),0,e),Tn())}function Tn(){cn||un||(un=!0,yn=vn.then(Ln))}function _n(e){g(e)?pn.push(...e):mn&&mn.includes(e,e.allowRecurse?gn+1:gn)||pn.push(e),Tn()}function An(e,t=(cn?fn+1:0)){for(0;t<hn.length;t++){const e=hn[t];e&&e.pre&&(hn.splice(t,1),t--,e())}}function Sn(e){if(pn.length){const e=[...new Set(pn)];if(pn.length=0,mn)return void mn.push(...e);for(mn=e,mn.sort(((e,t)=>kn(e)-kn(t))),gn=0;gn<mn.length;gn++)mn[gn]();mn=null,gn=0}}const kn=e=>null==e.id?1/0:e.id,wn=(e,t)=>{const n=kn(e)-kn(t);if(0===n){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function Ln(e){un=!1,cn=!0,hn.sort(wn);try{for(fn=0;fn<hn.length;fn++){const e=hn[fn];e&&!1!==e.active&&on(e,null,14)}}finally{fn=0,hn.length=0,Sn(),cn=!1,yn=null,(hn.length||pn.length)&&Ln(e)}}let Rn,In=[],Cn=!1;function Dn(e,t){var n,i;if(Rn=e,Rn)Rn.enabled=!0,In.forEach((({event:e,args:t})=>Rn.emit(e,...t))),In=[];else if("undefined"!=typeof window&&window.HTMLElement&&!(null==(i=null==(n=window.navigator)?void 0:n.userAgent)?void 0:i.includes("jsdom"))){(t.__VUE_DEVTOOLS_HOOK_REPLAY__=t.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push((e=>{Dn(e,t)})),setTimeout((()=>{Rn||(t.__VUE_DEVTOOLS_HOOK_REPLAY__=null,Cn=!0,In=[])}),3e3)}else Cn=!0,In=[]}function xn(e,t,...n){if(e.isUnmounted)return;const i=e.vnode.props||s;let r=n;const a=t.startsWith("update:"),o=a&&t.slice(7);if(o&&o in i){const e=`${"modelValue"===o?"model":o}Modifiers`,{number:t,trim:a}=i[e]||s;a&&(r=n.map((e=>T(e)?e.trim():e))),t&&(r=n.map(V))}let l;let d=i[l=F(t)]||i[l=F(M(t))];!d&&a&&(d=i[l=F(O(t))]),d&&ln(d,e,6,r);const c=i[l+"Once"];if(c){if(e.emitted){if(e.emitted[l])return}else e.emitted={};e.emitted[l]=!0,ln(c,e,6,r)}}function Mn(e,t,n=!1){const i=t.emitsCache,r=i.get(e);if(void 0!==r)return r;const s=e.emits;let a={},o=!1;if(!E(e)){const i=e=>{const n=Mn(e,t,!0);n&&(o=!0,h(a,n))};!n&&t.mixins.length&&t.mixins.forEach(i),e.extends&&i(e.extends),e.mixins&&e.mixins.forEach(i)}return s||o?(g(s)?s.forEach((e=>a[e]=null)):h(a,s),A(e)&&i.set(e,a),a):(A(e)&&i.set(e,null),null)}function Pn(e,t){return!(!e||!c(t))&&(t=t.slice(2).replace(/Once$/,""),m(e,t[0].toLowerCase()+t.slice(1))||m(e,O(t))||m(e,t))}let On=null,Nn=null;function Fn(e){const t=On;return On=e,Nn=e&&e.type.__scopeId||null,t}function Un(e){Nn=e}function Bn(){Nn=null}const $n=e=>Vn;function Vn(e,t=On,n){if(!t)return e;if(e._n)return e;const i=(...n)=>{i._d&&xs(-1);const r=Fn(t);let s;try{s=e(...n)}finally{Fn(r),i._d&&xs(1)}return s};return i._n=!0,i._c=!0,i._d=!0,i}function Hn(e){const{type:t,vnode:n,proxy:i,withProxy:r,props:s,propsOptions:[a],slots:o,attrs:l,emit:d,render:c,renderCache:h,data:f,setupState:p,ctx:m,inheritAttrs:g}=e;let v,y;const b=Fn(e);try{if(4&n.shapeFlag){const e=r||i;v=Xs(c.call(e,e,h,s,p,f,m)),y=l}else{const e=t;0,v=Xs(e.length>1?e(s,{attrs:l,slots:o,emit:d}):e(s,null)),y=t.props?l:Gn(l)}}catch(t){ws.length=0,dn(t,e,1),v=Ws(Ss)}let E=v;if(y&&!1!==g){const e=Object.keys(y),{shapeFlag:t}=E;e.length&&7&t&&(a&&e.some(u)&&(y=Kn(y,a)),E=js(E,y))}return n.dirs&&(E=js(E),E.dirs=E.dirs?E.dirs.concat(n.dirs):n.dirs),n.transition&&(E.transition=n.transition),v=E,Fn(b),v}function Wn(e){let t;for(let n=0;n<e.length;n++){const i=e[n];if(!Ns(i))return;if(i.type!==Ss||"v-if"===i.children){if(t)return;t=i}}return t}const Gn=e=>{let t;for(const n in e)("class"===n||"style"===n||c(n))&&((t||(t={}))[n]=e[n]);return t},Kn=(e,t)=>{const n={};for(const i in e)u(i)&&i.slice(9)in t||(n[i]=e[i]);return n};function jn(e,t,n){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let r=0;r<i.length;r++){const s=i[r];if(t[s]!==e[s]&&!Pn(n,s))return!0}return!1}function qn({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}const Yn=e=>e.__isSuspense,zn={name:"Suspense",__isSuspense:!0,process(e,t,n,i,r,s,a,o,l,d){null==e?function(e,t,n,i,r,s,a,o,l){const{p:d,o:{createElement:c}}=l,u=c("div"),h=e.suspense=Qn(e,r,i,t,u,n,s,a,o,l);d(null,h.pendingBranch=e.ssContent,u,null,i,h,s,a),h.deps>0?(Xn(e,"onPending"),Xn(e,"onFallback"),d(null,e.ssFallback,t,n,i,null,s,a),ei(h,e.ssFallback)):h.resolve(!1,!0)}(t,n,i,r,s,a,o,l,d):function(e,t,n,i,r,s,a,o,{p:l,um:d,o:{createElement:c}}){const u=t.suspense=e.suspense;u.vnode=t,t.el=e.el;const h=t.ssContent,f=t.ssFallback,{activeBranch:p,pendingBranch:m,isInFallback:g,isHydrating:v}=u;if(m)u.pendingBranch=h,Fs(h,m)?(l(m,h,u.hiddenContainer,null,r,u,s,a,o),u.deps<=0?u.resolve():g&&(l(p,f,n,i,r,null,s,a,o),ei(u,f))):(u.pendingId++,v?(u.isHydrating=!1,u.activeBranch=m):d(m,r,u),u.deps=0,u.effects.length=0,u.hiddenContainer=c("div"),g?(l(null,h,u.hiddenContainer,null,r,u,s,a,o),u.deps<=0?u.resolve():(l(p,f,n,i,r,null,s,a,o),ei(u,f))):p&&Fs(h,p)?(l(p,h,n,i,r,u,s,a,o),u.resolve(!0)):(l(null,h,u.hiddenContainer,null,r,u,s,a,o),u.deps<=0&&u.resolve()));else if(p&&Fs(h,p))l(p,h,n,i,r,u,s,a,o),ei(u,h);else if(Xn(t,"onPending"),u.pendingBranch=h,u.pendingId++,l(null,h,u.hiddenContainer,null,r,u,s,a,o),u.deps<=0)u.resolve();else{const{timeout:e,pendingId:t}=u;e>0?setTimeout((()=>{u.pendingId===t&&u.fallback(f)}),e):0===e&&u.fallback(f)}}(e,t,n,i,r,a,o,l,d)},hydrate:function(e,t,n,i,r,s,a,o,l){const d=t.suspense=Qn(t,i,n,e.parentNode,document.createElement("div"),null,r,s,a,o,!0),c=l(e,d.pendingBranch=t.ssContent,n,d,s,a);0===d.deps&&d.resolve(!1,!0);return c},create:Qn,normalize:function(e){const{shapeFlag:t,children:n}=e,i=32&t;e.ssContent=Zn(i?n.default:n),e.ssFallback=i?Zn(n.fallback):Ws(Ss)}};function Xn(e,t){const n=e.props&&e.props[t];E(n)&&n()}function Qn(e,t,n,i,r,s,a,o,l,d,c=!1){const{p:u,m:h,um:f,n:p,o:{parentNode:m,remove:g}}=d;let v;const y=function(e){var t;return null!=(null==(t=e.props)?void 0:t.suspensible)&&!1!==e.props.suspensible}(e);y&&(null==t?void 0:t.pendingBranch)&&(v=t.pendingId,t.deps++);const b=e.props?H(e.props.timeout):void 0;const E={vnode:e,parent:t,parentComponent:n,isSVG:a,container:i,hiddenContainer:r,anchor:s,deps:0,pendingId:0,timeout:"number"==typeof b?b:-1,activeBranch:null,pendingBranch:null,isInFallback:!0,isHydrating:c,isUnmounted:!1,effects:[],resolve(e=!1,n=!1){const{vnode:i,activeBranch:r,pendingBranch:s,pendingId:a,effects:o,parentComponent:l,container:d}=E;if(E.isHydrating)E.isHydrating=!1;else if(!e){const e=r&&s.transition&&"out-in"===s.transition.mode;e&&(r.transition.afterLeave=()=>{a===E.pendingId&&h(s,d,t,0)});let{anchor:t}=E;r&&(t=p(r),f(r,l,E,!0)),e||h(s,d,t,0)}ei(E,s),E.pendingBranch=null,E.isInFallback=!1;let c=E.parent,u=!1;for(;c;){if(c.pendingBranch){c.effects.push(...o),u=!0;break}c=c.parent}u||_n(o),E.effects=[],y&&t&&t.pendingBranch&&v===t.pendingId&&(t.deps--,0!==t.deps||n||t.resolve()),Xn(i,"onResolve")},fallback(e){if(!E.pendingBranch)return;const{vnode:t,activeBranch:n,parentComponent:i,container:r,isSVG:s}=E;Xn(t,"onFallback");const a=p(n),d=()=>{E.isInFallback&&(u(null,e,r,a,i,null,s,o,l),ei(E,e))},c=e.transition&&"out-in"===e.transition.mode;c&&(n.transition.afterLeave=d),E.isInFallback=!0,f(n,i,null,!0),c||d()},move(e,t,n){E.activeBranch&&h(E.activeBranch,e,t,n),E.container=e},next:()=>E.activeBranch&&p(E.activeBranch),registerDep(e,t){const n=!!E.pendingBranch;n&&E.deps++;const i=e.vnode.el;e.asyncDep.catch((t=>{dn(t,e,0)})).then((r=>{if(e.isUnmounted||E.isUnmounted||E.pendingId!==e.suspenseId)return;e.asyncResolved=!0;const{vnode:s}=e;ga(e,r,!1),i&&(s.el=i);const o=!i&&e.subTree.el;t(e,s,m(i||e.subTree.el),i?null:p(e.subTree),E,a,l),o&&g(o),qn(e,s.el),n&&0==--E.deps&&E.resolve()}))},unmount(e,t){E.isUnmounted=!0,E.activeBranch&&f(E.activeBranch,n,e,t),E.pendingBranch&&f(E.pendingBranch,n,e,t)}};return E}function Zn(e){let t;if(E(e)){const n=Ds&&e._c;n&&(e._d=!1,Rs()),e=e(),n&&(e._d=!0,t=Ls,Is())}if(g(e)){const t=Wn(e);0,e=t}return e=Xs(e),t&&!e.dynamicChildren&&(e.dynamicChildren=t.filter((t=>t!==e))),e}function Jn(e,t){t&&t.pendingBranch?g(e)?t.effects.push(...e):t.effects.push(e):_n(e)}function ei(e,t){e.activeBranch=t;const{vnode:n,parentComponent:i}=e,r=n.el=t.el;i&&i.subTree===n&&(i.vnode.el=r,qn(i,r))}function ti(e,t){return ai(e,null,t)}function ni(e,t){return ai(e,null,{flush:"post"})}function ii(e,t){return ai(e,null,{flush:"sync"})}const ri={};function si(e,t,n){return ai(e,t,n)}function ai(e,t,{immediate:n,deep:i,flush:r,onTrack:a,onTrigger:l}=s){var d;const c=fe()===(null==(d=ra)?void 0:d.scope)?ra:null;let u,h,p=!1,m=!1;if($t(e)?(u=()=>e.value,p=xt(e)):Ct(e)?(u=()=>e,i=!0):g(e)?(m=!0,p=e.some((e=>Ct(e)||xt(e))),u=()=>e.map((e=>$t(e)?e.value:Ct(e)?di(e):E(e)?on(e,c,2):void 0))):u=E(e)?t?()=>on(e,c,2):()=>{if(!c||!c.isUnmounted)return h&&h(),ln(e,c,3,[y])}:o,t&&i){const e=u;u=()=>di(e())}let v,y=e=>{h=A.onStop=()=>{on(e,c,4)}};if(pa){if(y=o,t?n&&ln(t,c,3,[u(),m?[]:void 0,y]):u(),"sync"!==r)return o;{const e=La();v=e.__watcherHandles||(e.__watcherHandles=[])}}let b=m?new Array(e.length).fill(ri):ri;const T=()=>{if(A.active)if(t){const e=A.run();(i||p||(m?e.some(((e,t)=>U(e,b[t]))):U(e,b)))&&(h&&h(),ln(t,c,3,[e,b===ri?void 0:m&&b[0]===ri?[]:b,y]),b=e)}else A.run()};let _;T.allowRecurse=!!t,"sync"===r?_=T:"post"===r?_=()=>cs(T,c&&c.suspense):(T.pre=!0,c&&(T.id=c.uid),_=()=>En(T));const A=new Se(u,_);t?n?T():b=A.run():"post"===r?cs(A.run.bind(A),c&&c.suspense):A.run();const S=()=>{A.stop(),c&&c.scope&&f(c.scope.effects,A)};return v&&v.push(S),S}function oi(e,t,n){const i=this.proxy,r=T(e)?e.includes(".")?li(i,e):()=>i[e]:e.bind(i,i);let s;E(t)?s=t:(s=t.handler,n=t);const a=ra;da(this);const o=ai(r,s.bind(i),n);return a?da(a):ca(),o}function li(e,t){const n=t.split(".");return()=>{let t=e;for(let e=0;e<n.length&&t;e++)t=t[n[e]];return t}}function di(e,t){if(!A(e)||e.__v_skip)return e;if((t=t||new Set).has(e))return e;if(t.add(e),$t(e))di(e.value,t);else if(g(e))for(let n=0;n<e.length;n++)di(e[n],t);else if(y(e)||v(e))e.forEach((e=>{di(e,t)}));else if(L(e))for(const n in e)di(e[n],t);return e}function ci(e,t){const n=On;if(null===n)return e;const i=Ta(n)||n.proxy,r=e.dirs||(e.dirs=[]);for(let e=0;e<t.length;e++){let[n,a,o,l=s]=t[e];n&&(E(n)&&(n={mounted:n,updated:n}),n.deep&&di(a),r.push({dir:n,instance:i,value:a,oldValue:void 0,arg:o,modifiers:l}))}return e}function ui(e,t,n,i){const r=e.dirs,s=t&&t.dirs;for(let a=0;a<r.length;a++){const o=r[a];s&&(o.oldValue=s[a].value);let l=o.dir[i];l&&(Ce(),ln(l,n,8,[e.el,o,e,t]),De())}}function hi(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return $i((()=>{e.isMounted=!0})),Wi((()=>{e.isUnmounting=!0})),e}const fi=[Function,Array],pi={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:fi,onEnter:fi,onAfterEnter:fi,onEnterCancelled:fi,onBeforeLeave:fi,onLeave:fi,onAfterLeave:fi,onLeaveCancelled:fi,onBeforeAppear:fi,onAppear:fi,onAfterAppear:fi,onAppearCancelled:fi},mi={name:"BaseTransition",props:pi,setup(e,{slots:t}){const n=sa(),i=hi();let r;return()=>{const s=t.default&&_i(t.default(),!0);if(!s||!s.length)return;let a=s[0];if(s.length>1){let e=!1;for(const t of s)if(t.type!==Ss){0,a=t,e=!0;break}}const o=Pt(e),{mode:l}=o;if(i.isLeaving)return bi(a);const d=Ei(a);if(!d)return bi(a);const c=yi(d,o,i,n);Ti(d,c);const u=n.subTree,h=u&&Ei(u);let f=!1;const{getTransitionKey:p}=d.type;if(p){const e=p();void 0===r?r=e:e!==r&&(r=e,f=!0)}if(h&&h.type!==Ss&&(!Fs(d,h)||f)){const e=yi(h,o,i,n);if(Ti(h,e),"out-in"===l)return i.isLeaving=!0,e.afterLeave=()=>{i.isLeaving=!1,!1!==n.update.active&&n.update()},bi(a);"in-out"===l&&d.type!==Ss&&(e.delayLeave=(e,t,n)=>{vi(i,h)[String(h.key)]=h,e._leaveCb=()=>{t(),e._leaveCb=void 0,delete c.delayedLeave},c.delayedLeave=n})}return a}}},gi=mi;function vi(e,t){const{leavingVNodes:n}=e;let i=n.get(t.type);return i||(i=Object.create(null),n.set(t.type,i)),i}function yi(e,t,n,i){const{appear:r,mode:s,persisted:a=!1,onBeforeEnter:o,onEnter:l,onAfterEnter:d,onEnterCancelled:c,onBeforeLeave:u,onLeave:h,onAfterLeave:f,onLeaveCancelled:p,onBeforeAppear:m,onAppear:v,onAfterAppear:y,onAppearCancelled:b}=t,E=String(e.key),T=vi(n,e),_=(e,t)=>{e&&ln(e,i,9,t)},A=(e,t)=>{const n=t[1];_(e,t),g(e)?e.every((e=>e.length<=1))&&n():e.length<=1&&n()},S={mode:s,persisted:a,beforeEnter(t){let i=o;if(!n.isMounted){if(!r)return;i=m||o}t._leaveCb&&t._leaveCb(!0);const s=T[E];s&&Fs(e,s)&&s.el._leaveCb&&s.el._leaveCb(),_(i,[t])},enter(e){let t=l,i=d,s=c;if(!n.isMounted){if(!r)return;t=v||l,i=y||d,s=b||c}let a=!1;const o=e._enterCb=t=>{a||(a=!0,_(t?s:i,[e]),S.delayedLeave&&S.delayedLeave(),e._enterCb=void 0)};t?A(t,[e,o]):o()},leave(t,i){const r=String(e.key);if(t._enterCb&&t._enterCb(!0),n.isUnmounting)return i();_(u,[t]);let s=!1;const a=t._leaveCb=n=>{s||(s=!0,i(),_(n?p:f,[t]),t._leaveCb=void 0,T[r]===e&&delete T[r])};T[r]=e,h?A(h,[t,a]):a()},clone:e=>yi(e,t,n,i)};return S}function bi(e){if(Li(e))return(e=js(e)).children=null,e}function Ei(e){return Li(e)?e.children?e.children[0]:void 0:e}function Ti(e,t){6&e.shapeFlag&&e.component?Ti(e.component.subTree,t):128&e.shapeFlag?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function _i(e,t=!1,n){let i=[],r=0;for(let s=0;s<e.length;s++){let a=e[s];const o=null==n?a.key:String(n)+String(null!=a.key?a.key:s);a.type===_s?(128&a.patchFlag&&r++,i=i.concat(_i(a.children,t,o))):(t||a.type!==Ss)&&i.push(null!=o?js(a,{key:o}):a)}if(r>1)for(let e=0;e<i.length;e++)i[e].patchFlag=-2;return i}function Ai(e,t){return E(e)?(()=>h({name:e.name},t,{setup:e}))():e}const Si=e=>!!e.type.__asyncLoader;function ki(e){E(e)&&(e={loader:e});const{loader:t,loadingComponent:n,errorComponent:i,delay:r=200,timeout:s,suspensible:a=!0,onError:o}=e;let l,d=null,c=0;const u=()=>{let e;return d||(e=d=t().catch((e=>{if(e=e instanceof Error?e:new Error(String(e)),o)return new Promise(((t,n)=>{o(e,(()=>t((c++,d=null,u()))),(()=>n(e)),c+1)}));throw e})).then((t=>e!==d&&d?d:(t&&(t.__esModule||"Module"===t[Symbol.toStringTag])&&(t=t.default),l=t,t))))};return Ai({name:"AsyncComponentWrapper",__asyncLoader:u,get __asyncResolved(){return l},setup(){const e=ra;if(l)return()=>wi(l,e);const t=t=>{d=null,dn(t,e,13,!i)};if(a&&e.suspense||pa)return u().then((t=>()=>wi(t,e))).catch((e=>(t(e),()=>i?Ws(i,{error:e}):null)));const o=Vt(!1),c=Vt(),h=Vt(!!r);return r&&setTimeout((()=>{h.value=!1}),r),null!=s&&setTimeout((()=>{if(!o.value&&!c.value){const e=new Error(`Async component timed out after ${s}ms.`);t(e),c.value=e}}),s),u().then((()=>{o.value=!0,e.parent&&Li(e.parent.vnode)&&En(e.parent.update)})).catch((e=>{t(e),c.value=e})),()=>o.value&&l?wi(l,e):c.value&&i?Ws(i,{error:c.value}):n&&!h.value?Ws(n):void 0}})}function wi(e,t){const{ref:n,props:i,children:r,ce:s}=t.vnode,a=Ws(e,i,r);return a.ref=n,a.ce=s,delete t.vnode.ce,a}const Li=e=>e.type.__isKeepAlive,Ri={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:t}){const n=sa(),i=n.ctx;if(!i.renderer)return()=>{const e=t.default&&t.default();return e&&1===e.length?e[0]:e};const r=new Map,s=new Set;let a=null;const o=n.suspense,{renderer:{p:l,m:d,um:c,o:{createElement:u}}}=i,h=u("div");function f(e){Oi(e),c(e,n,o,!0)}function p(e){r.forEach(((t,n)=>{const i=_a(t.type);!i||e&&e(i)||m(n)}))}function m(e){const t=r.get(e);a&&Fs(t,a)?a&&Oi(a):f(t),r.delete(e),s.delete(e)}i.activate=(e,t,n,i,r)=>{const s=e.component;d(e,t,n,0,o),l(s.vnode,e,t,n,s,o,i,e.slotScopeIds,r),cs((()=>{s.isDeactivated=!1,s.a&&B(s.a);const t=e.props&&e.props.onVnodeMounted;t&&ea(t,s.parent,e)}),o)},i.deactivate=e=>{const t=e.component;d(e,h,null,1,o),cs((()=>{t.da&&B(t.da);const n=e.props&&e.props.onVnodeUnmounted;n&&ea(n,t.parent,e),t.isDeactivated=!0}),o)},si((()=>[e.include,e.exclude]),(([e,t])=>{e&&p((t=>Ci(e,t))),t&&p((e=>!Ci(t,e)))}),{flush:"post",deep:!0});let g=null;const v=()=>{null!=g&&r.set(g,Ni(n.subTree))};return $i(v),Hi(v),Wi((()=>{r.forEach((e=>{const{subTree:t,suspense:i}=n,r=Ni(t);if(e.type!==r.type||e.key!==r.key)f(e);else{Oi(r);const e=r.component.da;e&&cs(e,i)}}))})),()=>{if(g=null,!t.default)return null;const n=t.default(),i=n[0];if(n.length>1)return a=null,n;if(!(Ns(i)&&(4&i.shapeFlag||128&i.shapeFlag)))return a=null,i;let o=Ni(i);const l=o.type,d=_a(Si(o)?o.type.__asyncResolved||{}:l),{include:c,exclude:u,max:h}=e;if(c&&(!d||!Ci(c,d))||u&&d&&Ci(u,d))return a=o,i;const f=null==o.key?l:o.key,p=r.get(f);return o.el&&(o=js(o),128&i.shapeFlag&&(i.ssContent=o)),g=f,p?(o.el=p.el,o.component=p.component,o.transition&&Ti(o,o.transition),o.shapeFlag|=512,s.delete(f),s.add(f)):(s.add(f),h&&s.size>parseInt(h,10)&&m(s.values().next().value)),o.shapeFlag|=256,a=o,Yn(i.type)?i:o}}},Ii=Ri;function Ci(e,t){return g(e)?e.some((e=>Ci(e,t))):T(e)?e.split(",").includes(t):"[object RegExp]"===w(e)&&e.test(t)}function Di(e,t){Mi(e,"a",t)}function xi(e,t){Mi(e,"da",t)}function Mi(e,t,n=ra){const i=e.__wdc||(e.__wdc=()=>{let t=n;for(;t;){if(t.isDeactivated)return;t=t.parent}return e()});if(Fi(t,i,n),n){let e=n.parent;for(;e&&e.parent;)Li(e.parent.vnode)&&Pi(i,t,n,e),e=e.parent}}function Pi(e,t,n,i){const r=Fi(t,e,i,!0);Gi((()=>{f(i[t],r)}),n)}function Oi(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function Ni(e){return 128&e.shapeFlag?e.ssContent:e}function Fi(e,t,n=ra,i=!1){if(n){const r=n[e]||(n[e]=[]),s=t.__weh||(t.__weh=(...i)=>{if(n.isUnmounted)return;Ce(),da(n);const r=ln(t,n,e,i);return ca(),De(),r});return i?r.unshift(s):r.push(s),s}}const Ui=e=>(t,n=ra)=>(!pa||"sp"===e)&&Fi(e,((...e)=>t(...e)),n),Bi=Ui("bm"),$i=Ui("m"),Vi=Ui("bu"),Hi=Ui("u"),Wi=Ui("bum"),Gi=Ui("um"),Ki=Ui("sp"),ji=Ui("rtg"),qi=Ui("rtc");function Yi(e,t=ra){Fi("ec",e,t)}const zi="components";function Xi(e,t){return er(zi,e,!0,t)||e}const Qi=Symbol.for("v-ndc");function Zi(e){return T(e)?er(zi,e,!1)||e:e||Qi}function Ji(e){return er("directives",e)}function er(e,t,n=!0,i=!1){const r=On||ra;if(r){const n=r.type;if(e===zi){const e=_a(n,!1);if(e&&(e===t||e===M(t)||e===N(M(t))))return n}const s=tr(r[e]||n[e],t)||tr(r.appContext[e],t);return!s&&i?n:s}}function tr(e,t){return e&&(e[t]||e[M(t)]||e[N(M(t))])}function nr(e,t,n,i){let r;const s=n&&n[i];if(g(e)||T(e)){r=new Array(e.length);for(let n=0,i=e.length;n<i;n++)r[n]=t(e[n],n,void 0,s&&s[n])}else if("number"==typeof e){0,r=new Array(e);for(let n=0;n<e;n++)r[n]=t(n+1,n,void 0,s&&s[n])}else if(A(e))if(e[Symbol.iterator])r=Array.from(e,((e,n)=>t(e,n,void 0,s&&s[n])));else{const n=Object.keys(e);r=new Array(n.length);for(let i=0,a=n.length;i<a;i++){const a=n[i];r[i]=t(e[a],a,i,s&&s[i])}}else r=[];return n&&(n[i]=r),r}function ir(e,t){for(let n=0;n<t.length;n++){const i=t[n];if(g(i))for(let t=0;t<i.length;t++)e[i[t].name]=i[t].fn;else i&&(e[i.name]=i.key?(...e)=>{const t=i.fn(...e);return t&&(t.key=i.key),t}:i.fn)}return e}function rr(e,t,n={},i,r){if(On.isCE||On.parent&&Si(On.parent)&&On.parent.isCE)return"default"!==t&&(n.name=t),Ws("slot",n,i&&i());let s=e[t];s&&s._c&&(s._d=!1),Rs();const a=s&&sr(s(n)),o=Os(_s,{key:n.key||a&&a.key||`_${t}`},a||(i?i():[]),a&&1===e._?64:-2);return!r&&o.scopeId&&(o.slotScopeIds=[o.scopeId+"-s"]),s&&s._c&&(s._d=!0),o}function sr(e){return e.some((e=>!Ns(e)||e.type!==Ss&&!(e.type===_s&&!sr(e.children))))?e:null}function ar(e,t){const n={};for(const i in e)n[t&&/[A-Z]/.test(i)?`on:${i}`:F(i)]=e[i];return n}const or=e=>e?ua(e)?Ta(e)||e.proxy:or(e.parent):null,lr=h(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>or(e.parent),$root:e=>or(e.root),$emit:e=>e.emit,$options:e=>xr(e),$forceUpdate:e=>e.f||(e.f=()=>En(e.update)),$nextTick:e=>e.n||(e.n=bn.bind(e.proxy)),$watch:e=>oi.bind(e)}),dr=(e,t)=>e!==s&&!e.__isScriptSetup&&m(e,t),cr={get({_:e},t){const{ctx:n,setupState:i,data:r,props:a,accessCache:o,type:l,appContext:d}=e;let c;if("$"!==t[0]){const l=o[t];if(void 0!==l)switch(l){case 1:return i[t];case 2:return r[t];case 4:return n[t];case 3:return a[t]}else{if(dr(i,t))return o[t]=1,i[t];if(r!==s&&m(r,t))return o[t]=2,r[t];if((c=e.propsOptions[0])&&m(c,t))return o[t]=3,a[t];if(n!==s&&m(n,t))return o[t]=4,n[t];Rr&&(o[t]=0)}}const u=lr[t];let h,f;return u?("$attrs"===t&&xe(e,0,t),u(e)):(h=l.__cssModules)&&(h=h[t])?h:n!==s&&m(n,t)?(o[t]=4,n[t]):(f=d.config.globalProperties,m(f,t)?f[t]:void 0)},set({_:e},t,n){const{data:i,setupState:r,ctx:a}=e;return dr(r,t)?(r[t]=n,!0):i!==s&&m(i,t)?(i[t]=n,!0):!m(e.props,t)&&(("$"!==t[0]||!(t.slice(1)in e))&&(a[t]=n,!0))},has({_:{data:e,setupState:t,accessCache:n,ctx:i,appContext:r,propsOptions:a}},o){let l;return!!n[o]||e!==s&&m(e,o)||dr(t,o)||(l=a[0])&&m(l,o)||m(i,o)||m(lr,o)||m(r.config.globalProperties,o)},defineProperty(e,t,n){return null!=n.get?e._.accessCache[t]=0:m(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};const ur=h({},cr,{get(e,t){if(t!==Symbol.unscopables)return cr.get(e,t,e)},has:(e,t)=>"_"!==t[0]&&!K(t)});function hr(){return null}function fr(){return null}function pr(e){0}function mr(e){0}function gr(){return null}function vr(){0}function yr(e,t){return null}function br(){return _r().slots}function Er(){return _r().attrs}function Tr(e,t,n){const i=sa();if(n&&n.local){const n=Vt(e[t]);return si((()=>e[t]),(e=>n.value=e)),si(n,(n=>{n!==e[t]&&i.emit(`update:${t}`,n)})),n}return{__v_isRef:!0,get value(){return e[t]},set value(e){i.emit(`update:${t}`,e)}}}function _r(){const e=sa();return e.setupContext||(e.setupContext=Ea(e))}function Ar(e){return g(e)?e.reduce(((e,t)=>(e[t]=null,e)),{}):e}function Sr(e,t){const n=Ar(e);for(const e in t){if(e.startsWith("__skip"))continue;let i=n[e];i?g(i)||E(i)?i=n[e]={type:i,default:t[e]}:i.default=t[e]:null===i&&(i=n[e]={default:t[e]}),i&&t[`__skip_${e}`]&&(i.skipFactory=!0)}return n}function kr(e,t){return e&&t?g(e)&&g(t)?e.concat(t):h({},Ar(e),Ar(t)):e||t}function wr(e,t){const n={};for(const i in e)t.includes(i)||Object.defineProperty(n,i,{enumerable:!0,get:()=>e[i]});return n}function Lr(e){const t=sa();let n=e();return ca(),S(n)&&(n=n.catch((e=>{throw da(t),e}))),[n,()=>da(t)]}let Rr=!0;function Ir(e){const t=xr(e),n=e.proxy,i=e.ctx;Rr=!1,t.beforeCreate&&Cr(t.beforeCreate,e,"bc");const{data:r,computed:s,methods:a,watch:l,provide:d,inject:c,created:u,beforeMount:h,mounted:f,beforeUpdate:p,updated:m,activated:v,deactivated:y,beforeDestroy:b,beforeUnmount:T,destroyed:_,unmounted:S,render:k,renderTracked:w,renderTriggered:L,errorCaptured:R,serverPrefetch:I,expose:C,inheritAttrs:D,components:x,directives:M,filters:P}=t;if(c&&function(e,t,n=o){g(e)&&(e=Nr(e));for(const n in e){const i=e[n];let r;r=A(i)?"default"in i?Kr(i.from||n,i.default,!0):Kr(i.from||n):Kr(i),$t(r)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>r.value,set:e=>r.value=e}):t[n]=r}}(c,i,null),a)for(const e in a){const t=a[e];E(t)&&(i[e]=t.bind(n))}if(r){0;const t=r.call(n,n);0,A(t)&&(e.data=kt(t))}if(Rr=!0,s)for(const e in s){const t=s[e],r=E(t)?t.bind(n,n):E(t.get)?t.get.bind(n,n):o;0;const a=!E(t)&&E(t.set)?t.set.bind(n):o,l=Sa({get:r,set:a});Object.defineProperty(i,e,{enumerable:!0,configurable:!0,get:()=>l.value,set:e=>l.value=e})}if(l)for(const e in l)Dr(l[e],i,n,e);if(d){const e=E(d)?d.call(n):d;Reflect.ownKeys(e).forEach((t=>{Gr(t,e[t])}))}function O(e,t){g(t)?t.forEach((t=>e(t.bind(n)))):t&&e(t.bind(n))}if(u&&Cr(u,e,"c"),O(Bi,h),O($i,f),O(Vi,p),O(Hi,m),O(Di,v),O(xi,y),O(Yi,R),O(qi,w),O(ji,L),O(Wi,T),O(Gi,S),O(Ki,I),g(C))if(C.length){const t=e.exposed||(e.exposed={});C.forEach((e=>{Object.defineProperty(t,e,{get:()=>n[e],set:t=>n[e]=t})}))}else e.exposed||(e.exposed={});k&&e.render===o&&(e.render=k),null!=D&&(e.inheritAttrs=D),x&&(e.components=x),M&&(e.directives=M)}function Cr(e,t,n){ln(g(e)?e.map((e=>e.bind(t.proxy))):e.bind(t.proxy),t,n)}function Dr(e,t,n,i){const r=i.includes(".")?li(n,i):()=>n[i];if(T(e)){const n=t[e];E(n)&&si(r,n)}else if(E(e))si(r,e.bind(n));else if(A(e))if(g(e))e.forEach((e=>Dr(e,t,n,i)));else{const i=E(e.handler)?e.handler.bind(n):t[e.handler];E(i)&&si(r,i,e)}else 0}function xr(e){const t=e.type,{mixins:n,extends:i}=t,{mixins:r,optionsCache:s,config:{optionMergeStrategies:a}}=e.appContext,o=s.get(t);let l;return o?l=o:r.length||n||i?(l={},r.length&&r.forEach((e=>Mr(l,e,a,!0))),Mr(l,t,a)):l=t,A(t)&&s.set(t,l),l}function Mr(e,t,n,i=!1){const{mixins:r,extends:s}=t;s&&Mr(e,s,n,!0),r&&r.forEach((t=>Mr(e,t,n,!0)));for(const r in t)if(i&&"expose"===r);else{const i=Pr[r]||n&&n[r];e[r]=i?i(e[r],t[r]):t[r]}return e}const Pr={data:Or,props:Br,emits:Br,methods:Ur,computed:Ur,beforeCreate:Fr,created:Fr,beforeMount:Fr,mounted:Fr,beforeUpdate:Fr,updated:Fr,beforeDestroy:Fr,beforeUnmount:Fr,destroyed:Fr,unmounted:Fr,activated:Fr,deactivated:Fr,errorCaptured:Fr,serverPrefetch:Fr,components:Ur,directives:Ur,watch:function(e,t){if(!e)return t;if(!t)return e;const n=h(Object.create(null),e);for(const i in t)n[i]=Fr(e[i],t[i]);return n},provide:Or,inject:function(e,t){return Ur(Nr(e),Nr(t))}};function Or(e,t){return t?e?function(){return h(E(e)?e.call(this,this):e,E(t)?t.call(this,this):t)}:t:e}function Nr(e){if(g(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Fr(e,t){return e?[...new Set([].concat(e,t))]:t}function Ur(e,t){return e?h(Object.create(null),e,t):t}function Br(e,t){return e?g(e)&&g(t)?[...new Set([...e,...t])]:h(Object.create(null),Ar(e),Ar(null!=t?t:{})):t}function $r(){return{app:null,config:{isNativeTag:l,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Vr=0;function Hr(e,t){return function(n,i=null){E(n)||(n=h({},n)),null==i||A(i)||(i=null);const r=$r();const s=new Set;let a=!1;const o=r.app={_uid:Vr++,_component:n,_props:i,_container:null,_context:r,_instance:null,version:Da,get config(){return r.config},set config(e){0},use:(e,...t)=>(s.has(e)||(e&&E(e.install)?(s.add(e),e.install(o,...t)):E(e)&&(s.add(e),e(o,...t))),o),mixin:e=>(r.mixins.includes(e)||r.mixins.push(e),o),component:(e,t)=>t?(r.components[e]=t,o):r.components[e],directive:(e,t)=>t?(r.directives[e]=t,o):r.directives[e],mount(s,l,d){if(!a){0;const c=Ws(n,i);return c.appContext=r,l&&t?t(c,s):e(c,s,d),a=!0,o._container=s,s.__vue_app__=o,Ta(c.component)||c.component.proxy}},unmount(){a&&(e(null,o._container),delete o._container.__vue_app__)},provide:(e,t)=>(r.provides[e]=t,o),runWithContext(e){Wr=o;try{return e()}finally{Wr=null}}};return o}}let Wr=null;function Gr(e,t){if(ra){let n=ra.provides;const i=ra.parent&&ra.parent.provides;i===n&&(n=ra.provides=Object.create(i)),n[e]=t}else 0}function Kr(e,t,n=!1){const i=ra||On;if(i||Wr){const r=i?null==i.parent?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:Wr._context.provides;if(r&&e in r)return r[e];if(arguments.length>1)return n&&E(t)?t.call(i&&i.proxy):t}else 0}function jr(){return!!(ra||On||Wr)}function qr(e,t,n,i){const[r,a]=e.propsOptions;let o,l=!1;if(t)for(let s in t){if(I(s))continue;const d=t[s];let c;r&&m(r,c=M(s))?a&&a.includes(c)?(o||(o={}))[c]=d:n[c]=d:Pn(e.emitsOptions,s)||s in i&&d===i[s]||(i[s]=d,l=!0)}if(a){const t=Pt(n),i=o||s;for(let s=0;s<a.length;s++){const o=a[s];n[o]=Yr(r,t,o,i[o],e,!m(i,o))}}return l}function Yr(e,t,n,i,r,s){const a=e[n];if(null!=a){const e=m(a,"default");if(e&&void 0===i){const e=a.default;if(a.type!==Function&&!a.skipFactory&&E(e)){const{propsDefaults:s}=r;n in s?i=s[n]:(da(r),i=s[n]=e.call(null,t),ca())}else i=e}a[0]&&(s&&!e?i=!1:!a[1]||""!==i&&i!==O(n)||(i=!0))}return i}function zr(e,t,n=!1){const i=t.propsCache,r=i.get(e);if(r)return r;const o=e.props,l={},d=[];let c=!1;if(!E(e)){const i=e=>{c=!0;const[n,i]=zr(e,t,!0);h(l,n),i&&d.push(...i)};!n&&t.mixins.length&&t.mixins.forEach(i),e.extends&&i(e.extends),e.mixins&&e.mixins.forEach(i)}if(!o&&!c)return A(e)&&i.set(e,a),a;if(g(o))for(let e=0;e<o.length;e++){0;const t=M(o[e]);Xr(t)&&(l[t]=s)}else if(o){0;for(const e in o){const t=M(e);if(Xr(t)){const n=o[e],i=l[t]=g(n)||E(n)?{type:n}:h({},n);if(i){const e=Jr(Boolean,i.type),n=Jr(String,i.type);i[0]=e>-1,i[1]=n<0||e<n,(e>-1||m(i,"default"))&&d.push(t)}}}}const u=[l,d];return A(e)&&i.set(e,u),u}function Xr(e){return"$"!==e[0]}function Qr(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:null===e?"null":""}function Zr(e,t){return Qr(e)===Qr(t)}function Jr(e,t){return g(t)?t.findIndex((t=>Zr(t,e))):E(t)&&Zr(t,e)?0:-1}const es=e=>"_"===e[0]||"$stable"===e,ts=e=>g(e)?e.map(Xs):[Xs(e)],ns=(e,t,n)=>{if(t._n)return t;const i=Vn(((...e)=>ts(t(...e))),n);return i._c=!1,i},is=(e,t,n)=>{const i=e._ctx;for(const n in e){if(es(n))continue;const r=e[n];if(E(r))t[n]=ns(0,r,i);else if(null!=r){0;const e=ts(r);t[n]=()=>e}}},rs=(e,t)=>{const n=ts(t);e.slots.default=()=>n};function ss(e,t,n,i,r=!1){if(g(e))return void e.forEach(((e,s)=>ss(e,t&&(g(t)?t[s]:t),n,i,r)));if(Si(i)&&!r)return;const a=4&i.shapeFlag?Ta(i.component)||i.component.proxy:i.el,o=r?null:a,{i:l,r:d}=e;const c=t&&t.r,u=l.refs===s?l.refs={}:l.refs,h=l.setupState;if(null!=c&&c!==d&&(T(c)?(u[c]=null,m(h,c)&&(h[c]=null)):$t(c)&&(c.value=null)),E(d))on(d,l,12,[o,u]);else{const t=T(d),i=$t(d);if(t||i){const s=()=>{if(e.f){const n=t?m(h,d)?h[d]:u[d]:d.value;r?g(n)&&f(n,a):g(n)?n.includes(a)||n.push(a):t?(u[d]=[a],m(h,d)&&(h[d]=u[d])):(d.value=[a],e.k&&(u[e.k]=d.value))}else t?(u[d]=o,m(h,d)&&(h[d]=o)):i&&(d.value=o,e.k&&(u[e.k]=o))};o?(s.id=-1,cs(s,n)):s()}else 0}}let as=!1;const os=e=>/svg/.test(e.namespaceURI)&&"foreignObject"!==e.tagName,ls=e=>8===e.nodeType;function ds(e){const{mt:t,p:n,o:{patchProp:i,createText:r,nextSibling:s,parentNode:a,remove:o,insert:l,createComment:d}}=e,u=(n,i,o,d,c,v=!1)=>{const y=ls(n)&&"["===n.data,b=()=>m(n,i,o,d,c,y),{type:E,ref:T,shapeFlag:_,patchFlag:A}=i;let S=n.nodeType;i.el=n,-2===A&&(v=!1,i.dynamicChildren=null);let k=null;switch(E){case As:3!==S?""===i.children?(l(i.el=r(""),a(n),n),k=n):k=b():(n.data!==i.children&&(as=!0,n.data=i.children),k=s(n));break;case Ss:k=8!==S||y?b():s(n);break;case ks:if(y&&(S=(n=s(n)).nodeType),1===S||3===S){k=n;const e=!i.children.length;for(let t=0;t<i.staticCount;t++)e&&(i.children+=1===k.nodeType?k.outerHTML:k.data),t===i.staticCount-1&&(i.anchor=k),k=s(k);return y?s(k):k}b();break;case _s:k=y?p(n,i,o,d,c,v):b();break;default:if(1&_)k=1!==S||i.type.toLowerCase()!==n.tagName.toLowerCase()?b():h(n,i,o,d,c,v);else if(6&_){i.slotScopeIds=c;const e=a(n);if(t(i,e,null,o,d,os(e),v),k=y?g(n):s(n),k&&ls(k)&&"teleport end"===k.data&&(k=s(k)),Si(i)){let t;y?(t=Ws(_s),t.anchor=k?k.previousSibling:e.lastChild):t=3===n.nodeType?qs(""):Ws("div"),t.el=n,i.component.subTree=t}}else 64&_?k=8!==S?b():i.type.hydrate(n,i,o,d,c,v,e,f):128&_&&(k=i.type.hydrate(n,i,o,d,os(a(n)),c,v,e,u))}return null!=T&&ss(T,null,d,i),k},h=(e,t,n,r,s,a)=>{a=a||!!t.dynamicChildren;const{type:l,props:d,patchFlag:u,shapeFlag:h,dirs:p}=t,m="input"===l&&p||"option"===l;if(m||-1!==u){if(p&&ui(t,null,n,"created"),d)if(m||!a||48&u)for(const t in d)(m&&t.endsWith("value")||c(t)&&!I(t))&&i(e,t,null,d[t],!1,void 0,n);else d.onClick&&i(e,"onClick",null,d.onClick,!1,void 0,n);let l;if((l=d&&d.onVnodeBeforeMount)&&ea(l,n,t),p&&ui(t,null,n,"beforeMount"),((l=d&&d.onVnodeMounted)||p)&&Jn((()=>{l&&ea(l,n,t),p&&ui(t,null,n,"mounted")}),r),16&h&&(!d||!d.innerHTML&&!d.textContent)){let i=f(e.firstChild,t,e,n,r,s,a);for(;i;){as=!0;const e=i;i=i.nextSibling,o(e)}}else 8&h&&e.textContent!==t.children&&(as=!0,e.textContent=t.children)}return e.nextSibling},f=(e,t,i,r,s,a,o)=>{o=o||!!t.dynamicChildren;const l=t.children,d=l.length;for(let t=0;t<d;t++){const d=o?l[t]:l[t]=Xs(l[t]);if(e)e=u(e,d,r,s,a,o);else{if(d.type===As&&!d.children)continue;as=!0,n(null,d,i,null,r,s,os(i),a)}}return e},p=(e,t,n,i,r,o)=>{const{slotScopeIds:c}=t;c&&(r=r?r.concat(c):c);const u=a(e),h=f(s(e),t,u,n,i,r,o);return h&&ls(h)&&"]"===h.data?s(t.anchor=h):(as=!0,l(t.anchor=d("]"),u,h),h)},m=(e,t,i,r,l,d)=>{if(as=!0,t.el=null,d){const t=g(e);for(;;){const n=s(e);if(!n||n===t)break;o(n)}}const c=s(e),u=a(e);return o(e),n(null,t,u,c,i,r,os(u),l),c},g=e=>{let t=0;for(;e;)if((e=s(e))&&ls(e)&&("["===e.data&&t++,"]"===e.data)){if(0===t)return s(e);t--}return e};return[(e,t)=>{if(!t.hasChildNodes())return n(null,e,t),Sn(),void(t._vnode=e);as=!1,u(t.firstChild,e,null,null,null),Sn(),t._vnode=e,as&&console.error("Hydration completed but contains mismatches.")},u]}const cs=Jn;function us(e){return fs(e)}function hs(e){return fs(e,ds)}function fs(e,t){G().__VUE__=!0;const{insert:n,remove:i,patchProp:r,createElement:l,createText:d,createComment:c,setText:u,setElementText:f,parentNode:p,nextSibling:g,setScopeId:v=o,insertStaticContent:y}=e,b=(e,t,n,i=null,r=null,s=null,a=!1,o=null,l=!!t.dynamicChildren)=>{if(e===t)return;e&&!Fs(e,t)&&(i=Q(e),j(e,r,s,!0),e=null),-2===t.patchFlag&&(l=!1,t.dynamicChildren=null);const{type:d,ref:c,shapeFlag:u}=t;switch(d){case As:E(e,t,n,i);break;case Ss:T(e,t,n,i);break;case ks:null==e&&_(t,n,i,a);break;case _s:x(e,t,n,i,r,s,a,o,l);break;default:1&u?S(e,t,n,i,r,s,a,o,l):6&u?P(e,t,n,i,r,s,a,o,l):(64&u||128&u)&&d.process(e,t,n,i,r,s,a,o,l,J)}null!=c&&r&&ss(c,e&&e.ref,s,t||e,!t)},E=(e,t,i,r)=>{if(null==e)n(t.el=d(t.children),i,r);else{const n=t.el=e.el;t.children!==e.children&&u(n,t.children)}},T=(e,t,i,r)=>{null==e?n(t.el=c(t.children||""),i,r):t.el=e.el},_=(e,t,n,i)=>{[e.el,e.anchor]=y(e.children,t,n,i,e.el,e.anchor)},A=({el:e,anchor:t})=>{let n;for(;e&&e!==t;)n=g(e),i(e),e=n;i(t)},S=(e,t,n,i,r,s,a,o,l)=>{a=a||"svg"===t.type,null==e?k(t,n,i,r,s,a,o,l):R(e,t,r,s,a,o,l)},k=(e,t,i,s,a,o,d,c)=>{let u,h;const{type:p,props:m,shapeFlag:g,transition:v,dirs:y}=e;if(u=e.el=l(e.type,o,m&&m.is,m),8&g?f(u,e.children):16&g&&L(e.children,u,null,s,a,o&&"foreignObject"!==p,d,c),y&&ui(e,null,s,"created"),w(u,e,e.scopeId,d,s),m){for(const t in m)"value"===t||I(t)||r(u,t,null,m[t],o,e.children,s,a,X);"value"in m&&r(u,"value",null,m.value),(h=m.onVnodeBeforeMount)&&ea(h,s,e)}y&&ui(e,null,s,"beforeMount");const b=(!a||a&&!a.pendingBranch)&&v&&!v.persisted;b&&v.beforeEnter(u),n(u,t,i),((h=m&&m.onVnodeMounted)||b||y)&&cs((()=>{h&&ea(h,s,e),b&&v.enter(u),y&&ui(e,null,s,"mounted")}),a)},w=(e,t,n,i,r)=>{if(n&&v(e,n),i)for(let t=0;t<i.length;t++)v(e,i[t]);if(r){if(t===r.subTree){const t=r.vnode;w(e,t,t.scopeId,t.slotScopeIds,r.parent)}}},L=(e,t,n,i,r,s,a,o,l=0)=>{for(let d=l;d<e.length;d++){const l=e[d]=o?Qs(e[d]):Xs(e[d]);b(null,l,t,n,i,r,s,a,o)}},R=(e,t,n,i,a,o,l)=>{const d=t.el=e.el;let{patchFlag:c,dynamicChildren:u,dirs:h}=t;c|=16&e.patchFlag;const p=e.props||s,m=t.props||s;let g;n&&ps(n,!1),(g=m.onVnodeBeforeUpdate)&&ea(g,n,t,e),h&&ui(t,e,n,"beforeUpdate"),n&&ps(n,!0);const v=a&&"foreignObject"!==t.type;if(u?C(e.dynamicChildren,u,d,n,i,v,o):l||V(e,t,d,null,n,i,v,o,!1),c>0){if(16&c)D(d,t,p,m,n,i,a);else if(2&c&&p.class!==m.class&&r(d,"class",null,m.class,a),4&c&&r(d,"style",p.style,m.style,a),8&c){const s=t.dynamicProps;for(let t=0;t<s.length;t++){const o=s[t],l=p[o],c=m[o];c===l&&"value"!==o||r(d,o,l,c,a,e.children,n,i,X)}}1&c&&e.children!==t.children&&f(d,t.children)}else l||null!=u||D(d,t,p,m,n,i,a);((g=m.onVnodeUpdated)||h)&&cs((()=>{g&&ea(g,n,t,e),h&&ui(t,e,n,"updated")}),i)},C=(e,t,n,i,r,s,a)=>{for(let o=0;o<t.length;o++){const l=e[o],d=t[o],c=l.el&&(l.type===_s||!Fs(l,d)||70&l.shapeFlag)?p(l.el):n;b(l,d,c,null,i,r,s,a,!0)}},D=(e,t,n,i,a,o,l)=>{if(n!==i){if(n!==s)for(const s in n)I(s)||s in i||r(e,s,n[s],null,l,t.children,a,o,X);for(const s in i){if(I(s))continue;const d=i[s],c=n[s];d!==c&&"value"!==s&&r(e,s,c,d,l,t.children,a,o,X)}"value"in i&&r(e,"value",n.value,i.value)}},x=(e,t,i,r,s,a,o,l,c)=>{const u=t.el=e?e.el:d(""),h=t.anchor=e?e.anchor:d("");let{patchFlag:f,dynamicChildren:p,slotScopeIds:m}=t;m&&(l=l?l.concat(m):m),null==e?(n(u,i,r),n(h,i,r),L(t.children,i,h,s,a,o,l,c)):f>0&&64&f&&p&&e.dynamicChildren?(C(e.dynamicChildren,p,i,s,a,o,l),(null!=t.key||s&&t===s.subTree)&&ms(e,t,!0)):V(e,t,i,h,s,a,o,l,c)},P=(e,t,n,i,r,s,a,o,l)=>{t.slotScopeIds=o,null==e?512&t.shapeFlag?r.ctx.activate(t,n,i,a,l):N(t,n,i,r,s,a,l):F(e,t,l)},N=(e,t,n,i,r,s,a)=>{const o=e.component=ia(e,i,r);if(Li(e)&&(o.ctx.renderer=J),ma(o),o.asyncDep){if(r&&r.registerDep(o,U),!e.el){const e=o.subTree=Ws(Ss);T(null,e,t,n)}}else U(o,e,t,n,r,s,a)},F=(e,t,n)=>{const i=t.component=e.component;if(function(e,t,n){const{props:i,children:r,component:s}=e,{props:a,children:o,patchFlag:l}=t,d=s.emitsOptions;if(t.dirs||t.transition)return!0;if(!(n&&l>=0))return!(!r&&!o||o&&o.$stable)||i!==a&&(i?!a||jn(i,a,d):!!a);if(1024&l)return!0;if(16&l)return i?jn(i,a,d):!!a;if(8&l){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const n=e[t];if(a[n]!==i[n]&&!Pn(d,n))return!0}}return!1}(e,t,n)){if(i.asyncDep&&!i.asyncResolved)return void $(i,t,n);i.next=t,function(e){const t=hn.indexOf(e);t>fn&&hn.splice(t,1)}(i.update),i.update()}else t.el=e.el,i.vnode=t},U=(e,t,n,i,r,s,a)=>{const o=e.effect=new Se((()=>{if(e.isMounted){let t,{next:n,bu:i,u:o,parent:l,vnode:d}=e,c=n;0,ps(e,!1),n?(n.el=d.el,$(e,n,a)):n=d,i&&B(i),(t=n.props&&n.props.onVnodeBeforeUpdate)&&ea(t,l,n,d),ps(e,!0);const u=Hn(e);0;const h=e.subTree;e.subTree=u,b(h,u,p(h.el),Q(h),e,r,s),n.el=u.el,null===c&&qn(e,u.el),o&&cs(o,r),(t=n.props&&n.props.onVnodeUpdated)&&cs((()=>ea(t,l,n,d)),r)}else{let a;const{el:o,props:l}=t,{bm:d,m:c,parent:u}=e,h=Si(t);if(ps(e,!1),d&&B(d),!h&&(a=l&&l.onVnodeBeforeMount)&&ea(a,u,t),ps(e,!0),o&&te){const n=()=>{e.subTree=Hn(e),te(o,e.subTree,e,r,null)};h?t.type.__asyncLoader().then((()=>!e.isUnmounted&&n())):n()}else{0;const a=e.subTree=Hn(e);0,b(null,a,n,i,e,r,s),t.el=a.el}if(c&&cs(c,r),!h&&(a=l&&l.onVnodeMounted)){const e=t;cs((()=>ea(a,u,e)),r)}(256&t.shapeFlag||u&&Si(u.vnode)&&256&u.vnode.shapeFlag)&&e.a&&cs(e.a,r),e.isMounted=!0,t=n=i=null}}),(()=>En(l)),e.scope),l=e.update=()=>o.run();l.id=e.uid,ps(e,!0),l()},$=(e,t,n)=>{t.component=e;const i=e.vnode.props;e.vnode=t,e.next=null,function(e,t,n,i){const{props:r,attrs:s,vnode:{patchFlag:a}}=e,o=Pt(r),[l]=e.propsOptions;let d=!1;if(!(i||a>0)||16&a){let i;qr(e,t,r,s)&&(d=!0);for(const s in o)t&&(m(t,s)||(i=O(s))!==s&&m(t,i))||(l?!n||void 0===n[s]&&void 0===n[i]||(r[s]=Yr(l,o,s,void 0,e,!0)):delete r[s]);if(s!==o)for(const e in s)t&&m(t,e)||(delete s[e],d=!0)}else if(8&a){const n=e.vnode.dynamicProps;for(let i=0;i<n.length;i++){let a=n[i];if(Pn(e.emitsOptions,a))continue;const c=t[a];if(l)if(m(s,a))c!==s[a]&&(s[a]=c,d=!0);else{const t=M(a);r[t]=Yr(l,o,t,c,e,!1)}else c!==s[a]&&(s[a]=c,d=!0)}}d&&Pe(e,"set","$attrs")}(e,t.props,i,n),((e,t,n)=>{const{vnode:i,slots:r}=e;let a=!0,o=s;if(32&i.shapeFlag){const e=t._;e?n&&1===e?a=!1:(h(r,t),n||1!==e||delete r._):(a=!t.$stable,is(t,r)),o=t}else t&&(rs(e,t),o={default:1});if(a)for(const e in r)es(e)||e in o||delete r[e]})(e,t.children,n),Ce(),An(),De()},V=(e,t,n,i,r,s,a,o,l=!1)=>{const d=e&&e.children,c=e?e.shapeFlag:0,u=t.children,{patchFlag:h,shapeFlag:p}=t;if(h>0){if(128&h)return void W(d,u,n,i,r,s,a,o,l);if(256&h)return void H(d,u,n,i,r,s,a,o,l)}8&p?(16&c&&X(d,r,s),u!==d&&f(n,u)):16&c?16&p?W(d,u,n,i,r,s,a,o,l):X(d,r,s,!0):(8&c&&f(n,""),16&p&&L(u,n,i,r,s,a,o,l))},H=(e,t,n,i,r,s,o,l,d)=>{t=t||a;const c=(e=e||a).length,u=t.length,h=Math.min(c,u);let f;for(f=0;f<h;f++){const i=t[f]=d?Qs(t[f]):Xs(t[f]);b(e[f],i,n,null,r,s,o,l,d)}c>u?X(e,r,s,!0,!1,h):L(t,n,i,r,s,o,l,d,h)},W=(e,t,n,i,r,s,o,l,d)=>{let c=0;const u=t.length;let h=e.length-1,f=u-1;for(;c<=h&&c<=f;){const i=e[c],a=t[c]=d?Qs(t[c]):Xs(t[c]);if(!Fs(i,a))break;b(i,a,n,null,r,s,o,l,d),c++}for(;c<=h&&c<=f;){const i=e[h],a=t[f]=d?Qs(t[f]):Xs(t[f]);if(!Fs(i,a))break;b(i,a,n,null,r,s,o,l,d),h--,f--}if(c>h){if(c<=f){const e=f+1,a=e<u?t[e].el:i;for(;c<=f;)b(null,t[c]=d?Qs(t[c]):Xs(t[c]),n,a,r,s,o,l,d),c++}}else if(c>f)for(;c<=h;)j(e[c],r,s,!0),c++;else{const p=c,m=c,g=new Map;for(c=m;c<=f;c++){const e=t[c]=d?Qs(t[c]):Xs(t[c]);null!=e.key&&g.set(e.key,c)}let v,y=0;const E=f-m+1;let T=!1,_=0;const A=new Array(E);for(c=0;c<E;c++)A[c]=0;for(c=p;c<=h;c++){const i=e[c];if(y>=E){j(i,r,s,!0);continue}let a;if(null!=i.key)a=g.get(i.key);else for(v=m;v<=f;v++)if(0===A[v-m]&&Fs(i,t[v])){a=v;break}void 0===a?j(i,r,s,!0):(A[a-m]=c+1,a>=_?_=a:T=!0,b(i,t[a],n,null,r,s,o,l,d),y++)}const S=T?function(e){const t=e.slice(),n=[0];let i,r,s,a,o;const l=e.length;for(i=0;i<l;i++){const l=e[i];if(0!==l){if(r=n[n.length-1],e[r]<l){t[i]=r,n.push(i);continue}for(s=0,a=n.length-1;s<a;)o=s+a>>1,e[n[o]]<l?s=o+1:a=o;l<e[n[s]]&&(s>0&&(t[i]=n[s-1]),n[s]=i)}}s=n.length,a=n[s-1];for(;s-- >0;)n[s]=a,a=t[a];return n}(A):a;for(v=S.length-1,c=E-1;c>=0;c--){const e=m+c,a=t[e],h=e+1<u?t[e+1].el:i;0===A[c]?b(null,a,n,h,r,s,o,l,d):T&&(v<0||c!==S[v]?K(a,n,h,2):v--)}}},K=(e,t,i,r,s=null)=>{const{el:a,type:o,transition:l,children:d,shapeFlag:c}=e;if(6&c)return void K(e.component.subTree,t,i,r);if(128&c)return void e.suspense.move(t,i,r);if(64&c)return void o.move(e,t,i,J);if(o===_s){n(a,t,i);for(let e=0;e<d.length;e++)K(d[e],t,i,r);return void n(e.anchor,t,i)}if(o===ks)return void(({el:e,anchor:t},i,r)=>{let s;for(;e&&e!==t;)s=g(e),n(e,i,r),e=s;n(t,i,r)})(e,t,i);if(2!==r&&1&c&&l)if(0===r)l.beforeEnter(a),n(a,t,i),cs((()=>l.enter(a)),s);else{const{leave:e,delayLeave:r,afterLeave:s}=l,o=()=>n(a,t,i),d=()=>{e(a,(()=>{o(),s&&s()}))};r?r(a,o,d):d()}else n(a,t,i)},j=(e,t,n,i=!1,r=!1)=>{const{type:s,props:a,ref:o,children:l,dynamicChildren:d,shapeFlag:c,patchFlag:u,dirs:h}=e;if(null!=o&&ss(o,null,n,e,!0),256&c)return void t.ctx.deactivate(e);const f=1&c&&h,p=!Si(e);let m;if(p&&(m=a&&a.onVnodeBeforeUnmount)&&ea(m,t,e),6&c)z(e.component,n,i);else{if(128&c)return void e.suspense.unmount(n,i);f&&ui(e,null,t,"beforeUnmount"),64&c?e.type.remove(e,t,n,r,J,i):d&&(s!==_s||u>0&&64&u)?X(d,t,n,!1,!0):(s===_s&&384&u||!r&&16&c)&&X(l,t,n),i&&q(e)}(p&&(m=a&&a.onVnodeUnmounted)||f)&&cs((()=>{m&&ea(m,t,e),f&&ui(e,null,t,"unmounted")}),n)},q=e=>{const{type:t,el:n,anchor:r,transition:s}=e;if(t===_s)return void Y(n,r);if(t===ks)return void A(e);const a=()=>{i(n),s&&!s.persisted&&s.afterLeave&&s.afterLeave()};if(1&e.shapeFlag&&s&&!s.persisted){const{leave:t,delayLeave:i}=s,r=()=>t(n,a);i?i(e.el,a,r):r()}else a()},Y=(e,t)=>{let n;for(;e!==t;)n=g(e),i(e),e=n;i(t)},z=(e,t,n)=>{const{bum:i,scope:r,update:s,subTree:a,um:o}=e;i&&B(i),r.stop(),s&&(s.active=!1,j(a,e,t,n)),o&&cs(o,t),cs((()=>{e.isUnmounted=!0}),t),t&&t.pendingBranch&&!t.isUnmounted&&e.asyncDep&&!e.asyncResolved&&e.suspenseId===t.pendingId&&(t.deps--,0===t.deps&&t.resolve())},X=(e,t,n,i=!1,r=!1,s=0)=>{for(let a=s;a<e.length;a++)j(e[a],t,n,i,r)},Q=e=>6&e.shapeFlag?Q(e.component.subTree):128&e.shapeFlag?e.suspense.next():g(e.anchor||e.el),Z=(e,t,n)=>{null==e?t._vnode&&j(t._vnode,null,null,!0):b(t._vnode||null,e,t,null,null,null,n),An(),Sn(),t._vnode=e},J={p:b,um:j,m:K,r:q,mt:N,mc:L,pc:V,pbc:C,n:Q,o:e};let ee,te;return t&&([ee,te]=t(J)),{render:Z,hydrate:ee,createApp:Hr(Z,ee)}}function ps({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function ms(e,t,n=!1){const i=e.children,r=t.children;if(g(i)&&g(r))for(let e=0;e<i.length;e++){const t=i[e];let s=r[e];1&s.shapeFlag&&!s.dynamicChildren&&((s.patchFlag<=0||32===s.patchFlag)&&(s=r[e]=Qs(r[e]),s.el=t.el),n||ms(t,s)),s.type===As&&(s.el=t.el)}}const gs=e=>e&&(e.disabled||""===e.disabled),vs=e=>"undefined"!=typeof SVGElement&&e instanceof SVGElement,ys=(e,t)=>{const n=e&&e.to;if(T(n)){if(t){const e=t(n);return e}return null}return n};function bs(e,t,n,{o:{insert:i},m:r},s=2){0===s&&i(e.targetAnchor,t,n);const{el:a,anchor:o,shapeFlag:l,children:d,props:c}=e,u=2===s;if(u&&i(a,t,n),(!u||gs(c))&&16&l)for(let e=0;e<d.length;e++)r(d[e],t,n,2);u&&i(o,t,n)}const Es={__isTeleport:!0,process(e,t,n,i,r,s,a,o,l,d){const{mc:c,pc:u,pbc:h,o:{insert:f,querySelector:p,createText:m,createComment:g}}=d,v=gs(t.props);let{shapeFlag:y,children:b,dynamicChildren:E}=t;if(null==e){const e=t.el=m(""),d=t.anchor=m("");f(e,n,i),f(d,n,i);const u=t.target=ys(t.props,p),h=t.targetAnchor=m("");u&&(f(h,u),a=a||vs(u));const g=(e,t)=>{16&y&&c(b,e,t,r,s,a,o,l)};v?g(n,d):u&&g(u,h)}else{t.el=e.el;const i=t.anchor=e.anchor,c=t.target=e.target,f=t.targetAnchor=e.targetAnchor,m=gs(e.props),g=m?n:c,y=m?i:f;if(a=a||vs(c),E?(h(e.dynamicChildren,E,g,r,s,a,o),ms(e,t,!0)):l||u(e,t,g,y,r,s,a,o,!1),v)m||bs(t,n,i,d,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const e=t.target=ys(t.props,p);e&&bs(t,e,null,d,0)}else m&&bs(t,c,f,d,1)}Ts(t)},remove(e,t,n,i,{um:r,o:{remove:s}},a){const{shapeFlag:o,children:l,anchor:d,targetAnchor:c,target:u,props:h}=e;if(u&&s(c),(a||!gs(h))&&(s(d),16&o))for(let e=0;e<l.length;e++){const i=l[e];r(i,t,n,!0,!!i.dynamicChildren)}},move:bs,hydrate:function(e,t,n,i,r,s,{o:{nextSibling:a,parentNode:o,querySelector:l}},d){const c=t.target=ys(t.props,l);if(c){const l=c._lpa||c.firstChild;if(16&t.shapeFlag)if(gs(t.props))t.anchor=d(a(e),t,o(e),n,i,r,s),t.targetAnchor=l;else{t.anchor=a(e);let o=l;for(;o;)if(o=a(o),o&&8===o.nodeType&&"teleport anchor"===o.data){t.targetAnchor=o,c._lpa=t.targetAnchor&&a(t.targetAnchor);break}d(l,t,c,n,i,r,s)}Ts(t)}return t.anchor&&a(t.anchor)}};function Ts(e){const t=e.ctx;if(t&&t.ut){let n=e.children[0].el;for(;n!==e.targetAnchor;)1===n.nodeType&&n.setAttribute("data-v-owner",t.uid),n=n.nextSibling;t.ut()}}const _s=Symbol.for("v-fgt"),As=Symbol.for("v-txt"),Ss=Symbol.for("v-cmt"),ks=Symbol.for("v-stc"),ws=[];let Ls=null;function Rs(e=!1){ws.push(Ls=e?null:[])}function Is(){ws.pop(),Ls=ws[ws.length-1]||null}let Cs,Ds=1;function xs(e){Ds+=e}function Ms(e){return e.dynamicChildren=Ds>0?Ls||a:null,Is(),Ds>0&&Ls&&Ls.push(e),e}function Ps(e,t,n,i,r,s){return Ms(Hs(e,t,n,i,r,s,!0))}function Os(e,t,n,i,r){return Ms(Ws(e,t,n,i,r,!0))}function Ns(e){return!!e&&!0===e.__v_isVNode}function Fs(e,t){return e.type===t.type&&e.key===t.key}function Us(e){Cs=e}const Bs="__vInternal",$s=({key:e})=>null!=e?e:null,Vs=({ref:e,ref_key:t,ref_for:n})=>("number"==typeof e&&(e=""+e),null!=e?T(e)||$t(e)||E(e)?{i:On,r:e,k:t,f:!!n}:e:null);function Hs(e,t=null,n=null,i=0,r=null,s=(e===_s?0:1),a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&$s(t),ref:t&&Vs(t),scopeId:Nn,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:i,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:On};return o?(Zs(l,n),128&s&&e.normalize(l)):n&&(l.shapeFlag|=T(n)?8:16),Ds>0&&!a&&Ls&&(l.patchFlag>0||6&s)&&32!==l.patchFlag&&Ls.push(l),l}const Ws=Gs;function Gs(e,t=null,n=null,i=0,r=null,s=!1){if(e&&e!==Qi||(e=Ss),Ns(e)){const i=js(e,t,!0);return n&&Zs(i,n),Ds>0&&!s&&Ls&&(6&i.shapeFlag?Ls[Ls.indexOf(e)]=i:Ls.push(i)),i.patchFlag|=-2,i}if(Aa(e)&&(e=e.__vccOpts),t){t=Ks(t);let{class:e,style:n}=t;e&&!T(e)&&(t.class=Q(e)),A(n)&&(Mt(n)&&!g(n)&&(n=h({},n)),t.style=j(n))}return Hs(e,t,n,i,r,T(e)?1:Yn(e)?128:(e=>e.__isTeleport)(e)?64:A(e)?4:E(e)?2:0,s,!0)}function Ks(e){return e?Mt(e)||Bs in e?h({},e):e:null}function js(e,t,n=!1){const{props:i,ref:r,patchFlag:s,children:a}=e,o=t?Js(i||{},t):i;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:o,key:o&&$s(o),ref:t&&t.ref?n&&r?g(r)?r.concat(Vs(t)):[r,Vs(t)]:Vs(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==_s?-1===s?16:16|s:s,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&js(e.ssContent),ssFallback:e.ssFallback&&js(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function qs(e=" ",t=0){return Ws(As,null,e,t)}function Ys(e,t){const n=Ws(ks,null,e);return n.staticCount=t,n}function zs(e="",t=!1){return t?(Rs(),Os(Ss,null,e)):Ws(Ss,null,e)}function Xs(e){return null==e||"boolean"==typeof e?Ws(Ss):g(e)?Ws(_s,null,e.slice()):"object"==typeof e?Qs(e):Ws(As,null,String(e))}function Qs(e){return null===e.el&&-1!==e.patchFlag||e.memo?e:js(e)}function Zs(e,t){let n=0;const{shapeFlag:i}=e;if(null==t)t=null;else if(g(t))n=16;else if("object"==typeof t){if(65&i){const n=t.default;return void(n&&(n._c&&(n._d=!1),Zs(e,n()),n._c&&(n._d=!0)))}{n=32;const i=t._;i||Bs in t?3===i&&On&&(1===On.slots._?t._=1:(t._=2,e.patchFlag|=1024)):t._ctx=On}}else E(t)?(t={default:t,_ctx:On},n=32):(t=String(t),64&i?(n=16,t=[qs(t)]):n=8);e.children=t,e.shapeFlag|=n}function Js(...e){const t={};for(let n=0;n<e.length;n++){const i=e[n];for(const e in i)if("class"===e)t.class!==i.class&&(t.class=Q([t.class,i.class]));else if("style"===e)t.style=j([t.style,i.style]);else if(c(e)){const n=t[e],r=i[e];!r||n===r||g(n)&&n.includes(r)||(t[e]=n?[].concat(n,r):r)}else""!==e&&(t[e]=i[e])}return t}function ea(e,t,n,i=null){ln(e,t,7,[n,i])}const ta=$r();let na=0;function ia(e,t,n){const i=e.type,r=(t?t.appContext:e.appContext)||ta,a={uid:na++,vnode:e,type:i,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new ce(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:zr(i,r),emitsOptions:Mn(i,r),emit:null,emitted:null,propsDefaults:s,inheritAttrs:i.inheritAttrs,ctx:s,data:s,props:s,attrs:s,slots:s,refs:s,setupState:s,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=xn.bind(null,a),e.ce&&e.ce(a),a}let ra=null;const sa=()=>ra||On;let aa,oa,la="__VUE_INSTANCE_SETTERS__";(oa=G()[la])||(oa=G()[la]=[]),oa.push((e=>ra=e)),aa=e=>{oa.length>1?oa.forEach((t=>t(e))):oa[0](e)};const da=e=>{aa(e),e.scope.on()},ca=()=>{ra&&ra.scope.off(),aa(null)};function ua(e){return 4&e.vnode.shapeFlag}let ha,fa,pa=!1;function ma(e,t=!1){pa=t;const{props:n,children:i}=e.vnode,r=ua(e);!function(e,t,n,i=!1){const r={},s={};$(s,Bs,1),e.propsDefaults=Object.create(null),qr(e,t,r,s);for(const t in e.propsOptions[0])t in r||(r[t]=void 0);n?e.props=i?r:wt(r):e.type.props?e.props=r:e.props=s,e.attrs=s}(e,n,r,t),((e,t)=>{if(32&e.vnode.shapeFlag){const n=t._;n?(e.slots=Pt(t),$(t,"_",n)):is(t,e.slots={})}else e.slots={},t&&rs(e,t);$(e.slots,Bs,1)})(e,i);const s=r?function(e,t){const n=e.type;0;e.accessCache=Object.create(null),e.proxy=Ot(new Proxy(e.ctx,cr)),!1;const{setup:i}=n;if(i){const n=e.setupContext=i.length>1?Ea(e):null;da(e),Ce();const r=on(i,e,0,[e.props,n]);if(De(),ca(),S(r)){if(r.then(ca,ca),t)return r.then((n=>{ga(e,n,t)})).catch((t=>{dn(t,e,0)}));e.asyncDep=r}else ga(e,r,t)}else ba(e,t)}(e,t):void 0;return pa=!1,s}function ga(e,t,n){E(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:A(t)&&(e.setupState=zt(t)),ba(e,n)}function va(e){ha=e,fa=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,ur))}}const ya=()=>!ha;function ba(e,t,n){const i=e.type;if(!e.render){if(!t&&ha&&!i.render){const t=i.template||xr(e).template;if(t){0;const{isCustomElement:n,compilerOptions:r}=e.appContext.config,{delimiters:s,compilerOptions:a}=i,o=h(h({isCustomElement:n,delimiters:s},r),a);i.render=ha(t,o)}}e.render=i.render||o,fa&&fa(e)}da(e),Ce(),Ir(e),De(),ca()}function Ea(e){const t=t=>{e.exposed=t||{}};return{get attrs(){return function(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get:(t,n)=>(xe(e,0,"$attrs"),t[n])}))}(e)},slots:e.slots,emit:e.emit,expose:t}}function Ta(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(zt(Ot(e.exposed)),{get:(t,n)=>n in t?t[n]:n in lr?lr[n](e):void 0,has:(e,t)=>t in e||t in lr}))}function _a(e,t=!0){return E(e)?e.displayName||e.name:e.name||t&&e.__name}function Aa(e){return E(e)&&"__vccOpts"in e}const Sa=(e,t)=>function(e,t,n=!1){let i,r;const s=E(e);return s?(i=e,r=o):(i=e.get,r=e.set),new rn(i,r,s||!r,n)}(e,0,pa);function ka(e,t,n){const i=arguments.length;return 2===i?A(t)&&!g(t)?Ns(t)?Ws(e,null,[t]):Ws(e,t):Ws(e,null,t):(i>3?n=Array.prototype.slice.call(arguments,2):3===i&&Ns(n)&&(n=[n]),Ws(e,t,n))}const wa=Symbol.for("v-scx"),La=()=>{{const e=Kr(wa);return e}};function Ra(){return void 0}function Ia(e,t,n,i){const r=n[i];if(r&&Ca(r,e))return r;const s=t();return s.memo=e.slice(),n[i]=s}function Ca(e,t){const n=e.memo;if(n.length!=t.length)return!1;for(let e=0;e<n.length;e++)if(U(n[e],t[e]))return!1;return Ds>0&&Ls&&Ls.push(e),!0}const Da="3.3.4",xa={createComponentInstance:ia,setupComponent:ma,renderComponentRoot:Hn,setCurrentRenderingInstance:Fn,isVNode:Ns,normalizeVNode:Xs},Ma=null,Pa=null,Oa="undefined"!=typeof document?document:null,Na=Oa&&Oa.createElement("template"),Fa={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,i)=>{const r=t?Oa.createElementNS("http://www.w3.org/2000/svg",e):Oa.createElement(e,n?{is:n}:void 0);return"select"===e&&i&&null!=i.multiple&&r.setAttribute("multiple",i.multiple),r},createText:e=>Oa.createTextNode(e),createComment:e=>Oa.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Oa.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,i,r,s){const a=n?n.previousSibling:t.lastChild;if(r&&(r===s||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),n),r!==s&&(r=r.nextSibling););else{Na.innerHTML=i?`<svg>${e}</svg>`:e;const r=Na.content;if(i){const e=r.firstChild;for(;e.firstChild;)r.appendChild(e.firstChild);r.removeChild(e)}t.insertBefore(r,n)}return[a?a.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};const Ua=/\s*!important$/;function Ba(e,t,n){if(g(n))n.forEach((n=>Ba(e,t,n)));else if(null==n&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const i=function(e,t){const n=Va[t];if(n)return n;let i=M(t);if("filter"!==i&&i in e)return Va[t]=i;i=N(i);for(let n=0;n<$a.length;n++){const r=$a[n]+i;if(r in e)return Va[t]=r}return t}(e,t);Ua.test(n)?e.setProperty(O(i),n.replace(Ua,""),"important"):e[i]=n}}const $a=["Webkit","Moz","ms"],Va={};const Ha="http://www.w3.org/1999/xlink";function Wa(e,t,n,i){e.addEventListener(t,n,i)}function Ga(e,t,n,i,r=null){const s=e._vei||(e._vei={}),a=s[t];if(i&&a)a.value=i;else{const[n,o]=function(e){let t;if(Ka.test(e)){let n;for(t={};n=e.match(Ka);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}const n=":"===e[2]?e.slice(3):O(e.slice(2));return[n,t]}(t);if(i){const a=s[t]=function(e,t){const n=e=>{if(e._vts){if(e._vts<=n.attached)return}else e._vts=Date.now();ln(function(e,t){if(g(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map((e=>t=>!t._stopped&&e&&e(t)))}return t}(e,n.value),t,5,[e])};return n.value=e,n.attached=(()=>ja||(qa.then((()=>ja=0)),ja=Date.now()))(),n}(i,r);Wa(e,n,a,o)}else a&&(!function(e,t,n,i){e.removeEventListener(t,n,i)}(e,n,a,o),s[t]=void 0)}}const Ka=/(?:Once|Passive|Capture)$/;let ja=0;const qa=Promise.resolve();const Ya=/^on[a-z]/;function za(e,t){const n=Ai(e);class i extends Za{constructor(e){super(n,e,t)}}return i.def=n,i}const Xa=e=>za(e,nl),Qa="undefined"!=typeof HTMLElement?HTMLElement:class{};class Za extends Qa{constructor(e,t={},n){super(),this._def=e,this._props=t,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this.shadowRoot&&n?n(this._createVNode(),this.shadowRoot):(this.attachShadow({mode:"open"}),this._def.__asyncLoader||this._resolveProps(this._def))}connectedCallback(){this._connected=!0,this._instance||(this._resolved?this._update():this._resolveDef())}disconnectedCallback(){this._connected=!1,bn((()=>{this._connected||(tl(null,this.shadowRoot),this._instance=null)}))}_resolveDef(){this._resolved=!0;for(let e=0;e<this.attributes.length;e++)this._setAttr(this.attributes[e].name);new MutationObserver((e=>{for(const t of e)this._setAttr(t.attributeName)})).observe(this,{attributes:!0});const e=(e,t=!1)=>{const{props:n,styles:i}=e;let r;if(n&&!g(n))for(const e in n){const t=n[e];(t===Number||t&&t.type===Number)&&(e in this._props&&(this._props[e]=H(this._props[e])),(r||(r=Object.create(null)))[M(e)]=!0)}this._numberProps=r,t&&this._resolveProps(e),this._applyStyles(i),this._update()},t=this._def.__asyncLoader;t?t().then((t=>e(t,!0))):e(this._def)}_resolveProps(e){const{props:t}=e,n=g(t)?t:Object.keys(t||{});for(const e of Object.keys(this))"_"!==e[0]&&n.includes(e)&&this._setProp(e,this[e],!0,!1);for(const e of n.map(M))Object.defineProperty(this,e,{get(){return this._getProp(e)},set(t){this._setProp(e,t)}})}_setAttr(e){let t=this.getAttribute(e);const n=M(e);this._numberProps&&this._numberProps[n]&&(t=H(t)),this._setProp(n,t,!1)}_getProp(e){return this._props[e]}_setProp(e,t,n=!0,i=!0){t!==this._props[e]&&(this._props[e]=t,i&&this._instance&&this._update(),n&&(!0===t?this.setAttribute(O(e),""):"string"==typeof t||"number"==typeof t?this.setAttribute(O(e),t+""):t||this.removeAttribute(O(e))))}_update(){tl(this._createVNode(),this.shadowRoot)}_createVNode(){const e=Ws(this._def,h({},this._props));return this._instance||(e.ce=e=>{this._instance=e,e.isCE=!0;const t=(e,t)=>{this.dispatchEvent(new CustomEvent(e,{detail:t}))};e.emit=(e,...n)=>{t(e,n),O(e)!==e&&t(O(e),n)};let n=this;for(;n=n&&(n.parentNode||n.host);)if(n instanceof Za){e.parent=n._instance,e.provides=n._instance.provides;break}}),e}_applyStyles(e){e&&e.forEach((e=>{const t=document.createElement("style");t.textContent=e,this.shadowRoot.appendChild(t)}))}}function Ja(e="$style"){{const t=sa();if(!t)return s;const n=t.type.__cssModules;if(!n)return s;const i=n[e];return i||s}}function eo(e){const t=sa();if(!t)return;const n=t.ut=(n=e(t.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${t.uid}"]`)).forEach((e=>no(e,n)))},i=()=>{const i=e(t.proxy);to(t.subTree,i),n(i)};ni(i),$i((()=>{const e=new MutationObserver(i);e.observe(t.subTree.el.parentNode,{childList:!0}),Gi((()=>e.disconnect()))}))}function to(e,t){if(128&e.shapeFlag){const n=e.suspense;e=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push((()=>{to(n.activeBranch,t)}))}for(;e.component;)e=e.component.subTree;if(1&e.shapeFlag&&e.el)no(e.el,t);else if(e.type===_s)e.children.forEach((e=>to(e,t)));else if(e.type===ks){let{el:n,anchor:i}=e;for(;n&&(no(n,t),n!==i);)n=n.nextSibling}}function no(e,t){if(1===e.nodeType){const n=e.style;for(const e in t)n.setProperty(`--${e}`,t[e])}}const io="transition",ro="animation",so=(e,{slots:t})=>ka(gi,uo(e),t);so.displayName="Transition";const ao={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},oo=so.props=h({},pi,ao),lo=(e,t=[])=>{g(e)?e.forEach((e=>e(...t))):e&&e(...t)},co=e=>!!e&&(g(e)?e.some((e=>e.length>1)):e.length>1);function uo(e){const t={};for(const n in e)n in ao||(t[n]=e[n]);if(!1===e.css)return t;const{name:n="v",type:i,duration:r,enterFromClass:s=`${n}-enter-from`,enterActiveClass:a=`${n}-enter-active`,enterToClass:o=`${n}-enter-to`,appearFromClass:l=s,appearActiveClass:d=a,appearToClass:c=o,leaveFromClass:u=`${n}-leave-from`,leaveActiveClass:f=`${n}-leave-active`,leaveToClass:p=`${n}-leave-to`}=e,m=function(e){if(null==e)return null;if(A(e))return[ho(e.enter),ho(e.leave)];{const t=ho(e);return[t,t]}}(r),g=m&&m[0],v=m&&m[1],{onBeforeEnter:y,onEnter:b,onEnterCancelled:E,onLeave:T,onLeaveCancelled:_,onBeforeAppear:S=y,onAppear:k=b,onAppearCancelled:w=E}=t,L=(e,t,n)=>{po(e,t?c:o),po(e,t?d:a),n&&n()},R=(e,t)=>{e._isLeaving=!1,po(e,u),po(e,p),po(e,f),t&&t()},I=e=>(t,n)=>{const r=e?k:b,a=()=>L(t,e,n);lo(r,[t,a]),mo((()=>{po(t,e?l:s),fo(t,e?c:o),co(r)||vo(t,i,g,a)}))};return h(t,{onBeforeEnter(e){lo(y,[e]),fo(e,s),fo(e,a)},onBeforeAppear(e){lo(S,[e]),fo(e,l),fo(e,d)},onEnter:I(!1),onAppear:I(!0),onLeave(e,t){e._isLeaving=!0;const n=()=>R(e,t);fo(e,u),To(),fo(e,f),mo((()=>{e._isLeaving&&(po(e,u),fo(e,p),co(T)||vo(e,i,v,n))})),lo(T,[e,n])},onEnterCancelled(e){L(e,!1),lo(E,[e])},onAppearCancelled(e){L(e,!0),lo(w,[e])},onLeaveCancelled(e){R(e),lo(_,[e])}})}function ho(e){return H(e)}function fo(e,t){t.split(/\s+/).forEach((t=>t&&e.classList.add(t))),(e._vtc||(e._vtc=new Set)).add(t)}function po(e,t){t.split(/\s+/).forEach((t=>t&&e.classList.remove(t)));const{_vtc:n}=e;n&&(n.delete(t),n.size||(e._vtc=void 0))}function mo(e){requestAnimationFrame((()=>{requestAnimationFrame(e)}))}let go=0;function vo(e,t,n,i){const r=e._endId=++go,s=()=>{r===e._endId&&i()};if(n)return setTimeout(s,n);const{type:a,timeout:o,propCount:l}=yo(e,t);if(!a)return i();const d=a+"end";let c=0;const u=()=>{e.removeEventListener(d,h),s()},h=t=>{t.target===e&&++c>=l&&u()};setTimeout((()=>{c<l&&u()}),o+1),e.addEventListener(d,h)}function yo(e,t){const n=window.getComputedStyle(e),i=e=>(n[e]||"").split(", "),r=i(`${io}Delay`),s=i(`${io}Duration`),a=bo(r,s),o=i(`${ro}Delay`),l=i(`${ro}Duration`),d=bo(o,l);let c=null,u=0,h=0;t===io?a>0&&(c=io,u=a,h=s.length):t===ro?d>0&&(c=ro,u=d,h=l.length):(u=Math.max(a,d),c=u>0?a>d?io:ro:null,h=c?c===io?s.length:l.length:0);return{type:c,timeout:u,propCount:h,hasTransform:c===io&&/\b(transform|all)(,|$)/.test(i(`${io}Property`).toString())}}function bo(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map(((t,n)=>Eo(t)+Eo(e[n]))))}function Eo(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function To(){return document.body.offsetHeight}const _o=new WeakMap,Ao=new WeakMap,So={name:"TransitionGroup",props:h({},oo,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=sa(),i=hi();let r,s;return Hi((()=>{if(!r.length)return;const t=e.moveClass||`${e.name||"v"}-move`;if(!function(e,t,n){const i=e.cloneNode();e._vtc&&e._vtc.forEach((e=>{e.split(/\s+/).forEach((e=>e&&i.classList.remove(e)))}));n.split(/\s+/).forEach((e=>e&&i.classList.add(e))),i.style.display="none";const r=1===t.nodeType?t:t.parentNode;r.appendChild(i);const{hasTransform:s}=yo(i);return r.removeChild(i),s}(r[0].el,n.vnode.el,t))return;r.forEach(wo),r.forEach(Lo);const i=r.filter(Ro);To(),i.forEach((e=>{const n=e.el,i=n.style;fo(n,t),i.transform=i.webkitTransform=i.transitionDuration="";const r=n._moveCb=e=>{e&&e.target!==n||e&&!/transform$/.test(e.propertyName)||(n.removeEventListener("transitionend",r),n._moveCb=null,po(n,t))};n.addEventListener("transitionend",r)}))})),()=>{const a=Pt(e),o=uo(a);let l=a.tag||_s;r=s,s=t.default?_i(t.default()):[];for(let e=0;e<s.length;e++){const t=s[e];null!=t.key&&Ti(t,yi(t,o,i,n))}if(r)for(let e=0;e<r.length;e++){const t=r[e];Ti(t,yi(t,o,i,n)),_o.set(t,t.el.getBoundingClientRect())}return Ws(l,null,s)}}},ko=So;function wo(e){const t=e.el;t._moveCb&&t._moveCb(),t._enterCb&&t._enterCb()}function Lo(e){Ao.set(e,e.el.getBoundingClientRect())}function Ro(e){const t=_o.get(e),n=Ao.get(e),i=t.left-n.left,r=t.top-n.top;if(i||r){const t=e.el.style;return t.transform=t.webkitTransform=`translate(${i}px,${r}px)`,t.transitionDuration="0s",e}}const Io=e=>{const t=e.props["onUpdate:modelValue"]||!1;return g(t)?e=>B(t,e):t};function Co(e){e.target.composing=!0}function Do(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const xo={created(e,{modifiers:{lazy:t,trim:n,number:i}},r){e._assign=Io(r);const s=i||r.props&&"number"===r.props.type;Wa(e,t?"change":"input",(t=>{if(t.target.composing)return;let i=e.value;n&&(i=i.trim()),s&&(i=V(i)),e._assign(i)})),n&&Wa(e,"change",(()=>{e.value=e.value.trim()})),t||(Wa(e,"compositionstart",Co),Wa(e,"compositionend",Do),Wa(e,"change",Do))},mounted(e,{value:t}){e.value=null==t?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:i,number:r}},s){if(e._assign=Io(s),e.composing)return;if(document.activeElement===e&&"range"!==e.type){if(n)return;if(i&&e.value.trim()===t)return;if((r||"number"===e.type)&&V(e.value)===t)return}const a=null==t?"":t;e.value!==a&&(e.value=a)}},Mo={deep:!0,created(e,t,n){e._assign=Io(n),Wa(e,"change",(()=>{const t=e._modelValue,n=Uo(e),i=e.checked,r=e._assign;if(g(t)){const e=ae(t,n),s=-1!==e;if(i&&!s)r(t.concat(n));else if(!i&&s){const n=[...t];n.splice(e,1),r(n)}}else if(y(t)){const e=new Set(t);i?e.add(n):e.delete(n),r(e)}else r(Bo(e,i))}))},mounted:Po,beforeUpdate(e,t,n){e._assign=Io(n),Po(e,t,n)}};function Po(e,{value:t,oldValue:n},i){e._modelValue=t,g(t)?e.checked=ae(t,i.props.value)>-1:y(t)?e.checked=t.has(i.props.value):t!==n&&(e.checked=se(t,Bo(e,!0)))}const Oo={created(e,{value:t},n){e.checked=se(t,n.props.value),e._assign=Io(n),Wa(e,"change",(()=>{e._assign(Uo(e))}))},beforeUpdate(e,{value:t,oldValue:n},i){e._assign=Io(i),t!==n&&(e.checked=se(t,i.props.value))}},No={deep:!0,created(e,{value:t,modifiers:{number:n}},i){const r=y(t);Wa(e,"change",(()=>{const t=Array.prototype.filter.call(e.options,(e=>e.selected)).map((e=>n?V(Uo(e)):Uo(e)));e._assign(e.multiple?r?new Set(t):t:t[0])})),e._assign=Io(i)},mounted(e,{value:t}){Fo(e,t)},beforeUpdate(e,t,n){e._assign=Io(n)},updated(e,{value:t}){Fo(e,t)}};function Fo(e,t){const n=e.multiple;if(!n||g(t)||y(t)){for(let i=0,r=e.options.length;i<r;i++){const r=e.options[i],s=Uo(r);if(n)g(t)?r.selected=ae(t,s)>-1:r.selected=t.has(s);else if(se(Uo(r),t))return void(e.selectedIndex!==i&&(e.selectedIndex=i))}n||-1===e.selectedIndex||(e.selectedIndex=-1)}}function Uo(e){return"_value"in e?e._value:e.value}function Bo(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const $o={created(e,t,n){Ho(e,t,n,null,"created")},mounted(e,t,n){Ho(e,t,n,null,"mounted")},beforeUpdate(e,t,n,i){Ho(e,t,n,i,"beforeUpdate")},updated(e,t,n,i){Ho(e,t,n,i,"updated")}};function Vo(e,t){switch(e){case"SELECT":return No;case"TEXTAREA":return xo;default:switch(t){case"checkbox":return Mo;case"radio":return Oo;default:return xo}}}function Ho(e,t,n,i,r){const s=Vo(e.tagName,n.props&&n.props.type)[r];s&&s(e,t,n,i)}const Wo=["ctrl","shift","alt","meta"],Go={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&0!==e.button,middle:e=>"button"in e&&1!==e.button,right:e=>"button"in e&&2!==e.button,exact:(e,t)=>Wo.some((n=>e[`${n}Key`]&&!t.includes(n)))},Ko=(e,t)=>(n,...i)=>{for(let e=0;e<t.length;e++){const i=Go[t[e]];if(i&&i(n,t))return}return e(n,...i)},jo={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},qo=(e,t)=>n=>{if(!("key"in n))return;const i=O(n.key);return t.some((e=>e===i||jo[e]===i))?e(n):void 0},Yo={beforeMount(e,{value:t},{transition:n}){e._vod="none"===e.style.display?"":e.style.display,n&&t?n.beforeEnter(e):zo(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:i}){!t!=!n&&(i?t?(i.beforeEnter(e),zo(e,!0),i.enter(e)):i.leave(e,(()=>{zo(e,!1)})):zo(e,t))},beforeUnmount(e,{value:t}){zo(e,t)}};function zo(e,t){e.style.display=t?e._vod:"none"}const Xo=h({patchProp:(e,t,n,i,r=!1,s,a,o,l)=>{"class"===t?function(e,t,n){const i=e._vtc;i&&(t=(t?[t,...i]:[...i]).join(" ")),null==t?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}(e,i,r):"style"===t?function(e,t,n){const i=e.style,r=T(n);if(n&&!r){if(t&&!T(t))for(const e in t)null==n[e]&&Ba(i,e,"");for(const e in n)Ba(i,e,n[e])}else{const s=i.display;r?t!==n&&(i.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(i.display=s)}}(e,n,i):c(t)?u(t)||Ga(e,t,0,i,a):("."===t[0]?(t=t.slice(1),1):"^"===t[0]?(t=t.slice(1),0):function(e,t,n,i){if(i)return"innerHTML"===t||"textContent"===t||!!(t in e&&Ya.test(t)&&E(n));if("spellcheck"===t||"draggable"===t||"translate"===t)return!1;if("form"===t)return!1;if("list"===t&&"INPUT"===e.tagName)return!1;if("type"===t&&"TEXTAREA"===e.tagName)return!1;if(Ya.test(t)&&T(n))return!1;return t in e}(e,t,i,r))?function(e,t,n,i,r,s,a){if("innerHTML"===t||"textContent"===t)return i&&a(i,r,s),void(e[t]=null==n?"":n);const o=e.tagName;if("value"===t&&"PROGRESS"!==o&&!o.includes("-")){e._value=n;const i=null==n?"":n;return("OPTION"===o?e.getAttribute("value"):e.value)!==i&&(e.value=i),void(null==n&&e.removeAttribute(t))}let l=!1;if(""===n||null==n){const i=typeof e[t];"boolean"===i?n=re(n):null==n&&"string"===i?(n="",l=!0):"number"===i&&(n=0,l=!0)}try{e[t]=n}catch(e){}l&&e.removeAttribute(t)}(e,t,i,s,a,o,l):("true-value"===t?e._trueValue=i:"false-value"===t&&(e._falseValue=i),function(e,t,n,i,r){if(i&&t.startsWith("xlink:"))null==n?e.removeAttributeNS(Ha,t.slice(6,t.length)):e.setAttributeNS(Ha,t,n);else{const i=ie(t);null==n||i&&!re(n)?e.removeAttribute(t):e.setAttribute(t,i?"":n)}}(e,t,i,r))}},Fa);let Qo,Zo=!1;function Jo(){return Qo||(Qo=us(Xo))}function el(){return Qo=Zo?Qo:hs(Xo),Zo=!0,Qo}const tl=(...e)=>{Jo().render(...e)},nl=(...e)=>{el().hydrate(...e)},il=(...e)=>{const t=Jo().createApp(...e);const{mount:n}=t;return t.mount=e=>{const i=sl(e);if(!i)return;const r=t._component;E(r)||r.render||r.template||(r.template=i.innerHTML),i.innerHTML="";const s=n(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),s},t},rl=(...e)=>{const t=el().createApp(...e);const{mount:n}=t;return t.mount=e=>{const t=sl(e);if(t)return n(t,!0,t instanceof SVGElement)},t};function sl(e){if(T(e)){return document.querySelector(e)}return e}let al=!1;const ol=()=>{al||(al=!0,xo.getSSRProps=({value:e})=>({value:e}),Oo.getSSRProps=({value:e},t)=>{if(t.props&&se(t.props.value,e))return{checked:!0}},Mo.getSSRProps=({value:e},t)=>{if(g(e)){if(t.props&&ae(e,t.props.value)>-1)return{checked:!0}}else if(y(e)){if(t.props&&e.has(t.props.value))return{checked:!0}}else if(e)return{checked:!0}},$o.getSSRProps=(e,t)=>{if("string"!=typeof t.type)return;const n=Vo(t.type.toUpperCase(),t.props&&t.props.type);return n.getSSRProps?n.getSSRProps(e,t):void 0},Yo.getSSRProps=({value:e})=>{if(!e)return{style:{display:"none"}}})};function ll(e){throw e}function dl(e){}function cl(e,t,n,i){const r=new SyntaxError(String(e));return r.code=e,r.loc=t,r}const ul=Symbol(""),hl=Symbol(""),fl=Symbol(""),pl=Symbol(""),ml=Symbol(""),gl=Symbol(""),vl=Symbol(""),yl=Symbol(""),bl=Symbol(""),El=Symbol(""),Tl=Symbol(""),_l=Symbol(""),Al=Symbol(""),Sl=Symbol(""),kl=Symbol(""),wl=Symbol(""),Ll=Symbol(""),Rl=Symbol(""),Il=Symbol(""),Cl=Symbol(""),Dl=Symbol(""),xl=Symbol(""),Ml=Symbol(""),Pl=Symbol(""),Ol=Symbol(""),Nl=Symbol(""),Fl=Symbol(""),Ul=Symbol(""),Bl=Symbol(""),$l=Symbol(""),Vl=Symbol(""),Hl=Symbol(""),Wl=Symbol(""),Gl=Symbol(""),Kl=Symbol(""),jl=Symbol(""),ql=Symbol(""),Yl=Symbol(""),zl=Symbol(""),Xl={[ul]:"Fragment",[hl]:"Teleport",[fl]:"Suspense",[pl]:"KeepAlive",[ml]:"BaseTransition",[gl]:"openBlock",[vl]:"createBlock",[yl]:"createElementBlock",[bl]:"createVNode",[El]:"createElementVNode",[Tl]:"createCommentVNode",[_l]:"createTextVNode",[Al]:"createStaticVNode",[Sl]:"resolveComponent",[kl]:"resolveDynamicComponent",[wl]:"resolveDirective",[Ll]:"resolveFilter",[Rl]:"withDirectives",[Il]:"renderList",[Cl]:"renderSlot",[Dl]:"createSlots",[xl]:"toDisplayString",[Ml]:"mergeProps",[Pl]:"normalizeClass",[Ol]:"normalizeStyle",[Nl]:"normalizeProps",[Fl]:"guardReactiveProps",[Ul]:"toHandlers",[Bl]:"camelize",[$l]:"capitalize",[Vl]:"toHandlerKey",[Hl]:"setBlockTracking",[Wl]:"pushScopeId",[Gl]:"popScopeId",[Kl]:"withCtx",[jl]:"unref",[ql]:"isRef",[Yl]:"withMemo",[zl]:"isMemoSame"};const Ql={source:"",start:{line:1,column:1,offset:0},end:{line:1,column:1,offset:0}};function Zl(e,t,n,i,r,s,a,o=!1,l=!1,d=!1,c=Ql){return e&&(o?(e.helper(gl),e.helper(ld(e.inSSR,d))):e.helper(od(e.inSSR,d)),a&&e.helper(Rl)),{type:13,tag:t,props:n,children:i,patchFlag:r,dynamicProps:s,directives:a,isBlock:o,disableTracking:l,isComponent:d,loc:c}}function Jl(e,t=Ql){return{type:17,loc:t,elements:e}}function ed(e,t=Ql){return{type:15,loc:t,properties:e}}function td(e,t){return{type:16,loc:Ql,key:T(e)?nd(e,!0):e,value:t}}function nd(e,t=!1,n=Ql,i=0){return{type:4,loc:n,content:e,isStatic:t,constType:t?3:i}}function id(e,t=Ql){return{type:8,loc:t,children:e}}function rd(e,t=[],n=Ql){return{type:14,loc:n,callee:e,arguments:t}}function sd(e,t,n=!1,i=!1,r=Ql){return{type:18,params:e,returns:t,newline:n,isSlot:i,loc:r}}function ad(e,t,n,i=!0){return{type:19,test:e,consequent:t,alternate:n,newline:i,loc:Ql}}function od(e,t){return e||t?bl:El}function ld(e,t){return e||t?vl:yl}function dd(e,{helper:t,removeHelper:n,inSSR:i}){e.isBlock||(e.isBlock=!0,n(od(i,e.isComponent)),t(gl),t(ld(i,e.isComponent)))}const cd=e=>4===e.type&&e.isStatic,ud=(e,t)=>e===t||e===O(t);function hd(e){return ud(e,"Teleport")?hl:ud(e,"Suspense")?fl:ud(e,"KeepAlive")?pl:ud(e,"BaseTransition")?ml:void 0}const fd=/^\d|[^\$\w]/,pd=e=>!fd.test(e),md=/[A-Za-z_$\xA0-\uFFFF]/,gd=/[\.\?\w$\xA0-\uFFFF]/,vd=/\s+[.[]\s*|\s*[.[]\s+/g,yd=e=>{e=e.trim().replace(vd,(e=>e.trim()));let t=0,n=[],i=0,r=0,s=null;for(let a=0;a<e.length;a++){const o=e.charAt(a);switch(t){case 0:if("["===o)n.push(t),t=1,i++;else if("("===o)n.push(t),t=2,r++;else if(!(0===a?md:gd).test(o))return!1;break;case 1:"'"===o||'"'===o||"`"===o?(n.push(t),t=3,s=o):"["===o?i++:"]"===o&&(--i||(t=n.pop()));break;case 2:if("'"===o||'"'===o||"`"===o)n.push(t),t=3,s=o;else if("("===o)r++;else if(")"===o){if(a===e.length-1)return!1;--r||(t=n.pop())}break;case 3:o===s&&(t=n.pop(),s=null)}}return!i&&!r};function bd(e,t,n){const i={source:e.source.slice(t,t+n),start:Ed(e.start,e.source,t),end:e.end};return null!=n&&(i.end=Ed(e.start,e.source,t+n)),i}function Ed(e,t,n=t.length){return Td(h({},e),t,n)}function Td(e,t,n=t.length){let i=0,r=-1;for(let e=0;e<n;e++)10===t.charCodeAt(e)&&(i++,r=e);return e.offset+=n,e.line+=i,e.column=-1===r?e.column+n:n-r,e}function _d(e,t,n=!1){for(let i=0;i<e.props.length;i++){const r=e.props[i];if(7===r.type&&(n||r.exp)&&(T(t)?r.name===t:t.test(r.name)))return r}}function Ad(e,t,n=!1,i=!1){for(let r=0;r<e.props.length;r++){const s=e.props[r];if(6===s.type){if(n)continue;if(s.name===t&&(s.value||i))return s}else if("bind"===s.name&&(s.exp||i)&&Sd(s.arg,t))return s}}function Sd(e,t){return!(!e||!cd(e)||e.content!==t)}function kd(e){return 5===e.type||2===e.type}function wd(e){return 7===e.type&&"slot"===e.name}function Ld(e){return 1===e.type&&3===e.tagType}function Rd(e){return 1===e.type&&2===e.tagType}const Id=new Set([Nl,Fl]);function Cd(e,t=[]){if(e&&!T(e)&&14===e.type){const n=e.callee;if(!T(n)&&Id.has(n))return Cd(e.arguments[0],t.concat(e))}return[e,t]}function Dd(e,t,n){let i,r,s=13===e.type?e.props:e.arguments[2],a=[];if(s&&!T(s)&&14===s.type){const e=Cd(s);s=e[0],a=e[1],r=a[a.length-1]}if(null==s||T(s))i=ed([t]);else if(14===s.type){const e=s.arguments[0];T(e)||15!==e.type?s.callee===Ul?i=rd(n.helper(Ml),[ed([t]),s]):s.arguments.unshift(ed([t])):xd(t,e)||e.properties.unshift(t),!i&&(i=s)}else 15===s.type?(xd(t,s)||s.properties.unshift(t),i=s):(i=rd(n.helper(Ml),[ed([t]),s]),r&&r.callee===Fl&&(r=a[a.length-2]));13===e.type?r?r.arguments[0]=i:e.props=i:r?r.arguments[0]=i:e.arguments[2]=i}function xd(e,t){let n=!1;if(4===e.key.type){const i=e.key.content;n=t.properties.some((e=>4===e.key.type&&e.key.content===i))}return n}function Md(e,t){return`_${t}_${e.replace(/[^\w]/g,((t,n)=>"-"===t?"_":e.charCodeAt(n).toString()))}`}function Pd(e,t){const n=t.options?t.options.compatConfig:t.compatConfig,i=n&&n[e];return"MODE"===e?i||3:i}function Od(e,t){const n=Pd("MODE",t),i=Pd(e,t);return 3===n?!0===i:!1!==i}function Nd(e,t,n,...i){return Od(e,t)}const Fd=/&(gt|lt|amp|apos|quot);/g,Ud={gt:">",lt:"<",amp:"&",apos:"'",quot:'"'},Bd={delimiters:["{{","}}"],getNamespace:()=>0,getTextMode:()=>0,isVoidTag:l,isPreTag:l,isCustomElement:l,decodeEntities:e=>e.replace(Fd,((e,t)=>Ud[t])),onError:ll,onWarn:dl,comments:!1};function $d(e,t={}){const n=function(e,t){const n=h({},Bd);let i;for(i in t)n[i]=void 0===t[i]?Bd[i]:t[i];return{options:n,column:1,line:1,offset:0,originalSource:e,source:e,inPre:!1,inVPre:!1,onWarn:n.onWarn}}(e,t),i=tc(n);return function(e,t=Ql){return{type:0,children:e,helpers:new Set,components:[],directives:[],hoists:[],imports:[],cached:0,temps:0,codegenNode:void 0,loc:t}}(Vd(n,0,[]),nc(n,i))}function Vd(e,t,n){const i=ic(n),r=i?i.ns:0,s=[];for(;!dc(e,t,n);){const a=e.source;let o;if(0===t||1===t)if(!e.inVPre&&rc(a,e.options.delimiters[0]))o=Zd(e,t);else if(0===t&&"<"===a[0])if(1===a.length)lc(e,5,1);else if("!"===a[1])rc(a,"\x3c!--")?o=Gd(e):rc(a,"<!DOCTYPE")?o=Kd(e):rc(a,"<![CDATA[")?0!==r?o=Wd(e,n):(lc(e,1),o=Kd(e)):(lc(e,11),o=Kd(e));else if("/"===a[1])if(2===a.length)lc(e,5,2);else{if(">"===a[2]){lc(e,14,2),sc(e,3);continue}if(/[a-z]/i.test(a[2])){lc(e,23),zd(e,qd.End,i);continue}lc(e,12,2),o=Kd(e)}else/[a-z]/i.test(a[1])?(o=jd(e,n),Od("COMPILER_NATIVE_TEMPLATE",e)&&o&&"template"===o.tag&&!o.props.some((e=>7===e.type&&Yd(e.name)))&&(o=o.children)):"?"===a[1]?(lc(e,21,1),o=Kd(e)):lc(e,12,1);if(o||(o=Jd(e,t)),g(o))for(let e=0;e<o.length;e++)Hd(s,o[e]);else Hd(s,o)}let a=!1;if(2!==t&&1!==t){const t="preserve"!==e.options.whitespace;for(let n=0;n<s.length;n++){const i=s[n];if(2===i.type)if(e.inPre)i.content=i.content.replace(/\r\n/g,"\n");else if(/[^\t\r\n\f ]/.test(i.content))t&&(i.content=i.content.replace(/[\t\r\n\f ]+/g," "));else{const e=s[n-1],r=s[n+1];!e||!r||t&&(3===e.type&&3===r.type||3===e.type&&1===r.type||1===e.type&&3===r.type||1===e.type&&1===r.type&&/[\r\n]/.test(i.content))?(a=!0,s[n]=null):i.content=" "}else 3!==i.type||e.options.comments||(a=!0,s[n]=null)}if(e.inPre&&i&&e.options.isPreTag(i.tag)){const e=s[0];e&&2===e.type&&(e.content=e.content.replace(/^\r?\n/,""))}}return a?s.filter(Boolean):s}function Hd(e,t){if(2===t.type){const n=ic(e);if(n&&2===n.type&&n.loc.end.offset===t.loc.start.offset)return n.content+=t.content,n.loc.end=t.loc.end,void(n.loc.source+=t.loc.source)}e.push(t)}function Wd(e,t){sc(e,9);const n=Vd(e,3,t);return 0===e.source.length?lc(e,6):sc(e,3),n}function Gd(e){const t=tc(e);let n;const i=/--(\!)?>/.exec(e.source);if(i){i.index<=3&&lc(e,0),i[1]&&lc(e,10),n=e.source.slice(4,i.index);const t=e.source.slice(0,i.index);let r=1,s=0;for(;-1!==(s=t.indexOf("\x3c!--",r));)sc(e,s-r+1),s+4<t.length&&lc(e,16),r=s+1;sc(e,i.index+i[0].length-r+1)}else n=e.source.slice(4),sc(e,e.source.length),lc(e,7);return{type:3,content:n,loc:nc(e,t)}}function Kd(e){const t=tc(e),n="?"===e.source[1]?1:2;let i;const r=e.source.indexOf(">");return-1===r?(i=e.source.slice(n),sc(e,e.source.length)):(i=e.source.slice(n,r),sc(e,r+1)),{type:3,content:i,loc:nc(e,t)}}function jd(e,t){const n=e.inPre,i=e.inVPre,r=ic(t),s=zd(e,qd.Start,r),a=e.inPre&&!n,o=e.inVPre&&!i;if(s.isSelfClosing||e.options.isVoidTag(s.tag))return a&&(e.inPre=!1),o&&(e.inVPre=!1),s;t.push(s);const l=e.options.getTextMode(s,r),d=Vd(e,l,t);t.pop();{const t=s.props.find((e=>6===e.type&&"inline-template"===e.name));if(t&&Nd("COMPILER_INLINE_TEMPLATE",e,t.loc)){const n=nc(e,s.loc.end);t.value={type:2,content:n.source,loc:n}}}if(s.children=d,cc(e.source,s.tag))zd(e,qd.End,r);else if(lc(e,24,0,s.loc.start),0===e.source.length&&"script"===s.tag.toLowerCase()){const t=d[0];t&&rc(t.loc.source,"\x3c!--")&&lc(e,8)}return s.loc=nc(e,s.loc.start),a&&(e.inPre=!1),o&&(e.inVPre=!1),s}var qd=(e=>(e[e.Start=0]="Start",e[e.End=1]="End",e))(qd||{});const Yd=r("if,else,else-if,for,slot");function zd(e,t,n){const i=tc(e),r=/^<\/?([a-z][^\t\r\n\f />]*)/i.exec(e.source),s=r[1],a=e.options.getNamespace(s,n);sc(e,r[0].length),ac(e);const o=tc(e),l=e.source;e.options.isPreTag(s)&&(e.inPre=!0);let d=Xd(e,t);0===t&&!e.inVPre&&d.some((e=>7===e.type&&"pre"===e.name))&&(e.inVPre=!0,h(e,o),e.source=l,d=Xd(e,t).filter((e=>"v-pre"!==e.name)));let c=!1;if(0===e.source.length?lc(e,9):(c=rc(e.source,"/>"),1===t&&c&&lc(e,4),sc(e,c?2:1)),1===t)return;let u=0;return e.inVPre||("slot"===s?u=2:"template"===s?d.some((e=>7===e.type&&Yd(e.name)))&&(u=3):function(e,t,n){const i=n.options;if(i.isCustomElement(e))return!1;if("component"===e||/^[A-Z]/.test(e)||hd(e)||i.isBuiltInComponent&&i.isBuiltInComponent(e)||i.isNativeTag&&!i.isNativeTag(e))return!0;for(let e=0;e<t.length;e++){const i=t[e];if(6===i.type){if("is"===i.name&&i.value){if(i.value.content.startsWith("vue:"))return!0;if(Nd("COMPILER_IS_ON_ELEMENT",n,i.loc))return!0}}else{if("is"===i.name)return!0;if("bind"===i.name&&Sd(i.arg,"is")&&Nd("COMPILER_IS_ON_ELEMENT",n,i.loc))return!0}}}(s,d,e)&&(u=1)),{type:1,ns:a,tag:s,tagType:u,props:d,isSelfClosing:c,children:[],loc:nc(e,i),codegenNode:void 0}}function Xd(e,t){const n=[],i=new Set;for(;e.source.length>0&&!rc(e.source,">")&&!rc(e.source,"/>");){if(rc(e.source,"/")){lc(e,22),sc(e,1),ac(e);continue}1===t&&lc(e,3);const r=Qd(e,i);6===r.type&&r.value&&"class"===r.name&&(r.value.content=r.value.content.replace(/\s+/g," ").trim()),0===t&&n.push(r),/^[^\t\r\n\f />]/.test(e.source)&&lc(e,15),ac(e)}return n}function Qd(e,t){var n;const i=tc(e),r=/^[^\t\r\n\f />][^\t\r\n\f />=]*/.exec(e.source)[0];t.has(r)&&lc(e,2),t.add(r),"="===r[0]&&lc(e,19);{const t=/["'<]/g;let n;for(;n=t.exec(r);)lc(e,17,n.index)}let s;sc(e,r.length),/^[\t\r\n\f ]*=/.test(e.source)&&(ac(e),sc(e,1),ac(e),s=function(e){const t=tc(e);let n;const i=e.source[0],r='"'===i||"'"===i;if(r){sc(e,1);const t=e.source.indexOf(i);-1===t?n=ec(e,e.source.length,4):(n=ec(e,t,4),sc(e,1))}else{const t=/^[^\t\r\n\f >]+/.exec(e.source);if(!t)return;const i=/["'<=`]/g;let r;for(;r=i.exec(t[0]);)lc(e,18,r.index);n=ec(e,t[0].length,4)}return{content:n,isQuoted:r,loc:nc(e,t)}}(e),s||lc(e,13));const a=nc(e,i);if(!e.inVPre&&/^(v-[A-Za-z0-9-]|:|\.|@|#)/.test(r)){const t=/(?:^v-([a-z0-9-]+))?(?:(?::|^\.|^@|^#)(\[[^\]]+\]|[^\.]+))?(.+)?$/i.exec(r);let o,l=rc(r,"."),d=t[1]||(l||rc(r,":")?"bind":rc(r,"@")?"on":"slot");if(t[2]){const s="slot"===d,a=r.lastIndexOf(t[2],r.length-((null==(n=t[3])?void 0:n.length)||0)),l=nc(e,oc(e,i,a),oc(e,i,a+t[2].length+(s&&t[3]||"").length));let c=t[2],u=!0;c.startsWith("[")?(u=!1,c.endsWith("]")?c=c.slice(1,c.length-1):(lc(e,27),c=c.slice(1))):s&&(c+=t[3]||""),o={type:4,content:c,isStatic:u,constType:u?3:0,loc:l}}if(s&&s.isQuoted){const e=s.loc;e.start.offset++,e.start.column++,e.end=Ed(e.start,s.content),e.source=e.source.slice(1,-1)}const c=t[3]?t[3].slice(1).split("."):[];return l&&c.push("prop"),"bind"===d&&o&&c.includes("sync")&&Nd("COMPILER_V_BIND_SYNC",e,0,o.loc.source)&&(d="model",c.splice(c.indexOf("sync"),1)),{type:7,name:d,exp:s&&{type:4,content:s.content,isStatic:!1,constType:0,loc:s.loc},arg:o,modifiers:c,loc:a}}return!e.inVPre&&rc(r,"v-")&&lc(e,26),{type:6,name:r,value:s&&{type:2,content:s.content,loc:s.loc},loc:a}}function Zd(e,t){const[n,i]=e.options.delimiters,r=e.source.indexOf(i,n.length);if(-1===r)return void lc(e,25);const s=tc(e);sc(e,n.length);const a=tc(e),o=tc(e),l=r-n.length,d=e.source.slice(0,l),c=ec(e,l,t),u=c.trim(),h=c.indexOf(u);h>0&&Td(a,d,h);return Td(o,d,l-(c.length-u.length-h)),sc(e,i.length),{type:5,content:{type:4,isStatic:!1,constType:0,content:u,loc:nc(e,a,o)},loc:nc(e,s)}}function Jd(e,t){const n=3===t?["]]>"]:["<",e.options.delimiters[0]];let i=e.source.length;for(let t=0;t<n.length;t++){const r=e.source.indexOf(n[t],1);-1!==r&&i>r&&(i=r)}const r=tc(e);return{type:2,content:ec(e,i,t),loc:nc(e,r)}}function ec(e,t,n){const i=e.source.slice(0,t);return sc(e,t),2!==n&&3!==n&&i.includes("&")?e.options.decodeEntities(i,4===n):i}function tc(e){const{column:t,line:n,offset:i}=e;return{column:t,line:n,offset:i}}function nc(e,t,n){return{start:t,end:n=n||tc(e),source:e.originalSource.slice(t.offset,n.offset)}}function ic(e){return e[e.length-1]}function rc(e,t){return e.startsWith(t)}function sc(e,t){const{source:n}=e;Td(e,n,t),e.source=n.slice(t)}function ac(e){const t=/^[\t\r\n\f ]+/.exec(e.source);t&&sc(e,t[0].length)}function oc(e,t,n){return Ed(t,e.originalSource.slice(t.offset,n),n)}function lc(e,t,n,i=tc(e)){n&&(i.offset+=n,i.column+=n),e.options.onError(cl(t,{start:i,end:i,source:""}))}function dc(e,t,n){const i=e.source;switch(t){case 0:if(rc(i,"</"))for(let e=n.length-1;e>=0;--e)if(cc(i,n[e].tag))return!0;break;case 1:case 2:{const e=ic(n);if(e&&cc(i,e.tag))return!0;break}case 3:if(rc(i,"]]>"))return!0}return!i}function cc(e,t){return rc(e,"</")&&e.slice(2,2+t.length).toLowerCase()===t.toLowerCase()&&/[\t\r\n\f />]/.test(e[2+t.length]||">")}function uc(e,t){fc(e,t,hc(e,e.children[0]))}function hc(e,t){const{children:n}=e;return 1===n.length&&1===t.type&&!Rd(t)}function fc(e,t,n=!1){const{children:i}=e,r=i.length;let s=0;for(let e=0;e<i.length;e++){const r=i[e];if(1===r.type&&0===r.tagType){const e=n?0:pc(r,t);if(e>0){if(e>=2){r.codegenNode.patchFlag="-1",r.codegenNode=t.hoist(r.codegenNode),s++;continue}}else{const e=r.codegenNode;if(13===e.type){const n=bc(e);if((!n||512===n||1===n)&&vc(r,t)>=2){const n=yc(r);n&&(e.props=t.hoist(n))}e.dynamicProps&&(e.dynamicProps=t.hoist(e.dynamicProps))}}}if(1===r.type){const e=1===r.tagType;e&&t.scopes.vSlot++,fc(r,t),e&&t.scopes.vSlot--}else if(11===r.type)fc(r,t,1===r.children.length);else if(9===r.type)for(let e=0;e<r.branches.length;e++)fc(r.branches[e],t,1===r.branches[e].children.length)}s&&t.transformHoist&&t.transformHoist(i,t,e),s&&s===r&&1===e.type&&0===e.tagType&&e.codegenNode&&13===e.codegenNode.type&&g(e.codegenNode.children)&&(e.codegenNode.children=t.hoist(Jl(e.codegenNode.children)))}function pc(e,t){const{constantCache:n}=t;switch(e.type){case 1:if(0!==e.tagType)return 0;const i=n.get(e);if(void 0!==i)return i;const r=e.codegenNode;if(13!==r.type)return 0;if(r.isBlock&&"svg"!==e.tag&&"foreignObject"!==e.tag)return 0;if(bc(r))return n.set(e,0),0;{let i=3;const s=vc(e,t);if(0===s)return n.set(e,0),0;s<i&&(i=s);for(let r=0;r<e.children.length;r++){const s=pc(e.children[r],t);if(0===s)return n.set(e,0),0;s<i&&(i=s)}if(i>1)for(let r=0;r<e.props.length;r++){const s=e.props[r];if(7===s.type&&"bind"===s.name&&s.exp){const r=pc(s.exp,t);if(0===r)return n.set(e,0),0;r<i&&(i=r)}}if(r.isBlock){for(let t=0;t<e.props.length;t++){if(7===e.props[t].type)return n.set(e,0),0}t.removeHelper(gl),t.removeHelper(ld(t.inSSR,r.isComponent)),r.isBlock=!1,t.helper(od(t.inSSR,r.isComponent))}return n.set(e,i),i}case 2:case 3:return 3;case 9:case 11:case 10:default:return 0;case 5:case 12:return pc(e.content,t);case 4:return e.constType;case 8:let s=3;for(let n=0;n<e.children.length;n++){const i=e.children[n];if(T(i)||_(i))continue;const r=pc(i,t);if(0===r)return 0;r<s&&(s=r)}return s}}const mc=new Set([Pl,Ol,Nl,Fl]);function gc(e,t){if(14===e.type&&!T(e.callee)&&mc.has(e.callee)){const n=e.arguments[0];if(4===n.type)return pc(n,t);if(14===n.type)return gc(n,t)}return 0}function vc(e,t){let n=3;const i=yc(e);if(i&&15===i.type){const{properties:e}=i;for(let i=0;i<e.length;i++){const{key:r,value:s}=e[i],a=pc(r,t);if(0===a)return a;let o;if(a<n&&(n=a),o=4===s.type?pc(s,t):14===s.type?gc(s,t):0,0===o)return o;o<n&&(n=o)}}return n}function yc(e){const t=e.codegenNode;if(13===t.type)return t.props}function bc(e){const t=e.patchFlag;return t?parseInt(t,10):void 0}function Ec(e,{filename:t="",prefixIdentifiers:n=!1,hoistStatic:i=!1,cacheHandlers:r=!1,nodeTransforms:a=[],directiveTransforms:l={},transformHoist:d=null,isBuiltInComponent:c=o,isCustomElement:u=o,expressionPlugins:h=[],scopeId:f=null,slotted:p=!0,ssr:m=!1,inSSR:g=!1,ssrCssVars:v="",bindingMetadata:y=s,inline:b=!1,isTS:E=!1,onError:_=ll,onWarn:A=dl,compatConfig:S}){const k=t.replace(/\?.*$/,"").match(/([^/\\]+)\.\w+$/),w={selfName:k&&N(M(k[1])),prefixIdentifiers:n,hoistStatic:i,cacheHandlers:r,nodeTransforms:a,directiveTransforms:l,transformHoist:d,isBuiltInComponent:c,isCustomElement:u,expressionPlugins:h,scopeId:f,slotted:p,ssr:m,inSSR:g,ssrCssVars:v,bindingMetadata:y,inline:b,isTS:E,onError:_,onWarn:A,compatConfig:S,root:e,helpers:new Map,components:new Set,directives:new Set,hoists:[],imports:[],constantCache:new Map,temps:0,cached:0,identifiers:Object.create(null),scopes:{vFor:0,vSlot:0,vPre:0,vOnce:0},parent:null,currentNode:e,childIndex:0,inVOnce:!1,helper(e){const t=w.helpers.get(e)||0;return w.helpers.set(e,t+1),e},removeHelper(e){const t=w.helpers.get(e);if(t){const n=t-1;n?w.helpers.set(e,n):w.helpers.delete(e)}},helperString:e=>`_${Xl[w.helper(e)]}`,replaceNode(e){w.parent.children[w.childIndex]=w.currentNode=e},removeNode(e){const t=w.parent.children,n=e?t.indexOf(e):w.currentNode?w.childIndex:-1;e&&e!==w.currentNode?w.childIndex>n&&(w.childIndex--,w.onNodeRemoved()):(w.currentNode=null,w.onNodeRemoved()),w.parent.children.splice(n,1)},onNodeRemoved:()=>{},addIdentifiers(e){},removeIdentifiers(e){},hoist(e){T(e)&&(e=nd(e)),w.hoists.push(e);const t=nd(`_hoisted_${w.hoists.length}`,!1,e.loc,2);return t.hoisted=e,t},cache:(e,t=!1)=>function(e,t,n=!1){return{type:20,index:e,value:t,isVNode:n,loc:Ql}}(w.cached++,e,t)};return w.filters=new Set,w}function Tc(e,t){const n=Ec(e,t);_c(e,n),t.hoistStatic&&uc(e,n),t.ssr||function(e,t){const{helper:n}=t,{children:i}=e;if(1===i.length){const n=i[0];if(hc(e,n)&&n.codegenNode){const i=n.codegenNode;13===i.type&&dd(i,t),e.codegenNode=i}else e.codegenNode=n}else if(i.length>1){let i=64;0,e.codegenNode=Zl(t,n(ul),void 0,e.children,i+"",void 0,void 0,!0,void 0,!1)}}(e,n),e.helpers=new Set([...n.helpers.keys()]),e.components=[...n.components],e.directives=[...n.directives],e.imports=n.imports,e.hoists=n.hoists,e.temps=n.temps,e.cached=n.cached,e.filters=[...n.filters]}function _c(e,t){t.currentNode=e;const{nodeTransforms:n}=t,i=[];for(let r=0;r<n.length;r++){const s=n[r](e,t);if(s&&(g(s)?i.push(...s):i.push(s)),!t.currentNode)return;e=t.currentNode}switch(e.type){case 3:t.ssr||t.helper(Tl);break;case 5:t.ssr||t.helper(xl);break;case 9:for(let n=0;n<e.branches.length;n++)_c(e.branches[n],t);break;case 10:case 11:case 1:case 0:!function(e,t){let n=0;const i=()=>{n--};for(;n<e.children.length;n++){const r=e.children[n];T(r)||(t.parent=e,t.childIndex=n,t.onNodeRemoved=i,_c(r,t))}}(e,t)}t.currentNode=e;let r=i.length;for(;r--;)i[r]()}function Ac(e,t){const n=T(e)?t=>t===e:t=>e.test(t);return(e,i)=>{if(1===e.type){const{props:r}=e;if(3===e.tagType&&r.some(wd))return;const s=[];for(let a=0;a<r.length;a++){const o=r[a];if(7===o.type&&n(o.name)){r.splice(a,1),a--;const n=t(e,o,i);n&&s.push(n)}}return s}}}const Sc="/*#__PURE__*/",kc=e=>`${Xl[e]}: _${Xl[e]}`;function wc(e,{mode:t="function",prefixIdentifiers:n="module"===t,sourceMap:i=!1,filename:r="template.vue.html",scopeId:s=null,optimizeImports:a=!1,runtimeGlobalName:o="Vue",runtimeModuleName:l="vue",ssrRuntimeModuleName:d="vue/server-renderer",ssr:c=!1,isTS:u=!1,inSSR:h=!1}){const f={mode:t,prefixIdentifiers:n,sourceMap:i,filename:r,scopeId:s,optimizeImports:a,runtimeGlobalName:o,runtimeModuleName:l,ssrRuntimeModuleName:d,ssr:c,isTS:u,inSSR:h,source:e.loc.source,code:"",column:1,line:1,offset:0,indentLevel:0,pure:!1,map:void 0,helper:e=>`_${Xl[e]}`,push(e,t){f.code+=e},indent(){p(++f.indentLevel)},deindent(e=!1){e?--f.indentLevel:p(--f.indentLevel)},newline(){p(f.indentLevel)}};function p(e){f.push("\n"+"  ".repeat(e))}return f}function Lc(e,t={}){const n=wc(e,t);t.onContextCreated&&t.onContextCreated(n);const{mode:i,push:r,prefixIdentifiers:s,indent:a,deindent:o,newline:l,scopeId:d,ssr:c}=n,u=Array.from(e.helpers),h=u.length>0,f=!s&&"module"!==i,p=n;!function(e,t){const{ssr:n,prefixIdentifiers:i,push:r,newline:s,runtimeModuleName:a,runtimeGlobalName:o,ssrRuntimeModuleName:l}=t,d=o,c=Array.from(e.helpers);if(c.length>0&&(r(`const _Vue = ${d}\n`),e.hoists.length)){r(`const { ${[bl,El,Tl,_l,Al].filter((e=>c.includes(e))).map(kc).join(", ")} } = _Vue\n`)}(function(e,t){if(!e.length)return;t.pure=!0;const{push:n,newline:i,helper:r,scopeId:s,mode:a}=t;i();for(let r=0;r<e.length;r++){const s=e[r];s&&(n(`const _hoisted_${r+1} = `),Dc(s,t),i())}t.pure=!1})(e.hoists,t),s(),r("return ")}(e,p);if(r(`function ${c?"ssrRender":"render"}(${(c?["_ctx","_push","_parent","_attrs"]:["_ctx","_cache"]).join(", ")}) {`),a(),f&&(r("with (_ctx) {"),a(),h&&(r(`const { ${u.map(kc).join(", ")} } = _Vue`),r("\n"),l())),e.components.length&&(Rc(e.components,"component",n),(e.directives.length||e.temps>0)&&l()),e.directives.length&&(Rc(e.directives,"directive",n),e.temps>0&&l()),e.filters&&e.filters.length&&(l(),Rc(e.filters,"filter",n),l()),e.temps>0){r("let ");for(let t=0;t<e.temps;t++)r(`${t>0?", ":""}_temp${t}`)}return(e.components.length||e.directives.length||e.temps)&&(r("\n"),l()),c||r("return "),e.codegenNode?Dc(e.codegenNode,n):r("null"),f&&(o(),r("}")),o(),r("}"),{ast:e,code:n.code,preamble:"",map:n.map?n.map.toJSON():void 0}}function Rc(e,t,{helper:n,push:i,newline:r,isTS:s}){const a=n("filter"===t?Ll:"component"===t?Sl:wl);for(let n=0;n<e.length;n++){let o=e[n];const l=o.endsWith("__self");l&&(o=o.slice(0,-6)),i(`const ${Md(o,t)} = ${a}(${JSON.stringify(o)}${l?", true":""})${s?"!":""}`),n<e.length-1&&r()}}function Ic(e,t){const n=e.length>3||!1;t.push("["),n&&t.indent(),Cc(e,t,n),n&&t.deindent(),t.push("]")}function Cc(e,t,n=!1,i=!0){const{push:r,newline:s}=t;for(let a=0;a<e.length;a++){const o=e[a];T(o)?r(o):g(o)?Ic(o,t):Dc(o,t),a<e.length-1&&(n?(i&&r(","),s()):i&&r(", "))}}function Dc(e,t){if(T(e))t.push(e);else if(_(e))t.push(t.helper(e));else switch(e.type){case 1:case 9:case 11:case 12:Dc(e.codegenNode,t);break;case 2:!function(e,t){t.push(JSON.stringify(e.content),e)}(e,t);break;case 4:xc(e,t);break;case 5:!function(e,t){const{push:n,helper:i,pure:r}=t;r&&n(Sc);n(`${i(xl)}(`),Dc(e.content,t),n(")")}(e,t);break;case 8:Mc(e,t);break;case 3:!function(e,t){const{push:n,helper:i,pure:r}=t;r&&n(Sc);n(`${i(Tl)}(${JSON.stringify(e.content)})`,e)}(e,t);break;case 13:!function(e,t){const{push:n,helper:i,pure:r}=t,{tag:s,props:a,children:o,patchFlag:l,dynamicProps:d,directives:c,isBlock:u,disableTracking:h,isComponent:f}=e;c&&n(i(Rl)+"(");u&&n(`(${i(gl)}(${h?"true":""}), `);r&&n(Sc);const p=u?ld(t.inSSR,f):od(t.inSSR,f);n(i(p)+"(",e),Cc(function(e){let t=e.length;for(;t--&&null==e[t];);return e.slice(0,t+1).map((e=>e||"null"))}([s,a,o,l,d]),t),n(")"),u&&n(")");c&&(n(", "),Dc(c,t),n(")"))}(e,t);break;case 14:!function(e,t){const{push:n,helper:i,pure:r}=t,s=T(e.callee)?e.callee:i(e.callee);r&&n(Sc);n(s+"(",e),Cc(e.arguments,t),n(")")}(e,t);break;case 15:!function(e,t){const{push:n,indent:i,deindent:r,newline:s}=t,{properties:a}=e;if(!a.length)return void n("{}",e);const o=a.length>1||!1;n(o?"{":"{ "),o&&i();for(let e=0;e<a.length;e++){const{key:i,value:r}=a[e];Pc(i,t),n(": "),Dc(r,t),e<a.length-1&&(n(","),s())}o&&r(),n(o?"}":" }")}(e,t);break;case 17:!function(e,t){Ic(e.elements,t)}(e,t);break;case 18:!function(e,t){const{push:n,indent:i,deindent:r}=t,{params:s,returns:a,body:o,newline:l,isSlot:d}=e;d&&n(`_${Xl[Kl]}(`);n("(",e),g(s)?Cc(s,t):s&&Dc(s,t);n(") => "),(l||o)&&(n("{"),i());a?(l&&n("return "),g(a)?Ic(a,t):Dc(a,t)):o&&Dc(o,t);(l||o)&&(r(),n("}"));d&&(e.isNonScopedSlot&&n(", undefined, true"),n(")"))}(e,t);break;case 19:!function(e,t){const{test:n,consequent:i,alternate:r,newline:s}=e,{push:a,indent:o,deindent:l,newline:d}=t;if(4===n.type){const e=!pd(n.content);e&&a("("),xc(n,t),e&&a(")")}else a("("),Dc(n,t),a(")");s&&o(),t.indentLevel++,s||a(" "),a("? "),Dc(i,t),t.indentLevel--,s&&d(),s||a(" "),a(": ");const c=19===r.type;c||t.indentLevel++;Dc(r,t),c||t.indentLevel--;s&&l(!0)}(e,t);break;case 20:!function(e,t){const{push:n,helper:i,indent:r,deindent:s,newline:a}=t;n(`_cache[${e.index}] || (`),e.isVNode&&(r(),n(`${i(Hl)}(-1),`),a());n(`_cache[${e.index}] = `),Dc(e.value,t),e.isVNode&&(n(","),a(),n(`${i(Hl)}(1),`),a(),n(`_cache[${e.index}]`),s());n(")")}(e,t);break;case 21:Cc(e.body,t,!0,!1)}}function xc(e,t){const{content:n,isStatic:i}=e;t.push(i?JSON.stringify(n):n,e)}function Mc(e,t){for(let n=0;n<e.children.length;n++){const i=e.children[n];T(i)?t.push(i):Dc(i,t)}}function Pc(e,t){const{push:n}=t;if(8===e.type)n("["),Mc(e,t),n("]");else if(e.isStatic){n(pd(e.content)?e.content:JSON.stringify(e.content),e)}else n(`[${e.content}]`,e)}new RegExp("\\b"+"arguments,await,break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,let,new,return,super,switch,throw,try,var,void,while,with,yield".split(",").join("\\b|\\b")+"\\b");const Oc=Ac(/^(if|else|else-if)$/,((e,t,n)=>function(e,t,n,i){if(!("else"===t.name||t.exp&&t.exp.content.trim())){const i=t.exp?t.exp.loc:e.loc;n.onError(cl(28,t.loc)),t.exp=nd("true",!1,i)}0;if("if"===t.name){const r=Nc(e,t),s={type:9,loc:e.loc,branches:[r]};if(n.replaceNode(s),i)return i(s,r,!0)}else{const r=n.parent.children;let s=r.indexOf(e);for(;s-- >=-1;){const a=r[s];if(a&&3===a.type)n.removeNode(a);else{if(!a||2!==a.type||a.content.trim().length){if(a&&9===a.type){"else-if"===t.name&&void 0===a.branches[a.branches.length-1].condition&&n.onError(cl(30,e.loc)),n.removeNode();const r=Nc(e,t);0,a.branches.push(r);const s=i&&i(a,r,!1);_c(r,n),s&&s(),n.currentNode=null}else n.onError(cl(30,e.loc));break}n.removeNode(a)}}}}(e,t,n,((e,t,i)=>{const r=n.parent.children;let s=r.indexOf(e),a=0;for(;s-- >=0;){const e=r[s];e&&9===e.type&&(a+=e.branches.length)}return()=>{if(i)e.codegenNode=Fc(t,a,n);else{const i=function(e){for(;;)if(19===e.type){if(19!==e.alternate.type)return e;e=e.alternate}else 20===e.type&&(e=e.value)}(e.codegenNode);i.alternate=Fc(t,a+e.branches.length-1,n)}}}))));function Nc(e,t){const n=3===e.tagType;return{type:10,loc:e.loc,condition:"else"===t.name?void 0:t.exp,children:n&&!_d(e,"for")?e.children:[e],userKey:Ad(e,"key"),isTemplateIf:n}}function Fc(e,t,n){return e.condition?ad(e.condition,Uc(e,t,n),rd(n.helper(Tl),['""',"true"])):Uc(e,t,n)}function Uc(e,t,n){const{helper:i}=n,r=td("key",nd(`${t}`,!1,Ql,2)),{children:s}=e,a=s[0];if(1!==s.length||1!==a.type){if(1===s.length&&11===a.type){const e=a.codegenNode;return Dd(e,r,n),e}{let t=64;return Zl(n,i(ul),ed([r]),s,t+"",void 0,void 0,!0,!1,!1,e.loc)}}{const e=a.codegenNode,t=14===(o=e).type&&o.callee===Yl?o.arguments[1].returns:o;return 13===t.type&&dd(t,n),Dd(t,r,n),e}var o}const Bc=Ac("for",((e,t,n)=>{const{helper:i,removeHelper:r}=n;return function(e,t,n,i){if(!t.exp)return void n.onError(cl(31,t.loc));const r=Wc(t.exp,n);if(!r)return void n.onError(cl(32,t.loc));const{addIdentifiers:s,removeIdentifiers:a,scopes:o}=n,{source:l,value:d,key:c,index:u}=r,h={type:11,loc:t.loc,source:l,valueAlias:d,keyAlias:c,objectIndexAlias:u,parseResult:r,children:Ld(e)?e.children:[e]};n.replaceNode(h),o.vFor++;const f=i&&i(h);return()=>{o.vFor--,f&&f()}}(e,t,n,(t=>{const s=rd(i(Il),[t.source]),a=Ld(e),o=_d(e,"memo"),l=Ad(e,"key"),d=l&&(6===l.type?nd(l.value.content,!0):l.exp),c=l?td("key",d):null,u=4===t.source.type&&t.source.constType>0,h=u?64:l?128:256;return t.codegenNode=Zl(n,i(ul),void 0,s,h+"",void 0,void 0,!0,!u,!1,e.loc),()=>{let l;const{children:h}=t;const f=1!==h.length||1!==h[0].type,p=Rd(e)?e:a&&1===e.children.length&&Rd(e.children[0])?e.children[0]:null;if(p?(l=p.codegenNode,a&&c&&Dd(l,c,n)):f?l=Zl(n,i(ul),c?ed([c]):void 0,e.children,"64",void 0,void 0,!0,void 0,!1):(l=h[0].codegenNode,a&&c&&Dd(l,c,n),l.isBlock!==!u&&(l.isBlock?(r(gl),r(ld(n.inSSR,l.isComponent))):r(od(n.inSSR,l.isComponent))),l.isBlock=!u,l.isBlock?(i(gl),i(ld(n.inSSR,l.isComponent))):i(od(n.inSSR,l.isComponent))),o){const e=sd(Kc(t.parseResult,[nd("_cached")]));e.body={type:21,body:[id(["const _memo = (",o.exp,")"]),id(["if (_cached",...d?[" && _cached.key === ",d]:[],` && ${n.helperString(zl)}(_cached, _memo)) return _cached`]),id(["const _item = ",l]),nd("_item.memo = _memo"),nd("return _item")],loc:Ql},s.arguments.push(e,nd("_cache"),nd(String(n.cached++)))}else s.arguments.push(sd(Kc(t.parseResult),l,!0))}}))}));const $c=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,Vc=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,Hc=/^\(|\)$/g;function Wc(e,t){const n=e.loc,i=e.content,r=i.match($c);if(!r)return;const[,s,a]=r,o={source:Gc(n,a.trim(),i.indexOf(a,s.length)),value:void 0,key:void 0,index:void 0};let l=s.trim().replace(Hc,"").trim();const d=s.indexOf(l),c=l.match(Vc);if(c){l=l.replace(Vc,"").trim();const e=c[1].trim();let t;if(e&&(t=i.indexOf(e,d+l.length),o.key=Gc(n,e,t)),c[2]){const r=c[2].trim();r&&(o.index=Gc(n,r,i.indexOf(r,o.key?t+e.length:d+l.length)))}}return l&&(o.value=Gc(n,l,d)),o}function Gc(e,t,n){return nd(t,!1,bd(e,n,t.length))}function Kc({value:e,key:t,index:n},i=[]){return function(e){let t=e.length;for(;t--&&!e[t];);return e.slice(0,t+1).map(((e,t)=>e||nd("_".repeat(t+1),!1)))}([e,t,n,...i])}const jc=nd("undefined",!1),qc=(e,t)=>{if(1===e.type&&(1===e.tagType||3===e.tagType)){const n=_d(e,"slot");if(n)return n.exp,t.scopes.vSlot++,()=>{t.scopes.vSlot--}}},Yc=(e,t,n)=>sd(e,t,!1,!0,t.length?t[0].loc:n);function zc(e,t,n=Yc){t.helper(Kl);const{children:i,loc:r}=e,s=[],a=[];let o=t.scopes.vSlot>0||t.scopes.vFor>0;const l=_d(e,"slot",!0);if(l){const{arg:e,exp:t}=l;e&&!cd(e)&&(o=!0),s.push(td(e||nd("default",!0),n(t,i,r)))}let d=!1,c=!1;const u=[],h=new Set;let f=0;for(let e=0;e<i.length;e++){const r=i[e];let p;if(!Ld(r)||!(p=_d(r,"slot",!0))){3!==r.type&&u.push(r);continue}if(l){t.onError(cl(37,p.loc));break}d=!0;const{children:m,loc:g}=r,{arg:v=nd("default",!0),exp:y,loc:b}=p;let E;cd(v)?E=v?v.content:"default":o=!0;const T=n(y,m,g);let _,A,S;if(_=_d(r,"if"))o=!0,a.push(ad(_.exp,Xc(v,T,f++),jc));else if(A=_d(r,/^else(-if)?$/,!0)){let n,r=e;for(;r--&&(n=i[r],3===n.type););if(n&&Ld(n)&&_d(n,"if")){i.splice(e,1),e--;let t=a[a.length-1];for(;19===t.alternate.type;)t=t.alternate;t.alternate=A.exp?ad(A.exp,Xc(v,T,f++),jc):Xc(v,T,f++)}else t.onError(cl(30,A.loc))}else if(S=_d(r,"for")){o=!0;const e=S.parseResult||Wc(S.exp);e?a.push(rd(t.helper(Il),[e.source,sd(Kc(e),Xc(v,T),!0)])):t.onError(cl(32,S.loc))}else{if(E){if(h.has(E)){t.onError(cl(38,b));continue}h.add(E),"default"===E&&(c=!0)}s.push(td(v,T))}}if(!l){const e=(e,i)=>{const s=n(e,i,r);return t.compatConfig&&(s.isNonScopedSlot=!0),td("default",s)};d?u.length&&u.some((e=>Zc(e)))&&(c?t.onError(cl(39,u[0].loc)):s.push(e(void 0,u))):s.push(e(void 0,i))}const p=o?2:Qc(e.children)?3:1;let m=ed(s.concat(td("_",nd(p+"",!1))),r);return a.length&&(m=rd(t.helper(Dl),[m,Jl(a)])),{slots:m,hasDynamicSlots:o}}function Xc(e,t,n){const i=[td("name",e),td("fn",t)];return null!=n&&i.push(td("key",nd(String(n),!0))),ed(i)}function Qc(e){for(let t=0;t<e.length;t++){const n=e[t];switch(n.type){case 1:if(2===n.tagType||Qc(n.children))return!0;break;case 9:if(Qc(n.branches))return!0;break;case 10:case 11:if(Qc(n.children))return!0}}return!1}function Zc(e){return 2!==e.type&&12!==e.type||(2===e.type?!!e.content.trim():Zc(e.content))}const Jc=new WeakMap,eu=(e,t)=>function(){if(1!==(e=t.currentNode).type||0!==e.tagType&&1!==e.tagType)return;const{tag:n,props:i}=e,r=1===e.tagType;let s=r?function(e,t,n=!1){let{tag:i}=e;const r=ru(i),s=Ad(e,"is");if(s)if(r||Od("COMPILER_IS_ON_ELEMENT",t)){const e=6===s.type?s.value&&nd(s.value.content,!0):s.exp;if(e)return rd(t.helper(kl),[e])}else 6===s.type&&s.value.content.startsWith("vue:")&&(i=s.value.content.slice(4));const a=!r&&_d(e,"is");if(a&&a.exp)return rd(t.helper(kl),[a.exp]);const o=hd(i)||t.isBuiltInComponent(i);if(o)return n||t.helper(o),o;return t.helper(Sl),t.components.add(i),Md(i,"component")}(e,t):`"${n}"`;const a=A(s)&&s.callee===kl;let o,l,d,c,u,h,f=0,p=a||s===hl||s===fl||!r&&("svg"===n||"foreignObject"===n);if(i.length>0){const n=tu(e,t,void 0,r,a);o=n.props,f=n.patchFlag,u=n.dynamicPropNames;const i=n.directives;h=i&&i.length?Jl(i.map((e=>function(e,t){const n=[],i=Jc.get(e);i?n.push(t.helperString(i)):(t.helper(wl),t.directives.add(e.name),n.push(Md(e.name,"directive")));const{loc:r}=e;e.exp&&n.push(e.exp);e.arg&&(e.exp||n.push("void 0"),n.push(e.arg));if(Object.keys(e.modifiers).length){e.arg||(e.exp||n.push("void 0"),n.push("void 0"));const t=nd("true",!1,r);n.push(ed(e.modifiers.map((e=>td(e,t))),r))}return Jl(n,e.loc)}(e,t)))):void 0,n.shouldUseBlock&&(p=!0)}if(e.children.length>0){s===pl&&(p=!0,f|=1024);if(r&&s!==hl&&s!==pl){const{slots:n,hasDynamicSlots:i}=zc(e,t);l=n,i&&(f|=1024)}else if(1===e.children.length&&s!==hl){const n=e.children[0],i=n.type,r=5===i||8===i;r&&0===pc(n,t)&&(f|=1),l=r||2===i?n:e.children}else l=e.children}0!==f&&(d=String(f),u&&u.length&&(c=function(e){let t="[";for(let n=0,i=e.length;n<i;n++)t+=JSON.stringify(e[n]),n<i-1&&(t+=", ");return t+"]"}(u))),e.codegenNode=Zl(t,s,o,l,d,c,h,!!p,!1,r,e.loc)};function tu(e,t,n=e.props,i,r,s=!1){const{tag:a,loc:o,children:l}=e;let d=[];const u=[],h=[],f=l.length>0;let p=!1,m=0,g=!1,v=!1,y=!1,b=!1,E=!1,T=!1;const A=[],S=e=>{d.length&&(u.push(ed(nu(d),o)),d=[]),e&&u.push(e)},k=({key:e,value:n})=>{if(cd(e)){const s=e.content,a=c(s);if(!a||i&&!r||"onclick"===s.toLowerCase()||"onUpdate:modelValue"===s||I(s)||(b=!0),a&&I(s)&&(T=!0),20===n.type||(4===n.type||8===n.type)&&pc(n,t)>0)return;"ref"===s?g=!0:"class"===s?v=!0:"style"===s?y=!0:"key"===s||A.includes(s)||A.push(s),!i||"class"!==s&&"style"!==s||A.includes(s)||A.push(s)}else E=!0};for(let r=0;r<n.length;r++){const l=n[r];if(6===l.type){const{loc:e,name:n,value:i}=l;let r=!0;if("ref"===n&&(g=!0,t.scopes.vFor>0&&d.push(td(nd("ref_for",!0),nd("true")))),"is"===n&&(ru(a)||i&&i.content.startsWith("vue:")||Od("COMPILER_IS_ON_ELEMENT",t)))continue;d.push(td(nd(n,!0,bd(e,0,n.length)),nd(i?i.content:"",r,i?i.loc:e)))}else{const{name:n,arg:r,exp:c,loc:m}=l,g="bind"===n,v="on"===n;if("slot"===n){i||t.onError(cl(40,m));continue}if("once"===n||"memo"===n)continue;if("is"===n||g&&Sd(r,"is")&&(ru(a)||Od("COMPILER_IS_ON_ELEMENT",t)))continue;if(v&&s)continue;if((g&&Sd(r,"key")||v&&f&&Sd(r,"vue:before-update"))&&(p=!0),g&&Sd(r,"ref")&&t.scopes.vFor>0&&d.push(td(nd("ref_for",!0),nd("true"))),!r&&(g||v)){if(E=!0,c)if(g){if(S(),Od("COMPILER_V_BIND_OBJECT_ORDER",t)){u.unshift(c);continue}u.push(c)}else S({type:14,loc:m,callee:t.helper(Ul),arguments:i?[c]:[c,"true"]});else t.onError(cl(g?34:35,m));continue}const y=t.directiveTransforms[n];if(y){const{props:n,needRuntime:i}=y(l,e,t);!s&&n.forEach(k),v&&r&&!cd(r)?S(ed(n,o)):d.push(...n),i&&(h.push(l),_(i)&&Jc.set(l,i))}else C(n)||(h.push(l),f&&(p=!0))}}let w;if(u.length?(S(),w=u.length>1?rd(t.helper(Ml),u,o):u[0]):d.length&&(w=ed(nu(d),o)),E?m|=16:(v&&!i&&(m|=2),y&&!i&&(m|=4),A.length&&(m|=8),b&&(m|=32)),p||0!==m&&32!==m||!(g||T||h.length>0)||(m|=512),!t.inSSR&&w)switch(w.type){case 15:let e=-1,n=-1,i=!1;for(let t=0;t<w.properties.length;t++){const r=w.properties[t].key;cd(r)?"class"===r.content?e=t:"style"===r.content&&(n=t):r.isHandlerKey||(i=!0)}const r=w.properties[e],s=w.properties[n];i?w=rd(t.helper(Nl),[w]):(r&&!cd(r.value)&&(r.value=rd(t.helper(Pl),[r.value])),s&&(y||4===s.value.type&&"["===s.value.content.trim()[0]||17===s.value.type)&&(s.value=rd(t.helper(Ol),[s.value])));break;case 14:break;default:w=rd(t.helper(Nl),[rd(t.helper(Fl),[w])])}return{props:w,directives:h,patchFlag:m,dynamicPropNames:A,shouldUseBlock:p}}function nu(e){const t=new Map,n=[];for(let i=0;i<e.length;i++){const r=e[i];if(8===r.key.type||!r.key.isStatic){n.push(r);continue}const s=r.key.content,a=t.get(s);a?("style"===s||"class"===s||c(s))&&iu(a,r):(t.set(s,r),n.push(r))}return n}function iu(e,t){17===e.value.type?e.value.elements.push(t.value):e.value=Jl([e.value,t.value],e.loc)}function ru(e){return"component"===e||"Component"===e}const su=(e,t)=>{if(Rd(e)){const{children:n,loc:i}=e,{slotName:r,slotProps:s}=function(e,t){let n,i='"default"';const r=[];for(let t=0;t<e.props.length;t++){const n=e.props[t];6===n.type?n.value&&("name"===n.name?i=JSON.stringify(n.value.content):(n.name=M(n.name),r.push(n))):"bind"===n.name&&Sd(n.arg,"name")?n.exp&&(i=n.exp):("bind"===n.name&&n.arg&&cd(n.arg)&&(n.arg.content=M(n.arg.content)),r.push(n))}if(r.length>0){const{props:i,directives:s}=tu(e,t,r,!1,!1);n=i,s.length&&t.onError(cl(36,s[0].loc))}return{slotName:i,slotProps:n}}(e,t),a=[t.prefixIdentifiers?"_ctx.$slots":"$slots",r,"{}","undefined","true"];let o=2;s&&(a[2]=s,o=3),n.length&&(a[3]=sd([],n,!1,!1,i),o=4),t.scopeId&&!t.slotted&&(o=5),a.splice(o),e.codegenNode=rd(t.helper(Cl),a,i)}};const au=/^\s*([\w$_]+|(async\s*)?\([^)]*?\))\s*(:[^=]+)?=>|^\s*(async\s+)?function(?:\s+[\w$]+)?\s*\(/,ou=(e,t,n,i)=>{const{loc:r,modifiers:s,arg:a}=e;let o;if(e.exp||s.length||n.onError(cl(35,r)),4===a.type)if(a.isStatic){let e=a.content;0,e.startsWith("vue:")&&(e=`vnode-${e.slice(4)}`);o=nd(0!==t.tagType||e.startsWith("vnode")||!/[A-Z]/.test(e)?F(M(e)):`on:${e}`,!0,a.loc)}else o=id([`${n.helperString(Vl)}(`,a,")"]);else o=a,o.children.unshift(`${n.helperString(Vl)}(`),o.children.push(")");let l=e.exp;l&&!l.content.trim()&&(l=void 0);let d=n.cacheHandlers&&!l&&!n.inVOnce;if(l){const e=yd(l.content),t=!(e||au.test(l.content)),n=l.content.includes(";");0,(t||d&&e)&&(l=id([`${t?"$event":"(...args)"} => ${n?"{":"("}`,l,n?"}":")"]))}let c={props:[td(o,l||nd("() => {}",!1,r))]};return i&&(c=i(c)),d&&(c.props[0].value=n.cache(c.props[0].value)),c.props.forEach((e=>e.key.isHandlerKey=!0)),c},lu=(e,t,n)=>{const{exp:i,modifiers:r,loc:s}=e,a=e.arg;return 4!==a.type?(a.children.unshift("("),a.children.push(') || ""')):a.isStatic||(a.content=`${a.content} || ""`),r.includes("camel")&&(4===a.type?a.isStatic?a.content=M(a.content):a.content=`${n.helperString(Bl)}(${a.content})`:(a.children.unshift(`${n.helperString(Bl)}(`),a.children.push(")"))),n.inSSR||(r.includes("prop")&&du(a,"."),r.includes("attr")&&du(a,"^")),!i||4===i.type&&!i.content.trim()?(n.onError(cl(34,s)),{props:[td(a,nd("",!0,s))]}):{props:[td(a,i)]}},du=(e,t)=>{4===e.type?e.isStatic?e.content=t+e.content:e.content=`\`${t}\${${e.content}}\``:(e.children.unshift(`'${t}' + (`),e.children.push(")"))},cu=(e,t)=>{if(0===e.type||1===e.type||11===e.type||10===e.type)return()=>{const n=e.children;let i,r=!1;for(let e=0;e<n.length;e++){const t=n[e];if(kd(t)){r=!0;for(let r=e+1;r<n.length;r++){const s=n[r];if(!kd(s)){i=void 0;break}i||(i=n[e]=id([t],t.loc)),i.children.push(" + ",s),n.splice(r,1),r--}}}if(r&&(1!==n.length||0!==e.type&&(1!==e.type||0!==e.tagType||e.props.find((e=>7===e.type&&!t.directiveTransforms[e.name]))||"template"===e.tag)))for(let e=0;e<n.length;e++){const i=n[e];if(kd(i)||8===i.type){const r=[];2===i.type&&" "===i.content||r.push(i),t.ssr||0!==pc(i,t)||r.push("1"),n[e]={type:12,content:i,loc:i.loc,codegenNode:rd(t.helper(_l),r)}}}}},uu=new WeakSet,hu=(e,t)=>{if(1===e.type&&_d(e,"once",!0)){if(uu.has(e)||t.inVOnce||t.inSSR)return;return uu.add(e),t.inVOnce=!0,t.helper(Hl),()=>{t.inVOnce=!1;const e=t.currentNode;e.codegenNode&&(e.codegenNode=t.cache(e.codegenNode,!0))}}},fu=(e,t,n)=>{const{exp:i,arg:r}=e;if(!i)return n.onError(cl(41,e.loc)),pu();const s=i.loc.source,a=4===i.type?i.content:s,o=n.bindingMetadata[s];if("props"===o||"props-aliased"===o)return n.onError(cl(44,i.loc)),pu();if(!a.trim()||!yd(a))return n.onError(cl(42,i.loc)),pu();const l=r||nd("modelValue",!0),d=r?cd(r)?`onUpdate:${M(r.content)}`:id(['"onUpdate:" + ',r]):"onUpdate:modelValue";let c;c=id([`${n.isTS?"($event: any)":"$event"} => ((`,i,") = $event)"]);const u=[td(l,e.exp),td(d,c)];if(e.modifiers.length&&1===t.tagType){const t=e.modifiers.map((e=>(pd(e)?e:JSON.stringify(e))+": true")).join(", "),n=r?cd(r)?`${r.content}Modifiers`:id([r,' + "Modifiers"']):"modelModifiers";u.push(td(n,nd(`{ ${t} }`,!1,e.loc,2)))}return pu(u)};function pu(e=[]){return{props:e}}const mu=/[\w).+\-_$\]]/,gu=(e,t)=>{Od("COMPILER_FILTER",t)&&(5===e.type&&vu(e.content,t),1===e.type&&e.props.forEach((e=>{7===e.type&&"for"!==e.name&&e.exp&&vu(e.exp,t)})))};function vu(e,t){if(4===e.type)yu(e,t);else for(let n=0;n<e.children.length;n++){const i=e.children[n];"object"==typeof i&&(4===i.type?yu(i,t):8===i.type?vu(e,t):5===i.type&&vu(i.content,t))}}function yu(e,t){const n=e.content;let i,r,s,a,o=!1,l=!1,d=!1,c=!1,u=0,h=0,f=0,p=0,m=[];for(s=0;s<n.length;s++)if(r=i,i=n.charCodeAt(s),o)39===i&&92!==r&&(o=!1);else if(l)34===i&&92!==r&&(l=!1);else if(d)96===i&&92!==r&&(d=!1);else if(c)47===i&&92!==r&&(c=!1);else if(124!==i||124===n.charCodeAt(s+1)||124===n.charCodeAt(s-1)||u||h||f){switch(i){case 34:l=!0;break;case 39:o=!0;break;case 96:d=!0;break;case 40:f++;break;case 41:f--;break;case 91:h++;break;case 93:h--;break;case 123:u++;break;case 125:u--}if(47===i){let e,t=s-1;for(;t>=0&&(e=n.charAt(t)," "===e);t--);e&&mu.test(e)||(c=!0)}}else void 0===a?(p=s+1,a=n.slice(0,s).trim()):g();function g(){m.push(n.slice(p,s).trim()),p=s+1}if(void 0===a?a=n.slice(0,s).trim():0!==p&&g(),m.length){for(s=0;s<m.length;s++)a=bu(a,m[s],t);e.content=a}}function bu(e,t,n){n.helper(Ll);const i=t.indexOf("(");if(i<0)return n.filters.add(t),`${Md(t,"filter")}(${e})`;{const r=t.slice(0,i),s=t.slice(i+1);return n.filters.add(r),`${Md(r,"filter")}(${e}${")"!==s?","+s:s}`}}const Eu=new WeakSet,Tu=(e,t)=>{if(1===e.type){const n=_d(e,"memo");if(!n||Eu.has(e))return;return Eu.add(e),()=>{const i=e.codegenNode||t.currentNode.codegenNode;i&&13===i.type&&(1!==e.tagType&&dd(i,t),e.codegenNode=rd(t.helper(Yl),[n.exp,sd(void 0,i),"_cache",String(t.cached++)]))}}};function _u(e,t={}){const n=t.onError||ll,i="module"===t.mode;!0===t.prefixIdentifiers?n(cl(47)):i&&n(cl(48));t.cacheHandlers&&n(cl(49)),t.scopeId&&!i&&n(cl(50));const r=T(e)?$d(e,t):e,[s,a]=[[hu,Oc,Tu,Bc,gu,su,eu,qc,cu],{on:ou,bind:lu,model:fu}];return Tc(r,h({},t,{prefixIdentifiers:false,nodeTransforms:[...s,...t.nodeTransforms||[]],directiveTransforms:h({},a,t.directiveTransforms||{})})),Lc(r,h({},t,{prefixIdentifiers:false}))}const Au=Symbol(""),Su=Symbol(""),ku=Symbol(""),wu=Symbol(""),Lu=Symbol(""),Ru=Symbol(""),Iu=Symbol(""),Cu=Symbol(""),Du=Symbol(""),xu=Symbol("");var Mu;let Pu;Mu={[Au]:"vModelRadio",[Su]:"vModelCheckbox",[ku]:"vModelText",[wu]:"vModelSelect",[Lu]:"vModelDynamic",[Ru]:"withModifiers",[Iu]:"withKeys",[Cu]:"vShow",[Du]:"Transition",[xu]:"TransitionGroup"},Object.getOwnPropertySymbols(Mu).forEach((e=>{Xl[e]=Mu[e]}));const Ou=r("style,iframe,script,noscript",!0),Nu={isVoidTag:te,isNativeTag:e=>J(e)||ee(e),isPreTag:e=>"pre"===e,decodeEntities:function(e,t=!1){return Pu||(Pu=document.createElement("div")),t?(Pu.innerHTML=`<div foo="${e.replace(/"/g,"&quot;")}">`,Pu.children[0].getAttribute("foo")):(Pu.innerHTML=e,Pu.textContent)},isBuiltInComponent:e=>ud(e,"Transition")?Du:ud(e,"TransitionGroup")?xu:void 0,getNamespace(e,t){let n=t?t.ns:0;if(t&&2===n)if("annotation-xml"===t.tag){if("svg"===e)return 1;t.props.some((e=>6===e.type&&"encoding"===e.name&&null!=e.value&&("text/html"===e.value.content||"application/xhtml+xml"===e.value.content)))&&(n=0)}else/^m(?:[ions]|text)$/.test(t.tag)&&"mglyph"!==e&&"malignmark"!==e&&(n=0);else t&&1===n&&("foreignObject"!==t.tag&&"desc"!==t.tag&&"title"!==t.tag||(n=0));if(0===n){if("svg"===e)return 1;if("math"===e)return 2}return n},getTextMode({tag:e,ns:t}){if(0===t){if("textarea"===e||"title"===e)return 1;if(Ou(e))return 2}return 0}},Fu=(e,t)=>{const n=X(e);return nd(JSON.stringify(n),!1,t,3)};function Uu(e,t){return cl(e,t)}const Bu=r("passive,once,capture"),$u=r("stop,prevent,self,ctrl,shift,alt,meta,exact,middle"),Vu=r("left,right"),Hu=r("onkeyup,onkeydown,onkeypress",!0),Wu=(e,t)=>cd(e)&&"onclick"===e.content.toLowerCase()?nd(t,!0):4!==e.type?id(["(",e,`) === "onClick" ? "${t}" : (`,e,")"]):e;const Gu=(e,t)=>{1!==e.type||0!==e.tagType||"script"!==e.tag&&"style"!==e.tag||t.removeNode()},Ku=[e=>{1===e.type&&e.props.forEach(((t,n)=>{6===t.type&&"style"===t.name&&t.value&&(e.props[n]={type:7,name:"bind",arg:nd("style",!0,t.loc),exp:Fu(t.value.content,t.loc),modifiers:[],loc:t.loc})}))}],ju={cloak:()=>({props:[]}),html:(e,t,n)=>{const{exp:i,loc:r}=e;return i||n.onError(Uu(53,r)),t.children.length&&(n.onError(Uu(54,r)),t.children.length=0),{props:[td(nd("innerHTML",!0,r),i||nd("",!0))]}},text:(e,t,n)=>{const{exp:i,loc:r}=e;return i||n.onError(Uu(55,r)),t.children.length&&(n.onError(Uu(56,r)),t.children.length=0),{props:[td(nd("textContent",!0),i?pc(i,n)>0?i:rd(n.helperString(xl),[i],r):nd("",!0))]}},model:(e,t,n)=>{const i=fu(e,t,n);if(!i.props.length||1===t.tagType)return i;e.arg&&n.onError(Uu(58,e.arg.loc));const{tag:r}=t,s=n.isCustomElement(r);if("input"===r||"textarea"===r||"select"===r||s){let a=ku,o=!1;if("input"===r||s){const i=Ad(t,"type");if(i){if(7===i.type)a=Lu;else if(i.value)switch(i.value.content){case"radio":a=Au;break;case"checkbox":a=Su;break;case"file":o=!0,n.onError(Uu(59,e.loc))}}else(function(e){return e.props.some((e=>!(7!==e.type||"bind"!==e.name||e.arg&&4===e.arg.type&&e.arg.isStatic)))})(t)&&(a=Lu)}else"select"===r&&(a=wu);o||(i.needRuntime=n.helper(a))}else n.onError(Uu(57,e.loc));return i.props=i.props.filter((e=>!(4===e.key.type&&"modelValue"===e.key.content))),i},on:(e,t,n)=>ou(e,t,n,(t=>{const{modifiers:i}=e;if(!i.length)return t;let{key:r,value:s}=t.props[0];const{keyModifiers:a,nonKeyModifiers:o,eventOptionModifiers:l}=((e,t,n,i)=>{const r=[],s=[],a=[];for(let i=0;i<t.length;i++){const o=t[i];"native"===o&&Nd("COMPILER_V_ON_NATIVE",n)||Bu(o)?a.push(o):Vu(o)?cd(e)?Hu(e.content)?r.push(o):s.push(o):(r.push(o),s.push(o)):$u(o)?s.push(o):r.push(o)}return{keyModifiers:r,nonKeyModifiers:s,eventOptionModifiers:a}})(r,i,n,e.loc);if(o.includes("right")&&(r=Wu(r,"onContextmenu")),o.includes("middle")&&(r=Wu(r,"onMouseup")),o.length&&(s=rd(n.helper(Ru),[s,JSON.stringify(o)])),!a.length||cd(r)&&!Hu(r.content)||(s=rd(n.helper(Iu),[s,JSON.stringify(a)])),l.length){const e=l.map(N).join("");r=cd(r)?nd(`${r.content}${e}`,!0):id(["(",r,`) + "${e}"`])}return{props:[td(r,s)]}})),show:(e,t,n)=>{const{exp:i,loc:r}=e;return i||n.onError(Uu(61,r)),{props:[],needRuntime:n.helper(Cu)}}};const qu=Object.create(null);va((function(e,t){if(!T(e)){if(!e.nodeType)return o;e=e.innerHTML}const n=e,r=qu[n];if(r)return r;if("#"===e[0]){const t=document.querySelector(e);0,e=t?t.innerHTML:""}const s=h({hoistStatic:!0,onError:void 0,onWarn:o},t);s.isCustomElement||"undefined"==typeof customElements||(s.isCustomElement=e=>!!customElements.get(e));const{code:a}=function(e,t={}){return _u(e,h({},Nu,t,{nodeTransforms:[Gu,...Ku,...t.nodeTransforms||[]],directiveTransforms:h({},ju,t.directiveTransforms||{}),transformHoist:null}))}(e,s),l=new Function("Vue",a)(i);return l._rc=!0,qu[n]=l}));var Yu={key:1,class:""},zu=["name","value"];const Xu={MEDIA_PLAY_REQUEST:"mediaplayrequest",MEDIA_PAUSE_REQUEST:"mediapauserequest",MEDIA_MUTE_REQUEST:"mediamuterequest",MEDIA_UNMUTE_REQUEST:"mediaunmuterequest",MEDIA_VOLUME_REQUEST:"mediavolumerequest",MEDIA_SEEK_REQUEST:"mediaseekrequest",MEDIA_AIRPLAY_REQUEST:"mediaairplayrequest",MEDIA_ENTER_FULLSCREEN_REQUEST:"mediaenterfullscreenrequest",MEDIA_EXIT_FULLSCREEN_REQUEST:"mediaexitfullscreenrequest",MEDIA_PREVIEW_REQUEST:"mediapreviewrequest",MEDIA_ENTER_PIP_REQUEST:"mediaenterpiprequest",MEDIA_EXIT_PIP_REQUEST:"mediaexitpiprequest",MEDIA_ENTER_CAST_REQUEST:"mediaentercastrequest",MEDIA_EXIT_CAST_REQUEST:"mediaexitcastrequest",MEDIA_SHOW_TEXT_TRACKS_REQUEST:"mediashowtexttracksrequest",MEDIA_HIDE_TEXT_TRACKS_REQUEST:"mediahidetexttracksrequest",MEDIA_SHOW_SUBTITLES_REQUEST:"mediashowsubtitlesrequest",MEDIA_DISABLE_SUBTITLES_REQUEST:"mediadisablesubtitlesrequest",MEDIA_PLAYBACK_RATE_REQUEST:"mediaplaybackraterequest",MEDIA_RENDITION_REQUEST:"mediarenditionrequest",MEDIA_AUDIO_TRACK_REQUEST:"mediaaudiotrackrequest",MEDIA_SEEK_TO_LIVE_REQUEST:"mediaseektoliverequest",REGISTER_MEDIA_STATE_RECEIVER:"registermediastatereceiver",UNREGISTER_MEDIA_STATE_RECEIVER:"unregistermediastatereceiver"},Qu="mediachromeattributes",Zu="mediacontroller",Ju={MEDIA_AIRPLAY_UNAVAILABLE:"mediaAirplayUnavailable",MEDIA_FULLSCREEN_UNAVAILABLE:"mediaFullscreenUnavailable",MEDIA_PIP_UNAVAILABLE:"mediaPipUnavailable",MEDIA_CAST_UNAVAILABLE:"mediaCastUnavailable",MEDIA_RENDITION_UNAVAILABLE:"mediaRenditionUnavailable",MEDIA_AUDIO_TRACK_UNAVAILABLE:"mediaAudioTrackUnavailable",MEDIA_PAUSED:"mediaPaused",MEDIA_HAS_PLAYED:"mediaHasPlayed",MEDIA_ENDED:"mediaEnded",MEDIA_MUTED:"mediaMuted",MEDIA_VOLUME_LEVEL:"mediaVolumeLevel",MEDIA_VOLUME:"mediaVolume",MEDIA_VOLUME_UNAVAILABLE:"mediaVolumeUnavailable",MEDIA_IS_PIP:"mediaIsPip",MEDIA_IS_CASTING:"mediaIsCasting",MEDIA_SUBTITLES_LIST:"mediaSubtitlesList",MEDIA_SUBTITLES_SHOWING:"mediaSubtitlesShowing",MEDIA_IS_FULLSCREEN:"mediaIsFullscreen",MEDIA_PLAYBACK_RATE:"mediaPlaybackRate",MEDIA_CURRENT_TIME:"mediaCurrentTime",MEDIA_DURATION:"mediaDuration",MEDIA_SEEKABLE:"mediaSeekable",MEDIA_PREVIEW_TIME:"mediaPreviewTime",MEDIA_PREVIEW_IMAGE:"mediaPreviewImage",MEDIA_PREVIEW_COORDS:"mediaPreviewCoords",MEDIA_LOADING:"mediaLoading",MEDIA_BUFFERED:"mediaBuffered",MEDIA_STREAM_TYPE:"mediaStreamType",MEDIA_TARGET_LIVE_WINDOW:"mediaTargetLiveWindow",MEDIA_TIME_IS_LIVE:"mediaTimeIsLive",MEDIA_RENDITION_LIST:"mediaRenditionList",MEDIA_RENDITION_SELECTED:"mediaRenditionSelected",MEDIA_AUDIO_TRACK_LIST:"mediaAudioTrackList",MEDIA_AUDIO_TRACK_ENABLED:"mediaAudioTrackEnabled"},eh=Object.entries(Ju),th=eh.reduce(((e,[t,n])=>(e[t]=`${n.toLowerCase()}`,e)),{}),nh=eh.reduce(((e,[t,n])=>(e[t]=`${n.toLowerCase()}`,e)),{USER_INACTIVE:"userinactivechange",BREAKPOINTS_CHANGE:"breakpointchange",BREAKPOINTS_COMPUTED:"breakpointscomputed"}),ih=(Object.entries(nh).reduce(((e,[t,n])=>{const i=th[t];return i&&(e[n]=i),e}),{userinactivechange:"userinactive"}),Object.entries(th).reduce(((e,[t,n])=>{const i=nh[t];return i&&(e[n]=i),e}),{userinactive:"userinactivechange"})),rh={SUBTITLES:"subtitles",CAPTIONS:"captions",DESCRIPTIONS:"descriptions",CHAPTERS:"chapters",METADATA:"metadata"},sh="disabled",ah="showing",oh="mouse",lh="touch",dh="unavailable",ch="unsupported",uh={LIVE:"live",ON_DEMAND:"on-demand",UNKNOWN:"unknown"},hh={AUDIO_PLAYER:()=>"audio player",VIDEO_PLAYER:()=>"video player",VOLUME:()=>"volume",SEEK:()=>"seek",CLOSED_CAPTIONS:()=>"closed captions",PLAYBACK_RATE:({playbackRate:e=1}={})=>`current playback rate ${e}`,PLAYBACK_TIME:()=>"playback time",MEDIA_LOADING:()=>"media loading"},fh={PLAY:()=>"play",PAUSE:()=>"pause",MUTE:()=>"mute",UNMUTE:()=>"unmute",AIRPLAY:()=>"air play",ENTER_CAST:()=>"start casting",EXIT_CAST:()=>"stop casting",ENTER_FULLSCREEN:()=>"enter fullscreen mode",EXIT_FULLSCREEN:()=>"exit fullscreen mode",ENTER_PIP:()=>"enter picture in picture mode",EXIT_PIP:()=>"exit picture in picture mode",SEEK_FORWARD_N_SECS:({seekOffset:e=30}={})=>`seek forward ${e} seconds`,SEEK_BACK_N_SECS:({seekOffset:e=30}={})=>`seek back ${e} seconds`,SEEK_LIVE:()=>"seek to live",PLAYING_LIVE:()=>"playing live"};function ph(e){if(e){const{id:t,width:n,height:i}=e;return[t,n,i].filter((e=>null!=e)).join(":")}}function mh(e){if(e){const[t,n,i]=e.split(":");return{id:t,width:n,height:i}}}function gh(e){if(e){const{id:t,kind:n,language:i,label:r}=e;return[t,n,i,r].filter((e=>null!=e)).join(":")}}function vh(e){if(e){const[t,n,i,r]=e.split(":");return{id:t,kind:n,language:i,label:r}}}function yh(e,t=!1){return e.split("_").map((function(e,n){return(n||t?e[0].toUpperCase():e[0].toLowerCase())+e.slice(1).toLowerCase()})).join("")}function bh(e){return e.replace(/[-_]([a-z])/g,((e,t)=>t.toUpperCase()))}function Eh(e){return"string"==typeof e&&(!isNaN(e)&&!isNaN(parseFloat(e)))}const Th=e=>new Promise((t=>setTimeout(t,e))),_h=[{singular:"hour",plural:"hours"},{singular:"minute",plural:"minutes"},{singular:"second",plural:"seconds"}],Ah=e=>{if(!function(e){return"number"==typeof e&&!Number.isNaN(e)&&Number.isFinite(e)}(e))return"";const t=Math.abs(e),n=t!==e,i=new Date(0,0,0,0,0,t,0),r=[i.getHours(),i.getMinutes(),i.getSeconds()].map(((e,t)=>e&&((e,t)=>`${e} ${1===e?_h[t].singular:_h[t].plural}`)(e,t))).filter((e=>e)).join(", ");return`${r}${n?" remaining":""}`};function Sh(e,t){let n=!1;e<0&&(n=!0,e=0-e),e=e<0?0:e;let i=Math.floor(e%60),r=Math.floor(e/60%60),s=Math.floor(e/3600);const a=Math.floor(t/60%60),o=Math.floor(t/3600);return(isNaN(e)||e===1/0)&&(s=r=i="0"),s=s>0||o>0?s+":":"",r=((s||a>=10)&&r<10?"0"+r:r)+":",i=i<10?"0"+i:i,(n?"-":"")+s+r+i}Object.freeze({length:0,start(e){const t=e>>>0;if(t>=this.length)throw new DOMException(`Failed to execute 'start' on 'TimeRanges': The index provided (${t}) is greater than or equal to the maximum bound (${this.length}).`);return 0},end(e){const t=e>>>0;if(t>=this.length)throw new DOMException(`Failed to execute 'end' on 'TimeRanges': The index provided (${t}) is greater than or equal to the maximum bound (${this.length}).`);return 0}});const kh=(e,t,n=".value")=>{const i=e.querySelector(n);i&&(i.textContent=t)},wh=(e,t)=>((e,t)=>{const n=`slot[name="${t}"]`,i=e.shadowRoot.querySelector(n);return i?i.children:[]})(e,t)[0],Lh=(e,t)=>!(!e||!t)&&(!!e.contains(t)||Lh(e,t.getRootNode().host)),Rh=(e,t)=>{if(!e)return null;const n=e.closest(t);return n||Rh(e.getRootNode().host,t)};function Ih(e,t){var n;let i;for(i of e.querySelectorAll("style")){let e;try{e=null==(n=i.sheet)?void 0:n.cssRules}catch{continue}for(let n of null!=e?e:[])if(n.selectorText===t)return n}return(null==i?void 0:i.sheet)?(i.sheet.insertRule(`${t}{}`,i.sheet.cssRules.length),i.sheet.cssRules[i.sheet.cssRules.length-1]):{style:{setProperty:()=>{},removeProperty:()=>{}}}}function Ch(e,t,n=Number.NaN){const i=e.getAttribute(t);return null!=i?+i:n}function Dh(e,t,n){const i=+n;null==n||Number.isNaN(i)?e.hasAttribute(t)&&e.removeAttribute(t):Ch(e,t,void 0)!==i&&e.setAttribute(t,`${i}`)}function xh(e,t){return e.hasAttribute(t)}function Mh(e,t,n){null!=n?xh(e,t)!=n&&e.toggleAttribute(t,n):e.hasAttribute(t)&&e.removeAttribute(t)}function Ph(e,t,n=null){var i;return null!=(i=e.getAttribute(t))?i:n}function Oh(e,t,n){if(null==n)return void(e.hasAttribute(t)&&e.removeAttribute(t));const i=`${n}`;Ph(e,t,void 0)!==i&&e.setAttribute(t,i)}class Nh{addEventListener(){}removeEventListener(){}dispatchEvent(){return!0}}const Fh={createElement:function(){return new Uh.HTMLElement},addEventListener(){},removeEventListener(){}},Uh={ResizeObserver:class{observe(){}},document:Fh,HTMLElement:class extends Nh{},DocumentFragment:class extends Nh{},customElements:{get:function(){},define:function(){},whenDefined:function(){}},CustomEvent:function(){},getComputedStyle:function(){}},Bh="undefined"==typeof window||void 0===window.customElements,$h=Object.keys(Uh).every((e=>e in globalThis)),Vh=Bh&&!$h?Uh:globalThis,Hh=Bh&&!$h?Fh:globalThis.document;var Wh,Gh,Kh,jh,qh=Object.defineProperty,Yh=(e,t,n)=>(((e,t,n)=>{t in e?qh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n),zh=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Xh=(e,t,n)=>(zh(e,t,"read from private field"),n?n.call(e):t.get(e)),Qh=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Zh=(e,t,n,i)=>(zh(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n);const Jh=Hh.createElement("template");Jh.innerHTML="\n<style>\n  :host {\n    font: var(--media-font,\n      var(--media-font-weight, bold)\n      var(--media-font-size, 14px) /\n      var(--media-text-content-height, var(--media-control-height, 24px))\n      var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));\n    color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));\n    background: var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .7)));\n    padding: var(--media-control-padding, 10px);\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    vertical-align: middle;\n    box-sizing: border-box;\n    transition: background .15s linear;\n    pointer-events: auto;\n    cursor: pointer;\n  }\n\n  \n  :host(:focus-visible) {\n    box-shadow: inset 0 0 0 2px rgb(27 127 204 / .9);\n    outline: 0;\n  }\n  \n  :host(:where(:focus)) {\n    box-shadow: none;\n    outline: 0;\n  }\n\n  :host(:hover) {\n    background: var(--media-control-hover-background, rgba(50 50 70 / .7));\n  }\n\n  svg, img, ::slotted(svg), ::slotted(img) {\n    width: var(--media-button-icon-width);\n    height: var(--media-button-icon-height, var(--media-control-height, 24px));\n    transform: var(--media-button-icon-transform);\n    transition: var(--media-button-icon-transition);\n    fill: var(--media-icon-color, var(--media-primary-color, rgb(238 238 238)));\n    vertical-align: middle;\n    max-width: 100%;\n    max-height: 100%;\n    min-width: 100%;\n  }\n</style>\n";class ef extends Vh.HTMLElement{constructor(e={}){if(super(),Qh(this,Wh,void 0),Yh(this,"preventClick",!1),Qh(this,Gh,(e=>{this.preventClick||this.handleClick(e)})),Qh(this,Kh,(e=>{const{key:t}=e;this.keysUsed.includes(t)?this.preventClick||this.handleClick(e):this.removeEventListener("keyup",Xh(this,Kh))})),Qh(this,jh,(e=>{const{metaKey:t,altKey:n,key:i}=e;t||n||!this.keysUsed.includes(i)?this.removeEventListener("keyup",Xh(this,Kh)):this.addEventListener("keyup",Xh(this,Kh),{once:!0})})),!this.shadowRoot){this.attachShadow({mode:"open"});const t=Jh.content.cloneNode(!0);this.nativeEl=t;let n=e.slotTemplate;n||(n=Hh.createElement("template"),n.innerHTML=`<slot>${e.defaultContent||""}</slot>`),this.nativeEl.appendChild(n.content.cloneNode(!0)),this.shadowRoot.appendChild(t)}const{style:t}=Ih(this.shadowRoot,":host");t.setProperty("display",`var(--media-control-display, var(--${this.localName}-display, inline-flex))`)}static get observedAttributes(){return["disabled",Zu]}enable(){this.addEventListener("click",Xh(this,Gh)),this.addEventListener("keydown",Xh(this,jh)),this.tabIndex=0}disable(){this.removeEventListener("click",Xh(this,Gh)),this.removeEventListener("keydown",Xh(this,jh)),this.removeEventListener("keyup",Xh(this,Kh)),this.tabIndex=-1}attributeChangedCallback(e,t,n){var i,r,s,a,o;e===Zu?(t&&(null==(r=null==(i=Xh(this,Wh))?void 0:i.unassociateElement)||r.call(i,this),Zh(this,Wh,null)),n&&(Zh(this,Wh,null==(s=this.getRootNode())?void 0:s.getElementById(n)),null==(o=null==(a=Xh(this,Wh))?void 0:a.associateElement)||o.call(a,this))):"disabled"===e&&n!==t&&(null==n?this.enable():this.disable())}connectedCallback(){var e,t,n;this.hasAttribute("disabled")||this.enable(),this.setAttribute("role","button");const i=this.getAttribute(Zu);i&&(Zh(this,Wh,null==(e=this.getRootNode())?void 0:e.getElementById(i)),null==(n=null==(t=Xh(this,Wh))?void 0:t.associateElement)||n.call(t,this))}disconnectedCallback(){var e,t;this.disable(),null==(t=null==(e=Xh(this,Wh))?void 0:e.unassociateElement)||t.call(e,this),Zh(this,Wh,null)}get keysUsed(){return["Enter"," "]}handleClick(e){}}Wh=new WeakMap,Gh=new WeakMap,Kh=new WeakMap,jh=new WeakMap,Vh.customElements.get("media-chrome-button")||Vh.customElements.define("media-chrome-button",ef);const tf=Hh.createElement("template");tf.innerHTML='\n  <slot name="icon"><svg aria-hidden="true" viewBox="0 0 26 24">\n  <path d="M22.13 3H3.87a.87.87 0 0 0-.87.87v13.26a.87.87 0 0 0 .87.87h3.4L9 16H5V5h16v11h-4l1.72 2h3.4a.87.87 0 0 0 .87-.87V3.87a.87.87 0 0 0-.86-.87Zm-8.75 11.44a.5.5 0 0 0-.76 0l-4.91 5.73a.5.5 0 0 0 .38.83h9.82a.501.501 0 0 0 .38-.83l-4.91-5.73Z"/>\n</svg>\n</slot>\n';class nf extends ef{static get observedAttributes(){return[...super.observedAttributes,th.MEDIA_AIRPLAY_UNAVAILABLE]}constructor(e={}){super({slotTemplate:tf,...e})}connectedCallback(){this.setAttribute("aria-label",fh.AIRPLAY()),super.connectedCallback()}get mediaAirplayUnavailable(){return Ph(this,th.MEDIA_AIRPLAY_UNAVAILABLE)}set mediaAirplayUnavailable(e){Oh(this,th.MEDIA_AIRPLAY_UNAVAILABLE,e)}handleClick(){const e=new Vh.CustomEvent(Xu.MEDIA_AIRPLAY_REQUEST,{composed:!0,bubbles:!0});this.dispatchEvent(e)}}Vh.customElements.get("media-airplay-button")||Vh.customElements.define("media-airplay-button",nf);const rf=Hh.createElement("template");rf.innerHTML=`\n  <style>\n  :host([${th.MEDIA_IS_CASTING}]) slot:not([name=exit]):not([name=icon]) {\n    display: none !important;\n  }\n\n  \n  :host(:not([${th.MEDIA_IS_CASTING}])) slot:not([name=enter]):not([name=icon]) {\n    display: none !important;\n  }\n  </style>\n\n  <slot name="icon">\n    <slot name="enter"><svg aria-hidden="true" viewBox="0 0 24 24"><g><path class="cast_caf_icon_arch0" d="M1,18 L1,21 L4,21 C4,19.3 2.66,18 1,18 L1,18 Z"/><path class="cast_caf_icon_arch1" d="M1,14 L1,16 C3.76,16 6,18.2 6,21 L8,21 C8,17.13 4.87,14 1,14 L1,14 Z"/><path class="cast_caf_icon_arch2" d="M1,10 L1,12 C5.97,12 10,16.0 10,21 L12,21 C12,14.92 7.07,10 1,10 L1,10 Z"/><path class="cast_caf_icon_box" d="M21,3 L3,3 C1.9,3 1,3.9 1,5 L1,8 L3,8 L3,5 L21,5 L21,19 L14,19 L14,21 L21,21 C22.1,21 23,20.1 23,19 L23,5 C23,3.9 22.1,3 21,3 L21,3 Z"/></g></svg></slot>\n    <slot name="exit"><svg aria-hidden="true" viewBox="0 0 24 24"><g><path class="cast_caf_icon_arch0" d="M1,18 L1,21 L4,21 C4,19.3 2.66,18 1,18 L1,18 Z"/><path class="cast_caf_icon_arch1" d="M1,14 L1,16 C3.76,16 6,18.2 6,21 L8,21 C8,17.13 4.87,14 1,14 L1,14 Z"/><path class="cast_caf_icon_arch2" d="M1,10 L1,12 C5.97,12 10,16.0 10,21 L12,21 C12,14.92 7.07,10 1,10 L1,10 Z"/><path class="cast_caf_icon_box" d="M21,3 L3,3 C1.9,3 1,3.9 1,5 L1,8 L3,8 L3,5 L21,5 L21,19 L14,19 L14,21 L21,21 C22.1,21 23,20.1 23,19 L23,5 C23,3.9 22.1,3 21,3 L21,3 Z"/><path class="cast_caf_icon_boxfill" d="M5,7 L5,8.63 C8,8.6 13.37,14 13.37,17 L19,17 L19,7 Z"/></g></svg></slot>\n  </slot>\n`;const sf=e=>{const t=null!=e.getAttribute(th.MEDIA_IS_CASTING)?fh.EXIT_CAST():fh.ENTER_CAST();e.setAttribute("aria-label",t)};class af extends ef{static get observedAttributes(){return[...super.observedAttributes,th.MEDIA_IS_CASTING,th.MEDIA_CAST_UNAVAILABLE]}constructor(e={}){super({slotTemplate:rf,...e})}connectedCallback(){sf(this),super.connectedCallback()}attributeChangedCallback(e,t,n){e===th.MEDIA_IS_CASTING&&sf(this),super.attributeChangedCallback(e,t,n)}get mediaIsCasting(){return xh(this,th.MEDIA_IS_CASTING)}set mediaIsCasting(e){Mh(this,th.MEDIA_IS_CASTING,e)}get mediaCastUnavailable(){return Ph(this,th.MEDIA_CAST_UNAVAILABLE)}set mediaCastUnavailable(e){Oh(this,th.MEDIA_CAST_UNAVAILABLE,e)}handleClick(){const e=this.mediaIsCasting?Xu.MEDIA_EXIT_CAST_REQUEST:Xu.MEDIA_ENTER_CAST_REQUEST;this.dispatchEvent(new Vh.CustomEvent(e,{composed:!0,bubbles:!0}))}}Vh.customElements.get("media-cast-button")||Vh.customElements.define("media-cast-button",af);var of,lf=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},df=(e,t,n)=>(lf(e,t,"read from private field"),n?n.call(e):t.get(e)),cf=(e,t,n,i)=>(lf(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n);const uf=Hh.createElement("template");uf.innerHTML="\n<style>\n  :host {\n    display: var(--media-control-display, var(--media-gesture-receiver-display, inline-block));\n    box-sizing: border-box;\n  }\n</style>\n";class hf extends Vh.HTMLElement{constructor(e={}){if(super(),((e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)})(this,of,void 0),!this.shadowRoot){const t=this.attachShadow({mode:"open"}),n=uf.content.cloneNode(!0);this.nativeEl=n;let i=e.slotTemplate;i||(i=Hh.createElement("template"),i.innerHTML=`<slot>${e.defaultContent||""}</slot>`),this.nativeEl.appendChild(i.content.cloneNode(!0)),t.appendChild(n)}}static get observedAttributes(){return[Zu,th.MEDIA_PAUSED]}attributeChangedCallback(e,t,n){var i,r,s,a,o;e===Zu&&(t&&(null==(r=null==(i=df(this,of))?void 0:i.unassociateElement)||r.call(i,this),cf(this,of,null)),n&&(cf(this,of,null==(s=this.getRootNode())?void 0:s.getElementById(n)),null==(o=null==(a=df(this,of))?void 0:a.associateElement)||o.call(a,this)))}connectedCallback(){var e,t,n,i;this.tabIndex=-1,this.setAttribute("aria-hidden","true"),cf(this,of,function(e){var t;const n=e.getAttribute(Zu);if(n)return null==(t=e.getRootNode())?void 0:t.getElementById(n);return Rh(e,"media-controller")}(this)),this.getAttribute(Zu)&&(null==(t=null==(e=df(this,of))?void 0:e.associateElement)||t.call(e,this)),null==(n=df(this,of))||n.addEventListener("pointerdown",this),null==(i=df(this,of))||i.addEventListener("click",this)}disconnectedCallback(){var e,t,n,i;this.getAttribute(Zu)&&(null==(t=null==(e=df(this,of))?void 0:e.unassociateElement)||t.call(e,this)),null==(n=df(this,of))||n.removeEventListener("pointerdown",this),null==(i=df(this,of))||i.removeEventListener("click",this),cf(this,of,null)}handleEvent(e){var t;const n=null==(t=e.composedPath())?void 0:t[0];if(["video","media-controller"].includes(null==n?void 0:n.localName))if("pointerdown"===e.type)this._pointerType=e.pointerType;else if("click"===e.type){const{clientX:t,clientY:n}=e,{left:i,top:r,width:s,height:a}=this.getBoundingClientRect(),o=t-i,l=n-r;if(o<0||l<0||o>s||l>a||0===s&&0===a)return;const{pointerType:d=this._pointerType}=e;if(this._pointerType=void 0,d===lh)return void this.handleTap(e);if(d===oh)return void this.handleMouseClick(e)}}get mediaPaused(){return xh(this,th.MEDIA_PAUSED)}set mediaPaused(e){Mh(this,th.MEDIA_PAUSED,e)}handleTap(e){}handleMouseClick(e){const t=this.mediaPaused?Xu.MEDIA_PLAY_REQUEST:Xu.MEDIA_PAUSE_REQUEST;this.dispatchEvent(new Vh.CustomEvent(t,{composed:!0,bubbles:!0}))}}of=new WeakMap,Vh.customElements.get("media-gesture-receiver")||Vh.customElements.define("media-gesture-receiver",hf);var ff=Object.defineProperty,pf=(e,t,n)=>(((e,t,n)=>{t in e?ff(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);const mf={AUDIO:"audio",AUTOHIDE:"autohide",BREAKPOINTS:"breakpoints",GESTURES_DISABLED:"gesturesdisabled",KEYBOARD_CONTROL:"keyboardcontrol",NO_AUTOHIDE:"noautohide",USER_INACTIVE:"userinactive"},gf=Hh.createElement("template");gf.innerHTML=`\n  <style>\n    \n    :host([${th.MEDIA_IS_FULLSCREEN}]) ::slotted([slot=media]) {\n      outline: none;\n    }\n\n    :host {\n      box-sizing: border-box;\n      position: relative;\n      display: inline-block;\n      line-height: 0;\n      background-color: var(--media-background-color, #000);\n    }\n\n    :host(:not([${mf.AUDIO}])) [part~=layer]:not([part~=media-layer]) {\n      position: absolute;\n      top: 0;\n      left: 0;\n      bottom: 0;\n      right: 0;\n      display: flex;\n      flex-flow: column nowrap;\n      align-items: start;\n      pointer-events: none;\n      background: none;\n    }\n\n    slot[name=media] {\n      display: var(--media-slot-display, contents);\n    }\n\n    \n    :host([${mf.AUDIO}]) slot[name=media] {\n      display: var(--media-slot-display, none);\n    }\n\n    \n    :host([${mf.AUDIO}]) [part~=layer][part~=gesture-layer] {\n      height: 0;\n      display: block;\n    }\n\n    \n    :host(:not([${mf.AUDIO}])[${mf.GESTURES_DISABLED}]) ::slotted([slot=gestures-chrome]),\n    :host(:not([${mf.AUDIO}])[${mf.GESTURES_DISABLED}]) media-gesture-receiver[slot=gestures-chrome] {\n      display: none;\n    }\n\n    \n    ::slotted(:not([slot=media]):not([slot=poster]):not(media-loading-indicator)) {\n      pointer-events: auto;\n    }\n\n    :host(:not([${mf.AUDIO}])) *[part~=layer][part~=centered-layer] {\n      align-items: center;\n      justify-content: center;\n    }\n\n    :host(:not([${mf.AUDIO}])) ::slotted(media-gesture-receiver[slot=gestures-chrome]),\n    :host(:not([${mf.AUDIO}])) media-gesture-receiver[slot=gestures-chrome] {\n      align-self: stretch;\n      flex-grow: 1;\n    }\n\n    slot[name=middle-chrome] {\n      display: inline;\n      flex-grow: 1;\n      pointer-events: none;\n      background: none;\n    }\n\n    \n    ::slotted([slot=media]),\n    ::slotted([slot=poster]) {\n      width: 100%;\n      height: 100%;\n    }\n\n    \n    :host(:not([${mf.AUDIO}])) .spacer {\n      flex-grow: 1;\n    }\n\n    \n    :host(:-webkit-full-screen) {\n      \n      width: 100% !important;\n      height: 100% !important;\n    }\n\n    \n    ::slotted(:not([slot=media]):not([${mf.NO_AUTOHIDE}])) {\n      opacity: 1;\n      transition: opacity 0.25s;\n    }\n\n    \n    :host([${mf.USER_INACTIVE}]:not([${th.MEDIA_PAUSED}]):not([${th.MEDIA_IS_CASTING}]):not([${mf.AUDIO}])) ::slotted(:not([slot=media]):not([${mf.NO_AUTOHIDE}])) {\n      opacity: 0;\n      transition: opacity 1s;\n    }\n\n    ::slotted(media-control-bar)  {\n      align-self: stretch;\n    }\n\n    \n    :host(:not([${mf.AUDIO}])[${th.MEDIA_HAS_PLAYED}]) slot[name=poster] {\n      display: none;\n    }\n  </style>\n\n  <slot name="media" part="layer media-layer"></slot>\n  <slot name="poster" part="layer poster-layer"></slot>\n  <slot name="gestures-chrome" part="layer gesture-layer">\n    <media-gesture-receiver slot="gestures-chrome"></media-gesture-receiver>\n  </slot>\n  <span part="layer vertical-layer">\n    <slot name="top-chrome" part="top chrome"></slot>\n    <slot name="middle-chrome" part="middle chrome"></slot>\n    <slot name="centered-chrome" part="layer centered-layer center centered chrome"></slot>\n    \n    <slot part="bottom chrome"></slot>\n  </span>\n`;const vf=Object.values(th);function yf(e,t){var n;if(!e.isConnected)return;const i=function(e){const t=e.split(/\s+/);return Object.fromEntries(t.map((e=>e.split(":"))))}(null!=(n=e.getAttribute(mf.BREAKPOINTS))?n:"sm:384 md:576 lg:768 xl:960"),r=function(e,t){return Object.keys(e).filter((n=>t>=e[n]))}(i,t);let s=!1;if(Object.keys(i).forEach((t=>{r.includes(t)?e.hasAttribute(`breakpoint${t}`)||(e.setAttribute(`breakpoint${t}`,""),s=!0):e.hasAttribute(`breakpoint${t}`)&&(e.removeAttribute(`breakpoint${t}`),s=!0)})),s){const t=new CustomEvent(nh.BREAKPOINTS_CHANGE,{detail:r});e.dispatchEvent(t)}}class bf extends Vh.HTMLElement{constructor(){super(),pf(this,"breakpointsComputed",!1),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(gf.content.cloneNode(!0)));new MutationObserver((e=>{const t=this.media;for(let n of e)"childList"===n.type&&(n.removedNodes.forEach((e=>{if("media"==e.slot&&n.target==this){let i=n.previousSibling&&n.previousSibling.previousElementSibling;if(i&&t){let t="media"!==i.slot;for(;null!==(i=i.previousSibling);)"media"==i.slot&&(t=!1);t&&this.mediaUnsetCallback(e)}else this.mediaUnsetCallback(e)}})),t&&n.addedNodes.forEach((e=>{e==t&&this.handleMediaUpdated(t).then((e=>this.mediaSetCallback(e)))})))})).observe(this,{childList:!0,subtree:!0});let e=!1;const t=new ResizeObserver((t=>{e||(setTimeout((()=>{!function(e){for(const t of e)yf(t.target,t.contentRect.width)}(t),e=!1,this.breakpointsComputed||(this.breakpointsComputed=!0,this.dispatchEvent(new CustomEvent(nh.BREAKPOINTS_COMPUTED,{bubbles:!0,composed:!0})))}),0),e=!0)}));this.resizeObserver=t,t.observe(this);let n=this.media,i=this.querySelector(":scope > slot[slot=media]");i&&i.addEventListener("slotchange",(()=>{i.assignedElements({flatten:!0}).length?this.media&&(n=this.media,this.handleMediaUpdated(this.media).then((e=>this.mediaSetCallback(e)))):this.mediaUnsetCallback(n)}))}static get observedAttributes(){return[mf.AUTOHIDE,mf.GESTURES_DISABLED].concat(vf).filter((e=>![th.MEDIA_RENDITION_LIST,th.MEDIA_AUDIO_TRACK_LIST].includes(e)))}attributeChangedCallback(e,t,n){e.toLowerCase()==mf.AUTOHIDE&&(this.autohide=n)}get media(){let e=this.querySelector(":scope > [slot=media]");return"SLOT"==(null==e?void 0:e.nodeName)&&(e=e.assignedElements({flatten:!0})[0]),e}mediaSetCallback(e){this._mediaClickPlayToggle=()=>{const t=e.paused?Xu.MEDIA_PLAY_REQUEST:Xu.MEDIA_PAUSE_REQUEST;this.dispatchEvent(new Vh.CustomEvent(t,{composed:!0,bubbles:!0}))}}handleMediaUpdated(e){const t=e=>Promise.resolve(e);if(!e)return n=e,console.error('<media-chrome>: Media element set with slot="media" does not appear to be compatible.',n),Promise.reject(n);var n;const i=e.nodeName.toLowerCase();return i.includes("-")?Vh.customElements.whenDefined(i).then((()=>t(e))):t(e)}mediaUnsetCallback(e){}connectedCallback(){var e;const t=null!=this.getAttribute(mf.AUDIO)?hh.AUDIO_PLAYER():hh.VIDEO_PLAYER();this.setAttribute("role","region"),this.setAttribute("aria-label",t),this.media&&this.handleMediaUpdated(this.media).then((e=>this.mediaSetCallback(e))),this.setAttribute(mf.USER_INACTIVE,"");const n=()=>{if(this.autohide<0)return;if(this.hasAttribute(mf.USER_INACTIVE))return;this.setAttribute(mf.USER_INACTIVE,"");const e=new Vh.CustomEvent(nh.USER_INACTIVE,{composed:!0,bubbles:!0,detail:!0});this.dispatchEvent(e)},i=()=>{if(!this.hasAttribute(mf.USER_INACTIVE))return;this.removeAttribute(mf.USER_INACTIVE);const e=new Vh.CustomEvent(nh.USER_INACTIVE,{composed:!0,bubbles:!0,detail:!1});this.dispatchEvent(e)},r=()=>{i(),clearTimeout(this._inactiveTimeout),this.autohide<0||(this._inactiveTimeout=setTimeout((()=>{n()}),1e3*this.autohide))};this.addEventListener("keyup",(()=>{r()})),this.addEventListener("pointerup",(e=>{"touch"===e.pointerType?[this,this.media].includes(e.target)&&!this.hasAttribute(mf.USER_INACTIVE)?n():r():e.composedPath().some((e=>{var t;return["media-play-button","media-fullscreen-button"].includes(null==(t=null==e?void 0:e.nodeName)?void 0:t.toLowerCase())}))&&r()})),this.addEventListener("pointermove",(e=>{"mouse"===e.pointerType&&(i(),clearTimeout(this._inactiveTimeout),[this,this.media].includes(e.target)&&r())})),this.addEventListener("mouseleave",(()=>{n()})),this.addEventListener("keyup",(()=>{this.setAttribute(mf.KEYBOARD_CONTROL,"")})),null==(e=Vh.window)||e.addEventListener("mouseup",(()=>{this.removeAttribute(mf.KEYBOARD_CONTROL)}))}set autohide(e){e=Number(e),this._autohide=isNaN(e)?0:e}get autohide(){return void 0===this._autohide?2:this._autohide}}var Ef,Tf,_f,Af,Sf,kf,wf=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Lf=(e,t,n)=>(wf(e,t,"read from private field"),n?n.call(e):t.get(e)),Rf=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},If=(e,t,n,i)=>(wf(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n);class Cf{constructor(e,t,{defaultValue:n}={defaultValue:void 0}){Rf(this,Sf),Rf(this,Ef,void 0),Rf(this,Tf,void 0),Rf(this,_f,void 0),Rf(this,Af,new Set),If(this,Ef,e),If(this,Tf,t),If(this,_f,new Set(n))}[Symbol.iterator](){return Lf(this,Sf,kf).values()}get length(){return Lf(this,Sf,kf).size}get value(){var e;return null!=(e=[...Lf(this,Sf,kf)].join(" "))?e:""}set value(e){var t;e!==this.value&&(If(this,Af,new Set),this.add(...null!=(t=null==e?void 0:e.split(" "))?t:[]))}toString(){return this.value}item(e){return[...Lf(this,Sf,kf)][e]}values(){return Lf(this,Sf,kf).values()}forEach(e){Lf(this,Sf,kf).forEach(e)}add(...e){var t,n;e.forEach((e=>Lf(this,Af).add(e))),(""!==this.value||(null==(t=Lf(this,Ef))?void 0:t.hasAttribute(`${Lf(this,Tf)}`)))&&(null==(n=Lf(this,Ef))||n.setAttribute(`${Lf(this,Tf)}`,`${this.value}`))}remove(...e){var t;e.forEach((e=>Lf(this,Af).delete(e))),null==(t=Lf(this,Ef))||t.setAttribute(`${Lf(this,Tf)}`,`${this.value}`)}contains(e){return Lf(this,Sf,kf).has(e)}toggle(e,t){return void 0!==t?t?(this.add(e),!0):(this.remove(e),!1):this.contains(e)?(this.remove(e),!1):(this.add(e),!0)}replace(e,t){return this.remove(e),this.add(t),e===t}}Ef=new WeakMap,Tf=new WeakMap,_f=new WeakMap,Af=new WeakMap,Sf=new WeakSet,kf=function(){return Lf(this,Af).size?Lf(this,Af):Lf(this,_f)};const Df=(e="")=>e.split(/\s+/),xf=(e="")=>{let[t,n,i]=e.split(":");return t="cc"===t?"captions":"subtitles",{kind:t,language:n,label:i?decodeURIComponent(i):void 0}},Mf=(e="",t={})=>Df(e).map((e=>{const n=xf(e);return{...t,...n}})),Pf=({kind:e,label:t,language:n}={kind:"subtitles"})=>t?`${"captions"===e?"cc":"sb"}:${n}:${encodeURIComponent(t)}`:n,Of=(e=[])=>Array.prototype.map.call(e,Pf).join(" "),Nf=e=>{const t=Object.entries(e).map((([e,t])=>((e,t)=>n=>n[e]===t)(e,t)));return e=>t.every((t=>t(e)))},Ff=(e,t=[],n=[])=>{const i=(r=n,Array.isArray(r)?r.map((e=>"string"==typeof e?xf(e):e)):"string"==typeof r?Mf(r):[r]).map(Nf);var r;Array.from(t).filter((e=>i.some((t=>t(e))))).forEach((t=>{t.mode=e}))},Uf=(e,t=(()=>!0))=>{if(!(null==e?void 0:e.textTracks))return[];const n="function"==typeof t?t:Nf(t);return Array.from(e.textTracks).filter(n)},Bf=e=>!!e.getAttribute(th.MEDIA_SUBTITLES_SHOWING),$f=(e,t)=>{var n,i;const r=Bf(e);if(r||!1===t){const t=e.getAttribute(th.MEDIA_SUBTITLES_SHOWING);if(t){const n=new Vh.CustomEvent(Xu.MEDIA_DISABLE_SUBTITLES_REQUEST,{composed:!0,bubbles:!0,detail:t});e.dispatchEvent(n)}}else if(r&&!0!==t)console.error("Attempting to enable captions or subtitles but none are available! Please verify your media content if this is unexpected.");else{const[t]=null!=(i=Df(null!=(n=e.getAttribute(th.MEDIA_SUBTITLES_LIST))?n:""))?i:[];if(t){const n=new Vh.CustomEvent(Xu.MEDIA_SHOW_SUBTITLES_REQUEST,{composed:!0,bubbles:!0,detail:t});e.dispatchEvent(n)}}},Vf={enter:"requestFullscreen",exit:"exitFullscreen",rootEvents:["fullscreenchange"],mediaEvents:[],element:"fullscreenElement",error:"fullscreenerror",enabled:"fullscreenEnabled"};let Hf;void 0===Hh.fullscreenElement&&(Vf.enter="webkitRequestFullScreen",Vf.exit=null!=Hh.webkitExitFullscreen?"webkitExitFullscreen":"webkitCancelFullScreen",Vf.rootEvents=["webkitfullscreenchange"],Vf.mediaEvents=["webkitbeginfullscreen","webkitendfullscreen"],Vf.element="webkitFullscreenElement",Vf.error="webkitfullscreenerror",Vf.enabled="webkitFullscreenEnabled");const Wf=()=>{var e,t;return Hf||(Hf=null==(t=null==(e=Hh)?void 0:e.createElement)?void 0:t.call(e,"video"),Hf)},Gf=((e=Wf())=>{let t=Hh[Vf.enabled];return!t&&e&&(t="webkitSupportsFullscreen"in e),t})(),Kf=((e=Wf())=>"function"==typeof(null==e?void 0:e.requestPictureInPicture))(),jf=!!Vh.WebKitPlaybackTargetAvailabilityEvent,qf=!!Vh.chrome;let Yf;const zf=(async(e=Wf())=>{if(!e)return!1;const t=e.volume;return e.volume=t/2+.1,await Th(0),e.volume!==t})().then((e=>(Yf=e,Yf))),Xf=Object.values(uh),Qf=e=>Uf(e.media,(e=>[rh.SUBTITLES,rh.CAPTIONS].includes(e.kind))).sort(((e,t)=>e.kind>=t.kind?1:-1)),Zf={MEDIA_PAUSED:{get:function(e){const{media:t}=e;return!t||t.paused},mediaEvents:["play","playing","pause","emptied"]},MEDIA_HAS_PLAYED:{get:function(e){const{media:t}=e;return!!t&&!t.paused},mediaEvents:["playing","emptied"]},MEDIA_ENDED:{get:function(e){const{media:t}=e;return!!t&&t.ended},mediaEvents:["seeked","ended","emptied"]},MEDIA_PLAYBACK_RATE:{get:function(e){const{media:t}=e;return t&&void 0!==t.playbackRate?t.playbackRate:1},mediaEvents:["ratechange","loadstart"]},MEDIA_MUTED:{get:function(e){const{media:t}=e;return!(!t||void 0===t.muted)&&t.muted},mediaEvents:["volumechange"]},MEDIA_VOLUME:{get:function(e){const{media:t}=e;return t&&void 0!==t.volume?Number(t.volume):1},mediaEvents:["volumechange"]},MEDIA_VOLUME_LEVEL:{get:function(e){const{media:t}=e;let n="high";if(!t||void 0===t.volume)return n;const{muted:i,volume:r}=t;return 0===r||i?n="off":r<.5?n="low":r<.75&&(n="medium"),n},mediaEvents:["volumechange"]},MEDIA_CURRENT_TIME:{get:function(e){const{media:t}=e;return t&&void 0!==t.currentTime?t.currentTime:0},mediaEvents:["timeupdate","loadedmetadata"]},MEDIA_DURATION:{get:function(e){const{media:t}=e;return t&&Number.isFinite(t.duration)?t.duration:NaN},mediaEvents:["durationchange","loadedmetadata","emptied"]},MEDIA_SEEKABLE:{get:function(e){var t;const{media:n}=e;if(!(null==(t=null==n?void 0:n.seekable)?void 0:t.length))return;const i=n.seekable.start(0),r=n.seekable.end(n.seekable.length-1);return i||r?[Number(i.toFixed(3)),Number(r.toFixed(3))]:void 0},mediaEvents:["loadedmetadata","emptied","progress"]},MEDIA_LOADING:{get:function(e){var t;return!!((null==(t=e.media)?void 0:t.readyState)<3)},mediaEvents:["waiting","playing","emptied"]},MEDIA_BUFFERED:{get:function(e){var t,n,i;const r=null==(t=e.media)?void 0:t.buffered;return Array.from(null!=(i=null==(n=e.media)?void 0:n.buffered)?i:[]).map(((e,t)=>[Number(r.start(t)).toFixed(3),Number(r.end(t)).toFixed(3)]))},mediaEvents:["progress","emptied"]},MEDIA_STREAM_TYPE:{get:function(e){const{media:t}=e;if(!t)return;const{streamType:n}=t;if(Xf.includes(n)){if(n===uh.UNKNOWN){const t=e.getAttribute("defaultstreamtype");return[uh.LIVE,uh.ON_DEMAND].includes(t)?t:void 0}return n}const i=t.duration;if(i===1/0)return uh.LIVE;if(Number.isFinite(i))return uh.ON_DEMAND;{const t=e.getAttribute("defaultstreamtype");if([uh.LIVE,uh.ON_DEMAND].includes(t))return t}},mediaEvents:["emptied","durationchange","loadedmetadata","streamtypechange"]},MEDIA_TARGET_LIVE_WINDOW:{get:function(e){const{media:t}=e;if(!t)return Number.NaN;const{targetLiveWindow:n}=t,i=Zf.MEDIA_STREAM_TYPE.get(e);return null!=n&&!Number.isNaN(n)||i!==uh.LIVE?n:0},mediaEvents:["emptied","durationchange","loadedmetadata","streamtypechange","targetlivewindowchange"]},MEDIA_TIME_IS_LIVE:{get:function(e){const{media:t}=e;if(!t)return!1;if("number"==typeof t.liveEdgeStart)return!Number.isNaN(t.liveEdgeStart)&&t.currentTime>=t.liveEdgeStart;if(!("live"===Zf.MEDIA_STREAM_TYPE.get(e)))return!1;const n=t.seekable;if(!n)return!0;if(!n.length)return!1;const i=e.hasAttribute("liveedgeoffset")?Number(e.getAttribute("liveedgeoffset")):10,r=n.end(n.length-1)-i;return t.currentTime>=r},mediaEvents:["playing","timeupdate","progress","waiting","emptied"]},MEDIA_IS_FULLSCREEN:{get:function(e,t){var n;const i=e.media;if(i&&void 0===Hh[Vf.element]&&"webkitDisplayingFullscreen"in i)return i.webkitDisplayingFullscreen&&"fullscreen"===i.webkitPresentationMode;let r;if(t){r=Hh[Vf.element]?t.target:null}else r=null!=(n=e.getRootNode().fullscreenElement)?n:Hh[Vf.element];return Lh(e.fullscreenElement,r)},rootEvents:Vf.rootEvents,mediaEvents:Vf.mediaEvents},MEDIA_IS_PIP:{get:function(e,t){var n;const i=e.media;if(!i)return!1;if(t)return"enterpictureinpicture"==t.type;{const t=null!=(n=e.getRootNode().pictureInPictureElement)?n:Hh.pictureInPictureElement;return Lh(i,t)}},mediaEvents:["enterpictureinpicture","leavepictureinpicture"]},MEDIA_IS_CASTING:{get:function(e,t){var n;const{media:i}=e;if(!i)return!1;const r=null==(n=Vh.CastableVideoElement)?void 0:n.castElement;let s=Lh(i,r);return"castchange"===(null==t?void 0:t.type)&&"CONNECTING"===(null==t?void 0:t.detail)&&(s="connecting"),s},mediaEvents:["entercast","leavecast","castchange"]},MEDIA_AIRPLAY_UNAVAILABLE:{get:function(e,t){return jf?t&&"available"!==t.availability&&"not-available"===t.availability?dh:void 0:ch},mediaEvents:["webkitplaybacktargetavailabilitychanged"]},MEDIA_CAST_UNAVAILABLE:{get:function(){var e;const t=null==(e=Vh.CastableVideoElement)?void 0:e.castState;return qf&&t?t.includes("CONNECT")?void 0:dh:ch},mediaEvents:["castchange"]},MEDIA_FULLSCREEN_UNAVAILABLE:{get:function(){return Gf?void 0:dh}},MEDIA_PIP_UNAVAILABLE:{get:function(){return Kf?void 0:ch}},MEDIA_RENDITION_UNAVAILABLE:{get:function(e){var t;const{media:n}=e;return(null==n?void 0:n.videoRenditions)?(null==(t=n.videoRenditions)?void 0:t.length)?void 0:dh:ch},mediaEvents:["emptied","loadstart"],videoRenditionsEvents:["addrendition","removerendition"]},MEDIA_AUDIO_TRACK_UNAVAILABLE:{get:function(e){var t,n;const{media:i}=e;return(null==i?void 0:i.audioTracks)?(null!=(n=null==(t=i.audioTracks)?void 0:t.length)?n:0)<=1?dh:void 0:ch},mediaEvents:["emptied","loadstart"],audioTracksEvents:["addtrack","removetrack"]},MEDIA_VOLUME_UNAVAILABLE:{get:function(e){if(void 0!==Yf&&!Yf)return ch;const{media:t}=e;return t&&void 0===t.volume?dh:void 0},mediaEvents:["loadstart"]},MEDIA_SUBTITLES_LIST:{get:function(e){return Qf(e).map((({kind:e,label:t,language:n})=>({kind:e,label:t,language:n})))},mediaEvents:["loadstart"],textTracksEvents:["addtrack","removetrack"]},MEDIA_SUBTITLES_SHOWING:{get:function(e){return!e.hasAttribute("defaultsubtitles")||e.hasAttribute(th.MEDIA_HAS_PLAYED)||e.hasAttribute(th.MEDIA_SUBTITLES_SHOWING)||$f(e,!0),(e=>Uf(e.media,(e=>e.mode===ah&&[rh.SUBTITLES,rh.CAPTIONS].includes(e.kind))))(e).map((({kind:e,label:t,language:n})=>({kind:e,label:t,language:n})))},mediaEvents:["loadstart"],textTracksEvents:["addtrack","removetrack","change"]},MEDIA_RENDITION_LIST:{get:function(e){var t;const{media:n}=e;return[...null!=(t=null==n?void 0:n.videoRenditions)?t:[]]},mediaEvents:["emptied","loadstart"],videoRenditionsEvents:["addrendition","removerendition"]},MEDIA_RENDITION_SELECTED:{get:function(e){var t,n,i;const{media:r}=e;return null==(i=null==(n=null==r?void 0:r.videoRenditions)?void 0:n[null==(t=r.videoRenditions)?void 0:t.selectedIndex])?void 0:i.id},mediaEvents:["emptied"],videoRenditionsEvents:["addrendition","removerendition","change"]},MEDIA_AUDIO_TRACK_LIST:{get:function(e){var t;const{media:n}=e;return[...null!=(t=null==n?void 0:n.audioTracks)?t:[]]},mediaEvents:["emptied","loadstart"],audioTracksEvents:["addtrack","removetrack"]},MEDIA_AUDIO_TRACK_ENABLED:{get:function(e){var t,n;const{media:i}=e;return null==(n=[...null!=(t=null==i?void 0:i.audioTracks)?t:[]].find((e=>e.enabled)))?void 0:n.id},mediaEvents:["emptied"],audioTracksEvents:["addtrack","removetrack","change"]}},Jf={MEDIA_PLAY_REQUEST:(e,t,n)=>{var i;const r=Zf.MEDIA_STREAM_TYPE.get(n),s=null===n.getAttribute("noautoseektolive");r==uh.LIVE&&s&&Jf.MEDIA_SEEK_TO_LIVE_REQUEST(e),null==(i=e.play())||i.catch((()=>{}))},MEDIA_PAUSE_REQUEST:e=>e.pause(),MEDIA_MUTE_REQUEST:e=>e.muted=!0,MEDIA_UNMUTE_REQUEST:e=>{e.muted=!1,0===e.volume&&(e.volume=.25)},MEDIA_VOLUME_REQUEST:(e,t,n)=>{const i=t.detail;if(e.volume=i,i>0&&e.muted&&(e.muted=!1),!n.hasAttribute("novolumepref"))try{Vh.localStorage.setItem("media-chrome-pref-volume",i.toString())}catch(e){}},MEDIA_ENTER_FULLSCREEN_REQUEST:(e,t,n)=>{Gf?(Hh.pictureInPictureElement&&Hh.exitPictureInPicture(),n[Vf.enter]?n.fullscreenElement[Vf.enter]():e.webkitEnterFullscreen?e.webkitEnterFullscreen():e.requestFullscreen?e.requestFullscreen():console.warn("MediaChrome: Fullscreen not supported")):console.warn("Fullscreen support is unavailable; not entering fullscreen")},MEDIA_EXIT_FULLSCREEN_REQUEST:()=>{Hh[Vf.exit]()},MEDIA_ENTER_PIP_REQUEST:e=>{if(!Hh.pictureInPictureEnabled)return void console.warn("MediaChrome: Picture-in-picture is not enabled");if(!e.requestPictureInPicture)return void console.warn("MediaChrome: The current media does not support picture-in-picture");Hh[Vf.element]&&Hh[Vf.exit]();const t=()=>{console.warn("MediaChrome: The media is not ready for picture-in-picture. It must have a readyState > 0.")};e.requestPictureInPicture().catch((n=>{if(11!==n.code)throw n;if(0!==e.readyState||"none"!==e.preload)throw n;{const n=()=>{e.removeEventListener("loadedmetadata",i),e.preload="none"},i=()=>{e.requestPictureInPicture().catch(t),n()};e.addEventListener("loadedmetadata",i),e.preload="metadata",setTimeout((()=>{0===e.readyState&&t(),n()}),1e3)}}))},MEDIA_EXIT_PIP_REQUEST:()=>{Hh.pictureInPictureElement&&Hh.exitPictureInPicture()},MEDIA_ENTER_CAST_REQUEST:e=>{var t;(null==(t=Vh.CastableVideoElement)?void 0:t.castEnabled)&&(Hh[Vf.element]&&Hh[Vf.exit](),e.requestCast())},MEDIA_EXIT_CAST_REQUEST:async()=>{var e;(null==(e=Vh.CastableVideoElement)?void 0:e.castElement)&&Vh.CastableVideoElement.exitCast()},MEDIA_SEEK_REQUEST:(e,t)=>{const n=t.detail;(e.readyState>0||void 0===e.readyState)&&(e.currentTime=n)},MEDIA_PLAYBACK_RATE_REQUEST:(e,t)=>{e.playbackRate=t.detail},MEDIA_PREVIEW_REQUEST:(e,t,n)=>{var i;if(!e)return;const r=t.detail;null===r&&n.propagateMediaState(th.MEDIA_PREVIEW_TIME,void 0),n.propagateMediaState(th.MEDIA_PREVIEW_TIME,r);const[s]=Uf(e,{kind:rh.METADATA,label:"thumbnails"});if(!s||!s.cues)return;if(null===r)return n.propagateMediaState(th.MEDIA_PREVIEW_IMAGE,void 0),void n.propagateMediaState(th.MEDIA_PREVIEW_COORDS,void 0);const a=Array.prototype.find.call(s.cues,(e=>e.startTime>=r));if(!a)return;const o=/'^(?:[a-z]+:)?\/\//i.test(a.text)||null==(i=e.querySelector('track[label="thumbnails"]'))?void 0:i.src,l=new URL(a.text,o),d=new URLSearchParams(l.hash).get("#xywh");n.propagateMediaState(th.MEDIA_PREVIEW_IMAGE,l.href),n.propagateMediaState(th.MEDIA_PREVIEW_COORDS,d.split(","))},MEDIA_SHOW_SUBTITLES_REQUEST:(e,t,n)=>{const i=Qf(n),{detail:r=[]}=t;Ff(ah,i,r)},MEDIA_DISABLE_SUBTITLES_REQUEST:(e,t,n)=>{const i=Qf(n),{detail:r=[]}=t;Ff(sh,i,r)},MEDIA_AIRPLAY_REQUEST:e=>{e&&(e.webkitShowPlaybackTargetPicker&&Vh.WebKitPlaybackTargetAvailabilityEvent?e.webkitShowPlaybackTargetPicker():console.warn("received a request to select AirPlay but AirPlay is not supported in this environment"))},MEDIA_SEEK_TO_LIVE_REQUEST:e=>{const t=e.seekable;t?t.length?e.currentTime=t.end(t.length-1):console.warn("MediaController: Media is unable to seek to live."):console.warn("MediaController: Media element does not support seeking to live.")},MEDIA_RENDITION_REQUEST:(e,t)=>{if(!(null==e?void 0:e.videoRenditions))return void console.warn("MediaController: Rendition selection not supported by this media.");const n=t.detail,i=[...e.videoRenditions].findIndex((e=>e.id==n));e.videoRenditions.selectedIndex!=i&&(e.videoRenditions.selectedIndex=i)},MEDIA_AUDIO_TRACK_REQUEST:(e,t)=>{if(!(null==e?void 0:e.audioTracks))return void console.warn("MediaController: Audio track selection not supported by this media.");const n=t.detail;for(let t of e.audioTracks)t.enabled=n==t.id}};var ep,tp,np,ip,rp,sp,ap=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},op=(e,t,n)=>(ap(e,t,"read from private field"),n?n.call(e):t.get(e)),lp=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},dp=(e,t,n,i)=>(ap(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),cp=(e,t,n)=>(ap(e,t,"access private method"),n);const up=["ArrowLeft","ArrowRight","Enter"," ","f","m","k","c"],hp="defaultsubtitles",fp="defaultstreamtype",pp="fullscreenelement",mp="hotkeys",gp="keysused",vp="nohotkeys";class yp extends bf{constructor(){super(),lp(this,np),lp(this,rp),lp(this,ep,new Cf(this,mp)),lp(this,tp,void 0),void 0===Zf.MEDIA_VOLUME_UNAVAILABLE.get(this)&&zf.then((()=>{this.propagateMediaState(th.MEDIA_VOLUME_UNAVAILABLE,Zf.MEDIA_VOLUME_UNAVAILABLE.get(this))})),this.mediaStateReceivers=[],this.associatedElementSubscriptions=new Map,this.associateElement(this),Object.keys(Jf).forEach((e=>{const t=`_handle${yh(e,!0)}`;this[t]=t=>{t.stopPropagation(),this.media?Jf[e](this.media,t,this):console.warn("MediaController: No media available.")},this.addEventListener(Xu[e],this[t])})),this._mediaStatePropagators={},Object.keys(Zf).forEach((e=>{this._mediaStatePropagators[e]=t=>{this.propagateMediaState(Ju[e],Zf[e].get(this,t))}})),this.enableHotkeys()}static get observedAttributes(){return super.observedAttributes.concat(vp,mp,fp,hp)}get fullscreenElement(){var e;return null!=(e=op(this,tp))?e:this}set fullscreenElement(e){this.hasAttribute(pp)&&this.removeAttribute(pp),dp(this,tp,e)}attributeChangedCallback(e,t,n){var i;if(e===vp)n!==t&&""===n?(this.hasAttribute(mp)&&console.warn("Both `hotkeys` and `nohotkeys` have been set. All hotkeys will be disabled."),this.disableHotkeys()):n!==t&&null===n&&this.enableHotkeys();else if(e===mp)op(this,ep).value=n;else if(e===hp&&n!==t&&""===n)$f(this,!0);else if(e===fp)this.propagateMediaState(Ju.MEDIA_STREAM_TYPE);else if(e===pp){const e=n?null==(i=this.getRootNode())?void 0:i.getElementById(n):void 0;dp(this,tp,e)}super.attributeChangedCallback(e,t,n)}mediaSetCallback(e){if(super.mediaSetCallback(e),e.hasAttribute("tabindex")||(e.tabIndex=-1),Object.keys(Zf).forEach((t=>{const{mediaEvents:n,rootEvents:i,textTracksEvents:r,videoRenditionsEvents:s,audioTracksEvents:a}=Zf[t],o=this._mediaStatePropagators[t];null==n||n.forEach((t=>{e.addEventListener(t,o),o()})),null==i||i.forEach((e=>{this.getRootNode().addEventListener(e,o),o()})),null==r||r.forEach((t=>{var n;null==(n=e.textTracks)||n.addEventListener(t,o),o()})),null==s||s.forEach((t=>{var n;null==(n=e.videoRenditions)||n.addEventListener(t,o),o()})),null==a||a.forEach((t=>{var n;null==(n=e.audioTracks)||n.addEventListener(t,o),o()}))})),!this.hasAttribute("novolumepref"))try{const t=Vh.localStorage.getItem("media-chrome-pref-volume");null!==t&&(e.volume=t)}catch(e){console.debug("Error getting volume pref",e)}}mediaUnsetCallback(e){super.mediaUnsetCallback(e),Object.keys(Zf).forEach((t=>{const{mediaEvents:n,rootEvents:i,textTracksEvents:r,videoRenditionsEvents:s,audioTracksEvents:a}=Zf[t],o=this._mediaStatePropagators[t];null==n||n.forEach((t=>{e.removeEventListener(t,o)})),null==i||i.forEach((e=>{this.getRootNode().removeEventListener(e,o)})),null==r||r.forEach((t=>{var n;null==(n=e.textTracks)||n.removeEventListener(t,o)})),null==s||s.forEach((t=>{var n;null==(n=e.videoRenditions)||n.removeEventListener(t,o),o()})),null==a||a.forEach((t=>{var n;null==(n=e.audioTracks)||n.removeEventListener(t,o),o()}))})),this.propagateMediaState(Ju.MEDIA_PAUSED,!0)}propagateMediaState(e,t){const n=Lp(this.mediaStateReceivers,e);if(wp(this.mediaStateReceivers,e,t),n===Lp(this.mediaStateReceivers,e))return;const i=e.toLowerCase(),r=new Vh.CustomEvent(ih[i],{composed:!0,bubbles:!0,detail:t});this.dispatchEvent(r)}associateElement(e){if(!e)return;const{associatedElementSubscriptions:t}=this;if(t.has(e))return;const n=this.registerMediaStateReceiver.bind(this),i=this.unregisterMediaStateReceiver.bind(this),r=Rp(e,n,i);Object.keys(Xu).forEach((t=>{e.addEventListener(Xu[t],this[`_handle${yh(t,!0)}`])})),t.set(e,r)}unassociateElement(e){if(!e)return;const{associatedElementSubscriptions:t}=this;if(!t.has(e))return;t.get(e)(),t.delete(e),Object.keys(Xu).forEach((t=>{e.removeEventListener(Xu[t],this[`_handle${yh(t,!0)}`])}))}registerMediaStateReceiver(e){if(!e)return;const t=this.mediaStateReceivers;t.indexOf(e)>-1||(t.push(e),Object.keys(Zf).forEach((t=>{const n=Zf[t];wp([e],Ju[t],n.get(this))})))}unregisterMediaStateReceiver(e){const t=this.mediaStateReceivers,n=t.indexOf(e);n<0||t.splice(n,1)}enableHotkeys(){this.addEventListener("keydown",cp(this,rp,sp))}disableHotkeys(){this.removeEventListener("keydown",cp(this,rp,sp)),this.removeEventListener("keyup",cp(this,np,ip))}get hotkeys(){return op(this,ep)}keyboardShortcutHandler(e){var t,n,i,r;if((null!=(r=null!=(i=null==(t=e.target.getAttribute(gp))?void 0:t.split(" "))?i:null==(n=e.target)?void 0:n.keysUsed)?r:[]).map((e=>"Space"===e?" ":e)).filter(Boolean).includes(e.key))return;let s,a,o,l,d;if(!(op(this,ep).contains(`no${e.key.toLowerCase()}`)||" "===e.key&&op(this,ep).contains("nospace")))switch(e.key){case" ":case"k":s=null!=this.getAttribute(th.MEDIA_PAUSED)?Xu.MEDIA_PLAY_REQUEST:Xu.MEDIA_PAUSE_REQUEST,this.dispatchEvent(new Vh.CustomEvent(s,{composed:!0,bubbles:!0}));break;case"m":s="off"===this.getAttribute(th.MEDIA_VOLUME_LEVEL)?Xu.MEDIA_UNMUTE_REQUEST:Xu.MEDIA_MUTE_REQUEST,this.dispatchEvent(new Vh.CustomEvent(s,{composed:!0,bubbles:!0}));break;case"f":s=null!=this.getAttribute(th.MEDIA_IS_FULLSCREEN)?Xu.MEDIA_EXIT_FULLSCREEN_REQUEST:Xu.MEDIA_ENTER_FULLSCREEN_REQUEST,this.dispatchEvent(new Vh.CustomEvent(s,{composed:!0,bubbles:!0}));break;case"c":$f(this);break;case"ArrowLeft":a=this.getAttribute(th.MEDIA_CURRENT_TIME),o=a&&!Number.isNaN(+a)?+a:0,l=Math.max(o-10,0),d=new Vh.CustomEvent(Xu.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:l}),this.dispatchEvent(d);break;case"ArrowRight":a=this.getAttribute(th.MEDIA_CURRENT_TIME),o=a&&!Number.isNaN(+a)?+a:0,l=Math.max(o+10,0),d=new Vh.CustomEvent(Xu.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:l}),this.dispatchEvent(d)}}}ep=new WeakMap,tp=new WeakMap,np=new WeakSet,ip=function(e){const{key:t}=e;up.includes(t)?this.keyboardShortcutHandler(e):this.removeEventListener("keyup",cp(this,np,ip))},rp=new WeakSet,sp=function(e){const{metaKey:t,altKey:n,key:i}=e;t||n||!up.includes(i)?this.removeEventListener("keyup",cp(this,np,ip)):([" ","ArrowLeft","ArrowRight"].includes(i)&&!(op(this,ep).contains(`no${i.toLowerCase()}`)||" "===i&&op(this,ep).contains("nospace"))&&e.preventDefault(),this.addEventListener("keyup",cp(this,np,ip),{once:!0}))};const bp=Object.values(th),Ep=Object.values(Ju),Tp=e=>{var t,n,i,r;let{observedAttributes:s}=e.constructor;!s&&(null==(t=e.nodeName)?void 0:t.includes("-"))&&(Vh.customElements.upgrade(e),({observedAttributes:s}=e.constructor));const a=null==(r=null==(i=null==(n=null==e?void 0:e.getAttribute)?void 0:n.call(e,Qu))?void 0:i.split)?void 0:r.call(i,/\s+/);return Array.isArray(s||a)?(s||a).filter((e=>bp.includes(e))):[]},_p=e=>{return!(null==(n=(t=e).nodeName)?void 0:n.includes("-"))||!Vh.customElements.get(null==(i=t.nodeName)?void 0:i.toLowerCase())||t instanceof Vh.customElements.get(t.nodeName.toLowerCase())||Vh.customElements.upgrade(t),Ep.some((e=>e in t))||!!Tp(e).length;var t,n,i},Ap=e=>{var t;return null==(t=null==e?void 0:e.join)?void 0:t.call(e,":")},Sp={[th.MEDIA_SUBTITLES_LIST]:Of,[th.MEDIA_SUBTITLES_SHOWING]:Of,[th.MEDIA_SEEKABLE]:Ap,[th.MEDIA_BUFFERED]:e=>null==e?void 0:e.map(Ap).join(" "),[th.MEDIA_PREVIEW_COORDS]:e=>null==e?void 0:e.join(" "),[th.MEDIA_RENDITION_LIST]:function(e){return null==e?void 0:e.map(ph).join(" ")},[th.MEDIA_AUDIO_TRACK_LIST]:function(e){return null==e?void 0:e.map(gh).join(" ")}},kp=(e,t)=>{if(null==(i=(n=e).closest)?void 0:i.call(n,'*[slot="media"]'))return;var n,i;const r=(e,t)=>{var n,i;_p(e)&&t(e);const{children:r=[]}=null!=e?e:{};[...r,...null!=(i=null==(n=null==e?void 0:e.shadowRoot)?void 0:n.children)?i:[]].forEach((e=>kp(e,t)))},s=null==e?void 0:e.nodeName.toLowerCase();!s.includes("-")||_p(e)?r(e,t):Vh.customElements.whenDefined(s).then((()=>{r(e,t)}))},wp=(e,t,n)=>{e.forEach((e=>{if(t in e)return void(e[t]=n);const i=Tp(e),r=t.toLowerCase();i.includes(r)&&(async(e,t,n)=>{var i,r;if(e.isConnected||await Th(0),"boolean"==typeof n||null==n)return Mh(e,t,n);if("number"==typeof n)return Dh(e,t,n);if("string"==typeof n)return Oh(e,t,n);if(Array.isArray(n)&&!n.length)return e.removeAttribute(t);const s=null!=(r=null==(i=Sp[t])?void 0:i.call(Sp,n))?r:n;e.setAttribute(t,s)})(e,r,n)}))},Lp=(e,t)=>{for(const n of e){if(t in n)return n[t];const e=Tp(n),i=t.toLowerCase();if(e.includes(i))return n.getAttribute(i)}},Rp=(e,t,n)=>{kp(e,t);const i=e=>{var n;const i=null!=(n=null==e?void 0:e.composedPath()[0])?n:e.target;t(i)},r=e=>{var t;const i=null!=(t=null==e?void 0:e.composedPath()[0])?t:e.target;n(i)};e.addEventListener(Xu.REGISTER_MEDIA_STATE_RECEIVER,i),e.addEventListener(Xu.UNREGISTER_MEDIA_STATE_RECEIVER,r);let s=[];const a=e=>{const i=e.target;"media"!==i.name&&(s.forEach((e=>kp(e,n))),s=[...i.assignedElements({flatten:!0})],s.forEach((e=>kp(e,t))))};e.addEventListener("slotchange",a);const o=new MutationObserver((e=>{e.forEach((e=>{const{addedNodes:i=[],removedNodes:r=[],type:s,target:a,attributeName:o}=e;"childList"===s?(Array.prototype.forEach.call(i,(e=>kp(e,t))),Array.prototype.forEach.call(r,(e=>kp(e,n)))):"attributes"===s&&o===Qu&&(_p(a)?t(a):n(a))}))}));o.observe(e,{childList:!0,attributes:!0,subtree:!0});return()=>{kp(e,n),e.removeEventListener("slotchange",a),o.disconnect(),e.removeEventListener(Xu.REGISTER_MEDIA_STATE_RECEIVER,i),e.removeEventListener(Xu.UNREGISTER_MEDIA_STATE_RECEIVER,r)}};Vh.customElements.get("media-controller")||Vh.customElements.define("media-controller",yp);var Ip,Cp,Dp,xp=yp,Mp=Object.defineProperty,Pp=(e,t,n)=>(((e,t,n)=>{t in e?Mp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n),Op=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Np=(e,t,n)=>(Op(e,t,"read from private field"),n?n.call(e):t.get(e)),Fp=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Up=(e,t,n,i)=>(Op(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n);const Bp=Hh.createElement("template"),$p="\n  height: var(--thumb-height);\n  width: var(--media-range-thumb-width, 10px);\n  border: var(--media-range-thumb-border, none);\n  border-radius: var(--media-range-thumb-border-radius, 10px);\n  background: var(--media-range-thumb-background, var(--media-primary-color, rgb(238 238 238)));\n  box-shadow: var(--media-range-thumb-box-shadow, 1px 1px 1px transparent);\n  cursor: pointer;\n  transition: var(--media-range-thumb-transition, none);\n  transform: var(--media-range-thumb-transform, none);\n  opacity: var(--media-range-thumb-opacity, 1);\n",Vp="\n  min-width: 40px;\n  height: var(--track-height);\n  border: var(--media-range-track-border, none);\n  outline: var(--media-range-track-outline);\n  outline-offset: var(--media-range-track-outline-offset);\n  border-radius: var(--media-range-track-border-radius, 1px);\n  background: var(--media-range-track-progress-internal, var(--media-range-track-background, rgb(255 255 255 / .2)));\n  backdrop-filter: var(--media-range-track-backdrop-filter);\n  box-shadow: var(--media-range-track-box-shadow, none);\n  transition: var(--media-range-track-transition, none);\n  transform: translate(var(--media-range-track-translate-x, 0), var(--media-range-track-translate-y, 0));\n  cursor: pointer;\n";Bp.innerHTML=`\n  <style>\n    :host {\n      --thumb-height: var(--media-range-thumb-height, 10px);\n      --track-height: var(--media-range-track-height, 4px);\n      --_focus-box-shadow: var(--media-focus-box-shadow, inset 0 0 0 2px rgb(27 127 204 / .9));\n      --_media-range-padding: var(--media-range-padding, var(--media-control-padding, 10px));\n\n      vertical-align: middle;\n      box-sizing: border-box;\n      display: inline-block;\n      position: relative;\n      background: var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .7)));\n      transition: background .15s linear;\n      width: 100px;\n      height: calc(var(--media-control-height, 24px) + 2 * var(--_media-range-padding));\n      padding-left: var(--media-range-padding-left, var(--_media-range-padding));\n      padding-right: var(--media-range-padding-right, var(--_media-range-padding));\n      pointer-events: auto;\n      \n      font-size: 0;\n      box-shadow: var(--_focus-visible-box-shadow, none);\n    }\n\n    \n    input[type=range]:focus {\n      outline: 0;\n    }\n    input[type=range]:focus::-webkit-slider-runnable-track {\n      outline: 0;\n    }\n\n    :host(:hover) {\n      background: var(--media-control-hover-background, rgb(50 50 70 / .7));\n    }\n\n    #container {\n      position: relative;\n      height: 100%;\n    }\n\n    input[type=range] {\n      \n      -webkit-appearance: none; \n      background: transparent; \n\n      \n      min-height: 100%;\n      width: var(--media-range-track-width, 100%); \n\n      box-sizing: border-box;\n      padding: 0;\n      margin: 0;\n    }\n\n    \n    input[type=range]::-webkit-slider-thumb {\n      -webkit-appearance: none;\n      ${$p}\n      \n      margin-top: calc(calc(0px - var(--thumb-height) + var(--track-height)) / 2);\n    }\n\n    \n    input[type=range]::-moz-range-thumb {\n      ${$p}\n      translate: var(--media-range-track-translate-x, 0) var(--media-range-track-translate-y, 0);\n    }\n\n    input[type=range]::-webkit-slider-runnable-track { ${Vp} }\n    input[type=range]::-moz-range-track { ${Vp} }\n    input[type=range]::-ms-track {\n      \n      width: 100%;\n      cursor: pointer;\n      \n      background: transparent;\n      border-color: transparent;\n      color: transparent;\n\n      ${Vp}\n    }\n\n    #background,\n    #pointer {\n      width: var(--media-range-track-width, 100%);\n      height: var(--track-height);\n      border-radius: var(--media-range-track-border-radius, 1px);\n      position: absolute;\n      top: 50%;\n      transform: translate(var(--media-range-track-translate-x, 0px), calc(var(--media-range-track-translate-y, 0px) - 50%));\n    }\n\n    #background {\n      min-width: 40px;\n      background: var(--media-range-track-background, rgb(255 255 255 / .2));\n      backdrop-filter: var(--media-range-track-background-backdrop-filter);\n    }\n\n    #pointer {\n      background: var(--media-range-track-pointer-background);\n      border-right: var(--media-range-track-pointer-border-right);\n      transition: visibility .25s, opacity .25s;\n      visibility: hidden;\n      opacity: 0;\n    }\n\n    :host(:hover) #pointer {\n      transition: visibility .5s, opacity .5s;\n      visibility: visible;\n      opacity: 1;\n    }\n\n    #hoverzone {\n      \n      z-index: 1;\n      display: var(--media-time-range-hover-display, none);\n      position: absolute;\n      width: 100%;\n      bottom: var(--media-time-range-hover-bottom, -5px);\n      height: var(--media-time-range-hover-height, max(calc(100% + 5px), 20px));\n    }\n\n    #range {\n      z-index: 2;\n      position: relative;\n      height: var(--media-range-track-height, 4px);\n    }\n\n    input[type=range]:disabled::-webkit-slider-thumb {\n      background-color: #777;\n    }\n\n    input[type=range]:disabled::-webkit-slider-runnable-track {\n      background-color: #777;\n    }\n  </style>\n  <div id="container">\n    <div id="background"></div>\n    <div id="pointer"></div>\n    <div id="hoverzone"></div>\n    <input id="range" type="range" min="0" max="1000" step="any" value="0">\n  </div>\n`;class Hp extends Vh.HTMLElement{constructor(){super(),Pp(this,"thumbWidth"),Fp(this,Ip,void 0),Fp(this,Cp,(()=>{if(this.range.matches(":focus-visible")){const{style:e}=Ih(this.shadowRoot,":host");e.setProperty("--_focus-visible-box-shadow","var(--_focus-box-shadow)")}})),Fp(this,Dp,(()=>{const{style:e}=Ih(this.shadowRoot,":host");e.removeProperty("--_focus-visible-box-shadow")})),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(Bp.content.cloneNode(!0)));const{style:e}=Ih(this.shadowRoot,":host");e.setProperty("display",`var(--media-control-display, var(--${this.localName}-display, inline-block))`),this.container=this.shadowRoot.querySelector("#container"),this.range=this.shadowRoot.querySelector("#range"),this.range.addEventListener("input",this.updateBar.bind(this)),this.thumbWidth=parseInt(getComputedStyle(this).getPropertyValue("--media-range-thumb-width")||"10",10)}static get observedAttributes(){return["disabled","aria-disabled",Zu]}attributeChangedCallback(e,t,n){var i,r,s,a,o;e===Zu?(t&&(null==(r=null==(i=Np(this,Ip))?void 0:i.unassociateElement)||r.call(i,this),Up(this,Ip,null)),n&&(Up(this,Ip,null==(s=this.getRootNode())?void 0:s.getElementById(n)),null==(o=null==(a=Np(this,Ip))?void 0:a.associateElement)||o.call(a,this))):("disabled"===e||"aria-disabled"===e&&t!==n)&&(null==n?this.range.removeAttribute(e):this.range.setAttribute(e,n))}connectedCallback(){var e,t,n;const i=this.getAttribute(Zu);i&&(Up(this,Ip,null==(e=this.getRootNode())?void 0:e.getElementById(i)),null==(n=null==(t=Np(this,Ip))?void 0:t.associateElement)||n.call(t,this)),this.updateBar(),this.shadowRoot.addEventListener("focusin",Np(this,Cp)),this.shadowRoot.addEventListener("focusout",Np(this,Dp))}disconnectedCallback(){var e,t;null==(t=null==(e=Np(this,Ip))?void 0:e.unassociateElement)||t.call(e,this),Up(this,Ip,null),this.shadowRoot.removeEventListener("focusin",Np(this,Cp)),this.shadowRoot.removeEventListener("focusout",Np(this,Dp))}updatePointerBar(e){const t=this.range.getBoundingClientRect();let n=(e.clientX-t.left)/t.width;n=Math.max(0,Math.min(1,n));const{style:i}=Ih(this.shadowRoot,"#pointer");i.setProperty("width",n*t.width+"px")}updateBar(){const e=this.getBarColors();let t="linear-gradient(to right, ",n=0;e.forEach((e=>{e[1]<n||(t+=`${e[0]} ${n}%, ${e[0]} ${e[1]}%,`,n=e[1])})),t=t.slice(0,t.length-1)+")";const{style:i}=Ih(this.shadowRoot,"#range");i.setProperty("--media-range-track-progress-internal",t)}getRelativeValues(){const{range:e}=this;return{relativeValue:e.value-e.min,relativeMax:e.max-e.min}}getBarColors(){const e=this.range,{relativeValue:t,relativeMax:n}=this.getRelativeValues(),i=t/n*100;let r=0;if(t&&t<n){r=this.thumbWidth*(.5-i/100)/e.offsetWidth*100}return[["var(--media-range-bar-color, var(--media-primary-color, rgb(238 238 238)))",i+r],["var(--media-range-track-color, transparent)",100]]}get keysUsed(){return["ArrowUp","ArrowRight","ArrowDown","ArrowLeft"]}}Ip=new WeakMap,Cp=new WeakMap,Dp=new WeakMap,Vh.customElements.get("media-chrome-range")||Vh.customElements.define("media-chrome-range",Hp);var Wp,Gp=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Kp=(e,t,n)=>(Gp(e,t,"read from private field"),n?n.call(e):t.get(e)),jp=(e,t,n,i)=>(Gp(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n);const qp=Hh.createElement("template");qp.innerHTML="\n  <style>\n    :host {\n      \n      box-sizing: border-box;\n      display: var(--media-control-display, var(--media-control-bar-display, inline-flex));\n      color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));\n      --media-loading-indicator-icon-height: 44px;\n    }\n\n    media-time-range,\n    ::slotted(media-time-range),\n    ::slotted(media-clip-selector) {\n      flex-grow: 1;\n    }\n\n    media-time-range,\n    ::slotted(media-time-range),\n    ::slotted(media-clip-selector),\n    media-volume-range,\n    ::slotted(media-volume-range) {\n      height: var(--_range-auto-size, calc(var(--media-control-height, 24px) + 2 * var(--_media-range-padding)));\n    }\n  </style>\n\n  <slot></slot>\n";class Yp extends Vh.HTMLElement{constructor(){super(),((e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)})(this,Wp,void 0),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(qp.content.cloneNode(!0))),this.shadowRoot.querySelector("slot").addEventListener("slotchange",(({target:e})=>{const t=e.assignedElements({flatten:!0}).every((e=>["media-time-range","media-volume-range"].includes(e.nodeName.toLowerCase()))),{style:n}=Ih(this.shadowRoot,":host"),i=t?"unset":"initial";n.setProperty("--_range-auto-size",i)}))}static get observedAttributes(){return[Zu]}attributeChangedCallback(e,t,n){var i,r,s,a,o;e===Zu&&(t&&(null==(r=null==(i=Kp(this,Wp))?void 0:i.unassociateElement)||r.call(i,this),jp(this,Wp,null)),n&&(jp(this,Wp,null==(s=this.getRootNode())?void 0:s.getElementById(n)),null==(o=null==(a=Kp(this,Wp))?void 0:a.associateElement)||o.call(a,this)))}connectedCallback(){var e,t,n;const i=this.getAttribute(Zu);i&&(jp(this,Wp,null==(e=this.getRootNode())?void 0:e.getElementById(i)),null==(n=null==(t=Kp(this,Wp))?void 0:t.associateElement)||n.call(t,this))}disconnectedCallback(){var e,t;null==(t=null==(e=Kp(this,Wp))?void 0:e.unassociateElement)||t.call(e,this),jp(this,Wp,null)}}Wp=new WeakMap,Vh.customElements.get("media-control-bar")||Vh.customElements.define("media-control-bar",Yp);var zp,Xp=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Qp=(e,t,n)=>(Xp(e,t,"read from private field"),n?n.call(e):t.get(e)),Zp=(e,t,n,i)=>(Xp(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n);const Jp=Hh.createElement("template");Jp.innerHTML="\n  <style>\n    :host {\n      font: var(--media-font,\n        var(--media-font-weight, normal)\n        var(--media-font-size, 14px) /\n        var(--media-text-content-height, var(--media-control-height, 24px))\n        var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));\n      color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));\n      background: var(--media-text-background, var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .7))));\n      padding: var(--media-control-padding, 10px);\n      display: inline-flex;\n      justify-content: center;\n      align-items: center;\n      vertical-align: middle;\n      box-sizing: border-box;\n      text-align: center;\n      pointer-events: auto;\n    }\n\n    \n    :host(:focus-visible) {\n      box-shadow: inset 0 0 0 2px rgb(27 127 204 / .9);\n      outline: 0;\n    }\n\n    \n    :host(:where(:focus)) {\n      box-shadow: none;\n      outline: 0;\n    }\n  </style>\n  <slot></slot>\n";class em extends Vh.HTMLElement{constructor(){super(),((e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)})(this,zp,void 0),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(Jp.content.cloneNode(!0)));const{style:e}=Ih(this.shadowRoot,":host");e.setProperty("display",`var(--media-control-display, var(--${this.localName}-display, inline-flex))`)}static get observedAttributes(){return[Zu]}attributeChangedCallback(e,t,n){var i,r,s,a,o;e===Zu&&(t&&(null==(r=null==(i=Qp(this,zp))?void 0:i.unassociateElement)||r.call(i,this),Zp(this,zp,null)),n&&(Zp(this,zp,null==(s=this.getRootNode())?void 0:s.getElementById(n)),null==(o=null==(a=Qp(this,zp))?void 0:a.associateElement)||o.call(a,this)))}connectedCallback(){var e,t,n;const i=this.getAttribute(Zu);i&&(Zp(this,zp,null==(e=this.getRootNode())?void 0:e.getElementById(i)),null==(n=null==(t=Qp(this,zp))?void 0:t.associateElement)||n.call(t,this))}disconnectedCallback(){var e,t;null==(t=null==(e=Qp(this,zp))?void 0:e.unassociateElement)||t.call(e,this),Zp(this,zp,null)}}zp=new WeakMap,Vh.customElements.get("media-text-display")||Vh.customElements.define("media-text-display",em);var tm,nm=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},im=(e,t,n)=>(nm(e,t,"read from private field"),n?n.call(e):t.get(e));class rm extends em{constructor(){var e,t,n,i;super(),((e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)})(this,tm,void 0),e=this,t=tm,n=this.shadowRoot.querySelector("slot"),nm(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),im(this,tm).textContent=Sh(0)}static get observedAttributes(){return[...super.observedAttributes,th.MEDIA_DURATION]}attributeChangedCallback(e,t,n){e===th.MEDIA_DURATION&&(im(this,tm).textContent=Sh(n)),super.attributeChangedCallback(e,t,n)}get mediaDuration(){return Ch(this,th.MEDIA_DURATION)}set mediaDuration(e){Dh(this,th.MEDIA_DURATION,e)}}tm=new WeakMap,Vh.customElements.get("media-duration-display")||Vh.customElements.define("media-duration-display",rm);var sm,am=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},om=(e,t,n)=>(am(e,t,"read from private field"),n?n.call(e):t.get(e));const lm={REMAINING:"remaining",SHOW_DURATION:"showduration",NO_TOGGLE:"notoggle"},dm=[...Object.values(lm),th.MEDIA_CURRENT_TIME,th.MEDIA_DURATION,th.MEDIA_SEEKABLE],cm=["Enter"," "],um=(e,{timesSep:t="&nbsp;/&nbsp;"}={})=>{var n,i,r,s;const a=e.hasAttribute(lm.REMAINING),o=e.hasAttribute(lm.SHOW_DURATION),l=null!=(n=e.mediaCurrentTime)?n:0,[,d]=null!=(i=e.mediaSeekable)?i:[],c=null!=(s=null!=(r=e.mediaDuration)?r:d)?s:0,u=Sh(a?0-(c-l):l);return o?`${u}${t}${Sh(c)}`:u};class hm extends em{constructor(){var e,t,n,i;super(),((e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)})(this,sm,void 0),e=this,t=sm,n=this.shadowRoot.querySelector("slot"),am(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),om(this,sm).innerHTML=`${um(this)}`;const{style:r}=Ih(this.shadowRoot,":host:not([notoggle])");r.setProperty("cursor","pointer");const{style:s}=Ih(this.shadowRoot,":host(:hover:not([notoggle]))");s.setProperty("background","var(--media-control-hover-background, rgba(50 50 70 / .7))")}static get observedAttributes(){return[...super.observedAttributes,...dm,"disabled"]}connectedCallback(){this.hasAttribute("disabled")||this.enable(),this.setAttribute("role","progressbar"),this.setAttribute("aria-label",hh.PLAYBACK_TIME());const e=t=>{const{key:n}=t;cm.includes(n)?this.toggleTimeDisplay():this.removeEventListener("keyup",e)};this.addEventListener("keydown",(t=>{const{metaKey:n,altKey:i,key:r}=t;n||i||!cm.includes(r)?this.removeEventListener("keyup",e):this.addEventListener("keyup",e)})),this.addEventListener("click",this.toggleTimeDisplay),super.connectedCallback()}toggleTimeDisplay(){this.noToggle||(this.hasAttribute("remaining")?this.removeAttribute("remaining"):this.setAttribute("remaining",""))}disconnectedCallback(){this.disable(),super.disconnectedCallback()}attributeChangedCallback(e,t,n){dm.includes(e)?this.update():"disabled"===e&&n!==t&&(null==n?this.enable():this.disable()),super.attributeChangedCallback(e,t,n)}enable(){this.tabIndex=0}disable(){this.tabIndex=-1}get remaining(){return xh(this,lm.REMAINING)}set remaining(e){Mh(this,lm.REMAINING,e)}get showDuration(){return xh(this,lm.SHOW_DURATION)}set showDuration(e){Mh(this,lm.SHOW_DURATION,e)}get noToggle(){return xh(this,lm.NO_TOGGLE)}set noToggle(e){Mh(this,lm.NO_TOGGLE,e)}get mediaDuration(){return Ch(this,th.MEDIA_DURATION)}set mediaDuration(e){Dh(this,th.MEDIA_DURATION,e)}get mediaCurrentTime(){return Ch(this,th.MEDIA_CURRENT_TIME)}set mediaCurrentTime(e){Dh(this,th.MEDIA_CURRENT_TIME,e)}get mediaSeekable(){const e=this.getAttribute(th.MEDIA_SEEKABLE);if(e)return e.split(":").map((e=>+e))}set mediaSeekable(e){null!=e?this.setAttribute(th.MEDIA_SEEKABLE,e.join(":")):this.removeAttribute(th.MEDIA_SEEKABLE)}update(){const e=um(this);(e=>{var t;const n=e.mediaCurrentTime,[,i]=null!=(t=e.mediaSeekable)?t:[],r=e.mediaDuration||i;if(null==n||null==r)return void e.setAttribute("aria-valuetext","video not loaded, unknown time.");const s=e.hasAttribute(lm.REMAINING),a=e.hasAttribute(lm.SHOW_DURATION),o=Ah(s?0-(r-n):n);if(!a)return void e.setAttribute("aria-valuetext",o);const l=`${o} of ${Ah(r)}`;e.setAttribute("aria-valuetext",l)})(this),e!==om(this,sm).innerHTML&&(om(this,sm).innerHTML=e)}}sm=new WeakMap,Vh.customElements.get("media-time-display")||Vh.customElements.define("media-time-display",hm);const fm=Hh.createElement("template");fm.innerHTML='\n  <style>\n    :host([aria-checked="true"]) slot[name=off] {\n      display: none !important;\n    }\n\n    \n    :host(:not([aria-checked="true"])) slot[name=on] {\n      display: none !important;\n    }\n  </style>\n\n  <slot name="icon">\n    <slot name="on"><svg aria-hidden="true" viewBox="0 0 26 24">\n  <path d="M22.83 5.68a2.58 2.58 0 0 0-2.3-2.5c-3.62-.24-11.44-.24-15.06 0a2.58 2.58 0 0 0-2.3 2.5c-.23 4.21-.23 8.43 0 12.64a2.58 2.58 0 0 0 2.3 2.5c3.62.24 11.44.24 15.06 0a2.58 2.58 0 0 0 2.3-2.5c.23-4.21.23-8.43 0-12.64Zm-11.39 9.45a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.92 3.92 0 0 1 .92-2.77 3.18 3.18 0 0 1 2.43-1 2.94 2.94 0 0 1 2.13.78c.364.359.62.813.74 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.17 1.61 1.61 0 0 0-1.29.58 2.79 2.79 0 0 0-.5 1.89 3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.48 1.48 0 0 0 1-.37 2.1 2.1 0 0 0 .59-1.14l1.4.44a3.23 3.23 0 0 1-1.07 1.69Zm7.22 0a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.88 3.88 0 0 1 .93-2.77 3.14 3.14 0 0 1 2.42-1 3 3 0 0 1 2.16.82 2.8 2.8 0 0 1 .73 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.21 1.61 1.61 0 0 0-1.29.58A2.79 2.79 0 0 0 15 12a3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.44 1.44 0 0 0 1-.37 2.1 2.1 0 0 0 .6-1.15l1.4.44a3.17 3.17 0 0 1-1.1 1.7Z"/>\n</svg></slot>\n    <slot name="off"><svg aria-hidden="true" viewBox="0 0 26 24">\n  <path d="M17.73 14.09a1.4 1.4 0 0 1-1 .37 1.579 1.579 0 0 1-1.27-.58A3 3 0 0 1 15 12a2.8 2.8 0 0 1 .5-1.85 1.63 1.63 0 0 1 1.29-.57 1.47 1.47 0 0 1 1.51 1.2l1.43-.34A2.89 2.89 0 0 0 19 9.07a3 3 0 0 0-2.14-.78 3.14 3.14 0 0 0-2.42 1 3.91 3.91 0 0 0-.93 2.78 3.74 3.74 0 0 0 .92 2.66 3.07 3.07 0 0 0 2.34 1 3.07 3.07 0 0 0 1.91-.57 3.17 3.17 0 0 0 1.07-1.74l-1.4-.45c-.083.43-.3.822-.62 1.12Zm-7.22 0a1.43 1.43 0 0 1-1 .37 1.58 1.58 0 0 1-1.27-.58A3 3 0 0 1 7.76 12a2.8 2.8 0 0 1 .5-1.85 1.63 1.63 0 0 1 1.29-.57 1.47 1.47 0 0 1 1.51 1.2l1.43-.34a2.81 2.81 0 0 0-.74-1.32 2.94 2.94 0 0 0-2.13-.78 3.18 3.18 0 0 0-2.43 1 4 4 0 0 0-.92 2.78 3.74 3.74 0 0 0 .92 2.66 3.07 3.07 0 0 0 2.34 1 3.07 3.07 0 0 0 1.91-.57 3.23 3.23 0 0 0 1.07-1.74l-1.4-.45a2.06 2.06 0 0 1-.6 1.07Zm12.32-8.41a2.59 2.59 0 0 0-2.3-2.51C18.72 3.05 15.86 3 13 3c-2.86 0-5.72.05-7.53.17a2.59 2.59 0 0 0-2.3 2.51c-.23 4.207-.23 8.423 0 12.63a2.57 2.57 0 0 0 2.3 2.5c1.81.13 4.67.19 7.53.19 2.86 0 5.72-.06 7.53-.19a2.57 2.57 0 0 0 2.3-2.5c.23-4.207.23-8.423 0-12.63Zm-1.49 12.53a1.11 1.11 0 0 1-.91 1.11c-1.67.11-4.45.18-7.43.18-2.98 0-5.76-.07-7.43-.18a1.11 1.11 0 0 1-.91-1.11c-.21-4.14-.21-8.29 0-12.43a1.11 1.11 0 0 1 .91-1.11C7.24 4.56 10 4.49 13 4.49s5.76.07 7.43.18a1.11 1.11 0 0 1 .91 1.11c.21 4.14.21 8.29 0 12.43Z"/>\n</svg></slot>\n  </slot>\n';const pm=e=>{e.setAttribute("aria-checked",Bf(e))};class mm extends ef{static get observedAttributes(){return[...super.observedAttributes,th.MEDIA_SUBTITLES_LIST,th.MEDIA_SUBTITLES_SHOWING]}constructor(e={}){super({slotTemplate:fm,...e}),this._captionsReady=!1}connectedCallback(){super.connectedCallback(),this.setAttribute("role","switch"),this.setAttribute("aria-label",hh.CLOSED_CAPTIONS()),pm(this)}attributeChangedCallback(e,t,n){e===th.MEDIA_SUBTITLES_SHOWING&&pm(this),super.attributeChangedCallback(e,t,n)}get mediaSubtitlesList(){return gm(this,th.MEDIA_SUBTITLES_LIST)}set mediaSubtitlesList(e){vm(this,th.MEDIA_SUBTITLES_LIST,e)}get mediaSubtitlesShowing(){return gm(this,th.MEDIA_SUBTITLES_SHOWING)}set mediaSubtitlesShowing(e){vm(this,th.MEDIA_SUBTITLES_SHOWING,e)}handleClick(){$f(this)}}const gm=(e,t)=>{const n=e.getAttribute(t);return n?Mf(n):[]},vm=(e,t,n)=>{if(!(null==n?void 0:n.length))return void e.removeAttribute(t);const i=Of(n);e.getAttribute(t)!==i&&e.setAttribute(t,i)};Vh.customElements.get("media-captions-button")||Vh.customElements.define("media-captions-button",mm);const ym="seekoffset",bm=Hh.createElement("template");bm.innerHTML='\n  <slot name="icon"><svg aria-hidden="true" viewBox="0 0 20 24"><defs><style>.text{font-size:8px;font-family:Arial-BoldMT, Arial;font-weight:700;}</style></defs><text class="text value" transform="translate(8.9 19.87)">30</text><path d="M10 6V3l5.61 4L10 10.94V8a5.54 5.54 0 0 0-1.9 10.48v2.12A7.5 7.5 0 0 1 10 6Z"/></svg></slot>\n';class Em extends ef{static get observedAttributes(){return[...super.observedAttributes,th.MEDIA_CURRENT_TIME,ym]}constructor(e={}){super({slotTemplate:bm,...e})}connectedCallback(){this.seekOffset=Ch(this,ym,30),super.connectedCallback()}attributeChangedCallback(e,t,n){e===ym&&(this.seekOffset=Ch(this,ym,30)),super.attributeChangedCallback(e,t,n)}get seekOffset(){return Ch(this,ym,30)}set seekOffset(e){Dh(this,ym,e),this.setAttribute("aria-label",fh.SEEK_FORWARD_N_SECS({seekOffset:this.seekOffset})),kh(wh(this,"icon"),this.seekOffset)}get mediaCurrentTime(){return Ch(this,th.MEDIA_CURRENT_TIME,0)}set mediaCurrentTime(e){Dh(this,th.MEDIA_CURRENT_TIME,e)}handleClick(){const e=this.mediaCurrentTime+this.seekOffset,t=new Vh.CustomEvent(Xu.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:e});this.dispatchEvent(t)}}Vh.customElements.get("media-seek-forward-button")||Vh.customElements.define("media-seek-forward-button",Em);const Tm=Hh.createElement("template");Tm.innerHTML=`\n  <style>\n  :host([${th.MEDIA_IS_FULLSCREEN}]) slot:not([name=exit]):not([name=icon]) {\n    display: none !important;\n  }\n\n  \n  :host(:not([${th.MEDIA_IS_FULLSCREEN}])) slot:not([name=enter]):not([name=icon]) {\n    display: none !important;\n  }\n  </style>\n\n  <slot name="icon">\n    <slot name="enter"><svg aria-hidden="true" viewBox="0 0 26 24">\n  <path d="M16 3v2.5h3.5V9H22V3h-6ZM4 9h2.5V5.5H10V3H4v6Zm15.5 9.5H16V21h6v-6h-2.5v3.5ZM6.5 15H4v6h6v-2.5H6.5V15Z"/>\n</svg></slot>\n    <slot name="exit"><svg aria-hidden="true" viewBox="0 0 26 24">\n  <path d="M18.5 6.5V3H16v6h6V6.5h-3.5ZM16 21h2.5v-3.5H22V15h-6v6ZM4 17.5h3.5V21H10v-6H4v2.5Zm3.5-11H4V9h6V3H7.5v3.5Z"/>\n</svg></slot>\n  </slot>\n`;const _m=e=>{const t=e.mediaIsFullscreen?fh.EXIT_FULLSCREEN():fh.ENTER_FULLSCREEN();e.setAttribute("aria-label",t)};class Am extends ef{static get observedAttributes(){return[...super.observedAttributes,th.MEDIA_IS_FULLSCREEN,th.MEDIA_FULLSCREEN_UNAVAILABLE]}constructor(e={}){super({slotTemplate:Tm,...e})}connectedCallback(){_m(this),super.connectedCallback()}attributeChangedCallback(e,t,n){e===th.MEDIA_IS_FULLSCREEN&&_m(this),super.attributeChangedCallback(e,t,n)}get mediaFullscreenUnavailable(){return Ph(this,th.MEDIA_FULLSCREEN_UNAVAILABLE)}set mediaFullscreenUnavailable(e){Oh(this,th.MEDIA_FULLSCREEN_UNAVAILABLE,e)}get mediaIsFullscreen(){return xh(this,th.MEDIA_IS_FULLSCREEN)}set mediaIsFullscreen(e){Mh(this,th.MEDIA_IS_FULLSCREEN,e)}handleClick(){const e=this.mediaIsFullscreen?Xu.MEDIA_EXIT_FULLSCREEN_REQUEST:Xu.MEDIA_ENTER_FULLSCREEN_REQUEST;this.dispatchEvent(new Vh.CustomEvent(e,{composed:!0,bubbles:!0}))}}Vh.customElements.get("media-fullscreen-button")||Vh.customElements.define("media-fullscreen-button",Am);const{MEDIA_TIME_IS_LIVE:Sm,MEDIA_PAUSED:km}=th,{MEDIA_SEEK_TO_LIVE_REQUEST:wm,MEDIA_PLAY_REQUEST:Lm}=Xu,Rm=Hh.createElement("template");Rm.innerHTML=`\n  <style>\n\n  slot[name=indicator] > *,\n  :host ::slotted([slot=indicator]) {\n    \n    min-width: auto;\n    fill: var(--media-live-button-icon-color, rgb(140, 140, 140));\n    color: var(--media-live-button-icon-color, rgb(140, 140, 140));\n  }\n\n  :host([${Sm}]:not([${km}])) slot[name=indicator] > *,\n  :host([${Sm}]:not([${km}])) ::slotted([slot=indicator]) {\n    fill: var(--media-live-button-indicator-color, rgb(255, 0, 0));\n    color: var(--media-live-button-indicator-color, rgb(255, 0, 0));\n  }\n\n  :host([${Sm}]:not([${km}])) {\n    cursor: not-allowed;\n  }\n\n  </style>\n\n  <slot name="indicator"><svg viewBox="0 0 6 12"><circle cx="3" cy="6" r="2"></circle></svg></slot>\n  \n  <slot name="spacer">&nbsp;</slot><slot name="text">LIVE</slot>\n`;const Im=e=>{const t=e.mediaPaused||!e.mediaTimeIsLive,n=t?fh.SEEK_LIVE():fh.PLAYING_LIVE();e.setAttribute("aria-label",n),t?e.removeAttribute("aria-disabled"):e.setAttribute("aria-disabled","true")};class Cm extends ef{static get observedAttributes(){return[...super.observedAttributes,km,Sm]}constructor(e={}){super({slotTemplate:Rm,...e})}connectedCallback(){Im(this),super.connectedCallback()}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),Im(this)}get mediaPaused(){return xh(this,th.MEDIA_PAUSED)}set mediaPaused(e){Mh(this,th.MEDIA_PAUSED,e)}get mediaTimeIsLive(){return xh(this,th.MEDIA_TIME_IS_LIVE)}set mediaTimeIsLive(e){Mh(this,th.MEDIA_TIME_IS_LIVE,e)}handleClick(){!this.mediaPaused&&this.mediaTimeIsLive||(this.dispatchEvent(new Vh.CustomEvent(wm,{composed:!0,bubbles:!0})),this.hasAttribute(km)&&this.dispatchEvent(new Vh.CustomEvent(Lm,{composed:!0,bubbles:!0})))}}Vh.customElements.get("media-live-button")||Vh.customElements.define("media-live-button",Cm);const{MEDIA_VOLUME_LEVEL:Dm}=th,xm='<svg aria-hidden="true" viewBox="0 0 24 24">\n  <path d="M3 9v6h4l5 5V4L7 9H3Zm13.5 3A4.5 4.5 0 0 0 14 8v8a4.47 4.47 0 0 0 2.5-4Z"/>\n</svg>',Mm=Hh.createElement("template");Mm.innerHTML=`\n  <style>\n  \n  :host(:not([${Dm}])) slot:not([name=high]):not([name=icon]), \n  :host([${Dm}=high]) slot:not([name=high]):not([name=icon]) {\n    display: none !important;\n  }\n\n  :host([${Dm}=off]) slot:not([name=off]):not([name=icon]) {\n    display: none !important;\n  }\n\n  :host([${Dm}=low]) slot:not([name=low]):not([name=icon]) {\n    display: none !important;\n  }\n\n  :host([${Dm}=medium]) slot:not([name=medium]):not([name=icon]) {\n    display: none !important;\n  }\n  </style>\n\n  <slot name="icon">\n    <slot name="off"><svg aria-hidden="true" viewBox="0 0 24 24">\n  <path d="M16.5 12A4.5 4.5 0 0 0 14 8v2.18l2.45 2.45a4.22 4.22 0 0 0 .05-.63Zm2.5 0a6.84 6.84 0 0 1-.54 2.64L20 16.15A8.8 8.8 0 0 0 21 12a9 9 0 0 0-7-8.77v2.06A7 7 0 0 1 19 12ZM4.27 3 3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25A6.92 6.92 0 0 1 14 18.7v2.06A9 9 0 0 0 17.69 19l2 2.05L21 19.73l-9-9L4.27 3ZM12 4 9.91 6.09 12 8.18V4Z"/>\n</svg></slot>\n    <slot name="low">${xm}</slot>\n    <slot name="medium">${xm}</slot>\n    <slot name="high"><svg aria-hidden="true" viewBox="0 0 24 24">\n  <path d="M3 9v6h4l5 5V4L7 9H3Zm13.5 3A4.5 4.5 0 0 0 14 8v8a4.47 4.47 0 0 0 2.5-4ZM14 3.23v2.06a7 7 0 0 1 0 13.42v2.06a9 9 0 0 0 0-17.54Z"/>\n</svg></slot>\n  </slot>\n`;const Pm=e=>{const t="off"===e.mediaVolumeLevel?fh.UNMUTE():fh.MUTE();e.setAttribute("aria-label",t)};class Om extends ef{static get observedAttributes(){return[...super.observedAttributes,th.MEDIA_VOLUME_LEVEL]}constructor(e={}){super({slotTemplate:Mm,...e})}connectedCallback(){Pm(this),super.connectedCallback()}attributeChangedCallback(e,t,n){e===th.MEDIA_VOLUME_LEVEL&&Pm(this),super.attributeChangedCallback(e,t,n)}get mediaVolumeLevel(){return Ph(this,th.MEDIA_VOLUME_LEVEL)}set mediaVolumeLevel(e){Oh(this,th.MEDIA_VOLUME_LEVEL,e)}handleClick(){const e="off"===this.mediaVolumeLevel?Xu.MEDIA_UNMUTE_REQUEST:Xu.MEDIA_MUTE_REQUEST;this.dispatchEvent(new Vh.CustomEvent(e,{composed:!0,bubbles:!0}))}}Vh.customElements.get("media-mute-button")||Vh.customElements.define("media-mute-button",Om);const Nm='<svg aria-hidden="true" viewBox="0 0 28 24">\n  <path d="M24 3H4a1 1 0 0 0-1 1v16a1 1 0 0 0 1 1h20a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1Zm-1 16H5V5h18v14Zm-3-8h-7v5h7v-5Z"/>\n</svg>',Fm=Hh.createElement("template");Fm.innerHTML=`\n  <style>\n  :host([${th.MEDIA_IS_PIP}]) slot:not([name=exit]):not([name=icon]) {\n    display: none !important;\n  }\n\n  \n  :host(:not([${th.MEDIA_IS_PIP}])) slot:not([name=enter]):not([name=icon]) {\n    display: none !important;\n  }\n  </style>\n\n  <slot name="icon">\n    <slot name="enter">${Nm}</slot>\n    <slot name="exit">${Nm}</slot>\n  </slot>\n`;const Um=e=>{const t=e.mediaIsPip?fh.EXIT_PIP():fh.ENTER_PIP();e.setAttribute("aria-label",t)};class Bm extends ef{static get observedAttributes(){return[...super.observedAttributes,th.MEDIA_IS_PIP,th.MEDIA_PIP_UNAVAILABLE]}constructor(e={}){super({slotTemplate:Fm,...e})}connectedCallback(){Um(this),super.connectedCallback()}attributeChangedCallback(e,t,n){e===th.MEDIA_IS_PIP&&Um(this),super.attributeChangedCallback(e,t,n)}get mediaPipUnavailable(){return Ph(this,th.MEDIA_PIP_UNAVAILABLE)}set mediaPipUnavailable(e){Oh(this,th.MEDIA_PIP_UNAVAILABLE,e)}get mediaIsPip(){return xh(this,th.MEDIA_IS_PIP)}set mediaIsPip(e){Mh(this,th.MEDIA_IS_PIP,e)}handleClick(){const e=this.mediaIsPip?Xu.MEDIA_EXIT_PIP_REQUEST:Xu.MEDIA_ENTER_PIP_REQUEST;this.dispatchEvent(new Vh.CustomEvent(e,{composed:!0,bubbles:!0}))}}Vh.customElements.get("media-pip-button")||Vh.customElements.define("media-pip-button",Bm);const $m=Hh.createElement("template");$m.innerHTML=`\n  <style>\n  :host([${th.MEDIA_PAUSED}]) slot[name=pause] {\n    display: none !important;\n  }\n\n  :host(:not([${th.MEDIA_PAUSED}])) slot[name=play] {\n    display: none !important;\n  }\n  </style>\n\n  <slot name="icon">\n    <slot name="play"><svg aria-hidden="true" viewBox="0 0 24 24">\n  <path d="m6 21 15-9L6 3v18Z"/>\n</svg></slot>\n    <slot name="pause"><svg aria-hidden="true" viewBox="0 0 24 24">\n  <path d="M6 20h4V4H6v16Zm8-16v16h4V4h-4Z"/>\n</svg></slot>\n  </slot>\n`;const Vm=e=>{const t=e.mediaPaused?fh.PLAY():fh.PAUSE();e.setAttribute("aria-label",t)};class Hm extends ef{static get observedAttributes(){return[...super.observedAttributes,th.MEDIA_PAUSED,th.MEDIA_ENDED]}constructor(e={}){super({slotTemplate:$m,...e})}connectedCallback(){Vm(this),super.connectedCallback()}attributeChangedCallback(e,t,n){e===th.MEDIA_PAUSED&&Vm(this),super.attributeChangedCallback(e,t,n)}get mediaPaused(){return xh(this,th.MEDIA_PAUSED)}set mediaPaused(e){Mh(this,th.MEDIA_PAUSED,e)}handleClick(){const e=this.mediaPaused?Xu.MEDIA_PLAY_REQUEST:Xu.MEDIA_PAUSE_REQUEST;this.dispatchEvent(new Vh.CustomEvent(e,{composed:!0,bubbles:!0}))}}Vh.customElements.get("media-play-button")||Vh.customElements.define("media-play-button",Hm);var Wm,Gm=(e,t,n)=>(((e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)})(e,t,"read from private field"),n?n.call(e):t.get(e));const Km="rates",jm=[1,1.25,1.5,1.75,2],qm=Hh.createElement("template");qm.innerHTML='\n  <span id="container"></span>\n';class Ym extends ef{constructor(e={}){super({slotTemplate:qm,...e}),((e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)})(this,Wm,new Cf(this,Km,{defaultValue:jm})),this.container=this.shadowRoot.querySelector("#container"),this.container.innerHTML="1x"}static get observedAttributes(){return[...super.observedAttributes,th.MEDIA_PLAYBACK_RATE,Km]}attributeChangedCallback(e,t,n){if(e===Km&&(Gm(this,Wm).value=n),e===th.MEDIA_PLAYBACK_RATE){const e=n?+n:Number.NaN,t=Number.isNaN(e)?1:e;return this.container.innerHTML=`${t}x`,void this.setAttribute("aria-label",hh.PLAYBACK_RATE({playbackRate:t}))}super.attributeChangedCallback(e,t,n)}get rates(){return Gm(this,Wm)}set rates(e){e?Array.isArray(e)&&(Gm(this,Wm).value=e.join(" ")):Gm(this,Wm).value=""}get mediaPlaybackRate(){return Ch(this,th.MEDIA_PLAYBACK_RATE,1)}set mediaPlaybackRate(e){Dh(this,th.MEDIA_PLAYBACK_RATE,e)}handleClick(){var e,t;const n=Array.from(this.rates.values(),(e=>+e)).sort(((e,t)=>e-t)),i=null!=(t=null!=(e=n.find((e=>e>this.mediaPlaybackRate)))?e:n[0])?t:1,r=new Vh.CustomEvent(Xu.MEDIA_PLAYBACK_RATE_REQUEST,{composed:!0,bubbles:!0,detail:i});this.dispatchEvent(r)}}Wm=new WeakMap,Vh.customElements.get("media-playback-rate-button")||Vh.customElements.define("media-playback-rate-button",Ym);const zm="placeholdersrc",Xm="src",Qm=Hh.createElement("template");Qm.innerHTML='\n  <style>\n    :host {\n      pointer-events: none;\n      display: var(--media-poster-image-display, inline-block);\n      box-sizing: border-box;\n    }\n\n    img {\n      max-width: 100%;\n      max-height: 100%;\n      min-width: 100%;\n      min-height: 100%;\n      background-repeat: no-repeat;\n      background-position: var(--media-poster-image-background-position, var(--media-object-position, center));\n      background-size: var(--media-poster-image-background-size, var(--media-object-fit, contain));\n      object-fit: var(--media-object-fit, contain);\n      object-position: var(--media-object-position, center);\n    }\n  </style>\n\n  <img part="poster img" aria-hidden="true" id="image"/>\n';class Zm extends Vh.HTMLElement{static get observedAttributes(){return[zm,Xm]}constructor(){super(),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(Qm.content.cloneNode(!0))),this.image=this.shadowRoot.querySelector("#image")}attributeChangedCallback(e,t,n){e===Xm&&(null==n?this.image.removeAttribute(Xm):this.image.setAttribute(Xm,n)),e===zm&&(null==n?this.image.style.removeProperty("background-image"):((e,t)=>{e.style["background-image"]=`url('${t}')`})(this.image,n))}get placeholderSrc(){return Ph(this,zm)}set placeholderSrc(e){Oh(this,Xm,e)}get src(){return Ph(this,Xm)}set src(e){Oh(this,Xm,e)}}Vh.customElements.get("media-poster-image")||Vh.customElements.define("media-poster-image",Zm);const Jm="seekoffset",eg=Hh.createElement("template");eg.innerHTML='\n  <slot name="icon"><svg aria-hidden="true" viewBox="0 0 20 24"><defs><style>.text{font-size:8px;font-family:Arial-BoldMT, Arial;font-weight:700;}</style></defs><text class="text value" transform="translate(2.18 19.87)">30</text><path d="M10 6V3L4.37 7 10 10.94V8a5.54 5.54 0 0 1 1.9 10.48v2.12A7.5 7.5 0 0 0 10 6Z"/></svg></slot>\n';class tg extends ef{static get observedAttributes(){return[...super.observedAttributes,th.MEDIA_CURRENT_TIME,Jm]}constructor(e={}){super({slotTemplate:eg,...e})}connectedCallback(){this.seekOffset=Ch(this,Jm,30),super.connectedCallback()}attributeChangedCallback(e,t,n){e===Jm&&(this.seekOffset=Ch(this,Jm,30)),super.attributeChangedCallback(e,t,n)}get seekOffset(){return Ch(this,Jm,30)}set seekOffset(e){Dh(this,Jm,e),this.setAttribute("aria-label",fh.SEEK_BACK_N_SECS({seekOffset:this.seekOffset})),kh(wh(this,"icon"),this.seekOffset)}get mediaCurrentTime(){return Ch(this,th.MEDIA_CURRENT_TIME,0)}set mediaCurrentTime(e){Dh(this,th.MEDIA_CURRENT_TIME,e)}handleClick(){const e=Math.max(this.mediaCurrentTime-this.seekOffset,0),t=new Vh.CustomEvent(Xu.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:e});this.dispatchEvent(t)}}Vh.customElements.get("media-seek-backward-button")||Vh.customElements.define("media-seek-backward-button",tg);var ng,ig=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},rg=(e,t,n)=>(ig(e,t,"read from private field"),n?n.call(e):t.get(e));class sg extends em{constructor(){var e,t,n,i;super(),((e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)})(this,ng,void 0),e=this,t=ng,n=this.shadowRoot.querySelector("slot"),ig(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),rg(this,ng).textContent=Sh(0)}static get observedAttributes(){return[...super.observedAttributes,th.MEDIA_PREVIEW_TIME]}attributeChangedCallback(e,t,n){e===th.MEDIA_PREVIEW_TIME&&null!=n&&(rg(this,ng).textContent=Sh(n)),super.attributeChangedCallback(e,t,n)}get mediaPreviewTime(){return Ch(this,th.MEDIA_PREVIEW_TIME)}set mediaPreviewTime(e){Dh(this,th.MEDIA_PREVIEW_TIME,e)}}ng=new WeakMap,Vh.customElements.get("media-preview-time-display")||Vh.customElements.define("media-preview-time-display",sg);var ag,og=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},lg=(e,t,n)=>(og(e,t,"read from private field"),n?n.call(e):t.get(e)),dg=(e,t,n,i)=>(og(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n);const cg=Hh.createElement("template");cg.innerHTML='\n  <style>\n    :host {\n      box-sizing: border-box;\n      display: var(--media-control-display, var(--media-preview-thumbnail-display, inline-block));\n      overflow: hidden;\n    }\n\n    img {\n      display: none;\n      position: relative;\n    }\n  </style>\n  <img crossorigin loading="eager" decoding="async">\n';class ug extends Vh.HTMLElement{constructor(){super(),((e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)})(this,ag,void 0),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(cg.content.cloneNode(!0)))}static get observedAttributes(){return[Zu,th.MEDIA_PREVIEW_IMAGE,th.MEDIA_PREVIEW_COORDS]}connectedCallback(){var e,t,n;const i=this.getAttribute(Zu);i&&(dg(this,ag,null==(e=this.getRootNode())?void 0:e.getElementById(i)),null==(n=null==(t=lg(this,ag))?void 0:t.associateElement)||n.call(t,this))}disconnectedCallback(){var e,t;null==(t=null==(e=lg(this,ag))?void 0:e.unassociateElement)||t.call(e,this),dg(this,ag,null)}attributeChangedCallback(e,t,n){var i,r,s,a,o;[th.MEDIA_PREVIEW_IMAGE,th.MEDIA_PREVIEW_COORDS].includes(e)&&this.update(),e===Zu&&(t&&(null==(r=null==(i=lg(this,ag))?void 0:i.unassociateElement)||r.call(i,this),dg(this,ag,null)),n&&(dg(this,ag,null==(s=this.getRootNode())?void 0:s.getElementById(n)),null==(o=null==(a=lg(this,ag))?void 0:a.associateElement)||o.call(a,this)))}get mediaPreviewImage(){return Ph(this,th.MEDIA_PREVIEW_IMAGE)}set mediaPreviewImage(e){Oh(this,th.MEDIA_PREVIEW_IMAGE,e)}get mediaPreviewCoords(){const e=this.getAttribute(th.MEDIA_PREVIEW_COORDS);if(e)return e.split(/\s+/).map((e=>+e))}set mediaPreviewCoords(e){e?this.setAttribute(th.MEDIA_PREVIEW_COORDS,e.join(" ")):this.removeAttribute(th.MEDIA_PREVIEW_COORDS)}update(){const e=this.mediaPreviewCoords,t=this.mediaPreviewImage;if(!e||!t)return;const[n,i,r,s]=e,a=t.split("#")[0],o=getComputedStyle(this),{maxWidth:l,maxHeight:d,minWidth:c,minHeight:u}=o,h=Math.min(parseInt(l)/r,parseInt(d)/s),f=Math.max(parseInt(c)/r,parseInt(u)/s),p=h<1,m=p?h:f>1?f:1,{style:g}=Ih(this.shadowRoot,":host"),v=Ih(this.shadowRoot,"img").style,y=this.shadowRoot.querySelector("img"),b=p?"min":"max";g.setProperty(`${b}-width`,"initial","important"),g.setProperty(`${b}-height`,"initial","important"),g.width=r*m+"px",g.height=s*m+"px";const E=()=>{v.width=this.imgWidth*m+"px",v.height=this.imgHeight*m+"px",v.display="block"};y.src!==a&&(y.onload=()=>{this.imgWidth=y.naturalWidth,this.imgHeight=y.naturalHeight,E()},y.src=a,E()),E(),v.transform=`translate(-${n*m}px, -${i*m}px)`}}ag=new WeakMap,Vh.customElements.get("media-preview-thumbnail")||Vh.customElements.define("media-preview-thumbnail",ug);var hg,fg,pg,mg,gg,vg,yg,bg,Eg,Tg,_g,Ag,Sg,kg,wg,Lg,Rg,Ig,Cg,Dg,xg,Mg=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Pg=(e,t,n)=>(Mg(e,t,"read from private field"),n?n.call(e):t.get(e)),Og=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Ng=(e,t,n,i)=>(Mg(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),Fg=(e,t,n)=>(Mg(e,t,"access private method"),n);const Ug=e=>{const t=e.range,n=Ah(+t.value),i=Ah(+t.max),r=n&&i?`${n} of ${i}`:"video not loaded, unknown time.";t.setAttribute("aria-valuetext",r)},Bg=Hh.createElement("template");Bg.innerHTML=`\n  <style>\n    :host {\n      --media-preview-border-radius: 3px;\n      --media-box-padding-left: 10px;\n      --media-box-padding-right: 10px;\n    }\n\n    #preview-rail,\n    #current-rail {\n      \n      width: 1%;\n      position: absolute;\n      left: 0;\n      bottom: 100%;\n      pointer-events: none;\n    }\n\n    [part~="box"] {\n      \n      position: absolute;\n      bottom: 100%;\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      transform: translateX(-50%);\n    }\n\n    [part~="preview-box"] {\n      transition-property: var(--media-preview-transition-property, visibility, opacity);\n      transition-duration: var(--media-preview-transition-duration-out, .25s);\n      transition-delay: var(--media-preview-transition-delay-out, 0s);\n      visibility: hidden;\n      opacity: 0;\n    }\n\n    :host([${th.MEDIA_PREVIEW_IMAGE}]:hover) [part~="preview-box"],\n    :host([${th.MEDIA_PREVIEW_TIME}]:hover) [part~="preview-box"] {\n      transition-duration: var(--media-preview-transition-duration-in, .5s);\n      transition-delay: var(--media-preview-transition-delay-in, .25s);\n      visibility: visible;\n      opacity: 1;\n    }\n\n    media-preview-thumbnail,\n    ::slotted(media-preview-thumbnail) {\n      visibility: hidden;\n      \n      transition: visibility 0s .25s;\n      transition-delay: calc(var(--media-preview-transition-delay-out, 0s) + var(--media-preview-transition-duration-out, .25s));\n      background: var(--media-preview-thumbnail-background, var(--media-preview-background, var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .7)))));\n      box-shadow: var(--media-preview-thumbnail-box-shadow, 0 0 4px rgb(0 0 0 / .2));\n      max-width: var(--media-preview-thumbnail-max-width, 180px);\n      max-height: var(--media-preview-thumbnail-max-height, 160px);\n      min-width: var(--media-preview-thumbnail-min-width, 120px);\n      min-height: var(--media-preview-thumbnail-min-height, 80px);\n      border: var(--media-preview-thumbnail-border);\n      border-radius: var(--media-preview-thumbnail-border-radius,\n        var(--media-preview-border-radius) var(--media-preview-border-radius) 0 0);\n    }\n\n    :host([${th.MEDIA_PREVIEW_IMAGE}]:hover) media-preview-thumbnail,\n    :host([${th.MEDIA_PREVIEW_IMAGE}]:hover) ::slotted(media-preview-thumbnail) {\n      transition-delay: var(--media-preview-transition-delay-in, .25s);\n      visibility: visible;\n    }\n\n    media-preview-time-display,\n    ::slotted(media-preview-time-display) {\n      min-width: 0;\n      \n      transition: min-width 0s, border-radius 0s;\n      transition-delay: calc(var(--media-preview-transition-delay-out, 0s) + var(--media-preview-transition-duration-out, .25s));\n      background: var(--media-preview-time-background, var(--media-preview-background, var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .7)))));\n      border-radius: var(--media-preview-time-border-radius,\n        var(--media-preview-border-radius) var(--media-preview-border-radius)\n        var(--media-preview-border-radius) var(--media-preview-border-radius));\n      padding: var(--media-preview-time-padding, 1px 10px 0);\n      margin: var(--media-preview-time-margin, 0 0 10px);\n      text-shadow: var(--media-preview-time-text-shadow, 0 0 4px rgb(0 0 0 / .75));\n    }\n\n    :host([${th.MEDIA_PREVIEW_IMAGE}]) media-preview-time-display,\n    :host([${th.MEDIA_PREVIEW_IMAGE}]) ::slotted(media-preview-time-display) {\n      transition-delay: var(--media-preview-transition-delay-in, .25s);\n      min-width: 100%;\n      border-radius: var(--media-preview-time-border-radius,\n        0 0 var(--media-preview-border-radius) var(--media-preview-border-radius));\n    }\n\n    :host([${th.MEDIA_PREVIEW_TIME}]:hover) {\n      --media-time-range-hover-display: block;\n    }\n  </style>\n  <div id="preview-rail">\n    <slot name="preview" part="box preview-box">\n      <media-preview-thumbnail></media-preview-thumbnail>\n      <media-preview-time-display></media-preview-time-display>\n    </slot>\n  </div>\n  <div id="current-rail">\n    <slot name="current" part="box current-box">\n      \n    </slot>\n  </div>\n`;class $g extends Hp{constructor(){super(),Og(this,vg),Og(this,bg),Og(this,Tg),Og(this,Ig),Og(this,Dg),Og(this,hg,void 0),Og(this,fg,void 0),Og(this,pg,void 0),Og(this,mg,void 0),Og(this,gg,void 0),Og(this,Ag,(e=>{if([...Pg(this,hg)].some((t=>e.composedPath().includes(t))))return;this.updatePointerBar(e);const t=this.mediaDuration;if(!t)return;const n=this.range.getBoundingClientRect();let i=(e.clientX-n.left-this.thumbWidth/2)/(n.width-this.thumbWidth);i=Math.max(0,Math.min(1,i));const r=Fg(this,Tg,_g).call(this,Pg(this,fg),i),{style:s}=Ih(this.shadowRoot,"#preview-rail");s.transform=`translateX(${r})`;const a=i*t,o=new Vh.CustomEvent(Xu.MEDIA_PREVIEW_REQUEST,{composed:!0,bubbles:!0,detail:a});this.dispatchEvent(o)})),Og(this,Sg,!1),Og(this,kg,(e=>{var t;e.composedPath().includes(this)&&![...Pg(this,hg)].some((t=>e.composedPath().includes(t)))||(null==(t=Vh.window)||t.removeEventListener("pointermove",Pg(this,kg)),Ng(this,Sg,!1),Pg(this,Lg).call(this))})),Og(this,wg,(()=>{var e;null==(e=Vh.window)||e.addEventListener("pointermove",Pg(this,Ag),!1)})),Og(this,Lg,(()=>{var e;null==(e=Vh.window)||e.removeEventListener("pointermove",Pg(this,Ag));const t=new Vh.CustomEvent(Xu.MEDIA_PREVIEW_REQUEST,{composed:!0,bubbles:!0,detail:null});this.dispatchEvent(t)})),Og(this,Rg,(()=>{var e;const t=this.getAttribute(th.MEDIA_DURATION);!Pg(this,Sg)&&t&&(Ng(this,Sg,!0),Pg(this,wg).call(this),null==(e=Vh.window)||e.addEventListener("pointermove",Pg(this,kg),!1))})),this.container.appendChild(Bg.content.cloneNode(!0)),this.range.addEventListener("input",(()=>{cancelAnimationFrame(this._refreshId);const e=this.range.value,t=new Vh.CustomEvent(Xu.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:e});this.dispatchEvent(t)})),this._refreshBar=()=>{const e=(performance.now()-this._updateTimestamp)/1e3;this.range.value=this.mediaCurrentTime+e*this.mediaPlaybackRate,this.updateBar(),this.updateCurrentBox(),this._refreshId=requestAnimationFrame(this._refreshBar)},Ng(this,hg,this.shadowRoot.querySelectorAll('[part~="box"]')),Ng(this,fg,this.shadowRoot.querySelector('[part~="preview-box"]')),Ng(this,pg,this.shadowRoot.querySelector('[part~="current-box"]'));const e=getComputedStyle(this);Ng(this,mg,parseInt(e.getPropertyValue("--media-box-padding-left"))),Ng(this,gg,parseInt(e.getPropertyValue("--media-box-padding-right"))),Fg(this,Ig,Cg).call(this)}static get observedAttributes(){return[...super.observedAttributes,th.MEDIA_PAUSED,th.MEDIA_DURATION,th.MEDIA_SEEKABLE,th.MEDIA_CURRENT_TIME,th.MEDIA_PREVIEW_IMAGE,th.MEDIA_PREVIEW_TIME,th.MEDIA_BUFFERED,th.MEDIA_PLAYBACK_RATE,th.MEDIA_LOADING,th.MEDIA_ENDED]}connectedCallback(){this.range.setAttribute("aria-label",hh.SEEK()),super.connectedCallback()}disconnectedCallback(){cancelAnimationFrame(this._refreshId),super.disconnectedCallback()}attributeChangedCallback(e,t,n){var i,r,s,a,o;e!==th.MEDIA_CURRENT_TIME&&e!==th.MEDIA_PAUSED&&e!==th.MEDIA_ENDED&&e!==th.MEDIA_LOADING||(this._updateTimestamp=performance.now(),this.range.value=this.mediaCurrentTime,Ug(this),this.updateBar(),this.updateCurrentBox(),cancelAnimationFrame(this._refreshId),this.mediaPaused||this.mediaLoading||(this._refreshId=requestAnimationFrame(this._refreshBar))),e===th.MEDIA_DURATION&&(this.range.max=null!=(r=null!=(i=Pg(this,vg,yg))?i:this.mediaDuration)?r:1e3,Ug(this),this.updateBar(),this.updateCurrentBox()),e===th.MEDIA_SEEKABLE&&(this.range.min=null!=(s=Pg(this,bg,Eg))?s:0,this.range.max=null!=(o=null!=(a=Pg(this,vg,yg))?a:this.mediaDuration)?o:1e3,Ug(this),this.updateBar()),e===th.MEDIA_BUFFERED&&this.updateBar(),"disabled"===e&&(null==n?Fg(this,Ig,Cg).call(this):Fg(this,Dg,xg).call(this)),super.attributeChangedCallback(e,t,n)}get mediaPaused(){return xh(this,th.MEDIA_PAUSED)}set mediaPaused(e){Mh(this,th.MEDIA_PAUSED,e)}get mediaLoading(){return xh(this,th.MEDIA_LOADING)}set mediaLoading(e){Mh(this,th.MEDIA_LOADING,e)}get mediaDuration(){return Ch(this,th.MEDIA_DURATION)}set mediaDuration(e){Dh(this,th.MEDIA_DURATION,e)}get mediaCurrentTime(){return Ch(this,th.MEDIA_CURRENT_TIME)}set mediaCurrentTime(e){Dh(this,th.MEDIA_CURRENT_TIME,e)}get mediaPlaybackRate(){return Ch(this,th.MEDIA_PLAYBACK_RATE,1)}set mediaPlaybackRate(e){Dh(this,th.MEDIA_PLAYBACK_RATE,e)}get mediaBuffered(){const e=this.getAttribute(th.MEDIA_BUFFERED);return e?e.split(" ").map((e=>e.split(":").map((e=>+e)))):[]}set mediaBuffered(e){if(!e)return void this.removeAttribute(th.MEDIA_BUFFERED);const t=e.map((e=>e.join(":"))).join(" ");this.setAttribute(th.MEDIA_BUFFERED,t)}get mediaSeekable(){const e=this.getAttribute(th.MEDIA_SEEKABLE);if(e)return e.split(":").map((e=>+e))}set mediaSeekable(e){null!=e?this.setAttribute(th.MEDIA_SEEKABLE,e.join(":")):this.removeAttribute(th.MEDIA_SEEKABLE)}get mediaPreviewImage(){return Ph(this,th.MEDIA_PREVIEW_IMAGE)}set mediaPreviewImage(e){Oh(this,th.MEDIA_PREVIEW_IMAGE,e)}get mediaPreviewTime(){return Ch(this,th.MEDIA_PREVIEW_TIME)}set mediaPreviewTime(e){Dh(this,th.MEDIA_PREVIEW_TIME,e)}get mediaEnded(){return xh(this,th.MEDIA_ENDED)}set mediaEnded(e){Mh(this,th.MEDIA_ENDED,e)}getRelativeValues(){const e=super.getRelativeValues();return this.mediaEnded?{...e,relativeValue:e.relativeMax}:e}getBarColors(){var e;let t=super.getBarColors();const{range:n}=this,i=n.max-n.min,r=this.mediaBuffered;if(!r.length||!Number.isFinite(i)||i<=0)return t;let s;if(this.mediaEnded)s=i;else{const t=this.mediaCurrentTime,[,i=n.min]=null!=(e=r.find((([e,n])=>e<=t&&t<=n)))?e:[];s=i-n.min}const a=s/i*100;return t.splice(1,0,["var(--media-time-range-buffered-color, rgb(255 255 255 / .4))",a]),t}updateCurrentBox(){if(!Pg(this,pg).assignedElements().length)return;const e=this.range.value/(this.range.max-this.range.min),t=Fg(this,Tg,_g).call(this,Pg(this,pg),e),{style:n}=Ih(this.shadowRoot,"#current-rail");n.transform=`translateX(${t})`}}hg=new WeakMap,fg=new WeakMap,pg=new WeakMap,mg=new WeakMap,gg=new WeakMap,vg=new WeakSet,yg=function(){var e;const[,t]=null!=(e=this.mediaSeekable)?e:[];return t},bg=new WeakSet,Eg=function(){var e;const[t]=null!=(e=this.mediaSeekable)?e:[];return t},Tg=new WeakSet,_g=function(e,t){var n;let i=100*t*100+"%";const r=e.offsetWidth;if(!r)return i;const s=null!=(n=this.getAttribute("bounds")?Rh(this,`#${this.getAttribute("bounds")}`):this.parentElement)?n:this,a=this.range.getBoundingClientRect(),o=s.getBoundingClientRect(),l=(Pg(this,mg)-(a.left-o.left-r/2))/a.width*100,d=(o.right-a.left-r/2-Pg(this,gg))/a.width*100;return Number.isNaN(l)||(i=`max(${100*l}%, ${i})`),Number.isNaN(d)||(i=`min(${i}, ${100*d}%)`),i},Ag=new WeakMap,Sg=new WeakMap,kg=new WeakMap,wg=new WeakMap,Lg=new WeakMap,Rg=new WeakMap,Ig=new WeakSet,Cg=function(){this.addEventListener("pointermove",Pg(this,Rg),!1)},Dg=new WeakSet,xg=function(){var e;null==(e=Vh.window)||e.removeEventListener("pointermove",Pg(this,kg)),this.removeEventListener("pointermove",Pg(this,Rg)),Ng(this,Sg,!1),Pg(this,Lg).call(this)},Vh.customElements.get("media-time-range")||Vh.customElements.define("media-time-range",$g);var Vg,Hg,Wg,Gg=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Kg=(e,t,n)=>(Gg(e,t,"read from private field"),n?n.call(e):t.get(e)),jg=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},qg=(e,t,n,i)=>(Gg(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n);const Yg="loadingdelay",zg=Hh.createElement("template");zg.innerHTML=`\n<style>\n:host {\n  display: var(--media-control-display, var(--media-loading-indicator-display, inline-block));\n  vertical-align: middle;\n  box-sizing: border-box;\n  --_loading-indicator-delay: var(--media-loading-indicator-transition-delay, 500ms);\n}\n\n#status {\n  color: rgba(0,0,0,0);\n  width: 0px;\n  height: 0px;\n}\n\n:host slot[name=icon] > *,\n:host ::slotted([slot=icon]) {\n  opacity: var(--media-loading-indicator-opacity, 0);\n  transition: opacity 0.15s;\n}\n\n:host([${th.MEDIA_LOADING}]:not([${th.MEDIA_PAUSED}])) slot[name=icon] > *,\n:host([${th.MEDIA_LOADING}]:not([${th.MEDIA_PAUSED}])) ::slotted([slot=icon]) {\n  opacity: var(--media-loading-indicator-opacity, 1);\n  transition: opacity 0.15s var(--_loading-indicator-delay);\n}\n\n:host #status {\n  visibility: var(--media-loading-indicator-opacity, hidden);\n  transition: visibility 0.15s;\n}\n\n:host([${th.MEDIA_LOADING}]:not([${th.MEDIA_PAUSED}])) #status {\n  visibility: var(--media-loading-indicator-opacity, visible);\n  transition: visibility 0.15s var(--_loading-indicator-delay);\n}\n\nsvg, img, ::slotted(svg), ::slotted(img) {\n  width: var(--media-loading-indicator-icon-width);\n  height: var(--media-loading-indicator-icon-height, 100px);\n  fill: var(--media-icon-color, var(--media-primary-color, rgb(238 238 238)));\n  vertical-align: middle;\n}\n</style>\n\n<slot name="icon">\n<svg aria-hidden="true" viewBox="0 0 100 100">\n  <path d="M73,50c0-12.7-10.3-23-23-23S27,37.3,27,50 M30.9,50c0-10.5,8.5-19.1,19.1-19.1S69.1,39.5,69.1,50">\n    <animateTransform\n       attributeName="transform"\n       attributeType="XML"\n       type="rotate"\n       dur="1s"\n       from="0 50 50"\n       to="360 50 50"\n       repeatCount="indefinite" />\n  </path>\n</svg>\n</slot>\n<div id="status" role="status" aria-live="polite">${hh.MEDIA_LOADING()}</div>\n`;class Xg extends Vh.HTMLElement{constructor(){if(super(),jg(this,Vg,void 0),jg(this,Hg,500),jg(this,Wg,void 0),!this.shadowRoot){const e=this.attachShadow({mode:"open"}),t=zg.content.cloneNode(!0);e.appendChild(t)}const{style:e}=Ih(this.shadowRoot,":host");qg(this,Wg,e)}static get observedAttributes(){return[Zu,th.MEDIA_PAUSED,th.MEDIA_LOADING,Yg]}attributeChangedCallback(e,t,n){var i,r,s,a,o;e===Yg&&t!==n?this.loadingDelay=Number(n):e===Zu&&(t&&(null==(r=null==(i=Kg(this,Vg))?void 0:i.unassociateElement)||r.call(i,this),qg(this,Vg,null)),n&&(qg(this,Vg,null==(s=this.getRootNode())?void 0:s.getElementById(n)),null==(o=null==(a=Kg(this,Vg))?void 0:a.associateElement)||o.call(a,this)))}connectedCallback(){var e,t,n;const i=this.getAttribute(Zu);i&&(qg(this,Vg,null==(e=this.getRootNode())?void 0:e.getElementById(i)),null==(n=null==(t=Kg(this,Vg))?void 0:t.associateElement)||n.call(t,this))}disconnectedCallback(){var e,t;null==(t=null==(e=Kg(this,Vg))?void 0:e.unassociateElement)||t.call(e,this),qg(this,Vg,null)}get loadingDelay(){return Kg(this,Hg)}set loadingDelay(e){qg(this,Hg,e),Kg(this,Wg).setProperty("--_loading-indicator-delay",`var(--media-loading-indicator-transition-delay, ${e}ms)`)}get mediaPaused(){return xh(this,th.MEDIA_PAUSED)}set mediaPaused(e){Mh(this,th.MEDIA_PAUSED,e)}get mediaLoading(){return xh(this,th.MEDIA_LOADING)}set mediaLoading(e){Mh(this,th.MEDIA_LOADING,e)}}Vg=new WeakMap,Hg=new WeakMap,Wg=new WeakMap,Vh.customElements.get("media-loading-indicator")||Vh.customElements.define("media-loading-indicator",Xg);class Qg extends Hp{static get observedAttributes(){return[...super.observedAttributes,th.MEDIA_VOLUME,th.MEDIA_MUTED,th.MEDIA_VOLUME_UNAVAILABLE]}constructor(){super(),this.range.max=100,this.range.addEventListener("input",(()=>{const e=this.range.value/this.range.max,t=new Vh.CustomEvent(Xu.MEDIA_VOLUME_REQUEST,{composed:!0,bubbles:!0,detail:e});this.dispatchEvent(t)}))}connectedCallback(){this.range.setAttribute("aria-label",hh.VOLUME()),super.connectedCallback()}attributeChangedCallback(e,t,n){if(e===th.MEDIA_VOLUME||e===th.MEDIA_MUTED){const e=(i=this).mediaMuted?0:Math.round(i.mediaVolume*i.range.max);this.range.value=e,this.range.setAttribute("aria-valuetext",(({value:e,max:t})=>`${Math.round(e/t*100)}%`)(this.range)),this.updateBar()}var i;super.attributeChangedCallback(e,t,n)}get mediaVolume(){return Ch(this,th.MEDIA_VOLUME,1)}set mediaVolume(e){Dh(this,th.MEDIA_VOLUME,e)}get mediaMuted(){return xh(this,th.MEDIA_MUTED)}set mediaMuted(e){Mh(this,th.MEDIA_MUTED,e)}get mediaVolumeUnavailable(){return Ph(this,th.MEDIA_VOLUME_UNAVAILABLE)}set mediaVolumeUnavailable(e){Oh(this,th.MEDIA_VOLUME_UNAVAILABLE,e)}}Vh.customElements.get("media-volume-range")||Vh.customElements.define("media-volume-range",Qg);var Zg,Jg,ev,tv,nv,iv,rv,sv,av,ov,lv,dv,cv,uv,hv,fv,pv,mv=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},gv=(e,t,n)=>(mv(e,t,"read from private field"),n?n.call(e):t.get(e)),vv=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},yv=(e,t,n,i)=>(mv(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),bv=(e,t,n)=>(mv(e,t,"access private method"),n);function Ev(e,t,n){const i=Hh.createElement("media-chrome-option");i.part.add("option"),i.value=t,i.selected=n;const r=Hh.createElement("span");return r.textContent=e,i.append(r),i}function Tv(e,t){let n=e.querySelector(`:scope > [slot="${t}"]`);return"SLOT"==(null==n?void 0:n.nodeName)&&(n=n.assignedElements({flatten:!0})[0]),n?(n=n.cloneNode(!0),n.removeAttribute("slot"),n):e.shadowRoot.querySelector(`[name="${t}"] > svg`).cloneNode(!0)}const _v=Hh.createElement("template");_v.innerHTML='\n<style>\n  :host {\n    font: var(--media-font,\n      var(--media-font-weight, normal)\n      var(--media-font-size, 15px) /\n      var(--media-text-content-height, var(--media-control-height, 24px))\n      var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));\n    color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));\n    background: var(--media-listbox-background, var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .8))));\n    border-radius: var(--media-listbox-border-radius);\n    display: inline-block;\n    padding-block: .5em;\n  }\n\n  ::slotted([slot="header"]) {\n    padding: 0 1.4em .4em;\n    margin-bottom: .5em;\n    border-bottom: 1px solid rgb(255 255 255 / .25);\n  }\n\n  media-chrome-option {\n    padding-inline: .7em 1.4em;\n  }\n\n  media-chrome-option > span {\n    margin-inline: .5ch;\n  }\n\n  [part~="indicator"] {\n    fill: var(--media-option-indicator-fill, var(--media-icon-color, var(--media-primary-color, rgb(238 238 238))));\n    height: var(--media-option-indicator-height, 1.25em);\n    vertical-align: var(--media-option-indicator-vertical-align, text-top);\n  }\n\n  [part~="select-indicator"] {\n    visibility: hidden;\n  }\n\n  [aria-selected="true"] > [part~="select-indicator"] {\n    visibility: visible;\n  }\n</style>\n<slot name="header"></slot>\n<slot id="container"></slot>\n<slot name="select-indicator" hidden>\n<svg aria-hidden="true" viewBox="0 1 24 24" part="select-indicator indicator">\n  <path d="m10 15.17 9.193-9.191 1.414 1.414-10.606 10.606-6.364-6.364 1.414-1.414 4.95 4.95Z"/>\n</svg></slot>\n';class Av extends Vh.HTMLElement{constructor(e={}){super(),vv(this,iv),vv(this,ov),vv(this,dv),vv(this,uv),vv(this,fv),vv(this,Zg,void 0),vv(this,Jg,""),vv(this,ev,null),vv(this,tv,!1),vv(this,nv,(e=>{this.handleClick(e)})),vv(this,sv,(e=>{const{key:t}=e;"Escape"!==t?"Meta"!==t?bv(this,iv,rv).call(this,e):yv(this,tv,!1):this.removeEventListener("keyup",gv(this,sv))})),vv(this,av,(e=>{const{key:t,altKey:n}=e;n?this.removeEventListener("keyup",gv(this,sv)):"Meta"!==t?(this.keysUsed.includes(t)&&e.preventDefault(),gv(this,tv)&&this.keysUsed.includes(t)?bv(this,iv,rv).call(this,e):this.addEventListener("keyup",gv(this,sv),{once:!0})):yv(this,tv,!0)})),this.shadowRoot||(this.attachShadow({mode:"open"}),this.nativeEl=_v.content.cloneNode(!0),e.slotTemplate&&this.nativeEl.append(e.slotTemplate.content.cloneNode(!0)),this.shadowRoot.append(this.nativeEl)),this.container=this.shadowRoot.querySelector("#container"),this.container.addEventListener("slotchange",(e=>{for(let t of e.target.assignedNodes({flatten:!0}))3===t.nodeType&&""===t.textContent.trim()&&t.remove()}))}static get observedAttributes(){return["disabled",Zu]}static formatOptionText(e){return e}formatOptionText(e,t){return this.constructor.formatOptionText(e,t)}get options(){var e;let t=this.querySelectorAll("media-chrome-option");return t.length||(t=null==(e=this.container)?void 0:e.querySelectorAll("media-chrome-option")),Array.from(t)}get selectedOptions(){return this.options.filter((e=>e.selected))}get value(){var e,t;return null!=(t=null==(e=this.selectedOptions[0])?void 0:e.value)?t:""}set value(e){const t=this.options.find((t=>t.value===e));t&&bv(this,dv,cv).call(this,t)}focus(){var e;null==(e=this.selectedOptions[0])||e.focus()}enable(){this.addEventListener("click",gv(this,nv)),this.addEventListener("keydown",gv(this,av))}disable(){this.removeEventListener("click",gv(this,nv)),this.removeEventListener("keyup",gv(this,sv))}attributeChangedCallback(e,t,n){var i,r,s,a,o;e===Zu?(t&&(null==(r=null==(i=gv(this,Zg))?void 0:i.unassociateElement)||r.call(i,this),yv(this,Zg,null)),n&&(yv(this,Zg,null==(s=this.getRootNode())?void 0:s.getElementById(n)),null==(o=null==(a=gv(this,Zg))?void 0:a.associateElement)||o.call(a,this))):"disabled"===e&&n!==t&&(null==n?this.enable():this.disable())}connectedCallback(){var e,t,n;this.hasAttribute("disabled")||this.enable(),this.hasAttribute("role")||this.setAttribute("role","listbox");const i=this.getAttribute(Zu);i&&(yv(this,Zg,null==(e=this.getRootNode())?void 0:e.getElementById(i)),null==(n=null==(t=gv(this,Zg))?void 0:t.associateElement)||n.call(t,this))}disconnectedCallback(){var e,t;this.disable(),null==(t=null==(e=gv(this,Zg))?void 0:e.unassociateElement)||t.call(e,this),yv(this,Zg,null)}get keysUsed(){return["Enter"," ","ArrowDown","ArrowUp","Home","End"]}handleSelection(e,t){const n=bv(this,ov,lv).call(this,e);n&&bv(this,dv,cv).call(this,n,t)}handleMovement(e){const{key:t}=e,n=this.options;let i,r=bv(this,ov,lv).call(this,e);switch(r||(r=n.filter((e=>"0"===e.getAttribute("tabindex")))[0]),t){case"ArrowDown":i=r.nextElementSibling,(null==i?void 0:i.hasAttribute("disabled"))&&(i=i.nextElementSibling);break;case"ArrowUp":i=r.previousElementSibling,(null==i?void 0:i.hasAttribute("disabled"))&&(i=i.previousElementSibling);break;case"Home":i=n[0];break;case"End":i=n[n.length-1];break;default:i=bv(this,uv,hv).call(this,t)}i&&(n.forEach((e=>e.setAttribute("tabindex","-1"))),i.setAttribute("tabindex","0"),i.focus())}handleClick(e){const t=bv(this,ov,lv).call(this,e);t&&!t.hasAttribute("disabled")&&(this.options.forEach((e=>e.setAttribute("tabindex","-1"))),t.setAttribute("tabindex","0"),this.handleSelection(e,this.hasAttribute("aria-multiselectable")&&"true"===this.getAttribute("aria-multiselectable")))}}Zg=new WeakMap,Jg=new WeakMap,ev=new WeakMap,tv=new WeakMap,nv=new WeakMap,iv=new WeakSet,rv=function(e){const{key:t}=e;"Enter"===t||" "===t?this.handleSelection(e,this.hasAttribute("aria-multiselectable")&&"true"===this.getAttribute("aria-multiselectable")):this.handleMovement(e)},sv=new WeakMap,av=new WeakMap,ov=new WeakSet,lv=function(e){const t=e.composedPath(),n=t.findIndex((e=>"MEDIA-CHROME-OPTION"===e.nodeName));return t[n]},dv=new WeakSet,cv=function(e,t){const n=[...this.selectedOptions];this.hasAttribute("aria-multiselectable")&&"true"===this.getAttribute("aria-multiselectable")||this.options.forEach((e=>e.selected=!1)),e.selected=!t||!e.selected,this.selectedOptions.some(((e,t)=>e!=n[t]))&&this.dispatchEvent(new Event("change"))},uv=new WeakSet,hv=function(e){bv(this,fv,pv).call(this);const t=this.options,n=t.findIndex((e=>"0"===e.getAttribute("tabindex")));yv(this,Jg,gv(this,Jg)+e);const i=gv(this,Jg).split("").every((t=>t===e)),r=t.slice(n+(i?1:0)).filter((e=>e.textContent.toLowerCase().startsWith(gv(this,Jg)))),s=t.slice(0,n-(i?1:0)).filter((e=>e.textContent.toLowerCase().startsWith(gv(this,Jg))));let a=[],o=[];i&&(a=t.slice(n+(i?1:0)).filter((t=>t.textContent.startsWith(e))),o=t.slice(0,n-(i?1:0)).filter((t=>t.textContent.startsWith(e))));return[...r,...s,...a,...o][0]},fv=new WeakSet,pv=function(){clearTimeout(gv(this,ev)),yv(this,ev,null),yv(this,ev,setTimeout((()=>{yv(this,Jg,""),yv(this,ev,null)}),500))},Vh.customElements.get("media-chrome-listbox")||Vh.customElements.define("media-chrome-listbox",Av);var Sv,kv,wv,Lv,Rv=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Iv=(e,t,n)=>(Rv(e,t,"read from private field"),n?n.call(e):t.get(e)),Cv=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Dv=(e,t,n,i)=>(Rv(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),xv=(e,t,n)=>(Rv(e,t,"access private method"),n);const Mv=Hh.createElement("template");Mv.innerHTML='\n<style>\n  :host {\n    cursor: pointer;\n    display: block;\n    line-height: revert;\n    white-space: nowrap;\n    white-space-collapse: collapse;\n    text-wrap: nowrap;\n    min-height: 1.2em;\n    padding: .4em .5em;\n    transition: var(--media-option-transition);\n    outline: var(--media-option-outline, 0);\n    outline-offset: var(--media-option-outline-offset, -1px);\n  }\n\n  :host(:focus-visible) {\n    box-shadow: var(--media-option-focus-shadow, inset 0 0 0 2px rgb(27 127 204 / .9));\n    outline: var(--media-option-hover-outline, 0);\n    outline-offset: var(--media-option-hover-outline-offset,  var(--media-option-outline-offset, -1px));\n  }\n\n  :host(:hover) {\n    cursor: pointer;\n    background: var(--media-option-hover-background, rgb(82 82 122 / .8));\n    outline: var(--media-option-hover-outline);\n    outline-offset: var(--media-option-hover-outline-offset,  var(--media-option-outline-offset, -1px));\n  }\n\n  :host([aria-selected="true"]) {\n    background: var(--media-option-selected-background);\n  }\n\n  :host([disabled]) {\n    pointer-events: none;\n    color: rgba(255, 255, 255, .3);\n  }\n</style>\n<slot></slot>\n';const Pv="value",Ov="selected",Nv="disabled";class Fv extends Vh.HTMLElement{constructor(){super(),Cv(this,wv),Cv(this,Sv,!1),Cv(this,kv,void 0),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(Mv.content.cloneNode(!0)))}static get observedAttributes(){return[Nv,Ov,Pv]}get value(){var e;return null!=(e=this.getAttribute(Pv))?e:this.text}set value(e){this.setAttribute(Pv,e)}get text(){var e;return(null!=(e=this.textContent)?e:"").trim()}get selected(){return"true"===this.getAttribute("aria-selected")}set selected(e){Dv(this,Sv,!0),this.setAttribute("aria-selected",e?"true":"false"),e?this.part.add("option-selected"):this.part.remove("option-selected")}enable(){this.hasAttribute("tabindex")||this.setAttribute("tabindex",-1),this.hasAttribute("aria-selected")||this.setAttribute("aria-selected","false")}disable(){this.removeAttribute("tabindex")}attributeChangedCallback(e,t,n){e!==Ov||Iv(this,Sv)?e===Nv&&n!==t&&(null==n?this.enable():this.disable()):this.setAttribute("aria-selected",null!=n?"true":"false")}connectedCallback(){this.hasAttribute(Nv)||this.enable(),this.setAttribute("role","option"),Dv(this,kv,Uv(this,this.parentNode)),xv(this,wv,Lv).call(this)}disconnectedCallback(){this.disable(),xv(this,wv,Lv).call(this),Dv(this,kv,null)}handleClick(){}}function Uv(e,t){if(!e)return null;const{host:n}=e.getRootNode();return!t&&n?Uv(e,n):(null==t?void 0:t.options)?t:Uv(t,null==t?void 0:t.parentNode)}Sv=new WeakMap,kv=new WeakMap,wv=new WeakSet,Lv=function(){var e;const t=null==(e=Iv(this,kv))?void 0:e.options;if(!t)return;let n=t.filter((e=>"true"===e.getAttribute("aria-selected"))).pop();n||(n=t[0]),"true"!==Iv(this,kv).getAttribute("aria-multiselectable")&&t.forEach((e=>{e.setAttribute("tabindex","-1"),e.setAttribute("aria-selected","false")})),null==n||n.setAttribute("tabindex","0"),null==n||n.setAttribute("aria-selected","true")},Vh.customElements.get("media-chrome-option")||Vh.customElements.define("media-chrome-option",Fv);var Bv,$v,Vv,Hv,Wv,Gv,Kv,jv,qv,Yv,zv,Xv,Qv,Zv,Jv,ey,ty,ny,iy,ry,sy,ay,oy=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},ly=(e,t,n)=>(oy(e,t,"read from private field"),n?n.call(e):t.get(e)),dy=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},cy=(e,t,n,i)=>(oy(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),uy=(e,t,n)=>(oy(e,t,"access private method"),n);const hy=Hh.createElement("template");hy.innerHTML='\n  <style>\n  :host {\n    font: var(--media-font,\n      var(--media-font-weight, normal)\n      var(--media-font-size, 15px) /\n      var(--media-text-content-height, var(--media-control-height, 24px))\n      var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));\n    color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));\n    display: inline-flex;\n    position: relative;\n    flex-shrink: .5;\n  }\n\n  [name="listbox"]::slotted(*),\n  [part=listbox] {\n    position: absolute;\n    left: 0;\n    bottom: 100%;\n    max-height: 300px;\n    overflow: hidden auto;\n    transition: var(--media-selectmenu-transition-in,\n      visibility 0s, transform .15s ease-out, opacity .15s ease-out);\n    transform: var(--media-listbox-transform-in, translateY(0) scale(1));\n    visibility: visible;\n    opacity: 1;\n  }\n\n  [name="listbox"][hidden]::slotted(*),\n  [hidden] [part=listbox] {\n    transition: var(--media-selectmenu-transition-out,\n      visibility .15s ease-out, transform .15s ease-out, opacity .15s ease-out);\n    transform: var(--media-listbox-transform-out, translateY(2px) scale(.99));\n    visibility: hidden;\n    opacity: 0;\n    pointer-events: none;\n  }\n\n  slot[name="listbox"][hidden] {\n    display: block;\n  }\n  </style>\n\n  <slot name="button">\n    <media-chrome-button aria-haspopup="listbox" part="button">\n      <slot name="button-content"></slot>\n    </media-chrome-button>\n  </slot>\n  <slot name="listbox" hidden>\n    <media-chrome-listbox id="listbox" part="listbox">\n      <slot></slot>\n    </media-chrome-listbox>\n  </slot>\n';class fy extends Vh.HTMLElement{constructor(){var e;super(),dy(this,Qv),dy(this,Jv),dy(this,ty),dy(this,iy),dy(this,sy),dy(this,Bv,void 0),dy(this,$v,void 0),dy(this,Vv,void 0),dy(this,Hv,!0),dy(this,Wv,void 0),dy(this,Gv,void 0),dy(this,Kv,void 0),dy(this,jv,void 0),dy(this,qv,!1),dy(this,Yv,(e=>{const{key:t}=e;if(!this.keysUsed.includes(t))return void this.removeEventListener("keyup",ly(this,Yv));!e.composedPath().includes(ly(this,Wv))||"Enter"!==t&&" "!==t?"Escape"!==t||ly(this,jv).hidden||uy(this,ty,ny).call(this):ly(this,$v).call(this)})),dy(this,zv,(e=>{const{metaKey:t,altKey:n,key:i}=e;t||n||!this.keysUsed.includes(i)?this.removeEventListener("keyup",ly(this,Yv)):(e.preventDefault(),this.addEventListener("keyup",ly(this,Yv),{once:!0}))})),dy(this,Xv,(e=>{e.composedPath().includes(this)||ly(this,jv).hidden||uy(this,ty,ny).call(this)})),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(hy.content.cloneNode(!0)));const{style:t}=Ih(this.shadowRoot,":host");t.setProperty("display",`var(--media-control-display, var(--${this.localName}-display, inline-flex))`),cy(this,$v,uy(this,Qv,Zv).bind(this)),cy(this,Vv,uy(this,Jv,ey).bind(this)),null==(e=this.init)||e.call(this),cy(this,Wv,this.shadowRoot.querySelector("[part=button]")),cy(this,Kv,this.shadowRoot.querySelector("[part=listbox]")),cy(this,Gv,this.shadowRoot.querySelector("slot[name=button]")),ly(this,Gv).addEventListener("slotchange",(()=>{const e=ly(this,Gv).assignedElements()[0];e&&(this.disable(),cy(this,Wv,e),ly(this,Wv).preventClick=!0,ly(this,Wv).hasAttribute("disabled")&&cy(this,Hv,!1),ly(this,Hv)?(this.enable(),ly(this,Wv).setAttribute("aria-haspopup","listbox")):this.disable())})),cy(this,jv,this.shadowRoot.querySelector("slot[name=listbox]")),ly(this,jv).addEventListener("slotchange",(()=>{this.disable(),cy(this,Kv,ly(this,jv).assignedElements()[0]||ly(this,Kv)),this.enable()}))}static get observedAttributes(){return["disabled",Zu]}enable(){ly(this,Wv).removeAttribute("disabled"),ly(this,Wv).addEventListener("click",ly(this,$v)),ly(this,Wv).addEventListener("keydown",ly(this,zv)),ly(this,Kv).addEventListener("keydown",ly(this,zv)),uy(this,sy,ay).call(this),ly(this,Kv).addEventListener("change",ly(this,Vv)),Hh.addEventListener("click",ly(this,Xv))}disable(){ly(this,Wv).setAttribute("disabled",""),ly(this,Wv).removeEventListener("click",ly(this,$v)),ly(this,Wv).removeEventListener("keydown",ly(this,zv)),ly(this,Wv).removeEventListener("keyup",ly(this,Yv)),ly(this,Kv).removeEventListener("keydown",ly(this,zv)),ly(this,Kv).removeEventListener("keyup",ly(this,Yv)),ly(this,Kv).addEventListener("change",ly(this,Vv)),Hh.removeEventListener("click",ly(this,Xv))}attributeChangedCallback(e,t,n){var i,r,s,a,o;e===Zu?(t&&(null==(r=null==(i=ly(this,Bv))?void 0:i.unassociateElement)||r.call(i,this),cy(this,Bv,null),ly(this,Kv).removeAttribute(Zu)),n&&(cy(this,Bv,null==(s=this.getRootNode())?void 0:s.getElementById(n)),null==(o=null==(a=ly(this,Bv))?void 0:a.associateElement)||o.call(a,this),ly(this,Kv).setAttribute(Zu,n))):"disabled"===e&&n!==t&&(null==n?(cy(this,Hv,!0),this.enable()):(cy(this,Hv,!1),this.disable()))}connectedCallback(){var e,t,n;this.hasAttribute("disabled")||this.enable();const i=this.getAttribute(Zu);i&&(cy(this,Bv,null==(e=this.getRootNode())?void 0:e.getElementById(i)),null==(n=null==(t=ly(this,Bv))?void 0:t.associateElement)||n.call(t,this),ly(this,Kv).setAttribute(Zu,i))}disconnectedCallback(){var e,t;this.disable(),null==(t=null==(e=ly(this,Bv))?void 0:e.unassociateElement)||t.call(e,this),cy(this,Bv,null),ly(this,Kv).removeAttribute(Zu)}get keysUsed(){return["Enter","Escape"," ","ArrowUp","ArrowDown","f","c","k","m"]}}Bv=new WeakMap,$v=new WeakMap,Vv=new WeakMap,Hv=new WeakMap,Wv=new WeakMap,Gv=new WeakMap,Kv=new WeakMap,jv=new WeakMap,qv=new WeakMap,Yv=new WeakMap,zv=new WeakMap,Xv=new WeakMap,Qv=new WeakSet,Zv=function(){uy(this,ty,ny).call(this)},Jv=new WeakSet,ey=function(){uy(this,ty,ny).call(this,!0)},ty=new WeakSet,ny=function(e){ly(this,jv).hidden=!ly(this,jv).hidden||e,uy(this,sy,ay).call(this,e),ly(this,jv).hidden?(this.shadowRoot.activeElement===ly(this,Kv)||ly(this,Kv).contains(this.shadowRoot.activeElement))&&ly(this,Wv).focus():(ly(this,Kv).focus(),uy(this,iy,ry).call(this))},iy=new WeakSet,ry=function(){var e;if(0===ly(this,Kv).offsetWidth)return;const t=ly(this,Wv).getBoundingClientRect();if(this.hasAttribute("mediacontroller")||ly(this,Wv).hasAttribute("mediacontroller")||ly(this,Kv).hasAttribute("mediacontroller"))return ly(this,Kv).style.zIndex="1",ly(this,Kv).style.bottom="unset",void(ly(this,Kv).style.top=t.height+"px");const n=null!=(e=this.getAttribute("bounds")?Rh(this,`#${this.getAttribute("bounds")}`):this.parentElement)?e:this,i=ly(this,Kv).offsetWidth,r=n.getBoundingClientRect(),s=-Math.max(t.x+i-r.right,0);ly(this,Kv).style.left=`${s}px`},sy=new WeakSet,ay=function(e=!1){cy(this,qv,!ly(this,qv)||e),ly(this,Wv).setAttribute("aria-expanded",ly(this,qv))},Vh.customElements.get("media-chrome-selectmenu")||Vh.customElements.define("media-chrome-selectmenu",fy);var py,my,gy,vy,yy,by=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Ey=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Ty=(e,t,n)=>(by(e,t,"access private method"),n);const _y=Hh.createElement("template");_y.innerHTML='\n  <slot name="captions-indicator" hidden>\n<svg aria-hidden="true" viewBox="0 0 26 24" part="captions-indicator indicator">\n  <path d="M22.83 5.68a2.58 2.58 0 0 0-2.3-2.5c-3.62-.24-11.44-.24-15.06 0a2.58 2.58 0 0 0-2.3 2.5c-.23 4.21-.23 8.43 0 12.64a2.58 2.58 0 0 0 2.3 2.5c3.62.24 11.44.24 15.06 0a2.58 2.58 0 0 0 2.3-2.5c.23-4.21.23-8.43 0-12.64Zm-11.39 9.45a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.92 3.92 0 0 1 .92-2.77 3.18 3.18 0 0 1 2.43-1 2.94 2.94 0 0 1 2.13.78c.364.359.62.813.74 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.17 1.61 1.61 0 0 0-1.29.58 2.79 2.79 0 0 0-.5 1.89 3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.48 1.48 0 0 0 1-.37 2.1 2.1 0 0 0 .59-1.14l1.4.44a3.23 3.23 0 0 1-1.07 1.69Zm7.22 0a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.88 3.88 0 0 1 .93-2.77 3.14 3.14 0 0 1 2.42-1 3 3 0 0 1 2.16.82 2.8 2.8 0 0 1 .73 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.21 1.61 1.61 0 0 0-1.29.58A2.79 2.79 0 0 0 15 12a3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.44 1.44 0 0 0 1-.37 2.1 2.1 0 0 0 .6-1.15l1.4.44a3.17 3.17 0 0 1-1.1 1.7Z"/>\n</svg></slot>\n';class Ay extends Av{constructor(){super({slotTemplate:_y}),Ey(this,my),Ey(this,vy),Ey(this,py,void 0)}static get observedAttributes(){return[...super.observedAttributes,"aria-multiselectable",th.MEDIA_SUBTITLES_LIST,th.MEDIA_SUBTITLES_SHOWING]}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),e===th.MEDIA_SUBTITLES_LIST&&t!==n?Ty(this,my,gy).call(this):e===th.MEDIA_SUBTITLES_SHOWING&&t!==n?this.value=n:"aria-multiselectable"===e&&(this.removeAttribute("aria-multiselectable"),console.warn("Captions List doesn't currently support multiple selections. You can enable multiple items via the media.textTrack API."))}connectedCallback(){super.connectedCallback(),this.addEventListener("change",Ty(this,vy,yy))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("change",Ty(this,vy,yy))}get mediaSubtitlesList(){return Sy(this,th.MEDIA_SUBTITLES_LIST)}set mediaSubtitlesList(e){ky(this,th.MEDIA_SUBTITLES_LIST,e)}get mediaSubtitlesShowing(){return Sy(this,th.MEDIA_SUBTITLES_SHOWING)}set mediaSubtitlesShowing(e){ky(this,th.MEDIA_SUBTITLES_SHOWING,e)}}py=new WeakMap,my=new WeakSet,gy=function(){var e,t,n,i;if(by(t=this,n=py,"read from private field"),(i?i.call(t):n.get(t))===JSON.stringify(this.mediaSubtitlesList))return;((e,t,n,i)=>{by(e,t,"write to private field"),i?i.call(e,n):t.set(e,n)})(this,py,JSON.stringify(this.mediaSubtitlesList));const r=this.shadowRoot.querySelector("#container");r.textContent="";const s=!this.value,a=Ev(this.formatOptionText("Off"),"off",s);a.prepend(Tv(this,"select-indicator")),r.append(a);const o=this.mediaSubtitlesList;for(const t of o){const n=Ev(this.formatOptionText(t.label,t),Pf(t),this.value==Pf(t));n.prepend(Tv(this,"select-indicator"));"captions"===(null!=(e=t.kind)?e:"subs")&&n.append(Tv(this,"captions-indicator")),r.append(n)}},vy=new WeakSet,yy=function(){if($f(this,!1),!this.value)return;const e=new Vh.CustomEvent(Xu.MEDIA_SHOW_SUBTITLES_REQUEST,{composed:!0,bubbles:!0,detail:this.value});this.dispatchEvent(e)};const Sy=(e,t)=>{const n=e.getAttribute(t);return n?Mf(n):[]},ky=(e,t,n)=>{if(!(null==n?void 0:n.length))return void e.removeAttribute(t);const i=Of(n);e.getAttribute(t)!==i&&e.setAttribute(t,i)};Vh.customElements.get("media-captions-listbox")||Vh.customElements.define("media-captions-listbox",Ay);class wy extends fy{init(){const e=Hh.createElement("media-captions-button");e.part.add("button"),e.preventClick=!0;const t=Hh.createElement("media-captions-listbox");t.part.add("listbox"),t.setAttribute("exportparts","option, option-selected, indicator");const n=this.shadowRoot.querySelector("slot[name=button]"),i=this.shadowRoot.querySelector("slot[name=listbox]");n.textContent="",i.textContent="",n.append(e),i.append(t)}}Vh.customElements.get("media-captions-selectmenu")||Vh.customElements.define("media-captions-selectmenu",wy);var Ly,Ry,Iy,Cy,Dy,xy=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},My=(e,t,n)=>(xy(e,t,"read from private field"),n?n.call(e):t.get(e)),Py=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Oy=(e,t,n)=>(xy(e,t,"access private method"),n);const Ny="rates";class Fy extends Av{constructor(){super(),Py(this,Ry),Py(this,Cy),Py(this,Ly,new Cf(this,Ny,{defaultValue:jm})),Oy(this,Ry,Iy).call(this)}static get observedAttributes(){return[...super.observedAttributes,"aria-multiselectable",th.MEDIA_PLAYBACK_RATE,Ny]}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),e===th.MEDIA_PLAYBACK_RATE&&t!=n?this.value=n:e===Ny&&t!=n&&(My(this,Ly).value=n,Oy(this,Ry,Iy).call(this))}get rates(){return My(this,Ly)}set rates(e){e?Array.isArray(e)&&(My(this,Ly).value=e.join(" ")):My(this,Ly).value="",Oy(this,Ry,Iy).call(this)}get mediaPlaybackRate(){return Ch(this,th.MEDIA_PLAYBACK_RATE,1)}set mediaPlaybackRate(e){Dh(this,th.MEDIA_PLAYBACK_RATE,e)}connectedCallback(){super.connectedCallback(),this.addEventListener("change",Oy(this,Cy,Dy))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("change",Oy(this,Cy,Dy))}}Ly=new WeakMap,Ry=new WeakSet,Iy=function(){const e=this.shadowRoot.querySelector("#container");e.textContent="";for(const t of this.rates){const n=Ev(this.formatOptionText(`${t}x`,t),t,this.mediaPlaybackRate==t);n.prepend(Tv(this,"select-indicator")),e.append(n)}},Cy=new WeakSet,Dy=function(){if(!this.value)return;const e=new Vh.CustomEvent(Xu.MEDIA_PLAYBACK_RATE_REQUEST,{composed:!0,bubbles:!0,detail:this.value});this.dispatchEvent(e)},Vh.customElements.get("media-playback-rate-listbox")||Vh.customElements.define("media-playback-rate-listbox",Fy);class Uy extends fy{init(){const e=Hh.createElement("media-playback-rate-button");e.part.add("button"),e.preventClick=!0;const t=Hh.createElement("media-playback-rate-listbox");t.part.add("listbox"),t.setAttribute("exportparts","option, option-selected, indicator");const n=this.shadowRoot.querySelector("slot[name=button]"),i=this.shadowRoot.querySelector("slot[name=listbox]");n.textContent="",i.textContent="",n.append(e),i.append(t)}}Vh.customElements.get("media-playback-rate-selectmenu")||Vh.customElements.define("media-playback-rate-selectmenu",Uy);var By,$y,Vy,Hy,Wy,Gy,Ky=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},jy=(e,t,n)=>(Ky(e,t,"read from private field"),n?n.call(e):t.get(e)),qy=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Yy=(e,t,n,i)=>(Ky(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),zy=(e,t,n)=>(Ky(e,t,"access private method"),n);class Xy extends Av{constructor(){super(...arguments),qy(this,Vy),qy(this,Wy),qy(this,By,[]),qy(this,$y,void 0)}static get observedAttributes(){return[...super.observedAttributes,th.MEDIA_RENDITION_LIST,th.MEDIA_RENDITION_SELECTED]}attributeChangedCallback(e,t,n){var i;super.attributeChangedCallback(e,t,n),e===th.MEDIA_RENDITION_SELECTED&&t!==n?this.value=null!=n?n:"auto":e===th.MEDIA_RENDITION_LIST&&t!==n&&(Yy(this,By,null==(i=n)?void 0:i.split(/\s+/).map(mh)),zy(this,Vy,Hy).call(this))}connectedCallback(){super.connectedCallback(),this.addEventListener("change",zy(this,Wy,Gy))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("change",zy(this,Wy,Gy))}get mediaRenditionList(){return jy(this,By)}set mediaRenditionList(e){Yy(this,By,e),zy(this,Vy,Hy).call(this)}get mediaRenditionSelected(){return Ph(this,th.MEDIA_RENDITION_SELECTED)}set mediaRenditionSelected(e){Oh(this,th.MEDIA_RENDITION_SELECTED,e)}}By=new WeakMap,$y=new WeakMap,Vy=new WeakSet,Hy=function(){if(jy(this,$y)===JSON.stringify(this.mediaRenditionList))return;Yy(this,$y,JSON.stringify(this.mediaRenditionList));const e=this.mediaRenditionList.sort(((e,t)=>t.height-e.height)),t=this.shadowRoot.querySelector("#container");t.textContent="";let n=!this.mediaRenditionSelected;for(const i of e){const e=Ev(this.formatOptionText(`${Math.min(i.width,i.height)}p`,i),`${i.id}`,i.selected&&!n);e.prepend(Tv(this,"select-indicator")),t.append(e)}const i=Ev(this.formatOptionText("Auto"),"auto",n);i.prepend(Tv(this,"select-indicator")),t.append(i)},Wy=new WeakSet,Gy=function(){if(null==this.value)return;const e=new Vh.CustomEvent(Xu.MEDIA_RENDITION_REQUEST,{composed:!0,bubbles:!0,detail:this.value});this.dispatchEvent(e)},Vh.customElements.get("media-rendition-listbox")||Vh.customElements.define("media-rendition-listbox",Xy);const Qy=Hh.createElement("template");Qy.innerHTML='\n  <slot name="icon"><svg aria-hidden="true" viewBox="0 0 24 24">\n  <path d="M13.5 2.5h2v6h-2v-2h-11v-2h11v-2Zm4 2h4v2h-4v-2Zm-12 4h2v6h-2v-2h-3v-2h3v-2Zm4 2h12v2h-12v-2Zm1 4h2v6h-2v-2h-8v-2h8v-2Zm4 2h7v2h-7v-2Z" />\n</svg></slot>\n';class Zy extends ef{static get observedAttributes(){return[...super.observedAttributes,th.MEDIA_RENDITION_SELECTED,th.MEDIA_RENDITION_UNAVAILABLE]}constructor(){super({slotTemplate:Qy})}get mediaRenditionSelected(){return Ph(this,th.MEDIA_RENDITION_SELECTED)}set mediaRenditionSelected(e){Oh(this,th.MEDIA_RENDITION_SELECTED,e)}}Vh.customElements.get("media-rendition-button")||Vh.customElements.define("media-rendition-button",Zy);class Jy extends fy{static get observedAttributes(){return[...super.observedAttributes,th.MEDIA_RENDITION_SELECTED,th.MEDIA_RENDITION_UNAVAILABLE]}init(){const e=Hh.createElement("media-rendition-button");e.part.add("button"),e.preventClick=!0;const t=Hh.createElement("media-rendition-listbox");t.part.add("listbox"),t.setAttribute("exportparts","option, option-selected, indicator");const n=this.shadowRoot.querySelector("slot[name=button]"),i=this.shadowRoot.querySelector("slot[name=listbox]");n.textContent="",i.textContent="",n.append(e),i.append(t)}}Vh.customElements.get("media-rendition-selectmenu")||Vh.customElements.define("media-rendition-selectmenu",Jy);var eb,tb,nb,ib,rb,sb,ab=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},ob=(e,t,n)=>(ab(e,t,"read from private field"),n?n.call(e):t.get(e)),lb=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},db=(e,t,n,i)=>(ab(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),cb=(e,t,n)=>(ab(e,t,"access private method"),n);class ub extends Av{constructor(){super(...arguments),lb(this,nb),lb(this,rb),lb(this,eb,[]),lb(this,tb,void 0)}static get observedAttributes(){return[...super.observedAttributes,th.MEDIA_AUDIO_TRACK_LIST,th.MEDIA_AUDIO_TRACK_ENABLED]}attributeChangedCallback(e,t,n){var i;super.attributeChangedCallback(e,t,n),e===th.MEDIA_AUDIO_TRACK_ENABLED&&t!==n?this.value=n:e===th.MEDIA_AUDIO_TRACK_LIST&&t!==n&&(db(this,eb,null==(i=n)?void 0:i.split(/\s+/).map(vh)),cb(this,nb,ib).call(this))}connectedCallback(){super.connectedCallback(),this.addEventListener("change",cb(this,rb,sb))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("change",cb(this,rb,sb))}get mediaAudioTrackList(){return ob(this,eb)}set mediaAudioTrackList(e){db(this,eb,e),cb(this,nb,ib).call(this)}get mediaAudioTrackEnabled(){return Ph(this,th.MEDIA_AUDIO_TRACK_ENABLED)}set mediaAudioTrackEnabled(e){Oh(this,th.MEDIA_AUDIO_TRACK_ENABLED,e)}}eb=new WeakMap,tb=new WeakMap,nb=new WeakSet,ib=function(){if(ob(this,tb)===JSON.stringify(this.mediaAudioTrackList))return;db(this,tb,JSON.stringify(this.mediaAudioTrackList));const e=this.mediaAudioTrackList,t=this.shadowRoot.querySelector("#container");t.textContent="";for(const n of e){const e=Ev(this.formatOptionText(n.label,n),`${n.id}`,n.enabled);e.prepend(Tv(this,"select-indicator")),t.append(e)}},rb=new WeakSet,sb=function(){if(null==this.value)return;const e=new Vh.CustomEvent(Xu.MEDIA_AUDIO_TRACK_REQUEST,{composed:!0,bubbles:!0,detail:this.value});this.dispatchEvent(e)},Vh.customElements.get("media-audio-track-listbox")||Vh.customElements.define("media-audio-track-listbox",ub);const hb=Hh.createElement("template");hb.innerHTML='\n  <slot name="icon"><svg aria-hidden="true" viewBox="0 0 24 24">\n  <path d="M11 17H9.5V7H11v10Zm-3-3H6.5v-4H8v4Zm6-5h-1.5v6H14V9Zm3 7h-1.5V8H17v8Z"/>\n  <path d="M22 12c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2s10 4.477 10 10Zm-2 0a8 8 0 1 0-16 0 8 8 0 0 0 16 0Z"/>\n</svg></slot>\n';class fb extends ef{static get observedAttributes(){return[...super.observedAttributes,th.MEDIA_AUDIO_TRACK_ENABLED,th.MEDIA_AUDIO_TRACK_UNAVAILABLE]}constructor(){super({slotTemplate:hb})}get mediaAudioTrackEnabled(){return Ph(this,th.MEDIA_AUDIO_TRACK_ENABLED)}set mediaAudioTrackEnabled(e){Oh(this,th.MEDIA_AUDIO_TRACK_ENABLED,e)}}Vh.customElements.get("media-audio-track-button")||Vh.customElements.define("media-audio-track-button",fb);class pb extends fy{static get observedAttributes(){return[...super.observedAttributes,th.MEDIA_AUDIO_TRACK_ENABLED,th.MEDIA_AUDIO_TRACK_UNAVAILABLE]}init(){const e=Hh.createElement("media-audio-track-button");e.part.add("button"),e.preventClick=!0;const t=Hh.createElement("media-audio-track-listbox");t.part.add("listbox"),t.setAttribute("exportparts","option, option-selected, indicator");const n=this.shadowRoot.querySelector("slot[name=button]"),i=this.shadowRoot.querySelector("slot[name=listbox]");n.textContent="",i.textContent="",n.append(e),i.append(t)}}Vh.customElements.get("media-audio-track-selectmenu")||Vh.customElements.define("media-audio-track-selectmenu",pb);var mb=n(125);function gb(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var vb,yb,bb,Eb,Tb,_b={exports:{}};vb=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,yb=/^(?=([^\/?#]*))\1([^]*)$/,bb=/(?:\/|^)\.(?=\/)/g,Eb=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,_b.exports=Tb={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),!(t=t.trim())){if(!n.alwaysNormalize)return e;var i=Tb.parseURL(e);if(!i)throw new Error("Error trying to parse base URL.");return i.path=Tb.normalizePath(i.path),Tb.buildURLFromParts(i)}var r=Tb.parseURL(t);if(!r)throw new Error("Error trying to parse relative URL.");if(r.scheme)return n.alwaysNormalize?(r.path=Tb.normalizePath(r.path),Tb.buildURLFromParts(r)):t;var s=Tb.parseURL(e);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var a=yb.exec(s.path);s.netLoc=a[1],s.path=a[2]}s.netLoc&&!s.path&&(s.path="/");var o={scheme:s.scheme,netLoc:r.netLoc,path:null,params:r.params,query:r.query,fragment:r.fragment};if(!r.netLoc&&(o.netLoc=s.netLoc,"/"!==r.path[0]))if(r.path){var l=s.path,d=l.substring(0,l.lastIndexOf("/")+1)+r.path;o.path=Tb.normalizePath(d)}else o.path=s.path,r.params||(o.params=s.params,r.query||(o.query=s.query));return null===o.path&&(o.path=n.alwaysNormalize?Tb.normalizePath(r.path):r.path),Tb.buildURLFromParts(o)},parseURL:function(e){var t=vb.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(bb,"");e.length!==(e=e.replace(Eb,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};var Ab=_b.exports;function Sb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function kb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sb(Object(n),!0).forEach((function(t){wb(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wb(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lb(){return Lb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Lb.apply(this,arguments)}const Rb=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)};let Ib=function(e){return e.MEDIA_ATTACHING="hlsMediaAttaching",e.MEDIA_ATTACHED="hlsMediaAttached",e.MEDIA_DETACHING="hlsMediaDetaching",e.MEDIA_DETACHED="hlsMediaDetached",e.BUFFER_RESET="hlsBufferReset",e.BUFFER_CODECS="hlsBufferCodecs",e.BUFFER_CREATED="hlsBufferCreated",e.BUFFER_APPENDING="hlsBufferAppending",e.BUFFER_APPENDED="hlsBufferAppended",e.BUFFER_EOS="hlsBufferEos",e.BUFFER_FLUSHING="hlsBufferFlushing",e.BUFFER_FLUSHED="hlsBufferFlushed",e.MANIFEST_LOADING="hlsManifestLoading",e.MANIFEST_LOADED="hlsManifestLoaded",e.MANIFEST_PARSED="hlsManifestParsed",e.LEVEL_SWITCHING="hlsLevelSwitching",e.LEVEL_SWITCHED="hlsLevelSwitched",e.LEVEL_LOADING="hlsLevelLoading",e.LEVEL_LOADED="hlsLevelLoaded",e.LEVEL_UPDATED="hlsLevelUpdated",e.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",e.LEVELS_UPDATED="hlsLevelsUpdated",e.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",e.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",e.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",e.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",e.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",e.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",e.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",e.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",e.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",e.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",e.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",e.CUES_PARSED="hlsCuesParsed",e.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",e.INIT_PTS_FOUND="hlsInitPtsFound",e.FRAG_LOADING="hlsFragLoading",e.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",e.FRAG_LOADED="hlsFragLoaded",e.FRAG_DECRYPTED="hlsFragDecrypted",e.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",e.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",e.FRAG_PARSING_METADATA="hlsFragParsingMetadata",e.FRAG_PARSED="hlsFragParsed",e.FRAG_BUFFERED="hlsFragBuffered",e.FRAG_CHANGED="hlsFragChanged",e.FPS_DROP="hlsFpsDrop",e.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",e.ERROR="hlsError",e.DESTROYING="hlsDestroying",e.KEY_LOADING="hlsKeyLoading",e.KEY_LOADED="hlsKeyLoaded",e.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",e.BACK_BUFFER_REACHED="hlsBackBufferReached",e}({}),Cb=function(e){return e.NETWORK_ERROR="networkError",e.MEDIA_ERROR="mediaError",e.KEY_SYSTEM_ERROR="keySystemError",e.MUX_ERROR="muxError",e.OTHER_ERROR="otherError",e}({}),Db=function(e){return e.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",e.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",e.KEY_SYSTEM_NO_SESSION="keySystemNoSession",e.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",e.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",e.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",e.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",e.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",e.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",e.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",e.MANIFEST_LOAD_ERROR="manifestLoadError",e.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",e.MANIFEST_PARSING_ERROR="manifestParsingError",e.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",e.LEVEL_EMPTY_ERROR="levelEmptyError",e.LEVEL_LOAD_ERROR="levelLoadError",e.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",e.LEVEL_PARSING_ERROR="levelParsingError",e.LEVEL_SWITCH_ERROR="levelSwitchError",e.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",e.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",e.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",e.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",e.FRAG_LOAD_ERROR="fragLoadError",e.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",e.FRAG_DECRYPT_ERROR="fragDecryptError",e.FRAG_PARSING_ERROR="fragParsingError",e.FRAG_GAP="fragGap",e.REMUX_ALLOC_ERROR="remuxAllocError",e.KEY_LOAD_ERROR="keyLoadError",e.KEY_LOAD_TIMEOUT="keyLoadTimeOut",e.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",e.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",e.BUFFER_APPEND_ERROR="bufferAppendError",e.BUFFER_APPENDING_ERROR="bufferAppendingError",e.BUFFER_STALLED_ERROR="bufferStalledError",e.BUFFER_FULL_ERROR="bufferFullError",e.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",e.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",e.INTERNAL_EXCEPTION="internalException",e.INTERNAL_ABORTED="aborted",e.UNKNOWN="unknown",e}({});const xb=function(){},Mb={trace:xb,debug:xb,log:xb,warn:xb,info:xb,error:xb};let Pb=Mb;function Ob(e,...t){t.forEach((function(t){Pb[t]=e[t]?e[t].bind(e):function(e){const t=self.console[e];return t?t.bind(self.console,`[${e}] >`):xb}(t)}))}const Nb=Pb,Fb=/^(\d+)x(\d+)$/,Ub=/(.+?)=(".*?"|.*?)(?:,|$)/g;class Bb{constructor(e){"string"==typeof e&&(e=Bb.parseAttrList(e));for(const t in e)e.hasOwnProperty(t)&&("X-"===t.substring(0,2)&&(this.clientAttrs=this.clientAttrs||[],this.clientAttrs.push(t)),this[t]=e[t])}decimalInteger(e){const t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}hexadecimalInteger(e){if(this[e]){let t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;const n=new Uint8Array(t.length/2);for(let e=0;e<t.length/2;e++)n[e]=parseInt(t.slice(2*e,2*e+2),16);return n}return null}hexadecimalIntegerAsNumber(e){const t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,t){const n=this[e];return n?parseFloat(n):t}enumeratedString(e){return this[e]}bool(e){return"YES"===this[e]}decimalResolution(e){const t=Fb.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}static parseAttrList(e){let t;const n={};for(Ub.lastIndex=0;null!==(t=Ub.exec(e));){let e=t[2];0===e.indexOf('"')&&e.lastIndexOf('"')===e.length-1&&(e=e.slice(1,-1));n[t[1].trim()]=e}return n}}function $b(e){return"SCTE35-OUT"===e||"SCTE35-IN"===e}class Vb{constructor(e,t){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,t){const n=t.attr;for(const t in n)if(Object.prototype.hasOwnProperty.call(e,t)&&e[t]!==n[t]){Nb.warn(`DATERANGE tag attribute: "${t}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=t;break}e=Lb(new Bb({}),n,e)}if(this.attr=e,this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const e=new Date(this.attr["END-DATE"]);Rb(e.getTime())&&(this._endDate=e)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get startDate(){return this._startDate}get endDate(){if(this._endDate)return this._endDate;const e=this.duration;return null!==e?new Date(this._startDate.getTime()+1e3*e):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(Rb(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isValid(){return!!this.id&&!this._badValueForSameId&&Rb(this.startDate.getTime())&&(null===this.duration||this.duration>=0)&&(!this.endOnNext||!!this.class)}}class Hb{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var Wb="audio",Gb="video",Kb="audiovideo";class jb{constructor(e){this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams={[Wb]:null,[Gb]:null,[Kb]:null},this.baseurl=e}setByteRange(e,t){const n=e.split("@",2),i=[];1===n.length?i[0]=t?t.byteRangeEndOffset:0:i[0]=parseInt(n[1]),i[1]=parseInt(n[0])+i[0],this._byteRange=i}get byteRange(){return this._byteRange?this._byteRange:[]}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=Ab.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}}class qb extends jb{constructor(e,t){super(t),this._decryptdata=null,this.rawProgramDateTime=null,this.programDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.stats=new Hb,this.urlId=0,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.type=e}get decryptdata(){const{levelkeys:e}=this;if(!e&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){const e=this.levelkeys.identity;if(e)this._decryptdata=e.getDecryptData(this.sn);else{const e=Object.keys(this.levelkeys);if(1===e.length)return this._decryptdata=this.levelkeys[e[0]].getDecryptData(this.sn)}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(null===this.programDateTime)return null;if(!Rb(this.programDateTime))return null;const e=Rb(this.duration)?this.duration:0;return this.programDateTime+1e3*e}get encrypted(){var e;if(null!=(e=this._decryptdata)&&e.encrypted)return!0;if(this.levelkeys){const e=Object.keys(this.levelkeys),t=e.length;if(t>1||1===t&&this.levelkeys[e[0]].encrypted)return!0}return!1}setKeyFormat(e){if(this.levelkeys){const t=this.levelkeys[e];t&&!this._decryptdata&&(this._decryptdata=t.getDecryptData(this.sn))}}abortRequests(){var e,t;null==(e=this.loader)||e.abort(),null==(t=this.keyLoader)||t.abort()}setElementaryStreamInfo(e,t,n,i,r,s=!1){const{elementaryStreams:a}=this,o=a[e];o?(o.startPTS=Math.min(o.startPTS,t),o.endPTS=Math.max(o.endPTS,n),o.startDTS=Math.min(o.startDTS,i),o.endDTS=Math.max(o.endDTS,r)):a[e]={startPTS:t,endPTS:n,startDTS:i,endDTS:r,partial:s}}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[Wb]=null,e[Gb]=null,e[Kb]=null}}class Yb extends jb{constructor(e,t,n,i,r){super(n),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.stats=new Hb,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=t,this.index=i;const s=e.enumeratedString("BYTERANGE");s&&this.setByteRange(s,r),r&&(this.fragOffset=r.fragOffset+r.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}}class zb{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e)return this.advanced=!0,void(this.updated=!0);const t=this.lastPartSn-e.lastPartSn,n=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!n||!!t||!this.live,this.advanced=this.endSN>e.endSN||t>0||0===t&&n>0,this.updated||this.advanced?this.misses=Math.floor(.6*e.misses):this.misses=e.misses+1,this.availabilityDelay=e.availabilityDelay}get hasProgramDateTime(){return!!this.fragments.length&&Rb(this.fragments[this.fragments.length-1].programDateTime)}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||10}get drift(){const e=this.driftEndTime-this.driftStartTime;if(e>0){return 1e3*(this.driftEnd-this.driftStart)/e}return 1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){var e;return null!=(e=this.fragments)&&e.length?this.fragments[this.fragments.length-1].end:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].index:-1}get lastPartSn(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}function Xb(e){return Uint8Array.from(atob(e),(e=>e.charCodeAt(0)))}function Qb(e){const t=e.split(":");let n=null;if("data"===t[0]&&2===t.length){const e=t[1].split(";"),i=e[e.length-1].split(",");if(2===i.length){const t="base64"===i[0],r=i[1];t?(e.splice(-1,1),n=Xb(r)):n=function(e){const t=Zb(e).subarray(0,16),n=new Uint8Array(16);return n.set(t,16-t.length),n}(r)}}return n}function Zb(e){return Uint8Array.from(unescape(encodeURIComponent(e)),(e=>e.charCodeAt(0)))}var Jb={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},eE="org.w3.clearkey",tE="com.apple.streamingkeydelivery",nE="com.microsoft.playready",iE="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";function rE(e){switch(e){case tE:return Jb.FAIRPLAY;case nE:return Jb.PLAYREADY;case iE:return Jb.WIDEVINE;case eE:return Jb.CLEARKEY}}var sE="edef8ba979d64acea3c827dcd51d21ed";function aE(e){switch(e){case Jb.FAIRPLAY:return tE;case Jb.PLAYREADY:return nE;case Jb.WIDEVINE:return iE;case Jb.CLEARKEY:return eE}}function oE(e){const{drmSystems:t,widevineLicenseUrl:n}=e,i=t?[Jb.FAIRPLAY,Jb.WIDEVINE,Jb.PLAYREADY,Jb.CLEARKEY].filter((e=>!!t[e])):[];return!i[Jb.WIDEVINE]&&n&&i.push(Jb.WIDEVINE),i}const lE="undefined"!=typeof self&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null;function dE(e,t,n){return Uint8Array.prototype.slice?e.slice(t,n):new Uint8Array(Array.prototype.slice.call(e,t,n))}const cE=(e,t)=>t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128,uE=(e,t)=>t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128,hE=(e,t)=>{const n=t;let i=0;for(;cE(e,t);){i+=10;i+=fE(e,t+6),uE(e,t+10)&&(i+=10),t+=i}if(i>0)return e.subarray(n,n+i)},fE=(e,t)=>{let n=0;return n=(127&e[t])<<21,n|=(127&e[t+1])<<14,n|=(127&e[t+2])<<7,n|=127&e[t+3],n},pE=(e,t)=>cE(e,t)&&fE(e,t+6)+10<=e.length-t,mE=e=>e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info,gE=e=>{const t=String.fromCharCode(e[0],e[1],e[2],e[3]),n=fE(e,4);return{type:t,size:n,data:e.subarray(10,10+n)}},vE=e=>{let t=0;const n=[];for(;cE(e,t);){const i=fE(e,t+6);t+=10;const r=t+i;for(;t+8<r;){const i=gE(e.subarray(t)),r=yE(i);r&&n.push(r),t+=i.size+10}uE(e,t)&&(t+=10)}return n},yE=e=>"PRIV"===e.type?bE(e):"W"===e.type[0]?TE(e):EE(e),bE=e=>{if(e.size<2)return;const t=AE(e.data,!0),n=new Uint8Array(e.data.subarray(t.length+1));return{key:e.type,info:t,data:n.buffer}},EE=e=>{if(e.size<2)return;if("TXXX"===e.type){let t=1;const n=AE(e.data.subarray(t),!0);t+=n.length+1;const i=AE(e.data.subarray(t));return{key:e.type,info:n,data:i}}const t=AE(e.data.subarray(1));return{key:e.type,data:t}},TE=e=>{if("WXXX"===e.type){if(e.size<2)return;let t=1;const n=AE(e.data.subarray(t),!0);t+=n.length+1;const i=AE(e.data.subarray(t));return{key:e.type,info:n,data:i}}const t=AE(e.data);return{key:e.type,data:t}},_E=e=>{if(8===e.data.byteLength){const t=new Uint8Array(e.data),n=1&t[3];let i=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return i/=45,n&&(i+=47721858.84),Math.round(i)}},AE=(e,t=!1)=>{const n=function(){SE||void 0===self.TextDecoder||(SE=new self.TextDecoder("utf-8"));return SE}();if(n){const i=n.decode(e);if(t){const e=i.indexOf("\0");return-1!==e?i.substring(0,e):i}return i.replace(/\0/g,"")}const i=e.length;let r,s,a,o="",l=0;for(;l<i;){if(r=e[l++],0===r&&t)return o;if(0!==r&&3!==r)switch(r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o+=String.fromCharCode(r);break;case 12:case 13:s=e[l++],o+=String.fromCharCode((31&r)<<6|63&s);break;case 14:s=e[l++],a=e[l++],o+=String.fromCharCode((15&r)<<12|(63&s)<<6|(63&a)<<0)}}return o};let SE;const kE=function(e){let t="";for(let n=0;n<e.length;n++){let i=e[n].toString(16);i.length<2&&(i="0"+i),t+=i}return t},wE=Math.pow(2,32)-1,LE=[].push,RE={video:1,audio:2,id3:3,text:4};function IE(e){return String.fromCharCode.apply(null,e)}function CE(e,t){const n=e[t]<<8|e[t+1];return n<0?65536+n:n}function DE(e,t){const n=xE(e,t);return n<0?4294967296+n:n}function xE(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function ME(e,t,n){e[t]=n>>24,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n}function PE(e,t){const n=[];if(!t.length)return n;const i=e.byteLength;for(let r=0;r<i;){const s=DE(e,r),a=s>1?r+s:i;if(IE(e.subarray(r+4,r+8))===t[0])if(1===t.length)n.push(e.subarray(r+8,a));else{const i=PE(e.subarray(r+8,a),t.slice(1));i.length&&LE.apply(n,i)}r=a}return n}function OE(e){const t=[],n=e[0];let i=8;const r=DE(e,i);i+=4;i+=0===n?8:16,i+=2;let s=e.length+0;const a=CE(e,i);i+=2;for(let n=0;n<a;n++){let n=i;const a=DE(e,n);n+=4;const o=2147483647&a;if(1===(2147483648&a)>>>31)return Nb.warn("SIDX has hierarchical references (not supported)"),null;const l=DE(e,n);n+=4,t.push({referenceSize:o,subsegmentDuration:l,info:{duration:l/r,start:s,end:s+o-1}}),s+=o,n+=4,i=n}return{earliestPresentationTime:0,timescale:r,version:n,referencesCount:a,references:t}}function NE(e){const t=[],n=PE(e,["moov","trak"]);for(let e=0;e<n.length;e++){const i=n[e],r=PE(i,["tkhd"])[0];if(r){let e=r[0],n=0===e?12:20;const s=DE(r,n),a=PE(i,["mdia","mdhd"])[0];if(a){e=a[0],n=0===e?12:20;const r=DE(a,n),o=PE(i,["mdia","hdlr"])[0];if(o){const e=IE(o.subarray(8,12)),n={soun:Wb,vide:Gb}[e];if(n){const e=PE(i,["mdia","minf","stbl","stsd"])[0];let a;e&&(a=IE(e.subarray(12,16))),t[s]={timescale:r,type:n},t[n]={timescale:r,id:s,codec:a}}}}}}return PE(e,["moov","mvex","trex"]).forEach((e=>{const n=DE(e,4),i=t[n];i&&(i.default={duration:DE(e,12),flags:DE(e,20)})})),t}function FE(e){const t=PE(e,["schm"])[0];if(t){const n=IE(t.subarray(4,8));if("cbcs"===n||"cenc"===n)return PE(e,["schi","tenc"])[0]}return Nb.error("[eme] missing 'schm' box"),null}function UE(e){const t=DE(e,0);let n=8;1&t&&(n+=4),4&t&&(n+=4);let i=0;const r=DE(e,4);for(let s=0;s<r;s++){if(256&t){i+=DE(e,n),n+=4}512&t&&(n+=4),1024&t&&(n+=4),2048&t&&(n+=4)}return i}function BE(e,t){const n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function $E(e,t){const n=[],i=t.samples,r=t.timescale,s=t.id;let a=!1;return PE(i,["moof"]).map((o=>{const l=o.byteOffset-8;PE(o,["traf"]).map((o=>{const d=PE(o,["tfdt"]).map((e=>{const t=e[0];let n=DE(e,4);return 1===t&&(n*=Math.pow(2,32),n+=DE(e,8)),n/r}))[0];return void 0!==d&&(e=d),PE(o,["tfhd"]).map((d=>{const c=DE(d,4),u=16777215&DE(d,0);let h=0;const f=0!=(16&u);let p=0;const m=0!=(32&u);let g=8;c===s&&(0!=(1&u)&&(g+=8),0!=(2&u)&&(g+=4),0!=(8&u)&&(h=DE(d,g),g+=4),f&&(p=DE(d,g),g+=4),m&&(g+=4),"video"===t.type&&(a=function(e){if(!e)return!1;const t=e.indexOf("."),n=t<0?e:e.substring(0,t);return"hvc1"===n||"hev1"===n||"dvh1"===n||"dvhe"===n}(t.codec)),PE(o,["trun"]).map((s=>{const o=s[0],d=16777215&DE(s,0),c=0!=(1&d);let u=0;const f=0!=(4&d),m=0!=(256&d);let g=0;const v=0!=(512&d);let y=0;const b=0!=(1024&d),E=0!=(2048&d);let T=0;const _=DE(s,4);let A=8;c&&(u=DE(s,A),A+=4),f&&(A+=4);let S=u+l;for(let l=0;l<_;l++){if(m?(g=DE(s,A),A+=4):g=h,v?(y=DE(s,A),A+=4):y=p,b&&(A+=4),E&&(T=0===o?DE(s,A):xE(s,A),A+=4),t.type===Gb){let t=0;for(;t<y;){const s=DE(i,S);if(S+=4,VE(a,i[S])){HE(i.subarray(S,S+s),a?2:1,e+T/r,n)}S+=s,t+=s+4}}e+=g/r}})))}))}))})),n}function VE(e,t){if(e){const e=t>>1&63;return 39===e||40===e}return 6===(31&t)}function HE(e,t,n,i){const r=WE(e);let s=0;s+=t;let a=0,o=0,l=!1,d=0;for(;s<r.length;){a=0;do{if(s>=r.length)break;d=r[s++],a+=d}while(255===d);o=0;do{if(s>=r.length)break;d=r[s++],o+=d}while(255===d);const e=r.length-s;if(!l&&4===a&&s<r.length){l=!0;if(181===r[s++]){const e=CE(r,s);if(s+=2,49===e){const e=DE(r,s);if(s+=4,1195456820===e){const e=r[s++];if(3===e){const t=r[s++],o=64&t,l=o?2+3*(31&t):0,d=new Uint8Array(l);if(o){d[0]=t;for(let e=1;e<l;e++)d[e]=r[s++]}i.push({type:e,payloadType:a,pts:n,bytes:d})}}}}}else if(5===a&&o<e){if(l=!0,o>16){const e=[];for(let t=0;t<16;t++){const n=r[s++].toString(16);e.push(1==n.length?"0"+n:n),3!==t&&5!==t&&7!==t&&9!==t||e.push("-")}const t=o-16,l=new Uint8Array(t);for(let e=0;e<t;e++)l[e]=r[s++];i.push({payloadType:a,pts:n,uuid:e.join(""),userData:AE(l),userDataBytes:l})}}else if(o<e)s+=o;else if(o>e)break}}function WE(e){const t=e.byteLength,n=[];let i=1;for(;i<t-2;)0===e[i]&&0===e[i+1]&&3===e[i+2]?(n.push(i+2),i+=2):i++;if(0===n.length)return e;const r=t-n.length,s=new Uint8Array(r);let a=0;for(i=0;i<r;a++,i++)a===n[0]&&(a++,n.shift()),s[i]=e[a];return s}function GE(e,t,n){if(16!==e.byteLength)throw new RangeError("Invalid system id");let i,r,s;if(t){i=1,r=new Uint8Array(16*t.length);for(let e=0;e<t.length;e++){const n=t[e];if(16!==n.byteLength)throw new RangeError("Invalid key");r.set(n,16*e)}}else i=0,r=new Uint8Array;i>0?(s=new Uint8Array(4),t.length>0&&new DataView(s.buffer).setUint32(0,t.length,!1)):s=new Uint8Array;const a=new Uint8Array(4);return n&&n.byteLength>0&&new DataView(a.buffer).setUint32(0,n.byteLength,!1),function(e,...t){const n=t.length;let i=8,r=n;for(;r--;)i+=t[r].byteLength;const s=new Uint8Array(i);for(s[0]=i>>24&255,s[1]=i>>16&255,s[2]=i>>8&255,s[3]=255&i,s.set(e,4),r=0,i=8;r<n;r++)s.set(t[r],i),i+=t[r].byteLength;return s}([112,115,115,104],new Uint8Array([i,0,0,0]),e,s,r,a,n||new Uint8Array)}let KE={};class jE{static clearKeyUriToKeyIdMap(){KE={}}constructor(e,t,n,i=[1],r=null){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=t,this.keyFormat=n,this.keyFormatVersions=i,this.iv=r,this.encrypted=!!e&&"NONE"!==e,this.isCommonEncryption=this.encrypted&&"AES-128"!==e}isSupported(){if(this.method){if("AES-128"===this.method||"NONE"===this.method)return!0;if("identity"===this.keyFormat)return"SAMPLE-AES"===this.method;switch(this.keyFormat){case tE:case iE:case nE:case eE:return-1!==["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)}}return!1}getDecryptData(e){if(!this.encrypted||!this.uri)return null;if("AES-128"===this.method&&this.uri&&!this.iv){"number"!=typeof e&&("AES-128"!==this.method||this.iv||Nb.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0);const t=function(e){const t=new Uint8Array(16);for(let n=12;n<16;n++)t[n]=e>>8*(15-n)&255;return t}(e);return new jE(this.method,this.uri,"identity",this.keyFormatVersions,t)}const t=Qb(this.uri);if(t)switch(this.keyFormat){case iE:this.pssh=t,t.length>=22&&(this.keyId=t.subarray(t.length-22,t.length-6));break;case nE:{const e=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=GE(e,null,t);const n=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2),i=String.fromCharCode.apply(null,Array.from(n)),r=i.substring(i.indexOf("<"),i.length),s=(new DOMParser).parseFromString(r,"text/xml").getElementsByTagName("KID")[0];if(s){const e=s.childNodes[0]?s.childNodes[0].nodeValue:s.getAttribute("VALUE");if(e){const t=Xb(e).subarray(0,16);!function(e){const t=function(e,t,n){const i=e[t];e[t]=e[n],e[n]=i};t(e,0,3),t(e,1,2),t(e,4,5),t(e,6,7)}(t),this.keyId=t}}break}default:{let e=t.subarray(0,16);if(16!==e.length){const t=new Uint8Array(16);t.set(e,16-e.length),e=t}this.keyId=e;break}}if(!this.keyId||16!==this.keyId.byteLength){let e=KE[this.uri];if(!e){const t=Object.keys(KE).length%Number.MAX_SAFE_INTEGER;e=new Uint8Array(16);new DataView(e.buffer,12,4).setUint32(0,t),KE[this.uri]=e}this.keyId=e}return this}}const qE=/\{\$([a-zA-Z0-9-_]+)\}/g;function YE(e){return qE.test(e)}function zE(e,t,n){if(null!==e.variableList||e.hasVariableRefs)for(let i=n.length;i--;){const r=n[i],s=t[r];s&&(t[r]=XE(e,s))}}function XE(e,t){if(null!==e.variableList||e.hasVariableRefs){const n=e.variableList;return t.replace(qE,(t=>{const i=t.substring(2,t.length-1),r=null==n?void 0:n[i];return void 0===r?(e.playlistParsingError||(e.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${i}"`)),t):r}))}return t}function QE(e,t,n){let i,r,s=e.variableList;if(s||(e.variableList=s={}),"QUERYPARAM"in t){i=t.QUERYPARAM;try{const e=new self.URL(n).searchParams;if(!e.has(i))throw new Error(`"${i}" does not match any query parameter in URI: "${n}"`);r=e.get(i)}catch(t){e.playlistParsingError||(e.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${t.message}`))}}else i=t.NAME,r=t.VALUE;i in s?e.playlistParsingError||(e.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${i}"`)):s[i]=r||""}function ZE(e,t,n){const i=t.IMPORT;if(n&&i in n){let t=e.variableList;t||(e.variableList=t={}),t[i]=n[i]}else e.playlistParsingError||(e.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${i}"`))}function JE(){if("undefined"!=typeof self)return self.MediaSource||self.WebKitMediaSource}const eT={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dva1:!0,dvav:!0,dvh1:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0},text:{stpp:!0,wvtt:!0}},tT=JE();function nT(e,t){var n;return null!=(n=null==tT?void 0:tT.isTypeSupported(`${t||"video"}/mp4;codecs="${e}"`))&&n}const iT=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,rT=/#EXT-X-MEDIA:(.*)/g,sT=/^#EXT(?:INF|-X-TARGETDURATION):/m,aT=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),oT=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class lT{static findGroup(e,t){for(let n=0;n<e.length;n++){const i=e[n];if(i.id===t)return i}}static convertAVC1ToAVCOTI(e){const t=e.split(".");if(t.length>2){let e=t.shift()+".";return e+=parseInt(t.shift()).toString(16),e+=("000"+parseInt(t.shift()).toString(16)).slice(-4),e}return e}static resolve(e,t){return Ab.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return sT.test(e)}static parseMasterPlaylist(e,t){const n={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:YE(e)},i=[];let r;for(iT.lastIndex=0;null!=(r=iT.exec(e));)if(r[1]){var s;const e=new Bb(r[1]);zE(n,e,["CODECS","SUPPLEMENTAL-CODECS","ALLOWED-CPC","PATHWAY-ID","STABLE-VARIANT-ID","AUDIO","VIDEO","SUBTITLES","CLOSED-CAPTIONS","NAME"]);const a=XE(n,r[2]),o={attrs:e,bitrate:e.decimalInteger("AVERAGE-BANDWIDTH")||e.decimalInteger("BANDWIDTH"),name:e.NAME,url:lT.resolve(a,t)},l=e.decimalResolution("RESOLUTION");l&&(o.width=l.width,o.height=l.height),uT((e.CODECS||"").split(/[ ,]+/).filter((e=>e)),o),o.videoCodec&&-1!==o.videoCodec.indexOf("avc1")&&(o.videoCodec=lT.convertAVC1ToAVCOTI(o.videoCodec)),null!=(s=o.unknownCodecs)&&s.length||i.push(o),n.levels.push(o)}else if(r[3]){const e=r[3],i=r[4];switch(e){case"SESSION-DATA":{const e=new Bb(i);zE(n,e,["DATA-ID","LANGUAGE","VALUE","URI"]);const t=e["DATA-ID"];t&&(null===n.sessionData&&(n.sessionData={}),n.sessionData[t]=e);break}case"SESSION-KEY":{const e=dT(i,t,n);e.encrypted&&e.isSupported()?(null===n.sessionKeys&&(n.sessionKeys=[]),n.sessionKeys.push(e)):Nb.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${i}"`);break}case"DEFINE":{const e=new Bb(i);zE(n,e,["NAME","VALUE","QUERYPARAM"]),QE(n,e,t)}break;case"CONTENT-STEERING":{const e=new Bb(i);zE(n,e,["SERVER-URI","PATHWAY-ID"]),n.contentSteering={uri:lT.resolve(e["SERVER-URI"],t),pathwayId:e["PATHWAY-ID"]||"."};break}case"START":n.startTimeOffset=cT(i)}}const a=i.length>0&&i.length<n.levels.length;return n.levels=a?i:n.levels,0===n.levels.length&&(n.playlistParsingError=new Error("no levels found in manifest")),n}static parseMasterPlaylistMedia(e,t,n){let i;const r={},s=n.levels,a={AUDIO:s.map((e=>({id:e.attrs.AUDIO,audioCodec:e.audioCodec}))),SUBTITLES:s.map((e=>({id:e.attrs.SUBTITLES,textCodec:e.textCodec}))),"CLOSED-CAPTIONS":[]};let o=0;for(rT.lastIndex=0;null!==(i=rT.exec(e));){const e=new Bb(i[1]),s=e.TYPE;if(s){const i=a[s],l=r[s]||[];r[s]=l,zE(n,e,["URI","GROUP-ID","LANGUAGE","ASSOC-LANGUAGE","STABLE-RENDITION-ID","NAME","INSTREAM-ID","CHARACTERISTICS","CHANNELS"]);const d={attrs:e,bitrate:0,id:o++,groupId:e["GROUP-ID"]||"",instreamId:e["INSTREAM-ID"],name:e.NAME||e.LANGUAGE||"",type:s,default:e.bool("DEFAULT"),autoselect:e.bool("AUTOSELECT"),forced:e.bool("FORCED"),lang:e.LANGUAGE,url:e.URI?lT.resolve(e.URI,t):""};if(null!=i&&i.length){const e=lT.findGroup(i,d.groupId)||i[0];hT(d,e,"audioCodec"),hT(d,e,"textCodec")}l.push(d)}}return r}static parseLevelPlaylist(e,t,n,i,r,s){const a=new zb(t),o=a.fragments;let l,d,c,u=null,h=0,f=0,p=0,m=0,g=null,v=new qb(i,t),y=-1,b=!1;for(aT.lastIndex=0,a.m3u8=e,a.hasVariableRefs=YE(e);null!==(l=aT.exec(e));){b&&(b=!1,v=new qb(i,t),v.start=p,v.sn=h,v.cc=m,v.level=n,u&&(v.initSegment=u,v.rawProgramDateTime=u.rawProgramDateTime,u.rawProgramDateTime=null));const e=l[1];if(e){v.duration=parseFloat(e);const t=(" "+l[2]).slice(1);v.title=t||null,v.tagList.push(t?["INF",e,t]:["INF",e])}else if(l[3]){if(Rb(v.duration)){v.start=p,c&&mT(v,c,a),v.sn=h,v.level=n,v.cc=m,v.urlId=r,o.push(v);const e=(" "+l[3]).slice(1);v.relurl=XE(a,e),fT(v,g),g=v,p+=v.duration,h++,f=0,b=!0}}else if(l[4]){const e=(" "+l[4]).slice(1);g?v.setByteRange(e,g):v.setByteRange(e)}else if(l[5])v.rawProgramDateTime=(" "+l[5]).slice(1),v.tagList.push(["PROGRAM-DATE-TIME",v.rawProgramDateTime]),-1===y&&(y=o.length);else{if(l=l[0].match(oT),!l){Nb.warn("No matches on slow regex match for level playlist!");continue}for(d=1;d<l.length&&void 0===l[d];d++);const e=(" "+l[d]).slice(1),r=(" "+l[d+1]).slice(1),p=l[d+2]?(" "+l[d+2]).slice(1):"";switch(e){case"PLAYLIST-TYPE":a.type=r.toUpperCase();break;case"MEDIA-SEQUENCE":h=a.startSN=parseInt(r);break;case"SKIP":{const e=new Bb(r);zE(a,e,["RECENTLY-REMOVED-DATERANGES"]);const t=e.decimalInteger("SKIPPED-SEGMENTS");if(Rb(t)){a.skippedSegments=t;for(let e=t;e--;)o.unshift(null);h+=t}const n=e.enumeratedString("RECENTLY-REMOVED-DATERANGES");n&&(a.recentlyRemovedDateranges=n.split("\t"));break}case"TARGETDURATION":a.targetduration=Math.max(parseInt(r),1);break;case"VERSION":a.version=parseInt(r);break;case"EXTM3U":break;case"ENDLIST":a.live=!1;break;case"#":(r||p)&&v.tagList.push(p?[r,p]:[r]);break;case"DISCONTINUITY":m++,v.tagList.push(["DIS"]);break;case"GAP":v.gap=!0,v.tagList.push([e]);break;case"BITRATE":v.tagList.push([e,r]);break;case"DATERANGE":{const e=new Bb(r);zE(a,e,["ID","CLASS","START-DATE","END-DATE","SCTE35-CMD","SCTE35-OUT","SCTE35-IN"]),zE(a,e,e.clientAttrs);const t=new Vb(e,a.dateRanges[e.ID]);t.isValid||a.skippedSegments?a.dateRanges[t.id]=t:Nb.warn(`Ignoring invalid DATERANGE tag: "${r}"`),v.tagList.push(["EXT-X-DATERANGE",r]);break}case"DEFINE":{const e=new Bb(r);zE(a,e,["NAME","VALUE","IMPORT","QUERYPARAM"]),"IMPORT"in e?ZE(a,e,s):QE(a,e,t)}break;case"DISCONTINUITY-SEQUENCE":m=parseInt(r);break;case"KEY":{const e=dT(r,t,a);if(e.isSupported()){if("NONE"===e.method){c=void 0;break}c||(c={}),c[e.keyFormat]&&(c=Lb({},c)),c[e.keyFormat]=e}else Nb.warn(`[Keys] Ignoring invalid EXT-X-KEY tag: "${r}"`);break}case"START":a.startTimeOffset=cT(r);break;case"MAP":{const e=new Bb(r);if(zE(a,e,["BYTERANGE","URI"]),v.duration){const r=new qb(i,t);pT(r,e,n,c),u=r,v.initSegment=u,u.rawProgramDateTime&&!v.rawProgramDateTime&&(v.rawProgramDateTime=u.rawProgramDateTime)}else pT(v,e,n,c),u=v,b=!0;break}case"SERVER-CONTROL":{const e=new Bb(r);a.canBlockReload=e.bool("CAN-BLOCK-RELOAD"),a.canSkipUntil=e.optionalFloat("CAN-SKIP-UNTIL",0),a.canSkipDateRanges=a.canSkipUntil>0&&e.bool("CAN-SKIP-DATERANGES"),a.partHoldBack=e.optionalFloat("PART-HOLD-BACK",0),a.holdBack=e.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{const e=new Bb(r);a.partTarget=e.decimalFloatingPoint("PART-TARGET");break}case"PART":{let e=a.partList;e||(e=a.partList=[]);const n=f>0?e[e.length-1]:void 0,i=f++,s=new Bb(r);zE(a,s,["BYTERANGE","URI"]);const o=new Yb(s,v,t,i,n);e.push(o),v.duration+=o.duration;break}case"PRELOAD-HINT":{const e=new Bb(r);zE(a,e,["URI"]),a.preloadHint=e;break}case"RENDITION-REPORT":{const e=new Bb(r);zE(a,e,["URI"]),a.renditionReports=a.renditionReports||[],a.renditionReports.push(e);break}default:Nb.warn(`line parsed but not handled: ${l}`)}}}g&&!g.relurl?(o.pop(),p-=g.duration,a.partList&&(a.fragmentHint=g)):a.partList&&(fT(v,g),v.cc=m,a.fragmentHint=v,c&&mT(v,c,a));const E=o.length,T=o[0],_=o[E-1];if(p+=a.skippedSegments*a.targetduration,p>0&&E&&_){a.averagetargetduration=p/E;const e=_.sn;a.endSN="initSegment"!==e?e:0,a.live||(_.endList=!0),T&&(a.startCC=T.cc)}else a.endSN=0,a.startCC=0;return a.fragmentHint&&(p+=a.fragmentHint.duration),a.totalduration=p,a.endCC=m,y>0&&function(e,t){let n=e[t];for(let i=t;i--;){const t=e[i];if(!t)return;t.programDateTime=n.programDateTime-1e3*t.duration,n=t}}(o,y),a}}function dT(e,t,n){var i,r;const s=new Bb(e);zE(n,s,["KEYFORMAT","KEYFORMATVERSIONS","URI","IV","URI"]);const a=null!=(i=s.METHOD)?i:"",o=s.URI,l=s.hexadecimalInteger("IV"),d=s.KEYFORMATVERSIONS,c=null!=(r=s.KEYFORMAT)?r:"identity";o&&s.IV&&!l&&Nb.error(`Invalid IV: ${s.IV}`);const u=o?lT.resolve(o,t):"",h=(d||"1").split("/").map(Number).filter(Number.isFinite);return new jE(a,u,c,h,l)}function cT(e){const t=new Bb(e).decimalFloatingPoint("TIME-OFFSET");return Rb(t)?t:null}function uT(e,t){["video","audio","text"].forEach((n=>{const i=e.filter((e=>function(e,t){const n=eT[t];return!!n&&!0===n[e.slice(0,4)]}(e,n)));if(i.length){const r=i.filter((e=>0===e.lastIndexOf("avc1",0)||0===e.lastIndexOf("mp4a",0)));t[`${n}Codec`]=r.length>0?r[0]:i[0],e=e.filter((e=>-1===i.indexOf(e)))}})),t.unknownCodecs=e}function hT(e,t,n){const i=t[n];i&&(e[n]=i)}function fT(e,t){e.rawProgramDateTime?e.programDateTime=Date.parse(e.rawProgramDateTime):null!=t&&t.programDateTime&&(e.programDateTime=t.endProgramDateTime),Rb(e.programDateTime)||(e.programDateTime=null,e.rawProgramDateTime=null)}function pT(e,t,n,i){e.relurl=t.URI,t.BYTERANGE&&e.setByteRange(t.BYTERANGE),e.level=n,e.sn="initSegment",i&&(e.levelkeys=i),e.initSegment=null}function mT(e,t,n){e.levelkeys=t;const{encryptedFragments:i}=n;i.length&&i[i.length-1].levelkeys===t||!Object.keys(t).some((e=>t[e].isCommonEncryption))||i.push(e)}var gT="manifest",vT="level",yT="audioTrack",bT="subtitleTrack",ET="main",TT="audio",_T="subtitle";function AT(e){const{type:t}=e;switch(t){case yT:return TT;case bT:return _T;default:return ET}}function ST(e,t){let n=e.url;return void 0!==n&&0!==n.indexOf("data:")||(n=t.url),n}class kT{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(Ib.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Ib.LEVEL_LOADING,this.onLevelLoading,this),e.on(Ib.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(Ib.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}unregisterListeners(){const{hls:e}=this;e.off(Ib.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Ib.LEVEL_LOADING,this.onLevelLoading,this),e.off(Ib.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(Ib.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}createInternalLoader(e){const t=this.hls.config,n=t.pLoader,i=t.loader,r=new(n||i)(t);return this.loaders[e.type]=r,r}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,t){const{url:n}=t;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:gT,url:n,deliveryDirectives:null})}onLevelLoading(e,t){const{id:n,level:i,url:r,deliveryDirectives:s}=t;this.load({id:n,level:i,responseType:"text",type:vT,url:r,deliveryDirectives:s})}onAudioTrackLoading(e,t){const{id:n,groupId:i,url:r,deliveryDirectives:s}=t;this.load({id:n,groupId:i,level:null,responseType:"text",type:yT,url:r,deliveryDirectives:s})}onSubtitleTrackLoading(e,t){const{id:n,groupId:i,url:r,deliveryDirectives:s}=t;this.load({id:n,groupId:i,level:null,responseType:"text",type:bT,url:r,deliveryDirectives:s})}load(e){var t;const n=this.hls.config;let i,r=this.getInternalLoader(e);if(r){const t=r.context;if(t&&t.url===e.url)return void Nb.trace("[playlist-loader]: playlist request ongoing");Nb.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),r.abort()}if(i=e.type===gT?n.manifestLoadPolicy.default:Lb({},n.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),r=this.createInternalLoader(e),null!=(t=e.deliveryDirectives)&&t.part){let t;if(e.type===vT&&null!==e.level?t=this.hls.levels[e.level].details:e.type===yT&&null!==e.id?t=this.hls.audioTracks[e.id].details:e.type===bT&&null!==e.id&&(t=this.hls.subtitleTracks[e.id].details),t){const e=t.partTarget,n=t.targetduration;if(e&&n){const t=1e3*Math.max(3*e,.8*n);i=Lb({},i,{maxTimeToFirstByteMs:Math.min(t,i.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(t,i.maxTimeToFirstByteMs)})}}}const s=i.errorRetry||i.timeoutRetry||{},a={loadPolicy:i,timeout:i.maxLoadTimeMs,maxRetry:s.maxNumRetry||0,retryDelay:s.retryDelayMs||0,maxRetryDelay:s.maxRetryDelayMs||0},o={onSuccess:(e,t,n,i)=>{const r=this.getInternalLoader(n);this.resetInternalLoader(n.type);const s=e.data;0===s.indexOf("#EXTM3U")?(t.parsing.start=performance.now(),lT.isMediaPlaylist(s)?this.handleTrackOrLevelPlaylist(e,t,n,i||null,r):this.handleMasterPlaylist(e,t,n,i)):this.handleManifestParsingError(e,n,new Error("no EXTM3U delimiter"),i||null,t)},onError:(e,t,n,i)=>{this.handleNetworkError(t,n,!1,e,i)},onTimeout:(e,t,n)=>{this.handleNetworkError(t,n,!0,void 0,e)}};r.load(e,a,o)}handleMasterPlaylist(e,t,n,i){const r=this.hls,s=e.data,a=ST(e,n),o=lT.parseMasterPlaylist(s,a);if(o.playlistParsingError)return void this.handleManifestParsingError(e,n,o.playlistParsingError,i,t);const{contentSteering:l,levels:d,sessionData:c,sessionKeys:u,startTimeOffset:h,variableList:f}=o;this.variableList=f;const{AUDIO:p=[],SUBTITLES:m,"CLOSED-CAPTIONS":g}=lT.parseMasterPlaylistMedia(s,a,o);if(p.length){p.some((e=>!e.url))||!d[0].audioCodec||d[0].attrs.AUDIO||(Nb.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),p.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new Bb({}),bitrate:0,url:""}))}r.trigger(Ib.MANIFEST_LOADED,{levels:d,audioTracks:p,subtitles:m,captions:g,contentSteering:l,url:a,stats:t,networkDetails:i,sessionData:c,sessionKeys:u,startTimeOffset:h,variableList:f})}handleTrackOrLevelPlaylist(e,t,n,i,r){const s=this.hls,{id:a,level:o,type:l}=n,d=ST(e,n),c=Rb(a)?a:0,u=Rb(o)?o:c,h=AT(n),f=lT.parseLevelPlaylist(e.data,d,u,h,c,this.variableList);if(l===gT){const e={attrs:new Bb({}),bitrate:0,details:f,name:"",url:d};s.trigger(Ib.MANIFEST_LOADED,{levels:[e],audioTracks:[],url:d,stats:t,networkDetails:i,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}t.parsing.end=performance.now(),n.levelDetails=f,this.handlePlaylistLoaded(f,e,t,n,i,r)}handleManifestParsingError(e,t,n,i,r){this.hls.trigger(Ib.ERROR,{type:Cb.NETWORK_ERROR,details:Db.MANIFEST_PARSING_ERROR,fatal:t.type===gT,url:e.url,err:n,error:n,reason:n.message,response:e,context:t,networkDetails:i,stats:r})}handleNetworkError(e,t,n=!1,i,r){let s=`A network ${n?"timeout":"error"+(i?" (status "+i.code+")":"")} occurred while loading ${e.type}`;e.type===vT?s+=`: ${e.level} id: ${e.id}`:e.type!==yT&&e.type!==bT||(s+=` id: ${e.id} group-id: "${e.groupId}"`);const a=new Error(s);Nb.warn(`[playlist-loader]: ${s}`);let o=Db.UNKNOWN,l=!1;const d=this.getInternalLoader(e);switch(e.type){case gT:o=n?Db.MANIFEST_LOAD_TIMEOUT:Db.MANIFEST_LOAD_ERROR,l=!0;break;case vT:o=n?Db.LEVEL_LOAD_TIMEOUT:Db.LEVEL_LOAD_ERROR,l=!1;break;case yT:o=n?Db.AUDIO_TRACK_LOAD_TIMEOUT:Db.AUDIO_TRACK_LOAD_ERROR,l=!1;break;case bT:o=n?Db.SUBTITLE_TRACK_LOAD_TIMEOUT:Db.SUBTITLE_LOAD_ERROR,l=!1}d&&this.resetInternalLoader(e.type);const c={type:Cb.NETWORK_ERROR,details:o,fatal:l,url:e.url,loader:d,context:e,error:a,networkDetails:t,stats:r};if(i){const n=(null==t?void 0:t.url)||e.url;c.response=kb({url:n,data:void 0},i)}this.hls.trigger(Ib.ERROR,c)}handlePlaylistLoaded(e,t,n,i,r,s){const a=this.hls,{type:o,level:l,id:d,groupId:c,deliveryDirectives:u}=i,h=ST(t,i),f=AT(i),p="number"==typeof i.level&&f===ET?l:void 0;if(!e.fragments.length){const e=new Error("No Segments found in Playlist");return void a.trigger(Ib.ERROR,{type:Cb.NETWORK_ERROR,details:Db.LEVEL_EMPTY_ERROR,fatal:!1,url:h,error:e,reason:e.message,response:t,context:i,level:p,parent:f,networkDetails:r,stats:n})}e.targetduration||(e.playlistParsingError=new Error("Missing Target Duration"));const m=e.playlistParsingError;if(m)a.trigger(Ib.ERROR,{type:Cb.NETWORK_ERROR,details:Db.LEVEL_PARSING_ERROR,fatal:!1,url:h,error:m,reason:m.message,response:t,context:i,level:p,parent:f,networkDetails:r,stats:n});else switch(e.live&&s&&(s.getCacheAge&&(e.ageHeader=s.getCacheAge()||0),s.getCacheAge&&!isNaN(e.ageHeader)||(e.ageHeader=0)),o){case gT:case vT:a.trigger(Ib.LEVEL_LOADED,{details:e,level:p||0,id:d||0,stats:n,networkDetails:r,deliveryDirectives:u});break;case yT:a.trigger(Ib.AUDIO_TRACK_LOADED,{details:e,id:d||0,groupId:c||"",stats:n,networkDetails:r,deliveryDirectives:u});break;case bT:a.trigger(Ib.SUBTITLE_TRACK_LOADED,{details:e,id:d||0,groupId:c||"",stats:n,networkDetails:r,deliveryDirectives:u})}}}function wT(e,t){let n;try{n=new Event("addtrack")}catch(e){n=document.createEvent("Event"),n.initEvent("addtrack",!1,!1)}n.track=e,t.dispatchEvent(n)}function LT(e,t){const n=e.mode;if("disabled"===n&&(e.mode="hidden"),e.cues&&!e.cues.getCueById(t.id))try{if(e.addCue(t),!e.cues.getCueById(t.id))throw new Error(`addCue is failed for: ${t}`)}catch(n){Nb.debug(`[texttrack-utils]: ${n}`);try{const n=new self.TextTrackCue(t.startTime,t.endTime,t.text);n.id=t.id,e.addCue(n)}catch(e){Nb.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${e}`)}}"disabled"===n&&(e.mode=n)}function RT(e){const t=e.mode;if("disabled"===t&&(e.mode="hidden"),e.cues)for(let t=e.cues.length;t--;)e.removeCue(e.cues[t]);"disabled"===t&&(e.mode=t)}function IT(e,t,n,i){const r=e.mode;if("disabled"===r&&(e.mode="hidden"),e.cues&&e.cues.length>0){const r=function(e,t,n){const i=[],r=function(e,t){if(t<e[0].startTime)return 0;const n=e.length-1;if(t>e[n].endTime)return-1;let i=0,r=n;for(;i<=r;){const s=Math.floor((r+i)/2);if(t<e[s].startTime)r=s-1;else{if(!(t>e[s].startTime&&i<n))return s;i=s+1}}return e[i].startTime-t<t-e[r].startTime?i:r}(e,t);if(r>-1)for(let s=r,a=e.length;s<a;s++){const r=e[s];if(r.startTime>=t&&r.endTime<=n)i.push(r);else if(r.startTime>n)return i}return i}(e.cues,t,n);for(let t=0;t<r.length;t++)i&&!i(r[t])||e.removeCue(r[t])}"disabled"===r&&(e.mode=r)}var CT="org.id3",DT="com.apple.quicktime.HLS",xT="https://aomedia.org/emsg/ID3";function MT(){if("undefined"!=typeof self)return self.WebKitDataCue||self.VTTCue||self.TextTrackCue}const PT=(()=>{const e=MT();try{new e(0,Number.POSITIVE_INFINITY,"")}catch(e){return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();function OT(e,t){return e.getTime()/1e3-t}class NT{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null}_registerListeners(){const{hls:e}=this;e.on(Ib.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Ib.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Ib.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Ib.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(Ib.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(Ib.LEVEL_UPDATED,this.onLevelUpdated,this)}_unregisterListeners(){const{hls:e}=this;e.off(Ib.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Ib.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Ib.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Ib.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(Ib.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(Ib.LEVEL_UPDATED,this.onLevelUpdated,this)}onMediaAttached(e,t){this.media=t.media}onMediaDetaching(){this.id3Track&&(RT(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const t=this.getID3Track(e.textTracks);return t.mode="hidden",t}getID3Track(e){if(this.media){for(let t=0;t<e.length;t++){const n=e[t];if("metadata"===n.kind&&"id3"===n.label)return wT(n,this.media),n}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,t){if(!this.media)return;const{hls:{config:{enableEmsgMetadataCues:n,enableID3MetadataCues:i}}}=this;if(!n&&!i)return;const{samples:r}=t;this.id3Track||(this.id3Track=this.createTrack(this.media));const s=MT();for(let e=0;e<r.length;e++){const t=r[e].type;if(t===xT&&!n||!i)continue;const a=vE(r[e].data);if(a){const n=r[e].pts;let i=n+r[e].duration;i>PT&&(i=PT);i-n<=0&&(i=n+.25);for(let e=0;e<a.length;e++){const r=a[e];if(!mE(r)){this.updateId3CueEnds(n,t);const e=new s(n,i,"");e.value=r,t&&(e.type=t),this.id3Track.addCue(e)}}}}}updateId3CueEnds(e,t){var n;const i=null==(n=this.id3Track)?void 0:n.cues;if(i)for(let n=i.length;n--;){const r=i[n];r.type===t&&r.startTime<e&&r.endTime===PT&&(r.endTime=e)}}onBufferFlushing(e,{startOffset:t,endOffset:n,type:i}){const{id3Track:r,hls:s}=this;if(!s)return;const{config:{enableEmsgMetadataCues:a,enableID3MetadataCues:o}}=s;if(r&&(a||o)){let e;e="audio"===i?e=>e.type===CT&&o:"video"===i?e=>e.type===xT&&a:e=>e.type===CT&&o||e.type===xT&&a,IT(r,t,n,e)}}onLevelUpdated(e,{details:t}){if(!this.media||!t.hasProgramDateTime||!this.hls.config.enableDateRangeMetadataCues)return;const{dateRangeCuesAppended:n,id3Track:i}=this,{dateRanges:r}=t,s=Object.keys(r);if(i){const e=Object.keys(n).filter((e=>!s.includes(e)));for(let t=e.length;t--;){const r=e[t];Object.keys(n[r].cues).forEach((e=>{i.removeCue(n[r].cues[e])})),delete n[r]}}const a=t.fragments[t.fragments.length-1];if(0===s.length||!Rb(null==a?void 0:a.programDateTime))return;this.id3Track||(this.id3Track=this.createTrack(this.media));const o=a.programDateTime/1e3-a.start,l=MT();for(let e=0;e<s.length;e++){const t=s[e],i=r[t],a=n[t],u=(null==a?void 0:a.cues)||{};let h=(null==a?void 0:a.durationKnown)||!1;const f=OT(i.startDate,o);let p=PT;const m=i.endDate;if(m)p=OT(m,o),h=!0;else if(i.endOnNext&&!h){const e=s.reduce(((e,t)=>{const n=r[t];return n.class===i.class&&n.id!==t&&n.startDate>i.startDate&&e.push(n),e}),[]).sort(((e,t)=>e.startDate.getTime()-t.startDate.getTime()))[0];e&&(p=OT(e.startDate,o),h=!0)}const g=Object.keys(i.attr);for(let e=0;e<g.length;e++){const n=g[e];if("ID"===(c=n)||"CLASS"===c||"START-DATE"===c||"DURATION"===c||"END-DATE"===c||"END-ON-NEXT"===c)continue;let r=u[n];if(r)h&&!a.durationKnown&&(r.endTime=p);else{let e=i.attr[n];r=new l(f,p,""),$b(n)&&(d=e,e=Uint8Array.from(d.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer),r.value={key:n,data:e},r.type=DT,r.id=t,this.id3Track.addCue(r),u[n]=r}}n[t]={cues:u,dateRange:i,durationKnown:h}}var d,c}}class FT{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=()=>this.timeupdate(),this.hls=e,this.config=e.config,this.registerListeners()}get latency(){return this._latency||0}get maxLatency(){const{config:e,levelDetails:t}=this;return void 0!==e.liveMaxLatencyDuration?e.liveMaxLatencyDuration:t?e.liveMaxLatencyDurationCount*t.targetduration:0}get targetLatency(){const{levelDetails:e}=this;if(null===e)return null;const{holdBack:t,partHoldBack:n,targetduration:i}=e,{liveSyncDuration:r,liveSyncDurationCount:s,lowLatencyMode:a}=this.config,o=this.hls.userConfig;let l=a&&n||t;(o.liveSyncDuration||o.liveSyncDurationCount||0===l)&&(l=void 0!==r?r:s*i);const d=i;return l+Math.min(1*this.stallCount,d)}get liveSyncPosition(){const e=this.estimateLiveEdge(),t=this.targetLatency,n=this.levelDetails;if(null===e||null===t||null===n)return null;const i=n.edge,r=e-t-this.edgeStalled,s=i-n.totalduration,a=i-(this.config.lowLatencyMode&&n.partTarget||n.targetduration);return Math.min(Math.max(s,r),a)}get drift(){const{levelDetails:e}=this;return null===e?1:e.drift}get edgeStalled(){const{levelDetails:e}=this;if(null===e)return 0;const t=3*(this.config.lowLatencyMode&&e.partTarget||e.targetduration);return Math.max(e.age-t,0)}get forwardBufferLength(){const{media:e,levelDetails:t}=this;if(!e||!t)return 0;const n=e.buffered.length;return(n?e.buffered.end(n-1):t.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null}registerListeners(){this.hls.on(Ib.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(Ib.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(Ib.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(Ib.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(Ib.ERROR,this.onError,this)}unregisterListeners(){this.hls.off(Ib.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(Ib.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.off(Ib.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(Ib.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.off(Ib.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)}onManifestLoading(){this.levelDetails=null,this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:t}){this.levelDetails=t,t.advanced&&this.timeupdate(),!t.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)}onError(e,t){var n;t.details===Db.BUFFER_STALLED_ERROR&&(this.stallCount++,null!=(n=this.levelDetails)&&n.live&&Nb.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))}timeupdate(){const{media:e,levelDetails:t}=this;if(!e||!t)return;this.currentTime=e.currentTime;const n=this.computeLatency();if(null===n)return;this._latency=n;const{lowLatencyMode:i,maxLiveSyncPlaybackRate:r}=this.config;if(!i||1===r)return;const s=this.targetLatency;if(null===s)return;const a=n-s,o=a<Math.min(this.maxLatency,s+t.targetduration);if(t.live&&o&&a>.05&&this.forwardBufferLength>1){const t=Math.min(2,Math.max(1,r)),n=Math.round(2/(1+Math.exp(-.75*a-this.edgeStalled))*20)/20;e.playbackRate=Math.min(t,Math.max(1,n))}else 1!==e.playbackRate&&0!==e.playbackRate&&(e.playbackRate=1)}estimateLiveEdge(){const{levelDetails:e}=this;return null===e?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return null===e?null:e-this.currentTime}}const UT=["NONE","TYPE-0","TYPE-1",null];var BT="",$T="YES",VT="v2";class HT{constructor(e,t,n){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=n}addDirectives(e){const t=new self.URL(e);return void 0!==this.msn&&t.searchParams.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href}}class WT{constructor(e){this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.unknownCodecs=void 0,this.audioGroupIds=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.textGroupIds=void 0,this.url=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.unknownCodecs=e.unknownCodecs,this.codecSet=[e.videoCodec,e.audioCodec].filter((e=>e)).join(",").replace(/\.[^.,]+/g,"")}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get attrs(){return this._attrs[this._urlId]}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get uri(){return this.url[this._urlId]||""}get urlId(){return this._urlId}set urlId(e){const t=e%this.url.length;this._urlId!==t&&(this.fragmentError=0,this.loadError=0,this.details=void 0,this._urlId=t)}get audioGroupId(){var e;return null==(e=this.audioGroupIds)?void 0:e[this.urlId]}get textGroupId(){var e;return null==(e=this.textGroupIds)?void 0:e[this.urlId]}addFallback(e){this.url.push(e.url),this._attrs.push(e.attrs)}}function GT(e,t){const n=t.startPTS;if(Rb(n)){let i,r=0;t.sn>e.sn?(r=n-e.start,i=e):(r=e.start-n,i=t),i.duration!==r&&(i.duration=r)}else if(t.sn>e.sn){e.cc===t.cc&&e.minEndPTS?t.start=e.start+(e.minEndPTS-e.start):t.start=e.start+e.duration}else t.start=Math.max(e.start-t.duration,0)}function KT(e,t,n,i,r,s){i-n<=0&&(Nb.warn("Fragment should have a positive duration",t),i=n+t.duration,s=r+t.duration);let a=n,o=i;const l=t.startPTS,d=t.endPTS;if(Rb(l)){const e=Math.abs(l-n);Rb(t.deltaPTS)?t.deltaPTS=Math.max(e,t.deltaPTS):t.deltaPTS=e,a=Math.max(n,l),n=Math.min(n,l),r=Math.min(r,t.startDTS),o=Math.min(i,d),i=Math.max(i,d),s=Math.max(s,t.endDTS)}const c=n-t.start;0!==t.start&&(t.start=n),t.duration=i-t.start,t.startPTS=n,t.maxStartPTS=a,t.startDTS=r,t.endPTS=i,t.minEndPTS=o,t.endDTS=s;const u=t.sn;if(!e||u<e.startSN||u>e.endSN)return 0;let h;const f=u-e.startSN,p=e.fragments;for(p[f]=t,h=f;h>0;h--)GT(p[h],p[h-1]);for(h=f;h<p.length-1;h++)GT(p[h],p[h+1]);return e.fragmentHint&&GT(p[p.length-1],e.fragmentHint),e.PTSKnown=e.alignedSliding=!0,c}function jT(e,t){let n=null;const i=e.fragments;for(let e=i.length-1;e>=0;e--){const t=i[e].initSegment;if(t){n=t;break}}e.fragmentHint&&delete e.fragmentHint.endPTS;let r,s=0;if(function(e,t,n){const i=t.skippedSegments,r=Math.max(e.startSN,t.startSN)-t.startSN,s=(e.fragmentHint?1:0)+(i?t.endSN:Math.min(e.endSN,t.endSN))-t.startSN,a=t.startSN-e.startSN,o=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments,l=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments;for(let e=r;e<=s;e++){const r=l[a+e];let s=o[e];i&&!s&&e<i&&(s=t.fragments[e]=r),r&&s&&n(r,s)}}(e,t,((e,i)=>{e.relurl&&(s=e.cc-i.cc),Rb(e.startPTS)&&Rb(e.endPTS)&&(i.start=i.startPTS=e.startPTS,i.startDTS=e.startDTS,i.maxStartPTS=e.maxStartPTS,i.endPTS=e.endPTS,i.endDTS=e.endDTS,i.minEndPTS=e.minEndPTS,i.duration=e.endPTS-e.startPTS,i.duration&&(r=i),t.PTSKnown=t.alignedSliding=!0),i.elementaryStreams=e.elementaryStreams,i.loader=e.loader,i.stats=e.stats,i.urlId=e.urlId,e.initSegment&&(i.initSegment=e.initSegment,n=e.initSegment)})),n){(t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments).forEach((e=>{var t;e.initSegment&&e.initSegment.relurl!==(null==(t=n)?void 0:t.relurl)||(e.initSegment=n)}))}if(t.skippedSegments)if(t.deltaUpdateFailed=t.fragments.some((e=>!e)),t.deltaUpdateFailed){Nb.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let e=t.skippedSegments;e--;)t.fragments.shift();t.startSN=t.fragments[0].sn,t.startCC=t.fragments[0].cc}else t.canSkipDateRanges&&(t.dateRanges=function(e,t,n){const i=Lb({},e);n&&n.forEach((e=>{delete i[e]}));return Object.keys(t).forEach((e=>{const n=new Vb(t[e].attr,i[e]);n.isValid?i[e]=n:Nb.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${JSON.stringify(t[e].attr)}"`)})),i}(e.dateRanges,t.dateRanges,t.recentlyRemovedDateranges));const a=t.fragments;if(s){Nb.warn("discontinuity sliding from playlist, take drift into account");for(let e=0;e<a.length;e++)a[e].cc+=s}t.skippedSegments&&(t.startCC=t.fragments[0].cc),function(e,t,n){if(e&&t){let i=0;for(let r=0,s=e.length;r<=s;r++){const s=e[r],a=t[r+i];s&&a&&s.index===a.index&&s.fragment.sn===a.fragment.sn?n(s,a):i--}}}(e.partList,t.partList,((e,t)=>{t.elementaryStreams=e.elementaryStreams,t.stats=e.stats})),r?KT(t,r,r.startPTS,r.endPTS,r.startDTS,r.endDTS):qT(e,t),a.length&&(t.totalduration=t.edge-a[0].start),t.driftStartTime=e.driftStartTime,t.driftStart=e.driftStart;const o=t.advancedDateTime;if(t.advanced&&o){const e=t.edge;t.driftStart||(t.driftStartTime=o,t.driftStart=e),t.driftEndTime=o,t.driftEnd=e}else t.driftEndTime=e.driftEndTime,t.driftEnd=e.driftEnd,t.advancedDateTime=e.advancedDateTime}function qT(e,t){const n=t.startSN+t.skippedSegments-e.startSN,i=e.fragments;n<0||n>=i.length||YT(t,i[n].start)}function YT(e,t){if(t){const n=e.fragments;for(let i=e.skippedSegments;i<n.length;i++)n[i].start+=t;e.fragmentHint&&(e.fragmentHint.start+=t)}}function zT(e,t,n){var i;return null!=e&&e.details?XT(null==(i=e.details)?void 0:i.partList,t,n):null}function XT(e,t,n){if(e)for(let i=e.length;i--;){const r=e[i];if(r.index===n&&r.fragment.sn===t)return r}return null}function QT(e){switch(e.details){case Db.FRAG_LOAD_TIMEOUT:case Db.KEY_LOAD_TIMEOUT:case Db.LEVEL_LOAD_TIMEOUT:case Db.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function ZT(e,t){const n=QT(t);return e.default[(n?"timeout":"error")+"Retry"]}function JT(e,t){const n="linear"===e.backoff?1:Math.pow(2,t);return Math.min(n*e.retryDelayMs,e.maxRetryDelayMs)}function e_(e){return kb(kb({},e),{errorRetry:null,timeoutRetry:null})}function t_(e,t,n,i){return!!e&&t<e.maxNumRetry&&(function(e){return 0===e&&!1===navigator.onLine||!!e&&(e<400||e>499)}(i)||!!n)}const n_=function(e,t){let n=0,i=e.length-1,r=null,s=null;for(;n<=i;){r=(n+i)/2|0,s=e[r];const a=t(s);if(a>0)n=r+1;else{if(!(a<0))return s;i=r-1}}return null};function i_(e,t,n=0,i=0){let r=null;if(e?r=t[e.sn-t[0].sn+1]||null:0===n&&0===t[0].start&&(r=t[0]),r&&0===r_(n,i,r))return r;const s=n_(t,r_.bind(null,n,i));return!s||s===e&&r?r:s}function r_(e=0,t=0,n){if(n.start<=e&&n.start+n.duration>e)return 0;const i=Math.min(t,n.duration+(n.deltaPTS?n.deltaPTS:0));return n.start+n.duration-i<=e?1:n.start-i>e&&n.start?-1:0}function s_(e,t,n){const i=1e3*Math.min(t,n.duration+(n.deltaPTS?n.deltaPTS:0));return(n.endProgramDateTime||0)-i>e}var a_=0,o_=2,l_=5,d_=0,c_=1,u_=2;function h_(e,t,n){if(performance.now()-e.lastErrorPerfMs>3e5)return!0;const i=e.details;if(t.details===Db.FRAG_GAP&&i&&t.frag){const e=t.frag.start,n=i_(null,i.fragments,e);if(n&&!n.gap)return!0}if(n&&e.errors.length<n.errors.length){const n=e.errors[e.errors.length-1];if(i&&n.frag&&t.frag&&Math.abs(n.frag.start-t.frag.start)>3*i.targetduration)return!0}return!1}class f_{constructor(e,t){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.log=void 0,this.warn=void 0,this.log=Nb.log.bind(Nb,`${t}:`),this.warn=Nb.warn.bind(Nb,`${t}:`),this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){clearTimeout(this.timer),this.timer=-1}startLoad(){this.canLoad=!0,this.requestScheduled=-1,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,t){const n=null==t?void 0:t.renditionReports;if(n){let i=-1;for(let r=0;r<n.length;r++){const s=n[r];let a;try{a=new self.URL(s.URI,t.url).href}catch(e){Nb.warn(`Could not construct new URL for Rendition Report: ${e}`),a=s.URI||""}if(a===e){i=r;break}a===e.substring(0,a.length)&&(i=r)}if(-1!==i){const e=n[i],r=parseInt(e["LAST-MSN"])||(null==t?void 0:t.lastPartSn);let s=parseInt(e["LAST-PART"])||(null==t?void 0:t.lastPartIndex);if(this.hls.config.lowLatencyMode){const e=Math.min(t.age-t.partTarget,t.targetduration);s>=0&&e>t.partTarget&&(s+=1)}return new HT(r,s>=0?s:void 0,BT)}}}loadPlaylist(e){-1===this.requestScheduled&&(this.requestScheduled=self.performance.now())}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}shouldReloadPlaylist(e){return-1===this.timer&&-1===this.requestScheduled&&this.shouldLoadPlaylist(e)}playlistLoaded(e,t,n){const{details:i,stats:r}=t,s=self.performance.now(),a=r.loading.first?Math.max(0,s-r.loading.first):0;if(i.advancedDateTime=Date.now()-a,i.live||null!=n&&n.live){if(i.reloaded(n),n&&this.log(`live playlist ${e} ${i.advanced?"REFRESHED "+i.lastPartSn+"-"+i.lastPartIndex:i.updated?"UPDATED":"MISSED"}`),n&&i.fragments.length>0&&jT(n,i),!this.canLoad||!i.live)return;let a,o,l;if(i.canBlockReload&&i.endSN&&i.advanced){const e=this.hls.config.lowLatencyMode,r=i.lastPartSn,s=i.endSN,d=i.lastPartIndex,c=r===s;-1!==d?(o=c?s+1:r,l=c?e?0:d:d+1):o=s+1;const u=i.age,h=u+i.ageHeader;let f=Math.min(h-i.partTarget,1.5*i.targetduration);if(f>0){if(n&&f>n.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${n.tuneInGoal} to: ${f} with playlist age: ${i.age}`),f=0;else{const e=Math.floor(f/i.targetduration);if(o+=e,void 0!==l){l+=Math.round(f%i.targetduration/i.partTarget)}this.log(`CDN Tune-in age: ${i.ageHeader}s last advanced ${u.toFixed(2)}s goal: ${f} skip sn ${e} to part ${l}`)}i.tuneInGoal=f}if(a=this.getDeliveryDirectives(i,t.deliveryDirectives,o,l),e||!c)return void this.loadPlaylist(a)}else(i.canBlockReload||i.canSkipUntil)&&(a=this.getDeliveryDirectives(i,t.deliveryDirectives,o,l));const d=this.hls.mainForwardBufferInfo,c=d?d.end-d.len:0,u=function(e,t=1/0){let n=1e3*e.targetduration;if(e.updated){const i=e.fragments,r=4;if(i.length&&n*r>t){const e=1e3*i[i.length-1].duration;e<n&&(n=e)}}else n/=2;return Math.round(n)}(i,1e3*(i.edge-c));i.updated&&s>this.requestScheduled+u&&(this.requestScheduled=r.loading.start),void 0!==o&&i.canBlockReload?this.requestScheduled=r.loading.first+u-(1e3*i.partTarget||1e3):-1===this.requestScheduled||this.requestScheduled+u<s?this.requestScheduled=s:this.requestScheduled-s<=0&&(this.requestScheduled+=u);let h=this.requestScheduled-s;h=Math.max(0,h),this.log(`reload live playlist ${e} in ${Math.round(h)} ms`),this.timer=self.setTimeout((()=>this.loadPlaylist(a)),h)}else this.clearTimer()}getDeliveryDirectives(e,t,n,i){let r=function(e,t){const{canSkipUntil:n,canSkipDateRanges:i,endSN:r}=e;return n&&(void 0!==t?t-r:0)<n?i?VT:$T:BT}(e,n);return null!=t&&t.skip&&e.deltaUpdateFailed&&(n=t.msn,i=t.part,r=BT),new HT(n,i,r)}checkRetry(e){const t=e.details,n=QT(e),i=e.errorAction,{action:r,retryCount:s=0,retryConfig:a}=i||{},o=!!i&&!!a&&(r===l_||!i.resolved&&r===o_);if(o){var l;if(this.requestScheduled=-1,s>=a.maxNumRetry)return!1;if(n&&null!=(l=e.context)&&l.deliveryDirectives)this.warn(`Retrying playlist loading ${s+1}/${a.maxNumRetry} after "${t}" without delivery-directives`),this.loadPlaylist();else{const e=JT(a,s);this.timer=self.setTimeout((()=>this.loadPlaylist()),e),this.warn(`Retrying playlist loading ${s+1}/${a.maxNumRetry} after "${t}" in ${e}ms`)}e.levelRetry=!0,i.resolved=!0}return o}}let p_;class m_ extends f_{constructor(e,t){super(e,"[level-controller]"),this._levels=[],this._firstLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=t,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(Ib.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Ib.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(Ib.LEVEL_LOADED,this.onLevelLoaded,this),e.on(Ib.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(Ib.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(Ib.FRAG_LOADED,this.onFragLoaded,this),e.on(Ib.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(Ib.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Ib.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(Ib.LEVEL_LOADED,this.onLevelLoaded,this),e.off(Ib.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(Ib.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(Ib.FRAG_LOADED,this.onFragLoaded,this),e.off(Ib.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}startLoad(){this._levels.forEach((e=>{e.loadError=0,e.fragmentError=0})),super.startLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[]}onManifestLoading(e,t){this.resetLevels()}onManifestLoaded(e,t){const n=[],i={};let r;t.levels.forEach((e=>{var t;const s=e.attrs;-1!==(null==(t=e.audioCodec)?void 0:t.indexOf("mp4a.40.34"))&&(p_||(p_=/chrome|firefox/i.test(navigator.userAgent)),p_&&(e.audioCodec=void 0));const{AUDIO:a,CODECS:o,"FRAME-RATE":l,"PATHWAY-ID":d,RESOLUTION:c,SUBTITLES:u}=s,h=`${`${d||"."}-`}${e.bitrate}-${c}-${l}-${o}`;r=i[h],r?r.addFallback(e):(r=new WT(e),i[h]=r,n.push(r)),g_(r,"audio",a),g_(r,"text",u)})),this.filterAndSortMediaOptions(n,t)}filterAndSortMediaOptions(e,t){let n=[],i=[],r=!1,s=!1,a=!1,o=e.filter((({audioCodec:e,videoCodec:t,width:n,height:i,unknownCodecs:o})=>(r||(r=!(!n||!i)),s||(s=!!t),a||(a=!!e),!(null!=o&&o.length)&&(!e||nT(e,"audio"))&&(!t||nT(t,"video")))));if((r||s)&&a&&(o=o.filter((({videoCodec:e,width:t,height:n})=>!!e||!(!t||!n)))),0===o.length)return void Promise.resolve().then((()=>{if(this.hls){const e=new Error("no level with compatible codecs found in manifest");this.hls.trigger(Ib.ERROR,{type:Cb.MEDIA_ERROR,details:Db.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,error:e,reason:e.message})}}));t.audioTracks&&(n=t.audioTracks.filter((e=>!e.audioCodec||nT(e.audioCodec,"audio"))),v_(n)),t.subtitles&&(i=t.subtitles,v_(i));const l=o.slice(0);o.sort(((e,t)=>e.attrs["HDCP-LEVEL"]!==t.attrs["HDCP-LEVEL"]?(e.attrs["HDCP-LEVEL"]||"")>(t.attrs["HDCP-LEVEL"]||"")?1:-1:e.bitrate!==t.bitrate?e.bitrate-t.bitrate:e.attrs["FRAME-RATE"]!==t.attrs["FRAME-RATE"]?e.attrs.decimalFloatingPoint("FRAME-RATE")-t.attrs.decimalFloatingPoint("FRAME-RATE"):e.attrs.SCORE!==t.attrs.SCORE?e.attrs.decimalFloatingPoint("SCORE")-t.attrs.decimalFloatingPoint("SCORE"):r&&e.height!==t.height?e.height-t.height:0));let d=l[0];if(this.steering&&(o=this.steering.filterParsedLevels(o),o.length!==l.length))for(let e=0;e<l.length;e++)if(l[e].pathwayId===o[0].pathwayId){d=l[e];break}this._levels=o;for(let e=0;e<o.length;e++)if(o[e]===d){this._firstLevel=e,this.log(`manifest loaded, ${o.length} level(s) found, first bitrate: ${d.bitrate}`);break}const c=a&&!s,u={levels:o,audioTracks:n,subtitleTracks:i,sessionData:t.sessionData,sessionKeys:t.sessionKeys,firstLevel:this._firstLevel,stats:t.stats,audio:a,video:s,altAudio:!c&&n.some((e=>!!e.url))};this.hls.trigger(Ib.MANIFEST_PARSED,u),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}get levels(){return 0===this._levels.length?null:this._levels}get level(){return this.currentLevelIndex}set level(e){const t=this._levels;if(0===t.length)return;if(e<0||e>=t.length){const n=new Error("invalid level idx"),i=e<0;if(this.hls.trigger(Ib.ERROR,{type:Cb.OTHER_ERROR,details:Db.LEVEL_SWITCH_ERROR,level:e,fatal:i,error:n,reason:n.message}),i)return;e=Math.min(e,t.length-1)}const n=this.currentLevelIndex,i=this.currentLevel,r=i?i.attrs["PATHWAY-ID"]:void 0,s=t[e],a=s.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=s,n===e&&s.details&&i&&r===a)return;this.log(`Switching to level ${e}${a?" with Pathway "+a:""} from level ${n}${r?" with Pathway "+r:""}`);const o=Lb({},s,{level:e,maxBitrate:s.maxBitrate,attrs:s.attrs,uri:s.uri,urlId:s.urlId});delete o._attrs,delete o._urlId,this.hls.trigger(Ib.LEVEL_SWITCHING,o);const l=s.details;if(!l||l.live){const e=this.switchParams(s.uri,null==i?void 0:i.details);this.loadPlaylist(e)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(void 0===this._startLevel){const e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel}return this._startLevel}set startLevel(e){this._startLevel=e}onError(e,t){!t.fatal&&t.context&&t.context.type===vT&&t.context.level===this.level&&this.checkRetry(t)}onFragLoaded(e,{frag:t}){if(void 0!==t&&t.type===ET){const e=this._levels[t.level];void 0!==e&&(e.loadError=0)}}onLevelLoaded(e,t){var n;const{level:i,details:r}=t,s=this._levels[i];var a;if(!s)return this.warn(`Invalid level index ${i}`),void(null!=(a=t.deliveryDirectives)&&a.skip&&(r.deltaUpdateFailed=!0));i===this.currentLevelIndex?(0===s.fragmentError&&(s.loadError=0),this.playlistLoaded(i,t,s.details)):null!=(n=t.deliveryDirectives)&&n.skip&&(r.deltaUpdateFailed=!0)}onAudioTrackSwitched(e,t){const n=this.currentLevel;if(!n)return;const i=this.hls.audioTracks[t.id].groupId;if(n.audioGroupIds&&n.audioGroupId!==i){let e=-1;for(let t=0;t<n.audioGroupIds.length;t++)if(n.audioGroupIds[t]===i){e=t;break}-1!==e&&e!==n.urlId&&(n.urlId=e,this.canLoad&&this.startLoad())}}loadPlaylist(e){super.loadPlaylist();const t=this.currentLevelIndex,n=this.currentLevel;if(n&&this.shouldLoadPlaylist(n)){const i=n.urlId;let r=n.uri;if(e)try{r=e.addDirectives(r)}catch(e){this.warn(`Could not construct new URL with HLS Delivery Directives: ${e}`)}const s=n.attrs["PATHWAY-ID"];this.log(`Loading level index ${t}${void 0!==(null==e?void 0:e.msn)?" at sn "+e.msn+" part "+e.part:""} with${s?" Pathway "+s:""} URI ${i+1}/${n.url.length} ${r}`),this.clearTimer(),this.hls.trigger(Ib.LEVEL_LOADING,{url:r,level:t,id:i,deliveryDirectives:e||null})}}get nextLoadLevel(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}removeLevel(e,t){const n=(e,n)=>n!==t,i=this._levels.filter(((i,r)=>r!==e||(i.url.length>1&&void 0!==t?(i.url=i.url.filter(n),i.audioGroupIds&&(i.audioGroupIds=i.audioGroupIds.filter(n)),i.textGroupIds&&(i.textGroupIds=i.textGroupIds.filter(n)),i.urlId=0,!0):(this.steering&&this.steering.removeLevel(i),!1))));this.hls.trigger(Ib.LEVELS_UPDATED,{levels:i})}onLevelsUpdated(e,{levels:t}){t.forEach(((e,t)=>{const{details:n}=e;null!=n&&n.fragments&&n.fragments.forEach((e=>{e.level=t}))})),this._levels=t}}function g_(e,t,n){n&&("audio"===t?(e.audioGroupIds||(e.audioGroupIds=[]),e.audioGroupIds[e.url.length-1]=n):"text"===t&&(e.textGroupIds||(e.textGroupIds=[]),e.textGroupIds[e.url.length-1]=n))}function v_(e){const t={};e.forEach((e=>{const n=e.groupId||"";e.id=t[n]=t[n]||0,t[n]++}))}var y_="NOT_LOADED",b_="APPENDING",E_="PARTIAL",T_="OK";class __{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(Ib.BUFFER_APPENDED,this.onBufferAppended,this),e.on(Ib.FRAG_BUFFERED,this.onFragBuffered,this),e.on(Ib.FRAG_LOADED,this.onFragLoaded,this)}_unregisterListeners(){const{hls:e}=this;e.off(Ib.BUFFER_APPENDED,this.onBufferAppended,this),e.off(Ib.FRAG_BUFFERED,this.onFragBuffered,this),e.off(Ib.FRAG_LOADED,this.onFragLoaded,this)}destroy(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,t){const n=this.activePartLists[t];if(n)for(let t=n.length;t--;){const i=n[t];if(!i)break;const r=i.end;if(i.start<=e&&null!==r&&e<=r)return i}return this.getBufferedFrag(e,t)}getBufferedFrag(e,t){const{fragments:n}=this,i=Object.keys(n);for(let r=i.length;r--;){const s=n[i[r]];if((null==s?void 0:s.body.type)===t&&s.buffered){const t=s.body;if(t.start<=e&&e<=t.end)return t}}return null}detectEvictedFragments(e,t,n,i){this.timeRanges&&(this.timeRanges[e]=t);const r=(null==i?void 0:i.fragment.sn)||-1;Object.keys(this.fragments).forEach((i=>{const s=this.fragments[i];if(!s)return;if(r>=s.body.sn)return;if(!s.buffered&&!s.loaded)return void(s.body.type===n&&this.removeFragment(s.body));const a=s.range[e];a&&a.time.some((e=>{const n=!this.isTimeBuffered(e.startPTS,e.endPTS,t);return n&&this.removeFragment(s.body),n}))}))}detectPartialFragments(e){const t=this.timeRanges,{frag:n,part:i}=e;if(!t||"initSegment"===n.sn)return;const r=S_(n),s=this.fragments[r];if(!s||s.buffered&&n.gap)return;const a=!n.relurl;if(Object.keys(t).forEach((e=>{const r=n.elementaryStreams[e];if(!r)return;const o=t[e],l=a||!0===r.partial;s.range[e]=this.getBufferedTimes(n,i,l,o)})),s.loaded=null,Object.keys(s.range).length){s.buffered=!0;(s.body.endList=n.endList||s.body.endList)&&(this.endListFragments[s.body.type]=s),A_(s)||this.removeParts(n.sn-1,n.type)}else this.removeFragment(s.body)}removeParts(e,t){const n=this.activePartLists[t];n&&(this.activePartLists[t]=n.filter((t=>t.fragment.sn>=e)))}fragBuffered(e,t){const n=S_(e);let i=this.fragments[n];!i&&t&&(i=this.fragments[n]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),i&&(i.loaded=null,i.buffered=!0)}getBufferedTimes(e,t,n,i){const r={time:[],partial:n},s=e.start,a=e.end,o=e.minEndPTS||a,l=e.maxStartPTS||s;for(let e=0;e<i.length;e++){const t=i.start(e)-this.bufferPadding,n=i.end(e)+this.bufferPadding;if(l>=t&&o<=n){r.time.push({startPTS:Math.max(s,i.start(e)),endPTS:Math.min(a,i.end(e))});break}if(s<n&&a>t)r.partial=!0,r.time.push({startPTS:Math.max(s,i.start(e)),endPTS:Math.min(a,i.end(e))});else if(a<=t)break}return r}getPartialFragment(e){let t,n,i,r=null,s=0;const{bufferPadding:a,fragments:o}=this;return Object.keys(o).forEach((l=>{const d=o[l];d&&A_(d)&&(n=d.body.start-a,i=d.body.end+a,e>=n&&e<=i&&(t=Math.min(e-n,i-e),s<=t&&(r=d.body,s=t)))})),r}isEndListAppended(e){const t=this.endListFragments[e];return void 0!==t&&(t.buffered||A_(t))}getState(e){const t=S_(e),n=this.fragments[t];return n?n.buffered?A_(n)?E_:T_:b_:y_}isTimeBuffered(e,t,n){let i,r;for(let s=0;s<n.length;s++){if(i=n.start(s)-this.bufferPadding,r=n.end(s)+this.bufferPadding,e>=i&&t<=r)return!0;if(t<=i)return!1}return!1}onFragLoaded(e,t){const{frag:n,part:i}=t;if("initSegment"===n.sn||n.bitrateTest)return;const r=i?null:t,s=S_(n);this.fragments[s]={body:n,appendedPTS:null,loaded:r,buffered:!1,range:Object.create(null)}}onBufferAppended(e,t){const{frag:n,part:i,timeRanges:r}=t;if("initSegment"===n.sn)return;const s=n.type;if(i){let e=this.activePartLists[s];e||(this.activePartLists[s]=e=[]),e.push(i)}this.timeRanges=r,Object.keys(r).forEach((e=>{const t=r[e];this.detectEvictedFragments(e,t,s,i)}))}onFragBuffered(e,t){this.detectPartialFragments(t)}hasFragment(e){const t=S_(e);return!!this.fragments[t]}hasParts(e){var t;return!(null==(t=this.activePartLists[e])||!t.length)}removeFragmentsInRange(e,t,n,i,r){i&&!this.hasGaps||Object.keys(this.fragments).forEach((s=>{const a=this.fragments[s];if(!a)return;const o=a.body;o.type!==n||i&&!o.gap||o.start<t&&o.end>e&&(a.buffered||r)&&this.removeFragment(o)}))}removeFragment(e){const t=S_(e);e.stats.loaded=0,e.clearElementaryStreamInfo();const n=this.activePartLists[e.type];if(n){const t=e.sn;this.activePartLists[e.type]=n.filter((e=>e.fragment.sn!==t))}delete this.fragments[t],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1}}function A_(e){var t,n,i;return e.buffered&&(e.body.gap||(null==(t=e.range.video)?void 0:t.partial)||(null==(n=e.range.audio)?void 0:n.partial)||(null==(i=e.range.audiovideo)?void 0:i.partial))}function S_(e){return`${e.type}_${e.level}_${e.urlId}_${e.sn}`}const k_=Math.pow(2,17);class w_{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,t){const n=e.url;if(!n)return Promise.reject(new I_({type:Cb.NETWORK_ERROR,details:Db.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error("Fragment does not have a "+(n?"part list":"url")),networkDetails:null}));this.abort();const i=this.config,r=i.fLoader,s=i.loader;return new Promise(((a,o)=>{if(this.loader&&this.loader.destroy(),e.gap){if(e.tagList.some((e=>"GAP"===e[0])))return void o(R_(e));e.gap=!1}const l=this.loader=e.loader=r?new r(i):new s(i),d=L_(e),c=e_(i.fragLoadPolicy.default),u={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:"initSegment"===e.sn?1/0:k_};e.stats=l.stats,l.load(d,u,{onSuccess:(t,n,i,r)=>{this.resetLoader(e,l);let s=t.data;i.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(s.slice(0,16)),s=s.slice(16)),a({frag:e,part:null,payload:s,networkDetails:r})},onError:(t,i,r,s)=>{this.resetLoader(e,l),o(new I_({type:Cb.NETWORK_ERROR,details:Db.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:kb({url:n,data:void 0},t),error:new Error(`HTTP Error ${t.code} ${t.text}`),networkDetails:r,stats:s}))},onAbort:(t,n,i)=>{this.resetLoader(e,l),o(new I_({type:Cb.NETWORK_ERROR,details:Db.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:i,stats:t}))},onTimeout:(t,n,i)=>{this.resetLoader(e,l),o(new I_({type:Cb.NETWORK_ERROR,details:Db.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${u.timeout}ms`),networkDetails:i,stats:t}))},onProgress:(n,i,r,s)=>{t&&t({frag:e,part:null,payload:r,networkDetails:s})}})}))}loadPart(e,t,n){this.abort();const i=this.config,r=i.fLoader,s=i.loader;return new Promise(((a,o)=>{if(this.loader&&this.loader.destroy(),e.gap||t.gap)return void o(R_(e,t));const l=this.loader=e.loader=r?new r(i):new s(i),d=L_(e,t),c=e_(i.fragLoadPolicy.default),u={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:k_};t.stats=l.stats,l.load(d,u,{onSuccess:(i,r,s,o)=>{this.resetLoader(e,l),this.updateStatsFromPart(e,t);const d={frag:e,part:t,payload:i.data,networkDetails:o};n(d),a(d)},onError:(n,i,r,s)=>{this.resetLoader(e,l),o(new I_({type:Cb.NETWORK_ERROR,details:Db.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:kb({url:d.url,data:void 0},n),error:new Error(`HTTP Error ${n.code} ${n.text}`),networkDetails:r,stats:s}))},onAbort:(n,i,r)=>{e.stats.aborted=t.stats.aborted,this.resetLoader(e,l),o(new I_({type:Cb.NETWORK_ERROR,details:Db.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,error:new Error("Aborted"),networkDetails:r,stats:n}))},onTimeout:(n,i,r)=>{this.resetLoader(e,l),o(new I_({type:Cb.NETWORK_ERROR,details:Db.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,error:new Error(`Timeout after ${u.timeout}ms`),networkDetails:r,stats:n}))}})}))}updateStatsFromPart(e,t){const n=e.stats,i=t.stats,r=i.total;if(n.loaded+=i.loaded,r){const i=Math.round(e.duration/t.duration),s=Math.min(Math.round(n.loaded/r),i),a=(i-s)*Math.round(n.loaded/s);n.total=n.loaded+a}else n.total=Math.max(n.loaded,n.total);const s=n.loading,a=i.loading;s.start?s.first+=a.first-a.start:(s.start=a.start,s.first=a.first),s.end=a.end}resetLoader(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()}}function L_(e,t=null){const n=t||e,i={frag:e,part:t,responseType:"arraybuffer",url:n.url,headers:{},rangeStart:0,rangeEnd:0},r=n.byteRangeStartOffset,s=n.byteRangeEndOffset;if(Rb(r)&&Rb(s)){var a;let t=r,n=s;if("initSegment"===e.sn&&"AES-128"===(null==(a=e.decryptdata)?void 0:a.method)){const e=s-r;e%16&&(n=s+(16-e%16)),0!==r&&(i.resetIV=!0,t=r-16)}i.rangeStart=t,i.rangeEnd=n}return i}function R_(e,t){const n=new Error(`GAP ${e.gap?"tag":"attribute"} found`),i={type:Cb.MEDIA_ERROR,details:Db.FRAG_GAP,fatal:!1,frag:e,error:n,networkDetails:null};return t&&(i.part=t),(t||e).stats.aborted=!0,new I_(i)}class I_ extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class C_{constructor(e){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const t in this.keyUriToKeyInfo){const n=this.keyUriToKeyInfo[t].loader;if(n){if(e&&e!==n.context.frag.type)return;n.abort()}}}detach(){for(const e in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[e];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[e].loader;t&&t.destroy()}this.keyUriToKeyInfo={}}createKeyLoadError(e,t=Db.KEY_LOAD_ERROR,n,i,r){return new I_({type:Cb.NETWORK_ERROR,details:t,fatal:!1,frag:e,response:r,error:n,networkDetails:i})}loadClear(e,t){if(this.emeController&&this.config.emeEnabled){const{sn:n,cc:i}=e;for(let e=0;e<t.length;e++){const r=t[e];if(i<=r.cc&&("initSegment"===n||"initSegment"===r.sn||n<r.sn)){this.emeController.selectKeySystemFormat(r).then((e=>{r.setKeyFormat(e)}));break}}}}load(e){return!e.decryptdata&&e.encrypted&&this.emeController?this.emeController.selectKeySystemFormat(e).then((t=>this.loadInternal(e,t))):this.loadInternal(e)}loadInternal(e,t){var n,i;t&&e.setKeyFormat(t);const r=e.decryptdata;if(!r){const n=new Error(t?`Expected frag.decryptdata to be defined after setting format ${t}`:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(e,Db.KEY_LOAD_ERROR,n))}const s=r.uri;if(!s)return Promise.reject(this.createKeyLoadError(e,Db.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${s}"`)));let a=this.keyUriToKeyInfo[s];if(null!=(n=a)&&n.decryptdata.key)return r.key=a.decryptdata.key,Promise.resolve({frag:e,keyInfo:a});var o;if(null!=(i=a)&&i.keyLoadPromise)switch(null==(o=a.mediaKeySessionContext)?void 0:o.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return a.keyLoadPromise.then((t=>(r.key=t.keyInfo.decryptdata.key,{frag:e,keyInfo:a})))}switch(a=this.keyUriToKeyInfo[s]={decryptdata:r,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},r.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return"identity"===r.keyFormat?this.loadKeyHTTP(a,e):this.loadKeyEME(a,e);case"AES-128":return this.loadKeyHTTP(a,e);default:return Promise.reject(this.createKeyLoadError(e,Db.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${r.method}"`)))}}loadKeyEME(e,t){const n={frag:t,keyInfo:e};if(this.emeController&&this.config.emeEnabled){const t=this.emeController.loadKey(n);if(t)return(e.keyLoadPromise=t.then((t=>(e.mediaKeySessionContext=t,n)))).catch((t=>{throw e.keyLoadPromise=null,t}))}return Promise.resolve(n)}loadKeyHTTP(e,t){const n=this.config,i=new(0,n.loader)(n);return t.keyLoader=e.loader=i,e.keyLoadPromise=new Promise(((r,s)=>{const a={keyInfo:e,frag:t,responseType:"arraybuffer",url:e.decryptdata.uri},o=n.keyLoadPolicy.default,l={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(e,t,n,i)=>{const{frag:a,keyInfo:o,url:l}=n;if(!a.decryptdata||o!==this.keyUriToKeyInfo[l])return s(this.createKeyLoadError(a,Db.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),i));o.decryptdata.key=a.decryptdata.key=new Uint8Array(e.data),a.keyLoader=null,o.loader=null,r({frag:a,keyInfo:o})},onError:(e,n,i,r)=>{this.resetLoader(n),s(this.createKeyLoadError(t,Db.KEY_LOAD_ERROR,new Error(`HTTP Error ${e.code} loading key ${e.text}`),i,kb({url:a.url,data:void 0},e)))},onTimeout:(e,n,i)=>{this.resetLoader(n),s(this.createKeyLoadError(t,Db.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),i))},onAbort:(e,n,i)=>{this.resetLoader(n),s(this.createKeyLoadError(t,Db.INTERNAL_ABORTED,new Error("key loading aborted"),i))}};i.load(a,l,d)}))}resetLoader(e){const{frag:t,keyInfo:n,url:i}=e,r=n.loader;t.keyLoader===r&&(t.keyLoader=null,n.loader=null),delete this.keyUriToKeyInfo[i],r&&r.destroy()}}class D_{constructor(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return!this._tickInterval&&(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)}clearNextTick(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)}tick(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}const x_={length:0,start:()=>0,end:()=>0};class M_{static isBuffered(e,t){try{if(e){const n=M_.getBuffered(e);for(let e=0;e<n.length;e++)if(t>=n.start(e)&&t<=n.end(e))return!0}}catch(e){}return!1}static bufferInfo(e,t,n){try{if(e){const i=M_.getBuffered(e),r=[];let s;for(s=0;s<i.length;s++)r.push({start:i.start(s),end:i.end(s)});return this.bufferedInfo(r,t,n)}}catch(e){}return{len:0,start:t,end:t,nextStart:void 0}}static bufferedInfo(e,t,n){t=Math.max(0,t),e.sort((function(e,t){const n=e.start-t.start;return n||t.end-e.end}));let i=[];if(n)for(let t=0;t<e.length;t++){const r=i.length;if(r){const s=i[r-1].end;e[t].start-s<n?e[t].end>s&&(i[r-1].end=e[t].end):i.push(e[t])}else i.push(e[t])}else i=e;let r,s=0,a=t,o=t;for(let e=0;e<i.length;e++){const l=i[e].start,d=i[e].end;if(t+n>=l&&t<d)a=l,o=d,s=o-t;else if(t+n<l){r=l;break}}return{len:s,start:a||0,end:o||0,nextStart:r}}static getBuffered(e){try{return e.buffered}catch(e){return Nb.log("failed to get media.buffered",e),x_}}}class P_{constructor(e,t,n,i=0,r=-1,s=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=e,this.sn=t,this.id=n,this.size=i,this.part=r,this.partial=s}}function O_(e,t){let n=null;for(let i=0,r=e.length;i<r;i++){const r=e[i];if(r&&r.cc===t){n=r;break}}return n}function N_(e,t){if(e){const n=e.start+t;e.start=e.startPTS=n,e.endPTS=n+e.duration}}function F_(e,t){const n=t.fragments;for(let t=0,i=n.length;t<i;t++)N_(n[t],e);t.fragmentHint&&N_(t.fragmentHint,e),t.alignedSliding=!0}function U_(e,t,n){t&&(!function(e,t,n){if(function(e,t,n){return!(!t.details||!(n.endCC>n.startCC||e&&e.cc<n.startCC))}(e,n,t)){const e=function(e,t,n=0){const i=e.fragments,r=t.fragments;if(!r.length||!i.length)return void Nb.log("No fragments to align");const s=O_(i,r[0].cc);if(s&&(!s||s.startPTS))return s;Nb.log("No frag in previous level to align on")}(n.details,t);e&&Rb(e.start)&&(Nb.log(`Adjusting PTS using last level due to CC increase within current level ${t.url}`),F_(e.start,t))}}(e,n,t),!n.alignedSliding&&t.details&&function(e,t){if(!t.fragments.length||!e.hasProgramDateTime||!t.hasProgramDateTime)return;const n=t.fragments[0].programDateTime,i=e.fragments[0].programDateTime,r=(i-n)/1e3+t.fragments[0].start;r&&Rb(r)&&(Nb.log(`Adjusting PTS using programDateTime delta ${i-n}ms, sliding:${r.toFixed(3)} ${e.url} `),F_(r,e))}(n,t.details),n.alignedSliding||!t.details||n.skippedSegments||qT(t.details,n))}function B_(e,t){if(!e.hasProgramDateTime||!t.hasProgramDateTime)return;const n=e.fragments,i=t.fragments;if(!n.length||!i.length)return;const r=i[Math.round(i.length/2)-1],s=O_(n,r.cc)||n[Math.round(n.length/2)-1],a=r.programDateTime,o=s.programDateTime;if(null===a||null===o)return;F_((o-a)/1e3-(s.start-r.start),e)}class $_{constructor(e,t){this.subtle=void 0,this.aesIV=void 0,this.subtle=e,this.aesIV=t}decrypt(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)}}class V_{constructor(e,t){this.subtle=void 0,this.key=void 0,this.subtle=e,this.key=t}expandKey(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])}}class H_{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const t=new DataView(e),n=new Uint32Array(4);for(let e=0;e<4;e++)n[e]=t.getUint32(4*e);return n}initTable(){const e=this.sBox,t=this.invSBox,n=this.subMix,i=n[0],r=n[1],s=n[2],a=n[3],o=this.invSubMix,l=o[0],d=o[1],c=o[2],u=o[3],h=new Uint32Array(256);let f=0,p=0,m=0;for(m=0;m<256;m++)h[m]=m<128?m<<1:m<<1^283;for(m=0;m<256;m++){let n=p^p<<1^p<<2^p<<3^p<<4;n=n>>>8^255&n^99,e[f]=n,t[n]=f;const o=h[f],m=h[o],g=h[m];let v=257*h[n]^16843008*n;i[f]=v<<24|v>>>8,r[f]=v<<16|v>>>16,s[f]=v<<8|v>>>24,a[f]=v,v=16843009*g^65537*m^257*o^16843008*f,l[n]=v<<24|v>>>8,d[n]=v<<16|v>>>16,c[n]=v<<8|v>>>24,u[n]=v,f?(f=o^h[h[h[g^o]]],p^=h[h[p]]):f=p=1}}expandKey(e){const t=this.uint8ArrayToUint32Array_(e);let n=!0,i=0;for(;i<t.length&&n;)n=t[i]===this.key[i],i++;if(n)return;this.key=t;const r=this.keySize=t.length;if(4!==r&&6!==r&&8!==r)throw new Error("Invalid aes key size="+r);const s=this.ksRows=4*(r+6+1);let a,o;const l=this.keySchedule=new Uint32Array(s),d=this.invKeySchedule=new Uint32Array(s),c=this.sBox,u=this.rcon,h=this.invSubMix,f=h[0],p=h[1],m=h[2],g=h[3];let v,y;for(a=0;a<s;a++)a<r?v=l[a]=t[a]:(y=v,a%r==0?(y=y<<8|y>>>24,y=c[y>>>24]<<24|c[y>>>16&255]<<16|c[y>>>8&255]<<8|c[255&y],y^=u[a/r|0]<<24):r>6&&a%r==4&&(y=c[y>>>24]<<24|c[y>>>16&255]<<16|c[y>>>8&255]<<8|c[255&y]),l[a]=v=(l[a-r]^y)>>>0);for(o=0;o<s;o++)a=s-o,y=3&o?l[a]:l[a-4],d[o]=o<4||a<=4?y:f[c[y>>>24]]^p[c[y>>>16&255]]^m[c[y>>>8&255]]^g[c[255&y]],d[o]=d[o]>>>0}networkToHostOrderSwap(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24}decrypt(e,t,n){const i=this.keySize+6,r=this.invKeySchedule,s=this.invSBox,a=this.invSubMix,o=a[0],l=a[1],d=a[2],c=a[3],u=this.uint8ArrayToUint32Array_(n);let h=u[0],f=u[1],p=u[2],m=u[3];const g=new Int32Array(e),v=new Int32Array(g.length);let y,b,E,T,_,A,S,k,w,L,R,I,C,D;const x=this.networkToHostOrderSwap;for(;t<g.length;){for(w=x(g[t]),L=x(g[t+1]),R=x(g[t+2]),I=x(g[t+3]),_=w^r[0],A=I^r[1],S=R^r[2],k=L^r[3],C=4,D=1;D<i;D++)y=o[_>>>24]^l[A>>16&255]^d[S>>8&255]^c[255&k]^r[C],b=o[A>>>24]^l[S>>16&255]^d[k>>8&255]^c[255&_]^r[C+1],E=o[S>>>24]^l[k>>16&255]^d[_>>8&255]^c[255&A]^r[C+2],T=o[k>>>24]^l[_>>16&255]^d[A>>8&255]^c[255&S]^r[C+3],_=y,A=b,S=E,k=T,C+=4;y=s[_>>>24]<<24^s[A>>16&255]<<16^s[S>>8&255]<<8^s[255&k]^r[C],b=s[A>>>24]<<24^s[S>>16&255]<<16^s[k>>8&255]<<8^s[255&_]^r[C+1],E=s[S>>>24]<<24^s[k>>16&255]<<16^s[_>>8&255]<<8^s[255&A]^r[C+2],T=s[k>>>24]<<24^s[_>>16&255]<<16^s[A>>8&255]<<8^s[255&S]^r[C+3],v[t]=x(y^h),v[t+1]=x(T^f),v[t+2]=x(E^p),v[t+3]=x(b^m),h=w,f=L,p=R,m=I,t+=4}return v.buffer}}class W_{constructor(e,{removePKCS7Padding:t=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=e.enableSoftwareAES,this.removePKCS7Padding=t,t)try{const e=self.crypto;e&&(this.subtle=e.subtle||e.webkitSubtle)}catch(e){}null===this.subtle&&(this.useSoftware=!0)}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:t}=this;if(!e||t)return this.reset(),null;const n=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?function(e){const t=e.byteLength,n=t&&new DataView(e.buffer).getUint8(t-1);return n?dE(e,0,t-n):e}(n):n}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,t,n){return this.useSoftware?new Promise(((i,r)=>{this.softwareDecrypt(new Uint8Array(e),t,n);const s=this.flush();s?i(s.buffer):r(new Error("[softwareDecrypt] Failed to decrypt data"))})):this.webCryptoDecrypt(new Uint8Array(e),t,n)}softwareDecrypt(e,t,n){const{currentIV:i,currentResult:r,remainderData:s}=this;this.logOnce("JS AES decrypt"),s&&(e=BE(s,e),this.remainderData=null);const a=this.getValidChunk(e);if(!a.length)return null;i&&(n=i);let o=this.softwareDecrypter;o||(o=this.softwareDecrypter=new H_),o.expandKey(t);const l=r;return this.currentResult=o.decrypt(a.buffer,0,n),this.currentIV=dE(a,-16).buffer,l||null}webCryptoDecrypt(e,t,n){const i=this.subtle;return this.key===t&&this.fastAesKey||(this.key=t,this.fastAesKey=new V_(i,t)),this.fastAesKey.expandKey().then((t=>{if(!i)return Promise.reject(new Error("web crypto not initialized"));this.logOnce("WebCrypto AES decrypt");return new $_(i,new Uint8Array(n)).decrypt(e.buffer,t)})).catch((i=>(Nb.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${i.name}: ${i.message}`),this.onWebCryptoError(e,t,n))))}onWebCryptoError(e,t,n){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,t,n);const i=this.flush();if(i)return i.buffer;throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")}getValidChunk(e){let t=e;const n=e.length-e.length%16;return n!==e.length&&(t=dE(e,0,n),this.remainderData=dE(e,n)),t}logOnce(e){this.logEnabled&&(Nb.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const G_=function(e){let t="";const n=e.length;for(let i=0;i<n;i++)t+=`[${e.start(i).toFixed(3)}-${e.end(i).toFixed(3)}]`;return t},K_="STOPPED",j_="IDLE",q_="KEY_LOADING",Y_="FRAG_LOADING",z_="FRAG_LOADING_WAITING_RETRY",X_="WAITING_TRACK",Q_="PARSING",Z_="PARSED",J_="ENDED",eA="ERROR",tA="WAITING_INIT_PTS",nA="WAITING_LEVEL";class iA extends D_{constructor(e,t,n,i,r){super(),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=K_,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.loadedmetadata=!1,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.onvseeking=null,this.onvended=null,this.logPrefix="",this.log=void 0,this.warn=void 0,this.playlistType=r,this.logPrefix=i,this.log=Nb.log.bind(Nb,`${i}:`),this.warn=Nb.warn.bind(Nb,`${i}:`),this.hls=e,this.fragmentLoader=new w_(e.config),this.keyLoader=n,this.fragmentTracker=t,this.config=e.config,this.decrypter=new W_(e.config),e.on(Ib.MANIFEST_LOADED,this.onManifestLoaded,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;null!=e&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=K_}_streamEnded(e,t){if(t.live||e.nextStart||!e.end||!this.media)return!1;const n=t.partList;if(null!=n&&n.length){const e=n[n.length-1];return M_.isBuffered(this.media,e.start+e.duration/2)}const i=t.fragments[t.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(i)}getLevelDetails(){var e;if(this.levels&&null!==this.levelLastLoaded)return null==(e=this.levels[this.levelLastLoaded])?void 0:e.details}onMediaAttached(e,t){const n=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),n.addEventListener("seeking",this.onvseeking),n.addEventListener("ended",this.onvended);const i=this.config;this.levels&&i.autoStartLoad&&this.state===K_&&this.startLoad(i.startPosition)}onMediaDetaching(){const e=this.media;null!=e&&e.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&this.onvseeking&&this.onvended&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}onMediaSeeking(){const{config:e,fragCurrent:t,media:n,mediaBuffer:i,state:r}=this,s=n?n.currentTime:0,a=M_.bufferInfo(i||n,s,e.maxBufferHole);if(this.log(`media seeking to ${Rb(s)?s.toFixed(3):s}, state: ${r}`),this.state===J_)this.resetLoadingState();else if(t){const n=e.maxFragLookUpTolerance,i=t.start-n,r=t.start+t.duration+n;if(!a.len||r<a.start||i>a.end){const e=s>r;(s<i||e)&&(e&&t.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),t.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}n&&(this.fragmentTracker.removeFragmentsInRange(s,1/0,this.playlistType,!0),this.lastCurrentTime=s),this.loadedmetadata||a.len||(this.nextLoadPosition=this.startPosition=s),this.tickImmediate()}onMediaEnded(){this.startPosition=this.lastCurrentTime=0}onManifestLoaded(e,t){this.startTimeOffset=t.startTimeOffset,this.initPTS=[]}onHandlerDestroying(){this.stopLoad(),super.onHandlerDestroying()}onHandlerDestroyed(){this.state=K_,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,t,n){this._loadFragForPlayback(e,t,n)}_loadFragForPlayback(e,t,n){this._doFragLoad(e,t,n,(t=>{if(this.fragContextChanged(e))return this.warn(`Fragment ${e.sn}${t.part?" p: "+t.part.index:""} of level ${e.level} was dropped during download.`),void this.fragmentTracker.removeFragment(e);e.stats.chunkCount++,this._handleFragmentLoadProgress(t)})).then((t=>{if(!t)return;const n=this.state;this.fragContextChanged(e)?(n===Y_||!this.fragCurrent&&n===Q_)&&(this.fragmentTracker.removeFragment(e),this.state=j_):("payload"in t&&(this.log(`Loaded fragment ${e.sn} of level ${e.level}`),this.hls.trigger(Ib.FRAG_LOADED,t)),this._handleFragmentLoadComplete(t))})).catch((t=>{this.state!==K_&&this.state!==eA&&(this.warn(t),this.resetFragmentLoading(e))}))}clearTrackerIfNeeded(e){var t;const{fragmentTracker:n}=this;if(n.getState(e)===b_){const t=e.type,i=this.getFwdBufferInfo(this.mediaBuffer,t),r=Math.max(e.duration,i?i.len:this.config.maxBufferLength);this.reduceMaxBufferLength(r)&&n.removeFragment(e)}else 0===(null==(t=this.mediaBuffer)?void 0:t.buffered.length)?n.removeAllFragments():n.hasParts(e.type)&&(n.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),n.getState(e)===E_&&n.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const t=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:t,part:null,stats:t.stats,id:t.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}flushMainBuffer(e,t,n=null){if(!(e-t))return;const i={startOffset:e,endOffset:t,type:n};this.hls.trigger(Ib.BUFFER_FLUSHING,i)}_loadInitSegment(e,t){this._doFragLoad(e,t).then((t=>{if(!t||this.fragContextChanged(e)||!this.levels)throw new Error("init load aborted");return t})).then((t=>{const{hls:n}=this,{payload:i}=t,r=e.decryptdata;if(i&&i.byteLength>0&&r&&r.key&&r.iv&&"AES-128"===r.method){const s=self.performance.now();return this.decrypter.decrypt(new Uint8Array(i),r.key.buffer,r.iv.buffer).catch((t=>{throw n.trigger(Ib.ERROR,{type:Cb.MEDIA_ERROR,details:Db.FRAG_DECRYPT_ERROR,fatal:!1,error:t,reason:t.message,frag:e}),t})).then((i=>{const r=self.performance.now();return n.trigger(Ib.FRAG_DECRYPTED,{frag:e,payload:i,stats:{tstart:s,tdecrypt:r}}),t.payload=i,t}))}return t})).then((n=>{const{fragCurrent:i,hls:r,levels:s}=this;if(!s)throw new Error("init load aborted, missing levels");const a=e.stats;this.state=j_,t.fragmentError=0,e.data=new Uint8Array(n.payload),a.parsing.start=a.buffering.start=self.performance.now(),a.parsing.end=a.buffering.end=self.performance.now(),n.frag===i&&r.trigger(Ib.FRAG_BUFFERED,{stats:a,frag:i,part:null,id:e.type}),this.tick()})).catch((t=>{this.state!==K_&&this.state!==eA&&(this.warn(t),this.resetFragmentLoading(e))}))}fragContextChanged(e){const{fragCurrent:t}=this;return!e||!t||e.level!==t.level||e.sn!==t.sn||e.urlId!==t.urlId}fragBufferedComplete(e,t){var n,i,r,s;const a=this.mediaBuffer?this.mediaBuffer:this.media;this.log(`Buffered ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.playlistType===ET?"level":"track"} ${e.level} (frag:[${(null!=(n=e.startPTS)?n:NaN).toFixed(3)}-${(null!=(i=e.endPTS)?i:NaN).toFixed(3)}] > buffer:${a?G_(M_.getBuffered(a)):"(detached)"})`),this.state=j_,a&&(!this.loadedmetadata&&e.type==ET&&a.buffered.length&&(null==(r=this.fragCurrent)?void 0:r.sn)===(null==(s=this.fragPrevious)?void 0:s.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())}seekToStartPos(){}_handleFragmentLoadComplete(e){const{transmuxer:t}=this;if(!t)return;const{frag:n,part:i,partsLoaded:r}=e,s=!r||0===r.length||r.some((e=>!e)),a=new P_(n.level,n.sn,n.stats.chunkCount+1,0,i?i.index:-1,!s);t.flush(a)}_handleFragmentLoadProgress(e){}_doFragLoad(e,t,n=null,i){var r;const s=null==t?void 0:t.details;if(!this.levels||!s)throw new Error(`frag load aborted, missing level${s?"":" detail"}s`);let a=null;if(!e.encrypted||null!=(r=e.decryptdata)&&r.key?!e.encrypted&&s.encryptedFragments.length&&this.keyLoader.loadClear(e,s.encryptedFragments):(this.log(`Loading key for ${e.sn} of [${s.startSN}-${s.endSN}], ${"[stream-controller]"===this.logPrefix?"level":"track"} ${e.level}`),this.state=q_,this.fragCurrent=e,a=this.keyLoader.load(e).then((e=>{if(!this.fragContextChanged(e.frag))return this.hls.trigger(Ib.KEY_LOADED,e),this.state===q_&&(this.state=j_),e})),this.hls.trigger(Ib.KEY_LOADING,{frag:e}),null===this.fragCurrent&&(a=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))),n=Math.max(e.start,n||0),this.config.lowLatencyMode&&"initSegment"!==e.sn){const r=s.partList;if(r&&i){n>e.end&&s.fragmentHint&&(e=s.fragmentHint);const o=this.getNextPart(r,e,n);if(o>-1){const l=r[o];let d;return this.log(`Loading part sn: ${e.sn} p: ${l.index} cc: ${e.cc} of playlist [${s.startSN}-${s.endSN}] parts [0-${o}-${r.length-1}] ${"[stream-controller]"===this.logPrefix?"level":"track"}: ${e.level}, target: ${parseFloat(n.toFixed(3))}`),this.nextLoadPosition=l.start+l.duration,this.state=Y_,d=a?a.then((n=>!n||this.fragContextChanged(n.frag)?null:this.doFragPartsLoad(e,l,t,i))).catch((e=>this.handleFragLoadError(e))):this.doFragPartsLoad(e,l,t,i).catch((e=>this.handleFragLoadError(e))),this.hls.trigger(Ib.FRAG_LOADING,{frag:e,part:l,targetBufferTime:n}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):d}if(!e.url||this.loadedEndOfParts(r,n))return Promise.resolve(null)}}this.log(`Loading fragment ${e.sn} cc: ${e.cc} ${s?"of ["+s.startSN+"-"+s.endSN+"] ":""}${"[stream-controller]"===this.logPrefix?"level":"track"}: ${e.level}, target: ${parseFloat(n.toFixed(3))}`),Rb(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=Y_;const o=this.config.progressive;let l;return l=o&&a?a.then((t=>!t||this.fragContextChanged(null==t?void 0:t.frag)?null:this.fragmentLoader.load(e,i))).catch((e=>this.handleFragLoadError(e))):Promise.all([this.fragmentLoader.load(e,o?i:void 0),a]).then((([e])=>(!o&&e&&i&&i(e),e))).catch((e=>this.handleFragLoadError(e))),this.hls.trigger(Ib.FRAG_LOADING,{frag:e,targetBufferTime:n}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):l}doFragPartsLoad(e,t,n,i){return new Promise(((r,s)=>{var a;const o=[],l=null==(a=n.details)?void 0:a.partList,d=t=>{this.fragmentLoader.loadPart(e,t,i).then((i=>{o[t.index]=i;const s=i.part;this.hls.trigger(Ib.FRAG_LOADED,i);const a=zT(n,e.sn,t.index+1)||XT(l,e.sn,t.index+1);if(!a)return r({frag:e,part:s,partsLoaded:o});d(a)})).catch(s)};d(t)}))}handleFragLoadError(e){if("data"in e){const t=e.data;e.data&&t.details===Db.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):this.hls.trigger(Ib.ERROR,t)}else this.hls.trigger(Ib.ERROR,{type:Cb.OTHER_ERROR,details:Db.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const t=this.getCurrentContext(e);if(!t||this.state!==Q_)return void(this.fragCurrent||this.state===K_||this.state===eA||(this.state=j_));const{frag:n,part:i,level:r}=t,s=self.performance.now();n.stats.parsing.end=s,i&&(i.stats.parsing.end=s),this.updateLevelTiming(n,i,r,e.partial)}getCurrentContext(e){const{levels:t,fragCurrent:n}=this,{level:i,sn:r,part:s}=e;if(null==t||!t[i])return this.warn(`Levels object was unset while buffering fragment ${r} of level ${i}. The current chunk will not be buffered.`),null;const a=t[i],o=s>-1?zT(a,r,s):null,l=o?o.fragment:function(e,t,n){if(null==e||!e.details)return null;const i=e.details;let r=i.fragments[t-i.startSN];return r||(r=i.fragmentHint,r&&r.sn===t?r:t<i.startSN&&n&&n.sn===t?n:null)}(a,r,n);return l?(n&&n!==l&&(l.stats=n.stats),{frag:l,part:o,level:a}):null}bufferFragmentData(e,t,n,i,r){var s;if(!e||this.state!==Q_)return;const{data1:a,data2:o}=e;let l=a;if(a&&o&&(l=BE(a,o)),null==(s=l)||!s.length)return;const d={type:e.type,frag:t,part:n,chunkMeta:i,parent:t.type,data:l};if(this.hls.trigger(Ib.BUFFER_APPENDING,d),e.dropped&&e.independent&&!n){if(r)return;this.flushBufferGap(t)}}flushBufferGap(e){const t=this.media;if(!t)return;if(!M_.isBuffered(t,t.currentTime))return void this.flushMainBuffer(0,e.start);const n=t.currentTime,i=M_.bufferInfo(t,n,0),r=e.duration,s=Math.min(2*this.config.maxFragLookUpTolerance,.25*r),a=Math.max(Math.min(e.start-s,i.end-s),n+s);e.start-a>s&&this.flushMainBuffer(a,e.start)}getFwdBufferInfo(e,t){const n=this.getLoadPosition();return Rb(n)?this.getFwdBufferInfoAtPos(e,n,t):null}getFwdBufferInfoAtPos(e,t,n){const{config:{maxBufferHole:i}}=this,r=M_.bufferInfo(e,t,i);if(0===r.len&&void 0!==r.nextStart){const s=this.fragmentTracker.getBufferedFrag(t,n);if(s&&r.nextStart<s.end)return M_.bufferInfo(e,t,Math.max(r.nextStart,i))}return r}getMaxBufferLength(e){const{config:t}=this;let n;return n=e?Math.max(8*t.maxBufferSize/e,t.maxBufferLength):t.maxBufferLength,Math.min(n,t.maxMaxBufferLength)}reduceMaxBufferLength(e){const t=this.config,n=e||t.maxBufferLength;return t.maxMaxBufferLength>=n&&(t.maxMaxBufferLength/=2,this.warn(`Reduce max buffer length to ${t.maxMaxBufferLength}s`),!0)}getAppendedFrag(e,t=ET){const n=this.fragmentTracker.getAppendedFrag(e,ET);return n&&"fragment"in n?n.fragment:n}getNextFragment(e,t){const n=t.fragments,i=n.length;if(!i)return null;const{config:r}=this,s=n[0].start;let a;if(t.live){const s=r.initialLiveManifestSize;if(i<s)return this.warn(`Not enough fragments to start playback (have: ${i}, need: ${s})`),null;t.PTSKnown||this.startFragRequested||-1!==this.startPosition||(a=this.getInitialLiveFragment(t,n),this.startPosition=a?this.hls.liveSyncPosition||a.start:e)}else e<=s&&(a=n[0]);if(!a){const n=r.lowLatencyMode?t.partEnd:t.fragmentEnd;a=this.getFragmentAtPosition(e,n,t)}return this.mapToInitFragWhenRequired(a)}isLoopLoading(e,t){const n=this.fragmentTracker.getState(e);return(n===T_||n===E_&&!!e.gap)&&this.nextLoadPosition>t}getNextFragmentLoopLoading(e,t,n,i,r){const s=e.gap,a=this.getNextFragment(this.nextLoadPosition,t);if(null===a)return a;if(e=a,s&&e&&!e.gap&&n.nextStart){const t=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,n.nextStart,i);if(null!==t&&n.len+t.len>=r)return this.log(`buffer full after gaps in "${i}" playlist starting at sn: ${e.sn}`),null}return e}mapToInitFragWhenRequired(e){return null==e||!e.initSegment||null!=e&&e.initSegment.data||this.bitrateTest?e:e.initSegment}getNextPart(e,t,n){let i=-1,r=!1,s=!0;for(let a=0,o=e.length;a<o;a++){const o=e[a];if(s=s&&!o.independent,i>-1&&n<o.start)break;const l=o.loaded;l?i=-1:(r||o.independent||s)&&o.fragment===t&&(i=a),r=l}return i}loadedEndOfParts(e,t){const n=e[e.length-1];return n&&t>n.start&&n.loaded}getInitialLiveFragment(e,t){const n=this.fragPrevious;let i=null;if(n){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${n.programDateTime}`),i=function(e,t,n){if(null===t||!Array.isArray(e)||!e.length||!Rb(t))return null;if(t<(e[0].programDateTime||0))return null;if(t>=(e[e.length-1].endProgramDateTime||0))return null;n=n||0;for(let i=0;i<e.length;++i){const r=e[i];if(s_(t,n,r))return r}return null}(t,n.endProgramDateTime,this.config.maxFragLookUpTolerance)),!i){const r=n.sn+1;if(r>=e.startSN&&r<=e.endSN){const s=t[r-e.startSN];n.cc===s.cc&&(i=s,this.log(`Live playlist, switching playlist, load frag with next SN: ${i.sn}`))}i||(i=function(e,t){return n_(e,(e=>e.cc<t?1:e.cc>t?-1:0))}(t,n.cc),i&&this.log(`Live playlist, switching playlist, load frag with same CC: ${i.sn}`))}}else{const t=this.hls.liveSyncPosition;null!==t&&(i=this.getFragmentAtPosition(t,this.bitrateTest?e.fragmentEnd:e.edge,e))}return i}getFragmentAtPosition(e,t,n){const{config:i}=this;let{fragPrevious:r}=this,{fragments:s,endSN:a}=n;const{fragmentHint:o}=n,l=i.maxFragLookUpTolerance,d=n.partList,c=!!(i.lowLatencyMode&&null!=d&&d.length&&o);let u;if(c&&o&&!this.bitrateTest&&(s=s.concat(o),a=o.sn),e<t){u=i_(r,s,e,e>t-l?0:l)}else u=s[s.length-1];if(u){const e=u.sn-n.startSN,t=this.fragmentTracker.getState(u);if((t===T_||t===E_&&u.gap)&&(r=u),r&&u.sn===r.sn&&(!c||d[0].fragment.sn>u.sn)){if(r&&u.level===r.level){const t=s[e+1];u=u.sn<a&&this.fragmentTracker.getState(t)!==T_?t:null}}}return u}synchronizeToLiveEdge(e){const{config:t,media:n}=this;if(!n)return;const i=this.hls.liveSyncPosition,r=n.currentTime,s=e.fragments[0].start,a=e.edge,o=r>=s-t.maxFragLookUpTolerance&&r<=a;if(null!==i&&n.duration>i&&(r<i||!o)){const s=void 0!==t.liveMaxLatencyDuration?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;(!o&&n.readyState<4||r<a-s)&&(this.loadedmetadata||(this.nextLoadPosition=i),n.readyState&&(this.warn(`Playback: ${r.toFixed(3)} is located too far from the end of live sliding playlist: ${a}, reset currentTime to : ${i.toFixed(3)}`),n.currentTime=i))}}alignPlaylists(e,t){const{levels:n,levelLastLoaded:i,fragPrevious:r}=this,s=null!==i?n[i]:null,a=e.fragments.length;if(!a)return this.warn("No fragments in live playlist"),0;const o=e.fragments[0].start,l=!t,d=e.alignedSliding&&Rb(o);if(l||!d&&!o){U_(r,s,e);const n=e.fragments[0].start;return this.log(`Live playlist sliding: ${n.toFixed(2)} start-sn: ${t?t.startSN:"na"}->${e.startSN} prev-sn: ${r?r.sn:"na"} fragments: ${a}`),n}return o}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,3*e.partTarget)}setStartPosition(e,t){let n=this.startPosition;if(n<t&&(n=-1),-1===n||-1===this.lastCurrentTime){const i=null!==this.startTimeOffset,r=i?this.startTimeOffset:e.startTimeOffset;null!==r&&Rb(r)?(n=t+r,r<0&&(n+=e.totalduration),n=Math.min(Math.max(t,n),t+e.totalduration),this.log(`Start time offset ${r} found in ${i?"multivariant":"media"} playlist, adjust startPosition to ${n}`),this.startPosition=n):e.live?n=this.hls.liveSyncPosition||t:this.startPosition=n=0,this.lastCurrentTime=n}this.nextLoadPosition=n}getLoadPosition(){const{media:e}=this;let t=0;return this.loadedmetadata&&e?t=e.currentTime:this.nextLoadPosition&&(t=this.nextLoadPosition),t}handleFragLoadAborted(e,t){this.transmuxer&&"initSegment"!==e.sn&&e.stats.aborted&&(this.warn(`Fragment ${e.sn}${t?" part "+t.index:""} of level ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){this.fragCurrent&&(this.fragContextChanged(e)||this.state===z_)||(this.state=j_)}onFragmentOrKeyLoadError(e,t){if(t.chunkMeta&&!t.frag){const e=this.getCurrentContext(t.chunkMeta);e&&(t.frag=e.frag)}const n=t.frag;if(!n||n.type!==e||!this.levels)return;var i;if(this.fragContextChanged(n))return void this.warn(`Frag load error must match current frag to retry ${n.url} > ${null==(i=this.fragCurrent)?void 0:i.url}`);const r=t.details===Db.FRAG_GAP;r&&this.fragmentTracker.fragBuffered(n,!0);const s=t.errorAction,{action:a,retryCount:o=0,retryConfig:l}=s||{};if(s&&a===l_&&l){var d;this.resetStartWhenNotLoaded(null!=(d=this.levelLastLoaded)?d:n.level);const i=JT(l,o);this.warn(`Fragment ${n.sn} of ${e} ${n.level} errored with ${t.details}, retrying loading ${o+1}/${l.maxNumRetry} in ${i}ms`),s.resolved=!0,this.retryDate=self.performance.now()+i,this.state=z_}else l&&s?(this.resetFragmentErrors(e),o<l.maxNumRetry?r||(s.resolved=!0):Nb.warn(`${t.details} reached or exceeded max retry (${o})`)):(null==s?void 0:s.action)===o_?this.state=nA:this.state=eA;this.tickImmediate()}reduceLengthAndFlushBuffer(e){if(this.state===Q_||this.state===Z_){const t=e.parent,n=this.getFwdBufferInfo(this.mediaBuffer,t),i=n&&n.len>.5;i&&this.reduceMaxBufferLength(n.len);const r=!i;return r&&this.warn(`Buffer full error while media.currentTime is not buffered, flush ${t} buffer`),e.frag&&(this.fragmentTracker.removeFragment(e.frag),this.nextLoadPosition=e.frag.start),this.resetLoadingState(),r}return!1}resetFragmentErrors(e){e===TT&&(this.fragCurrent=null),this.loadedmetadata||(this.startFragRequested=!1),this.state!==K_&&(this.state=j_)}afterBufferFlushed(e,t,n){if(!e)return;const i=M_.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,i,n),this.state===J_&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state=j_}resetStartWhenNotLoaded(e){if(!this.loadedmetadata){this.startFragRequested=!1;const t=this.levels?this.levels[e].details:null;null!=t&&t.live?(this.startPosition=-1,this.setStartPosition(t,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){var t;this.warn(`The loading context changed while buffering fragment ${e.sn} of level ${e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(null!=(t=this.levelLastLoaded)?t:e.level),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,t,n,i){var r;const s=n.details;if(!s)return void this.warn("level.details undefined");if(Object.keys(e.elementaryStreams).reduce(((t,r)=>{const a=e.elementaryStreams[r];if(a){const o=a.endPTS-a.startPTS;if(o<=0)return this.warn(`Could not parse fragment ${e.sn} ${r} duration reliably (${o})`),t||!1;const l=i?0:KT(s,e,a.startPTS,a.endPTS,a.startDTS,a.endDTS);return this.hls.trigger(Ib.LEVEL_PTS_UPDATED,{details:s,level:n,drift:l,type:r,frag:e,start:a.startPTS,end:a.endPTS}),!0}return t}),!1))n.fragmentError=0;else if(null===(null==(r=this.transmuxer)?void 0:r.error)){const t=new Error(`Found no media in fragment ${e.sn} of level ${e.level} resetting transmuxer to fallback to playlist timing`);if(0===n.fragmentError&&(n.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)),this.warn(t.message),this.hls.trigger(Ib.ERROR,{type:Cb.MEDIA_ERROR,details:Db.FRAG_PARSING_ERROR,fatal:!1,error:t,frag:e,reason:`Found no media in msn ${e.sn} of level "${n.url}"`}),!this.hls)return;this.resetTransmuxer()}this.state=Z_,this.hls.trigger(Ib.FRAG_PARSED,{frag:e,part:t})}resetTransmuxer(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)}recoverWorkerError(e){var t,n,i;"demuxerWorker"===e.event&&(this.fragmentTracker.removeAllFragments(),this.resetTransmuxer(),this.resetStartWhenNotLoaded(null!=(t=null!=(n=this.levelLastLoaded)?n:null==(i=this.fragCurrent)?void 0:i.level)?t:0),this.resetLoadingState())}set state(e){const t=this._state;t!==e&&(this._state=e,this.log(`${t}->${e}`))}get state(){return this._state}}function rA(){return self.SourceBuffer||self.WebKitSourceBuffer}function sA(e="",t=9e4){return{type:e,id:-1,pid:-1,inputTimeScale:t,sequenceNumber:-1,samples:[],dropped:0}}class aA{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,t,n,i){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,t){return!1}appendFrame(e,t,n){}demux(e,t){this.cachedData&&(e=BE(this.cachedData,e),this.cachedData=null);let n,i=hE(e,0),r=i?i.length:0;const s=this._audioTrack,a=this._id3Track,o=i?(e=>{const t=vE(e);for(let e=0;e<t.length;e++){const n=t[e];if(mE(n))return _E(n)}})(i):void 0,l=e.length;for((null===this.basePTS||0===this.frameIndex&&Rb(o))&&(this.basePTS=oA(o,t,this.initPTS),this.lastPTS=this.basePTS),null===this.lastPTS&&(this.lastPTS=this.basePTS),i&&i.length>0&&a.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:i,type:CT,duration:Number.POSITIVE_INFINITY});r<l;){if(this.canParse(e,r)){const t=this.appendFrame(s,e,r);t?(this.frameIndex++,this.lastPTS=t.sample.pts,r+=t.length,n=r):r=l}else pE(e,r)?(i=hE(e,r),a.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:i,type:CT,duration:Number.POSITIVE_INFINITY}),r+=i.length,n=r):r++;if(r===l&&n!==l){const t=dE(e,n);this.cachedData?this.cachedData=BE(this.cachedData,t):this.cachedData=t}}return{audioTrack:s,videoTrack:sA(),id3Track:a,textTrack:sA()}}demuxSampleAes(e,t,n){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:sA(),id3Track:this._id3Track,textTrack:sA()}}destroy(){}}const oA=(e,t,n)=>{if(Rb(e))return 90*e;return 9e4*t+(n?9e4*n.baseTime/n.timescale:0)};function lA(e,t){return 255===e[t]&&240==(246&e[t+1])}function dA(e,t){return 1&e[t+1]?7:9}function cA(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function uA(e,t){return t+1<e.length&&lA(e,t)}function hA(e,t){if(uA(e,t)){const n=dA(e,t);if(t+n>=e.length)return!1;const i=cA(e,t);if(i<=n)return!1;const r=t+i;return r===e.length||uA(e,r)}return!1}function fA(e,t,n,i,r){if(!e.samplerate){const s=function(e,t,n,i){let r,s,a,o;const l=navigator.userAgent.toLowerCase(),d=i,c=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];r=1+((192&t[n+2])>>>6);const u=(60&t[n+2])>>>2;if(!(u>c.length-1))return a=(1&t[n+2])<<2,a|=(192&t[n+3])>>>6,Nb.log(`manifest codec:${i}, ADTS type:${r}, samplingIndex:${u}`),/firefox/i.test(l)?u>=6?(r=5,o=new Array(4),s=u-3):(r=2,o=new Array(2),s=u):-1!==l.indexOf("android")?(r=2,o=new Array(2),s=u):(r=5,o=new Array(4),i&&(-1!==i.indexOf("mp4a.40.29")||-1!==i.indexOf("mp4a.40.5"))||!i&&u>=6?s=u-3:((i&&-1!==i.indexOf("mp4a.40.2")&&(u>=6&&1===a||/vivaldi/i.test(l))||!i&&1===a)&&(r=2,o=new Array(2)),s=u)),o[0]=r<<3,o[0]|=(14&u)>>1,o[1]|=(1&u)<<7,o[1]|=a<<3,5===r&&(o[1]|=(14&s)>>1,o[2]=(1&s)<<7,o[2]|=8,o[3]=0),{config:o,samplerate:c[u],channelCount:a,codec:"mp4a.40."+r,manifestCodec:d};e.trigger(Ib.ERROR,{type:Cb.MEDIA_ERROR,details:Db.FRAG_PARSING_ERROR,fatal:!0,reason:`invalid ADTS sampling index:${u}`})}(t,n,i,r);if(!s)return;e.config=s.config,e.samplerate=s.samplerate,e.channelCount=s.channelCount,e.codec=s.codec,e.manifestCodec=s.manifestCodec,Nb.log(`parsed codec:${e.codec}, rate:${s.samplerate}, channels:${s.channelCount}`)}}function pA(e){return 9216e4/e}function mA(e,t,n,i,r){const s=i+r*pA(e.samplerate),a=function(e,t){const n=dA(e,t);if(t+n<=e.length){const i=cA(e,t)-n;if(i>0)return{headerLength:n,frameLength:i}}}(t,n);let o;if(a){const{frameLength:i,headerLength:r}=a,l=r+i,d=Math.max(0,n+l-t.length);d?(o=new Uint8Array(l-r),o.set(t.subarray(n+r,t.length),0)):o=t.subarray(n+r,n+l);const c={unit:o,pts:s};return d||e.samples.push(c),{sample:c,length:l,missing:d}}const l=t.length-n;o=new Uint8Array(l),o.set(t.subarray(n,t.length),0);return{sample:{unit:o,pts:s},length:l,missing:-1}}const gA=/\/emsg[-/]ID3/i;let vA=null;const yA=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],bA=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],EA=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],TA=[0,1,1,4];function _A(e,t,n,i,r){if(n+24>t.length)return;const s=AA(t,n);if(s&&n+s.frameLength<=t.length){const a=i+r*(9e4*s.samplesPerFrame/s.sampleRate),o={unit:t.subarray(n,n+s.frameLength),pts:a,dts:a};return e.config=[],e.channelCount=s.channelCount,e.samplerate=s.sampleRate,e.samples.push(o),{sample:o,length:s.frameLength,missing:0}}}function AA(e,t){const n=e[t+1]>>3&3,i=e[t+1]>>1&3,r=e[t+2]>>4&15,s=e[t+2]>>2&3;if(1!==n&&0!==r&&15!==r&&3!==s){const a=e[t+2]>>1&1,o=e[t+3]>>6,l=1e3*yA[14*(3===n?3-i:3===i?3:4)+r-1],d=bA[3*(3===n?0:2===n?1:2)+s],c=3===o?1:2,u=EA[n][i],h=TA[i],f=8*u*h,p=Math.floor(u*l/d+a)*h;if(null===vA){const e=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);vA=e?parseInt(e[1]):0}return!!vA&&vA<=87&&2===i&&l>=224e3&&0===o&&(e[t+3]=128|e[t+3]),{sampleRate:d,channelCount:c,frameLength:p,samplesPerFrame:f}}}function SA(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])}function kA(e,t){return t+1<e.length&&SA(e,t)}function wA(e,t){if(t+1<e.length&&SA(e,t)){const n=4,i=AA(e,t);let r=n;null!=i&&i.frameLength&&(r=i.frameLength);const s=t+r;return s===e.length||kA(e,s)}return!1}class LA{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,t=this.bytesAvailable,n=e.byteLength-t,i=new Uint8Array(4),r=Math.min(4,t);if(0===r)throw new Error("no bytes available");i.set(e.subarray(n,n+r)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=8*r,this.bytesAvailable-=r}skipBits(e){let t;e=Math.min(e,8*this.bytesAvailable+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(t=(e-=this.bitsAvailable)>>3,e-=t<<3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let t=Math.min(this.bitsAvailable,e);const n=this.word>>>32-t;if(e>32&&Nb.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0)this.word<<=t;else{if(!(this.bytesAvailable>0))throw new Error("no bits available");this.loadWord()}return t=e-t,t>0&&this.bitsAvailable?n<<t|this.readBits(t):n}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return 1===this.readBits(1)}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}skipScalingList(e){let t,n=8,i=8;for(let r=0;r<e;r++)0!==i&&(t=this.readEG(),i=(n+t+256)%256),n=0===i?n:i}readSPS(){let e,t,n,i=0,r=0,s=0,a=0;const o=this.readUByte.bind(this),l=this.readBits.bind(this),d=this.readUEG.bind(this),c=this.readBoolean.bind(this),u=this.skipBits.bind(this),h=this.skipEG.bind(this),f=this.skipUEG.bind(this),p=this.skipScalingList.bind(this);o();const m=o();if(l(5),u(3),o(),f(),100===m||110===m||122===m||244===m||44===m||83===m||86===m||118===m||128===m){const e=d();if(3===e&&u(1),f(),f(),u(1),c())for(t=3!==e?8:12,n=0;n<t;n++)c()&&p(n<6?16:64)}f();const g=d();if(0===g)d();else if(1===g)for(u(1),h(),h(),e=d(),n=0;n<e;n++)h();f(),u(1);const v=d(),y=d(),b=l(1);0===b&&u(1),u(1),c()&&(i=d(),r=d(),s=d(),a=d());let E=[1,1];if(c()&&c()){switch(o()){case 1:E=[1,1];break;case 2:E=[12,11];break;case 3:E=[10,11];break;case 4:E=[16,11];break;case 5:E=[40,33];break;case 6:E=[24,11];break;case 7:E=[20,11];break;case 8:E=[32,11];break;case 9:E=[80,33];break;case 10:E=[18,11];break;case 11:E=[15,11];break;case 12:E=[64,33];break;case 13:E=[160,99];break;case 14:E=[4,3];break;case 15:E=[3,2];break;case 16:E=[2,1];break;case 255:E=[o()<<8|o(),o()<<8|o()]}}return{width:Math.ceil(16*(v+1)-2*i-2*r),height:(2-b)*(y+1)*16-(b?2:4)*(s+a),pixelRatio:E}}readSliceType(){return this.readUByte(),this.readUEG(),this.readUEG()}}class RA{constructor(e,t,n){this.keyData=void 0,this.decrypter=void 0,this.keyData=n,this.decrypter=new W_(t,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer)}decryptAacSample(e,t,n){const i=e[t].unit;if(i.length<=16)return;const r=i.subarray(16,i.length-i.length%16),s=r.buffer.slice(r.byteOffset,r.byteOffset+r.length);this.decryptBuffer(s).then((r=>{const s=new Uint8Array(r);i.set(s,16),this.decrypter.isSync()||this.decryptAacSamples(e,t+1,n)}))}decryptAacSamples(e,t,n){for(;;t++){if(t>=e.length)return void n();if(!(e[t].unit.length<32)&&(this.decryptAacSample(e,t,n),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const t=16*Math.floor((e.length-48)/160)+16,n=new Int8Array(t);let i=0;for(let t=32;t<e.length-16;t+=160,i+=16)n.set(e.subarray(t,t+16),i);return n}getAvcDecryptedUnit(e,t){const n=new Uint8Array(t);let i=0;for(let t=32;t<e.length-16;t+=160,i+=16)e.set(n.subarray(i,i+16),t);return e}decryptAvcSample(e,t,n,i,r){const s=WE(r.data),a=this.getAvcEncryptedData(s);this.decryptBuffer(a.buffer).then((a=>{r.data=this.getAvcDecryptedUnit(s,a),this.decrypter.isSync()||this.decryptAvcSamples(e,t,n+1,i)}))}decryptAvcSamples(e,t,n,i){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,n=0){if(t>=e.length)return void i();const r=e[t].units;for(;!(n>=r.length);n++){const s=r[n];if(!(s.data.length<=48||1!==s.type&&5!==s.type||(this.decryptAvcSample(e,t,n,i,s),this.decrypter.isSync())))return}}}}const IA=188;class CA{constructor(e,t,n){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._avcTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.observer=e,this.config=t,this.typeSupported=n}static probe(e){const t=CA.syncOffset(e);return t>0&&Nb.warn(`MPEG2-TS detected but first sync word found @ offset ${t}`),-1!==t}static syncOffset(e){const t=e.length;let n=Math.min(940,e.length-IA)+1,i=0;for(;i<n;){let r=!1,s=-1,a=0;for(let o=i;o<t;o+=IA){if(71!==e[o]){if(a)return-1;break}if(a++,-1===s&&(s=o,0!==s&&(n=Math.min(s+18612,e.length-IA)+1)),r||(r=0===xA(e,o)),r&&a>1&&(0===s&&a>2||o+IA>n))return s}i++}return-1}static createTrack(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:RE[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:"audio"===e?t:void 0}}resetInitSegment(e,t,n,i){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=CA.createTrack("video"),this._audioTrack=CA.createTrack("audio",i),this._id3Track=CA.createTrack("id3"),this._txtTrack=CA.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.audioCodec=t,this.videoCodec=n,this._duration=i}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_avcTrack:t,_id3Track:n}=this;e&&(e.pesData=null),t&&(t.pesData=null),n&&(n.pesData=null),this.aacOverFlow=null,this.avcSample=null,this.remainderData=null}demux(e,t,n=!1,i=!1){let r;n||(this.sampleAes=null);const s=this._avcTrack,a=this._audioTrack,o=this._id3Track,l=this._txtTrack;let d=s.pid,c=s.pesData,u=a.pid,h=o.pid,f=a.pesData,p=o.pesData,m=null,g=this.pmtParsed,v=this._pmtId,y=e.length;if(this.remainderData&&(y=(e=BE(this.remainderData,e)).length,this.remainderData=null),y<IA&&!i)return this.remainderData=e,{audioTrack:a,videoTrack:s,id3Track:o,textTrack:l};const b=Math.max(0,CA.syncOffset(e));y-=(y-b)%IA,y<e.byteLength&&!i&&(this.remainderData=new Uint8Array(e.buffer,y,e.buffer.byteLength-y));let E=0;for(let t=b;t<y;t+=IA)if(71===e[t]){const i=!!(64&e[t+1]),y=xA(e,t);let E;if((48&e[t+3])>>4>1){if(E=t+5+e[t+4],E===t+IA)continue}else E=t+4;switch(y){case d:i&&(c&&(r=OA(c))&&this.parseAVCPES(s,l,r,!1),c={data:[],size:0}),c&&(c.data.push(e.subarray(E,t+IA)),c.size+=t+IA-E);break;case u:if(i){if(f&&(r=OA(f)))switch(a.segmentCodec){case"aac":this.parseAACPES(a,r);break;case"mp3":this.parseMPEGPES(a,r)}f={data:[],size:0}}f&&(f.data.push(e.subarray(E,t+IA)),f.size+=t+IA-E);break;case h:i&&(p&&(r=OA(p))&&this.parseID3PES(o,r),p={data:[],size:0}),p&&(p.data.push(e.subarray(E,t+IA)),p.size+=t+IA-E);break;case 0:i&&(E+=e[E]+1),v=this._pmtId=MA(e,E);break;case v:{i&&(E+=e[E]+1);const r=PA(e,E,this.typeSupported,n);d=r.avc,d>0&&(s.pid=d),u=r.audio,u>0&&(a.pid=u,a.segmentCodec=r.segmentCodec),h=r.id3,h>0&&(o.pid=h),null===m||g||(Nb.warn(`MPEG-TS PMT found at ${t} after unknown PID '${m}'. Backtracking to sync byte @${b} to parse all TS packets.`),m=null,t=b-188),g=this.pmtParsed=!0;break}case 17:case 8191:break;default:m=y}}else E++;if(E>0){const e=new Error(`Found ${E} TS packet/s that do not start with 0x47`);this.observer.emit(Ib.ERROR,Ib.ERROR,{type:Cb.MEDIA_ERROR,details:Db.FRAG_PARSING_ERROR,fatal:!1,error:e,reason:e.message})}s.pesData=c,a.pesData=f,o.pesData=p;const T={audioTrack:a,videoTrack:s,id3Track:o,textTrack:l};return i&&this.extractRemainingSamples(T),T}flush(){const{remainderData:e}=this;let t;return this.remainderData=null,t=e?this.demux(e,-1,!1,!0):{videoTrack:this._avcTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t}extractRemainingSamples(e){const{audioTrack:t,videoTrack:n,id3Track:i,textTrack:r}=e,s=n.pesData,a=t.pesData,o=i.pesData;let l;if(s&&(l=OA(s))?(this.parseAVCPES(n,r,l,!0),n.pesData=null):n.pesData=s,a&&(l=OA(a))){switch(t.segmentCodec){case"aac":this.parseAACPES(t,l);break;case"mp3":this.parseMPEGPES(t,l)}t.pesData=null}else null!=a&&a.size&&Nb.log("last AAC PES packet truncated,might overlap between fragments"),t.pesData=a;o&&(l=OA(o))?(this.parseID3PES(i,l),i.pesData=null):i.pesData=o}demuxSampleAes(e,t,n){const i=this.demux(e,n,!0,!this.config.progressive),r=this.sampleAes=new RA(this.observer,this.config,t);return this.decrypt(i,r)}decrypt(e,t){return new Promise((n=>{const{audioTrack:i,videoTrack:r}=e;i.samples&&"aac"===i.segmentCodec?t.decryptAacSamples(i.samples,0,(()=>{r.samples?t.decryptAvcSamples(r.samples,0,0,(()=>{n(e)})):n(e)})):r.samples&&t.decryptAvcSamples(r.samples,0,0,(()=>{n(e)}))}))}destroy(){this._duration=0}parseAVCPES(e,t,n,i){const r=this.parseAVCNALu(e,n.data);let s,a=this.avcSample,o=!1;n.data=null,a&&r.length&&!e.audFound&&(NA(a,e),a=this.avcSample=DA(!1,n.pts,n.dts,"")),r.forEach((i=>{var r;switch(i.type){case 1:{let t=!1;s=!0;const r=i.data;if(o&&r.length>4){const e=new LA(r).readSliceType();2!==e&&4!==e&&7!==e&&9!==e||(t=!0)}var l;if(t)null!=(l=a)&&l.frame&&!a.key&&(NA(a,e),a=this.avcSample=null);a||(a=this.avcSample=DA(!0,n.pts,n.dts,"")),a.frame=!0,a.key=t;break}case 5:s=!0,null!=(r=a)&&r.frame&&!a.key&&(NA(a,e),a=this.avcSample=null),a||(a=this.avcSample=DA(!0,n.pts,n.dts,"")),a.key=!0,a.frame=!0;break;case 6:s=!0,HE(i.data,1,n.pts,t.samples);break;case 7:if(s=!0,o=!0,!e.sps){const t=i.data,n=new LA(t).readSPS();e.width=n.width,e.height=n.height,e.pixelRatio=n.pixelRatio,e.sps=[t],e.duration=this._duration;const r=t.subarray(1,4);let s="avc1.";for(let e=0;e<3;e++){let t=r[e].toString(16);t.length<2&&(t="0"+t),s+=t}e.codec=s}break;case 8:s=!0,e.pps||(e.pps=[i.data]);break;case 9:s=!1,e.audFound=!0,a&&NA(a,e),a=this.avcSample=DA(!1,n.pts,n.dts,"");break;case 12:s=!0;break;default:s=!1,a&&(a.debug+="unknown NAL "+i.type+" ")}if(a&&s){a.units.push(i)}})),i&&a&&(NA(a,e),this.avcSample=null)}getLastNalUnit(e){var t;let n,i=this.avcSample;if(i&&0!==i.units.length||(i=e[e.length-1]),null!=(t=i)&&t.units){const e=i.units;n=e[e.length-1]}return n}parseAVCNALu(e,t){const n=t.byteLength;let i=e.naluState||0;const r=i,s=[];let a,o,l,d=0,c=-1,u=0;for(-1===i&&(c=0,u=31&t[0],i=0,d=1);d<n;)if(a=t[d++],i)if(1!==i)if(a)if(1===a){if(c>=0){const e={data:t.subarray(c,d-i-1),type:u};s.push(e)}else{const n=this.getLastNalUnit(e.samples);if(n&&(r&&d<=4-r&&n.state&&(n.data=n.data.subarray(0,n.data.byteLength-r)),o=d-i-1,o>0)){const e=new Uint8Array(n.data.byteLength+o);e.set(n.data,0),e.set(t.subarray(0,o),n.data.byteLength),n.data=e,n.state=0}}d<n?(l=31&t[d],c=d,u=l,i=0):i=-1}else i=0;else i=3;else i=a?0:2;else i=a?0:1;if(c>=0&&i>=0){const e={data:t.subarray(c,n),type:u,state:i};s.push(e)}if(0===s.length){const n=this.getLastNalUnit(e.samples);if(n){const e=new Uint8Array(n.data.byteLength+t.byteLength);e.set(n.data,0),e.set(t,n.data.byteLength),n.data=e}}return e.naluState=i,s}parseAACPES(e,t){let n=0;const i=this.aacOverFlow;let r,s,a,o=t.data;if(i){this.aacOverFlow=null;const t=i.missing,r=i.sample.unit.byteLength;if(-1===t){const e=new Uint8Array(r+o.byteLength);e.set(i.sample.unit,0),e.set(o,r),o=e}else{const s=r-t;i.sample.unit.set(o.subarray(0,t),s),e.samples.push(i.sample),n=i.missing}}for(r=n,s=o.length;r<s-1&&!uA(o,r);r++);if(r!==n){let e;const t=r<s-1;e=t?`AAC PES did not start with ADTS header,offset:${r}`:"No ADTS header found in AAC PES";const n=new Error(e);if(Nb.warn(`parsing error: ${e}`),this.observer.emit(Ib.ERROR,Ib.ERROR,{type:Cb.MEDIA_ERROR,details:Db.FRAG_PARSING_ERROR,fatal:!1,levelRetry:t,error:n,reason:e}),!t)return}if(fA(e,this.observer,o,r,this.audioCodec),void 0!==t.pts)a=t.pts;else{if(!i)return void Nb.warn("[tsdemuxer]: AAC PES unknown PTS");{const t=pA(e.samplerate);a=i.sample.pts+t}}let l,d=0;for(;r<s;){if(l=mA(e,o,r,a,d),r+=l.length,l.missing){this.aacOverFlow=l;break}for(d++;r<s-1&&!uA(o,r);r++);}}parseMPEGPES(e,t){const n=t.data,i=n.length;let r=0,s=0;const a=t.pts;if(void 0!==a)for(;s<i;)if(kA(n,s)){const t=_A(e,n,s,a,r);if(!t)break;s+=t.length,r++}else s++;else Nb.warn("[tsdemuxer]: MPEG PES unknown PTS")}parseID3PES(e,t){if(void 0===t.pts)return void Nb.warn("[tsdemuxer]: ID3 PES unknown PTS");const n=Lb({},t,{type:this._avcTrack?xT:CT,duration:Number.POSITIVE_INFINITY});e.samples.push(n)}}function DA(e,t,n,i){return{key:e,frame:!1,pts:t,dts:n,units:[],debug:i,length:0}}function xA(e,t){return((31&e[t+1])<<8)+e[t+2]}function MA(e,t){return(31&e[t+10])<<8|e[t+11]}function PA(e,t,n,i){const r={audio:-1,avc:-1,id3:-1,segmentCodec:"aac"},s=t+3+((15&e[t+1])<<8|e[t+2])-4;for(t+=12+((15&e[t+10])<<8|e[t+11]);t<s;){const s=xA(e,t);switch(e[t]){case 207:if(!i){Nb.log("ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:-1===r.audio&&(r.audio=s);break;case 21:-1===r.id3&&(r.id3=s);break;case 219:if(!i){Nb.log("H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:-1===r.avc&&(r.avc=s);break;case 3:case 4:!0!==n.mpeg&&!0!==n.mp3?Nb.log("MPEG audio found, not supported in this browser"):-1===r.audio&&(r.audio=s,r.segmentCodec="mp3");break;case 36:Nb.warn("Unsupported HEVC stream type found")}t+=5+((15&e[t+3])<<8|e[t+4])}return r}function OA(e){let t,n,i,r,s,a=0;const o=e.data;if(!e||0===e.size)return null;for(;o[0].length<19&&o.length>1;){const e=new Uint8Array(o[0].length+o[1].length);e.set(o[0]),e.set(o[1],o[0].length),o[0]=e,o.splice(1,1)}t=o[0];if(1===(t[0]<<16)+(t[1]<<8)+t[2]){if(n=(t[4]<<8)+t[5],n&&n>e.size-6)return null;const l=t[7];192&l&&(r=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2,64&l?(s=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2,r-s>54e5&&(Nb.warn(`${Math.round((r-s)/9e4)}s delta between PTS and DTS, align them`),r=s)):s=r),i=t[8];let d=i+9;if(e.size<=d)return null;e.size-=d;const c=new Uint8Array(e.size);for(let e=0,n=o.length;e<n;e++){t=o[e];let n=t.byteLength;if(d){if(d>n){d-=n;continue}t=t.subarray(d),n-=d,d=0}c.set(t,a),a+=n}return n&&(n-=i+3),{data:c,pts:r,dts:s,len:n}}return null}function NA(e,t){if(e.units.length&&e.frame){if(void 0===e.pts){const n=t.samples,i=n.length;if(!i)return void t.dropped++;{const t=n[i-1];e.pts=t.pts,e.dts=t.dts}}t.samples.push(e)}e.debug.length&&Nb.log(e.pts+"/"+e.dts+":"+e.debug)}class FA{static getSilentFrame(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}}}const UA=Math.pow(2,32)-1;class BA{static init(){let e;for(e in BA.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},BA.types)BA.types.hasOwnProperty(e)&&(BA.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);BA.HDLR_TYPES={video:t,audio:n};const i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),r=new Uint8Array([0,0,0,0,0,0,0,0]);BA.STTS=BA.STSC=BA.STCO=r,BA.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),BA.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),BA.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),BA.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const s=new Uint8Array([105,115,111,109]),a=new Uint8Array([97,118,99,49]),o=new Uint8Array([0,0,0,1]);BA.FTYP=BA.box(BA.types.ftyp,s,o,s,a),BA.DINF=BA.box(BA.types.dinf,BA.box(BA.types.dref,i))}static box(e,...t){let n=8,i=t.length;const r=i;for(;i--;)n+=t[i].byteLength;const s=new Uint8Array(n);for(s[0]=n>>24&255,s[1]=n>>16&255,s[2]=n>>8&255,s[3]=255&n,s.set(e,4),i=0,n=8;i<r;i++)s.set(t[i],n),n+=t[i].byteLength;return s}static hdlr(e){return BA.box(BA.types.hdlr,BA.HDLR_TYPES[e])}static mdat(e){return BA.box(BA.types.mdat,e)}static mdhd(e,t){t*=e;const n=Math.floor(t/(UA+1)),i=Math.floor(t%(UA+1));return BA.box(BA.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24,n>>16&255,n>>8&255,255&n,i>>24,i>>16&255,i>>8&255,255&i,85,196,0,0]))}static mdia(e){return BA.box(BA.types.mdia,BA.mdhd(e.timescale,e.duration),BA.hdlr(e.type),BA.minf(e))}static mfhd(e){return BA.box(BA.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))}static minf(e){return"audio"===e.type?BA.box(BA.types.minf,BA.box(BA.types.smhd,BA.SMHD),BA.DINF,BA.stbl(e)):BA.box(BA.types.minf,BA.box(BA.types.vmhd,BA.VMHD),BA.DINF,BA.stbl(e))}static moof(e,t,n){return BA.box(BA.types.moof,BA.mfhd(e),BA.traf(n,t))}static moov(e){let t=e.length;const n=[];for(;t--;)n[t]=BA.trak(e[t]);return BA.box.apply(null,[BA.types.moov,BA.mvhd(e[0].timescale,e[0].duration)].concat(n).concat(BA.mvex(e)))}static mvex(e){let t=e.length;const n=[];for(;t--;)n[t]=BA.trex(e[t]);return BA.box.apply(null,[BA.types.mvex,...n])}static mvhd(e,t){t*=e;const n=Math.floor(t/(UA+1)),i=Math.floor(t%(UA+1)),r=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24,n>>16&255,n>>8&255,255&n,i>>24,i>>16&255,i>>8&255,255&i,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return BA.box(BA.types.mvhd,r)}static sdtp(e){const t=e.samples||[],n=new Uint8Array(4+t.length);let i,r;for(i=0;i<t.length;i++)r=t[i].flags,n[i+4]=r.dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return BA.box(BA.types.sdtp,n)}static stbl(e){return BA.box(BA.types.stbl,BA.stsd(e),BA.box(BA.types.stts,BA.STTS),BA.box(BA.types.stsc,BA.STSC),BA.box(BA.types.stsz,BA.STSZ),BA.box(BA.types.stco,BA.STCO))}static avc1(e){let t,n,i,r=[],s=[];for(t=0;t<e.sps.length;t++)n=e.sps[t],i=n.byteLength,r.push(i>>>8&255),r.push(255&i),r=r.concat(Array.prototype.slice.call(n));for(t=0;t<e.pps.length;t++)n=e.pps[t],i=n.byteLength,s.push(i>>>8&255),s.push(255&i),s=s.concat(Array.prototype.slice.call(n));const a=BA.box(BA.types.avcC,new Uint8Array([1,r[3],r[4],r[5],255,224|e.sps.length].concat(r).concat([e.pps.length]).concat(s))),o=e.width,l=e.height,d=e.pixelRatio[0],c=e.pixelRatio[1];return BA.box(BA.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,o>>8&255,255&o,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),a,BA.box(BA.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),BA.box(BA.types.pasp,new Uint8Array([d>>24,d>>16&255,d>>8&255,255&d,c>>24,c>>16&255,c>>8&255,255&c])))}static esds(e){const t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))}static mp4a(e){const t=e.samplerate;return BA.box(BA.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,255&t,0,0]),BA.box(BA.types.esds,BA.esds(e)))}static mp3(e){const t=e.samplerate;return BA.box(BA.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,255&t,0,0]))}static stsd(e){return"audio"===e.type?"mp3"===e.segmentCodec&&"mp3"===e.codec?BA.box(BA.types.stsd,BA.STSD,BA.mp3(e)):BA.box(BA.types.stsd,BA.STSD,BA.mp4a(e)):BA.box(BA.types.stsd,BA.STSD,BA.avc1(e))}static tkhd(e){const t=e.id,n=e.duration*e.timescale,i=e.width,r=e.height,s=Math.floor(n/(UA+1)),a=Math.floor(n%(UA+1));return BA.box(BA.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,0,0,0,0,s>>24,s>>16&255,s>>8&255,255&s,a>>24,a>>16&255,a>>8&255,255&a,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,255&i,0,0,r>>8&255,255&r,0,0]))}static traf(e,t){const n=BA.sdtp(e),i=e.id,r=Math.floor(t/(UA+1)),s=Math.floor(t%(UA+1));return BA.box(BA.types.traf,BA.box(BA.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i])),BA.box(BA.types.tfdt,new Uint8Array([1,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,s>>24,s>>16&255,s>>8&255,255&s])),BA.trun(e,n.length+16+20+8+16+8+8),n)}static trak(e){return e.duration=e.duration||4294967295,BA.box(BA.types.trak,BA.tkhd(e),BA.mdia(e))}static trex(e){const t=e.id;return BA.box(BA.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,t){const n=e.samples||[],i=n.length,r=12+16*i,s=new Uint8Array(r);let a,o,l,d,c,u;for(t+=8+r,s.set(["video"===e.type?1:0,0,15,1,i>>>24&255,i>>>16&255,i>>>8&255,255&i,t>>>24&255,t>>>16&255,t>>>8&255,255&t],0),a=0;a<i;a++)o=n[a],l=o.duration,d=o.size,c=o.flags,u=o.cts,s.set([l>>>24&255,l>>>16&255,l>>>8&255,255&l,d>>>24&255,d>>>16&255,d>>>8&255,255&d,c.isLeading<<2|c.dependsOn,c.isDependedOn<<6|c.hasRedundancy<<4|c.paddingValue<<1|c.isNonSync,61440&c.degradPrio,15&c.degradPrio,u>>>24&255,u>>>16&255,u>>>8&255,255&u],12+16*a);return BA.box(BA.types.trun,s)}static initSegment(e){BA.types||BA.init();const t=BA.moov(e),n=new Uint8Array(BA.FTYP.byteLength+t.byteLength);return n.set(BA.FTYP),n.set(t,BA.FTYP.byteLength),n}}BA.types=void 0,BA.HDLR_TYPES=void 0,BA.STTS=void 0,BA.STSC=void 0,BA.STCO=void 0,BA.STSZ=void 0,BA.VMHD=void 0,BA.SMHD=void 0,BA.STSD=void 0,BA.FTYP=void 0,BA.DINF=void 0;function $A(e,t,n=1,i=!1){const r=e*t*n;return i?Math.round(r):r}function VA(e,t=!1){return $A(e,1e3,1/9e4,t)}let HA,WA=null,GA=null;class KA{constructor(e,t,n,i=""){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.observer=e,this.config=t,this.typeSupported=n,this.ISGenerated=!1,null===WA){const e=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);WA=e?parseInt(e[1]):0}if(null===GA){const e=navigator.userAgent.match(/Safari\/(\d+)/i);GA=e?parseInt(e[1]):0}}destroy(){}resetTimeStamp(e){Nb.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=e}resetNextTimestamp(){Nb.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){Nb.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1}getVideoStartPts(e){let t=!1;const n=e.reduce(((e,n)=>{const i=n.pts-e;return i<-4294967296?(t=!0,jA(e,n.pts)):i>0?e:n.pts}),e[0].pts);return t&&Nb.debug("PTS rollover detected"),n}remux(e,t,n,i,r,s,a,o){let l,d,c,u,h,f,p=r,m=r;const g=e.pid>-1,v=t.pid>-1,y=t.samples.length,b=e.samples.length>0,E=a&&y>0||y>1;if((!g||b)&&(!v||E)||this.ISGenerated||a){this.ISGenerated||(c=this.generateIS(e,t,r,s));const n=this.isVideoContiguous;let i,a=-1;if(E&&(a=function(e){for(let t=0;t<e.length;t++)if(e[t].key)return t;return-1}(t.samples),!n&&this.config.forceKeyFrameOnDiscontinuity))if(f=!0,a>0){Nb.warn(`[mp4-remuxer]: Dropped ${a} out of ${y} video samples due to a missing keyframe`);const e=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(a),t.dropped+=a,m+=(t.samples[0].pts-e)/t.inputTimeScale,i=m}else-1===a&&(Nb.warn(`[mp4-remuxer]: No keyframe found out of ${y} video samples`),f=!1);if(this.ISGenerated){if(b&&E){const n=this.getVideoStartPts(t.samples),i=(jA(e.samples[0].pts,n)-n)/t.inputTimeScale;p+=Math.max(0,i),m+=Math.max(0,-i)}if(b){if(e.samplerate||(Nb.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),c=this.generateIS(e,t,r,s)),d=this.remuxAudio(e,p,this.isAudioContiguous,s,v||E||o===TT?m:void 0),E){const i=d?d.endPTS-d.startPTS:0;t.inputTimeScale||(Nb.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),c=this.generateIS(e,t,r,s)),l=this.remuxVideo(t,m,n,i)}}else E&&(l=this.remuxVideo(t,m,n,0));l&&(l.firstKeyFrame=a,l.independent=-1!==a,l.firstKeyFramePTS=i)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(n.samples.length&&(h=qA(n,r,this._initPTS,this._initDTS)),i.samples.length&&(u=YA(i,r,this._initPTS))),{audio:d,video:l,initSegment:c,independent:f,text:u,id3:h}}generateIS(e,t,n,i){const r=e.samples,s=t.samples,a=this.typeSupported,o={},l=this._initPTS;let d,c,u,h=!l||i,f="audio/mp4";if(h&&(d=c=1/0),e.config&&r.length){if(e.timescale=e.samplerate,"mp3"===e.segmentCodec)a.mpeg?(f="audio/mpeg",e.codec=""):a.mp3&&(e.codec="mp3");o.audio={id:"audio",container:f,codec:e.codec,initSegment:"mp3"===e.segmentCodec&&a.mpeg?new Uint8Array(0):BA.initSegment([e]),metadata:{channelCount:e.channelCount}},h&&(u=e.inputTimeScale,l&&u===l.timescale?h=!1:d=c=r[0].pts-Math.round(u*n))}if(t.sps&&t.pps&&s.length&&(t.timescale=t.inputTimeScale,o.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:BA.initSegment([t]),metadata:{width:t.width,height:t.height}},h))if(u=t.inputTimeScale,l&&u===l.timescale)h=!1;else{const e=this.getVideoStartPts(s),t=Math.round(u*n);c=Math.min(c,jA(s[0].dts,e)-t),d=Math.min(d,e-t)}if(Object.keys(o).length)return this.ISGenerated=!0,h?(this._initPTS={baseTime:d,timescale:u},this._initDTS={baseTime:c,timescale:u}):d=u=void 0,{tracks:o,initPTS:d,timescale:u}}remuxVideo(e,t,n,i){const r=e.inputTimeScale,s=e.samples,a=[],o=s.length,l=this._initPTS;let d,c,u=this.nextAvcDts,h=8,f=this.videoSampleDuration,p=Number.POSITIVE_INFINITY,m=Number.NEGATIVE_INFINITY,g=!1;if(!n||null===u){u=t*r-(s[0].pts-jA(s[0].dts,s[0].pts))}const v=l.baseTime*r/l.timescale;for(let e=0;e<o;e++){const t=s[e];t.pts=jA(t.pts-v,u),t.dts=jA(t.dts-v,u),t.dts<s[e>0?e-1:e].dts&&(g=!0)}g&&s.sort((function(e,t){const n=e.dts-t.dts,i=e.pts-t.pts;return n||i})),d=s[0].dts,c=s[s.length-1].dts;const y=c-d,b=y?Math.round(y/(o-1)):f||e.inputTimeScale/30;if(n){const e=d-u,t=e>b,n=e<-1;if((t||n)&&(t?Nb.warn(`AVC: ${VA(e,!0)} ms (${e}dts) hole between fragments detected, filling it`):Nb.warn(`AVC: ${VA(-e,!0)} ms (${e}dts) overlapping between fragments detected`),!n||u>=s[0].pts)){d=u;const t=s[0].pts-e;s[0].dts=d,s[0].pts=t,Nb.log(`Video: First PTS/DTS adjusted: ${VA(t,!0)}/${VA(d,!0)}, delta: ${VA(e,!0)} ms`)}}d=Math.max(0,d);let E=0,T=0;for(let e=0;e<o;e++){const t=s[e],n=t.units,i=n.length;let r=0;for(let e=0;e<i;e++)r+=n[e].data.length;T+=r,E+=i,t.length=r,t.dts=Math.max(t.dts,d),p=Math.min(t.pts,p),m=Math.max(t.pts,m)}c=s[o-1].dts;const _=T+4*E+8;let A;try{A=new Uint8Array(_)}catch(e){return void this.observer.emit(Ib.ERROR,Ib.ERROR,{type:Cb.MUX_ERROR,details:Db.REMUX_ALLOC_ERROR,fatal:!1,error:e,bytes:_,reason:`fail allocating video mdat ${_}`})}const S=new DataView(A.buffer);S.setUint32(0,_),A.set(BA.types.mdat,4);let k=!1,w=Number.POSITIVE_INFINITY,L=Number.POSITIVE_INFINITY,R=Number.NEGATIVE_INFINITY,I=Number.NEGATIVE_INFINITY;for(let e=0;e<o;e++){const t=s[e],n=t.units;let l,d=0;for(let e=0,t=n.length;e<t;e++){const t=n[e],i=t.data,r=t.data.byteLength;S.setUint32(h,r),h+=4,A.set(i,h),h+=r,d+=4+r}if(e<o-1)f=s[e+1].dts-t.dts,l=s[e+1].pts-t.pts;else{const n=this.config,a=e>0?t.dts-s[e-1].dts:b;if(l=e>0?t.pts-s[e-1].pts:b,n.stretchShortVideoTrack&&null!==this.nextAudioPts){const e=Math.floor(n.maxBufferHole*r),s=(i?p+i*r:this.nextAudioPts)-t.pts;s>e?(f=s-a,f<0?f=a:k=!0,Nb.log(`[mp4-remuxer]: It is approximately ${s/90} ms to the next segment; using duration ${f/90} ms for the last video frame.`)):f=a}else f=a}const c=Math.round(t.pts-t.dts);w=Math.min(w,f),R=Math.max(R,f),L=Math.min(L,l),I=Math.max(I,l),a.push(new zA(t.key,f,d,c))}if(a.length)if(WA){if(WA<70){const e=a[0].flags;e.dependsOn=2,e.isNonSync=0}}else if(GA&&I-L<R-w&&b/R<.025&&0===a[0].cts){Nb.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let e=d;for(let t=0,n=a.length;t<n;t++){const i=e+a[t].duration,r=e+a[t].cts;if(t<n-1){const e=i+a[t+1].cts;a[t].duration=e-r}else a[t].duration=t?a[t-1].duration:b;a[t].cts=0,e=i}}f=k||!f?b:f,this.nextAvcDts=u=c+f,this.videoSampleDuration=f,this.isVideoContiguous=!0;const C={data1:BA.moof(e.sequenceNumber++,d,Lb({},e,{samples:a})),data2:A,startPTS:p/r,endPTS:(m+f)/r,startDTS:d/r,endDTS:u/r,type:"video",hasAudio:!1,hasVideo:!0,nb:a.length,dropped:e.dropped};return e.samples=[],e.dropped=0,C}remuxAudio(e,t,n,i,r){const s=e.inputTimeScale,a=s/(e.samplerate?e.samplerate:s),o="aac"===e.segmentCodec?1024:1152,l=o*a,d=this._initPTS,c="mp3"===e.segmentCodec&&this.typeSupported.mpeg,u=[],h=void 0!==r;let f=e.samples,p=c?0:8,m=this.nextAudioPts||-1;const g=t*s,v=d.baseTime*s/d.timescale;if(this.isAudioContiguous=n=n||f.length&&m>0&&(i&&Math.abs(g-m)<9e3||Math.abs(jA(f[0].pts-v,g)-m)<20*l),f.forEach((function(e){e.pts=jA(e.pts-v,g)})),!n||m<0){if(f=f.filter((e=>e.pts>=0)),!f.length)return;m=0===r?0:i&&!h?Math.max(0,g):f[0].pts}if("aac"===e.segmentCodec){const t=this.config.maxAudioFramesDrift;for(let n=0,i=m;n<f.length;n++){const r=f[n],a=r.pts,o=a-i,d=Math.abs(1e3*o/s);if(o<=-t*l&&h)0===n&&(Nb.warn(`Audio frame @ ${(a/s).toFixed(3)}s overlaps nextAudioPts by ${Math.round(1e3*o/s)} ms.`),this.nextAudioPts=m=i=a);else if(o>=t*l&&d<1e4&&h){let t=Math.round(o/l);i=a-t*l,i<0&&(t--,i+=l),0===n&&(this.nextAudioPts=m=i),Nb.warn(`[mp4-remuxer]: Injecting ${t} audio frame @ ${(i/s).toFixed(3)}s due to ${Math.round(1e3*o/s)} ms gap.`);for(let s=0;s<t;s++){const t=Math.max(i,0);let s=FA.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);s||(Nb.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),s=r.unit.subarray()),f.splice(n,0,{unit:s,pts:t}),i+=l,n++}}r.pts=i,i+=l}}let y,b=null,E=null,T=0,_=f.length;for(;_--;)T+=f[_].unit.byteLength;for(let t=0,i=f.length;t<i;t++){const i=f[t],r=i.unit;let s=i.pts;if(null!==E){u[t-1].duration=Math.round((s-E)/a)}else{if(n&&"aac"===e.segmentCodec&&(s=m),b=s,!(T>0))return;T+=p;try{y=new Uint8Array(T)}catch(e){return void this.observer.emit(Ib.ERROR,Ib.ERROR,{type:Cb.MUX_ERROR,details:Db.REMUX_ALLOC_ERROR,fatal:!1,error:e,bytes:T,reason:`fail allocating audio mdat ${T}`})}if(!c){new DataView(y.buffer).setUint32(0,T),y.set(BA.types.mdat,4)}}y.set(r,p);const l=r.byteLength;p+=l,u.push(new zA(!0,o,l,0)),E=s}const A=u.length;if(!A)return;const S=u[u.length-1];this.nextAudioPts=m=E+a*S.duration;const k=c?new Uint8Array(0):BA.moof(e.sequenceNumber++,b/a,Lb({},e,{samples:u}));e.samples=[];const w=b/s,L=m/s,R={data1:k,data2:y,startPTS:w,endPTS:L,startDTS:w,endDTS:L,type:"audio",hasAudio:!0,hasVideo:!1,nb:A};return this.isAudioContiguous=!0,R}remuxEmptyAudio(e,t,n,i){const r=e.inputTimeScale,s=r/(e.samplerate?e.samplerate:r),a=this.nextAudioPts,o=this._initDTS,l=9e4*o.baseTime/o.timescale,d=(null!==a?a:i.startDTS*r)+l,c=i.endDTS*r+l,u=1024*s,h=Math.ceil((c-d)/u),f=FA.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(Nb.warn("[mp4-remuxer]: remux empty Audio"),!f)return void Nb.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec");const p=[];for(let e=0;e<h;e++){const t=d+e*u;p.push({unit:f,pts:t,dts:t})}return e.samples=p,this.remuxAudio(e,t,n,!1)}}function jA(e,t){let n;if(null===t)return e;for(n=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=n;return e}function qA(e,t,n,i){const r=e.samples.length;if(!r)return;const s=e.inputTimeScale;for(let a=0;a<r;a++){const r=e.samples[a];r.pts=jA(r.pts-n.baseTime*s/n.timescale,t*s)/s,r.dts=jA(r.dts-i.baseTime*s/i.timescale,t*s)/s}const a=e.samples;return e.samples=[],{samples:a}}function YA(e,t,n){const i=e.samples.length;if(!i)return;const r=e.inputTimeScale;for(let s=0;s<i;s++){const i=e.samples[s];i.pts=jA(i.pts-n.baseTime*r/n.timescale,t*r)/r}e.samples.sort(((e,t)=>e.pts-t.pts));const s=e.samples;return e.samples=[],{samples:s}}class zA{constructor(e,t,n,i){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=t,this.size=n,this.cts=i,this.flags=new XA(e)}}class XA{constructor(e){this.isLeading=0,this.isDependedOn=0,this.hasRedundancy=0,this.degradPrio=0,this.dependsOn=1,this.isNonSync=1,this.dependsOn=e?2:1,this.isNonSync=e?0:1}}function QA(e,t){const n=null==e?void 0:e.codec;return n&&n.length>4?n:"hvc1"===n||"hev1"===n?"hvc1.1.6.L120.90":"av01"===n?"av01.0.04M.08":"avc1"===n||t===Gb?"avc1.42e01e":"mp4a.40.5"}try{HA=self.performance.now.bind(self.performance)}catch(e){Nb.debug("Unable to use Performance API on this environment"),HA="undefined"!=typeof self&&self.Date.now}const ZA=[{demux:class{constructor(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}resetTimeStamp(){}resetInitSegment(e,t,n,i){const r=this.videoTrack=sA("video",1),s=this.audioTrack=sA("audio",1),a=this.txtTrack=sA("text",1);if(this.id3Track=sA("id3",1),this.timeOffset=0,null==e||!e.byteLength)return;const o=NE(e);if(o.video){const{id:e,timescale:t,codec:n}=o.video;r.id=e,r.timescale=a.timescale=t,r.codec=n}if(o.audio){const{id:e,timescale:t,codec:n}=o.audio;s.id=e,s.timescale=t,s.codec=n}a.id=RE.text,r.sampleDuration=0,r.duration=s.duration=i}resetContiguity(){this.remainderData=null}static probe(e){return PE(e=e.length>16384?e.subarray(0,16384):e,["moof"]).length>0}demux(e,t){this.timeOffset=t;let n=e;const i=this.videoTrack,r=this.txtTrack;if(this.config.progressive){this.remainderData&&(n=BE(this.remainderData,e));const t=function(e){const t={valid:null,remainder:null},n=PE(e,["moof"]);if(!n)return t;if(n.length<2)return t.remainder=e,t;const i=n[n.length-1];return t.valid=dE(e,0,i.byteOffset-8),t.remainder=dE(e,i.byteOffset-8),t}(n);this.remainderData=t.remainder,i.samples=t.valid||new Uint8Array}else i.samples=n;const s=this.extractID3Track(i,t);return r.samples=$E(t,i),{videoTrack:i,audioTrack:this.audioTrack,id3Track:s,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,t=this.videoTrack,n=this.txtTrack;t.samples=this.remainderData||new Uint8Array,this.remainderData=null;const i=this.extractID3Track(t,this.timeOffset);return n.samples=$E(e,t),{videoTrack:t,audioTrack:sA(),id3Track:i,textTrack:sA()}}extractID3Track(e,t){const n=this.id3Track;if(e.samples.length){const i=PE(e.samples,["emsg"]);i&&i.forEach((e=>{const i=function(e){const t=e[0];let n="",i="",r=0,s=0,a=0,o=0,l=0,d=0;if(0===t){for(;"\0"!==IE(e.subarray(d,d+1));)n+=IE(e.subarray(d,d+1)),d+=1;for(n+=IE(e.subarray(d,d+1)),d+=1;"\0"!==IE(e.subarray(d,d+1));)i+=IE(e.subarray(d,d+1)),d+=1;i+=IE(e.subarray(d,d+1)),d+=1,r=DE(e,12),s=DE(e,16),o=DE(e,20),l=DE(e,24),d=28}else if(1===t){d+=4,r=DE(e,d),d+=4;const t=DE(e,d);d+=4;const s=DE(e,d);for(d+=4,a=2**32*t+s,Number.isSafeInteger(a)||(a=Number.MAX_SAFE_INTEGER,Nb.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),o=DE(e,d),d+=4,l=DE(e,d),d+=4;"\0"!==IE(e.subarray(d,d+1));)n+=IE(e.subarray(d,d+1)),d+=1;for(n+=IE(e.subarray(d,d+1)),d+=1;"\0"!==IE(e.subarray(d,d+1));)i+=IE(e.subarray(d,d+1)),d+=1;i+=IE(e.subarray(d,d+1)),d+=1}return{schemeIdUri:n,value:i,timeScale:r,presentationTime:a,presentationTimeDelta:s,eventDuration:o,id:l,payload:e.subarray(d,e.byteLength)}}(e);if(gA.test(i.schemeIdUri)){const e=Rb(i.presentationTime)?i.presentationTime/i.timeScale:t+i.presentationTimeDelta/i.timeScale;let r=4294967295===i.eventDuration?Number.POSITIVE_INFINITY:i.eventDuration/i.timeScale;r<=.001&&(r=Number.POSITIVE_INFINITY);const s=i.payload;n.samples.push({data:s,len:s.byteLength,dts:e,pts:e,type:xT,duration:r})}}))}return n}demuxSampleAes(e,t,n){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){}},remux:class{constructor(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null}destroy(){}resetTimeStamp(e){this.initPTS=e,this.lastEndTime=null}resetNextTimestamp(){this.lastEndTime=null}resetInitSegment(e,t,n,i){this.audioCodec=t,this.videoCodec=n,this.generateInitSegment(function(e,t){if(!e||!t)return e;const n=t.keyId;n&&t.isCommonEncryption&&PE(e,["moov","trak"]).forEach((e=>{const t=PE(e,["mdia","minf","stbl","stsd"])[0].subarray(8);let i=PE(t,["enca"]);const r=i.length>0;r||(i=PE(t,["encv"])),i.forEach((e=>{PE(r?e.subarray(28):e.subarray(78),["sinf"]).forEach((e=>{const t=FE(e);if(t){const e=t.subarray(8,24);e.some((e=>0!==e))||(Nb.log(`[eme] Patching keyId in 'enc${r?"a":"v"}>sinf>>tenc' box: ${kE(e)} -> ${kE(n)}`),t.set(n,8))}}))}))}));return e}(e,i)),this.emitInitSegment=!0}generateInitSegment(e){let{audioCodec:t,videoCodec:n}=this;if(null==e||!e.byteLength)return this.initTracks=void 0,void(this.initData=void 0);const i=this.initData=NE(e);t||(t=QA(i.audio,Wb)),n||(n=QA(i.video,Gb));const r={};i.audio&&i.video?r.audiovideo={container:"video/mp4",codec:t+","+n,initSegment:e,id:"main"}:i.audio?r.audio={container:"audio/mp4",codec:t,initSegment:e,id:"audio"}:i.video?r.video={container:"video/mp4",codec:n,initSegment:e,id:"main"}:Nb.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=r}remux(e,t,n,i,r,s){var a,o;let{initPTS:l,lastEndTime:d}=this;const c={audio:void 0,video:void 0,text:i,id3:n,initSegment:void 0};Rb(d)||(d=this.lastEndTime=r||0);const u=t.samples;if(null==u||!u.length)return c;const h={initPTS:void 0,timescale:1};let f=this.initData;if(null!=(a=f)&&a.length||(this.generateInitSegment(u),f=this.initData),null==(o=f)||!o.length)return Nb.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),c;this.emitInitSegment&&(h.tracks=this.initTracks,this.emitInitSegment=!1);const p=function(e,t){let n=0,i=0,r=0;const s=PE(e,["moof","traf"]);for(let e=0;e<s.length;e++){const a=s[e],o=PE(a,["tfhd"])[0],l=t[DE(o,4)];if(!l)continue;const d=l.default,c=DE(o,0)|(null==d?void 0:d.flags);let u=null==d?void 0:d.duration;8&c&&(u=DE(o,2&c?12:8));const h=l.timescale||9e4,f=PE(a,["trun"]);for(let e=0;e<f.length;e++)n=UE(f[e]),!n&&u&&(n=u*DE(f[e],4)),l.type===Gb?i+=n/h:l.type===Wb&&(r+=n/h)}if(0===i&&0===r){let t=0;const n=PE(e,["sidx"]);for(let e=0;e<n.length;e++){const i=OE(n[e]);null!=i&&i.references&&(t+=i.references.reduce(((e,t)=>e+t.info.duration||0),0))}return t}return i||r}(u,f),m=function(e,t){return PE(t,["moof","traf"]).reduce(((t,n)=>{const i=PE(n,["tfdt"])[0],r=i[0],s=PE(n,["tfhd"]).reduce(((t,n)=>{const s=DE(n,4),a=e[s];if(a){let e=DE(i,4);if(1===r){if(e===wE)return Nb.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"),t;e*=wE+1,e+=DE(i,8)}const n=e/(a.timescale||9e4);if(isFinite(n)&&(null===t||n<t))return n}return t}),null);return null!==s&&isFinite(s)&&(null===t||s<t)?s:t}),null)}(f,u),g=null===m?r:m;(function(e,t,n,i){if(null===e)return!0;const r=Math.max(i,1),s=t-e.baseTime/e.timescale;return Math.abs(s-n)>r}(l,g,r,p)||h.timescale!==l.timescale&&s)&&(h.initPTS=g-r,l&&1===l.timescale&&Nb.warn("Adjusting initPTS by "+(h.initPTS-l.baseTime)),this.initPTS=l={baseTime:h.initPTS,timescale:1});const v=e?g-l.baseTime/l.timescale:d,y=v+p;!function(e,t,n){PE(t,["moof","traf"]).forEach((t=>{PE(t,["tfhd"]).forEach((i=>{const r=DE(i,4),s=e[r];if(!s)return;const a=s.timescale||9e4;PE(t,["tfdt"]).forEach((e=>{const t=e[0];let i=DE(e,4);if(0===t)i-=n*a,i=Math.max(i,0),ME(e,4,i);else{i*=Math.pow(2,32),i+=DE(e,8),i-=n*a,i=Math.max(i,0);const t=Math.floor(i/(wE+1)),r=Math.floor(i%(wE+1));ME(e,4,t),ME(e,8,r)}}))}))}))}(f,u,l.baseTime/l.timescale),p>0?this.lastEndTime=y:(Nb.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const b=!!f.audio,E=!!f.video;let T="";b&&(T+="audio"),E&&(T+="video");const _={data1:u,startPTS:v,startDTS:v,endPTS:y,endDTS:y,type:T,hasAudio:b,hasVideo:E,nb:1,dropped:0};return c.audio="audio"===_.type?_:void 0,c.video="audio"!==_.type?_:void 0,c.initSegment=h,c.id3=qA(n,r,l,l),i.samples.length&&(c.text=YA(i,r,l)),c}}},{demux:CA,remux:KA},{demux:class extends aA{constructor(e,t){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=t}resetInitSegment(e,t,n,i){super.resetInitSegment(e,t,n,i),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;let t=(hE(e,0)||[]).length;for(let n=e.length;t<n;t++)if(hA(e,t))return Nb.log("ADTS sync word found !"),!0;return!1}canParse(e,t){return function(e,t){return function(e,t){return t+5<e.length}(e,t)&&lA(e,t)&&cA(e,t)<=e.length-t}(e,t)}appendFrame(e,t,n){fA(e,this.observer,t,n,e.manifestCodec);const i=mA(e,t,n,this.basePTS,this.frameIndex);if(i&&0===i.missing)return i}},remux:KA},{demux:class extends aA{resetInitSegment(e,t,n,i){super.resetInitSegment(e,t,n,i),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;let t=(hE(e,0)||[]).length;for(let n=e.length;t<n;t++)if(wA(e,t))return Nb.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,t){return function(e,t){return SA(e,t)&&4<=e.length-t}(e,t)}appendFrame(e,t,n){if(null!==this.basePTS)return _A(e,t,n,this.basePTS,this.frameIndex)}},remux:KA}];class JA{constructor(e,t,n,i,r){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=n,this.vendor=i,this.id=r}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,t,n,i){const r=n.transmuxing;r.executeStart=HA();let s=new Uint8Array(e);const{currentTransmuxState:a,transmuxConfig:o}=this;i&&(this.currentTransmuxState=i);const{contiguous:l,discontinuity:d,trackSwitch:c,accurateTimeOffset:u,timeOffset:h,initSegmentChange:f}=i||a,{audioCodec:p,videoCodec:m,defaultInitPts:g,duration:v,initSegmentData:y}=o,b=function(e,t){let n=null;e.byteLength>0&&null!=t&&null!=t.key&&null!==t.iv&&null!=t.method&&(n=t);return n}(s,t);if(b&&"AES-128"===b.method){const e=this.getDecrypter();if(!e.isSync())return this.decryptionPromise=e.webCryptoDecrypt(s,b.key.buffer,b.iv.buffer).then((e=>{const t=this.push(e,null,n);return this.decryptionPromise=null,t})),this.decryptionPromise;{let t=e.softwareDecrypt(s,b.key.buffer,b.iv.buffer);if(n.part>-1&&(t=e.flush()),!t)return r.executeEnd=HA(),eS(n);s=new Uint8Array(t)}}const E=this.needsProbing(d,c);if(E){const e=this.configureTransmuxer(s);if(e)return Nb.warn(`[transmuxer] ${e.message}`),this.observer.emit(Ib.ERROR,Ib.ERROR,{type:Cb.MEDIA_ERROR,details:Db.FRAG_PARSING_ERROR,fatal:!1,error:e,reason:e.message}),r.executeEnd=HA(),eS(n)}(d||c||f||E)&&this.resetInitSegment(y,p,m,v,t),(d||f||E)&&this.resetInitialTimestamp(g),l||this.resetContiguity();const T=this.transmux(s,b,h,u,n),_=this.currentTransmuxState;return _.contiguous=!0,_.discontinuity=!1,_.trackSwitch=!1,r.executeEnd=HA(),T}flush(e){const t=e.transmuxing;t.executeStart=HA();const{decrypter:n,currentTransmuxState:i,decryptionPromise:r}=this;if(r)return r.then((()=>this.flush(e)));const s=[],{timeOffset:a}=i;if(n){const t=n.flush();t&&s.push(this.push(t,null,e))}const{demuxer:o,remuxer:l}=this;if(!o||!l)return t.executeEnd=HA(),[eS(e)];const d=o.flush(a);return tS(d)?d.then((t=>(this.flushRemux(s,t,e),s))):(this.flushRemux(s,d,e),s)}flushRemux(e,t,n){const{audioTrack:i,videoTrack:r,id3Track:s,textTrack:a}=t,{accurateTimeOffset:o,timeOffset:l}=this.currentTransmuxState;Nb.log(`[transmuxer.ts]: Flushed fragment ${n.sn}${n.part>-1?" p: "+n.part:""} of level ${n.level}`);const d=this.remuxer.remux(i,r,s,a,l,o,!0,this.id);e.push({remuxResult:d,chunkMeta:n}),n.transmuxing.executeEnd=HA()}resetInitialTimestamp(e){const{demuxer:t,remuxer:n}=this;t&&n&&(t.resetTimeStamp(e),n.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:t}=this;e&&t&&(e.resetContiguity(),t.resetNextTimestamp())}resetInitSegment(e,t,n,i,r){const{demuxer:s,remuxer:a}=this;s&&a&&(s.resetInitSegment(e,t,n,i),a.resetInitSegment(e,t,n,r))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,t,n,i,r){let s;return s=t&&"SAMPLE-AES"===t.method?this.transmuxSampleAes(e,t,n,i,r):this.transmuxUnencrypted(e,n,i,r),s}transmuxUnencrypted(e,t,n,i){const{audioTrack:r,videoTrack:s,id3Track:a,textTrack:o}=this.demuxer.demux(e,t,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(r,s,a,o,t,n,!1,this.id),chunkMeta:i}}transmuxSampleAes(e,t,n,i,r){return this.demuxer.demuxSampleAes(e,t,n).then((e=>({remuxResult:this.remuxer.remux(e.audioTrack,e.videoTrack,e.id3Track,e.textTrack,n,i,!1,this.id),chunkMeta:r})))}configureTransmuxer(e){const{config:t,observer:n,typeSupported:i,vendor:r}=this;let s;for(let t=0,n=ZA.length;t<n;t++)if(ZA[t].demux.probe(e)){s=ZA[t];break}if(!s)return new Error("Failed to find demuxer by probing fragment data");const a=this.demuxer,o=this.remuxer,l=s.remux,d=s.demux;o&&o instanceof l||(this.remuxer=new l(n,t,i,r)),a&&a instanceof d||(this.demuxer=new d(n,t,i),this.probe=d.probe)}needsProbing(e,t){return!this.demuxer||!this.remuxer||e||t}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new W_(this.config)),e}}const eS=e=>({remuxResult:{},chunkMeta:e});function tS(e){return"then"in e&&e.then instanceof Function}class nS{constructor(e,t,n,i,r){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=n,this.duration=i,this.defaultInitPts=r||null}}class iS{constructor(e,t,n,i,r,s){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=n,this.trackSwitch=i,this.timeOffset=r,this.initSegmentChange=s}}var rS={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,n="~";function i(){}function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function s(e,t,i,s,a){if("function"!=typeof i)throw new TypeError("The listener must be a function");var o=new r(i,s||e,a),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function o(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(n=!1)),o.prototype.eventNames=function(){var e,i,r=[];if(0===this._eventsCount)return r;for(i in e=this._events)t.call(e,i)&&r.push(n?i.slice(1):i);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},o.prototype.listeners=function(e){var t=n?n+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,s=i.length,a=new Array(s);r<s;r++)a[r]=i[r].fn;return a},o.prototype.listenerCount=function(e){var t=n?n+e:e,i=this._events[t];return i?i.fn?1:i.length:0},o.prototype.emit=function(e,t,i,r,s,a){var o=n?n+e:e;if(!this._events[o])return!1;var l,d,c=this._events[o],u=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),u){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,i),!0;case 4:return c.fn.call(c.context,t,i,r),!0;case 5:return c.fn.call(c.context,t,i,r,s),!0;case 6:return c.fn.call(c.context,t,i,r,s,a),!0}for(d=1,l=new Array(u-1);d<u;d++)l[d-1]=arguments[d];c.fn.apply(c.context,l)}else{var h,f=c.length;for(d=0;d<f;d++)switch(c[d].once&&this.removeListener(e,c[d].fn,void 0,!0),u){case 1:c[d].fn.call(c[d].context);break;case 2:c[d].fn.call(c[d].context,t);break;case 3:c[d].fn.call(c[d].context,t,i);break;case 4:c[d].fn.call(c[d].context,t,i,r);break;default:if(!l)for(h=1,l=new Array(u-1);h<u;h++)l[h-1]=arguments[h];c[d].fn.apply(c[d].context,l)}}return!0},o.prototype.on=function(e,t,n){return s(this,e,t,n,!1)},o.prototype.once=function(e,t,n){return s(this,e,t,n,!0)},o.prototype.removeListener=function(e,t,i,r){var s=n?n+e:e;if(!this._events[s])return this;if(!t)return a(this,s),this;var o=this._events[s];if(o.fn)o.fn!==t||r&&!o.once||i&&o.context!==i||a(this,s);else{for(var l=0,d=[],c=o.length;l<c;l++)(o[l].fn!==t||r&&!o[l].once||i&&o[l].context!==i)&&d.push(o[l]);d.length?this._events[s]=1===d.length?d[0]:d:a(this,s)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new i,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,e.exports=o}(rS);var sS=gb(rS.exports);const aS=JE()||{isTypeSupported:()=>!1};class oS{constructor(e,t,n,i){this.error=null,this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;const r=e.config;this.hls=e,this.id=t,this.useWorker=!!r.enableWorker,this.onTransmuxComplete=n,this.onFlush=i;const s=(e,t)=>{(t=t||{}).frag=this.frag,t.id=this.id,e===Ib.ERROR&&(this.error=t.error),this.hls.trigger(e,t)};this.observer=new sS,this.observer.on(Ib.FRAG_DECRYPTED,s),this.observer.on(Ib.ERROR,s);const a={mp4:aS.isTypeSupported("video/mp4"),mpeg:aS.isTypeSupported("audio/mpeg"),mp3:aS.isTypeSupported('audio/mp4; codecs="mp3"')},o=navigator.vendor;if(this.useWorker&&"undefined"!=typeof Worker){if(r.workerPath||"function"==typeof __HLS_WORKER_BUNDLE__){try{r.workerPath?(Nb.log(`loading Web Worker ${r.workerPath} for "${t}"`),this.workerContext=function(e){const t=new self.URL(e,self.location.href).href;return{worker:new self.Worker(t),scriptURL:t}}(r.workerPath)):(Nb.log(`injecting Web Worker for "${t}"`),this.workerContext=function(){const e=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),t=self.URL.createObjectURL(e);return{worker:new self.Worker(t),objectURL:t}}()),this.onwmsg=e=>this.onWorkerMessage(e);const{worker:e}=this.workerContext;e.addEventListener("message",this.onwmsg),e.onerror=e=>{const n=new Error(`${e.message}  (${e.filename}:${e.lineno})`);r.enableWorker=!1,Nb.warn(`Error in "${t}" Web Worker, fallback to inline`),this.hls.trigger(Ib.ERROR,{type:Cb.OTHER_ERROR,details:Db.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:n})},e.postMessage({cmd:"init",typeSupported:a,vendor:o,id:t,config:JSON.stringify(r)})}catch(e){Nb.warn(`Error setting up "${t}" Web Worker, fallback to inline`,e),this.resetWorker(),this.error=null,this.transmuxer=new JA(this.observer,a,r,o,t)}return}}this.transmuxer=new JA(this.observer,a,r,o,t)}resetWorker(){if(this.workerContext){const{worker:e,objectURL:t}=this.workerContext;t&&self.URL.revokeObjectURL(t),e.removeEventListener("message",this.onwmsg),e.onerror=null,e.terminate(),this.workerContext=null}}destroy(){if(this.workerContext)this.resetWorker(),this.onwmsg=void 0;else{const e=this.transmuxer;e&&(e.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null}push(e,t,n,i,r,s,a,o,l,d){var c,u;l.transmuxing.start=self.performance.now();const{transmuxer:h}=this,f=s?s.start:r.start,p=r.decryptdata,m=this.frag,g=!(m&&r.cc===m.cc),v=!(m&&l.level===m.level),y=m?l.sn-m.sn:-1,b=this.part?l.part-this.part.index:-1,E=0===y&&l.id>1&&l.id===(null==m?void 0:m.stats.chunkCount),T=!v&&(1===y||0===y&&(1===b||E&&b<=0)),_=self.performance.now();(v||y||0===r.stats.parsing.start)&&(r.stats.parsing.start=_),!s||!b&&T||(s.stats.parsing.start=_);const A=!(m&&(null==(c=r.initSegment)?void 0:c.url)===(null==(u=m.initSegment)?void 0:u.url)),S=new iS(g,T,o,v,f,A);if(!T||g||A){Nb.log(`[transmuxer-interface, ${r.type}]: Starting new transmux session for sn: ${l.sn} p: ${l.part} level: ${l.level} id: ${l.id}\n        discontinuity: ${g}\n        trackSwitch: ${v}\n        contiguous: ${T}\n        accurateTimeOffset: ${o}\n        timeOffset: ${f}\n        initSegmentChange: ${A}`);const e=new nS(n,i,t,a,d);this.configureTransmuxer(e)}if(this.frag=r,this.part=s,this.workerContext)this.workerContext.worker.postMessage({cmd:"demux",data:e,decryptdata:p,chunkMeta:l,state:S},e instanceof ArrayBuffer?[e]:[]);else if(h){const t=h.push(e,p,l,S);tS(t)?(h.async=!0,t.then((e=>{this.handleTransmuxComplete(e)})).catch((e=>{this.transmuxerError(e,l,"transmuxer-interface push error")}))):(h.async=!1,this.handleTransmuxComplete(t))}}flush(e){e.transmuxing.start=self.performance.now();const{transmuxer:t}=this;if(this.workerContext)this.workerContext.worker.postMessage({cmd:"flush",chunkMeta:e});else if(t){let n=t.flush(e);tS(n)||t.async?(tS(n)||(n=Promise.resolve(n)),n.then((t=>{this.handleFlushResult(t,e)})).catch((t=>{this.transmuxerError(t,e,"transmuxer-interface flush error")}))):this.handleFlushResult(n,e)}}transmuxerError(e,t,n){this.hls&&(this.error=e,this.hls.trigger(Ib.ERROR,{type:Cb.MEDIA_ERROR,details:Db.FRAG_PARSING_ERROR,chunkMeta:t,fatal:!1,error:e,err:e,reason:n}))}handleFlushResult(e,t){e.forEach((e=>{this.handleTransmuxComplete(e)})),this.onFlush(t)}onWorkerMessage(e){const t=e.data,n=this.hls;switch(t.event){case"init":{var i;const e=null==(i=this.workerContext)?void 0:i.objectURL;e&&self.URL.revokeObjectURL(e);break}case"transmuxComplete":this.handleTransmuxComplete(t.data);break;case"flush":this.onFlush(t.data);break;case"workerLog":Nb[t.data.logType]&&Nb[t.data.logType](t.data.message);break;default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,n.trigger(t.event,t.data)}}configureTransmuxer(e){const{transmuxer:t}=this;this.workerContext?this.workerContext.worker.postMessage({cmd:"configure",config:e}):t&&t.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}class lS{constructor(e,t,n,i){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=e,this.media=t,this.fragmentTracker=n,this.hls=i}destroy(){this.media=null,this.hls=this.fragmentTracker=null}poll(e,t){const{config:n,media:i,stalled:r}=this;if(null===i)return;const{currentTime:s,seeking:a}=i,o=this.seeking&&!a,l=!this.seeking&&a;if(this.seeking=a,s!==e){if(this.moved=!0,null!==r){if(this.stallReported){const e=self.performance.now()-r;Nb.warn(`playback not stuck anymore @${s}, after ${Math.round(e)}ms`),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}return}if(l||o)return void(this.stalled=null);if(i.paused&&!a||i.ended||0===i.playbackRate||!M_.getBuffered(i).length)return;const d=M_.bufferInfo(i,s,0),c=d.len>0,u=d.nextStart||0;if(!c&&!u)return;if(a){const e=d.len>2,n=!u||t&&t.start<=s||u-s>2&&!this.fragmentTracker.getPartialFragment(s);if(e||n)return;this.moved=!1}if(!this.moved&&null!==this.stalled){var h;const e=Math.max(u,d.start||0)-s,t=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,n=(null==t||null==(h=t.details)?void 0:h.live)?2*t.details.targetduration:2,i=this.fragmentTracker.getPartialFragment(s);if(e>0&&(e<=n||i))return void this._trySkipBufferHole(i)}const f=self.performance.now();if(null===r)return void(this.stalled=f);const p=f-r;if(!a&&p>=250&&(this._reportStall(d),!this.media))return;const m=M_.bufferInfo(i,s,n.maxBufferHole);this._tryFixBufferStall(m,p)}_tryFixBufferStall(e,t){const{config:n,fragmentTracker:i,media:r}=this;if(null===r)return;const s=r.currentTime,a=i.getPartialFragment(s);if(a){if(this._trySkipBufferHole(a)||!this.media)return}(e.len>n.maxBufferHole||e.nextStart&&e.nextStart-s<n.maxBufferHole)&&t>1e3*n.highBufferWatchdogPeriod&&(Nb.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}_reportStall(e){const{hls:t,media:n,stallReported:i}=this;if(!i&&n){this.stallReported=!0;const i=new Error(`Playback stalling at @${n.currentTime} due to low buffer (${JSON.stringify(e)})`);Nb.warn(i.message),t.trigger(Ib.ERROR,{type:Cb.MEDIA_ERROR,details:Db.BUFFER_STALLED_ERROR,fatal:!1,error:i,buffer:e.len})}}_trySkipBufferHole(e){const{config:t,hls:n,media:i}=this;if(null===i)return 0;const r=i.currentTime,s=M_.bufferInfo(i,r,0),a=r<s.start?s.start:s.nextStart;if(a){const o=s.len<=t.maxBufferHole,l=s.len>0&&s.len<1&&i.readyState<3,d=a-r;if(d>0&&(o||l)){if(d>t.maxBufferHole){const{fragmentTracker:t}=this;let n=!1;if(0===r){const e=t.getAppendedFrag(0,ET);e&&a<e.end&&(n=!0)}if(!n){const n=e||t.getAppendedFrag(r,ET);if(n){let e=!1,i=n.end;for(;i<a;){const n=t.getPartialFragment(i);if(!n){e=!0;break}i+=n.duration}if(e)return 0}}}const s=Math.max(a+.05,r+.1);if(Nb.warn(`skipping hole, adjusting currentTime from ${r} to ${s}`),this.moved=!0,this.stalled=null,i.currentTime=s,e&&!e.gap){const t=new Error(`fragment loaded with buffer holes, seeking from ${r} to ${s}`);n.trigger(Ib.ERROR,{type:Cb.MEDIA_ERROR,details:Db.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:t,reason:t.message,frag:e})}return s}}return 0}_tryNudgeBuffer(){const{config:e,hls:t,media:n,nudgeRetry:i}=this;if(null===n)return;const r=n.currentTime;if(this.nudgeRetry++,i<e.nudgeMaxRetry){const s=r+(i+1)*e.nudgeOffset,a=new Error(`Nudging 'currentTime' from ${r} to ${s}`);Nb.warn(a.message),n.currentTime=s,t.trigger(Ib.ERROR,{type:Cb.MEDIA_ERROR,details:Db.BUFFER_NUDGE_ON_STALL,error:a,fatal:!1})}else{const n=new Error(`Playhead still not moving while enough data buffered @${r} after ${e.nudgeMaxRetry} nudges`);Nb.error(n.message),t.trigger(Ib.ERROR,{type:Cb.MEDIA_ERROR,details:Db.BUFFER_STALLED_ERROR,error:n,fatal:!0})}}}class dS extends iA{constructor(e,t,n){super(e,t,n,"[stream-controller]",ET),this.audioCodecSwap=!1,this.gapController=null,this.level=-1,this._forceStartLoad=!1,this.altAudio=!1,this.audioOnly=!1,this.fragPlaying=null,this.onvplaying=null,this.onvseeked=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(Ib.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Ib.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Ib.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Ib.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Ib.LEVEL_LOADING,this.onLevelLoading,this),e.on(Ib.LEVEL_LOADED,this.onLevelLoaded,this),e.on(Ib.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(Ib.ERROR,this.onError,this),e.on(Ib.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(Ib.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(Ib.BUFFER_CREATED,this.onBufferCreated,this),e.on(Ib.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(Ib.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(Ib.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(Ib.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Ib.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Ib.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Ib.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Ib.LEVEL_LOADED,this.onLevelLoaded,this),e.off(Ib.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(Ib.ERROR,this.onError,this),e.off(Ib.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(Ib.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(Ib.BUFFER_CREATED,this.onBufferCreated,this),e.off(Ib.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(Ib.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(Ib.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this._unregisterListeners(),this.onMediaDetaching()}startLoad(e){if(this.levels){const{lastCurrentTime:t,hls:n}=this;if(this.stopLoad(),this.setInterval(100),this.level=-1,!this.startFragRequested){let e=n.startLevel;-1===e&&(n.config.testBandwidth&&this.levels.length>1?(e=0,this.bitrateTest=!0):e=n.nextAutoLevel),this.level=n.nextLoadLevel=e,this.loadedmetadata=!1}t>0&&-1===e&&(this.log(`Override startPosition with lastCurrentTime @${t.toFixed(3)}`),e=t),this.state=j_,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this._forceStartLoad=!0,this.state=K_}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case nA:{var e;const{levels:t,level:n}=this,i=null==t||null==(e=t[n])?void 0:e.details;if(i&&(!i.live||this.levelLastLoaded===this.level)){if(this.waitForCdnTuneIn(i))break;this.state=j_;break}if(this.hls.nextLoadLevel!==this.level){this.state=j_;break}break}case z_:{var t;const e=self.performance.now(),n=this.retryDate;(!n||e>=n||null!=(t=this.media)&&t.seeking)&&(this.resetStartWhenNotLoaded(this.level),this.state=j_)}}this.state===j_&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){super.onTickEnd(),this.checkBuffer(),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:t,levels:n,media:i}=this,{config:r,nextLoadLevel:s}=e;if(null===t||!i&&(this.startFragRequested||!r.startFragPrefetch))return;if(this.altAudio&&this.audioOnly)return;if(null==n||!n[s])return;const a=n[s],o=this.getMainFwdBufferInfo();if(null===o)return;const l=this.getLevelDetails();if(l&&this._streamEnded(o,l)){const e={};return this.altAudio&&(e.type="video"),this.hls.trigger(Ib.BUFFER_EOS,e),void(this.state=J_)}e.loadLevel!==s&&-1===e.manualLevel&&this.log(`Adapting to level ${s} from level ${this.level}`),this.level=e.nextLoadLevel=s;const d=a.details;if(!d||this.state===nA||d.live&&this.levelLastLoaded!==s)return this.level=s,void(this.state=nA);const c=o.len,u=this.getMaxBufferLength(a.maxBitrate);if(c>=u)return;this.backtrackFragment&&this.backtrackFragment.start>o.end&&(this.backtrackFragment=null);const h=this.backtrackFragment?this.backtrackFragment.start:o.end;let f=this.getNextFragment(h,d);if(this.couldBacktrack&&!this.fragPrevious&&f&&"initSegment"!==f.sn&&this.fragmentTracker.getState(f)!==T_){var p;const e=(null!=(p=this.backtrackFragment)?p:f).sn-d.startSN,t=d.fragments[e-1];t&&f.cc===t.cc&&(f=t,this.fragmentTracker.removeFragment(t))}else this.backtrackFragment&&o.len&&(this.backtrackFragment=null);if(f&&this.isLoopLoading(f,h)){if(!f.gap){const e=this.audioOnly&&!this.altAudio?Wb:Gb,t=(e===Gb?this.videoBuffer:this.mediaBuffer)||this.media;t&&this.afterBufferFlushed(t,e,ET)}f=this.getNextFragmentLoopLoading(f,d,o,ET,u)}f&&(!f.initSegment||f.initSegment.data||this.bitrateTest||(f=f.initSegment),this.loadFragment(f,a,h))}loadFragment(e,t,n){const i=this.fragmentTracker.getState(e);this.fragCurrent=e,i===y_||i===E_?"initSegment"===e.sn?this._loadInitSegment(e,t):this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,t)):(this.startFragRequested=!0,super.loadFragment(e,t,n)):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,ET)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:t}=this;if(null!=t&&t.readyState){let n;const i=this.getAppendedFrag(t.currentTime);i&&i.start>1&&this.flushMainBuffer(0,i.start-1);const r=this.getLevelDetails();if(null!=r&&r.live){const e=this.getMainFwdBufferInfo();if(!e||e.len<2*r.targetduration)return}if(!t.paused&&e){const t=e[this.hls.nextLoadLevel],i=this.fragLastKbps;n=i&&this.fragCurrent?this.fragCurrent.duration*t.maxBitrate/(1e3*i)+1:0}else n=0;const s=this.getBufferedFrag(t.currentTime+n);if(s){const e=this.followingBufferedFrag(s);if(e){this.abortCurrentFrag();const t=e.maxStartPTS?e.maxStartPTS:e.start,n=e.duration,i=Math.max(s.end,t+Math.min(Math.max(n-this.config.maxFragLookUpTolerance,.5*n),.75*n));this.flushMainBuffer(i,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case q_:case Y_:case z_:case Q_:case Z_:this.state=j_}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,t){super.flushMainBuffer(e,t,this.altAudio?"video":null)}onMediaAttached(e,t){super.onMediaAttached(e,t);const n=t.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),n.addEventListener("playing",this.onvplaying),n.addEventListener("seeked",this.onvseeked),this.gapController=new lS(this.config,n,this.fragmentTracker,this.hls)}onMediaDetaching(){const{media:e}=this;e&&this.onvplaying&&this.onvseeked&&(e.removeEventListener("playing",this.onvplaying),e.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),super.onMediaDetaching()}onMediaPlaying(){this.tick()}onMediaSeeked(){const e=this.media,t=e?e.currentTime:null;Rb(t)&&this.log(`Media seeked to ${t.toFixed(3)}`);const n=this.getMainFwdBufferInfo();null!==n&&0!==n.len?this.tick():this.warn(`Main forward buffer length on "seeked" event ${n?n.len:"empty"})`)}onManifestLoading(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(Ib.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=0,this.levels=this.fragPlaying=this.backtrackFragment=null,this.altAudio=this.audioOnly=!1}onManifestParsed(e,t){let n,i=!1,r=!1;t.levels.forEach((e=>{n=e.audioCodec,n&&(-1!==n.indexOf("mp4a.40.2")&&(i=!0),-1!==n.indexOf("mp4a.40.5")&&(r=!0))})),this.audioCodecSwitch=i&&r&&!function(){var e;const t=rA();return"function"==typeof(null==t||null==(e=t.prototype)?void 0:e.changeType)}(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1}onLevelLoading(e,t){const{levels:n}=this;if(!n||this.state!==j_)return;const i=n[t.level];(!i.details||i.details.live&&this.levelLastLoaded!==t.level||this.waitForCdnTuneIn(i.details))&&(this.state=nA)}onLevelLoaded(e,t){var n;const{levels:i}=this,r=t.level,s=t.details,a=s.totalduration;if(!i)return void this.warn(`Levels were reset while loading level ${r}`);this.log(`Level ${r} loaded [${s.startSN},${s.endSN}]${s.lastPartSn?`[part-${s.lastPartSn}-${s.lastPartIndex}]`:""}, cc [${s.startCC}, ${s.endCC}] duration:${a}`);const o=i[r],l=this.fragCurrent;!l||this.state!==Y_&&this.state!==z_||l.level===t.level&&l.urlId===o.urlId||!l.loader||this.abortCurrentFrag();let d=0;if(s.live||null!=(n=o.details)&&n.live){if(this.checkLiveUpdate(s),s.deltaUpdateFailed)return;d=this.alignPlaylists(s,o.details)}if(o.details=s,this.levelLastLoaded=r,this.hls.trigger(Ib.LEVEL_UPDATED,{details:s,level:r}),this.state===nA){if(this.waitForCdnTuneIn(s))return;this.state=j_}this.startFragRequested?s.live&&this.synchronizeToLiveEdge(s):this.setStartPosition(s,d),this.tick()}_handleFragmentLoadProgress(e){var t;const{frag:n,part:i,payload:r}=e,{levels:s}=this;if(!s)return void this.warn(`Levels were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);const a=s[n.level],o=a.details;if(!o)return this.warn(`Dropping fragment ${n.sn} of level ${n.level} after level details were reset`),void this.fragmentTracker.removeFragment(n);const l=a.videoCodec,d=o.PTSKnown||!o.live,c=null==(t=n.initSegment)?void 0:t.data,u=this._getAudioCodec(a),h=this.transmuxer=this.transmuxer||new oS(this.hls,ET,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),f=i?i.index:-1,p=-1!==f,m=new P_(n.level,n.sn,n.stats.chunkCount,r.byteLength,f,p),g=this.initPTS[n.cc];h.push(r,c,u,l,n,i,o.totalduration,d,m,g)}onAudioTrackSwitching(e,t){const n=this.altAudio;if(!!!t.url){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const e=this.fragCurrent;e&&(this.log("Switching to main audio track, cancel main fragment load"),e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();const e=this.hls;n&&(e.trigger(Ib.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null}),this.fragmentTracker.removeAllFragments()),e.trigger(Ib.AUDIO_TRACK_SWITCHED,t)}}onAudioTrackSwitched(e,t){const n=t.id,i=!!this.hls.audioTracks[n].url;if(i){const e=this.videoBuffer;e&&this.mediaBuffer!==e&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=e)}this.altAudio=i,this.tick()}onBufferCreated(e,t){const n=t.tracks;let i,r,s=!1;for(const e in n){const t=n[e];if("main"===t.id){if(r=e,i=t,"video"===e){const t=n[e];t&&(this.videoBuffer=t.buffer)}}else s=!0}s&&i?(this.log(`Alternate track found, use ${r}.buffered to schedule main fragment loading`),this.mediaBuffer=i.buffer):this.mediaBuffer=this.media}onFragBuffered(e,t){const{frag:n,part:i}=t;if(n&&n.type!==ET)return;if(this.fragContextChanged(n))return this.warn(`Fragment ${n.sn}${i?" p: "+i.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}`),void(this.state===Z_&&(this.state=j_));const r=i?i.stats:n.stats;this.fragLastKbps=Math.round(8*r.total/(r.buffering.end-r.loading.first)),"initSegment"!==n.sn&&(this.fragPrevious=n),this.fragBufferedComplete(n,i)}onError(e,t){var n;if(t.fatal)this.state=eA;else switch(t.details){case Db.FRAG_GAP:case Db.FRAG_PARSING_ERROR:case Db.FRAG_DECRYPT_ERROR:case Db.FRAG_LOAD_ERROR:case Db.FRAG_LOAD_TIMEOUT:case Db.KEY_LOAD_ERROR:case Db.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(ET,t);break;case Db.LEVEL_LOAD_ERROR:case Db.LEVEL_LOAD_TIMEOUT:case Db.LEVEL_PARSING_ERROR:t.levelRetry||this.state!==nA||(null==(n=t.context)?void 0:n.type)!==vT||(this.state=j_);break;case Db.BUFFER_FULL_ERROR:if(!t.parent||"main"!==t.parent)return;this.reduceLengthAndFlushBuffer(t)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case Db.INTERNAL_EXCEPTION:this.recoverWorkerError(t)}}checkBuffer(){const{media:e,gapController:t}=this;if(e&&t&&e.readyState){if(this.loadedmetadata||!M_.getBuffered(e).length){const e=this.state!==j_?this.fragCurrent:null;t.poll(this.lastCurrentTime,e)}this.lastCurrentTime=e.currentTime}}onFragLoadEmergencyAborted(){this.state=j_,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()}onBufferFlushed(e,{type:t}){if(t!==Wb||this.audioOnly&&!this.altAudio){const e=(t===Gb?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(e,t,ET)}}onLevelsUpdated(e,t){this.levels=t.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const t=e.currentTime;let n=this.startPosition;if(n>=0&&t<n){if(e.seeking)return void this.log(`could not seek to ${n}, already seeking at ${t}`);const i=M_.getBuffered(e),r=(i.length?i.start(0):0)-n;r>0&&(r<this.config.maxBufferHole||r<this.config.maxFragLookUpTolerance)&&(this.log(`adjusting start position by ${r} to match buffer start`),n+=r,this.startPosition=n),this.log(`seek to target start position ${n} from current time ${t}`),e.currentTime=n}}_getAudioCodec(e){let t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),t}_loadBitrateTestFrag(e,t){e.bitrateTest=!0,this._doFragLoad(e,t).then((n=>{const{hls:i}=this;if(!n||this.fragContextChanged(e))return;t.fragmentError=0,this.state=j_,this.startFragRequested=!1,this.bitrateTest=!1;const r=e.stats;r.parsing.start=r.parsing.end=r.buffering.start=r.buffering.end=self.performance.now(),i.trigger(Ib.FRAG_LOADED,n),e.bitrateTest=!1}))}_handleTransmuxComplete(e){var t;const n="main",{hls:i}=this,{remuxResult:r,chunkMeta:s}=e,a=this.getCurrentContext(s);if(!a)return void this.resetWhenMissingContext(s);const{frag:o,part:l,level:d}=a,{video:c,text:u,id3:h,initSegment:f}=r,{details:p}=d,m=this.altAudio?void 0:r.audio;if(this.fragContextChanged(o))this.fragmentTracker.removeFragment(o);else{if(this.state=Q_,f){if(null!=f&&f.tracks){const e=o.initSegment||o;this._bufferInitSegment(d,f.tracks,e,s),i.trigger(Ib.FRAG_PARSING_INIT_SEGMENT,{frag:e,id:n,tracks:f.tracks})}const e=f.initPTS,t=f.timescale;Rb(e)&&(this.initPTS[o.cc]={baseTime:e,timescale:t},i.trigger(Ib.INIT_PTS_FOUND,{frag:o,id:n,initPTS:e,timescale:t}))}if(c&&p&&"initSegment"!==o.sn){const e=p.fragments[o.sn-1-p.startSN],t=o.sn===p.startSN,n=!e||o.cc>e.cc;if(!1!==r.independent){const{startPTS:e,endPTS:i,startDTS:r,endDTS:a}=c;if(l)l.elementaryStreams[c.type]={startPTS:e,endPTS:i,startDTS:r,endDTS:a};else if(c.firstKeyFrame&&c.independent&&1===s.id&&!n&&(this.couldBacktrack=!0),c.dropped&&c.independent){const r=this.getMainFwdBufferInfo(),s=(r?r.end:this.getLoadPosition())+this.config.maxBufferHole,l=c.firstKeyFramePTS?c.firstKeyFramePTS:e;if(!t&&s<l-this.config.maxBufferHole&&!n)return void this.backtrack(o);n&&(o.gap=!0),o.setElementaryStreamInfo(c.type,o.start,i,o.start,a,!0)}o.setElementaryStreamInfo(c.type,e,i,r,a),this.backtrackFragment&&(this.backtrackFragment=o),this.bufferFragmentData(c,o,l,s,t||n)}else{if(!t&&!n)return void this.backtrack(o);o.gap=!0}}if(m){const{startPTS:e,endPTS:t,startDTS:n,endDTS:i}=m;l&&(l.elementaryStreams[Wb]={startPTS:e,endPTS:t,startDTS:n,endDTS:i}),o.setElementaryStreamInfo(Wb,e,t,n,i),this.bufferFragmentData(m,o,l,s)}if(p&&null!=h&&null!=(t=h.samples)&&t.length){const e={id:n,frag:o,details:p,samples:h.samples};i.trigger(Ib.FRAG_PARSING_METADATA,e)}if(p&&u){const e={id:n,frag:o,details:p,samples:u.samples};i.trigger(Ib.FRAG_PARSING_USERDATA,e)}}}_bufferInitSegment(e,t,n,i){if(this.state!==Q_)return;this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&delete t.audio;const{audio:r,video:s,audiovideo:a}=t;if(r){let t=e.audioCodec;const n=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(t&&(t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),1!==r.metadata.channelCount&&-1===n.indexOf("firefox")&&(t="mp4a.40.5")),-1!==n.indexOf("android")&&"audio/mpeg"!==r.container&&(t="mp4a.40.2",this.log(`Android: force audio codec to ${t}`)),e.audioCodec&&e.audioCodec!==t&&this.log(`Swapping manifest audio codec "${e.audioCodec}" for "${t}"`),r.levelCodec=t,r.id="main",this.log(`Init audio buffer, container:${r.container}, codecs[selected/level/parsed]=[${t||""}/${e.audioCodec||""}/${r.codec}]`)}s&&(s.levelCodec=e.videoCodec,s.id="main",this.log(`Init video buffer, container:${s.container}, codecs[level/parsed]=[${e.videoCodec||""}/${s.codec}]`)),a&&this.log(`Init audiovideo buffer, container:${a.container}, codecs[level/parsed]=[${e.attrs.CODECS||""}/${a.codec}]`),this.hls.trigger(Ib.BUFFER_CODECS,t),Object.keys(t).forEach((e=>{const r=t[e].initSegment;null!=r&&r.byteLength&&this.hls.trigger(Ib.BUFFER_APPENDING,{type:e,data:r,frag:n,part:null,chunkMeta:i,parent:n.type})})),this.tick()}getMainFwdBufferInfo(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,ET)}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=j_}checkFragmentChanged(){const e=this.media;let t=null;if(e&&e.readyState>1&&!1===e.seeking){const n=e.currentTime;if(M_.isBuffered(e,n)?t=this.getAppendedFrag(n):M_.isBuffered(e,n+.1)&&(t=this.getAppendedFrag(n+.1)),t){this.backtrackFragment=null;const e=this.fragPlaying,n=t.level;e&&t.sn===e.sn&&e.level===n&&t.urlId===e.urlId||(this.fragPlaying=t,this.hls.trigger(Ib.FRAG_CHANGED,{frag:t}),e&&e.level===n||this.hls.trigger(Ib.LEVEL_SWITCHED,{level:n}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){const e=this.media;return e?this.fragPlaying||this.getAppendedFrag(e.currentTime):null}get currentProgramDateTime(){const e=this.media;if(e){const t=e.currentTime,n=this.currentFrag;if(n&&Rb(t)&&Rb(n.programDateTime)){const e=n.programDateTime+1e3*(t-n.start);return new Date(e)}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class cS{constructor(e,t=0,n=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=n}sample(e,t){const n=Math.pow(this.alpha_,e);this.estimate_=t*(1-n)+n*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class uS{constructor(e,t,n,i=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new cS(e),this.fast_=new cS(t),this.defaultTTFB_=i,this.ttfb_=new cS(e)}update(e,t){const{slow_:n,fast_:i,ttfb_:r}=this;n.halfLife!==e&&(this.slow_=new cS(e,n.getEstimate(),n.getTotalWeight())),i.halfLife!==t&&(this.fast_=new cS(t,i.getEstimate(),i.getTotalWeight())),r.halfLife!==e&&(this.ttfb_=new cS(e,r.getEstimate(),r.getTotalWeight()))}sample(e,t){const n=(e=Math.max(e,this.minDelayMs_))/1e3,i=8*t/n;this.fast_.sample(n,i),this.slow_.sample(n,i)}sampleTTFB(e){const t=e/1e3,n=Math.sqrt(2)*Math.exp(-Math.pow(t,2)/2);this.ttfb_.sample(n,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}destroy(){}}class hS{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:t}=this;let n;return e.length?(n=1===e.length?e[0]:function(e,t){const n=new Uint8Array(t);let i=0;for(let t=0;t<e.length;t++){const r=e[t];n.set(r,i),i+=r.length}return n}(e,t),this.reset(),n):new Uint8Array(0)}reset(){this.chunks.length=0,this.dataLength=0}}function fS(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!pS(e[n].attrs,t[n].attrs))return!1;return!0}function pS(e,t){const n=e["STABLE-RENDITION-ID"];return n?n===t["STABLE-RENDITION-ID"]:!["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED"].some((n=>e[n]!==t[n]))}class mS{constructor(e){this.buffered=void 0;const t=(t,n,i)=>{if((n>>>=0)>i-1)throw new DOMException(`Failed to execute '${t}' on 'TimeRanges': The index provided (${n}) is greater than the maximum bound (${i})`);return e[n][t]};this.buffered={get length(){return e.length},end:n=>t("end",n,e.length),start:n=>t("start",n,e.length)}}}function gS(e){const t=[];for(let n=0;n<e.length;n++){const i=e[n];"subtitles"!==i.kind&&"captions"!==i.kind||!i.label||t.push(e[n])}return t}class vS{constructor(e){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=e}append(e,t){const n=this.queues[t];n.push(e),1===n.length&&this.buffers[t]&&this.executeNext(t)}insertAbort(e,t){this.queues[t].unshift(e),this.executeNext(t)}appendBlocker(e){let t;const n=new Promise((e=>{t=e})),i={execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};return this.append(i,e),n}executeNext(e){const{buffers:t,queues:n}=this,i=t[e],r=n[e];if(r.length){const t=r[0];try{t.execute()}catch(n){Nb.warn("[buffer-operation-queue]: Unhandled exception executing the current operation"),t.onError(n),null!=i&&i.updating||(r.shift(),this.executeNext(e))}}}shiftAndExecuteNext(e){this.queues[e].shift(),this.executeNext(e)}current(e){return this.queues[e][0]}}const yS=JE(),bS=/([ha]vc.)(?:\.[^.,]+)+/;const ES={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},TS=function(e){let t=e;return ES.hasOwnProperty(e)&&(t=ES[e]),String.fromCharCode(t)},_S=15,AS=100,SS={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},kS={17:2,18:4,21:6,22:8,23:10,19:13,20:15},wS={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},LS={25:2,26:4,29:6,30:8,31:10,27:13,28:15},RS=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class IS{constructor(){this.time=null,this.verboseLevel=0}log(e,t){if(this.verboseLevel>=e){const n="function"==typeof t?t():t;Nb.log(`${this.time} [${e}] ${n}`)}}}const CS=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].toString(16));return t};class DS{constructor(e,t,n,i,r){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=e||"white",this.underline=t||!1,this.italics=n||!1,this.background=i||"black",this.flash=r||!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const t=["foreground","underline","italics","background","flash"];for(let n=0;n<t.length;n++){const i=t[n];e.hasOwnProperty(i)&&(this[i]=e[i])}}isDefault(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class xS{constructor(e,t,n,i,r,s){this.uchar=void 0,this.penState=void 0,this.uchar=e||" ",this.penState=new DS(t,n,i,r,s)}reset(){this.uchar=" ",this.penState.reset()}setChar(e,t){this.uchar=e,this.penState.copy(t)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return" "===this.uchar&&this.penState.isDefault()}}class MS{constructor(e){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(let e=0;e<AS;e++)this.chars.push(new xS);this.logger=e,this.pos=0,this.currPenState=new DS}equals(e){let t=!0;for(let n=0;n<AS;n++)if(!this.chars[n].equals(e.chars[n])){t=!1;break}return t}copy(e){for(let t=0;t<AS;t++)this.chars[t].copy(e.chars[t])}isEmpty(){let e=!0;for(let t=0;t<AS;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>AS&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=AS)}moveCursor(e){const t=this.pos+e;if(e>1)for(let e=this.pos+1;e<t+1;e++)this.chars[e].setPenState(this.currPenState);this.setCursor(t)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const t=TS(e);this.pos>=AS?this.logger.log(0,(()=>"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!")):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))}clearFromPos(e){let t;for(t=e;t<AS;t++)this.chars[t].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let t=!0;for(let n=0;n<AS;n++){const i=this.chars[n].uchar;" "!==i&&(t=!1),e.push(i)}return t?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e);this.chars[this.pos].setPenState(this.currPenState)}}class PS{constructor(e){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(let t=0;t<_S;t++)this.rows.push(new MS(e));this.logger=e,this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}reset(){for(let e=0;e<_S;e++)this.rows[e].clear();this.currRow=14}equals(e){let t=!0;for(let n=0;n<_S;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t}copy(e){for(let t=0;t<_S;t++)this.rows[t].copy(e.rows[t])}isEmpty(){let e=!0;for(let t=0;t<_S;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e);this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,(()=>"pacData = "+JSON.stringify(e)));let t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(let e=0;e<_S;e++)this.rows[e].clear();const e=this.currRow+1-this.nrRollUpRows,n=this.lastOutputScreen;if(n){const i=n.rows[e].cueStartTime,r=this.logger.time;if(i&&null!==r&&i<r)for(let i=0;i<this.nrRollUpRows;i++)this.rows[t-this.nrRollUpRows+i+1].copy(n.rows[e+i])}}this.currRow=t;const n=this.rows[this.currRow];if(null!==e.indent){const t=e.indent,i=Math.max(t-1,0);n.setCursor(e.indent),e.color=n.chars[i].penState.foreground}const i={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(i)}setBkgData(e){this.logger.log(2,(()=>"bkgData = "+JSON.stringify(e))),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(null===this.nrRollUpRows)return void this.logger.log(3,"roll_up but nrRollUpRows not set yet");this.logger.log(1,(()=>this.getDisplayText()));const e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const t=[];let n="",i=-1;for(let n=0;n<_S;n++){const r=this.rows[n].getTextString();r&&(i=n+1,e?t.push("Row "+i+": '"+r+"'"):t.push(r.trim()))}return t.length>0&&(n=e?"["+t.join(" | ")+"]":t.join("\n")),n}getTextAndFormat(){return this.rows}}class OS{constructor(e,t,n){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new PS(n),this.nonDisplayedMemory=new PS(n),this.lastOutputScreen=new PS(n),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=n}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,(()=>"MODE="+e)),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);const t=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,(()=>t+": "+this.writeScreen.getDisplayText(!0))),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(1,(()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0))),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,(()=>"DISP: "+this.displayedMemory.getDisplayText()))}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const t={flash:!1};if(t.underline=e%2==1,t.italics=e>=46,t.italics)t.foreground="white";else{const n=Math.floor(e/2)-16,i=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=i[n]}this.logger.log(2,"MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)}outputDataUpdate(e=!1){const t=this.logger.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class NS{constructor(e,t,n){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;const i=new IS;this.channels=[null,new OS(e,t,i),new OS(e+1,n,i)],this.cmdHistory={a:null,b:null},this.logger=i}getHandler(e){return this.channels[e].getHandler()}setHandler(e,t){this.channels[e].setHandler(t)}addData(e,t){let n,i,r,s=!1;this.logger.time=e;for(let e=0;e<t.length;e+=2)if(i=127&t[e],r=127&t[e+1],0!==i||0!==r){if(this.logger.log(3,"["+CS([t[e],t[e+1]])+"] -> ("+CS([i,r])+")"),n=this.parseCmd(i,r),n||(n=this.parseMidrow(i,r)),n||(n=this.parsePAC(i,r)),n||(n=this.parseBackgroundAttributes(i,r)),!n&&(s=this.parseChars(i,r),s)){const e=this.currentChannel;if(e&&e>0){this.channels[e].insertChars(s)}else this.logger.log(2,"No channel found yet. TEXT-MODE?")}n||s||this.logger.log(2,"Couldn't parse cleaned data "+CS([i,r])+" orig: "+CS([t[e],t[e+1]]))}}parseCmd(e,t){const{cmdHistory:n}=this;if(!((20===e||28===e||21===e||29===e)&&t>=32&&t<=47)&&!((23===e||31===e)&&t>=33&&t<=35))return!1;if(US(e,t,n))return FS(null,null,n),this.logger.log(3,"Repeated command ("+CS([e,t])+") is dropped"),!0;const i=20===e||21===e||23===e?1:2,r=this.channels[i];return 20===e||21===e||28===e||29===e?32===t?r.ccRCL():33===t?r.ccBS():34===t?r.ccAOF():35===t?r.ccAON():36===t?r.ccDER():37===t?r.ccRU(2):38===t?r.ccRU(3):39===t?r.ccRU(4):40===t?r.ccFON():41===t?r.ccRDC():42===t?r.ccTR():43===t?r.ccRTD():44===t?r.ccEDM():45===t?r.ccCR():46===t?r.ccENM():47===t&&r.ccEOC():r.ccTO(t-32),FS(e,t,n),this.currentChannel=i,!0}parseMidrow(e,t){let n=0;if((17===e||25===e)&&t>=32&&t<=47){if(n=17===e?1:2,n!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const i=this.channels[n];return!!i&&(i.ccMIDROW(t),this.logger.log(3,"MIDROW ("+CS([e,t])+")"),!0)}return!1}parsePAC(e,t){let n;const i=this.cmdHistory;if(!((e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127)&&!((16===e||24===e)&&t>=64&&t<=95))return!1;if(US(e,t,i))return FS(null,null,i),!0;const r=e<=23?1:2;n=t>=64&&t<=95?1===r?SS[e]:wS[e]:1===r?kS[e]:LS[e];const s=this.channels[r];return!!s&&(s.setPAC(this.interpretPAC(n,t)),FS(e,t,i),this.currentChannel=r,!0)}interpretPAC(e,t){let n;const i={color:null,italics:!1,indent:null,underline:!1,row:e};return n=t>95?t-96:t-64,i.underline=1==(1&n),n<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(i.italics=!0,i.color="white"):i.indent=4*Math.floor((n-16)/2),i}parseChars(e,t){let n,i=null,r=null;if(e>=25?(n=2,r=e-8):(n=1,r=e),r>=17&&r<=19){let e;e=17===r?t+80:18===r?t+112:t+144,this.logger.log(2,"Special char '"+TS(e)+"' in channel "+n),i=[e]}else e>=32&&e<=127&&(i=0===t?[e]:[e,t]);if(i){const n=CS(i);this.logger.log(3,"Char codes =  "+n.join(",")),FS(e,t,this.cmdHistory)}return i}parseBackgroundAttributes(e,t){if(!((16===e||24===e)&&t>=32&&t<=47)&&!((23===e||31===e)&&t>=45&&t<=47))return!1;let n;const i={};16===e||24===e?(n=Math.floor((t-32)/2),i.background=RS[n],t%2==1&&(i.background=i.background+"_semi")):45===t?i.background="transparent":(i.foreground="black",47===t&&(i.underline=!0));const r=e<=23?1:2;return this.channels[r].setBkgData(i),FS(e,t,this.cmdHistory),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const t=this.channels[e];t&&t.reset()}this.cmdHistory={a:null,b:null}}cueSplitAtTime(e){for(let t=0;t<this.channels.length;t++){const n=this.channels[t];n&&n.cueSplitAtTime(e)}}}function FS(e,t,n){n.a=e,n.b=t}function US(e,t,n){return n.a===e&&n.b===t}class BS{constructor(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}dispatchCue(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,t,n){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}var $S=function(){if("undefined"!=typeof self&&self.VTTCue)return self.VTTCue;const e=["","lr","rl"],t=["start","middle","end","left","right"];function n(e,t){if("string"!=typeof t)return!1;if(!Array.isArray(e))return!1;const n=t.toLowerCase();return!!~e.indexOf(n)&&n}function i(e){return n(t,e)}function r(e,...t){let n=1;for(;n<arguments.length;n++){const t=arguments[n];for(const n in t)e[n]=t[n]}return e}function s(t,s,a){const o=this,l={enumerable:!0};o.hasBeenReset=!1;let d="",c=!1,u=t,h=s,f=a,p=null,m="",g=!0,v="auto",y="start",b=50,E="middle",T=50,_="middle";Object.defineProperty(o,"id",r({},l,{get:function(){return d},set:function(e){d=""+e}})),Object.defineProperty(o,"pauseOnExit",r({},l,{get:function(){return c},set:function(e){c=!!e}})),Object.defineProperty(o,"startTime",r({},l,{get:function(){return u},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");u=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"endTime",r({},l,{get:function(){return h},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");h=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"text",r({},l,{get:function(){return f},set:function(e){f=""+e,this.hasBeenReset=!0}})),Object.defineProperty(o,"region",r({},l,{get:function(){return p},set:function(e){p=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"vertical",r({},l,{get:function(){return m},set:function(t){const i=function(t){return n(e,t)}(t);if(!1===i)throw new SyntaxError("An invalid or illegal string was specified.");m=i,this.hasBeenReset=!0}})),Object.defineProperty(o,"snapToLines",r({},l,{get:function(){return g},set:function(e){g=!!e,this.hasBeenReset=!0}})),Object.defineProperty(o,"line",r({},l,{get:function(){return v},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");v=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"lineAlign",r({},l,{get:function(){return y},set:function(e){const t=i(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");y=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"position",r({},l,{get:function(){return b},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");b=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"positionAlign",r({},l,{get:function(){return E},set:function(e){const t=i(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");E=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"size",r({},l,{get:function(){return T},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");T=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"align",r({},l,{get:function(){return _},set:function(e){const t=i(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");_=t,this.hasBeenReset=!0}})),o.displayState=void 0}return s.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},s}();class VS{decode(e,t){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function HS(e){function t(e,t,n,i){return 3600*(0|e)+60*(0|t)+(0|n)+parseFloat(i||0)}const n=e.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return n?parseFloat(n[2])>59?t(n[2],n[3],0,n[4]):t(n[1],n[2],n[3],n[4]):null}class WS{constructor(){this.values=Object.create(null)}set(e,t){this.get(e)||""===t||(this.values[e]=t)}get(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t}has(e){return e in this.values}alt(e,t,n){for(let i=0;i<n.length;++i)if(t===n[i]){this.set(e,t);break}}integer(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))}percent(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){const n=parseFloat(t);if(n>=0&&n<=100)return this.set(e,n),!0}return!1}}function GS(e,t,n,i){const r=i?e.split(i):[e];for(const e in r){if("string"!=typeof r[e])continue;const i=r[e].split(n);if(2!==i.length)continue;t(i[0],i[1])}}const KS=new $S(0,0,""),jS="middle"===KS.align?"middle":"center";function qS(e,t,n){const i=e;function r(){const t=HS(e);if(null===t)throw new Error("Malformed timestamp: "+i);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function s(){e=e.replace(/^\s+/,"")}if(s(),t.startTime=r(),s(),"--\x3e"!==e.slice(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+i);e=e.slice(3),s(),t.endTime=r(),s(),function(e,t){const i=new WS;GS(e,(function(e,t){let r;switch(e){case"region":for(let r=n.length-1;r>=0;r--)if(n[r].id===t){i.set(e,n[r].region);break}break;case"vertical":i.alt(e,t,["rl","lr"]);break;case"line":r=t.split(","),i.integer(e,r[0]),i.percent(e,r[0])&&i.set("snapToLines",!1),i.alt(e,r[0],["auto"]),2===r.length&&i.alt("lineAlign",r[1],["start",jS,"end"]);break;case"position":r=t.split(","),i.percent(e,r[0]),2===r.length&&i.alt("positionAlign",r[1],["start",jS,"end","line-left","line-right","auto"]);break;case"size":i.percent(e,t);break;case"align":i.alt(e,t,["start",jS,"end","left","right"])}}),/:/,/\s/),t.region=i.get("region",null),t.vertical=i.get("vertical","");let r=i.get("line","auto");"auto"===r&&-1===KS.line&&(r=-1),t.line=r,t.lineAlign=i.get("lineAlign","start"),t.snapToLines=i.get("snapToLines",!0),t.size=i.get("size",100),t.align=i.get("align",jS);let s=i.get("position","auto");"auto"===s&&50===KS.position&&(s="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=s}(e,t)}function YS(e){return e.replace(/<br(?: \/)?>/gi,"\n")}class zS{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new VS,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const t=this;function n(){let e=t.buffer,n=0;for(e=YS(e);n<e.length&&"\r"!==e[n]&&"\n"!==e[n];)++n;const i=e.slice(0,n);return"\r"===e[n]&&++n,"\n"===e[n]&&++n,t.buffer=e.slice(n),i}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{let e="";if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;e=n();const i=e.match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(null==i||!i[0])throw new Error("Malformed WebVTT signature.");t.state="HEADER"}let i=!1;for(;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(i?i=!1:e=n(),t.state){case"HEADER":/:/.test(e)?GS(e,(function(e,t){}),/:/):e||(t.state="ID");continue;case"NOTE":e||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(e)){t.state="NOTE";break}if(!e)continue;if(t.cue=new $S(0,0,""),t.state="CUE",-1===e.indexOf("--\x3e")){t.cue.id=e;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{qS(e,t.cue,t.regionList)}catch(e){t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":{const n=-1!==e.indexOf("--\x3e");if(!e||n&&(i=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(null===t.cue)continue;t.cue.text&&(t.cue.text+="\n"),t.cue.text+=e}continue;case"BADCUE":e||(t.state="ID")}}}catch(e){"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state||"BADWEBVTT"===e.state)throw new Error("Malformed WebVTT signature.")}catch(t){e.onparsingerror&&e.onparsingerror(t)}return e.onflush&&e.onflush(),this}}const XS=/\r\n|\n\r|\n|\r/g,QS=function(e,t,n=0){return e.slice(n,n+t.length)===t},ZS=function(e){let t=5381,n=e.length;for(;n;)t=33*t^e.charCodeAt(--n);return(t>>>0).toString()};function JS(e,t,n){return ZS(e.toString())+ZS(t.toString())+ZS(n)}function ek(e,t,n,i,r,s,a){const o=new zS,l=AE(new Uint8Array(e)).trim().replace(XS,"\n").split("\n"),d=[],c=t?function(e,t=1){return $A(e,9e4,1/t)}(t.baseTime,t.timescale):0;let u,h="00:00.000",f=0,p=0,m=!0;o.oncue=function(e){const s=n[i];let a=n.ccOffset;const o=(f-c)/9e4;if(null!=s&&s.new&&(void 0!==p?a=n.ccOffset=s.start:function(e,t,n){let i=e[t],r=e[i.prevCC];if(!r||!r.new&&i.new)return e.ccOffset=e.presentationOffset=i.start,void(i.new=!1);for(;null!=(s=r)&&s.new;){var s;e.ccOffset+=i.start-r.start,i.new=!1,i=r,r=e[i.prevCC]}e.presentationOffset=n}(n,i,o)),o){if(!t)return void(u=new Error("Missing initPTS for VTT MPEGTS"));a=o-n.presentationOffset}const l=e.endTime-e.startTime,h=jA(9e4*(e.startTime+a-p),9e4*r)/9e4;e.startTime=Math.max(h,0),e.endTime=Math.max(h+l,0);const m=e.text.trim();e.text=decodeURIComponent(encodeURIComponent(m)),e.id||(e.id=JS(e.startTime,e.endTime,m)),e.endTime>0&&d.push(e)},o.onparsingerror=function(e){u=e},o.onflush=function(){u?a(u):s(d)},l.forEach((e=>{if(m){if(QS(e,"X-TIMESTAMP-MAP=")){m=!1,e.slice(16).split(",").forEach((e=>{QS(e,"LOCAL:")?h=e.slice(6):QS(e,"MPEGTS:")&&(f=parseInt(e.slice(7)))}));try{p=function(e){let t=parseInt(e.slice(-3));const n=parseInt(e.slice(-6,-4)),i=parseInt(e.slice(-9,-7)),r=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!(Rb(t)&&Rb(n)&&Rb(i)&&Rb(r)))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return t+=1e3*n,t+=6e4*i,t+=36e5*r,t}(h)/1e3}catch(e){u=e}return}""===e&&(m=!1)}o.parse(e+"\n")})),o.flush()}const tk="stpp.ttml.im1t",nk=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,ik=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,rk={left:"start",center:"center",right:"end",start:"start",end:"end"};function sk(e,t,n,i){const r=PE(new Uint8Array(e),["mdat"]);if(0===r.length)return void i(new Error("Could not parse IMSC1 mdat"));const s=r.map((e=>AE(e))),a=function(e,t,n=1,i=!1){return $A(e,t,1/n,i)}(t.baseTime,1,t.timescale);try{s.forEach((e=>n(function(e,t){const n=(new DOMParser).parseFromString(e,"text/xml"),i=n.getElementsByTagName("tt")[0];if(!i)throw new Error("Invalid ttml");const r={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},s=Object.keys(r).reduce(((e,t)=>(e[t]=i.getAttribute(`ttp:${t}`)||r[t],e)),{}),a="preserve"!==i.getAttribute("xml:space"),o=ok(ak(i,"styling","style")),l=ok(ak(i,"layout","region")),d=ak(i,"body","[begin]");return[].map.call(d,(e=>{const n=lk(e,a);if(!n||!e.hasAttribute("begin"))return null;const i=uk(e.getAttribute("begin"),s),r=uk(e.getAttribute("dur"),s);let d=uk(e.getAttribute("end"),s);if(null===i)throw ck(e);if(null===d){if(null===r)throw ck(e);d=i+r}const c=new $S(i-t,d-t,n);c.id=JS(c.startTime,c.endTime,c.text);const u=function(e,t,n){const i="http://www.w3.org/ns/ttml#styling";let r=null;const s=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],a=null!=e&&e.hasAttribute("style")?e.getAttribute("style"):null;a&&n.hasOwnProperty(a)&&(r=n[a]);return s.reduce(((n,s)=>{const a=dk(t,i,s)||dk(e,i,s)||dk(r,i,s);return a&&(n[s]=a),n}),{})}(l[e.getAttribute("region")],o[e.getAttribute("style")],o),{textAlign:h}=u;if(h){const e=rk[h];e&&(c.lineAlign=e),c.align=h}return Lb(c,u),c})).filter((e=>null!==e))}(e,a))))}catch(e){i(e)}}function ak(e,t,n){const i=e.getElementsByTagName(t)[0];return i?[].slice.call(i.querySelectorAll(n)):[]}function ok(e){return e.reduce(((e,t)=>{const n=t.getAttribute("xml:id");return n&&(e[n]=t),e}),{})}function lk(e,t){return[].slice.call(e.childNodes).reduce(((e,n,i)=>{var r;return"br"===n.nodeName&&i?e+"\n":null!=(r=n.childNodes)&&r.length?lk(n,t):t?e+n.textContent.trim().replace(/\s+/g," "):e+n.textContent}),"")}function dk(e,t,n){return e&&e.hasAttributeNS(t,n)?e.getAttributeNS(t,n):null}function ck(e){return new Error(`Could not parse ttml timestamp ${e}`)}function uk(e,t){if(!e)return null;let n=HS(e);return null===n&&(nk.test(e)?n=function(e,t){const n=nk.exec(e),i=(0|n[4])+(0|n[5])/t.subFrameRate;return 3600*(0|n[1])+60*(0|n[2])+(0|n[3])+i/t.frameRate}(e,t):ik.test(e)&&(n=function(e,t){const n=ik.exec(e),i=Number(n[1]);switch(n[2]){case"h":return 3600*i;case"m":return 60*i;case"ms":return 1e3*i;case"f":return i/t.frameRate;case"t":return i/t.tickRate}return i}(e,t))),n}function hk(e,t){return!!e&&e.label===t.name&&!(e.textTrack1||e.textTrack2)}class fk{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.unregisterListener(),this.hls.config.capLevelToPlayerSize&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(Ib.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(Ib.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(Ib.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Ib.BUFFER_CODECS,this.onBufferCodecs,this),e.on(Ib.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(Ib.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(Ib.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(Ib.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Ib.BUFFER_CODECS,this.onBufferCodecs,this),e.off(Ib.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,t){const n=this.hls.levels[t.droppedLevel];this.isLevelAllowed(n)&&this.restrictedLevels.push({bitrate:n.bitrate,height:n.height,width:n.width})}onMediaAttaching(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null}onManifestParsed(e,t){const n=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,n.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onBufferCodecs(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onMediaDetaching(){this.stopCapping()}detectPlayerSize(){if(this.media&&this.mediaHeight>0&&this.mediaWidth>0){const e=this.hls.levels;if(e.length){const t=this.hls;t.autoLevelCapping=this.getMaxLevel(e.length-1),t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}getMaxLevel(e){const t=this.hls.levels;if(!t.length)return-1;const n=t.filter(((t,n)=>this.isLevelAllowed(t)&&n<=e));return this.clientRect=null,fk.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,t={width:0,height:0};if(e){const n=e.getBoundingClientRect();t.width=n.width,t.height=n.height,t.width||t.height||(t.width=n.right-n.left||e.width||0,t.height=n.bottom-n.top||e.height||0)}return this.clientRect=t,t}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch(e){}return e}isLevelAllowed(e){return!this.restrictedLevels.some((t=>e.bitrate===t.bitrate&&e.width===t.width&&e.height===t.height))}static getMaxLevelByMediaSize(e,t,n){if(null==e||!e.length)return-1;let i=e.length-1;for(let a=0;a<e.length;a+=1){const o=e[a];if((o.width>=t||o.height>=n)&&(r=o,!(s=e[a+1])||r.width!==s.width||r.height!==s.height)){i=a;break}}var r,s;return i}}const pk="[eme]";class mk{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=mk.CDMCleanupPromise?[mk.CDMCleanupPromise]:[],this.onMediaEncrypted=this._onMediaEncrypted.bind(this),this.onWaitingForKey=this._onWaitingForKey.bind(this),this.debug=Nb.debug.bind(Nb,pk),this.log=Nb.log.bind(Nb,pk),this.warn=Nb.warn.bind(Nb,pk),this.error=Nb.error.bind(Nb,pk),this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.unregisterListeners(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.onMediaEncrypted=this.onWaitingForKey=this.keyIdToKeySessionPromise=null,this.config=null}registerListeners(){this.hls.on(Ib.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(Ib.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(Ib.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(Ib.MANIFEST_LOADED,this.onManifestLoaded,this)}unregisterListeners(){this.hls.off(Ib.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(Ib.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(Ib.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(Ib.MANIFEST_LOADED,this.onManifestLoaded,this)}getLicenseServerUrl(e){const{drmSystems:t,widevineLicenseUrl:n}=this.config,i=t[e];if(i)return i.licenseUrl;if(e===Jb.WIDEVINE&&n)return n;throw new Error(`no license server URL configured for key-system "${e}"`)}getServerCertificateUrl(e){const{drmSystems:t}=this.config,n=t[e];if(n)return n.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const t=this.hls.levels,n=(e,t,n)=>!!e&&n.indexOf(e)===t,i=t.map((e=>e.audioCodec)).filter(n),r=t.map((e=>e.videoCodec)).filter(n);return i.length+r.length===0&&r.push("avc1.42e01e"),new Promise(((t,n)=>{const s=e=>{const a=e.shift();this.getMediaKeysPromise(a,i,r).then((e=>t({keySystem:a,mediaKeys:e}))).catch((t=>{e.length?s(e):n(t instanceof gk?t:new gk({type:Cb.KEY_SYSTEM_ERROR,details:Db.KEY_SYSTEM_NO_ACCESS,error:t,fatal:!0},t.message))}))};s(e)}))}requestMediaKeySystemAccess(e,t){const{requestMediaKeySystemAccessFunc:n}=this.config;if("function"!=typeof n){let e=`Configured requestMediaKeySystemAccess is not a function ${n}`;return null===lE&&"http:"===self.location.protocol&&(e=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(e))}return n(e,t)}getMediaKeysPromise(e,t,n){const i=function(e,t,n,i){let r;switch(e){case Jb.FAIRPLAY:r=["cenc","sinf"];break;case Jb.WIDEVINE:case Jb.PLAYREADY:r=["cenc"];break;case Jb.CLEARKEY:r=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${e}`)}return function(e,t,n,i){return[{initDataTypes:e,persistentState:i.persistentState||"not-allowed",distinctiveIdentifier:i.distinctiveIdentifier||"not-allowed",sessionTypes:i.sessionTypes||[i.sessionType||"temporary"],audioCapabilities:t.map((e=>({contentType:`audio/mp4; codecs="${e}"`,robustness:i.audioRobustness||"",encryptionScheme:i.audioEncryptionScheme||null}))),videoCapabilities:n.map((e=>({contentType:`video/mp4; codecs="${e}"`,robustness:i.videoRobustness||"",encryptionScheme:i.videoEncryptionScheme||null})))}]}(r,t,n,i)}(e,t,n,this.config.drmSystemOptions),r=this.keySystemAccessPromises[e];let s=null==r?void 0:r.keySystemAccess;if(!s){this.log(`Requesting encrypted media "${e}" key-system access with config: ${JSON.stringify(i)}`),s=this.requestMediaKeySystemAccess(e,i);const t=this.keySystemAccessPromises[e]={keySystemAccess:s};return s.catch((t=>{this.log(`Failed to obtain access to key-system "${e}": ${t}`)})),s.then((n=>{this.log(`Access for key-system "${n.keySystem}" obtained`);const i=this.fetchServerCertificate(e);return this.log(`Create media-keys for "${e}"`),t.mediaKeys=n.createMediaKeys().then((t=>(this.log(`Media-keys created for "${e}"`),i.then((n=>n?this.setMediaKeysServerCertificate(t,e,n):t))))),t.mediaKeys.catch((t=>{this.error(`Failed to create media-keys for "${e}"}: ${t}`)})),t.mediaKeys}))}return s.then((()=>r.mediaKeys))}createMediaKeySessionContext({decryptdata:e,keySystem:t,mediaKeys:n}){this.log(`Creating key-system session "${t}" keyId: ${kE(e.keyId||[])}`);const i=n.createSession(),r={decryptdata:e,keySystem:t,mediaKeys:n,mediaKeysSession:i,keyStatus:"status-pending"};return this.mediaKeySessions.push(r),r}renewKeySession(e){const t=e.decryptdata;if(t.pssh){const n=this.createMediaKeySessionContext(e),i=this.getKeyIdString(t),r="cenc";this.keyIdToKeySessionPromise[i]=this.generateRequestWithPreferredKeySession(n,r,t.pssh,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}getKeyIdString(e){if(!e)throw new Error("Could not read keyId of undefined decryptdata");if(null===e.keyId)throw new Error("keyId is null");return kE(e.keyId)}updateKeySession(e,t){var n;const i=e.mediaKeysSession;return this.log(`Updating key-session "${i.sessionId}" for keyID ${kE((null==(n=e.decryptdata)?void 0:n.keyId)||[])}\n      } (data length: ${t?t.byteLength:t})`),i.update(t)}selectKeySystemFormat(e){const t=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${t.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(t)),this.keyFormatPromise}getKeyFormatPromise(e){return new Promise(((t,n)=>{const i=oE(this.config),r=e.map(rE).filter((e=>!!e&&-1!==i.indexOf(e)));return this.getKeySystemSelectionPromise(r).then((({keySystem:e})=>{const i=aE(e);i?t(i):n(new Error(`Unable to find format for key-system "${e}"`))})).catch(n)}))}loadKey(e){const t=e.keyInfo.decryptdata,n=this.getKeyIdString(t),i=`(keyId: ${n} format: "${t.keyFormat}" method: ${t.method} uri: ${t.uri})`;this.log(`Starting session for key ${i}`);let r=this.keyIdToKeySessionPromise[n];return r||(r=this.keyIdToKeySessionPromise[n]=this.getKeySystemForKeyPromise(t).then((({keySystem:n,mediaKeys:r})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${i}`),this.attemptSetMediaKeys(n,r).then((()=>{this.throwIfDestroyed();const e=this.createMediaKeySessionContext({keySystem:n,mediaKeys:r,decryptdata:t});return this.generateRequestWithPreferredKeySession(e,"cenc",t.pssh,"playlist-key")}))))),r.catch((e=>this.handleError(e)))),r}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e){this.hls&&(this.error(e.message),e instanceof gk?this.hls.trigger(Ib.ERROR,e.data):this.hls.trigger(Ib.ERROR,{type:Cb.KEY_SYSTEM_ERROR,details:Db.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0}))}getKeySystemForKeyPromise(e){const t=this.getKeyIdString(e),n=this.keyIdToKeySessionPromise[t];if(!n){const t=rE(e.keyFormat),n=t?[t]:oE(this.config);return this.attemptKeySystemAccess(n)}return n}getKeySystemSelectionPromise(e){if(e.length||(e=oE(this.config)),0===e.length)throw new gk({type:Cb.KEY_SYSTEM_ERROR,details:Db.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${JSON.stringify({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}_onMediaEncrypted(e){const{initDataType:t,initData:n}=e;if(this.debug(`"${e.type}" event: init data type: "${t}"`),null===n)return;let i,r;if("sinf"===t&&this.config.drmSystems[Jb.FAIRPLAY]){const e=IE(new Uint8Array(n));try{const t=Xb(JSON.parse(e).sinf),n=FE(new Uint8Array(t));if(!n)return;i=n.subarray(8,24),r=Jb.FAIRPLAY}catch(e){return void this.warn('Failed to parse sinf "encrypted" event message initData')}}else{const e=function(e){if(!(e instanceof ArrayBuffer)||e.byteLength<32)return null;const t={version:0,systemId:"",kids:null,data:null},n=new DataView(e),i=n.getUint32(0);if(e.byteLength!==i&&i>44)return null;if(1886614376!==n.getUint32(4))return null;if(t.version=n.getUint32(8)>>>24,t.version>1)return null;t.systemId=kE(new Uint8Array(e,12,16));const r=n.getUint32(28);if(0===t.version){if(i-32<r)return null;t.data=new Uint8Array(e,32,r)}else if(1===t.version){t.kids=[];for(let n=0;n<r;n++)t.kids.push(new Uint8Array(e,32+16*n,16))}return t}(n);if(null===e)return;0===e.version&&e.systemId===sE&&e.data&&(i=e.data.subarray(8,24)),r=function(e){if(e===sE)return Jb.WIDEVINE}(e.systemId)}if(!r||!i)return;const s=kE(i),{keyIdToKeySessionPromise:a,mediaKeySessions:o}=this;let l=a[s];for(let e=0;e<o.length;e++){const r=o[e],d=r.decryptdata;if(d.pssh||!d.keyId)continue;const c=kE(d.keyId);if(s===c||-1!==d.uri.replace(/-/g,"").indexOf(s)){l=a[c],delete a[c],d.pssh=new Uint8Array(n),d.keyId=i,l=a[s]=l.then((()=>this.generateRequestWithPreferredKeySession(r,t,n,"encrypted-event-key-match")));break}}l||(l=a[s]=this.getKeySystemSelectionPromise([r]).then((({keySystem:e,mediaKeys:r})=>{var a;this.throwIfDestroyed();const o=new jE("ISO-23001-7",s,null!=(a=aE(e))?a:"");return o.pssh=new Uint8Array(n),o.keyId=i,this.attemptSetMediaKeys(e,r).then((()=>{this.throwIfDestroyed();const i=this.createMediaKeySessionContext({decryptdata:o,keySystem:e,mediaKeys:r});return this.generateRequestWithPreferredKeySession(i,t,n,"encrypted-event-no-match")}))}))),l.catch((e=>this.handleError(e)))}_onWaitingForKey(e){this.log(`"${e.type}" event`)}attemptSetMediaKeys(e,t){const n=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const i=Promise.all(n).then((()=>{if(!this.media)throw new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(t)}));return this.setMediaKeysQueue.push(i),i.then((()=>{this.log(`Media-keys set for "${e}"`),n.push(i),this.setMediaKeysQueue=this.setMediaKeysQueue.filter((e=>-1===n.indexOf(e)))}))}generateRequestWithPreferredKeySession(e,t,n,i){var r,s;const a=null==(r=this.config.drmSystems)||null==(s=r[e.keySystem])?void 0:s.generateRequest;if(a)try{const i=a.call(this.hls,t,n,e);if(!i)throw new Error("Invalid response from configured generateRequest filter");t=i.initDataType,n=e.decryptdata.pssh=i.initData?new Uint8Array(i.initData):null}catch(e){var o;if(this.warn(e.message),null!=(o=this.hls)&&o.config.debug)throw e}if(null===n)return this.log(`Skipping key-session request for "${i}" (no initData)`),Promise.resolve(e);const l=this.getKeyIdString(e.decryptdata);this.log(`Generating key-session request for "${i}": ${l} (init data type: ${t} length: ${n?n.byteLength:null})`);const d=new sS;e.mediaKeysSession.onmessage=t=>{const n=e.mediaKeysSession;if(!n)return void d.emit("error",new Error("invalid state"));const{messageType:i,message:r}=t;this.log(`"${i}" message event for session "${n.sessionId}" message size: ${r.byteLength}`),"license-request"===i||"license-renewal"===i?this.renewLicense(e,r).catch((e=>{this.handleError(e),d.emit("error",e)})):"license-release"===i?e.keySystem===Jb.FAIRPLAY&&(this.updateKeySession(e,Zb("acknowledged")),this.removeSession(e)):this.warn(`unhandled media key message type "${i}"`)},e.mediaKeysSession.onkeystatuseschange=t=>{if(!e.mediaKeysSession)return void d.emit("error",new Error("invalid state"));this.onKeyStatusChange(e);const n=e.keyStatus;d.emit("keyStatus",n),"expired"===n&&(this.warn(`${e.keySystem} expired for key ${l}`),this.renewKeySession(e))};const c=new Promise(((e,t)=>{d.on("error",t),d.on("keyStatus",(n=>{n.startsWith("usable")?e():"output-restricted"===n?t(new gk({type:Cb.KEY_SYSTEM_ERROR,details:Db.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):"internal-error"===n?t(new gk({type:Cb.KEY_SYSTEM_ERROR,details:Db.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},`key status changed to "${n}"`)):"expired"===n?t(new Error("key expired while generating request")):this.warn(`unhandled key status change "${n}"`)}))}));return e.mediaKeysSession.generateRequest(t,n).then((()=>{var t;this.log(`Request generated for key-session "${null==(t=e.mediaKeysSession)?void 0:t.sessionId}" keyId: ${l}`)})).catch((e=>{throw new gk({type:Cb.KEY_SYSTEM_ERROR,details:Db.KEY_SYSTEM_NO_SESSION,error:e,fatal:!1},`Error generating key-session request: ${e}`)})).then((()=>c)).catch((t=>{throw d.removeAllListeners(),this.removeSession(e),t})).then((()=>(d.removeAllListeners(),e)))}onKeyStatusChange(e){e.mediaKeysSession.keyStatuses.forEach(((t,n)=>{this.log(`key status change "${t}" for keyStatuses keyId: ${kE("buffer"in n?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):new Uint8Array(n))} session keyId: ${kE(new Uint8Array(e.decryptdata.keyId||[]))} uri: ${e.decryptdata.uri}`),e.keyStatus=t}))}fetchServerCertificate(e){const t=this.config,n=new(0,t.loader)(t),i=this.getServerCertificateUrl(e);return i?(this.log(`Fetching serverCertificate for "${e}"`),new Promise(((r,s)=>{const a={responseType:"arraybuffer",url:i},o=t.certLoadPolicy.default,l={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(e,t,n,i)=>{r(e.data)},onError:(t,n,r,o)=>{s(new gk({type:Cb.KEY_SYSTEM_ERROR,details:Db.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:r,response:kb({url:a.url,data:void 0},t)},`"${e}" certificate request failed (${i}). Status: ${t.code} (${t.text})`))},onTimeout:(t,n,r)=>{s(new gk({type:Cb.KEY_SYSTEM_ERROR,details:Db.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:r,response:{url:a.url,data:void 0}},`"${e}" certificate request timed out (${i})`))},onAbort:(e,t,n)=>{s(new Error("aborted"))}};n.load(a,l,d)}))):Promise.resolve()}setMediaKeysServerCertificate(e,t,n){return new Promise(((i,r)=>{e.setServerCertificate(n).then((r=>{this.log(`setServerCertificate ${r?"success":"not supported by CDM"} (${null==n?void 0:n.byteLength}) on "${t}"`),i(e)})).catch((e=>{r(new gk({type:Cb.KEY_SYSTEM_ERROR,details:Db.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:e,fatal:!0},e.message))}))}))}renewLicense(e,t){return this.requestLicense(e,new Uint8Array(t)).then((t=>this.updateKeySession(e,new Uint8Array(t)).catch((e=>{throw new gk({type:Cb.KEY_SYSTEM_ERROR,details:Db.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:e,fatal:!0},e.message)}))))}setupLicenseXHR(e,t,n,i){const r=this.config.licenseXhrSetup;return r?Promise.resolve().then((()=>{if(!n.decryptdata)throw new Error("Key removed");return r.call(this.hls,e,t,n,i)})).catch((s=>{if(!n.decryptdata)throw s;return e.open("POST",t,!0),r.call(this.hls,e,t,n,i)})).then((n=>{e.readyState||e.open("POST",t,!0);return{xhr:e,licenseChallenge:n||i}})):(e.open("POST",t,!0),Promise.resolve({xhr:e,licenseChallenge:i}))}requestLicense(e,t){const n=this.config.keyLoadPolicy.default;return new Promise(((i,r)=>{const s=this.getLicenseServerUrl(e.keySystem);this.log(`Sending license request to URL: ${s}`);const a=new XMLHttpRequest;a.responseType="arraybuffer",a.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return r(new Error("invalid state"));if(4===a.readyState)if(200===a.status){this._requestLicenseFailureCount=0;let t=a.response;this.log(`License received ${t instanceof ArrayBuffer?t.byteLength:t}`);const n=this.config.licenseResponseCallback;if(n)try{t=n.call(this.hls,a,s,e)}catch(e){this.error(e)}i(t)}else{const o=n.errorRetry,l=o?o.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>l||a.status>=400&&a.status<500)r(new gk({type:Cb.KEY_SYSTEM_ERROR,details:Db.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:a,response:{url:s,data:void 0,code:a.status,text:a.statusText}},`License Request XHR failed (${s}). Status: ${a.status} (${a.statusText})`));else{const n=l-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${n} attempts left`),this.requestLicense(e,t).then(i,r)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=a,this.setupLicenseXHR(a,s,e,t).then((({xhr:e,licenseChallenge:t})=>{e.send(t)}))}))}onMediaAttached(e,t){if(!this.config.emeEnabled)return;const n=t.media;this.media=n,n.addEventListener("encrypted",this.onMediaEncrypted),n.addEventListener("waitingforkey",this.onWaitingForKey)}onMediaDetached(){const e=this.media,t=this.mediaKeySessions;e&&(e.removeEventListener("encrypted",this.onMediaEncrypted),e.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},jE.clearKeyUriToKeyIdMap();const n=t.length;mk.CDMCleanupPromise=Promise.all(t.map((e=>this.removeSession(e))).concat(null==e?void 0:e.setMediaKeys(null).catch((t=>{this.log(`Could not clear media keys: ${t}. media.src: ${null==e?void 0:e.src}`)})))).then((()=>{n&&(this.log("finished closing key sessions and clearing media keys"),t.length=0)})).catch((t=>{this.log(`Could not close sessions and clear media keys: ${t}. media.src: ${null==e?void 0:e.src}`)}))}onManifestLoading(){this.keyFormatPromise=null}onManifestLoaded(e,{sessionKeys:t}){if(t&&this.config.emeEnabled&&!this.keyFormatPromise){const e=t.reduce(((e,t)=>(-1===e.indexOf(t.keyFormat)&&e.push(t.keyFormat),e)),[]);this.log(`Selecting key-system from session-keys ${e.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(e)}}removeSession(e){const{mediaKeysSession:t,licenseXhr:n}=e;if(t){this.log(`Remove licenses and keys and close session ${t.sessionId}`),t.onmessage=null,t.onkeystatuseschange=null,n&&n.readyState!==XMLHttpRequest.DONE&&n.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const i=this.mediaKeySessions.indexOf(e);return i>-1&&this.mediaKeySessions.splice(i,1),t.remove().catch((e=>{this.log(`Could not remove session: ${e}`)})).then((()=>t.close())).catch((e=>{this.log(`Could not close session: ${e}`)}))}}}mk.CDMCleanupPromise=void 0;class gk extends Error{constructor(e,t){super(t),this.data=void 0,e.error||(e.error=new Error(t)),this.data=e,e.err=e.error}}var vk="m",yk="a",bk="v",Ek="av",Tk="i",_k="tt";class Ak{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=e=>{try{this.apply(e,{ot:vk,su:!this.initialized})}catch(e){Nb.warn("Could not generate manifest CMCD data.",e)}},this.applyFragmentData=e=>{try{const t=e.frag,n=this.hls.levels[t.level],i=this.getObjectType(t),r={d:1e3*t.duration,ot:i};i!==bk&&i!==yk&&i!=Ek||(r.br=n.bitrate/1e3,r.tb=this.getTopBandwidth(i)/1e3,r.bl=this.getBufferLength(i)),this.apply(e,r)}catch(e){Nb.warn("Could not generate segment CMCD data.",e)}},this.hls=e;const t=this.config=e.config,{cmcd:n}=t;null!=n&&(t.pLoader=this.createPlaylistLoader(),t.fLoader=this.createFragmentLoader(),this.sid=n.sessionId||Ak.uuid(),this.cid=n.contentId,this.useHeaders=!0===n.useHeaders,this.registerListeners())}registerListeners(){const e=this.hls;e.on(Ib.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Ib.MEDIA_DETACHED,this.onMediaDetached,this),e.on(Ib.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(Ib.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Ib.MEDIA_DETACHED,this.onMediaDetached,this),e.off(Ib.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,t){var n,i;this.audioBuffer=null==(n=t.tracks.audio)?void 0:n.buffer,this.videoBuffer=null==(i=t.tracks.video)?void 0:i.buffer}createData(){var e;return{v:1,sf:"h",sid:this.sid,cid:this.cid,pr:null==(e=this.media)?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,t={}){Lb(t,this.createData());const n=t.ot===Tk||t.ot===bk||t.ot===Ek;if(this.starved&&n&&(t.bs=!0,t.su=!0,this.starved=!1),null==t.su&&(t.su=this.buffering),this.useHeaders){const n=Ak.toHeaders(t);if(!Object.keys(n).length)return;e.headers||(e.headers={}),Lb(e.headers,n)}else{const n=Ak.toQuery(t);if(!n)return;e.url=Ak.appendQueryToUri(e.url,n)}}getObjectType(e){const{type:t}=e;return"subtitle"===t?_k:"initSegment"===e.sn?Tk:"audio"===t?yk:"main"===t?this.hls.audioTracks.length?bk:Ek:void 0}getTopBandwidth(e){let t,n=0;const i=this.hls;if(e===yk)t=i.audioTracks;else{const e=i.maxAutoLevel,n=e>-1?e+1:i.levels.length;t=i.levels.slice(0,n)}for(const e of t)e.bitrate>n&&(n=e.bitrate);return n>0?n:NaN}getBufferLength(e){const t=this.hls.media,n=e===yk?this.audioBuffer:this.videoBuffer;if(!n||!t)return NaN;return 1e3*M_.bufferInfo(n,t.currentTime,this.config.maxBufferHole).len}createPlaylistLoader(){const{pLoader:e}=this.config,t=this.applyPlaylistData,n=e||this.config.loader;return class{constructor(e){this.loader=void 0,this.loader=new n(e)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(e,n,i){t(e),this.loader.load(e,n,i)}}}createFragmentLoader(){const{fLoader:e}=this.config,t=this.applyFragmentData,n=e||this.config.loader;return class{constructor(e){this.loader=void 0,this.loader=new n(e)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(e,n,i){t(e),this.loader.load(e,n,i)}}}static uuid(){const e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)}static serialize(e){const t=[],n=e=>!Number.isNaN(e)&&null!=e&&""!==e&&!1!==e,i=e=>Math.round(e),r=e=>100*i(e/100),s={br:i,d:i,bl:r,dl:r,mtp:r,nor:e=>encodeURIComponent(e),rtp:r,tb:i},a=Object.keys(e||{}).sort();for(const i of a){let r=e[i];if(!n(r))continue;if("v"===i&&1===r)continue;if("pr"==i&&1===r)continue;const a=s[i];a&&(r=a(r));const o=typeof r;let l;l="ot"===i||"sf"===i||"st"===i?`${i}=${r}`:"boolean"===o?i:"number"===o?`${i}=${r}`:`${i}=${JSON.stringify(r)}`,t.push(l)}return t.join(",")}static toHeaders(e){const t=Object.keys(e),n={},i=["Object","Request","Session","Status"],r=[{},{},{},{}],s={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3};for(const n of t){r[null!=s[n]?s[n]:1][n]=e[n]}for(let e=0;e<r.length;e++){const t=Ak.serialize(r[e]);t&&(n[`CMCD-${i[e]}`]=t)}return n}static toQuery(e){return`CMCD=${encodeURIComponent(Ak.serialize(e))}`}static appendQueryToUri(e,t){if(!t)return e;const n=e.includes("?")?"&":"?";return`${e}${n}${t}`}}function Sk(e,t,n,i){e&&Object.keys(t).forEach((r=>{const s=e.filter((e=>e.groupId===r)).map((e=>{const s=Lb({},e);return s.details=void 0,s.attrs=new Bb(s.attrs),s.url=s.attrs.URI=kk(e.url,e.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",n),s.groupId=s.attrs["GROUP-ID"]=t[r],s.attrs["PATHWAY-ID"]=i,s}));e.push(...s)}))}function kk(e,t,n,i){const{HOST:r,PARAMS:s,[n]:a}=i;let o;t&&(o=null==a?void 0:a[t],o&&(e=o));const l=new self.URL(e);return r&&!o&&(l.host=r),s&&Object.keys(s).sort().forEach((e=>{e&&l.searchParams.set(e,s[e])})),l.href}const wk=/^age:\s*[\d.]+\s*$/im;class Lk{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=void 0,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new Hb,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,4!==e.readyState&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),null!=(e=this.callbacks)&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,t,n){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=n,this.loadInternal()}loadInternal(){const{config:e,context:t}=this;if(!e)return;const n=this.loader=new self.XMLHttpRequest,i=this.stats;i.loading.first=0,i.loaded=0,i.aborted=!1;const r=this.xhrSetup;r?Promise.resolve().then((()=>{if(!this.stats.aborted)return r(n,t.url)})).catch((e=>(n.open("GET",t.url,!0),r(n,t.url)))).then((()=>{this.stats.aborted||this.openAndSendXhr(n,t,e)})).catch((e=>{this.callbacks.onError({code:n.status,text:e.message},t,n,i)})):this.openAndSendXhr(n,t,e)}openAndSendXhr(e,t,n){e.readyState||e.open("GET",t.url,!0);const i=this.context.headers,{maxTimeToFirstByteMs:r,maxLoadTimeMs:s}=n.loadPolicy;if(i)for(const t in i)e.setRequestHeader(t,i[t]);t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,self.clearTimeout(this.requestTimeout),n.timeout=r&&Rb(r)?r:s,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),n.timeout),e.send()}readystatechange(){const{context:e,loader:t,stats:n}=this;if(!e||!t)return;const i=t.readyState,r=this.config;if(!n.aborted&&i>=2&&(0===n.loading.first&&(n.loading.first=Math.max(self.performance.now(),n.loading.start),r.timeout!==r.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),r.timeout=r.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),r.loadPolicy.maxLoadTimeMs-(n.loading.first-n.loading.start)))),4===i)){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;const i=t.status,s="text"!==t.responseType;if(i>=200&&i<300&&(s&&t.response||null!==t.responseText)){n.loading.end=Math.max(self.performance.now(),n.loading.first);const r=s?t.response:t.responseText,a="arraybuffer"===t.responseType?r.byteLength:r.length;if(n.loaded=n.total=a,n.bwEstimate=8e3*n.total/(n.loading.end-n.loading.first),!this.callbacks)return;const o=this.callbacks.onProgress;if(o&&o(n,e,r,t),!this.callbacks)return;const l={url:t.responseURL,data:r,code:i};this.callbacks.onSuccess(l,n,e,t)}else{const s=r.loadPolicy.errorRetry;t_(s,n.retry,!1,i)?this.retry(s):(Nb.error(`${i} while loading ${e.url}`),this.callbacks.onError({code:i,text:t.statusText},e,t,n))}}}loadtimeout(){var e;const t=null==(e=this.config)?void 0:e.loadPolicy.timeoutRetry;if(t_(t,this.stats.retry,!0))this.retry(t);else{Nb.warn(`timeout while loading ${this.context.url}`);const e=this.callbacks;e&&(this.abortInternal(),e.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:t,stats:n}=this;this.retryDelay=JT(e,n.retry),n.retry++,Nb.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${t.url}, retrying ${n.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)}getCacheAge(){let e=null;if(this.loader&&wk.test(this.loader.getAllResponseHeaders())){const t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}const Rk=/(\d+)-(\d+)\/(\d+)/;class Ik{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=void 0,this.response=void 0,this.controller=void 0,this.context=void 0,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||Ck,this.controller=new self.AbortController,this.stats=new Hb}destroy(){this.loader=this.callbacks=null,this.abortInternal()}abortInternal(){const e=this.response;null!=e&&e.ok||(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),null!=(e=this.callbacks)&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,t,n){const i=this.stats;if(i.loading.start)throw new Error("Loader can only be used once.");i.loading.start=self.performance.now();const r=function(e,t){const n={method:"GET",mode:"cors",credentials:"same-origin",signal:t,headers:new self.Headers(Lb({},e.headers))};e.rangeEnd&&n.headers.set("Range","bytes="+e.rangeStart+"-"+String(e.rangeEnd-1));return n}(e,this.controller.signal),s=n.onProgress,a="arraybuffer"===e.responseType,o=a?"byteLength":"length",{maxTimeToFirstByteMs:l,maxLoadTimeMs:d}=t.loadPolicy;this.context=e,this.config=t,this.callbacks=n,this.request=this.fetchSetup(e,r),self.clearTimeout(this.requestTimeout),t.timeout=l&&Rb(l)?l:d,this.requestTimeout=self.setTimeout((()=>{this.abortInternal(),n.onTimeout(i,e,this.response)}),t.timeout),self.fetch(this.request).then((r=>{this.response=this.loader=r;const o=Math.max(self.performance.now(),i.loading.start);if(self.clearTimeout(this.requestTimeout),t.timeout=d,this.requestTimeout=self.setTimeout((()=>{this.abortInternal(),n.onTimeout(i,e,this.response)}),d-(o-i.loading.start)),!r.ok){const{status:e,statusText:t}=r;throw new Dk(t||"fetch, bad network response",e,r)}return i.loading.first=o,i.total=function(e){const t=e.get("Content-Range");if(t){const e=function(e){const t=Rk.exec(e);if(t)return parseInt(t[2])-parseInt(t[1])+1}(t);if(Rb(e))return e}const n=e.get("Content-Length");if(n)return parseInt(n)}(r.headers)||i.total,s&&Rb(t.highWaterMark)?this.loadProgressively(r,i,e,t.highWaterMark,s):a?r.arrayBuffer():"json"===e.responseType?r.json():r.text()})).then((r=>{const{response:a}=this;self.clearTimeout(this.requestTimeout),i.loading.end=Math.max(self.performance.now(),i.loading.first);const l=r[o];l&&(i.loaded=i.total=l);const d={url:a.url,data:r,code:a.status};s&&!Rb(t.highWaterMark)&&s(i,e,r,a),n.onSuccess(d,i,e,a)})).catch((t=>{if(self.clearTimeout(this.requestTimeout),i.aborted)return;const r=t&&t.code||0,s=t?t.message:null;n.onError({code:r,text:s},e,t?t.details:null,i)}))}getCacheAge(){let e=null;if(this.response){const t=this.response.headers.get("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,t,n,i=0,r){const s=new hS,a=e.body.getReader(),o=()=>a.read().then((a=>{if(a.done)return s.dataLength&&r(t,n,s.flush(),e),Promise.resolve(new ArrayBuffer(0));const l=a.value,d=l.length;return t.loaded+=d,d<i||s.dataLength?(s.push(l),s.dataLength>=i&&r(t,n,s.flush(),e)):r(t,n,l,e),o()})).catch((()=>Promise.reject()));return o()}}function Ck(e,t){return new self.Request(e.url,t)}class Dk extends Error{constructor(e,t,n){super(e),this.code=void 0,this.details=void 0,this.code=t,this.details=n}}const xk=/\s/,Mk={newCue(e,t,n,i){const r=[];let s,a,o,l,d;const c=self.VTTCue||self.TextTrackCue;for(let h=0;h<i.rows.length;h++)if(s=i.rows[h],o=!0,l=0,d="",!s.isEmpty()){var u;for(let e=0;e<s.chars.length;e++)xk.test(s.chars[e].uchar)&&o?l++:(d+=s.chars[e].uchar,o=!1);s.cueStartTime=t,t===n&&(n+=1e-4),l>=16?l--:l++;const i=YS(d.trim()),f=JS(t,n,i);null!=e&&null!=(u=e.cues)&&u.getCueById(f)||(a=new c(t,n,i),a.id=f,a.line=h+1,a.align="left",a.position=10+Math.min(80,10*Math.floor(8*l/32)),r.push(a))}return e&&r.length&&(r.sort(((e,t)=>"auto"===e.line||"auto"===t.line?0:e.line>8&&t.line>8?t.line-e.line:e.line-t.line)),r.forEach((t=>LT(e,t)))),r}},Pk=kb(kb({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:6e7,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:Lk,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:class{constructor(e){this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.timer=-1,this.onCheck=this._abandonRulesCheck.bind(this),this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this.hls=e;const t=e.config;this.bwEstimator=new uS(t.abrEwmaSlowVoD,t.abrEwmaFastVoD,t.abrEwmaDefaultEstimate),this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(Ib.FRAG_LOADING,this.onFragLoading,this),e.on(Ib.FRAG_LOADED,this.onFragLoaded,this),e.on(Ib.FRAG_BUFFERED,this.onFragBuffered,this),e.on(Ib.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(Ib.LEVEL_LOADED,this.onLevelLoaded,this)}unregisterListeners(){const{hls:e}=this;e.off(Ib.FRAG_LOADING,this.onFragLoading,this),e.off(Ib.FRAG_LOADED,this.onFragLoaded,this),e.off(Ib.FRAG_BUFFERED,this.onFragBuffered,this),e.off(Ib.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(Ib.LEVEL_LOADED,this.onLevelLoaded,this)}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this.onCheck=null,this.fragCurrent=this.partCurrent=null}onFragLoading(e,t){var n;const i=t.frag;this.ignoreFragment(i)||(this.fragCurrent=i,this.partCurrent=null!=(n=t.part)?n:null,this.clearTimer(),this.timer=self.setInterval(this.onCheck,100))}onLevelSwitching(e,t){this.clearTimer()}getTimeToLoadFrag(e,t,n,i){return e+n/t+(i?this.lastLevelLoadSec:0)}onLevelLoaded(e,t){const n=this.hls.config,{total:i,bwEstimate:r}=t.stats;Rb(i)&&Rb(r)&&(this.lastLevelLoadSec=8*i/r),t.details.live?this.bwEstimator.update(n.abrEwmaSlowLive,n.abrEwmaFastLive):this.bwEstimator.update(n.abrEwmaSlowVoD,n.abrEwmaFastVoD)}_abandonRulesCheck(){const{fragCurrent:e,partCurrent:t,hls:n}=this,{autoLevelEnabled:i,media:r}=n;if(!e||!r)return;const s=performance.now(),a=t?t.stats:e.stats,o=t?t.duration:e.duration,l=s-a.loading.start;if(a.aborted||a.loaded&&a.loaded===a.total||0===e.level)return this.clearTimer(),void(this._nextAutoLevel=-1);if(!i||r.paused||!r.playbackRate||!r.readyState)return;const d=n.mainForwardBufferInfo;if(null===d)return;const c=this.bwEstimator.getEstimateTTFB(),u=Math.abs(r.playbackRate);if(l<=Math.max(c,o/(2*u)*1e3))return;const h=d.len/u;if(h>=2*o/u)return;const f=a.loading.first?a.loading.first-a.loading.start:-1,p=a.loaded&&f>-1,m=this.bwEstimator.getEstimate(),{levels:g,minAutoLevel:v}=n,y=g[e.level],b=a.total||Math.max(a.loaded,Math.round(o*y.maxBitrate/8));let E=l-f;E<1&&p&&(E=Math.min(l,8*a.loaded/m));const T=p?1e3*a.loaded/E:0,_=T?(b-a.loaded)/T:8*b/m+c/1e3;if(_<=h)return;const A=T?8*T:m;let S,k=Number.POSITIVE_INFINITY;for(S=e.level-1;S>v;S--){const e=g[S].maxBitrate;if(k=this.getTimeToLoadFrag(c/1e3,A,o*e,!g[S].details),k<h)break}k>=_||k>10*o||(n.nextLoadLevel=S,p?this.bwEstimator.sample(l-Math.min(c,f),a.loaded):this.bwEstimator.sampleTTFB(l),this.clearTimer(),Nb.warn(`[abr] Fragment ${e.sn}${t?" part "+t.index:""} of level ${e.level} is loading too slowly;\n      Time to underbuffer: ${h.toFixed(3)} s\n      Estimated load time for current fragment: ${_.toFixed(3)} s\n      Estimated load time for down switch fragment: ${k.toFixed(3)} s\n      TTFB estimate: ${f}\n      Current BW estimate: ${Rb(m)?(m/1024).toFixed(3):"Unknown"} Kb/s\n      New BW estimate: ${(this.bwEstimator.getEstimate()/1024).toFixed(3)} Kb/s\n      Aborting and switching to level ${S}`),e.loader&&(this.fragCurrent=this.partCurrent=null,e.abortRequests()),n.trigger(Ib.FRAG_LOAD_EMERGENCY_ABORTED,{frag:e,part:t,stats:a}))}onFragLoaded(e,{frag:t,part:n}){const i=n?n.stats:t.stats;if(t.type===ET&&this.bwEstimator.sampleTTFB(i.loading.first-i.loading.start),!this.ignoreFragment(t)){if(this.clearTimer(),this.lastLoadedFragLevel=t.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){const e=n?n.duration:t.duration,r=this.hls.levels[t.level],s=(r.loaded?r.loaded.bytes:0)+i.loaded,a=(r.loaded?r.loaded.duration:0)+e;r.loaded={bytes:s,duration:a},r.realBitrate=Math.round(8*s/a)}if(t.bitrateTest){const e={stats:i,frag:t,part:n,id:t.type};this.onFragBuffered(Ib.FRAG_BUFFERED,e),t.bitrateTest=!1}}}onFragBuffered(e,t){const{frag:n,part:i}=t,r=null!=i&&i.stats.loaded?i.stats:n.stats;if(r.aborted)return;if(this.ignoreFragment(n))return;const s=r.parsing.end-r.loading.start-Math.min(r.loading.first-r.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(s,r.loaded),r.bwEstimate=this.bwEstimator.getEstimate(),n.bitrateTest?this.bitrateTestDelay=s/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==ET||"initSegment"===e.sn}clearTimer(){self.clearInterval(this.timer)}get nextAutoLevel(){const e=this._nextAutoLevel,t=this.bwEstimator;if(-1!==e&&!t.canEstimate())return e;let n=this.getNextABRAutoLevel();if(-1!==e){const t=this.hls.levels;if(t.length>Math.max(e,n)&&t[e].loadError<=t[n].loadError)return e}return-1!==e&&(n=Math.min(e,n)),n}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:t,hls:n}=this,{maxAutoLevel:i,config:r,minAutoLevel:s,media:a}=n,o=t?t.duration:e?e.duration:0,l=a&&0!==a.playbackRate?Math.abs(a.playbackRate):1,d=this.bwEstimator?this.bwEstimator.getEstimate():r.abrEwmaDefaultEstimate,c=n.mainForwardBufferInfo,u=(c?c.len:0)/l;let h=this.findBestLevel(d,s,i,u,r.abrBandWidthFactor,r.abrBandWidthUpFactor);if(h>=0)return h;Nb.trace(`[abr] ${u?"rebuffering expected":"buffer is empty"}, finding optimal quality level`);let f=o?Math.min(o,r.maxStarvationDelay):r.maxStarvationDelay,p=r.abrBandWidthFactor,m=r.abrBandWidthUpFactor;if(!u){const e=this.bitrateTestDelay;if(e){f=(o?Math.min(o,r.maxLoadingDelay):r.maxLoadingDelay)-e,Nb.trace(`[abr] bitrate test took ${Math.round(1e3*e)}ms, set first fragment max fetchDuration to ${Math.round(1e3*f)} ms`),p=m=1}}return h=this.findBestLevel(d,s,i,u+f,p,m),Math.max(h,0)}findBestLevel(e,t,n,i,r,s){var a;const{fragCurrent:o,partCurrent:l,lastLoadedFragLevel:d}=this,{levels:c}=this.hls,u=c[d],h=!(null==u||null==(a=u.details)||!a.live),f=null==u?void 0:u.codecSet,p=l?l.duration:o?o.duration:0,m=this.bwEstimator.getEstimateTTFB()/1e3;let g=t,v=-1;for(let a=n;a>=t;a--){const t=c[a];if(!t||f&&t.codecSet!==f){t&&(g=Math.min(a,g),v=Math.max(a,v));continue}-1!==v&&Nb.trace(`[abr] Skipped level(s) ${g}-${v} with CODECS:"${c[v].attrs.CODECS}"; not compatible with "${u.attrs.CODECS}"`);const n=t.details,o=(l?null==n?void 0:n.partTarget:null==n?void 0:n.averagetargetduration)||p;let y;y=a<=d?r*e:s*e;const b=c[a].maxBitrate,E=this.getTimeToLoadFrag(m,y,b*o,void 0===n);if(Nb.trace(`[abr] level:${a} adjustedbw-bitrate:${Math.round(y-b)} avgDuration:${o.toFixed(1)} maxFetchDuration:${i.toFixed(1)} fetchDuration:${E.toFixed(1)}`),y>b&&(0===E||!Rb(E)||h&&!this.bitrateTestDelay||E<i))return a}return-1}set nextAutoLevel(e){this._nextAutoLevel=e}},bufferController:class{constructor(e){this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendError=0,this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this._onMediaSourceOpen=()=>{const{media:e,mediaSource:t}=this;Nb.log("[buffer-controller]: Media source opened"),e&&(e.removeEventListener("emptied",this._onMediaEmptied),this.updateMediaElementDuration(),this.hls.trigger(Ib.MEDIA_ATTACHED,{media:e})),t&&t.removeEventListener("sourceopen",this._onMediaSourceOpen),this.checkPendingTracks()},this._onMediaSourceClose=()=>{Nb.log("[buffer-controller]: Media source closed")},this._onMediaSourceEnded=()=>{Nb.log("[buffer-controller]: Media source ended")},this._onMediaEmptied=()=>{const{media:e,_objectUrl:t}=this;e&&e.src!==t&&Nb.error(`Media element src was set while attaching MediaSource (${t} > ${e.src})`)},this.hls=e,this._initSourceBuffer(),this.registerListeners()}hasSourceTypes(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null}registerListeners(){const{hls:e}=this;e.on(Ib.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(Ib.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Ib.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Ib.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Ib.BUFFER_RESET,this.onBufferReset,this),e.on(Ib.BUFFER_APPENDING,this.onBufferAppending,this),e.on(Ib.BUFFER_CODECS,this.onBufferCodecs,this),e.on(Ib.BUFFER_EOS,this.onBufferEos,this),e.on(Ib.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(Ib.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(Ib.FRAG_PARSED,this.onFragParsed,this),e.on(Ib.FRAG_CHANGED,this.onFragChanged,this)}unregisterListeners(){const{hls:e}=this;e.off(Ib.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(Ib.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Ib.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Ib.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Ib.BUFFER_RESET,this.onBufferReset,this),e.off(Ib.BUFFER_APPENDING,this.onBufferAppending,this),e.off(Ib.BUFFER_CODECS,this.onBufferCodecs,this),e.off(Ib.BUFFER_EOS,this.onBufferEos,this),e.off(Ib.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(Ib.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(Ib.FRAG_PARSED,this.onFragParsed,this),e.off(Ib.FRAG_CHANGED,this.onFragChanged,this)}_initSourceBuffer(){this.sourceBuffer={},this.operationQueue=new vS(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.lastMpegAudioChunk=null}onManifestLoading(){this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,t){let n=2;(t.audio&&!t.video||!t.altAudio)&&(n=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=n,Nb.log(`${this.bufferCodecEventsExpected} bufferCodec event(s) expected`)}onMediaAttaching(e,t){const n=this.media=t.media;if(n&&yS){const e=this.mediaSource=new yS;e.addEventListener("sourceopen",this._onMediaSourceOpen),e.addEventListener("sourceended",this._onMediaSourceEnded),e.addEventListener("sourceclose",this._onMediaSourceClose),n.src=self.URL.createObjectURL(e),this._objectUrl=n.src,n.addEventListener("emptied",this._onMediaEmptied)}}onMediaDetaching(){const{media:e,mediaSource:t,_objectUrl:n}=this;if(t){if(Nb.log("[buffer-controller]: media source detaching"),"open"===t.readyState)try{t.endOfStream()}catch(e){Nb.warn(`[buffer-controller]: onMediaDetaching: ${e.message} while calling endOfStream`)}this.onBufferReset(),t.removeEventListener("sourceopen",this._onMediaSourceOpen),t.removeEventListener("sourceended",this._onMediaSourceEnded),t.removeEventListener("sourceclose",this._onMediaSourceClose),e&&(e.removeEventListener("emptied",this._onMediaEmptied),n&&self.URL.revokeObjectURL(n),e.src===n?(e.removeAttribute("src"),e.load()):Nb.warn("[buffer-controller]: media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(Ib.MEDIA_DETACHED,void 0)}onBufferReset(){this.getSourceBufferTypes().forEach((e=>{const t=this.sourceBuffer[e];try{t&&(this.removeBufferListeners(e),this.mediaSource&&this.mediaSource.removeSourceBuffer(t),this.sourceBuffer[e]=void 0)}catch(t){Nb.warn(`[buffer-controller]: Failed to reset the ${e} buffer`,t)}})),this._initSourceBuffer()}onBufferCodecs(e,t){const n=this.getSourceBufferTypes().length;Object.keys(t).forEach((e=>{if(n){const n=this.tracks[e];if(n&&"function"==typeof n.buffer.changeType){const{id:i,codec:r,levelCodec:s,container:a,metadata:o}=t[e],l=(n.levelCodec||n.codec).replace(bS,"$1"),d=(s||r).replace(bS,"$1");if(l!==d){const t=`${a};codecs=${s||r}`;this.appendChangeType(e,t),Nb.log(`[buffer-controller]: switching codec ${l} to ${d}`),this.tracks[e]={buffer:n.buffer,codec:r,container:a,levelCodec:s,metadata:o,id:i}}}}else this.pendingTracks[e]=t[e]})),n||(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())}appendChangeType(e,t){const{operationQueue:n}=this,i={execute:()=>{const i=this.sourceBuffer[e];i&&(Nb.log(`[buffer-controller]: changing ${e} sourceBuffer type to ${t}`),i.changeType(t)),n.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:t=>{Nb.warn(`[buffer-controller]: Failed to change ${e} SourceBuffer type`,t)}};n.append(i,e)}onBufferAppending(e,t){const{hls:n,operationQueue:i,tracks:r}=this,{data:s,type:a,frag:o,part:l,chunkMeta:d}=t,c=d.buffering[a],u=self.performance.now();c.start=u;const h=o.stats.buffering,f=l?l.stats.buffering:null;0===h.start&&(h.start=u),f&&0===f.start&&(f.start=u);const p=r.audio;let m=!1;"audio"===a&&"audio/mpeg"===(null==p?void 0:p.container)&&(m=!this.lastMpegAudioChunk||1===d.id||this.lastMpegAudioChunk.sn!==d.sn,this.lastMpegAudioChunk=d);const g=o.start,v={execute:()=>{if(c.executeStart=self.performance.now(),m){const e=this.sourceBuffer[a];if(e){const t=g-e.timestampOffset;Math.abs(t)>=.1&&(Nb.log(`[buffer-controller]: Updating audio SourceBuffer timestampOffset to ${g} (delta: ${t}) sn: ${o.sn})`),e.timestampOffset=g)}}this.appendExecutor(s,a)},onStart:()=>{},onComplete:()=>{const e=self.performance.now();c.executeEnd=c.end=e,0===h.first&&(h.first=e),f&&0===f.first&&(f.first=e);const{sourceBuffer:t}=this,n={};for(const e in t)n[e]=M_.getBuffered(t[e]);this.appendError=0,this.hls.trigger(Ib.BUFFER_APPENDED,{type:a,frag:o,part:l,chunkMeta:d,parent:o.type,timeRanges:n})},onError:e=>{Nb.error(`[buffer-controller]: Error encountered while trying to append to the ${a} SourceBuffer`,e);const t={type:Cb.MEDIA_ERROR,parent:o.type,details:Db.BUFFER_APPEND_ERROR,frag:o,part:l,chunkMeta:d,error:e,err:e,fatal:!1};e.code===DOMException.QUOTA_EXCEEDED_ERR?t.details=Db.BUFFER_FULL_ERROR:(this.appendError++,t.details=Db.BUFFER_APPEND_ERROR,this.appendError>n.config.appendErrorMaxRetry&&(Nb.error(`[buffer-controller]: Failed ${n.config.appendErrorMaxRetry} times to append segment in sourceBuffer`),t.fatal=!0)),n.trigger(Ib.ERROR,t)}};i.append(v,a)}onBufferFlushing(e,t){const{operationQueue:n}=this,i=e=>({execute:this.removeExecutor.bind(this,e,t.startOffset,t.endOffset),onStart:()=>{},onComplete:()=>{this.hls.trigger(Ib.BUFFER_FLUSHED,{type:e})},onError:t=>{Nb.warn(`[buffer-controller]: Failed to remove from ${e} SourceBuffer`,t)}});t.type?n.append(i(t.type),t.type):this.getSourceBufferTypes().forEach((e=>{n.append(i(e),e)}))}onFragParsed(e,t){const{frag:n,part:i}=t,r=[],s=i?i.elementaryStreams:n.elementaryStreams;s[Kb]?r.push("audiovideo"):(s[Wb]&&r.push("audio"),s[Gb]&&r.push("video"));0===r.length&&Nb.warn(`Fragments must have at least one ElementaryStreamType set. type: ${n.type} level: ${n.level} sn: ${n.sn}`),this.blockBuffers((()=>{const e=self.performance.now();n.stats.buffering.end=e,i&&(i.stats.buffering.end=e);const t=i?i.stats:n.stats;this.hls.trigger(Ib.FRAG_BUFFERED,{frag:n,part:i,stats:t,id:n.type})}),r)}onFragChanged(e,t){this.flushBackBuffer()}onBufferEos(e,t){this.getSourceBufferTypes().reduce(((e,n)=>{const i=this.sourceBuffer[n];return!i||t.type&&t.type!==n||(i.ending=!0,i.ended||(i.ended=!0,Nb.log(`[buffer-controller]: ${n} sourceBuffer now EOS`))),e&&!(i&&!i.ended)}),!0)&&(Nb.log("[buffer-controller]: Queueing mediaSource.endOfStream()"),this.blockBuffers((()=>{this.getSourceBufferTypes().forEach((e=>{const t=this.sourceBuffer[e];t&&(t.ending=!1)}));const{mediaSource:e}=this;e&&"open"===e.readyState?(Nb.log("[buffer-controller]: Calling mediaSource.endOfStream()"),e.endOfStream()):e&&Nb.info(`[buffer-controller]: Could not call mediaSource.endOfStream(). mediaSource.readyState: ${e.readyState}`)})))}onLevelUpdated(e,{details:t}){t.fragments.length&&(this.details=t,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())}flushBackBuffer(){const{hls:e,details:t,media:n,sourceBuffer:i}=this;if(!n||null===t)return;const r=this.getSourceBufferTypes();if(!r.length)return;const s=t.live&&null!==e.config.liveBackBufferLength?e.config.liveBackBufferLength:e.config.backBufferLength;if(!Rb(s)||s<0)return;const a=n.currentTime,o=t.levelTargetDuration,l=Math.max(s,o),d=Math.floor(a/o)*o-l;r.forEach((n=>{const r=i[n];if(r){const i=M_.getBuffered(r);if(i.length>0&&d>i.start(0)){if(e.trigger(Ib.BACK_BUFFER_REACHED,{bufferEnd:d}),t.live)e.trigger(Ib.LIVE_BACK_BUFFER_REACHED,{bufferEnd:d});else if(r.ended&&i.end(i.length-1)-a<2*o)return void Nb.info(`[buffer-controller]: Cannot flush ${n} back buffer while SourceBuffer is in ended state`);e.trigger(Ib.BUFFER_FLUSHING,{startOffset:0,endOffset:d,type:n})}}}))}updateMediaElementDuration(){if(!this.details||!this.media||!this.mediaSource||"open"!==this.mediaSource.readyState)return;const{details:e,hls:t,media:n,mediaSource:i}=this,r=e.fragments[0].start+e.totalduration,s=n.duration,a=Rb(i.duration)?i.duration:0;e.live&&t.config.liveDurationInfinity?(Nb.log("[buffer-controller]: Media Source duration is set to Infinity"),i.duration=1/0,this.updateSeekableRange(e)):(r>a&&r>s||!Rb(s))&&(Nb.log(`[buffer-controller]: Updating Media Source duration to ${r.toFixed(3)}`),i.duration=r)}updateSeekableRange(e){const t=this.mediaSource,n=e.fragments;if(n.length&&e.live&&null!=t&&t.setLiveSeekableRange){const i=Math.max(0,n[0].start),r=Math.max(i,i+e.totalduration);t.setLiveSeekableRange(i,r)}}checkPendingTracks(){const{bufferCodecEventsExpected:e,operationQueue:t,pendingTracks:n}=this,i=Object.keys(n).length;if(i&&!e||2===i){this.createSourceBuffers(n),this.pendingTracks={};const e=this.getSourceBufferTypes();if(e.length)this.hls.trigger(Ib.BUFFER_CREATED,{tracks:this.tracks}),e.forEach((e=>{t.executeNext(e)}));else{const e=new Error("could not create source buffer for media codec(s)");this.hls.trigger(Ib.ERROR,{type:Cb.MEDIA_ERROR,details:Db.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:e,reason:e.message})}}}createSourceBuffers(e){const{sourceBuffer:t,mediaSource:n}=this;if(!n)throw Error("createSourceBuffers called when mediaSource was null");for(const i in e)if(!t[i]){const r=e[i];if(!r)throw Error(`source buffer exists for track ${i}, however track does not`);const s=r.levelCodec||r.codec,a=`${r.container};codecs=${s}`;Nb.log(`[buffer-controller]: creating sourceBuffer(${a})`);try{const e=t[i]=n.addSourceBuffer(a),o=i;this.addBufferListener(o,"updatestart",this._onSBUpdateStart),this.addBufferListener(o,"updateend",this._onSBUpdateEnd),this.addBufferListener(o,"error",this._onSBUpdateError),this.tracks[i]={buffer:e,codec:s,container:r.container,levelCodec:r.levelCodec,metadata:r.metadata,id:r.id}}catch(e){Nb.error(`[buffer-controller]: error while trying to add sourceBuffer: ${e.message}`),this.hls.trigger(Ib.ERROR,{type:Cb.MEDIA_ERROR,details:Db.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:e,mimeType:a})}}}_onSBUpdateStart(e){const{operationQueue:t}=this;t.current(e).onStart()}_onSBUpdateEnd(e){const{operationQueue:t}=this;t.current(e).onComplete(),t.shiftAndExecuteNext(e)}_onSBUpdateError(e,t){const n=new Error(`${e} SourceBuffer error`);Nb.error(`[buffer-controller]: ${n}`,t),this.hls.trigger(Ib.ERROR,{type:Cb.MEDIA_ERROR,details:Db.BUFFER_APPENDING_ERROR,error:n,fatal:!1});const i=this.operationQueue.current(e);i&&i.onError(t)}removeExecutor(e,t,n){const{media:i,mediaSource:r,operationQueue:s,sourceBuffer:a}=this,o=a[e];if(!i||!r||!o)return Nb.warn(`[buffer-controller]: Attempting to remove from the ${e} SourceBuffer, but it does not exist`),void s.shiftAndExecuteNext(e);const l=Rb(i.duration)?i.duration:1/0,d=Rb(r.duration)?r.duration:1/0,c=Math.max(0,t),u=Math.min(n,l,d);u>c&&!o.ending?(o.ended=!1,Nb.log(`[buffer-controller]: Removing [${c},${u}] from the ${e} SourceBuffer`),o.remove(c,u)):s.shiftAndExecuteNext(e)}appendExecutor(e,t){const{operationQueue:n,sourceBuffer:i}=this,r=i[t];if(!r)return Nb.warn(`[buffer-controller]: Attempting to append to the ${t} SourceBuffer, but it does not exist`),void n.shiftAndExecuteNext(t);r.ended=!1,r.appendBuffer(e)}blockBuffers(e,t=this.getSourceBufferTypes()){if(!t.length)return Nb.log("[buffer-controller]: Blocking operation requested, but no SourceBuffers exist"),void Promise.resolve().then(e);const{operationQueue:n}=this,i=t.map((e=>n.appendBlocker(e)));Promise.all(i).then((()=>{e(),t.forEach((e=>{const t=this.sourceBuffer[e];null!=t&&t.updating||n.shiftAndExecuteNext(e)}))}))}getSourceBufferTypes(){return Object.keys(this.sourceBuffer)}addBufferListener(e,t,n){const i=this.sourceBuffer[e];if(!i)return;const r=n.bind(this,e);this.listeners[e].push({event:t,listener:r}),i.addEventListener(t,r)}removeBufferListeners(e){const t=this.sourceBuffer[e];t&&this.listeners[e].forEach((e=>{t.removeEventListener(e.event,e.listener)}))}},capLevelController:fk,errorController:class{constructor(e){this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.log=void 0,this.warn=void 0,this.error=void 0,this.hls=e,this.log=Nb.log.bind(Nb,"[info]:"),this.warn=Nb.warn.bind(Nb,"[warning]:"),this.error=Nb.error.bind(Nb,"[error]:"),this.registerListeners()}registerListeners(){const e=this.hls;e.on(Ib.ERROR,this.onError,this),e.on(Ib.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Ib.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(Ib.ERROR,this.onError,this),e.off(Ib.ERROR,this.onErrorOut,this),e.off(Ib.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Ib.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}}startLoad(e){this.playlistError=0}stopLoad(){}getVariantLevelIndex(e){return(null==e?void 0:e.type)===ET?e.level:this.hls.loadLevel}onManifestLoading(){this.playlistError=0,this.penalizedRenditions={}}onLevelUpdated(){this.playlistError=0}onError(e,t){var n,i;if(t.fatal)return;const r=this.hls,s=t.context;switch(t.details){case Db.FRAG_LOAD_ERROR:case Db.FRAG_LOAD_TIMEOUT:case Db.KEY_LOAD_ERROR:case Db.KEY_LOAD_TIMEOUT:return void(t.errorAction=this.getFragRetryOrSwitchAction(t));case Db.FRAG_PARSING_ERROR:if(null!=(n=t.frag)&&n.gap)return void(t.errorAction={action:a_,flags:d_});case Db.FRAG_GAP:case Db.FRAG_DECRYPT_ERROR:return t.errorAction=this.getFragRetryOrSwitchAction(t),void(t.errorAction.action=o_);case Db.LEVEL_EMPTY_ERROR:case Db.LEVEL_PARSING_ERROR:{var a,o;const e=t.parent===ET?t.level:r.loadLevel;t.details===Db.LEVEL_EMPTY_ERROR&&null!=(a=t.context)&&null!=(o=a.levelDetails)&&o.live?t.errorAction=this.getPlaylistRetryOrSwitchAction(t,e):(t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,e))}return;case Db.LEVEL_LOAD_ERROR:case Db.LEVEL_LOAD_TIMEOUT:return void("number"==typeof(null==s?void 0:s.level)&&(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,s.level)));case Db.AUDIO_TRACK_LOAD_ERROR:case Db.AUDIO_TRACK_LOAD_TIMEOUT:case Db.SUBTITLE_LOAD_ERROR:case Db.SUBTITLE_TRACK_LOAD_TIMEOUT:if(s){const e=r.levels[r.loadLevel];if(e&&(s.type===yT&&s.groupId===e.audioGroupId||s.type===bT&&s.groupId===e.textGroupId))return t.errorAction=this.getPlaylistRetryOrSwitchAction(t,r.loadLevel),t.errorAction.action=o_,void(t.errorAction.flags=c_)}return;case Db.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{const e=r.levels[r.loadLevel],n=null==e?void 0:e.attrs["HDCP-LEVEL"];n&&(t.errorAction={action:o_,flags:u_,hdcpLevel:n})}return;case Db.BUFFER_ADD_CODEC_ERROR:case Db.REMUX_ALLOC_ERROR:return void(t.errorAction=this.getLevelSwitchAction(t,null!=(i=t.level)?i:r.loadLevel));case Db.INTERNAL_EXCEPTION:case Db.BUFFER_APPENDING_ERROR:case Db.BUFFER_APPEND_ERROR:case Db.BUFFER_FULL_ERROR:case Db.LEVEL_SWITCH_ERROR:case Db.BUFFER_STALLED_ERROR:case Db.BUFFER_SEEK_OVER_HOLE:case Db.BUFFER_NUDGE_ON_STALL:return void(t.errorAction={action:a_,flags:d_})}if(t.type===Cb.KEY_SYSTEM_ERROR){const e=this.getVariantLevelIndex(t.frag);return t.levelRetry=!1,void(t.errorAction=this.getLevelSwitchAction(t,e))}}getPlaylistRetryOrSwitchAction(e,t){var n;const i=ZT(this.hls.config.playlistLoadPolicy,e),r=this.playlistError++,s=null==(n=e.response)?void 0:n.code;if(t_(i,r,QT(e),s))return{action:l_,flags:d_,retryConfig:i,retryCount:r};const a=this.getLevelSwitchAction(e,t);return i&&(a.retryConfig=i,a.retryCount=r),a}getFragRetryOrSwitchAction(e){const t=this.hls,n=this.getVariantLevelIndex(e.frag),i=t.levels[n],{fragLoadPolicy:r,keyLoadPolicy:s}=t.config,a=ZT(e.details.startsWith("key")?s:r,e),o=t.levels.reduce(((e,t)=>e+t.fragmentError),0);if(i){var l;e.details!==Db.FRAG_GAP&&i.fragmentError++;const t=null==(l=e.response)?void 0:l.code;if(t_(a,o,QT(e),t))return{action:l_,flags:d_,retryConfig:a,retryCount:o}}const d=this.getLevelSwitchAction(e,n);return a&&(d.retryConfig=a,d.retryCount=o),d}getLevelSwitchAction(e,t){const n=this.hls;null==t&&(t=n.loadLevel);const i=this.hls.levels[t];if(i&&(i.loadError++,n.autoLevelEnabled)){var r,s;let t=-1;const{levels:a,loadLevel:o,minAutoLevel:l,maxAutoLevel:d}=n,c=null==(r=e.frag)?void 0:r.type,{type:u,groupId:h}=null!=(s=e.context)?s:{};for(let n=a.length;n--;){const r=(n+o)%a.length;if(r!==o&&r>=l&&r<=d&&0===a[r].loadError){const n=a[r];if(e.details===Db.FRAG_GAP&&e.frag){const t=a[r].details;if(t){const n=i_(e.frag,t.fragments,e.frag.start);if(null!=n&&n.gap)continue}}else{if(u===yT&&h===n.audioGroupId||u===bT&&h===n.textGroupId)continue;if(c===TT&&i.audioGroupId===n.audioGroupId||c===_T&&i.textGroupId===n.textGroupId)continue}t=r;break}}if(t>-1&&n.loadLevel!==t)return e.levelRetry=!0,this.playlistError=0,{action:o_,flags:d_,nextAutoLevel:t}}return{action:o_,flags:c_}}onErrorOut(e,t){var n;switch(null==(n=t.errorAction)?void 0:n.action){case a_:break;case o_:this.sendAlternateToPenaltyBox(t),t.errorAction.resolved||t.details===Db.FRAG_GAP||(t.fatal=!0)}t.fatal&&this.hls.stopLoad()}sendAlternateToPenaltyBox(e){const t=this.hls,n=e.errorAction;if(!n)return;const{flags:i,hdcpLevel:r,nextAutoLevel:s}=n;switch(i){case d_:this.switchLevel(e,s);break;case c_:n.resolved||(n.resolved=this.redundantFailover(e));break;case u_:r&&(t.maxHdcpLevel=UT[UT.indexOf(r)-1],n.resolved=!0),this.warn(`Restricting playback to HDCP-LEVEL of "${t.maxHdcpLevel}" or lower`)}n.resolved||this.switchLevel(e,s)}switchLevel(e,t){void 0!==t&&e.errorAction&&(this.warn(`switching to level ${t} after ${e.details}`),this.hls.nextAutoLevel=t,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel)}redundantFailover(e){const{hls:t,penalizedRenditions:n}=this,i=e.parent===ET?e.level:t.loadLevel,r=t.levels[i],s=r.url.length,a=e.frag?e.frag.urlId:r.urlId;r.urlId!==a||e.frag&&!r.details||this.penalizeRendition(r,e);for(let o=1;o<s;o++){const l=(a+o)%s,d=n[l];if(!d||h_(d,e,n[a]))return this.warn(`Switching to Redundant Stream ${l+1}/${s}: "${r.url[l]}" after ${e.details}`),this.playlistError=0,t.levels.forEach((e=>{e.urlId=l})),t.nextLoadLevel=i,!0}return!1}penalizeRendition(e,t){const{penalizedRenditions:n}=this,i=n[e.urlId]||{lastErrorPerfMs:0,errors:[],details:void 0};i.lastErrorPerfMs=performance.now(),i.errors.push(t),i.details=e.details,n[e.urlId]=i}},fpsController:class{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(Ib.MEDIA_ATTACHING,this.onMediaAttaching,this)}unregisterListeners(){this.hls.off(Ib.MEDIA_ATTACHING,this.onMediaAttaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,t){const n=this.hls.config;if(n.capLevelOnFPSDrop){const e=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=e,e&&"function"==typeof e.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),n.fpsDroppedMonitoringPeriod)}}checkFPS(e,t,n){const i=performance.now();if(t){if(this.lastTime){const e=i-this.lastTime,r=n-this.lastDroppedFrames,s=t-this.lastDecodedFrames,a=1e3*r/e,o=this.hls;if(o.trigger(Ib.FPS_DROP,{currentDropped:r,currentDecoded:s,totalDroppedFrames:n}),a>0&&r>o.config.fpsDroppedMonitoringThreshold*s){let e=o.currentLevel;Nb.warn("drop FPS ratio greater than max allowed value for currentLevel: "+e),e>0&&(-1===o.autoLevelCapping||o.autoLevelCapping>=e)&&(e-=1,o.trigger(Ib.FPS_DROP_LEVEL_CAPPING,{level:e,droppedLevel:o.currentLevel}),o.autoLevelCapping=e,this.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=n,this.lastDecodedFrames=t}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}},stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:lE,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0,certLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null}},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},{cueHandler:Mk,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:class extends iA{constructor(e,t,n){super(e,t,n,"[subtitle-stream-controller]",_T),this.levels=[],this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),this.mainDetails=null}_registerListeners(){const{hls:e}=this;e.on(Ib.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Ib.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Ib.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Ib.LEVEL_LOADED,this.onLevelLoaded,this),e.on(Ib.ERROR,this.onError,this),e.on(Ib.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(Ib.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(Ib.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(Ib.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(Ib.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(Ib.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(Ib.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Ib.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Ib.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Ib.LEVEL_LOADED,this.onLevelLoaded,this),e.off(Ib.ERROR,this.onError,this),e.off(Ib.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(Ib.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(Ib.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(Ib.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(Ib.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(Ib.FRAG_BUFFERED,this.onFragBuffered,this)}startLoad(e){this.stopLoad(),this.state=j_,this.setInterval(500),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}onManifestLoading(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()}onMediaDetaching(){this.tracksBuffered=[],super.onMediaDetaching()}onLevelLoaded(e,t){this.mainDetails=t.details}onSubtitleFragProcessed(e,t){const{frag:n,success:i}=t;if(this.fragPrevious=n,this.state=j_,!i)return;const r=this.tracksBuffered[this.currentTrackId];if(!r)return;let s;const a=n.start;for(let e=0;e<r.length;e++)if(a>=r[e].start&&a<=r[e].end){s=r[e];break}const o=n.start+n.duration;s?s.end=o:(s={start:a,end:o},r.push(s)),this.fragmentTracker.fragBuffered(n)}onBufferFlushing(e,t){const{startOffset:n,endOffset:i}=t;if(0===n&&i!==Number.POSITIVE_INFINITY){const e=i-1;if(e<=0)return;t.endOffsetSubtitles=Math.max(0,e),this.tracksBuffered.forEach((t=>{for(let n=0;n<t.length;)if(t[n].end<=e)t.shift();else{if(!(t[n].start<e))break;t[n].start=e,n++}})),this.fragmentTracker.removeFragmentsInRange(n,e,_T)}}onFragBuffered(e,t){var n;this.loadedmetadata||t.frag.type!==ET||null!=(n=this.media)&&n.buffered.length&&(this.loadedmetadata=!0)}onError(e,t){const n=t.frag;(null==n?void 0:n.type)===_T&&(this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==K_&&(this.state=j_))}onSubtitleTracksUpdated(e,{subtitleTracks:t}){fS(this.levels,t)?this.levels=t.map((e=>new WT(e))):(this.tracksBuffered=[],this.levels=t.map((e=>{const t=new WT(e);return this.tracksBuffered[t.id]=[],t})),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,_T),this.fragPrevious=null,this.mediaBuffer=null)}onSubtitleTrackSwitch(e,t){if(this.currentTrackId=t.id,!this.levels.length||-1===this.currentTrackId)return void this.clearInterval();const n=this.levels[this.currentTrackId];null!=n&&n.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,n&&this.setInterval(500)}onSubtitleTrackLoaded(e,t){var n;const{details:i,id:r}=t,{currentTrackId:s,levels:a}=this;if(!a.length)return;const o=a[s];if(r>=a.length||r!==s||!o)return;this.mediaBuffer=this.mediaBufferTimeRanges;let l=0;if(i.live||null!=(n=o.details)&&n.live){const e=this.mainDetails;if(i.deltaUpdateFailed||!e)return;const t=e.fragments[0];o.details?(l=this.alignPlaylists(i,o.details),0===l&&t&&(l=t.start,YT(i,l))):i.hasProgramDateTime&&e.hasProgramDateTime?(B_(i,e),l=i.fragments[0].start):t&&(l=t.start,YT(i,l))}if(o.details=i,this.levelLastLoaded=r,this.startFragRequested||!this.mainDetails&&i.live||this.setStartPosition(o.details,l),this.tick(),i.live&&!this.fragCurrent&&this.media&&this.state===j_){i_(null,i.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),o.details=void 0)}}_handleFragmentLoadComplete(e){const{frag:t,payload:n}=e,i=t.decryptdata,r=this.hls;if(!this.fragContextChanged(t)&&n&&n.byteLength>0&&i&&i.key&&i.iv&&"AES-128"===i.method){const e=performance.now();this.decrypter.decrypt(new Uint8Array(n),i.key.buffer,i.iv.buffer).catch((e=>{throw r.trigger(Ib.ERROR,{type:Cb.MEDIA_ERROR,details:Db.FRAG_DECRYPT_ERROR,fatal:!1,error:e,reason:e.message,frag:t}),e})).then((n=>{const i=performance.now();r.trigger(Ib.FRAG_DECRYPTED,{frag:t,payload:n,stats:{tstart:e,tdecrypt:i}})})).catch((e=>{this.warn(`${e.name}: ${e.message}`),this.state=j_}))}}doTick(){if(this.media){if(this.state===j_){const{currentTrackId:e,levels:t}=this,n=t[e];if(!t.length||!n||!n.details)return;const{config:i}=this,r=this.getLoadPosition(),s=M_.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],r,i.maxBufferHole),{end:a,len:o}=s,l=this.getFwdBufferInfo(this.media,ET),d=n.details;if(o>this.getMaxBufferLength(null==l?void 0:l.len)+d.levelTargetDuration)return;const c=d.fragments,u=c.length,h=d.edge;let f=null;const p=this.fragPrevious;if(a<h){const e=i.maxFragLookUpTolerance,t=a>h-e?0:e;f=i_(p,c,Math.max(c[0].start,a),t),!f&&p&&p.start<c[0].start&&(f=c[0])}else f=c[u-1];if(!f)return;if(f=this.mapToInitFragWhenRequired(f),"initSegment"!==f.sn){const e=c[f.sn-d.startSN-1];e&&e.cc===f.cc&&this.fragmentTracker.getState(e)===y_&&(f=e)}this.fragmentTracker.getState(f)===y_&&this.loadFragment(f,n,a)}}else this.state=j_}getMaxBufferLength(e){const t=super.getMaxBufferLength();return e?Math.max(t,e):t}loadFragment(e,t,n){this.fragCurrent=e,"initSegment"===e.sn?this._loadInitSegment(e,t):(this.startFragRequested=!0,super.loadFragment(e,t,n))}get mediaBufferTimeRanges(){return new mS(this.tracksBuffered[this.currentTrackId]||[])}},subtitleTrackController:class extends f_{constructor(e){super(e,"[subtitle-track-controller]"),this.media=null,this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.trackChangeListener=()=>this.onTextTracksChanged(),this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.trackChangeListener=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes(this.trackId)}registerListeners(){const{hls:e}=this;e.on(Ib.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Ib.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Ib.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Ib.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Ib.LEVEL_LOADING,this.onLevelLoading,this),e.on(Ib.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(Ib.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(Ib.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(Ib.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Ib.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Ib.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Ib.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Ib.LEVEL_LOADING,this.onLevelLoading,this),e.off(Ib.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(Ib.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(Ib.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.trackChangeListener,e)}onMediaDetaching(){if(!this.media)return;self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId);gS(this.media.textTracks).forEach((e=>{RT(e)})),this.subtitleTrack=-1,this.media=null}onManifestLoading(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.subtitleTracks}onSubtitleTrackLoaded(e,t){const{id:n,details:i}=t,{trackId:r}=this,s=this.tracksInGroup[r];if(!s)return void this.warn(`Invalid subtitle track id ${n}`);const a=s.details;s.details=t.details,this.log(`subtitle track ${n} loaded [${i.startSN}-${i.endSN}]`),n===this.trackId&&this.playlistLoaded(n,t,a)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(null==t||!t.textGroupIds)return;const n=t.textGroupIds[t.urlId],i=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;if(this.groupId!==n){const e=this.tracks.filter((e=>!n||e.groupId===n));this.tracksInGroup=e;const t=this.findTrackId(null==i?void 0:i.name)||this.findTrackId();this.groupId=n||null;const r={subtitleTracks:e};this.log(`Updating subtitle tracks, ${e.length} track(s) found in "${n}" group-id`),this.hls.trigger(Ib.SUBTITLE_TRACKS_UPDATED,r),-1!==t&&this.setSubtitleTrack(t,i)}else this.shouldReloadPlaylist(i)&&this.setSubtitleTrack(this.trackId,i)}findTrackId(e){const t=this.tracksInGroup;for(let n=0;n<t.length;n++){const i=t[n];if((!this.selectDefaultTrack||i.default)&&(!e||e===i.name))return i.id}return-1}onError(e,t){!t.fatal&&t.context&&t.context.type===bT&&t.context.id===this.trackId&&t.context.groupId===this.groupId&&this.checkRetry(t)}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1;const t=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;this.setSubtitleTrack(e,t)}loadPlaylist(e){super.loadPlaylist();const t=this.tracksInGroup[this.trackId];if(this.shouldLoadPlaylist(t)){const n=t.id,i=t.groupId;let r=t.url;if(e)try{r=e.addDirectives(r)}catch(e){this.warn(`Could not construct new URL with HLS Delivery Directives: ${e}`)}this.log(`Loading subtitle playlist for id ${n}`),this.hls.trigger(Ib.SUBTITLE_TRACK_LOADING,{url:r,id:n,groupId:i,deliveryDirectives:e||null})}}toggleTrackModes(e){const{media:t,trackId:n}=this;if(!t)return;const i=gS(t.textTracks),r=i.filter((e=>e.groupId===this.groupId));if(-1===e)[].slice.call(i).forEach((e=>{e.mode="disabled"}));else{const e=r[n];e&&(e.mode="disabled")}const s=r[e];s&&(s.mode=this.subtitleDisplay?"showing":"hidden")}setSubtitleTrack(e,t){var n;const i=this.tracksInGroup;if(!this.media)return void(this.queuedDefaultTrack=e);if(this.trackId!==e&&this.toggleTrackModes(e),this.trackId===e&&(-1===e||null!=(n=i[e])&&n.details)||e<-1||e>=i.length)return;this.clearTimer();const r=i[e];if(this.log(`Switching to subtitle-track ${e}`+(r?` "${r.name}" lang:${r.lang} group:${r.groupId}`:"")),this.trackId=e,r){const{id:e,groupId:n="",name:i,type:s,url:a}=r;this.hls.trigger(Ib.SUBTITLE_TRACK_SWITCH,{id:e,groupId:n,name:i,type:s,url:a});const o=this.switchParams(r.url,null==t?void 0:t.details);this.loadPlaylist(o)}else this.hls.trigger(Ib.SUBTITLE_TRACK_SWITCH,{id:e})}onTextTracksChanged(){if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let e=-1;const t=gS(this.media.textTracks);for(let n=0;n<t.length;n++)if("hidden"===t[n].mode)e=n;else if("showing"===t[n].mode){e=n;break}this.subtitleTrack!==e&&(this.subtitleTrack=e)}},timelineController:class{constructor(e){if(this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},this.config.enableCEA708Captions){const e=new BS(this,"textTrack1"),t=new BS(this,"textTrack2"),n=new BS(this,"textTrack3"),i=new BS(this,"textTrack4");this.cea608Parser1=new NS(1,e,t),this.cea608Parser2=new NS(3,n,i)}e.on(Ib.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(Ib.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Ib.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Ib.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(Ib.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(Ib.FRAG_LOADING,this.onFragLoading,this),e.on(Ib.FRAG_LOADED,this.onFragLoaded,this),e.on(Ib.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(Ib.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(Ib.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(Ib.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(Ib.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(Ib.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(Ib.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Ib.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Ib.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(Ib.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(Ib.FRAG_LOADING,this.onFragLoading,this),e.off(Ib.FRAG_LOADED,this.onFragLoaded,this),e.off(Ib.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(Ib.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(Ib.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(Ib.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(Ib.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.cea608Parser1=this.cea608Parser2=null}addCues(e,t,n,i,r){let s=!1;for(let e=r.length;e--;){const i=r[e],c=(a=i[0],o=i[1],l=t,d=n,Math.min(o,d)-Math.max(a,l));if(c>=0&&(i[0]=Math.min(i[0],t),i[1]=Math.max(i[1],n),s=!0,c/(n-t)>.5))return}var a,o,l,d;if(s||r.push([t,n]),this.config.renderTextTracksNatively){const r=this.captionsTracks[e];this.Cues.newCue(r,t,n,i)}else{const r=this.Cues.newCue(null,t,n,i);this.hls.trigger(Ib.CUES_PARSED,{type:"captions",cues:r,track:e})}}onInitPtsFound(e,{frag:t,id:n,initPTS:i,timescale:r}){const{unparsedVttFrags:s}=this;"main"===n&&(this.initPTS[t.cc]={baseTime:i,timescale:r}),s.length&&(this.unparsedVttFrags=[],s.forEach((e=>{this.onFragLoaded(Ib.FRAG_LOADED,e)})))}getExistingTrack(e){const{media:t}=this;if(t)for(let n=0;n<t.textTracks.length;n++){const i=t.textTracks[n];if(i[e])return i}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:t,captionsTracks:n,media:i}=this,{label:r,languageCode:s}=t[e],a=this.getExistingTrack(e);if(a)n[e]=a,RT(n[e]),wT(n[e],i);else{const t=this.createTextTrack("captions",r,s);t&&(t[e]=!0,n[e]=t)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const t=this.captionsProperties[e];if(!t)return;const n={_id:e,label:t.label,kind:"captions",default:!!t.media&&!!t.media.default,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=n,this.hls.trigger(Ib.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[n]})}createTextTrack(e,t,n){const i=this.media;if(i)return i.addTextTrack(e,t,n)}onMediaAttaching(e,t){this.media=t.media,this._cleanTracks()}onMediaDetaching(){const{captionsTracks:e}=this;Object.keys(e).forEach((t=>{RT(e[t]),delete e[t]})),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const t=e.textTracks;if(t)for(let e=0;e<t.length;e++)RT(t[e])}onSubtitleTracksUpdated(e,t){const n=t.subtitleTracks||[],i=n.some((e=>e.textCodec===tk));if(this.config.enableWebVTT||i&&this.config.enableIMSC1){if(fS(this.tracks,n))return void(this.tracks=n);if(this.textTracks=[],this.tracks=n,this.config.renderTextTracksNatively){const e=this.media?this.media.textTracks:null;this.tracks.forEach(((t,n)=>{let i;if(e&&n<e.length){let n=null;for(let i=0;i<e.length;i++)if(hk(e[i],t)){n=e[i];break}n&&(i=n)}if(i)RT(i);else{const e=this._captionsOrSubtitlesFromCharacteristics(t);i=this.createTextTrack(e,t.name,t.lang),i&&(i.mode="disabled")}i&&(i.groupId=t.groupId,this.textTracks.push(i))}))}else if(this.tracks.length){const e=this.tracks.map((e=>({label:e.name,kind:e.type.toLowerCase(),default:e.default,subtitleTrack:e})));this.hls.trigger(Ib.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:e})}}}_captionsOrSubtitlesFromCharacteristics(e){if(e.attrs.CHARACTERISTICS){const t=/transcribes-spoken-dialog/gi.test(e.attrs.CHARACTERISTICS),n=/describes-music-and-sound/gi.test(e.attrs.CHARACTERISTICS);if(t&&n)return"captions"}return"subtitles"}onManifestLoaded(e,t){this.config.enableCEA708Captions&&t.captions&&t.captions.forEach((e=>{const t=/(?:CC|SERVICE)([1-4])/.exec(e.instreamId);if(!t)return;const n=`textTrack${t[1]}`,i=this.captionsProperties[n];i&&(i.label=e.name,e.lang&&(i.languageCode=e.lang),i.media=e)}))}closedCaptionsForLevel(e){const t=this.hls.levels[e.level];return null==t?void 0:t.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,t){const{cea608Parser1:n,cea608Parser2:i,lastSn:r,lastPartIndex:s}=this;if(this.enabled&&n&&i&&t.frag.type===ET){var a,o;const e=t.frag.sn,l=null!=(a=null==t||null==(o=t.part)?void 0:o.index)?a:-1;e===r+1||e===r&&l===s+1||(n.reset(),i.reset()),this.lastSn=e,this.lastPartIndex=l}}onFragLoaded(e,t){const{frag:n,payload:i}=t;if(n.type===_T)if(i.byteLength){const e=n.decryptdata,r="stats"in t;if(null==e||!e.encrypted||r){const e=this.tracks[n.level],r=this.vttCCs;r[n.cc]||(r[n.cc]={start:n.start,prevCC:this.prevCC,new:!0},this.prevCC=n.cc),e&&e.textCodec===tk?this._parseIMSC1(n,i):this._parseVTTs(t)}}else this.hls.trigger(Ib.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,t){const n=this.hls;sk(t,this.initPTS[e.cc],(t=>{this._appendCues(t,e.level),n.trigger(Ib.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})}),(t=>{Nb.log(`Failed to parse IMSC1: ${t}`),n.trigger(Ib.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:t})}))}_parseVTTs(e){var t;const{frag:n,payload:i}=e,{initPTS:r,unparsedVttFrags:s}=this,a=r.length-1;if(!r[n.cc]&&-1===a)return void s.push(e);const o=this.hls;ek(null!=(t=n.initSegment)&&t.data?BE(n.initSegment.data,new Uint8Array(i)):i,this.initPTS[n.cc],this.vttCCs,n.cc,n.start,(e=>{this._appendCues(e,n.level),o.trigger(Ib.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:n})}),(t=>{const r="Missing initPTS for VTT MPEGTS"===t.message;r?s.push(e):this._fallbackToIMSC1(n,i),Nb.log(`Failed to parse VTT cue: ${t}`),r&&a>n.cc||o.trigger(Ib.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:t})}))}_fallbackToIMSC1(e,t){const n=this.tracks[e.level];n.textCodec||sk(t,this.initPTS[e.cc],(()=>{n.textCodec=tk,this._parseIMSC1(e,t)}),(()=>{n.textCodec="wvtt"}))}_appendCues(e,t){const n=this.hls;if(this.config.renderTextTracksNatively){const n=this.textTracks[t];if(!n||"disabled"===n.mode)return;e.forEach((e=>LT(n,e)))}else{const i=this.tracks[t];if(!i)return;const r=i.default?"default":"subtitles"+t;n.trigger(Ib.CUES_PARSED,{type:"subtitles",cues:e,track:r})}}onFragDecrypted(e,t){const{frag:n}=t;n.type===_T&&this.onFragLoaded(Ib.FRAG_LOADED,t)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,t){const{cea608Parser1:n,cea608Parser2:i}=this;if(!this.enabled||!n||!i)return;const{frag:r,samples:s}=t;if(r.type!==ET||"NONE"!==this.closedCaptionsForLevel(r))for(let e=0;e<s.length;e++){const t=s[e].bytes;if(t){const r=this.extractCea608Data(t);n.addData(s[e].pts,r[0]),i.addData(s[e].pts,r[1])}}}onBufferFlushing(e,{startOffset:t,endOffset:n,endOffsetSubtitles:i,type:r}){const{media:s}=this;if(s&&!(s.currentTime<n)){if(!r||"video"===r){const{captionsTracks:e}=this;Object.keys(e).forEach((i=>IT(e[i],t,n)))}if(this.config.renderTextTracksNatively&&0===t&&void 0!==i){const{textTracks:e}=this;Object.keys(e).forEach((n=>IT(e[n],t,i)))}}}extractCea608Data(e){const t=[[],[]],n=31&e[0];let i=2;for(let r=0;r<n;r++){const n=e[i++],r=127&e[i++],s=127&e[i++];if(0===r&&0===s)continue;if(0!=(4&n)){const e=3&n;0!==e&&1!==e||(t[e].push(r),t[e].push(s))}}return t}},audioStreamController:class extends iA{constructor(e,t,n){super(e,t,n,"[audio-stream-controller]",TT),this.videoBuffer=null,this.videoTrackCC=-1,this.waitingVideoCC=-1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),this.mainDetails=null,this.bufferedTrack=null,this.switchingTrack=null}_registerListeners(){const{hls:e}=this;e.on(Ib.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Ib.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Ib.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Ib.LEVEL_LOADED,this.onLevelLoaded,this),e.on(Ib.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(Ib.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(Ib.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(Ib.ERROR,this.onError,this),e.on(Ib.BUFFER_RESET,this.onBufferReset,this),e.on(Ib.BUFFER_CREATED,this.onBufferCreated,this),e.on(Ib.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(Ib.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(Ib.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(Ib.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Ib.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Ib.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Ib.LEVEL_LOADED,this.onLevelLoaded,this),e.off(Ib.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(Ib.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(Ib.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(Ib.ERROR,this.onError,this),e.off(Ib.BUFFER_RESET,this.onBufferReset,this),e.off(Ib.BUFFER_CREATED,this.onBufferCreated,this),e.off(Ib.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(Ib.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(Ib.FRAG_BUFFERED,this.onFragBuffered,this)}onInitPtsFound(e,{frag:t,id:n,initPTS:i,timescale:r}){if("main"===n){const e=t.cc;this.initPTS[t.cc]={baseTime:i,timescale:r},this.log(`InitPTS for cc: ${e} found from main: ${i}`),this.videoTrackCC=e,this.state===tA&&this.tick()}}startLoad(e){if(!this.levels)return this.startPosition=e,void(this.state=K_);const t=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),t>0&&-1===e?(this.log(`Override startPosition with lastCurrentTime @${t.toFixed(3)}`),e=t,this.state=j_):(this.loadedmetadata=!1,this.state=X_),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}doTick(){switch(this.state){case j_:this.doTickIdle();break;case X_:{var e;const{levels:t,trackId:n}=this,i=null==t||null==(e=t[n])?void 0:e.details;if(i){if(this.waitForCdnTuneIn(i))break;this.state=tA}break}case z_:{var t;const e=performance.now(),n=this.retryDate;(!n||e>=n||null!=(t=this.media)&&t.seeking)&&(this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded(this.trackId),this.state=j_);break}case tA:{const e=this.waitingData;if(e){const{frag:t,part:n,cache:i,complete:r}=e;if(void 0!==this.initPTS[t.cc]){this.waitingData=null,this.waitingVideoCC=-1,this.state=Y_;const e={frag:t,part:n,payload:i.flush(),networkDetails:null};this._handleFragmentLoadProgress(e),r&&super._handleFragmentLoadComplete(e)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log(`Waiting fragment cc (${t.cc}) cancelled because video is at cc ${this.videoTrackCC}`),this.clearWaitingFragment();else{const e=this.getLoadPosition(),n=M_.bufferInfo(this.mediaBuffer,e,this.config.maxBufferHole);r_(n.end,this.config.maxFragLookUpTolerance,t)<0&&(this.log(`Waiting fragment cc (${t.cc}) @ ${t.start} cancelled because another fragment at ${n.end} is needed`),this.clearWaitingFragment())}}else this.state=j_}}this.onTickEnd()}clearWaitingFragment(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=j_)}resetLoadingState(){this.clearWaitingFragment(),super.resetLoadingState()}onTickEnd(){const{media:e}=this;null!=e&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){const{hls:e,levels:t,media:n,trackId:i}=this,r=e.config;if(null==t||!t[i])return;if(!n&&(this.startFragRequested||!r.startFragPrefetch))return;const s=t[i],a=s.details;if(!a||a.live&&this.levelLastLoaded!==i||this.waitForCdnTuneIn(a))return void(this.state=X_);const o=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&o&&(this.bufferFlushed=!1,this.afterBufferFlushed(o,Wb,TT));const l=this.getFwdBufferInfo(o,TT);if(null===l)return;const{bufferedTrack:d,switchingTrack:c}=this;if(!c&&this._streamEnded(l,a))return e.trigger(Ib.BUFFER_EOS,{type:"audio"}),void(this.state=J_);const u=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,ET),h=l.len,f=this.getMaxBufferLength(null==u?void 0:u.len);if(h>=f&&!c)return;const p=a.fragments[0].start;let m=l.end;if(c&&n){const e=this.getLoadPosition();d&&c.attrs!==d.attrs&&(m=e),a.PTSKnown&&e<p&&(l.end>p||l.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),n.currentTime=p+.05)}let g=this.getNextFragment(m,a),v=!1;if(g&&this.isLoopLoading(g,m)&&(v=!!g.gap,g=this.getNextFragmentLoopLoading(g,a,l,ET,f)),!g)return void(this.bufferFlushed=!0);const y=u&&g.start>u.end+a.targetduration;if(y||(null==u||!u.len)&&l.len){const e=this.getAppendedFrag(g.start,ET);if(null===e)return;if(v||(v=!!e.gap||!!y&&0===u.len),y&&!v||v&&l.nextStart&&l.nextStart<e.end)return}this.loadFragment(g,s,m)}getMaxBufferLength(e){const t=super.getMaxBufferLength();return e?Math.min(Math.max(t,e),this.config.maxMaxBufferLength):t}onMediaDetaching(){this.videoBuffer=null,super.onMediaDetaching()}onAudioTracksUpdated(e,{audioTracks:t}){this.resetTransmuxer(),this.levels=t.map((e=>new WT(e)))}onAudioTrackSwitching(e,t){const n=!!t.url;this.trackId=t.id;const{fragCurrent:i}=this;i&&(i.abortRequests(),this.removeUnbufferedFrags(i.start)),this.resetLoadingState(),n?this.setInterval(100):this.resetTransmuxer(),n?(this.switchingTrack=t,this.state=j_):(this.switchingTrack=null,this.bufferedTrack=t,this.state=K_),this.tick()}onManifestLoading(){this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=!1,this.levels=this.mainDetails=this.waitingData=this.bufferedTrack=this.cachedTrackLoadedData=this.switchingTrack=null,this.startFragRequested=!1,this.trackId=this.videoTrackCC=this.waitingVideoCC=-1}onLevelLoaded(e,t){this.mainDetails=t.details,null!==this.cachedTrackLoadedData&&(this.hls.trigger(Ib.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)}onAudioTrackLoaded(e,t){var n;if(null==this.mainDetails)return void(this.cachedTrackLoadedData=t);const{levels:i}=this,{details:r,id:s}=t;if(!i)return void this.warn(`Audio tracks were reset while loading level ${s}`);this.log(`Track ${s} loaded [${r.startSN},${r.endSN}]${r.lastPartSn?`[part-${r.lastPartSn}-${r.lastPartIndex}]`:""},duration:${r.totalduration}`);const a=i[s];let o=0;if(r.live||null!=(n=a.details)&&n.live){this.checkLiveUpdate(r);const e=this.mainDetails;if(r.deltaUpdateFailed||!e)return;!a.details&&r.hasProgramDateTime&&e.hasProgramDateTime?(B_(r,e),o=r.fragments[0].start):o=this.alignPlaylists(r,a.details)}a.details=r,this.levelLastLoaded=s,this.startFragRequested||!this.mainDetails&&r.live||this.setStartPosition(a.details,o),this.state!==X_||this.waitForCdnTuneIn(r)||(this.state=j_),this.tick()}_handleFragmentLoadProgress(e){var t;const{frag:n,part:i,payload:r}=e,{config:s,trackId:a,levels:o}=this;if(!o)return void this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);const l=o[a];if(!l)return void this.warn("Audio track is undefined on fragment load progress");const d=l.details;if(!d)return this.warn("Audio track details undefined on fragment load progress"),void this.removeUnbufferedFrags(n.start);const c=s.defaultAudioCodec||l.audioCodec||"mp4a.40.2";let u=this.transmuxer;u||(u=this.transmuxer=new oS(this.hls,TT,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const h=this.initPTS[n.cc],f=null==(t=n.initSegment)?void 0:t.data;if(void 0!==h){const e=!1,t=i?i.index:-1,s=-1!==t,a=new P_(n.level,n.sn,n.stats.chunkCount,r.byteLength,t,s);u.push(r,f,c,"",n,i,d.totalduration,e,a,h)}else{this.log(`Unknown video PTS for cc ${n.cc}, waiting for video PTS before demuxing audio frag ${n.sn} of [${d.startSN} ,${d.endSN}],track ${a}`);const{cache:e}=this.waitingData=this.waitingData||{frag:n,part:i,cache:new hS,complete:!1};e.push(new Uint8Array(r)),this.waitingVideoCC=this.videoTrackCC,this.state=tA}}_handleFragmentLoadComplete(e){this.waitingData?this.waitingData.complete=!0:super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1}onBufferCreated(e,t){const n=t.tracks.audio;n&&(this.mediaBuffer=n.buffer||null),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer||null)}onFragBuffered(e,t){const{frag:n,part:i}=t;if(n.type===TT)if(this.fragContextChanged(n))this.warn(`Fragment ${n.sn}${i?" p: "+i.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);else{if("initSegment"!==n.sn){this.fragPrevious=n;const e=this.switchingTrack;e&&(this.bufferedTrack=e,this.switchingTrack=null,this.hls.trigger(Ib.AUDIO_TRACK_SWITCHED,kb({},e)))}this.fragBufferedComplete(n,i)}else if(!this.loadedmetadata&&n.type===ET){const e=this.videoBuffer||this.media;if(e){M_.getBuffered(e).length&&(this.loadedmetadata=!0)}}}onError(e,t){var n;if(t.fatal)this.state=eA;else switch(t.details){case Db.FRAG_GAP:case Db.FRAG_PARSING_ERROR:case Db.FRAG_DECRYPT_ERROR:case Db.FRAG_LOAD_ERROR:case Db.FRAG_LOAD_TIMEOUT:case Db.KEY_LOAD_ERROR:case Db.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(TT,t);break;case Db.AUDIO_TRACK_LOAD_ERROR:case Db.AUDIO_TRACK_LOAD_TIMEOUT:case Db.LEVEL_PARSING_ERROR:t.levelRetry||this.state!==X_||(null==(n=t.context)?void 0:n.type)!==yT||(this.state=j_);break;case Db.BUFFER_FULL_ERROR:if(!t.parent||"audio"!==t.parent)return;this.reduceLengthAndFlushBuffer(t)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case Db.INTERNAL_EXCEPTION:this.recoverWorkerError(t)}}onBufferFlushed(e,{type:t}){t===Wb&&(this.bufferFlushed=!0,this.state===J_&&(this.state=j_))}_handleTransmuxComplete(e){var t;const n="audio",{hls:i}=this,{remuxResult:r,chunkMeta:s}=e,a=this.getCurrentContext(s);if(!a)return void this.resetWhenMissingContext(s);const{frag:o,part:l,level:d}=a,{details:c}=d,{audio:u,text:h,id3:f,initSegment:p}=r;if(!this.fragContextChanged(o)&&c){if(this.state=Q_,this.switchingTrack&&u&&this.completeAudioSwitch(this.switchingTrack),null!=p&&p.tracks){const e=o.initSegment||o;this._bufferInitSegment(p.tracks,e,s),i.trigger(Ib.FRAG_PARSING_INIT_SEGMENT,{frag:e,id:n,tracks:p.tracks})}if(u){const{startPTS:e,endPTS:t,startDTS:n,endDTS:i}=u;l&&(l.elementaryStreams[Wb]={startPTS:e,endPTS:t,startDTS:n,endDTS:i}),o.setElementaryStreamInfo(Wb,e,t,n,i),this.bufferFragmentData(u,o,l,s)}if(null!=f&&null!=(t=f.samples)&&t.length){const e=Lb({id:n,frag:o,details:c},f);i.trigger(Ib.FRAG_PARSING_METADATA,e)}if(h){const e=Lb({id:n,frag:o,details:c},h);i.trigger(Ib.FRAG_PARSING_USERDATA,e)}}else this.fragmentTracker.removeFragment(o)}_bufferInitSegment(e,t,n){if(this.state!==Q_)return;e.video&&delete e.video;const i=e.audio;if(!i)return;i.levelCodec=i.codec,i.id="audio",this.log(`Init audio buffer, container:${i.container}, codecs[parsed]=[${i.codec}]`),this.hls.trigger(Ib.BUFFER_CODECS,e);const r=i.initSegment;if(null!=r&&r.byteLength){const e={type:"audio",frag:t,part:null,chunkMeta:n,parent:t.type,data:r};this.hls.trigger(Ib.BUFFER_APPENDING,e)}this.tick()}loadFragment(e,t,n){const i=this.fragmentTracker.getState(e);var r;(this.fragCurrent=e,this.switchingTrack||i===y_||i===E_)?"initSegment"===e.sn?this._loadInitSegment(e,t):null!=(r=t.details)&&r.live&&!this.initPTS[e.cc]?(this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=tA):(this.startFragRequested=!0,super.loadFragment(e,t,n)):this.clearTrackerIfNeeded(e)}completeAudioSwitch(e){const{hls:t,media:n,bufferedTrack:i}=this,r=null==i?void 0:i.attrs,s=e.attrs;n&&r&&(r.CHANNELS!==s.CHANNELS||r.NAME!==s.NAME||r.LANGUAGE!==s.LANGUAGE)&&(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio")),this.bufferedTrack=e,this.switchingTrack=null,t.trigger(Ib.AUDIO_TRACK_SWITCHED,kb({},e))}},audioTrackController:class extends f_{constructor(e){super(e,"[audio-track-controller]"),this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(Ib.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Ib.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Ib.LEVEL_LOADING,this.onLevelLoading,this),e.on(Ib.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(Ib.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(Ib.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(Ib.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Ib.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Ib.LEVEL_LOADING,this.onLevelLoading,this),e.off(Ib.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(Ib.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(Ib.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.audioTracks||[]}onAudioTrackLoaded(e,t){const{id:n,groupId:i,details:r}=t,s=this.tracksInGroup[n];if(!s||s.groupId!==i)return void this.warn(`Track with id:${n} and group:${i} not found in active group ${s.groupId}`);const a=s.details;s.details=t.details,this.log(`audio-track ${n} "${s.name}" lang:${s.lang} group:${i} loaded [${r.startSN}-${r.endSN}]`),n===this.trackId&&this.playlistLoaded(n,t,a)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(null==t||!t.audioGroupIds)return;const n=t.audioGroupIds[t.urlId];if(this.groupId!==n){this.groupId=n||null;const e=this.tracks.filter((e=>!n||e.groupId===n));this.selectDefaultTrack&&!e.some((e=>e.default))&&(this.selectDefaultTrack=!1),this.tracksInGroup=e;const t={audioTracks:e};this.log(`Updating audio tracks, ${e.length} track(s) found in group:${n}`),this.hls.trigger(Ib.AUDIO_TRACKS_UPDATED,t),this.selectInitialTrack()}else this.shouldReloadPlaylist(this.currentTrack)&&this.setAudioTrack(this.trackId)}onError(e,t){!t.fatal&&t.context&&t.context.type===yT&&t.context.id===this.trackId&&t.context.groupId===this.groupId&&(this.requestScheduled=-1,this.checkRetry(t))}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioTrack(e){const t=this.tracksInGroup;if(e<0||e>=t.length)return void this.warn("Invalid id passed to audio-track controller");this.clearTimer();const n=this.currentTrack;t[this.trackId];const i=t[e],{groupId:r,name:s}=i;if(this.log(`Switching to audio-track ${e} "${s}" lang:${i.lang} group:${r}`),this.trackId=e,this.currentTrack=i,this.selectDefaultTrack=!1,this.hls.trigger(Ib.AUDIO_TRACK_SWITCHING,kb({},i)),i.details&&!i.details.live)return;const a=this.switchParams(i.url,null==n?void 0:n.details);this.loadPlaylist(a)}selectInitialTrack(){const e=this.tracksInGroup,t=this.findTrackId(this.currentTrack)|this.findTrackId(null);if(-1!==t)this.setAudioTrack(t);else{const t=new Error(`No track found for running audio group-ID: ${this.groupId} track count: ${e.length}`);this.warn(t.message),this.hls.trigger(Ib.ERROR,{type:Cb.MEDIA_ERROR,details:Db.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:t})}}findTrackId(e){const t=this.tracksInGroup;for(let n=0;n<t.length;n++){const i=t[n];if(!this.selectDefaultTrack||i.default){if(!e||void 0!==e.attrs["STABLE-RENDITION-ID"]&&e.attrs["STABLE-RENDITION-ID"]===i.attrs["STABLE-RENDITION-ID"])return i.id;if(e.name===i.name&&e.lang===i.lang)return i.id}}return-1}loadPlaylist(e){super.loadPlaylist();const t=this.tracksInGroup[this.trackId];if(this.shouldLoadPlaylist(t)){const n=t.id,i=t.groupId;let r=t.url;if(e)try{r=e.addDirectives(r)}catch(e){this.warn(`Could not construct new URL with HLS Delivery Directives: ${e}`)}this.log(`loading audio-track playlist ${n} "${t.name}" lang:${t.lang} group:${i}`),this.clearTimer(),this.hls.trigger(Ib.AUDIO_TRACK_LOADING,{url:r,id:n,groupId:i,deliveryDirectives:e||null})}}},emeController:mk,cmcdController:Ak,contentSteeringController:class{constructor(e){this.hls=void 0,this.log=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this.pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.log=Nb.log.bind(Nb,"[content-steering]:"),this.registerListeners()}registerListeners(){const e=this.hls;e.on(Ib.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Ib.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(Ib.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Ib.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(Ib.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Ib.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(Ib.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Ib.ERROR,this.onError,this))}startLoad(){if(this.started=!0,self.clearTimeout(this.reloadTimer),this.enabled&&this.uri)if(this.updated){const e=Math.max(1e3*this.timeToLoad-(performance.now()-this.updated),0);this.scheduleRefresh(this.uri,e)}else this.loadSteeringManifest(this.uri)}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),self.clearTimeout(this.reloadTimer)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const t=this.levels;t&&(this.levels=t.filter((t=>t!==e)))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,t){const{contentSteering:n}=t;null!==n&&(this.pathwayId=n.pathwayId,this.uri=n.uri,this.started&&this.startLoad())}onManifestParsed(e,t){this.audioTracks=t.audioTracks,this.subtitleTracks=t.subtitleTracks}onError(e,t){const{errorAction:n}=t;if((null==n?void 0:n.action)===o_&&n.flags===c_){let e=this.pathwayPriority;const t=this.pathwayId;this.penalizedPathways[t]||(this.penalizedPathways[t]=performance.now()),!e&&this.levels&&(e=this.levels.reduce(((e,t)=>(-1===e.indexOf(t.pathwayId)&&e.push(t.pathwayId),e)),[])),e&&e.length>1&&(this.updatePathwayPriority(e),n.resolved=this.pathwayId!==t)}}filterParsedLevels(e){this.levels=e;let t=this.getLevelsForPathway(this.pathwayId);if(0===t.length){const n=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${n}"`),t=this.getLevelsForPathway(n),this.pathwayId=n}return t.length!==e.length?(this.log(`Found ${t.length}/${e.length} levels in Pathway "${this.pathwayId}"`),t):e}getLevelsForPathway(e){return null===this.levels?[]:this.levels.filter((t=>e===t.pathwayId))}updatePathwayPriority(e){let t;this.pathwayPriority=e;const n=this.penalizedPathways,i=performance.now();Object.keys(n).forEach((e=>{i-n[e]>3e5&&delete n[e]}));for(let i=0;i<e.length;i++){const r=e[i];if(n[r])continue;if(r===this.pathwayId)return;const s=this.hls.nextLoadLevel,a=this.hls.levels[s];if(t=this.getLevelsForPathway(r),t.length>0){this.log(`Setting Pathway to "${r}"`),this.pathwayId=r,this.hls.trigger(Ib.LEVELS_UPDATED,{levels:t});const e=this.hls.levels[s];a&&e&&this.levels&&(e.attrs["STABLE-VARIANT-ID"]!==a.attrs["STABLE-VARIANT-ID"]&&e.bitrate!==a.bitrate&&this.log(`Unstable Pathways change from bitrate ${a.bitrate} to ${e.bitrate}`),this.hls.nextLoadLevel=s);break}}}clonePathways(e){const t=this.levels;if(!t)return;const n={},i={};e.forEach((e=>{const{ID:r,"BASE-ID":s,"URI-REPLACEMENT":a}=e;if(t.some((e=>e.pathwayId===r)))return;const o=this.getLevelsForPathway(s).map((e=>{const t=Lb({},e);t.details=void 0,t.url=kk(e.uri,e.attrs["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",a);const s=new Bb(e.attrs);s["PATHWAY-ID"]=r;const o=s.AUDIO&&`${s.AUDIO}_clone_${r}`,l=s.SUBTITLES&&`${s.SUBTITLES}_clone_${r}`;o&&(n[s.AUDIO]=o,s.AUDIO=o),l&&(i[s.SUBTITLES]=l,s.SUBTITLES=l),t.attrs=s;const d=new WT(t);return g_(d,"audio",o),g_(d,"text",l),d}));t.push(...o),Sk(this.audioTracks,n,a,r),Sk(this.subtitleTracks,i,a,r)}))}loadSteeringManifest(e){const t=this.hls.config,n=t.loader;let i;this.loader&&this.loader.destroy(),this.loader=new n(t);try{i=new self.URL(e)}catch(t){return this.enabled=!1,void this.log(`Failed to parse Steering Manifest URI: ${e}`)}if("data:"!==i.protocol){const e=0|(this.hls.bandwidthEstimate||t.abrEwmaDefaultEstimate);i.searchParams.set("_HLS_pathway",this.pathwayId),i.searchParams.set("_HLS_throughput",""+e)}const r={responseType:"json",url:i.href},s=t.steeringManifestLoadPolicy.default,a=s.errorRetry||s.timeoutRetry||{},o={loadPolicy:s,timeout:s.maxLoadTimeMs,maxRetry:a.maxNumRetry||0,retryDelay:a.retryDelayMs||0,maxRetryDelay:a.maxRetryDelayMs||0},l={onSuccess:(e,t,n,r)=>{this.log(`Loaded steering manifest: "${i}"`);const s=e.data;if(1!==s.VERSION)return void this.log(`Steering VERSION ${s.VERSION} not supported!`);this.updated=performance.now(),this.timeToLoad=s.TTL;const{"RELOAD-URI":a,"PATHWAY-CLONES":o,"PATHWAY-PRIORITY":l}=s;if(a)try{this.uri=new self.URL(a,i).href}catch(e){return this.enabled=!1,void this.log(`Failed to parse Steering Manifest RELOAD-URI: ${a}`)}this.scheduleRefresh(this.uri||n.url),o&&this.clonePathways(o),l&&this.updatePathwayPriority(l)},onError:(e,t,n,i)=>{if(this.log(`Error loading steering manifest: ${e.code} ${e.text} (${t.url})`),this.stopLoad(),410===e.code)return this.enabled=!1,void this.log(`Steering manifest ${t.url} no longer available`);let r=1e3*this.timeToLoad;if(429!==e.code)this.scheduleRefresh(this.uri||t.url,r);else{const e=this.loader;if("function"==typeof(null==e?void 0:e.getResponseHeader)){const t=e.getResponseHeader("Retry-After");t&&(r=1e3*parseFloat(t))}this.log(`Steering manifest ${t.url} rate limited`)}},onTimeout:(e,t,n)=>{this.log(`Timeout loading steering manifest (${t.url})`),this.scheduleRefresh(this.uri||t.url)}};this.log(`Requesting steering manifest: ${i}`),this.loader.load(r,o,l)}scheduleRefresh(e,t=1e3*this.timeToLoad){self.clearTimeout(this.reloadTimer),this.reloadTimer=self.setTimeout((()=>{this.loadSteeringManifest(e)}),t)}}});function Ok(e){return e&&"object"==typeof e?Array.isArray(e)?e.map(Ok):Object.keys(e).reduce(((t,n)=>(t[n]=Ok(e[n]),t)),{}):e}function Nk(e){const t=e.loader;if(t!==Ik&&t!==Lk)Nb.log("[config]: Custom loader detected, cannot enable progressive streaming"),e.progressive=!1;else{(function(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch(e){}return!1})()&&(e.loader=Ik,e.progressive=!0,e.enableSoftwareAES=!0,Nb.log("[config]: Progressive streaming enabled, using FetchLoader"))}}class Fk{static get version(){return"1.4.12"}static isSupported(){return function(){const e=JE();if(!e)return!1;const t=rA(),n=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),i=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!n&&!!i}()}static get Events(){return Ib}static get ErrorTypes(){return Cb}static get ErrorDetails(){return Db}static get DefaultConfig(){return Fk.defaultConfig?Fk.defaultConfig:Pk}static set DefaultConfig(e){Fk.defaultConfig=e}constructor(e={}){this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new sS,this._autoLevelCapping=void 0,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null,function(e,t){if(self.console&&!0===e||"object"==typeof e){Ob(e,"debug","log","info","warn","error");try{Pb.log(`Debug logs enabled for "${t}" in hls.js version 1.4.12`)}catch(e){Pb=Mb}}else Pb=Mb}(e.debug||!1,"Hls instance");const t=this.config=function(e,t){if((t.liveSyncDurationCount||t.liveMaxLatencyDurationCount)&&(t.liveSyncDuration||t.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(void 0!==t.liveMaxLatencyDurationCount&&(void 0===t.liveSyncDurationCount||t.liveMaxLatencyDurationCount<=t.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(void 0!==t.liveMaxLatencyDuration&&(void 0===t.liveSyncDuration||t.liveMaxLatencyDuration<=t.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const n=Ok(e),i=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return["manifest","level","frag"].forEach((e=>{const r=`${"level"===e?"playlist":e}LoadPolicy`,s=void 0===t[r],a=[];i.forEach((i=>{const o=`${e}Loading${i}`,l=t[o];if(void 0!==l&&s){a.push(o);const e=n[r].default;switch(t[r]={default:e},i){case"TimeOut":e.maxLoadTimeMs=l,e.maxTimeToFirstByteMs=l;break;case"MaxRetry":e.errorRetry.maxNumRetry=l,e.timeoutRetry.maxNumRetry=l;break;case"RetryDelay":e.errorRetry.retryDelayMs=l,e.timeoutRetry.retryDelayMs=l;break;case"MaxRetryTimeout":e.errorRetry.maxRetryDelayMs=l,e.timeoutRetry.maxRetryDelayMs=l}}})),a.length&&Nb.warn(`hls.js config: "${a.join('", "')}" setting(s) are deprecated, use "${r}": ${JSON.stringify(t[r])}`)})),kb(kb({},n),t)}(Fk.DefaultConfig,e);this.userConfig=e,this._autoLevelCapping=-1,t.progressive&&Nk(t);const{abrController:n,bufferController:i,capLevelController:r,errorController:s,fpsController:a}=t,o=new s(this),l=this.abrController=new n(this),d=this.bufferController=new i(this),c=this.capLevelController=new r(this),u=new a(this),h=new kT(this),f=new NT(this),p=t.contentSteeringController,m=p?new p(this):null,g=this.levelController=new m_(this,m),v=new __(this),y=new C_(this.config),b=this.streamController=new dS(this,v,y);c.setStreamController(b),u.setStreamController(b);const E=[h,g,b];m&&E.splice(1,0,m),this.networkControllers=E;const T=[l,d,c,u,f,v];this.audioTrackController=this.createController(t.audioTrackController,E);const _=t.audioStreamController;_&&E.push(new _(this,v,y)),this.subtitleTrackController=this.createController(t.subtitleTrackController,E);const A=t.subtitleStreamController;A&&E.push(new A(this,v,y)),this.createController(t.timelineController,T),y.emeController=this.emeController=this.createController(t.emeController,T),this.cmcdController=this.createController(t.cmcdController,T),this.latencyController=this.createController(FT,T),this.coreComponents=T,E.push(o);const S=o.onErrorOut;"function"==typeof S&&this.on(Ib.ERROR,S,o)}createController(e,t){if(e){const n=new e(this);return t&&t.push(n),n}return null}on(e,t,n=this){this._emitter.on(e,t,n)}once(e,t,n=this){this._emitter.once(e,t,n)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,t,n=this,i){this._emitter.off(e,t,n,i)}listeners(e){return this._emitter.listeners(e)}emit(e,t,n){return this._emitter.emit(e,t,n)}trigger(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(t){Nb.error("An internal error happened while handling event "+e+'. Error message: "'+t.message+'". Here is a stacktrace:',t),this.trigger(Ib.ERROR,{type:Cb.OTHER_ERROR,details:Db.INTERNAL_EXCEPTION,fatal:!1,event:e,error:t})}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){Nb.log("destroy"),this.trigger(Ib.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach((e=>e.destroy())),this.networkControllers.length=0,this.coreComponents.forEach((e=>e.destroy())),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){Nb.log("attachMedia"),this._media=e,this.trigger(Ib.MEDIA_ATTACHING,{media:e})}detachMedia(){Nb.log("detachMedia"),this.trigger(Ib.MEDIA_DETACHING,void 0),this._media=null}loadSource(e){this.stopLoad();const t=this.media,n=this.url,i=this.url=Ab.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});Nb.log(`loadSource:${i}`),t&&n&&(n!==i||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(t)),this.trigger(Ib.MANIFEST_LOADING,{url:e})}startLoad(e=-1){Nb.log(`startLoad(${e})`),this.networkControllers.forEach((t=>{t.startLoad(e)}))}stopLoad(){Nb.log("stopLoad"),this.networkControllers.forEach((e=>{e.stopLoad()}))}swapAudioCodec(){Nb.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){Nb.log("recoverMediaError");const e=this._media;this.detachMedia(),e&&this.attachMedia(e)}removeLevel(e,t=0){this.levelController.removeLevel(e,t)}get levels(){const e=this.levelController.levels;return e||[]}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){Nb.log(`set currentLevel:${e}`),this.loadLevel=e,this.abrController.clearTimer(),this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){Nb.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){Nb.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){Nb.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){return this.levelController.startLevel}set startLevel(e){Nb.log(`set startLevel:${e}`),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(Nb.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e)}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){UT.indexOf(e)>-1&&(this._maxHdcpLevel=e)}get autoLevelEnabled(){return-1===this.levelController.manualLevel}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:t}}=this;if(!e)return 0;const n=e.length;for(let i=0;i<n;i++)if(e[i].maxBitrate>=t)return i;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:t,maxHdcpLevel:n}=this;let i;if(i=-1===t&&e&&e.length?e.length-1:t,n)for(let t=i;t--;){const i=e[t].attrs["HDCP-LEVEL"];if(i&&i<=n)return t}return i}get nextAutoLevel(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)}set nextAutoLevel(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const t=this.audioTrackController;t&&(t.audioTrack=e)}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return!!e&&e.subtitleDisplay}set subtitleDisplay(e){const t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}}Fk.defaultConfig=void 0;var Uk=Fk,Bk=class extends Error{constructor(e,t=Bk.MEDIA_ERR_CUSTOM,n,i){var r;super(e),this.name="MediaError",this.code=t,this.context=i,this.fatal=null!=n?n:t>=Bk.MEDIA_ERR_NETWORK&&t<=Bk.MEDIA_ERR_ENCRYPTED,this.message||(this.message=null!=(r=Bk.defaultMessages[this.code])?r:"")}},$k=Bk;$k.MEDIA_ERR_ABORTED=1,$k.MEDIA_ERR_NETWORK=2,$k.MEDIA_ERR_DECODE=3,$k.MEDIA_ERR_SRC_NOT_SUPPORTED=4,$k.MEDIA_ERR_ENCRYPTED=5,$k.MEDIA_ERR_CUSTOM=100,$k.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail.",3:"A media error caused playback to be aborted. The media could be corrupt or your browser does not support this format.",4:"An unsupported error occurred. The server or network failed, or your browser does not support this format.",5:"The media is encrypted and there are no keys to decrypt it."};var Vk=(e,t)=>!(e=>null==e)(t)&&e in t,Hk={ANY:"any",MUTED:"muted"},Wk={ON_DEMAND:"on-demand",LIVE:"live",UNKNOWN:"unknown"},Gk="mse",Kk="native",jk={HEADER:"header",QUERY:"query",NONE:"none"},qk=Object.values(jk),Yk={M3U8:"application/vnd.apple.mpegurl",MP4:"video/mp4"},zk={HLS:Yk.M3U8},Xk=(Object.keys(zk),Object.values(Yk),(e,t,n,i,r=e)=>{r.addEventListener(t,n,i),e.addEventListener("teardown",(()=>{r.removeEventListener(t,n)}),{once:!0})});var Qk=e=>{let t=e.type;if(t){let e=t.toUpperCase();return Vk(e,zk)?zk[e]:t}let{src:n}=e;return n?ew(n):""},Zk=e=>"VOD"===e?Wk.ON_DEMAND:Wk.LIVE,Jk=e=>"EVENT"===e?Number.POSITIVE_INFINITY:"VOD"===e?Number.NaN:0,ew=e=>{let t="";try{t=new URL(e).pathname}catch{console.error("invalid url")}let n=t.lastIndexOf(".");if(n<0)return"";let i=t.slice(n+1).toUpperCase();return Vk(i,Yk)?Yk[i]:""},tw=Object.values(Hk),nw=e=>"boolean"==typeof e||"string"==typeof e&&tw.includes(e),iw=(e,t)=>{if(!t)return;let n=e.muted,i=()=>e.muted=n;switch(t){case Hk.ANY:e.play().catch((()=>{e.muted=!0,e.play().catch(i)}));break;case Hk.MUTED:e.muted=!0,e.play().catch(i);break;default:e.play().catch((()=>{}))}};function rw(e,t){var n;if(!("videoTracks"in e))return;let i=new WeakMap;t.on(Uk.Events.MANIFEST_PARSED,(function(t,n){a();let r=e.addVideoTrack("main");r.selected=!0;for(let[e,t]of n.levels.entries()){let n=r.addRendition(t.url[0],t.width,t.height,t.videoCodec,t.bitrate);i.set(t,`${e}`),n.id=`${e}`}})),t.on(Uk.Events.AUDIO_TRACKS_UPDATED,(function(t,n){if(s(),!(n.audioTracks.length<=1))for(let t of n.audioTracks){let n=t.default?"main":"alternative",i=e.addAudioTrack(n,t.name,t.lang);i.id=`${t.id}`,t.default&&(i.enabled=!0)}})),e.audioTracks.addEventListener("change",(()=>{t.audioTrack=[...e.audioTracks].find((e=>e.enabled)).id})),t.on(Uk.Events.LEVELS_UPDATED,(function(t,n){var r;let s=e.videoTracks[null!=(r=e.videoTracks.selectedIndex)?r:0];if(!s)return;let a=n.levels.map((e=>i.get(e)));for(let t of e.videoRenditions)t.id&&!a.includes(t.id)&&s.removeRendition(t)}));let r=n=>{let i=e.currentTime,r=!1,s=(e,t)=>{r||(r=!Number.isFinite(t.endOffset))};t.on(Uk.Events.BUFFER_FLUSHING,s),t.nextLevel=n,t.off(Uk.Events.BUFFER_FLUSHING,s),r||t.trigger(Uk.Events.BUFFER_FLUSHING,{startOffset:i+10,endOffset:1/0,type:"video"})};null==(n=e.videoRenditions)||n.addEventListener("change",(e=>{let n=e.target.selectedIndex;n!=t.nextLevel&&r(n)}));let s=()=>{for(let t of e.audioTracks)e.removeAudioTrack(t)},a=()=>{(()=>{for(let t of e.videoTracks)e.removeVideoTrack(t)})(),s()};t.once(Uk.Events.DESTROYING,a)}function sw(e,t,n,i,r){let s=document.createElement("track");return s.kind=t,s.label=n,i&&(s.srclang=i),r&&(s.id=r),s.track.mode=["subtitles","captions"].includes(t)?"disabled":"hidden",s.setAttribute("data-removeondestroy",""),e.append(s),s.track}var aw="cuepoints",ow=Object.freeze({label:aw}),lw=(e,{label:t=aw}=ow)=>{var n;return null==(n=Array.from(e.querySelectorAll("track")).find((e=>e.track.label===t&&"metadata"===e.track.kind)))?void 0:n.track};async function dw(e,t,n=ow){let i=lw(e,n);if(!i){let{label:t=aw}=n;i=sw(e,"metadata",t),i.mode="hidden",await new Promise((e=>setTimeout((()=>e(void 0)),0)))}return"hidden"!==i.mode&&(i.mode="hidden"),[...t].sort((({time:e},{time:t})=>t-e)).forEach((({time:t,value:n})=>{var r,s;let a=Array.prototype.findIndex.call(null==i?void 0:i.cues,(e=>e.startTime>=t)),o=null==(r=null==i?void 0:i.cues)?void 0:r[a],l=o?o.startTime:Number.isFinite(e.duration)?e.duration:Number.MAX_SAFE_INTEGER,d=null==(s=null==i?void 0:i.cues)?void 0:s[a-1];d&&(d.endTime=t);let c=new VTTCue(t,l,JSON.stringify(null!=n?n:null));i.addCue(c)})),i}var cw=e=>({time:e.startTime,value:JSON.parse(e.text)});function uw(e,t={label:aw}){var n,i;let r=lw(e,t);if(null==(n=null==r?void 0:r.activeCues)||!n.length)return;let{currentTime:s}=e,a=Array.prototype.find.call(null!=(i=r.activeCues)?i:[],(({startTime:e,endTime:t})=>e<=s&&t>s));return cw(a)}var hw,fw,pw,mw,gw=async(e,t)=>{if(t===Yk.MP4)return{streamType:Wk.ON_DEMAND,targetLiveWindow:Number.NaN,liveEdgeStartOffset:void 0};if(t===Yk.M3U8){let t=await(async e=>fetch(e).then((e=>e.text())).then((e=>{let t=e.split("\n").find(((e,t,n)=>t&&n[t-1].startsWith("#EXT-X-STREAM-INF")));return fetch(t).then((e=>e.text())).then((e=>e.split("\n")))})))(e);return(e=>{var t,n;let i,r=null==(n=(null!=(t=e.find((e=>e.startsWith("#EXT-X-PLAYLIST-TYPE"))))?t:"").split(":")[1])?void 0:n.trim(),s=Zk(r),a=Jk(r);if(s===Wk.LIVE){let t=e.find((e=>e.startsWith("#EXT-X-PART-INF")));i=t?2*+t.split(":")[1].split("=")[1]:3*+e.find((e=>e.startsWith("#EXT-X-TARGETDURATION"))).split(":")[1]}return{streamType:s,targetLiveWindow:a,liveEdgeStartOffset:i}})(t)}return console.error(`Media type ${t} is an unrecognized or unsupported type for src ${e}.`),{streamType:void 0,targetLiveWindow:void 0,liveEdgeStartOffset:void 0}},vw=async(e,t,n=Qk({src:e}))=>{var i,r,s;let{streamType:a,targetLiveWindow:o,liveEdgeStartOffset:l}=await gw(e,n);(null!=(i=Ew.get(t))?i:{}).liveEdgeStartOffset=l,(null!=(r=Ew.get(t))?r:{}).targetLiveWindow=o,t.dispatchEvent(new CustomEvent("targetlivewindowchange",{composed:!0,bubbles:!0})),(null!=(s=Ew.get(t))?s:{}).streamType=a,t.dispatchEvent(new CustomEvent("streamtypechange",{composed:!0,bubbles:!0}))},yw=(e,t,n)=>{var i,r,s,a,o,l,d,c;let{streamType:u,targetLiveWindow:h,liveEdgeStartOffset:f,lowLatency:p}=(e=>{var t;let n,i=e.type,r=Zk(i),s=Jk(i),a=!(null==(t=e.partList)||!t.length);return r===Wk.LIVE&&(n=a?2*e.partTarget:3*e.targetduration),{streamType:r,targetLiveWindow:s,liveEdgeStartOffset:n,lowLatency:a}})(e);if(u===Wk.LIVE){p?(n.config.backBufferLength=null!=(i=n.userConfig.backBufferLength)?i:4,n.config.maxFragLookUpTolerance=null!=(r=n.userConfig.maxFragLookUpTolerance)?r:.001,n.config.abrBandWidthUpFactor=null!=(s=n.userConfig.abrBandWidthUpFactor)?s:n.config.abrBandWidthFactor):n.config.backBufferLength=null!=(a=n.userConfig.backBufferLength)?a:8;let e=Object.freeze({get length(){return t.seekable.length},start:e=>t.seekable.start(e),end(e){var i;return e>this.length?t.seekable.end(e):null!=(i=n.liveSyncPosition)?i:t.seekable.end(e)}});(null!=(o=Ew.get(t))?o:{}).seekable=e}(null!=(l=Ew.get(t))?l:{}).liveEdgeStartOffset=f,(null!=(d=Ew.get(t))?d:{}).targetLiveWindow=h,t.dispatchEvent(new CustomEvent("targetlivewindowchange",{composed:!0,bubbles:!0})),(null!=(c=Ew.get(t))?c:{}).streamType=u,t.dispatchEvent(new CustomEvent("streamtypechange",{composed:!0,bubbles:!0}))},bw=-1!==(null!=(fw=null==(hw=null==globalThis?void 0:globalThis.navigator)?void 0:hw.userAgent)?fw:"").toLowerCase().indexOf("android"),Ew=new WeakMap,Tw="mux.com",_w=null==(mw=(pw=Uk).isSupported)?void 0:mw.call(pw),Aw=bw,Sw=mb.utils.generateUUID,kw=e=>{var t,n,i;return null!=(t=null==e?void 0:e.metadata)&&t.video_id?e.metadata.video_id:Pw(e)&&null!=(i=null!=(n=(e=>{if(!e)return;let[t]=e.split("?");return t||void 0})(e.playbackId))?n:(e=>{if(!e||!e.startsWith("https://stream."))return;let[t]=new URL(e).pathname.slice(1).split(".m3u8");return t||void 0})(e.src))?i:e.src},ww=e=>{var t,n;return null!=(n=null==(t=Ew.get(e))?void 0:t.seekable)?n:e.seekable},Lw=(e,t,n=.001)=>e>t||((e,t,n=.001)=>Math.abs(e-t)<=n)(e,t,n),Rw=(e,t)=>e.loop||t?e.ended:e.ended||(e=>e.paused&&Lw(e.currentTime,e.duration))(e),Iw=(e,t,n)=>{Cw(t,n);let{metadata:i={}}=e,{view_session_id:r=Sw()}=i,s=kw(e);i.view_session_id=r,i.video_id=s,e.metadata=i,Ew.set(t,{});let a=xw(e,t);Ow(e,t,a),Nw(e,t,a),async function(e,t=ow){new Promise((n=>{Xk(e,"loadstart",(async()=>{let i=await dw(e,[],t);Xk(e,"cuechange",(()=>{let t=uw(e);if(t){let n=new CustomEvent("cuepointchange",{composed:!0,bubbles:!0,detail:t});e.dispatchEvent(n)}}),{},i),n(i)}))}))}(t);let o=(({autoplay:e},t,n)=>{let i=!1,r=!1,s=nw(e)?e:!!e,a=()=>{i||Xk(t,"playing",(()=>{i=!0}),{once:!0})};if(a(),Xk(t,"loadstart",(()=>{i=!1,a(),iw(t,s)}),{once:!0}),Xk(t,"loadstart",(()=>{n||(r=!Number.isFinite(t.duration)),iw(t,s)}),{once:!0}),n&&n.once(Uk.Events.LEVEL_LOADED,((e,t)=>{var n;r=null!=(n=t.details.live)&&n})),!s){let e=()=>{!r||(null!=n&&n.liveSyncPosition?t.currentTime=n.liveSyncPosition:Number.isFinite(t.seekable.end(0))&&(t.currentTime=t.seekable.end(0)))};n&&Xk(t,"play",(()=>{"metadata"===t.preload?n.once(Uk.Events.LEVEL_UPDATED,e):e()}),{once:!0})}return e=>{i||(s=nw(e)?e:!!e,iw(t,s))}})(e,t,a),l=(({preload:e,src:t},n,i)=>{let r=e=>{null!=e&&["","none","metadata","auto"].includes(e)?n.setAttribute("preload",e):n.removeAttribute("preload")};if(!i)return r(e),r;let s=!1,a=!1,o=i.config.maxBufferLength,l=i.config.maxBufferSize,d=e=>{r(e);let t=null!=e?e:n.preload;a||"none"===t||("metadata"===t?(i.config.maxBufferLength=1,i.config.maxBufferSize=1):(i.config.maxBufferLength=o,i.config.maxBufferSize=l),c())},c=()=>{!s&&t&&(s=!0,i.loadSource(t))};return Xk(n,"play",(()=>{a=!0,i.config.maxBufferLength=o,i.config.maxBufferSize=l,c()}),{once:!0}),d(e),d})(e,t,a);return{engine:a,setAutoplay:o,setPreload:l}},Cw=(e,t)=>{let n=null==t?void 0:t.engine;n&&(n.detachMedia(),n.destroy()),(null==e?void 0:e.mux)&&!e.mux.deleted&&(e.mux.destroy(),delete e.mux),e&&(e.removeAttribute("src"),e.load(),e.removeEventListener("error",Uw),e.removeEventListener("error",Bw),e.removeEventListener("durationchange",Fw),Ew.delete(e),e.dispatchEvent(new Event("teardown")))};function Dw(e,t){var n;let i=Qk(e);if(i!==Yk.M3U8)return!0;let r=!i||null==(n=t.canPlayType(i))||n,{preferPlayback:s}=e;return r&&(s===Kk||!(_w&&(s===Gk||Aw)))}var xw=(e,t)=>{let{debug:n,streamType:i,startTime:r=-1,metadata:s,preferCmcd:a}=e,o=Qk(e)===Yk.M3U8,l=Dw(e,t);if(o&&!l&&_w){let e={backBufferLength:30,renderTextTracksNatively:!1,liveDurationInfinity:!0,capLevelToPlayerSize:!0,capLevelOnFPSDrop:!0},t=Mw(i),o=a!==jk.NONE?{useHeaders:a===jk.HEADER,sessionId:null==s?void 0:s.view_session_id,contentId:null==s?void 0:s.video_id}:void 0;return new Uk({debug:n,startPosition:r,cmcd:o,...e,...t})}},Mw=e=>e===Wk.LIVE?{backBufferLength:8}:{},Pw=({playbackId:e,src:t,customDomain:n})=>{if(e)return!0;if("string"!=typeof t)return!1;let i=null==window?void 0:window.location.href,r=new URL(t,i).hostname.toLocaleLowerCase();return r.includes(Tw)||!!n&&r.includes(n.toLocaleLowerCase())},Ow=(e,t,n)=>{var i;let{envKey:r}=e,s=Pw(e);if(r||s){let{playerInitTime:s,playerSoftwareName:a,playerSoftwareVersion:o,beaconCollectionDomain:l,debug:d,disableCookies:c}=e,u={...e.metadata,video_title:(null==(i=null==e?void 0:e.metadata)?void 0:i.video_title)||void 0},h=t=>"string"!=typeof t.player_error_code&&("function"==typeof e.errorTranslator?e.errorTranslator(t):t);mb.monitor(t,{debug:d,beaconCollectionDomain:l,hlsjs:n,Hls:n?Uk:void 0,automaticErrorTracking:!1,errorTranslator:h,disableCookies:c,data:{...r?{env_key:r}:{},player_software_name:a,player_software:a,player_software_version:o,player_init_time:s,...u}})}},Nw=(e,t,n)=>{var i;let r=Dw(e,t),{src:s}=e;if(t&&r){let n=Qk(e);"string"==typeof s?("none"===t.preload?Xk(t,"loadstart",(()=>vw(s,t,n))):vw(s,t,n),t.setAttribute("src",s),e.startTime&&((null!=(i=Ew.get(t))?i:{}).startTime=e.startTime,t.addEventListener("durationchange",Fw,{once:!0}))):t.removeAttribute("src"),t.addEventListener("error",Uw),t.addEventListener("error",Bw),t.addEventListener("emptied",(()=>{t.querySelectorAll("track[data-removeondestroy]").forEach((e=>{e.remove()}))}),{once:!0});let r=()=>{t.ended||!Rw(t)||t.dispatchEvent(new Event("ended"))};Xk(t,"pause",r),Xk(t,"seeked",r),Xk(t,"play",(()=>{t.ended||!Lw(t.currentTime,t.duration)||(t.currentTime=t.seekable.start(0))}))}else n&&s?(n.once(Uk.Events.LEVEL_LOADED,((e,i)=>{yw(i.details,t,n)})),n.on(Uk.Events.ERROR,((e,n)=>{let i={[Uk.ErrorTypes.NETWORK_ERROR]:$k.MEDIA_ERR_NETWORK,[Uk.ErrorTypes.MEDIA_ERROR]:$k.MEDIA_ERR_DECODE},r=new $k("",i[n.type]);r.fatal=n.fatal,r.data=n,t.dispatchEvent(new CustomEvent("error",{detail:r}))})),t.addEventListener("error",Bw),rw(e,n),function(e,t){t.on(Uk.Events.NON_NATIVE_TEXT_TRACKS_FOUND,((n,{tracks:i})=>{i.forEach((n=>{var i;let r=null!=(i=n.subtitleTrack)?i:n.closedCaptions,s=t.subtitleTracks.findIndex((({lang:e,name:t,type:i})=>e==(null==r?void 0:r.lang)&&t===n.label&&i.toLowerCase()===n.kind));sw(e,n.kind,n.label,null==r?void 0:r.lang,`${n.kind}${s}`)}))}));let n=()=>{var n;if(!t.subtitleTracks.length)return;let i=Array.from(e.textTracks).find((e=>e.id&&"showing"===e.mode&&["subtitles","captions"].includes(e.kind))),r=`${null==(n=t.subtitleTracks[t.subtitleTrack])?void 0:n.type.toLowerCase()}${t.subtitleTrack}`;if(i&&(t.subtitleTrack<0||(null==i?void 0:i.id)!==r)){let e=t.subtitleTracks.findIndex((({lang:e,name:t,type:n})=>e==i.language&&t===i.label&&n.toLowerCase()===i.kind));t.subtitleTrack=e}i&&(null==i?void 0:i.id)===r&&i.cues&&Array.from(i.cues).forEach((e=>{i.addCue(e)}))};e.textTracks.addEventListener("change",n),t.on(Uk.Events.CUES_PARSED,((t,{track:n,cues:i})=>{let r=e.textTracks.getTrackById(n);if(!r)return;let s="disabled"===r.mode;s&&(r.mode="hidden"),i.forEach((e=>{var t;null!=(t=r.cues)&&t.getCueById(e.id)||r.addCue(e)})),s&&(r.mode="disabled")})),t.once(Uk.Events.DESTROYING,(()=>{e.textTracks.removeEventListener("change",n),e.querySelectorAll("track[data-removeondestroy]").forEach((e=>{e.remove()}))}));let i=()=>{Array.from(e.textTracks).forEach((t=>{var n,i;if(!["subtitles","caption"].includes(t.kind)&&"thumbnails"===t.label){if(null==(n=t.cues)||!n.length){let t=e.querySelector('track[label="thumbnails"]'),n=null!=(i=null==t?void 0:t.getAttribute("src"))?i:"";null==t||t.removeAttribute("src"),setTimeout((()=>{null==t||t.setAttribute("src",n)}),0)}"hidden"!==t.mode&&(t.mode="hidden")}}))};t.once(Uk.Events.MANIFEST_LOADED,i),t.once(Uk.Events.MEDIA_ATTACHED,i)}(t,n),n.attachMedia(t)):console.error("It looks like the video you're trying to play will not work on this system! If possible, try upgrading to the newest versions of your browser or software.")};function Fw(e){var t;let n=e.target,i=null==(t=Ew.get(n))?void 0:t.startTime;if(i&&function(e,t,n){t&&n>t&&(n=t);for(let t=0;t<e.length;t++)if(e.start(t)<=n&&e.end(t)>=n)return!0;return!1}(n.seekable,n.duration,i)){let e="auto"===n.preload;e&&(n.preload="none"),n.currentTime=i,e&&(n.preload="auto")}}async function Uw(e){if(!e.isTrusted)return;e.stopImmediatePropagation();let t=e.target;if(null==t||!t.error)return;let{message:n,code:i}=t.error,r=new $k(n,i);if(t.src&&(i!==$k.MEDIA_ERR_DECODE||void 0!==i))try{let{status:e}=await fetch(t.src);r.data={response:{code:e}}}catch{}t.dispatchEvent(new CustomEvent("error",{detail:r}))}function Bw(e){var t,n;if(!(e instanceof CustomEvent&&e.detail instanceof $k))return;let i=e.target,r=e.detail;!r||!r.fatal||((null!=(t=Ew.get(i))?t:{}).error=r,null==(n=i.mux)||n.emit("error",{player_error_code:r.code,player_error_message:r.message,player_error_context:r.context}))}var $w=Object.defineProperty,Vw=(e,t,n)=>(((e,t,n)=>{t in e?$w(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n),Hw=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Ww=(e,t,n)=>(Hw(e,t,"read from private field"),n?n.call(e):t.get(e)),Gw=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Kw=(e,t,n,i)=>(Hw(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),jw=(e,t,n)=>(Hw(e,t,"access private method"),n),qw=class{addEventListener(){}removeEventListener(){}dispatchEvent(e){return!0}};if("undefined"==typeof DocumentFragment){class e extends qw{}globalThis.DocumentFragment=e}var Yw,zw=class extends qw{},Xw={get(e){},define(e,t,n){},upgrade(e){},whenDefined:e=>Promise.resolve(zw)};Yw=new WeakMap;var Qw={document:{createElement:function(e,t){return new zw}},DocumentFragment,customElements:Xw,CustomEvent:class{constructor(e,t={}){Gw(this,Yw,void 0),Kw(this,Yw,null==t?void 0:t.detail)}get detail(){return Ww(this,Yw)}initCustomEvent(){}},EventTarget:qw,HTMLElement:zw,HTMLVideoElement:class extends qw{}},Zw="undefined"==typeof window||void 0===globalThis.customElements,Jw=Zw?Qw:globalThis,eL=(Zw||globalThis.document,(()=>{try{return"0.16.4"}catch{}return"UNKNOWN"})()),tL=e=>{var t,n,i,r,s,a,o,l,d,c,u,h,f,p,m,g,v,y,b,E,T,_,A,S,k,w,L,R,I,C,D,x,M,P,O,N,F,U,B,$;return t=class extends e{constructor(){super(),Gw(this,L),Gw(this,I),Gw(this,D),Gw(this,M),Gw(this,O),Gw(this,F),Gw(this,B),Vw(this,"castEnabled",!1),Gw(this,T,{paused:!1}),Gw(this,_,void 0),Gw(this,A,{}),Gw(this,S,void 0),Gw(this,k,void 0),Gw(this,w,void 0),t.instances.add(this),jw(this,O,N).call(this)}static get castElement(){return Ww(t,n)}static get castEnabled(){return Ww(t,i)}static get castState(){var e;return null==(e=Ww(t,d,c))?void 0:e.getCastState()}static async exitCast(){try{await Ww(t,d,c).endCurrentSession(!0)}catch(e){return void console.error(e)}}get castPlayer(){if(t.castElement===this)return Ww(this,_)}attributeChangedCallback(e){if(this.castPlayer)switch(e){case"cast-stream-type":case"cast-src":this.load()}}async requestCast(e={}){var i;jw(i=t,b,E).call(i,e),Kw(t,n,this),Object.entries(Ww(this,A)).forEach((([e,t])=>{Ww(this,_).controller.addEventListener(e,t)}));try{await Ww(t,d,c).requestSession()}catch{return void Kw(t,n,void 0)}Ww(this,T).paused=super.paused,super.pause(),this.muted=super.muted;try{await this.load()}catch(e){console.error(e)}}async load(){var e,n;if(!this.castPlayer)return super.load();let i=new chrome.cast.media.MediaInfo(this.castSrc,this.castContentType),r=[...this.querySelectorAll("track")].filter((({kind:e,src:t})=>t&&("subtitles"===e||"captions"===e))),s=[],a=0;r.length&&(i.tracks=r.map((e=>{let t=++a;0===s.length&&"showing"===e.track.mode&&s.push(t);let n=new chrome.cast.media.Track(t,chrome.cast.media.TrackType.TEXT);return n.trackContentId=e.src,n.trackContentType="text/vtt",n.subtype="captions"===e.kind?chrome.cast.media.TextTrackType.CAPTIONS:chrome.cast.media.TextTrackType.SUBTITLES,n.name=e.label,n.language=e.srclang,n}))),"live"===this.castStreamType?i.streamType=chrome.cast.media.StreamType.LIVE:i.streamType=chrome.cast.media.StreamType.BUFFERED,i.metadata=new chrome.cast.media.GenericMediaMetadata,i.metadata.title=this.title,i.metadata.images=[{url:this.poster}];let o=new chrome.cast.media.LoadRequest(i);o.currentTime=null!=(e=super.currentTime)?e:0,o.autoplay=!Ww(this,T).paused,o.activeTrackIds=s,await(null==(n=Ww(t,u,h))?void 0:n.loadMedia(o)),this.dispatchEvent(new Event("volumechange"))}play(){var e;if(!this.castPlayer)return super.play();this.castPlayer.isPaused&&(null==(e=this.castPlayer.controller)||e.playOrPause())}pause(){var e;this.castPlayer?this.castPlayer.isPaused||null==(e=this.castPlayer.controller)||e.playOrPause():super.pause()}get castSrc(){var e,t,n;return null!=(n=null!=(t=this.getAttribute("cast-src"))?t:null==(e=this.querySelector("source"))?void 0:e.src)?n:this.currentSrc}set castSrc(e){this.castSrc!=e&&this.setAttribute("cast-src",`${e}`)}get castContentType(){var e;return null!=(e=this.getAttribute("cast-content-type"))?e:void 0}set castContentType(e){this.setAttribute("cast-content-type",`${e}`)}get castStreamType(){var e,t;return null!=(t=null!=(e=this.getAttribute("cast-stream-type"))?e:this.streamType)?t:void 0}set castStreamType(e){this.setAttribute("cast-stream-type",`${e}`)}get readyState(){if(this.castPlayer)switch(this.castPlayer.playerState){case chrome.cast.media.PlayerState.IDLE:return 0;case chrome.cast.media.PlayerState.BUFFERING:return 2;default:return 3}return super.readyState}get paused(){return this.castPlayer?this.castPlayer.isPaused:super.paused}get muted(){var e;return this.castPlayer?null==(e=this.castPlayer)?void 0:e.isMuted:super.muted}set muted(e){var t;this.castPlayer?(e&&!this.castPlayer.isMuted||!e&&this.castPlayer.isMuted)&&(null==(t=this.castPlayer.controller)||t.muteOrUnmute()):super.muted=e}get volume(){var e,t;return this.castPlayer?null!=(t=null==(e=this.castPlayer)?void 0:e.volumeLevel)?t:1:super.volume}set volume(e){var t;if(this.castPlayer)return this.castPlayer.volumeLevel=e,void(null==(t=this.castPlayer.controller)||t.setVolumeLevel());super.volume=e}get duration(){var e,t;return this.castPlayer&&Ww(this,L,R)?null!=(t=null==(e=this.castPlayer)?void 0:e.duration)?t:NaN:super.duration}get currentTime(){var e,t;return this.castPlayer&&Ww(this,L,R)?null!=(t=null==(e=this.castPlayer)?void 0:e.currentTime)?t:0:super.currentTime}set currentTime(e){var t;if(this.castPlayer)return this.castPlayer.currentTime=e,void(null==(t=this.castPlayer.controller)||t.seek());super.currentTime=e}get onentercast(){return Ww(this,S)}set onentercast(e){Ww(this,S)&&(this.removeEventListener("entercast",Ww(this,S)),Kw(this,S,null)),"function"==typeof e&&(Kw(this,S,e),this.addEventListener("entercast",e))}get onleavecast(){return Ww(this,k)}set onleavecast(e){Ww(this,k)&&(this.removeEventListener("leavecast",Ww(this,k)),Kw(this,k,null)),"function"==typeof e&&(Kw(this,k,e),this.addEventListener("leavecast",e))}get oncastchange(){return Ww(this,w)}set oncastchange(e){Ww(this,w)&&(this.removeEventListener("castchange",Ww(this,w)),Kw(this,w,null)),"function"==typeof e&&(Kw(this,w,e),this.addEventListener("castchange",e))}},n=new WeakMap,i=new WeakMap,r=new WeakMap,s=new WeakSet,a=function(){return"undefined"!=typeof chrome&&chrome.cast&&chrome.cast.isAvailable},o=new WeakSet,l=function(){return"undefined"!=typeof cast&&cast.framework},d=new WeakSet,c=function(){if(Ww(t,o,l))return cast.framework.CastContext.getInstance()},u=new WeakSet,h=function(){var e;return null==(e=Ww(t,d,c))?void 0:e.getCurrentSession()},f=new WeakSet,p=function(){var e;return null==(e=Ww(t,u,h))?void 0:e.getSessionObj().media[0]},m=new WeakSet,g=function(e){return new Promise(((n,i)=>{Ww(t,f,p).editTracksInfo(e,n,i)}))},v=new WeakSet,y=function(e){return new Promise(((n,i)=>{Ww(t,f,p).getStatus(e,n,i)}))},b=new WeakSet,E=function(e){return Ww(t,d,c).setOptions({receiverApplicationId:chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,autoJoinPolicy:chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED,androidReceiverCompatible:!1,language:"en-US",resumeSavedSession:!0,...e})},T=new WeakMap,_=new WeakMap,A=new WeakMap,S=new WeakMap,k=new WeakMap,w=new WeakMap,L=new WeakSet,R=function(){var e;return null==(e=this.castPlayer)?void 0:e.isMediaLoaded},I=new WeakSet,C=function(){Ww(t,n)===this&&(Object.entries(Ww(this,A)).forEach((([e,t])=>{Ww(this,_).controller.removeEventListener(e,t)})),Kw(t,n,void 0),this.muted=Ww(this,_).isMuted,this.currentTime=Ww(this,_).savedPlayerState.currentTime,!1===Ww(this,_).savedPlayerState.isPaused&&this.play())},D=new WeakSet,x=function(){this.dispatchEvent(new CustomEvent("castchange",{detail:Ww(t,d,c).getCastState()}))},M=new WeakSet,P=async function(){var e,i;let{SESSION_RESUMED:r}=cast.framework.SessionState;if(Ww(t,d,c).getSessionState()===r&&this.castSrc===(null==(e=Ww(t,f,p))?void 0:e.media.contentId)){Kw(t,n,this),Object.entries(Ww(this,A)).forEach((([e,t])=>{Ww(this,_).controller.addEventListener(e,t)}));try{await jw(i=t,v,y).call(i,new chrome.cast.media.GetStatusRequest)}catch(e){console.error(e)}Ww(this,A)[cast.framework.RemotePlayerEventType.IS_PAUSED_CHANGED](),Ww(this,A)[cast.framework.RemotePlayerEventType.PLAYER_STATE_CHANGED]()}},O=new WeakSet,N=function(){var e;!Ww(t,o,l)||this.castEnabled||(this.castEnabled=!0,jw(e=t,b,E).call(e),this.textTracks.addEventListener("change",jw(this,B,$).bind(this)),jw(this,D,x).call(this),Kw(this,_,new cast.framework.RemotePlayer),new cast.framework.RemotePlayerController(Ww(this,_)),Kw(this,A,{[cast.framework.RemotePlayerEventType.IS_CONNECTED_CHANGED]:({value:e})=>{!1===e&&jw(this,I,C).call(this),this.dispatchEvent(new Event(e?"entercast":"leavecast"))},[cast.framework.RemotePlayerEventType.DURATION_CHANGED]:()=>{this.dispatchEvent(new Event("durationchange"))},[cast.framework.RemotePlayerEventType.VOLUME_LEVEL_CHANGED]:()=>{this.dispatchEvent(new Event("volumechange"))},[cast.framework.RemotePlayerEventType.IS_MUTED_CHANGED]:()=>{this.dispatchEvent(new Event("volumechange"))},[cast.framework.RemotePlayerEventType.CURRENT_TIME_CHANGED]:()=>{!Ww(this,L,R)||this.dispatchEvent(new Event("timeupdate"))},[cast.framework.RemotePlayerEventType.VIDEO_INFO_CHANGED]:()=>{this.dispatchEvent(new Event("resize"))},[cast.framework.RemotePlayerEventType.IS_PAUSED_CHANGED]:()=>{this.dispatchEvent(new Event(this.paused?"pause":"play"))},[cast.framework.RemotePlayerEventType.PLAYER_STATE_CHANGED]:()=>{var e,t;(null==(e=this.castPlayer)?void 0:e.playerState)!==chrome.cast.media.PlayerState.PAUSED&&this.dispatchEvent(new Event({[chrome.cast.media.PlayerState.PLAYING]:"playing",[chrome.cast.media.PlayerState.BUFFERING]:"waiting",[chrome.cast.media.PlayerState.IDLE]:"emptied"}[null==(t=this.castPlayer)?void 0:t.playerState]))},[cast.framework.RemotePlayerEventType.IS_MEDIA_LOADED_CHANGED]:async()=>{!Ww(this,L,R)||(await Promise.resolve(),jw(this,F,U).call(this))}}))},F=new WeakSet,U=function(){jw(this,B,$).call(this)},B=new WeakSet,$=async function(){var e,n,i,r,s,a;if(!this.castPlayer)return;let o=(null!=(n=null==(e=Ww(this,_).mediaInfo)?void 0:e.tracks)?n:[]).filter((({type:e})=>e===chrome.cast.media.TrackType.TEXT)),l=[...this.textTracks].filter((({kind:e})=>"subtitles"===e||"captions"===e)),d=o.map((({language:e,name:t,trackId:n})=>{var i;let{mode:r}=null!=(i=l.find((n=>n.language===e&&n.label===t)))?i:{};return!!r&&{mode:r,trackId:n}})).filter(Boolean),c=d.filter((({mode:e})=>"showing"!==e)).map((({trackId:e})=>e)),f=d.find((({mode:e})=>"showing"===e)),p=null!=(s=null==(r=null==(i=Ww(t,u,h))?void 0:i.getSessionObj().media[0])?void 0:r.activeTrackIds)?s:[],v=p;if(p.length&&(v=v.filter((e=>!c.includes(e)))),null!=f&&f.trackId&&(v=[...v,f.trackId]),v=[...new Set(v)],!((e,t)=>e.length===t.length&&e.every((e=>t.includes(e))))(p,v))try{let e=new chrome.cast.media.EditTracksInfoRequest(v);await jw(a=t,m,g).call(a,e)}catch(e){console.error(e)}},Gw(t,s),Gw(t,o),Gw(t,d),Gw(t,u),Gw(t,f),Gw(t,m),Gw(t,v),Gw(t,b),Vw(t,"observedAttributes",["cast-src","cast-content-type","cast-stream-type"]),Vw(t,"instances",new Set),Gw(t,n,void 0),Gw(t,i,!1),Vw(t,"initCast",(()=>{var e;Ww(t,s,a)?Ww(t,o,l)?Ww(e=t,r).call(e,chrome.cast.isAvailable):customElements.whenDefined("google-cast-button").then((()=>{var e;return Ww(e=t,r).call(e,chrome.cast.isAvailable)})):globalThis.__onGCastApiAvailable=()=>{customElements.whenDefined("google-cast-button").then((()=>{var e;return Ww(e=t,r).call(e,chrome.cast.isAvailable)}))}})),Gw(t,r,(e=>{if(e){Kw(t,i,!0);let{CAST_STATE_CHANGED:e}=cast.framework.CastContextEventType;Ww(t,d,c).addEventListener(e,(e=>{t.instances.forEach((t=>{var n;return jw(n=t,D,x).call(n,e)}))}));let{SESSION_STATE_CHANGED:n}=cast.framework.CastContextEventType;Ww(t,d,c).addEventListener(n,(e=>{t.instances.forEach((t=>{var n;return jw(n=t,M,P).call(n,e)}))})),t.instances.forEach((e=>{var t;return jw(t=e,O,N).call(t)}))}})),t},nL=globalThis.HTMLVideoElement?tL(HTMLVideoElement):tL(Object);globalThis.customElements&&!globalThis.customElements.get("castable-video")&&(customElements.define("castable-video",nL,{extends:"video"}),globalThis.CastableVideoElement=nL),nL.initCast();var iL,rL=["abort","canplay","canplaythrough","durationchange","emptied","encrypted","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting","waitingforkey","resize","enterpictureinpicture","leavepictureinpicture","webkitbeginfullscreen","webkitendfullscreen","webkitpresentationmodechanged"],sL=null==(iL=globalThis.document)?void 0:iL.createElement("template");sL&&(sL.innerHTML="\n    <style>\n      :host {\n        display: inline-block;\n        line-height: 0;\n      }\n\n      audio {\n        max-width: 100%;\n        max-height: 100%;\n        min-width: 100%;\n        min-height: 100%;\n      }\n    </style>\n    <slot></slot>\n  ");var aL,oL=null==(aL=globalThis.document)?void 0:aL.createElement("template");oL&&(oL.innerHTML="\n    <style>\n      :host {\n        display: inline-block;\n        line-height: 0;\n      }\n\n      video {\n        max-width: 100%;\n        max-height: 100%;\n        min-width: 100%;\n        min-height: 100%;\n        object-fit: var(--media-object-fit, contain);\n        object-position: var(--media-object-position, 50% 50%);\n      }\n\n      video::-webkit-media-text-track-container {\n        transform: var(--media-webkit-text-track-transform);\n        transition: var(--media-webkit-text-track-transition);\n      }\n    </style>\n    <slot></slot>\n  ");var lL=(e,{tag:t,is:n})=>{var i,r,s,a,o,l,d,c,u,h,f,p,m;let g=null==(i=globalThis.document)?void 0:i.createElement(t,{is:n}),v=g?function(e){let t=[];for(let n=Object.getPrototypeOf(e);n&&n!==HTMLElement.prototype;n=Object.getPrototypeOf(n))t.push(...Object.getOwnPropertyNames(n));return t}(g):[];return r=class extends e{constructor(){super(),Gw(this,c),Gw(this,h),Gw(this,p),Gw(this,l,void 0),Gw(this,d,void 0),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.append(this.constructor.template.content.cloneNode(!0)))}static get observedAttributes(){var e,t,n;return jw(e=r,a,o).call(e),[...null!=(n=null==(t=null==g?void 0:g.constructor)?void 0:t.observedAttributes)?n:[],"autopictureinpicture","disablepictureinpicture","disableremoteplayback","autoplay","controls","controlslist","crossorigin","loop","muted","playsinline","poster","preload","src"]}get nativeEl(){var e,n;return null!=(n=null!=(e=Ww(this,d))?e:this.shadowRoot.querySelector(t))?n:this.querySelector(t)}set nativeEl(e){Kw(this,d,e)}get defaultMuted(){return this.hasAttribute("muted")}set defaultMuted(e){this.toggleAttribute("muted",Boolean(e))}get src(){return this.getAttribute("src")}set src(e){this.setAttribute("src",`${e}`)}get preload(){var e,t;return null!=(t=this.getAttribute("preload"))?t:null==(e=this.nativeEl)?void 0:e.preload}set preload(e){this.setAttribute("preload",`${e}`)}attributeChangedCallback(e,t,n){jw(this,c,u).call(this),jw(this,p,m).call(this,e,t,n)}connectedCallback(){jw(this,c,u).call(this)}},s=new WeakMap,a=new WeakSet,o=function(){if(Ww(this,s))return;Kw(this,s,!0);let e=new Set(this.observedAttributes);e.delete("muted");for(let t of v)if(!(t in this.prototype))if("function"==typeof g[t])this.prototype[t]=function(...e){return jw(this,c,u).call(this),(()=>this.call?this.call(t,...e):this.nativeEl[t].apply(this.nativeEl,e))()};else{let n={get(){var n,i,r;jw(this,c,u).call(this);let s=t.toLowerCase();if(e.has(s)){let e=this.getAttribute(s);return null!==e&&(""===e||e)}return null!=(r=null==(n=this.get)?void 0:n.call(this,t))?r:null==(i=this.nativeEl)?void 0:i[t]}};t!==t.toUpperCase()&&(n.set=function(n){jw(this,c,u).call(this);let i=t.toLowerCase();e.has(i)?!0===n||!1===n||null==n?this.toggleAttribute(i,Boolean(n)):this.setAttribute(i,n):this.set?this.set(t,n):this.nativeEl[t]=n}),Object.defineProperty(this.prototype,t,n)}},l=new WeakMap,d=new WeakMap,c=new WeakSet,u=function(){var e,i;if(Ww(this,l))return;if(Kw(this,l,!0),!this.nativeEl){let e=document.createElement(t,{is:n});e.part=t,this.shadowRoot.append(e)}this.nativeEl.muted=this.hasAttribute("muted");for(let e of v)jw(this,h,f).call(this,e);let r=new Map,s=this.shadowRoot.querySelector("slot:not([name])");null==s||s.addEventListener("slotchange",(()=>{let e=new Map(r);s.assignedElements().filter((e=>["track","source"].includes(e.localName))).forEach((t=>{var n,i;e.delete(t);let s=r.get(t);s||(s=t.cloneNode(),r.set(t,s)),null==(i=(n=this.nativeEl).append)||i.call(n,s)})),e.forEach((e=>e.remove()))}));for(let t of this.constructor.Events)null==(i=(e=this.shadowRoot).addEventListener)||i.call(e,t,(e=>{e.target===this.nativeEl&&this.dispatchEvent(new CustomEvent(e.type,{detail:e.detail}))}),!0)},h=new WeakSet,f=function(e){if(Object.prototype.hasOwnProperty.call(this,e)){let t=this[e];delete this[e],this[e]=t}},p=new WeakSet,m=function(e,t,n){var i,r,s,a;["id","class"].includes(e)||(null===n?null==(r=(i=this.nativeEl).removeAttribute)||r.call(i,e):null==(a=(s=this.nativeEl).setAttribute)||a.call(s,e,n))},Gw(r,a),Vw(r,"Events",rL),Vw(r,"template",t.endsWith("audio")?sL:oL),Gw(r,s,void 0),r};globalThis.document&&lL(HTMLElement,{tag:"video"}),globalThis.document&&lL(HTMLElement,{tag:"audio"});var dL=class extends Event{constructor(e,t){super(e),Vw(this,"track"),this.track=t.track}},cL=new WeakMap;function uL(e){var t;return null!=(t=cL.get(e))?t:function(e,t){let n=cL.get(e);return n||cL.set(e,n={}),Object.assign(n,t)}(e,{})}function hL(e,t){let n=e.videoTracks;uL(t).media=e,uL(t).renditionSet||(uL(t).renditionSet=new Set);let i=uL(n).trackSet;i.add(t);let r=i.size-1;r in bL.prototype||Object.defineProperty(bL.prototype,r,{get(){return[...uL(this).trackSet][r]}}),queueMicrotask((()=>{n.dispatchEvent(new dL("addtrack",{track:t}))}))}function fL(e){var t;let n=null==(t=uL(e).media)?void 0:t.videoTracks;n&&(uL(n).trackSet.delete(e),queueMicrotask((()=>{n.dispatchEvent(new dL("removetrack",{track:e}))})))}var pL,mL,gL,vL,yL,bL=class extends EventTarget{constructor(){super(),Gw(this,vL),Gw(this,pL,void 0),Gw(this,mL,void 0),Gw(this,gL,void 0),uL(this).trackSet=new Set}[Symbol.iterator](){return Ww(this,vL,yL).values()}get length(){return Ww(this,vL,yL).size}getTrackById(e){var t;return null!=(t=[...Ww(this,vL,yL)].find((t=>t.id===e)))?t:null}get selectedIndex(){return[...Ww(this,vL,yL)].findIndex((e=>e.selected))}get onaddtrack(){return Ww(this,pL)}set onaddtrack(e){Ww(this,pL)&&(this.removeEventListener("addtrack",Ww(this,pL)),Kw(this,pL,void 0)),"function"==typeof e&&(Kw(this,pL,e),this.addEventListener("addtrack",e))}get onremovetrack(){return Ww(this,mL)}set onremovetrack(e){Ww(this,mL)&&(this.removeEventListener("removetrack",Ww(this,mL)),Kw(this,mL,void 0)),"function"==typeof e&&(Kw(this,mL,e),this.addEventListener("removetrack",e))}get onchange(){return Ww(this,gL)}set onchange(e){Ww(this,gL)&&(this.removeEventListener("change",Ww(this,gL)),Kw(this,gL,void 0)),"function"==typeof e&&(Kw(this,gL,e),this.addEventListener("change",e))}};pL=new WeakMap,mL=new WeakMap,gL=new WeakMap,vL=new WeakSet,yL=function(){return uL(this).trackSet};var EL=class extends Event{constructor(e,t){super(e),Vw(this,"rendition"),this.rendition=t.rendition}};function TL(e){return[...uL(e).media.videoTracks].filter((e=>e.selected)).flatMap((e=>[...uL(e).renditionSet]))}var _L,AL,SL,kL=class extends EventTarget{constructor(){super(...arguments),Gw(this,_L,void 0),Gw(this,AL,void 0),Gw(this,SL,void 0)}[Symbol.iterator](){return TL(this).values()}get length(){return TL(this).length}getRenditionById(e){var t;return null!=(t=TL(this).find((t=>`${t.id}`==`${e}`)))?t:null}get selectedIndex(){return TL(this).findIndex((e=>e.selected))}set selectedIndex(e){for(let[t,n]of TL(this).entries())n.selected=t===e}get onaddrendition(){return Ww(this,_L)}set onaddrendition(e){Ww(this,_L)&&(this.removeEventListener("addrendition",Ww(this,_L)),Kw(this,_L,void 0)),"function"==typeof e&&(Kw(this,_L,e),this.addEventListener("addrendition",e))}get onremoverendition(){return Ww(this,AL)}set onremoverendition(e){Ww(this,AL)&&(this.removeEventListener("removerendition",Ww(this,AL)),Kw(this,AL,void 0)),"function"==typeof e&&(Kw(this,AL,e),this.addEventListener("removerendition",e))}get onchange(){return Ww(this,SL)}set onchange(e){Ww(this,SL)&&(this.removeEventListener("change",Ww(this,SL)),Kw(this,SL,void 0)),"function"==typeof e&&(Kw(this,SL,e),this.addEventListener("change",e))}};_L=new WeakMap,AL=new WeakMap,SL=new WeakMap;var wL;wL=new WeakMap;var LL,RL=class{constructor(){Vw(this,"id"),Vw(this,"kind"),Vw(this,"label",""),Vw(this,"language",""),Vw(this,"sourceBuffer"),Gw(this,LL,!1)}addRendition(e,t,n,i,r,s){let a=new class{constructor(){Vw(this,"src"),Vw(this,"id"),Vw(this,"width"),Vw(this,"height"),Vw(this,"bitrate"),Vw(this,"frameRate"),Vw(this,"codec"),Gw(this,wL,!1)}get selected(){return Ww(this,wL)}set selected(e){Ww(this,wL)!==e&&(Kw(this,wL,e),function(e){let t=uL(e).media.videoRenditions;!t||uL(t).changeRequested||(uL(t).changeRequested=!0,queueMicrotask((()=>{delete uL(t).changeRequested,uL(e).track.selected&&t.dispatchEvent(new Event("change"))})))}(this))}};return a.src=e,a.width=t,a.height=n,a.frameRate=s,a.bitrate=r,a.codec=i,function(e,t){let n=uL(e).media.videoRenditions;uL(t).media=uL(e).media,uL(t).track=e;let i=uL(e).renditionSet;i.add(t);let r=i.size-1;r in kL.prototype||Object.defineProperty(kL.prototype,r,{get(){return TL(this)[r]}}),queueMicrotask((()=>{!e.selected||n.dispatchEvent(new EL("addrendition",{rendition:t}))}))}(this,a),a}removeRendition(e){!function(e){let t=uL(e).media.videoRenditions,n=uL(e).track;uL(n).renditionSet.delete(e),queueMicrotask((()=>{!uL(e).track.selected||t.dispatchEvent(new EL("removerendition",{rendition:e}))}))}(e)}get selected(){return Ww(this,LL)}set selected(e){Ww(this,LL)!==e&&(Kw(this,LL,e),!0===e&&function(e){var t;let n=null!=(t=uL(e).media.videoTracks)?t:[],i=!1;for(let t of n)t!==e&&(t.selected=!1,i=!0);if(i){if(uL(n).changeRequested)return;uL(n).changeRequested=!0,queueMicrotask((()=>{delete uL(n).changeRequested,n.dispatchEvent(new Event("change"))}))}}(this))}};function IL(e){return[...uL(e).media.audioTracks].filter((e=>e.enabled)).flatMap((e=>[...uL(e).renditionSet]))}LL=new WeakMap;var CL,DL,xL,ML=class extends EventTarget{constructor(){super(...arguments),Gw(this,CL,void 0),Gw(this,DL,void 0),Gw(this,xL,void 0)}[Symbol.iterator](){return IL(this).values()}get length(){return IL(this).length}getRenditionById(e){var t;return null!=(t=IL(this).find((t=>`${t.id}`==`${e}`)))?t:null}get selectedIndex(){return IL(this).findIndex((e=>e.selected))}set selectedIndex(e){for(let[t,n]of IL(this).entries())n.selected=t===e}get onaddrendition(){return Ww(this,CL)}set onaddrendition(e){Ww(this,CL)&&(this.removeEventListener("addrendition",Ww(this,CL)),Kw(this,CL,void 0)),"function"==typeof e&&(Kw(this,CL,e),this.addEventListener("addrendition",e))}get onremoverendition(){return Ww(this,DL)}set onremoverendition(e){Ww(this,DL)&&(this.removeEventListener("removerendition",Ww(this,DL)),Kw(this,DL,void 0)),"function"==typeof e&&(Kw(this,DL,e),this.addEventListener("removerendition",e))}get onchange(){return Ww(this,xL)}set onchange(e){Ww(this,xL)&&(this.removeEventListener("change",Ww(this,xL)),Kw(this,xL,void 0)),"function"==typeof e&&(Kw(this,xL,e),this.addEventListener("change",e))}};CL=new WeakMap,DL=new WeakMap,xL=new WeakMap;var PL;function OL(e,t){let n=e.audioTracks;uL(t).media=e,uL(t).renditionSet||(uL(t).renditionSet=new Set);let i=uL(n).trackSet;i.add(t);let r=i.size-1;r in HL.prototype||Object.defineProperty(HL.prototype,r,{get(){return[...uL(this).trackSet][r]}}),queueMicrotask((()=>{n.dispatchEvent(new dL("addtrack",{track:t}))}))}function NL(e){var t;let n=null==(t=uL(e).media)?void 0:t.audioTracks;n&&(uL(n).trackSet.delete(e),queueMicrotask((()=>{n.dispatchEvent(new dL("removetrack",{track:e}))})))}PL=new WeakMap;var FL,UL,BL,$L,VL,HL=class extends EventTarget{constructor(){super(),Gw(this,$L),Gw(this,FL,void 0),Gw(this,UL,void 0),Gw(this,BL,void 0),uL(this).trackSet=new Set}[Symbol.iterator](){return Ww(this,$L,VL).values()}get length(){return Ww(this,$L,VL).size}getTrackById(e){var t;return null!=(t=[...Ww(this,$L,VL)].find((t=>t.id===e)))?t:null}get onaddtrack(){return Ww(this,FL)}set onaddtrack(e){Ww(this,FL)&&(this.removeEventListener("addtrack",Ww(this,FL)),Kw(this,FL,void 0)),"function"==typeof e&&(Kw(this,FL,e),this.addEventListener("addtrack",e))}get onremovetrack(){return Ww(this,UL)}set onremovetrack(e){Ww(this,UL)&&(this.removeEventListener("removetrack",Ww(this,UL)),Kw(this,UL,void 0)),"function"==typeof e&&(Kw(this,UL,e),this.addEventListener("removetrack",e))}get onchange(){return Ww(this,BL)}set onchange(e){Ww(this,BL)&&(this.removeEventListener("change",Ww(this,BL)),Kw(this,BL,void 0)),"function"==typeof e&&(Kw(this,BL,e),this.addEventListener("change",e))}};FL=new WeakMap,UL=new WeakMap,BL=new WeakMap,$L=new WeakSet,VL=function(){return uL(this).trackSet};var WL,GL=class{constructor(){Vw(this,"id"),Vw(this,"kind"),Vw(this,"label",""),Vw(this,"language",""),Vw(this,"sourceBuffer"),Gw(this,WL,!1)}addRendition(e,t,n){let i=new class{constructor(){Vw(this,"src"),Vw(this,"id"),Vw(this,"bitrate"),Vw(this,"codec"),Gw(this,PL,!1)}get selected(){return Ww(this,PL)}set selected(e){Ww(this,PL)!==e&&(Kw(this,PL,e),function(e){let t=uL(e).media.audioRenditions;!t||uL(t).changeRequested||(uL(t).changeRequested=!0,queueMicrotask((()=>{delete uL(t).changeRequested,uL(e).track.enabled&&t.dispatchEvent(new Event("change"))})))}(this))}};return i.src=e,i.codec=t,i.bitrate=n,function(e,t){let n=uL(e).media.audioRenditions;uL(t).media=uL(e).media,uL(t).track=e;let i=uL(e).renditionSet;i.add(t);let r=i.size-1;r in ML.prototype||Object.defineProperty(ML.prototype,r,{get(){return IL(this)[r]}}),queueMicrotask((()=>{!e.enabled||n.dispatchEvent(new EL("addrendition",{rendition:t}))}))}(this,i),i}removeRendition(e){!function(e){let t=uL(e).media.audioRenditions,n=uL(e).track;uL(n).renditionSet.delete(e),queueMicrotask((()=>{!uL(e).track.enabled||t.dispatchEvent(new EL("removerendition",{rendition:e}))}))}(e)}get enabled(){return Ww(this,WL)}set enabled(e){Ww(this,WL)!==e&&(Kw(this,WL,e),function(e){let t=uL(e).media.audioTracks;!t||uL(t).changeRequested||(uL(t).changeRequested=!0,queueMicrotask((()=>{delete uL(t).changeRequested,t.dispatchEvent(new Event("change"))})))}(this))}};WL=new WeakMap;var KL=qL(globalThis.HTMLMediaElement,"video"),jL=qL(globalThis.HTMLMediaElement,"audio");function qL(e,t){var n;if(null!=e&&e.prototype)return null==(n=Object.getOwnPropertyDescriptor(e.prototype,`${t}Tracks`))?void 0:n.get}rL.push("castchange","entercast","leavecast");var YL,zL,XL,QL,ZL,JL,eR,tR,nR,iR=function(e){if(null==e||!e.prototype)return e;let t=qL(e,"video");(!t||`${t}`.includes("[native code]"))&&Object.defineProperty(e.prototype,"videoTracks",{get(){return function(e){var t;let n=uL(e).videoTracks;if(!n&&(n=new bL,uL(e).videoTracks=n,KL)){let i=KL.call(null!=(t=e.nativeEl)?t:e);for(let t of i)hL(e,t);i.addEventListener("change",(()=>{n.dispatchEvent(new Event("change"))})),i.addEventListener("addtrack",(t=>{if([...n].some((e=>e instanceof RL)))for(let e of i)fL(e);else hL(e,t.track)})),i.addEventListener("removetrack",(e=>{fL(e.track)}))}return n}(this)}});let n=qL(e,"audio");(!n||`${n}`.includes("[native code]"))&&Object.defineProperty(e.prototype,"audioTracks",{get(){return function(e){var t;let n=uL(e).audioTracks;if(!n&&(n=new HL,uL(e).audioTracks=n,jL)){let i=jL.call(null!=(t=e.nativeEl)?t:e);for(let t of i)OL(e,t);i.addEventListener("change",(()=>{n.dispatchEvent(new Event("change"))})),i.addEventListener("addtrack",(t=>{if([...n].some((e=>e instanceof GL)))for(let e of i)NL(e);else OL(e,t.track)})),i.addEventListener("removetrack",(e=>{NL(e.track)}))}return n}(this)}}),"addVideoTrack"in e.prototype||(e.prototype.addVideoTrack=function(e,t="",n=""){let i=new RL;return i.kind=e,i.label=t,i.language=n,hL(this,i),i}),"removeVideoTrack"in e.prototype||(e.prototype.removeVideoTrack=fL),"addAudioTrack"in e.prototype||(e.prototype.addAudioTrack=function(e,t="",n=""){let i=new GL;return i.kind=e,i.label=t,i.language=n,OL(this,i),i}),"removeAudioTrack"in e.prototype||(e.prototype.removeAudioTrack=NL),"videoRenditions"in e.prototype||Object.defineProperty(e.prototype,"videoRenditions",{get(){return i(this)}});let i=e=>{let t=uL(e).videoRenditions;return t||(t=new kL,uL(t).media=e,uL(e).videoRenditions=t),t};"audioRenditions"in e.prototype||Object.defineProperty(e.prototype,"audioRenditions",{get(){return r(this)}});let r=e=>{let t=uL(e).audioRenditions;return t||(t=new ML,uL(t).media=e,uL(e).audioRenditions=t),t};return e}(lL(Jw.HTMLElement,{tag:"video",is:"castable-video"})),rR={BEACON_COLLECTION_DOMAIN:"beacon-collection-domain",CUSTOM_DOMAIN:"custom-domain",DEBUG:"debug",DISABLE_COOKIES:"disable-cookies",ENV_KEY:"env-key",MAX_RESOLUTION:"max-resolution",METADATA_URL:"metadata-url",PLAYBACK_ID:"playback-id",PLAYER_SOFTWARE_NAME:"player-software-name",PLAYER_SOFTWARE_VERSION:"player-software-version",PREFER_CMCD:"prefer-cmcd",PREFER_PLAYBACK:"prefer-playback",START_TIME:"start-time",STREAM_TYPE:"stream-type",TARGET_LIVE_WINDOW:"target-live-window",LIVE_EDGE_OFFSET:"live-edge-offset",TYPE:"type"},sR=Object.values(rR),aR=eL,oR=class extends iR{constructor(){super(),Gw(this,tR),Gw(this,YL,void 0),Gw(this,zL,void 0),Gw(this,XL,void 0),Gw(this,QL,{}),Gw(this,ZL,void 0),Gw(this,JL,void 0),Gw(this,eR,void 0),Kw(this,XL,mb.utils.now())}static get observedAttributes(){var e;return[...sR,...null!=(e=iR.observedAttributes)?e:[]]}get preferCmcd(){var e;return null!=(e=this.getAttribute(rR.PREFER_CMCD))?e:void 0}set preferCmcd(e){e!==this.preferCmcd&&(e?qk.includes(e)?this.setAttribute(rR.PREFER_CMCD,e):console.warn(`Invalid value for preferCmcd. Must be one of ${qk.join()}`):this.removeAttribute(rR.PREFER_CMCD))}get playerInitTime(){return Ww(this,XL)}get playerSoftwareName(){var e;return null!=(e=Ww(this,JL))?e:"mux-video"}set playerSoftwareName(e){Kw(this,JL,e)}get playerSoftwareVersion(){var e;return null!=(e=Ww(this,ZL))?e:aR}set playerSoftwareVersion(e){Kw(this,ZL,e)}get _hls(){var e;return null==(e=Ww(this,YL))?void 0:e.engine}get mux(){var e;return null==(e=this.nativeEl)?void 0:e.mux}get error(){var e;return null!=(e=(e=>{var t;return null==(t=Ew.get(e))?void 0:t.error})(this.nativeEl))?e:null}get errorTranslator(){return Ww(this,eR)}set errorTranslator(e){Kw(this,eR,e)}get src(){return this.getAttribute("src")}set src(e){e!==this.src&&(null==e?this.removeAttribute("src"):this.setAttribute("src",e))}get type(){var e;return null!=(e=this.getAttribute(rR.TYPE))?e:void 0}set type(e){e!==this.type&&(e?this.setAttribute(rR.TYPE,e):this.removeAttribute(rR.TYPE))}get autoplay(){let e=this.getAttribute("autoplay");return null!==e&&(""===e||e)}set autoplay(e){e!==this.autoplay&&(e?this.setAttribute("autoplay","string"==typeof e?e:""):this.removeAttribute("autoplay"))}get preload(){let e=this.getAttribute("preload");return""===e?"auto":["none","metadata","auto"].includes(e)?e:super.preload}set preload(e){e!=this.getAttribute("preload")&&(["","none","metadata","auto"].includes(e)?this.setAttribute("preload",e):this.removeAttribute("preload"))}get debug(){return null!=this.getAttribute(rR.DEBUG)}set debug(e){e!==this.debug&&(e?this.setAttribute(rR.DEBUG,""):this.removeAttribute(rR.DEBUG))}get disableCookies(){return this.hasAttribute(rR.DISABLE_COOKIES)}set disableCookies(e){e!==this.disableCookies&&(e?this.setAttribute(rR.DISABLE_COOKIES,""):this.removeAttribute(rR.DISABLE_COOKIES))}get startTime(){let e=this.getAttribute(rR.START_TIME);if(null==e)return;let t=+e;return Number.isNaN(t)?void 0:t}set startTime(e){e!==this.startTime&&(null==e?this.removeAttribute(rR.START_TIME):this.setAttribute(rR.START_TIME,`${e}`))}get playbackId(){var e;return null!=(e=this.getAttribute(rR.PLAYBACK_ID))?e:void 0}set playbackId(e){e!==this.playbackId&&(e?this.setAttribute(rR.PLAYBACK_ID,e):this.removeAttribute(rR.PLAYBACK_ID))}get maxResolution(){var e;return null!=(e=this.getAttribute(rR.MAX_RESOLUTION))?e:void 0}set maxResolution(e){e!==this.maxResolution&&(e?this.setAttribute(rR.MAX_RESOLUTION,e):this.removeAttribute(rR.MAX_RESOLUTION))}get customDomain(){var e;return null!=(e=this.getAttribute(rR.CUSTOM_DOMAIN))?e:void 0}set customDomain(e){e!==this.customDomain&&(e?this.setAttribute(rR.CUSTOM_DOMAIN,e):this.removeAttribute(rR.CUSTOM_DOMAIN))}get ended(){return Rw(this.nativeEl,this._hls)}get envKey(){var e;return null!=(e=this.getAttribute(rR.ENV_KEY))?e:void 0}set envKey(e){e!==this.envKey&&(e?this.setAttribute(rR.ENV_KEY,e):this.removeAttribute(rR.ENV_KEY))}get beaconCollectionDomain(){var e;return null!=(e=this.getAttribute(rR.BEACON_COLLECTION_DOMAIN))?e:void 0}set beaconCollectionDomain(e){e!==this.beaconCollectionDomain&&(e?this.setAttribute(rR.BEACON_COLLECTION_DOMAIN,e):this.removeAttribute(rR.BEACON_COLLECTION_DOMAIN))}get streamType(){var e;return null!=(e=this.getAttribute(rR.STREAM_TYPE))?e:(e=>{var t,n;return null!=(n=null==(t=Ew.get(e))?void 0:t.streamType)?n:Wk.UNKNOWN})(this.nativeEl)}set streamType(e){e!==this.streamType&&(e?this.setAttribute(rR.STREAM_TYPE,e):this.removeAttribute(rR.STREAM_TYPE))}get targetLiveWindow(){return this.hasAttribute(rR.TARGET_LIVE_WINDOW)?+this.getAttribute(rR.TARGET_LIVE_WINDOW):(e=this.nativeEl,null!=(n=null==(t=Ew.get(e))?void 0:t.targetLiveWindow)?n:Number.NaN);var e,t,n}set targetLiveWindow(e){e!=this.targetLiveWindow&&(null==e?this.removeAttribute(rR.TARGET_LIVE_WINDOW):this.setAttribute(rR.TARGET_LIVE_WINDOW,""+ +e))}get liveEdgeStart(){var e,t;if(this.hasAttribute(rR.LIVE_EDGE_OFFSET)){let{liveEdgeOffset:n}=this,i=null!=(e=this.nativeEl.seekable.end(0))?e:0,r=null!=(t=this.nativeEl.seekable.start(0))?t:0;return Math.max(r,i-n)}return(e=>{var t;let n=null==(t=Ew.get(e))?void 0:t.liveEdgeStartOffset;if("number"!=typeof n)return Number.NaN;let i=ww(e);return i.length?i.end(i.length-1)-n:Number.NaN})(this.nativeEl)}get liveEdgeOffset(){if(this.hasAttribute(rR.LIVE_EDGE_OFFSET))return+this.getAttribute(rR.LIVE_EDGE_OFFSET)}set liveEdgeOffset(e){e!=this.targetLiveWindow&&(null==e?this.removeAttribute(rR.LIVE_EDGE_OFFSET):this.setAttribute(rR.LIVE_EDGE_OFFSET,""+ +e))}get seekable(){return ww(this.nativeEl)}async addCuePoints(e){return dw(this.nativeEl,e)}get activeCuePoint(){return uw(this.nativeEl)}get cuePoints(){return function(e,t={label:aw}){let n=lw(e,t);return null!=n&&n.cues?Array.from(n.cues,(e=>cw(e))):[]}(this.nativeEl)}getStartDate(){return function(e,t){if(t){let n=t.playingDate;if(null!=n)return new Date(n.getTime()-1e3*e.currentTime)}return"function"==typeof e.getStartDate?e.getStartDate():new Date(NaN)}(this.nativeEl,this._hls)}get currentPdt(){return function(e,t){if(t&&t.playingDate)return t.playingDate;if("function"==typeof e.getStartDate){let t=e.getStartDate();return new Date(t.getTime()+1e3*e.currentTime)}return new Date(NaN)}(this.nativeEl,this._hls)}get preferPlayback(){let e=this.getAttribute(rR.PREFER_PLAYBACK);if(e===Gk||e===Kk)return e}set preferPlayback(e){e!==this.preferPlayback&&(e===Gk||e===Kk?this.setAttribute(rR.PREFER_PLAYBACK,e):this.removeAttribute(rR.PREFER_PLAYBACK))}get metadata(){return{...this.getAttributeNames().filter((e=>e.startsWith("metadata-")&&![rR.METADATA_URL].includes(e))).reduce(((e,t)=>{let n=this.getAttribute(t);return null!=n&&(e[t.replace(/^metadata-/,"").replace(/-/g,"_")]=n),e}),{}),...Ww(this,QL)}}set metadata(e){Kw(this,QL,null!=e?e:{}),this.mux&&this.mux.emit("hb",Ww(this,QL))}load(){Kw(this,YL,Iw(this,this.nativeEl,Ww(this,YL)))}unload(){Cw(this.nativeEl,Ww(this,YL)),Kw(this,YL,void 0)}attributeChangedCallback(e,t,n){var i,r;switch(iR.observedAttributes.includes(e)&&!["src","autoplay","preload"].includes(e)&&super.attributeChangedCallback(e,t,n),e){case rR.PLAYER_SOFTWARE_NAME:this.playerSoftwareName=null!=n?n:void 0;break;case rR.PLAYER_SOFTWARE_VERSION:this.playerSoftwareVersion=null!=n?n:void 0;break;case"src":{let e=!!t,i=!!n;!e&&i?jw(this,tR,nR).call(this):e&&!i?this.unload():e&&i&&(this.unload(),jw(this,tR,nR).call(this));break}case"autoplay":if(n===t)break;null==(i=Ww(this,YL))||i.setAutoplay(this.autoplay);break;case"preload":if(n===t)break;null==(r=Ww(this,YL))||r.setPreload(n);break;case rR.PLAYBACK_ID:this.src=((e,{domain:t=Tw,maxResolution:n=""}={})=>{if(!e)return;let[i,r=""]=(e=>{let t=e.indexOf("?");return t<0?[e]:[e.slice(0,t),e.slice(t)]})(e),s=new URL(`https://stream.${t}/${i}.m3u8${r}`);return n&&s.searchParams.set("max_resolution",n),s.toString()})(null!=n?n:void 0,{maxResolution:this.maxResolution,domain:this.customDomain});break;case rR.DEBUG:{let e=this.debug;this.mux&&console.info("Cannot toggle debug mode of mux data after initialization. Make sure you set all metadata to override before setting the src."),this._hls&&(this._hls.config.debug=e);break}case rR.METADATA_URL:n&&fetch(n).then((e=>e.json())).then((e=>this.metadata=e)).catch((()=>console.error(`Unable to load or parse metadata JSON from metadata-url ${n}!`)));break;case rR.STREAM_TYPE:(null==n||n!==t)&&this.dispatchEvent(new CustomEvent("streamtypechange",{composed:!0,bubbles:!0}));break;case rR.TARGET_LIVE_WINDOW:(null==n||n!==t)&&this.dispatchEvent(new CustomEvent("targetlivewindowchange",{composed:!0,bubbles:!0,detail:this.targetLiveWindow}))}}connectedCallback(){var e;null==(e=super.connectedCallback)||e.call(this),this.nativeEl&&this.src&&!Ww(this,YL)&&jw(this,tR,nR).call(this)}disconnectedCallback(){this.unload()}};YL=new WeakMap,zL=new WeakMap,XL=new WeakMap,QL=new WeakMap,ZL=new WeakMap,JL=new WeakMap,eR=new WeakMap,tR=new WeakSet,nR=async function(){Ww(this,zL)||(await Kw(this,zL,Promise.resolve()),Kw(this,zL,null),this.load())},Jw.customElements.get("mux-video")||(Jw.customElements.define("mux-video",oR),Jw.MuxVideoElement=oR);var lR,dR,cR,uR,hR,fR,pR,mR,gR,vR,yR,bR=oR,ER=Object.defineProperty,TR=(e,t,n)=>(((e,t,n)=>{t in e?ER(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n),_R=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},AR=(e,t,n)=>(_R(e,t,"read from private field"),n?n.call(e):t.get(e)),SR=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},kR=(e,t,n,i)=>(_R(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n);const wR={processCallback(e,t,n){if(n)for(const[e,i]of t)if(e in n){const t=n[e];"boolean"==typeof t&&i instanceof PR&&"boolean"==typeof i.element[i.attributeName]?i.booleanValue=t:"function"==typeof t&&i instanceof PR?i.element[i.attributeName]=t:i.value=t}}};class LR extends Vh.DocumentFragment{constructor(e,t,n=wR){var i;super(),SR(this,lR,void 0),SR(this,dR,void 0),this.append(e.content.cloneNode(!0)),kR(this,lR,RR(this)),kR(this,dR,n),null==(i=n.createCallback)||i.call(n,this,AR(this,lR),t),n.processCallback(this,AR(this,lR),t)}update(e){AR(this,dR).processCallback(this,AR(this,lR),e)}}lR=new WeakMap,dR=new WeakMap;const RR=(e,t=[])=>{let n,i;for(let r of e.attributes||[])if(r.value.includes("{{")){const s=new MR;for([n,i]of CR(r.value))if(n){const n=new PR(e,r.name,r.namespaceURI);s.append(n),t.push([i,n])}else s.append(i);r.value=s.toString()}for(let r of e.childNodes)if(1!==r.nodeType||r instanceof HTMLTemplateElement){if(1===r.nodeType||r.data.includes("{{")){const s=[];if(r.data)for([n,i]of CR(r.data))if(n){const n=new OR(e);s.push(n),t.push([i,n])}else s.push(new Text(i));else if(r instanceof HTMLTemplateElement){const n=new NR(e,r);s.push(n),t.push([n.expression,n])}r.replaceWith(...s.flatMap((e=>e.replacementNodes||[e])))}}else RR(r,t);return t},IR={},CR=e=>{let t,n="",i=0,r=IR[e],s=0;if(r)return r;for(r=[];t=e[s];s++)"{"===t&&"{"===e[s+1]&&"\\"!==e[s-1]&&e[s+2]&&1==++i?(n&&r.push([0,n]),n="",s++):"}"!==t||"}"!==e[s+1]||"\\"===e[s-1]||--i?n+=t||"":(r.push([1,n.trim()]),n="",s++);return n&&r.push([0,(i>0?"{{":"")+n]),IR[e]=r};class DR{get value(){return""}set value(e){}toString(){return this.value}}const xR=new WeakMap;class MR{constructor(){SR(this,cR,[])}[Symbol.iterator](){return AR(this,cR).values()}get length(){return AR(this,cR).length}item(e){return AR(this,cR)[e]}append(...e){for(const t of e)t instanceof PR&&xR.set(t,this),AR(this,cR).push(t)}toString(){return AR(this,cR).join("")}}cR=new WeakMap;class PR extends DR{constructor(e,t,n){super(),SR(this,mR),SR(this,uR,""),SR(this,hR,void 0),SR(this,fR,void 0),SR(this,pR,void 0),kR(this,hR,e),kR(this,fR,t),kR(this,pR,n)}get attributeName(){return AR(this,fR)}get attributeNamespace(){return AR(this,pR)}get element(){return AR(this,hR)}get value(){return AR(this,uR)}set value(e){AR(this,uR)!==e&&(kR(this,uR,e),AR(this,mR,gR)&&1!==AR(this,mR,gR).length?AR(this,hR).setAttributeNS(AR(this,pR),AR(this,fR),AR(this,mR,gR)):null==e?AR(this,hR).removeAttributeNS(AR(this,pR),AR(this,fR)):AR(this,hR).setAttributeNS(AR(this,pR),AR(this,fR),e))}get booleanValue(){return AR(this,hR).hasAttributeNS(AR(this,pR),AR(this,fR))}set booleanValue(e){if(AR(this,mR,gR)&&1!==AR(this,mR,gR).length)throw new DOMException("Value is not fully templatized");this.value=e?"":null}}uR=new WeakMap,hR=new WeakMap,fR=new WeakMap,pR=new WeakMap,mR=new WeakSet,gR=function(){return xR.get(this)};class OR extends DR{constructor(e,t){super(),SR(this,vR,void 0),SR(this,yR,void 0),kR(this,vR,e),kR(this,yR,t?[...t]:[new Text])}get replacementNodes(){return AR(this,yR)}get parentNode(){return AR(this,vR)}get nextSibling(){return AR(this,yR)[AR(this,yR).length-1].nextSibling}get previousSibling(){return AR(this,yR)[0].previousSibling}get value(){return AR(this,yR).map((e=>e.textContent)).join("")}set value(e){this.replace(e)}replace(...e){const t=e.flat().flatMap((e=>null==e?[new Text]:e.forEach?[...e]:11===e.nodeType?[...e.childNodes]:e.nodeType?[e]:[new Text(e)]));t.length||t.push(new Text),kR(this,yR,function(e,t,n,i=null){let r,s,a,o=0,l=n.length,d=t.length;for(;o<l&&o<d&&t[o]==n[o];)o++;for(;o<l&&o<d&&n[l-1]==t[d-1];)i=n[(--d,--l)];if(o==d)for(;o<l;)e.insertBefore(n[o++],i);if(o==l)for(;o<d;)e.removeChild(t[o++]);else{for(r=t[o];o<l;)a=n[o++],s=r?r.nextSibling:i,r==a?r=s:o<l&&n[o]==s?(e.replaceChild(a,r),r=s):e.insertBefore(a,r);for(;r!=i;)s=r.nextSibling,e.removeChild(r),r=s}return n}(AR(this,yR)[0].parentNode,AR(this,yR),t,this.nextSibling))}}vR=new WeakMap,yR=new WeakMap;class NR extends OR{constructor(e,t){let n=t.getAttribute("directive")||t.getAttribute("type"),i=t.getAttribute("expression")||t.getAttribute(n)||"";i.startsWith("{{")&&(i=i.trim().slice(2,-2).trim()),super(e),TR(this,"directive"),this.expression=i,this.template=t,this.directive=n}}const FR={string:e=>String(e)};class UR{constructor(e){this.template=e,this.state=void 0}}const BR=new WeakMap,$R=new WeakMap,VR={partial:(e,t)=>{t[e.expression]=new UR(e.template)},if:(e,t)=>{var n;if(KR(e.expression,t))if(BR.get(e)!==e.template){BR.set(e,e.template);const n=new LR(e.template,t,WR);e.replace(n),$R.set(e,n)}else null==(n=$R.get(e))||n.update(t);else e.replace(""),BR.delete(e),$R.delete(e)}},HR=Object.keys(VR),WR={processCallback(e,t,n){var i,r;if(n)for(const[e,s]of t){if(s instanceof NR){if(!s.directive){const e=HR.find((e=>s.template.hasAttribute(e)));e&&(s.directive=e,s.expression=s.template.getAttribute(e))}null==(i=VR[s.directive])||i.call(VR,s,n);continue}let t=KR(e,n);t instanceof UR?BR.get(s)!==t.template?(BR.set(s,t.template),t=new LR(t.template,t.state,WR),s.value=t,$R.set(s,t)):null==(r=$R.get(s))||r.update(t.state):t?(s instanceof PR&&s.attributeName.startsWith("aria-")&&(t=String(t)),s instanceof PR?"boolean"==typeof t?s.booleanValue=t:"function"==typeof t?s.element[s.attributeName]=t:s.value=t:(s.value=t,BR.delete(s),$R.delete(s))):s instanceof PR?s.value=void 0:(s.value=void 0,BR.delete(s),$R.delete(s))}}},GR={"!":e=>!e,"!!":e=>!!e,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,">":(e,t)=>e>t,">=":(e,t)=>e>=t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,"??":(e,t)=>null!=e?e:t,"|":(e,t)=>{var n;return null==(n=FR[t])?void 0:n.call(FR,e)}};function KR(e,t={}){var n,i,r,s,a,o,l;const d=function(e){return function(e,t){let n,i,r,s=[];for(;e;){r=null,n=e.length;for(let s in t)i=t[s].exec(e),i&&i.index<n&&(r={token:i[0],type:s,matches:i.slice(1)},n=i.index);n&&s.push({token:e.substr(0,n),type:void 0}),r&&s.push(r),e=e.substr(n+(r?r.token.length:0))}return s}(e,{boolean:/true|false/,number:/-?\d+\.?\d*/,string:/(["'])((?:\\.|[^\\])*?)\1/,operator:/[!=><][=!]?|\?\?|\|/,ws:/\s+/,param:/[$a-z_][$\w]*/i}).filter((({type:e})=>"ws"!==e))}(e);if(0===d.length||d.some((({type:e})=>!e)))return jR(e);if(">"===(null==(n=d[0])?void 0:n.token)){const n=t[null==(i=d[1])?void 0:i.token];if(!n)return jR(e);const o={...t};n.state=o;const l=d.slice(2);for(let e=0;e<l.length;e+=3){const n=null==(r=l[e])?void 0:r.token,i=null==(s=l[e+1])?void 0:s.token,d=null==(a=l[e+2])?void 0:a.token;n&&"="===i&&(o[n]=YR(d,t))}return n}if(1===d.length)return qR(d[0])?YR(d[0].token,t):jR(e);if(2===d.length){const n=null==(o=d[0])?void 0:o.token,i=GR[n];if(!i||!qR(d[1]))return jR(e);return i(YR(d[1].token,t))}if(3===d.length){const n=null==(l=d[1])?void 0:l.token,i=GR[n];if(!i||!qR(d[0])||!qR(d[2]))return jR(e);const r=YR(d[0].token,t);if("|"===n)return i(r,d[2].token);return i(r,YR(d[2].token,t))}}function jR(e){return console.warn(`Warning: invalid expression \`${e}\``),!1}function qR({type:e}){return["number","boolean","string","param"].includes(e)}function YR(e,t){const n=e[0],i=e.slice(-1);return"true"===e||"false"===e?"true"===e:n===i&&["'",'"'].includes(n)?e.slice(1,-1):Eh(e)?parseFloat(e):t[e]}var zR,XR,QR,ZR,JR,eI,tI,nI=Object.defineProperty,iI=(e,t,n)=>(((e,t,n)=>{t in e?nI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n),rI=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},sI=(e,t,n)=>(rI(e,t,"read from private field"),n?n.call(e):t.get(e)),aI=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},oI=(e,t,n,i)=>(rI(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),lI=(e,t,n)=>(rI(e,t,"access private method"),n);const dI={mediatargetlivewindow:"targetlivewindow",mediastreamtype:"streamtype"},cI=Hh.createElement("template");cI.innerHTML="\n  <style>\n    :host {\n      display: inline-block;\n      line-height: 0;\n    }\n\n    media-controller {\n      width: 100%;\n      height: 100%;\n    }\n\n    media-controller:not([mediasubtitleslist]) media-captions-selectmenu,\n    media-captions-button:not([mediasubtitleslist]),\n    media-rendition-selectmenu[mediarenditionunavailable],\n    media-audio-track-selectmenu[mediaaudiotrackunavailable],\n    media-volume-range[mediavolumeunavailable],\n    media-airplay-button[mediaairplayunavailable],\n    media-fullscreen-button[mediafullscreenunavailable],\n    media-cast-button[mediacastunavailable],\n    media-pip-button[mediapipunavailable] {\n      display: none;\n    }\n  </style>\n";class uI extends Vh.HTMLElement{constructor(){super(),aI(this,ZR),aI(this,eI),iI(this,"renderRoot"),iI(this,"renderer"),aI(this,zR,void 0),aI(this,XR,void 0),aI(this,QR,void 0),this.shadowRoot?this.renderRoot=this.shadowRoot:(this.renderRoot=this.attachShadow({mode:"open"}),this.createRenderer());const e=new MutationObserver((e=>{var t;this.mediaController&&!(null==(t=this.mediaController)?void 0:t.breakpointsComputed)||e.some((e=>{const t=e.target;return t===this||"media-controller"===t.localName&&(!!dI[e.attributeName]||!!e.attributeName.startsWith("breakpoint"))}))&&this.render()}));e.observe(this,{attributes:!0}),e.observe(this.renderRoot,{attributes:!0,subtree:!0}),this.addEventListener(nh.BREAKPOINTS_COMPUTED,this.render),lI(this,ZR,JR).call(this,"template")}get mediaController(){return this.renderRoot.querySelector("media-controller")}get template(){var e;return null!=(e=sI(this,zR))?e:this.constructor.template}set template(e){oI(this,QR,null),oI(this,zR,e),this.createRenderer()}get props(){var e,t,n;const i=[...Array.from(null!=(t=null==(e=this.mediaController)?void 0:e.attributes)?t:[]).filter((({name:e})=>dI[e]||e.startsWith("breakpoint"))),...Array.from(this.attributes)],r={};for(let e of i){const t=null!=(n=dI[e.name])?n:bh(e.name);let{value:i}=e;null!=i?(Eh(i)&&(i=parseFloat(i)),r[t]=""===i||i):r[t]=!1}return r}attributeChangedCallback(e,t,n){"template"===e&&t!=n&&lI(this,eI,tI).call(this)}connectedCallback(){lI(this,eI,tI).call(this)}createRenderer(){this.template&&this.template!==sI(this,XR)&&(oI(this,XR,this.template),this.renderer=new LR(this.template,this.props,this.constructor.processor),this.renderRoot.textContent="",this.renderRoot.append(cI.content.cloneNode(!0),this.renderer))}render(){var e;null==(e=this.renderer)||e.update(this.props)}}zR=new WeakMap,XR=new WeakMap,QR=new WeakMap,ZR=new WeakSet,JR=function(e){if(Object.prototype.hasOwnProperty.call(this,e)){const t=this[e];delete this[e],this[e]=t}},eI=new WeakSet,tI=function(){var e;const t=this.getAttribute("template");if(!t||t===sI(this,QR))return;const n=this.getRootNode(),i=null==(e=null==n?void 0:n.getElementById)?void 0:e.call(n,t);if(i)return oI(this,QR,t),oI(this,zR,i),void this.createRenderer();(function(e){if(!/^(\/|\.\/|https?:\/\/)/.test(e))return!1;const t=/^https?:\/\//.test(e)?void 0:location.origin;try{new URL(e,t)}catch(e){return!1}return!0})(t)&&(oI(this,QR,t),async function(e){const t=await fetch(e);if(200!==t.status)throw new Error(`Failed to load resource: the server responded with a status of ${t.status}`);return t.text()}(t).then((e=>{const t=Hh.createElement("template");t.innerHTML=e,oI(this,zR,t),this.createRenderer()})).catch(console.error))},iI(uI,"template"),iI(uI,"observedAttributes",["template"]),iI(uI,"processor",WR),Vh.customElements.get("media-theme")||Vh.customElements.define("media-theme",uI);var hI=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},fI=(e,t,n)=>(hI(e,t,"read from private field"),n?n.call(e):t.get(e)),pI=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},mI=(e,t,n,i)=>(hI(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),gI=(e,t,n)=>(hI(e,t,"access private method"),n),vI=class{addEventListener(){}removeEventListener(){}dispatchEvent(e){return!0}};if("undefined"==typeof DocumentFragment){class e extends vI{}globalThis.DocumentFragment=e}var yI,bI=class extends vI{},EI={get(e){},define(e,t,n){},upgrade(e){},whenDefined:e=>Promise.resolve(bI)};yI=new WeakMap;var TI={document:{createElement:function(e,t){return new bI}},DocumentFragment,customElements:EI,CustomEvent:class{constructor(e,t={}){pI(this,yI,void 0),mI(this,yI,null==t?void 0:t.detail)}get detail(){return fI(this,yI)}initCustomEvent(){}},EventTarget:vI,HTMLElement:bI,HTMLVideoElement:class extends vI{}},_I="undefined"==typeof window||void 0===globalThis.customElements,AI=_I?TI:globalThis,SI=_I?TI.document:globalThis.document,kI={code:"en"};function wI(e,t=!0){var n,i;let r=t&&null!=(i=null==(n=kI)?void 0:n[e])?i:e;return new LI(r,t?kI.code:"en")}var LI=class{constructor(e,t=(e=>null!=(e=kI.code)?e:"en")()){this.message=e,this.locale=t}format(e){return this.message.replace(/\{(\w+)\}/g,((t,n)=>{var i;return null!=(i=e[n])?i:""}))}toString(){return this.message}};function RI(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function II(e){return e.replace(/[-_]([a-z])/g,((e,t)=>t.toUpperCase()))}function CI(e){if(null==e)return;let t=+e;return Number.isNaN(t)?void 0:t}function DI(e){let t=function(e){let t={};for(let n in e)null!=e[n]&&(t[n]=e[n]);return new URLSearchParams(t)}(e).toString();return t?"?"+t:""}function xI(e){let t=(null!=e?e:"").split(".")[1];if(!t)return{};let n=t.replace(/-/g,"+").replace(/_/g,"/"),i=decodeURIComponent(atob(n).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(i)}var MI=(e,t)=>!(!e||!t)&&(!!e.contains(t)||MI(e,t.getRootNode().host)),PI="mux.com",OI=(()=>{try{return"1.14.2"}catch{}return"UNKNOWN"})(),NI=()=>OI,FI=(e,{maxResolution:t,token:n,domain:i=PI}={})=>`https://stream.${i}/${e}.m3u8${DI(n?{token:n}:{redundant_streams:!0,...t?{max_resolution:t}:{}})}`,UI=e=>{if(e){if([Wk.LIVE,Wk.ON_DEMAND].includes(e))return e;if(null!=e&&e.includes("live"))return Wk.LIVE}},BI={crossorigin:"crossOrigin",playsinline:"playsInline"};var $I,VI,HI,WI=class{constructor(e,t){pI(this,$I,void 0),pI(this,VI,void 0),pI(this,HI,[]),mI(this,$I,e),mI(this,VI,t)}[Symbol.iterator](){return fI(this,HI).values()}get length(){return fI(this,HI).length}get value(){var e;return null!=(e=fI(this,HI).join(" "))?e:""}set value(e){var t;e!==this.value&&(mI(this,HI,[]),this.add(...null!=(t=null==e?void 0:e.split(" "))?t:[]))}toString(){return this.value}item(e){return fI(this,HI)[e]}values(){return fI(this,HI).values()}keys(){return fI(this,HI).keys()}forEach(e){fI(this,HI).forEach(e)}add(...e){var t,n;e.forEach((e=>{this.contains(e)||fI(this,HI).push(e)})),(""!==this.value||null!=(t=fI(this,$I))&&t.hasAttribute(`${fI(this,VI)}`))&&(null==(n=fI(this,$I))||n.setAttribute(`${fI(this,VI)}`,`${this.value}`))}remove(...e){var t;e.forEach((e=>{fI(this,HI).splice(fI(this,HI).indexOf(e),1)})),null==(t=fI(this,$I))||t.setAttribute(`${fI(this,VI)}`,`${this.value}`)}contains(e){return fI(this,HI).includes(e)}toggle(e,t){return void 0!==t?t?(this.add(e),!0):(this.remove(e),!1):this.contains(e)?(this.remove(e),!1):(this.add(e),!0)}replace(e,t){this.remove(e),this.add(t)}};$I=new WeakMap,VI=new WeakMap,HI=new WeakMap;var GI=`[mux-player ${NI()}]`;function KI(...e){console.warn(GI,...e)}function jI(...e){console.error(GI,...e)}function qI(e){var t;let n=null!=(t=e.message)?t:"";if(e.context&&(n+=` ${e.context}`),e.file){let t="https://github.com/muxinc/elements/blob/main/errors/";n+=` ${wI("Read more: ")}\n${t}${e.file}`}KI(n)}var YI={AUTOPLAY:"autoplay",CROSSORIGIN:"crossorigin",LOOP:"loop",MUTED:"muted",PLAYSINLINE:"playsinline",PRELOAD:"preload"},zI={VOLUME:"volume",PLAYBACKRATE:"playbackrate",MUTED:"muted"},XI=Object.freeze({length:0,start(e){let t=e>>>0;if(t>=this.length)throw new DOMException(`Failed to execute 'start' on 'TimeRanges': The index provided (${t}) is greater than or equal to the maximum bound (${this.length}).`);return 0},end(e){let t=e>>>0;if(t>=this.length)throw new DOMException(`Failed to execute 'end' on 'TimeRanges': The index provided (${t}) is greater than or equal to the maximum bound (${this.length}).`);return 0}}),QI=rL.filter((e=>"error"!==e)),ZI=Object.values(YI).filter((e=>![YI.PLAYSINLINE].includes(e))),JI=Object.values(zI);var eC=class extends AI.HTMLElement{static get observedAttributes(){return[...ZI,...JI]}constructor(){super(),this.querySelectorAll(":scope > track").forEach((e=>{var t;null==(t=this.media)||t.append(e.cloneNode())}));new MutationObserver((e=>{for(let t of e)"childList"===t.type&&(t.removedNodes.forEach((e=>{var t,n;let i=null==(t=this.media)?void 0:t.querySelector(`track[src="${e.src}"]`);i&&(null==(n=this.media)||n.removeChild(i))})),t.addedNodes.forEach((e=>{var t;null==(t=this.media)||t.append(e.cloneNode())})))})).observe(this,{childList:!0,subtree:!0})}attributeChangedCallback(e,t,n){var i,r;switch(e){case zI.MUTED:return void(this.media&&(this.media.muted=null!=n,this.media.defaultMuted=null!=n));case zI.VOLUME:{let e=null!=(i=CI(n))?i:1;return void(this.media&&(this.media.volume=e))}case zI.PLAYBACKRATE:{let e=null!=(r=CI(n))?r:1;return void(this.media&&(this.media.playbackRate=e,this.media.defaultPlaybackRate=e))}}}play(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.play())?t:Promise.reject()}pause(){var e;null==(e=this.media)||e.pause()}requestCast(e){var t;return null==(t=this.media)?void 0:t.requestCast(e)}get media(){var e;return null==(e=this.shadowRoot)?void 0:e.querySelector("mux-video")}get audioTracks(){return this.media.audioTracks}get videoTracks(){return this.media.videoTracks}get audioRenditions(){return this.media.audioRenditions}get videoRenditions(){return this.media.videoRenditions}get paused(){var e,t;return null==(t=null==(e=this.media)?void 0:e.paused)||t}get duration(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.duration)?t:NaN}get ended(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.ended)&&t}get buffered(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.buffered)?t:XI}get seekable(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.seekable)?t:XI}get readyState(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.readyState)?t:0}get videoWidth(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.videoWidth)?t:0}get videoHeight(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.videoHeight)?t:0}get currentTime(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.currentTime)?t:0}set currentTime(e){this.media&&(this.media.currentTime=Number(e))}get volume(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.volume)?t:1}set volume(e){this.media&&(this.media.volume=Number(e))}get playbackRate(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.playbackRate)?t:1}set playbackRate(e){this.media&&(this.media.playbackRate=Number(e))}get defaultPlaybackRate(){var e;return null!=(e=CI(this.getAttribute(zI.PLAYBACKRATE)))?e:1}set defaultPlaybackRate(e){null!=e?this.setAttribute(zI.PLAYBACKRATE,`${e}`):this.removeAttribute(zI.PLAYBACKRATE)}get crossOrigin(){return tC(this,YI.CROSSORIGIN)}set crossOrigin(e){this.setAttribute(YI.CROSSORIGIN,`${e}`)}get autoplay(){return null!=tC(this,YI.AUTOPLAY)}set autoplay(e){e?this.setAttribute(YI.AUTOPLAY,"string"==typeof e?e:""):this.removeAttribute(YI.AUTOPLAY)}get loop(){return null!=tC(this,YI.LOOP)}set loop(e){e?this.setAttribute(YI.LOOP,""):this.removeAttribute(YI.LOOP)}get muted(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.muted)&&t}set muted(e){this.media&&(this.media.muted=Boolean(e))}get defaultMuted(){return null!=tC(this,YI.MUTED)}set defaultMuted(e){e?this.setAttribute(YI.MUTED,""):this.removeAttribute(YI.MUTED)}get playsInline(){return null!=tC(this,YI.PLAYSINLINE)}set playsInline(e){jI("playsInline is set to true by default and is not currently supported as a setter.")}get preload(){return this.media?this.media.preload:this.getAttribute("preload")}set preload(e){["","none","metadata","auto"].includes(e)?this.setAttribute(YI.PRELOAD,e):this.removeAttribute(YI.PRELOAD)}};function tC(e,t){return e.media?e.media.getAttribute(t):e.getAttribute(t)}var nC=eC,iC="\n  :host {\n    z-index: 100;\n    display: var(--media-dialog-display, flex);\n    justify-content: center;\n    align-items: center;\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 0;\n    left: 0;\n    box-sizing: border-box;\n    color: #fff;\n    line-height: 18px;\n    font-family: Arial, sans-serif;\n    padding: var(--media-dialog-backdrop-padding, 0);\n    background: var(--media-dialog-backdrop-background,\n      linear-gradient(to bottom, rgba(20, 20, 30, 0.7) 50%, rgba(20, 20, 30, 0.9))\n    );\n    /* Needs to use !important to prevent overwrite of media-chrome */\n    transition: var(--media-dialog-transition-open, visibility .2s, opacity .2s) !important;\n    transform: var(--media-dialog-transform-open, none) !important;\n    visibility: visible !important;\n    opacity: 1 !important;\n    pointer-events: auto !important;\n  }\n\n  :host(:not([open])) {\n    /* Needs to use !important to prevent overwrite of media-chrome */\n    transition: var(--media-dialog-transition-close, visibility .1s, opacity .1s) !important;\n    transform: var(--media-dialog-transform-close, none) !important;\n    visibility: hidden !important;\n    opacity: 0 !important;\n    pointer-events: none !important;\n  }\n\n  :focus-visible {\n    box-shadow: 0 0 0 2px rgba(27, 127, 204, 0.9);\n  }\n\n  .dialog {\n    position: relative;\n    box-sizing: border-box;\n    background: var(--media-dialog-background, none);\n    padding: var(--media-dialog-padding, 10px);\n    width: min(320px, 100%);\n    word-wrap: break-word;\n    max-height: 100%;\n    overflow: auto;\n    text-align: center;\n    line-height: 1.4;\n  }\n",rC=SI.createElement("template");rC.innerHTML=`\n  <style>\n    ${iC}\n  </style>\n\n  <div class="dialog">\n    <slot></slot>\n  </div>\n`;var sC=class extends AI.HTMLElement{constructor(){var e;super(),this.attachShadow({mode:"open"}),null==(e=this.shadowRoot)||e.appendChild(this.constructor.template.content.cloneNode(!0))}show(){this.setAttribute("open",""),this.dispatchEvent(new CustomEvent("open",{composed:!0,bubbles:!0})),aC(this)}close(){var e;!this.hasAttribute("open")||(this.removeAttribute("open"),this.dispatchEvent(new CustomEvent("close",{composed:!0,bubbles:!0})),(e=this)._previouslyFocusedElement instanceof HTMLElement&&e._previouslyFocusedElement.focus())}attributeChangedCallback(e,t,n){"open"===e&&t!==n&&(null!=n?this.show():this.close())}connectedCallback(){this.hasAttribute("role")||this.setAttribute("role","dialog"),this.hasAttribute("open")&&aC(this)}};function aC(e){let t=new CustomEvent("initfocus",{composed:!0,bubbles:!0,cancelable:!0});if(e.dispatchEvent(t),t.defaultPrevented)return;let n=e.querySelector("[autofocus]:not([disabled])");!n&&e.tabIndex>=0&&(n=e),n||(n=oC(e.shadowRoot)),e._previouslyFocusedElement=SI.activeElement,SI.activeElement instanceof HTMLElement&&SI.activeElement.blur(),e.addEventListener("transitionend",(()=>{n instanceof HTMLElement&&n.focus({preventScroll:!0})}),{once:!0})}function oC(e){let t=["button","input","keygen","select","textarea"].map((function(e){return e+":not([disabled])"}));t.push('[tabindex]:not([disabled]):not([tabindex=""])');let n=null==e?void 0:e.querySelector(t.join(", "));if(!n&&"attachShadow"in Element.prototype){let t=(null==e?void 0:e.querySelectorAll("*"))||[];for(let e=0;e<t.length&&!(t[e].tagName&&t[e].shadowRoot&&(n=oC(t[e].shadowRoot),n));e++);}return n}sC.styles=iC,sC.template=rC,sC.observedAttributes=["open"],AI.customElements.get("media-dialog")||(AI.customElements.define("media-dialog",sC),AI.MediaDialog=sC);var lC=sC,dC=SI.createElement("template");dC.innerHTML=`\n  <style>\n    ${lC.styles}\n\n    .close {\n      background: none;\n      color: inherit;\n      border: none;\n      padding: 0;\n      font: inherit;\n      cursor: pointer;\n      outline: inherit;\n      width: 28px;\n      height: 28px;\n      position: absolute;\n      top: 1rem;\n      right: 1rem;\n    }\n  </style>\n\n  <div class="dialog">\n    <slot></slot>\n  </div>\n\n  <slot name="close">\n    <button class="close" tabindex="0">\n      <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">\n        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />\n      </svg>\n    </button>\n  </slot>\n`;var cC=class extends lC{constructor(){var e,t;super(),null==(t=null==(e=this.shadowRoot)?void 0:e.querySelector(".close"))||t.addEventListener("click",(()=>{this.close()}))}};cC.template=dC,AI.customElements.get("mxp-dialog")||(AI.customElements.define("mxp-dialog",cC),AI.MxpDialog=cC);var uC=new WeakMap,hC=class{constructor(e,t){this.element=e,this.type=t,this.element.addEventListener(this.type,this);let n=uC.get(this.element);n&&n.set(this.type,this)}set(e){if("function"==typeof e)this.handleEvent=e.bind(this.element);else if("object"==typeof e&&"function"==typeof e.handleEvent)this.handleEvent=e.handleEvent.bind(e);else{this.element.removeEventListener(this.type,this);let e=uC.get(this.element);e&&e.delete(this.type)}}static for(e){uC.has(e.element)||uC.set(e.element,new Map);let t=e.attributeName.slice(2),n=uC.get(e.element);return n&&n.has(t)?n.get(t):new hC(e.element,t)}};function fC(e,t){(function(e,t){if(e instanceof PR&&t instanceof Element){let n=e.element;return n[e.attributeName]!==t&&(e.element.removeAttributeNS(e.attributeNamespace,e.attributeName),n[e.attributeName]=t),!0}return!1})(e,t)||function(e,t){if("boolean"==typeof t&&e instanceof PR){let n=e.attributeNamespace;return t!==e.element.hasAttributeNS(n,e.attributeName)&&(e.booleanValue=t),!0}return!1}(e,t)||function(e,t){return!!(e instanceof PR&&e.attributeName.startsWith("on"))&&(hC.for(e).set(t),e.element.removeAttributeNS(e.attributeNamespace,e.attributeName),!0)}(e,t)||function(e,t){return!1===t&&e instanceof OR&&(e.replace(""),!0)}(e,t)||function(e,t){return t instanceof vC&&e instanceof OR&&(t.renderInto(e),!0)}(e,t)||function(e,t){return t instanceof DocumentFragment&&e instanceof OR&&(t.childNodes.length&&e.replace(...t.childNodes),!0)}(e,t)||function(e,t){if(e instanceof PR){let n=e.attributeNamespace,i=e.element.getAttributeNS(n,e.attributeName);return String(t)!==i&&(e.value=String(t)),!0}e.value=String(t)}(e,t)}var pC=new Map,mC=new WeakMap,gC=new WeakMap,vC=class{constructor(e,t,n){this.strings=e,this.values=t,this.processor=n,this.stringsKey=this.strings.join("")}get template(){if(pC.has(this.stringsKey))return pC.get(this.stringsKey);{let e=SI.createElement("template"),t=this.strings.length-1;return e.innerHTML=this.strings.reduce(((e,n,i)=>e+n+(i<t?`{{ ${i} }}`:"")),""),pC.set(this.stringsKey,e),e}}renderInto(e){var t;let n=this.template;if(mC.get(e)!==n){mC.set(e,n);let t=new LR(n,this.values,this.processor);return gC.set(e,t),void(e instanceof OR?e.replace(...t.children):e.appendChild(t))}let i=gC.get(e);null==(t=null==i?void 0:i.update)||t.call(i,this.values)}},yC={processCallback(e,t,n){var i;if(n)for(let[e,r]of t)if(e in n){fC(r,null!=(i=n[e])?i:"")}}};function bC(e,...t){return new vC(e,t,yC)}var EC=e=>{var t,n,i,r,s,a,o,l,d,c,u,h,f,p,m,g,v,y,b,E,T,_,A,S,k,w,L,R,I,C,D,x,M,P;return bC`
  <media-theme
    template="${e.themeTemplate||!1}"
    defaultstreamtype="${null!=(t=e.defaultStreamType)&&t}"
    hotkeys="${(e=>{let t=e.hotKeys?`${e.hotKeys}`:"";return"live"===UI(e.streamType)&&(t+=" noarrowleft noarrowright"),t})(e)||!1}"
    nohotkeys="${e.noHotKeys||!e.hasSrc||e.isDialogOpen||!1}"
    noautoseektolive="${!(null==(n=e.streamType)||!n.includes(Wk.LIVE))&&0!==e.targetLiveWindow}"
    novolumepref="${e.novolumepref||!1}"
    disabled="${!e.hasSrc||e.isDialogOpen}"
    audio="${null!=(i=e.audio)&&i}"
    style="${null!=(r=function(e){let t="";return Object.entries(e).forEach((([e,n])=>{null!=n&&(t+=`${RI(e)}: ${n}; `)})),t?t.trim():void 0}({"--media-primary-color":e.primaryColor,"--media-secondary-color":e.secondaryColor}))&&r}"
    defaultsubtitles="${!e.defaultHiddenCaptions}"
    forwardseekoffset="${null!=(s=e.forwardSeekOffset)&&s}"
    backwardseekoffset="${null!=(a=e.backwardSeekOffset)&&a}"
    playbackrates="${null!=(o=e.playbackRates)&&o}"
    defaultshowremainingtime="${null!=(l=e.defaultShowRemainingTime)&&l}"
    hideduration="${null!=(d=e.hideDuration)&&d}"
    title="${null!=(c=e.title)&&c}"
    exportparts="top, center, bottom, layer, media-layer, poster-layer, vertical-layer, centered-layer, gesture-layer, controller, poster, live, play, button, seek-backward, seek-forward, mute, captions, airplay, pip, fullscreen, cast, playback-rate, volume, range, time, display"
  >
    <mux-video
      slot="media"
      target-live-window="${null!=(u=e.targetLiveWindow)&&u}"
      stream-type="${null!=(h=UI(e.streamType))&&h}"
      crossorigin="${null!=(f=e.crossOrigin)?f:""}"
      playsinline
      autoplay="${null!=(p=e.autoplay)&&p}"
      muted="${null!=(m=e.muted)&&m}"
      loop="${null!=(g=e.loop)&&g}"
      preload="${null!=(v=e.preload)&&v}"
      debug="${null!=(y=e.debug)&&y}"
      prefer-cmcd="${null!=(b=e.preferCmcd)&&b}"
      disable-cookies="${null!=(E=e.disableCookies)&&E}"
      prefer-playback="${null!=(T=e.preferPlayback)&&T}"
      start-time="${null!=e.startTime&&e.startTime}"
      beacon-collection-domain="${null!=(_=e.beaconCollectionDomain)&&_}"
      player-software-name="${null!=(A=e.playerSoftwareName)&&A}"
      player-software-version="${null!=(S=e.playerSoftwareVersion)&&S}"
      env-key="${null!=(k=e.envKey)&&k}"
      custom-domain="${null!=(w=e.customDomain)&&w}"
      src="${e.src?e.src:!!e.playbackId&&FI(e.playbackId,{maxResolution:e.maxResolution,domain:e.customDomain,token:e.tokens.playback})}"
      cast-src="${e.src?e.src:!!e.playbackId&&FI(e.playbackId,{maxResolution:e.maxResolution,domain:e.customDomain,token:e.tokens.playback})}"
      exportparts="video"
    >
      ${e.storyboard?bC`<track label="thumbnails" default kind="metadata" src="${e.storyboard}" />`:bC``}
    </mux-video>
    <slot name="poster" slot="poster">
      <media-poster-image
        part="poster"
        exportparts="poster, img"
        src="${""!==e.poster&&(null!=(L=e.poster)&&L)}"
        placeholder-src="${null!=(R=e.placeholder)&&R}"
      ></media-poster-image>
    </slot>
    <mxp-dialog
      no-auto-hide
      open="${null!=(I=e.isDialogOpen)&&I}"
      onclose="${e.onCloseErrorDialog}"
      oninitfocus="${e.onInitFocusDialog}"
    >
      ${null!=(C=e.dialog)&&C.title?bC`<h3>${e.dialog.title}</h3>`:bC``}
      <p>
        ${null==(D=e.dialog)?void 0:D.message}
        ${null!=(x=e.dialog)&&x.linkUrl?bC`<a
              href="${e.dialog.linkUrl}"
              target="_blank"
              rel="external noopener"
              aria-label="${null!=(M=e.dialog.linkText)?M:""} ${wI("(opens in a new window)")}"
              >${null!=(P=e.dialog.linkText)?P:e.dialog.linkUrl}</a
            >`:bC``}
      </p>
    </mxp-dialog>
  </media-theme>
`};function TC(e,t,n,i,r){var s,a,o;let l={},d={};switch(e.code){case $k.MEDIA_ERR_NETWORK:switch(l.title=wI("Network Error",r),l.message=e.message,null==(s=e.data)?void 0:s.response.code){case 412:l.title=wI("Video is not currently available",r),l.message=wI("The live stream or video file are not yet ready.",r),d.message=wI("This playback-id may belong to a live stream that is not currently active or an asset that is not ready.",r),d.file="412-not-playable.md";break;case 404:l.title=wI("Video does not exist",r),l.message="",d.message=wI("This playback-id does not exist. You may have used an Asset ID or an ID from a different resource.",r),d.file="404-not-found.md";break;case 403:{if(l.title=wI("Invalid playback URL",r),l.message=wI("The video URL or playback-token are formatted with incorrect or incomplete information.",r),d.message=wI("403 error trying to access this playback URL. If this is a signed URL, you might need to provide a playback-token.",r),d.file="missing-signed-tokens.md",!i)break;let{exp:e,aud:t,sub:s}=xI(i),a=s!==n,o="v"!==t,c={timeStyle:"medium",dateStyle:"medium"};if(Date.now()>1e3*e){l.title=wI("Video URL has expired",r),l.message=wI("The video’s secured playback-token has expired.",r),d.message=wI("The video’s secured playback-token has expired.",r),d.context=wI("Expired at: {expiredDate}. Current time: {currentDate}.",r).format({expiredDate:new Intl.DateTimeFormat(kI.code,c).format(1e3*e),currentDate:new Intl.DateTimeFormat(kI.code,c).format(Date.now())}),d.file="403-expired-token.md";break}if(a){l.title=wI("Video URL is formatted incorrectly",r),l.message=wI("The video’s playback ID does not match the one encoded in the playback-token.",r),d.message=wI("The video’s playback ID does not match the one encoded in the playback-token.",r),d.context=wI("Specified playback ID: {playbackId} and the playback ID encoded in the playback-token: {tokenPlaybackId}",r).format({playbackId:n,tokenPlaybackId:s}),d.file="403-playback-id-mismatch.md";break}if(o){l.title=wI("Video URL is formatted incorrectly",r),l.message=wI("The playback-token is formatted with incorrect information.",r),d.message=wI("The playback-token is formatted with incorrect information.",r),d.context=wI("The playback-token has an incorrect aud value: {tokenType}. aud value should be v.",r).format({tokenType:t}),d.file="403-incorrect-aud-value.md";break}d.message=wI("403 error trying to access this playback URL. If this is a signed playback ID, the token might not have been generated correctly.",r),d.file="403-malformatted-token.md";break}}break;case $k.MEDIA_ERR_DECODE:{let{message:t}=e;l={title:wI("Media Error",r),message:t},d.file="media-decode-error.md";break}case $k.MEDIA_ERR_SRC_NOT_SUPPORTED:{let s=null==(o=null==(a=e.data)?void 0:a.response)?void 0:o.code;if(s>=400&&s<500){e.code=$k.MEDIA_ERR_NETWORK,e.data={response:{code:s}},({dialog:l,devlog:d}=TC(e,t,n,i));break}l={title:wI("Source Not Supported",r),message:e.message},d.file="media-src-not-supported.md";break}default:l={title:wI("Error",r),message:e.message}}return t&&(l={title:wI("Your device appears to be offline",r),message:wI("Check your internet connection and try reloading this video.",r)}),{dialog:l,devlog:d}}var _C=SI.createElement("template");"innerHTML"in _C&&(_C.innerHTML='\x3c!-- prettier-ignore --\x3e\n<template id="media-theme-classic">\n  <style>\n    :host {\n      --_primary-color: var(--media-primary-color, white);\n      --_secondary-color: var(--media-secondary-color, rgb(0 0 0 / .75));\n\n      --media-icon-color: var(--_primary-color);\n      --media-range-thumb-background: var(--_primary-color);\n      --media-range-bar-color: var(--_primary-color);\n      --media-control-background: var(--_secondary-color);\n      --media-control-hover-background: var(--_secondary-color);\n      --media-time-range-buffered-color: rgba(255, 255, 255, 0.4);\n      --media-range-track-background:\n        linear-gradient(rgba(255, 255, 255, 0.5), rgba(255, 255, 255, 0.5)),\n        linear-gradient(rgba(20, 20, 30, 0.7), rgba(20, 20, 30, 0.7));\n      --media-preview-thumbnail-border: 0;\n      --media-preview-thumbnail-border-radius: 2px 2px 0 0;\n      --media-preview-time-border-radius: 0 0 2px 2px;\n      --media-preview-time-margin: 0 0 8px;\n      --media-preview-time-text-shadow: none;\n      --media-listbox-border-radius: 2px;\n      --media-listbox-transform-in: translateY(-8px) scale(1);\n      --media-listbox-transform-out: translateY(-6px) scale(.99);\n      --media-option-hover-background: rgba(255, 255, 255, 0.28);\n\n      color: var(--_primary-color);\n      display: inline-block;\n      width: 100%;\n      height: 100%;\n    }\n\n    :host([audio]) {\n      --media-preview-time-border-radius: 3px;\n      --media-preview-time-margin: 0 0 5px;\n      --media-preview-time-text-shadow: none;\n    }\n\n    :host([audio]) ::slotted([slot=\'media\']) {\n      height: 0px;\n    }\n\n    :host([audio]) media-loading-indicator {\n      display: none;\n    }\n\n    :host([audio]) media-controller {\n      background: transparent;\n    }\n\n    :host([audio]) media-controller::part(vertical-layer) {\n      background: transparent;\n    }\n\n    :host([audio]) media-control-bar {\n      width: 100%;\n    }\n\n    [disabled]:not(media-live-button),\n    [aria-disabled=\'true\']:not(media-live-button) {\n      opacity: 60%;\n      cursor: not-allowed;\n    }\n\n    /* 0.433s is the transition duration for VTT Regions.\n     * Borrowed here, so the captions don\'t move too fast. */\n    media-controller ::slotted([slot=\'media\']) {\n      --media-webkit-text-track-transition: transform 0.433s ease-out 0.3s;\n    }\n    media-controller:is([mediapaused],:not([userinactive])) ::slotted([slot=\'media\']) {\n      /* 42px is the height of the control bar and progress bar\n       * with an additional 5px as a buffer, to get 47px */\n      --media-webkit-text-track-transform: translateY(-47px);\n      --media-webkit-text-track-transition: transform 0.15s ease;\n    }\n\n    :host media-time-range {\n      color: var(--_primary-color);\n      --media-range-thumb-opacity: 0;\n    }\n\n    :host(:not([audio])) media-time-range {\n      --media-range-padding: 0;\n      background: transparent;\n      z-index: 10;\n      height: 10px;\n      bottom: -3px;\n      width: 100%;\n    }\n\n    media-control-bar {\n      --media-control-padding: 4px 3px;\n    }\n\n    [breakpointsm] media-control-bar {\n      --media-control-padding: 9px 5px;\n    }\n\n    [breakpointmd] media-control-bar {\n      --media-control-padding: 9px 7px;\n    }\n\n    media-control-bar :is([role=\'button\'], [role=\'switch\'], button) {\n      line-height: 0;\n    }\n\n    media-control-bar :is(media-text-display, media-time-display):first-child {\n      --media-control-padding: 9px 5px 9px 10px;\n    }\n\n    .spacer {\n      flex-grow: 1;\n      background-color: var(--media-control-background, rgba(20, 20, 30, 0.7));\n    }\n\n    /* Add a small space on the right to have the play button and\n     * fullscreen button aligned in relation to the progress bar. */\n    media-control-bar:not([slot])::after {\n      content: \'\';\n      width: 2px;\n      height: 100%;\n      background-color: var(--media-control-background, rgba(20, 20, 30, 0.7));\n    }\n\n    media-control-bar[slot=\'top-chrome\'] {\n      min-height: 42px;\n      pointer-events: none;\n    }\n\n    :host([title]) media-control-bar[slot=\'top-chrome\']::before {\n      content: \'\';\n      position: absolute;\n      width: 100%;\n      padding-bottom: min(160px, 25%);\n      background: linear-gradient(rgb(0 0 0 / 0.4), transparent);\n    }\n\n    media-control-bar[slot=\'top-chrome\'] > * {\n      --media-control-background: transparent;\n      --media-control-hover-background: transparent;\n      position: relative;\n    }\n\n    media-controller::part(vertical-layer) {\n      transition: background-color 1s;\n    }\n\n    media-controller:is([mediapaused], :not([userinactive]))::part(vertical-layer) {\n      background-color: var(--controls-backdrop-color, var(--controls, transparent));\n      transition: background-color 0.25s;\n    }\n\n    .center-controls {\n      --media-button-icon-width: 100%;\n      --media-button-icon-height: auto;\n      pointer-events: none;\n      width: 100%;\n      display: flex;\n      flex-flow: row;\n      align-items: center;\n      justify-content: center;\n      filter: drop-shadow(0 0 2px rgb(0 0 0 / 0.25)) drop-shadow(0 0 6px rgb(0 0 0 / 0.25));\n      paint-order: stroke;\n      stroke: rgba(102, 102, 102, 1);\n      stroke-width: 0.3px;\n      text-shadow: 0 0 2px rgb(0 0 0 / 0.25), 0 0 6px rgb(0 0 0 / 0.25);\n    }\n\n    .center-controls media-play-button {\n      --media-control-background: transparent;\n      --media-control-hover-background: transparent;\n      padding: 0;\n      width: max(43px, min(10%, 55px));\n    }\n\n    .center-controls media-seek-backward-button,\n    .center-controls media-seek-forward-button {\n      --media-control-background: transparent;\n      --media-control-hover-background: transparent;\n      padding: 0;\n      margin: 0 2%;\n      width: max(33px, min(8%, 40px));\n    }\n\n    media-control-bar:not([slot]) media-seek-backward-button {\n      padding-right: 5px;\n    }\n\n    media-control-bar:not([slot]) media-seek-forward-button {\n      padding-left: 5px;\n    }\n\n    media-loading-indicator {\n      --media-loading-icon-width: 100%;\n      --media-button-icon-height: auto;\n      display: var(--media-control-display, var(--media-loading-indicator-display, flex));\n      pointer-events: none;\n      position: absolute;\n      width: min(15%, 150px);\n      flex-flow: row;\n      align-items: center;\n      justify-content: center;\n    }\n\n    /* Intentionally don\'t target the div for transition but the children\n     of the div. Prevents messing with media-chrome\'s autohide feature. */\n    media-loading-indicator + div * {\n      transition: opacity 0.15s;\n      opacity: 1;\n    }\n\n    media-loading-indicator[medialoading]:not([mediapaused]) ~ div > * {\n      opacity: 0;\n      transition-delay: 400ms;\n    }\n\n    media-volume-range {\n      width: min(100%, 100px);\n    }\n\n    media-time-display {\n      white-space: nowrap;\n    }\n\n    :is(media-time-display, media-text-display, media-playback-rate-button[role=\'button\']) {\n      color: inherit;\n      line-height: 24px;\n    }\n\n    :is(.title-display, media-live-button) {\n      color: inherit;\n      font-size: 16px;\n      text-shadow: 0 0 2px rgb(0 0 0 / 0.6);\n    }\n\n    :host([audio]) .title-display {\n      flex-grow: 1;\n      font-size: 21px;\n    }\n  </style>\n\n  <template partial="TitleDisplay">\n    <template if="title">\n      <media-text-display part="top title display" class="title-display">\n        {{title}}\n      </media-text-display>\n    </template>\n  </template>\n\n  <template partial="PlayButton">\n    <media-play-button\n      part="{{section ?? \'bottom\'}} play button"\n      disabled="{{disabled}}"\n      aria-disabled="{{disabled}}"\n    >\n      <svg aria-hidden="true" viewBox="0 0 24 24" slot="play">\n        <path d="m6.73 20.93 14.05-8.54a.46.46 0 0 0 0-.78L6.73 3.07a.48.48 0 0 0-.73.39v17.07a.48.48 0 0 0 .73.4Z" />\n      </svg>\n      <svg aria-hidden="true" viewBox="0 0 24 24" slot="pause">\n        <path\n          d="M6 19.5a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-15a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v15ZM14.5 4a.5.5 0 0 0-.5.5v15a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-15a.5.5 0 0 0-.5-.5h-3Z"\n        />\n      </svg>\n    </media-play-button>\n  </template>\n\n  <template partial="SeekBackwardButton">\n    <media-seek-backward-button\n      seekoffset="{{backwardseekoffset}}"\n      part="{{section ?? \'bottom\'}} seek-backward button"\n      disabled="{{disabled}}"\n      aria-disabled="{{disabled}}"\n    >\n      <svg aria-hidden="true" viewBox="0 0 22 24" slot="backward">\n        <path d="M11 6V3L5.37 7 11 10.94V8a5.54 5.54 0 0 1 1.9 10.48v2.12A7.5 7.5 0 0 0 11 6Z" />\n        <text class="value" transform="translate(2.5 21)" style="font-size: 8px; font-family: \'ArialMT\', \'Arial\'">\n          {{backwardseekoffset}}\n        </text>\n      </svg>\n    </media-seek-backward-button>\n  </template>\n\n  <template partial="SeekForwardButton">\n    <media-seek-forward-button\n      seekoffset="{{forwardseekoffset}}"\n      part="{{section ?? \'bottom\'}} seek-forward button"\n      disabled="{{disabled}}"\n      aria-disabled="{{disabled}}"\n    >\n      <svg aria-hidden="true" viewBox="0 0 22 24" slot="forward">\n        <path d="M11 6V3l5.61 4L11 10.94V8a5.54 5.54 0 0 0-1.9 10.48v2.12A7.5 7.5 0 0 1 11 6Z" />\n        <text class="value" transform="translate(10 21)" style="font-size: 8px; font-family: \'ArialMT\', \'Arial\'">\n          {{forwardseekoffset}}\n        </text>\n      </svg>\n    </media-seek-forward-button>\n  </template>\n\n  <template partial="MuteButton">\n    <media-mute-button part="bottom mute button" disabled="{{disabled}}" aria-disabled="{{disabled}}">\n      <svg aria-hidden="true" viewBox="0 0 24 24" slot="high">\n        <path\n          d="m11.14 4.86-4 4a.49.49 0 0 1-.35.14H3.25a.25.25 0 0 0-.25.25v5.5a.25.25 0 0 0 .25.25h3.54a.49.49 0 0 1 .36.15l4 4a.5.5 0 0 0 .85-.36V5.21a.5.5 0 0 0-.86-.35Zm2.74-1.56v1.52A7.52 7.52 0 0 1 19.47 12a7.52 7.52 0 0 1-5.59 7.18v1.52A9 9 0 0 0 21 12a9 9 0 0 0-7.12-8.7Zm3.56 8.7a5.49 5.49 0 0 0-3.56-5.1v1.66a3.93 3.93 0 0 1 0 6.88v1.66a5.49 5.49 0 0 0 3.56-5.1Z"\n        />\n      </svg>\n      <svg aria-hidden="true" viewBox="0 0 24 24" slot="low">\n        <path\n          d="m11.14 4.853-4 4a.49.49 0 0 1-.35.14H3.25a.25.25 0 0 0-.25.25v5.5a.25.25 0 0 0 .25.25h3.54a.49.49 0 0 1 .36.15l4 4a.5.5 0 0 0 .85-.36V5.203a.5.5 0 0 0-.86-.35Zm6.3 7.14a5.49 5.49 0 0 0-3.56-5.1v1.66a3.93 3.93 0 0 1 0 6.88v1.66a5.49 5.49 0 0 0 3.56-5.1Z"\n        />\n      </svg>\n      <svg aria-hidden="true" viewBox="0 0 24 24" slot="medium">\n        <path\n          d="m11.14 4.853-4 4a.49.49 0 0 1-.35.14H3.25a.25.25 0 0 0-.25.25v5.5a.25.25 0 0 0 .25.25h3.54a.49.49 0 0 1 .36.15l4 4a.5.5 0 0 0 .85-.36V5.203a.5.5 0 0 0-.86-.35Zm6.3 7.14a5.49 5.49 0 0 0-3.56-5.1v1.66a3.93 3.93 0 0 1 0 6.88v1.66a5.49 5.49 0 0 0 3.56-5.1Z"\n        />\n      </svg>\n      <svg aria-hidden="true" viewBox="0 0 24 24" slot="off">\n        <path\n          d="m3 4.05 4.48 4.47-.33.33a.49.49 0 0 1-.36.15H3.25a.25.25 0 0 0-.25.25v5.5a.25.25 0 0 0 .25.25h3.54a.49.49 0 0 1 .36.15l4 4a.48.48 0 0 0 .36.15.5.5 0 0 0 .5-.5v-5.75l4.67 4.66a7.71 7.71 0 0 1-2.79 1.47v1.52a9.32 9.32 0 0 0 3.87-1.91L20 21l1-1L4.06 3 3 4.05Zm5.36 5.36 2.39 2.39V17L8 14.26a1.74 1.74 0 0 0-1.24-.51H4.25v-3.5h2.54A1.74 1.74 0 0 0 8 9.74l.36-.33ZM19.47 12a7.19 7.19 0 0 1-.89 3.47l1.11 1.1A8.64 8.64 0 0 0 21 12a9 9 0 0 0-7.12-8.7v1.52A7.52 7.52 0 0 1 19.47 12ZM12 8.88V5.21a.5.5 0 0 0-.5-.5.48.48 0 0 0-.36.15L9.56 6.44 12 8.88ZM15.91 12a4.284 4.284 0 0 1-.07.72l1.22 1.22a5.2 5.2 0 0 0 .38-1.94 5.49 5.49 0 0 0-3.56-5.1v1.66A4 4 0 0 1 15.91 12Z"\n        />\n      </svg>\n    </media-mute-button>\n  </template>\n\n  <template partial="RenditionSelect">\n    <media-rendition-selectmenu part="bottom rendition selectmenu" disabled="{{disabled}}" aria-disabled="{{disabled}}">\n      <media-rendition-button slot="button" part="bottom rendition button">\n        <svg aria-hidden="true" slot="icon" viewBox="0 0 18 24">\n          <path d="M2.25 14.5a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm6.75 0a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm6.75 0a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z"/>\n        </svg>\n      </media-rendition-button>\n      <media-rendition-listbox slot="listbox" part="bottom rendition listbox">\n        <div slot="header">Quality</div>\n      </media-rendition-listbox>\n    </media-rendition-selectmenu>\n  </template>\n\n  <template partial="AudioTrackSelect">\n    <media-audio-track-selectmenu part="bottom audio-track selectmenu" disabled="{{disabled}}" aria-disabled="{{disabled}}">\n      <media-audio-track-button slot="button" part="bottom audio-track button">\n        <svg aria-hidden="true" slot="icon" viewBox="0 0 24 24">\n          <path d="M12 20.5a8.5 8.5 0 1 0 0-17 8.5 8.5 0 0 0 0 17Zm0 1.5C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10Z"/>\n          <path d="M7.25 9.75a.75.75 0 0 1 .75.75v3a.75.75 0 0 1-1.5 0v-3a.75.75 0 0 1 .75-.75Zm3-3a.75.75 0 0 1 .75.75v9a.75.75 0 0 1-1.5 0v-9a.75.75 0 0 1 .75-.75Zm3 2a.75.75 0 0 1 .75.75v5a.75.75 0 0 1-1.5 0v-5a.75.75 0 0 1 .75-.75Zm3-1a.75.75 0 0 1 .75.75v7a.75.75 0 0 1-1.5 0v-7a.75.75 0 0 1 .75-.75Z"/>\n        </svg>\n      </media-audio-track-button>\n      <media-audio-track-listbox slot="listbox" part="bottom audio-track listbox">\n        <div slot="header">Audio</div>\n      </media-audio-track-listbox>\n    </media-audio-track-selectmenu>\n  </template>\n\n  <template partial="CaptionsSelect">\n    <media-captions-selectmenu part="bottom captions selectmenu" disabled="{{disabled}}" aria-disabled="{{disabled}}">\n      <media-captions-button slot="button" part="bottom captions button">\n        <svg aria-hidden="true" viewBox="0 0 26 24" slot="on">\n          <path d="M22.832 5.68a2.58 2.58 0 0 0-2.3-2.5c-3.62-.24-11.44-.24-15.06 0a2.58 2.58 0 0 0-2.3 2.5c-.23 4.21-.23 8.43 0 12.64a2.58 2.58 0 0 0 2.3 2.5c3.62.24 11.44.24 15.06 0a2.58 2.58 0 0 0 2.3-2.5c.23-4.21.23-8.43 0-12.64Zm-11.41 10.1a3.63 3.63 0 0 1-1.51.32 4.76 4.76 0 0 1-1.63-.27 4 4 0 0 1-1.28-.83 3.67 3.67 0 0 1-.84-1.26 4.23 4.23 0 0 1-.3-1.63 4.28 4.28 0 0 1 .3-1.64 3.53 3.53 0 0 1 .84-1.21 3.89 3.89 0 0 1 1.29-.8 4.76 4.76 0 0 1 1.63-.27 4.06 4.06 0 0 1 1.35.24c.225.091.44.205.64.34a2.7 2.7 0 0 1 .55.52l-1.27 1a1.79 1.79 0 0 0-.6-.46 2 2 0 0 0-.83-.16 2 2 0 0 0-1.56.69 2.35 2.35 0 0 0-.46.77 2.78 2.78 0 0 0-.16 1c-.009.34.046.68.16 1 .104.283.26.545.46.77.188.21.415.38.67.5a2 2 0 0 0 .84.18 1.87 1.87 0 0 0 .9-.21 1.78 1.78 0 0 0 .65-.6l1.38 1a2.88 2.88 0 0 1-1.22 1.01Zm7.52 0a3.63 3.63 0 0 1-1.51.32 4.76 4.76 0 0 1-1.63-.27 3.89 3.89 0 0 1-1.28-.83 3.55 3.55 0 0 1-.85-1.26 4.23 4.23 0 0 1-.3-1.63 4.28 4.28 0 0 1 .3-1.64 3.43 3.43 0 0 1 .85-1.25 3.75 3.75 0 0 1 1.28-.8 4.76 4.76 0 0 1 1.63-.27 4 4 0 0 1 1.35.24c.225.091.44.205.64.34.21.144.395.32.55.52l-1.27 1a1.79 1.79 0 0 0-.6-.46 2 2 0 0 0-.83-.16 2 2 0 0 0-1.56.69 2.352 2.352 0 0 0-.46.77 3.01 3.01 0 0 0-.16 1c-.003.34.05.678.16 1 .108.282.263.542.46.77.188.21.416.38.67.5a2 2 0 0 0 .84.18 1.87 1.87 0 0 0 .9-.21 1.78 1.78 0 0 0 .65-.6l1.38 1a2.82 2.82 0 0 1-1.21 1.05Z"/>\n        </svg>\n        <svg aria-hidden="true" viewBox="0 0 26 24" slot="off">\n          <path d="M22.832 5.68a2.58 2.58 0 0 0-2.3-2.5c-1.81-.12-4.67-.18-7.53-.18-2.86 0-5.72.06-7.53.18a2.58 2.58 0 0 0-2.3 2.5c-.23 4.21-.23 8.43 0 12.64a2.58 2.58 0 0 0 2.3 2.5c1.81.12 4.67.18 7.53.18 2.86 0 5.72-.06 7.53-.18a2.58 2.58 0 0 0 2.3-2.5c.23-4.21.23-8.43 0-12.64Zm-1.49 12.53a1.11 1.11 0 0 1-.91 1.11c-1.67.11-4.45.18-7.43.18-2.98 0-5.76-.07-7.43-.18a1.11 1.11 0 0 1-.91-1.11c-.21-4.137-.21-8.283 0-12.42a1.11 1.11 0 0 1 .91-1.11c1.67-.11 4.43-.18 7.43-.18s5.76.07 7.43.18a1.11 1.11 0 0 1 .91 1.11c.21 4.137.21 8.283 0 12.42ZM10.843 14a1.55 1.55 0 0 1-.76.18 1.57 1.57 0 0 1-.71-.18 1.69 1.69 0 0 1-.57-.42 2.099 2.099 0 0 1-.38-.58 2.47 2.47 0 0 1 0-1.64 2 2 0 0 1 .39-.66 1.73 1.73 0 0 1 .58-.42c.23-.103.479-.158.73-.16.241-.004.48.044.7.14.199.088.373.222.51.39l1.08-.89a2.179 2.179 0 0 0-.47-.44 2.81 2.81 0 0 0-.54-.32 2.91 2.91 0 0 0-.58-.15 2.71 2.71 0 0 0-.56 0 4.08 4.08 0 0 0-1.38.15 3.27 3.27 0 0 0-1.09.67 3.14 3.14 0 0 0-.71 1.06 3.62 3.62 0 0 0-.26 1.39 3.57 3.57 0 0 0 .26 1.38 3 3 0 0 0 .71 1.06c.316.293.687.52 1.09.67.443.16.91.238 1.38.23a3.2 3.2 0 0 0 1.28-.27c.401-.183.747-.47 1-.83l-1.17-.88a1.42 1.42 0 0 1-.53.52Zm6.62 0a1.58 1.58 0 0 1-.76.18 1.54 1.54 0 0 1-.7-.18 1.69 1.69 0 0 1-.57-.42 2.12 2.12 0 0 1-.43-.58 2.29 2.29 0 0 1 .39-2.3 1.84 1.84 0 0 1 1.32-.58c.241-.003.48.045.7.14.199.088.373.222.51.39l1.08-.92a2.43 2.43 0 0 0-.47-.44 3.22 3.22 0 0 0-.53-.29 2.999 2.999 0 0 0-.57-.15 2.87 2.87 0 0 0-.57 0 4.06 4.06 0 0 0-1.36.15 3.17 3.17 0 0 0-1.09.67 3 3 0 0 0-.72 1.06 3.62 3.62 0 0 0-.25 1.39 3.57 3.57 0 0 0 .25 1.38c.16.402.405.764.72 1.06a3.17 3.17 0 0 0 1.09.67c.44.16.904.237 1.37.23.441 0 .877-.092 1.28-.27a2.45 2.45 0 0 0 1-.83l-1.15-.85a1.49 1.49 0 0 1-.54.49Z"/>\n        </svg>\n      </media-captions-button>\n      <media-captions-listbox slot="listbox" part="bottom captions listbox"></media-captions-listbox>\n    </media-captions-selectmenu>\n  </template>\n\n  <template partial="AirplayButton">\n    <media-airplay-button part="bottom airplay button" disabled="{{disabled}}" aria-disabled="{{disabled}}">\n      <svg aria-hidden="true" viewBox="0 0 26 24" slot="airplay">\n        <path\n          d="M13.19 14.22a.25.25 0 0 0-.38 0l-5.46 6.37a.25.25 0 0 0 .19.41h10.92a.25.25 0 0 0 .19-.41l-5.46-6.37Z"\n        />\n        <path\n          d="M22 3H4a1 1 0 0 0-1 1v13a1 1 0 0 0 1 1h2.94L8 16.75H4.25V4.25h17.5v12.5H18L19.06 18H22a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1Z"\n        />\n      </svg>\n    </media-airplay-button>\n  </template>\n\n  <template partial="CastButton">\n    <media-cast-button part="bottom cast button" disabled="{{disabled}}" aria-disabled="{{disabled}}">\n      <svg aria-hidden="true" viewBox="0 0 26 24" slot="enter">\n        <path d="M3 15.5V17c2.206 0 4 1.794 4 4h1.5A5.5 5.5 0 0 0 3 15.5Zm0 3V21h2.5A2.5 2.5 0 0 0 3 18.5Z" />\n        <path d="M3 12.5V14c3.86 0 7 3.14 7 7h1.5A8.5 8.5 0 0 0 3 12.5Z" />\n        <path\n          d="M22 3H4a1 1 0 0 0-1 1v6.984c.424 0 .84.035 1.25.086V4.25h17.5v15.5h-8.82c.051.41.086.826.086 1.25H22a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1Z"\n        />\n      </svg>\n      <svg aria-hidden="true" viewBox="0 0 26 24" slot="exit">\n        <path d="M3 15.5V17c2.206 0 4 1.794 4 4h1.5A5.5 5.5 0 0 0 3 15.5Zm0 3V21h2.5A2.5 2.5 0 0 0 3 18.5Z" />\n        <path d="M3 12.5V14c3.86 0 7 3.14 7 7h1.5A8.5 8.5 0 0 0 3 12.5Z" />\n        <path\n          d="M22 3H4a1 1 0 0 0-1 1v6.984c.424 0 .84.035 1.25.086V4.25h17.5v15.5h-8.82c.051.41.086.826.086 1.25H22a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1Z"\n        />\n        <path d="M20.5 5.5h-15v5.811c3.52.906 6.283 3.67 7.189 7.19H20.5V5.5Z" />\n      </svg>\n    </media-cast-button>\n  </template>\n\n  <template partial="PipButton">\n    <media-pip-button part="bottom pip button" disabled="{{disabled}}" aria-disabled="{{disabled}}">\n      <svg aria-hidden="true" viewBox="0 0 26 24" slot="enter">\n        <path\n          d="M22 3H4a1 1 0 0 0-1 1v16a1 1 0 0 0 1 1h6.75v-1.25h-6.5V4.25h17.5v6.5H23V4a1 1 0 0 0-1-1Zm0 10h-8a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-6a1 1 0 0 0-1-1Zm-.5 6.5h-7v-5h7v5Z"\n        />\n      </svg>\n      <svg aria-hidden="true" viewBox="0 0 26 24" slot="exit">\n        <path\n          d="M22 3H4a1 1 0 0 0-1 1v16a1 1 0 0 0 1 1h6.75v-1.25h-6.5V4.25h17.5v6.5H23V4a1 1 0 0 0-1-1Zm0 10h-8a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-6a1 1 0 0 0-1-1Zm-.5 6.5h-7v-5h7v5Z"\n        />\n      </svg>\n    </media-pip-button>\n  </template>\n\n  <template partial="FullscreenButton">\n    <media-fullscreen-button part="bottom fullscreen button" disabled="{{disabled}}" aria-disabled="{{disabled}}">\n      <svg aria-hidden="true" viewBox="0 0 24 24" slot="enter">\n        <path\n          d="M20.25 14.5a.76.76 0 0 0-.75.75v4.25h-4.25a.75.75 0 1 0 0 1.5h5a.76.76 0 0 0 .75-.75v-5a.76.76 0 0 0-.75-.75Zm0-11.5h-5a.76.76 0 0 0-.75.75.76.76 0 0 0 .75.75h4.25v4.25a.75.75 0 1 0 1.5 0v-5a.76.76 0 0 0-.75-.75ZM8.75 19.5H4.5v-4.25a.76.76 0 0 0-.75-.75.76.76 0 0 0-.75.75v5a.76.76 0 0 0 .75.75h5a.75.75 0 1 0 0-1.5Zm0-16.5h-5a.76.76 0 0 0-.75.75v5a.76.76 0 0 0 .75.75.76.76 0 0 0 .75-.75V4.5h4.25a.76.76 0 0 0 .75-.75.76.76 0 0 0-.75-.75Z"\n        />\n      </svg>\n      <svg aria-hidden="true" viewBox="0 0 24 24" slot="exit">\n        <path\n          d="M20.25 14.5h-5a.76.76 0 0 0-.75.75v5a.75.75 0 1 0 1.5 0V16h4.25a.75.75 0 1 0 0-1.5Zm-5-5h5a.75.75 0 1 0 0-1.5H16V3.75a.75.75 0 1 0-1.5 0v5a.76.76 0 0 0 .75.75Zm-6.5 5h-5a.75.75 0 1 0 0 1.5H8v4.25a.75.75 0 1 0 1.5 0v-5a.76.76 0 0 0-.75-.75Zm0-11.5a.76.76 0 0 0-.75.75V8H3.75a.75.75 0 0 0 0 1.5h5a.76.76 0 0 0 .75-.75v-5A.76.76 0 0 0 8.75 3Z"\n        />\n      </svg>\n    </media-fullscreen-button>\n  </template>\n\n  <template partial="LiveButton">\n    <media-live-button\n      part="{{section ?? \'top\'}} live button"\n      disabled="{{disabled}}"\n      aria-disabled="{{disabled}}"\n    ></media-live-button>\n  </template>\n\n  <template partial="PlaybackRateButton">\n    <media-playback-rate-button\n      rates="{{playbackrates}}"\n      part="bottom playback-rate button"\n      disabled="{{disabled}}"\n      aria-disabled="{{disabled}}"\n    ></media-playback-rate-button>\n  </template>\n\n  <template partial="VolumeRange">\n    <media-volume-range\n      part="bottom volume range"\n      disabled="{{disabled}}"\n      aria-disabled="{{disabled}}"\n    ></media-volume-range>\n  </template>\n\n  <template partial="TimeDisplay">\n    <media-time-display\n      remaining="{{defaultshowremainingtime}}"\n      showduration="{{!hideduration}}"\n      part="bottom time display"\n      disabled="{{disabled}}"\n      aria-disabled="{{disabled}}"\n    ></media-time-display>\n  </template>\n\n  <template partial="TimeRange">\n    <media-time-range\n      part="bottom time range"\n      disabled="{{disabled}}"\n      aria-disabled="{{disabled}}"\n    ></media-time-range>\n  </template>\n\n  <media-controller\n    part="controller"\n    defaultstreamtype="{{defaultstreamtype ?? \'on-demand\'}}"\n    breakpoints="sm:300 md:700"\n    gesturesdisabled="{{disabled}}"\n    hotkeys="{{hotkeys}}"\n    nohotkeys="{{nohotkeys}}"\n    novolumepref="{{novolumepref}}"\n    audio="{{audio}}"\n    noautoseektolive="{{noautoseektolive}}"\n    defaultsubtitles="{{defaultsubtitles}}"\n    exportparts="layer, media-layer, poster-layer, vertical-layer, centered-layer, gesture-layer"\n  >\n    <slot name="media" slot="media"></slot>\n    <slot name="poster" slot="poster"></slot>\n    <media-loading-indicator slot="centered-chrome" noautohide></media-loading-indicator>\n\n    <template if="audio">\n\n      <template if="streamtype == \'on-demand\'">\n        <template if="title">\n          <media-control-bar>{{>TitleDisplay}}</media-control-bar>\n        </template>\n        <media-control-bar>\n          {{>PlayButton}}\n          {{>SeekBackwardButton}}\n          {{>SeekForwardButton}}\n          {{>TimeDisplay}}\n          {{>TimeRange}}\n          {{>MuteButton}}\n          {{>VolumeRange}}\n          {{>PlaybackRateButton}}\n          {{>AudioTrackSelect}}\n          {{>AirplayButton}}\n          {{>CastButton}}\n        </media-control-bar>\n      </template>\n\n      <template if="streamtype == \'live\'">\n\n        <template if="targetlivewindow > 0">\n          <template if="title">\n            <media-control-bar>{{>TitleDisplay}}</media-control-bar>\n          </template>\n          <media-control-bar>\n            {{>PlayButton}}\n            {{>LiveButton section="bottom"}}\n            {{>SeekBackwardButton}}\n            {{>SeekForwardButton}}\n            {{>TimeDisplay}}\n            {{>TimeRange}}\n            {{>MuteButton}}\n            {{>VolumeRange}}\n            {{>PlaybackRateButton}}\n            {{>AudioTrackSelect}}\n            {{>AirplayButton}}\n            {{>CastButton}}\n          </media-control-bar>\n        </template>\n\n        <template if="!targetlivewindow">\n          <template if="title">\n            <media-control-bar>{{>TitleDisplay}}</media-control-bar>\n          </template>\n          <media-control-bar>\n            {{>PlayButton}}\n            {{>LiveButton section="bottom"}}\n            {{>MuteButton}}\n            {{>VolumeRange}}\n            <div class="spacer"></div>\n            {{>AudioTrackSelect}}\n            {{>AirplayButton}}\n            {{>CastButton}}\n          </media-control-bar>\n        </template>\n\n      </template>\n    </template>\n\n    <template if="!audio">\n\n      <template if="streamtype == \'on-demand\'">\n\n        <template if="!breakpointsm">\n          {{>TimeRange}}\n          <media-control-bar>\n            {{>PlayButton}}\n            {{>MuteButton}}\n            <div class="spacer"></div>\n            {{>CaptionsSelect}}\n            {{>FullscreenButton}}\n          </media-control-bar>\n        </template>\n\n        <template if="breakpointsm">\n          <template if="!breakpointmd">\n            <media-control-bar slot="top-chrome">\n              {{>TitleDisplay}}\n            </media-control-bar>\n            <div slot="centered-chrome" class="center-controls">\n              {{>SeekBackwardButton section="center"}}\n              {{>PlayButton section="center"}}\n              {{>SeekForwardButton section="center"}}\n            </div>\n            {{>TimeRange}}\n            <media-control-bar>\n              {{>PlayButton}}\n              {{>TimeDisplay}}\n              {{>MuteButton}}\n              {{>VolumeRange}}\n              <div class="spacer"></div>\n              {{>RenditionSelect}}\n              {{>PlaybackRateButton}}\n              {{>AudioTrackSelect}}\n              {{>CaptionsSelect}}\n              {{>AirplayButton}}\n              {{>CastButton}}\n              {{>PipButton}}\n              {{>FullscreenButton}}\n            </media-control-bar>\n          </template>\n        </template>\n\n        <template if="breakpointmd">\n          <media-control-bar slot="top-chrome">\n            {{>TitleDisplay}}\n          </media-control-bar>\n          <div slot="centered-chrome" class="center-controls">\n            {{>PlayButton section="center"}}\n          </div>\n          {{>TimeRange}}\n          <media-control-bar>\n            {{>PlayButton}}\n            {{>SeekBackwardButton}}\n            {{>SeekForwardButton}}\n            {{>TimeDisplay}}\n            {{>MuteButton}}\n            {{>VolumeRange}}\n            <div class="spacer"></div>\n            {{>RenditionSelect}}\n            {{>PlaybackRateButton}}\n            {{>AudioTrackSelect}}\n            {{>CaptionsSelect}}\n            {{>AirplayButton}}\n            {{>CastButton}}\n            {{>PipButton}}\n            {{>FullscreenButton}}\n          </media-control-bar>\n        </template>\n\n      </template>\n\n      <template if="streamtype == \'live\'">\n\n        <template if="!targetlivewindow">\n\n          <template if="!breakpointsm">\n            <media-control-bar slot="top-chrome">\n              {{>LiveButton}}\n            </media-control-bar>\n            <media-control-bar>\n              {{>PlayButton}}\n              {{>MuteButton}}\n              <div class="spacer"></div>\n              {{>CaptionsSelect}}\n              {{>FullscreenButton}}\n            </media-control-bar>\n          </template>\n\n          <template if="breakpointsm">\n            <template if="!breakpointmd">\n              <media-control-bar slot="top-chrome">\n                {{>LiveButton}}\n                {{>TitleDisplay}}\n              </media-control-bar>\n              <div slot="centered-chrome" class="center-controls">\n                {{>PlayButton section="center"}}\n              </div>\n              <media-control-bar>\n                {{>PlayButton}}\n                {{>MuteButton}}\n                {{>VolumeRange}}\n                <div class="spacer"></div>\n                {{>RenditionSelect}}\n                {{>AudioTrackSelect}}\n                {{>CaptionsSelect}}\n                {{>AirplayButton}}\n                {{>CastButton}}\n                {{>PipButton}}\n                {{>FullscreenButton}}\n              </media-control-bar>\n            </template>\n          </template>\n\n          <template if="breakpointmd">\n            <media-control-bar slot="top-chrome">\n              {{>LiveButton}}\n              {{>TitleDisplay}}\n            </media-control-bar>\n            <div slot="centered-chrome" class="center-controls">\n              {{>PlayButton section="center"}}\n            </div>\n            <media-control-bar>\n              {{>PlayButton}}\n              {{>MuteButton}}\n              {{>VolumeRange}}\n              <div class="spacer"></div>\n              {{>RenditionSelect}}\n              {{>AudioTrackSelect}}\n              {{>CaptionsSelect}}\n              {{>AirplayButton}}\n              {{>CastButton}}\n              {{>PipButton}}\n              {{>FullscreenButton}}\n            </media-control-bar>\n          </template>\n        </template>\n\n        <template if="targetlivewindow > 0">\n\n          <template if="!breakpointsm">\n            <media-control-bar slot="top-chrome">\n              {{>LiveButton}}\n            </media-control-bar>\n            {{>TimeRange}}\n            <media-control-bar>\n              {{>PlayButton}}\n              {{>MuteButton}}\n              <div class="spacer"></div>\n              {{>CaptionsSelect}}\n              {{>FullscreenButton}}\n            </media-control-bar>\n          </template>\n\n          <template if="breakpointsm">\n            <template if="!breakpointmd">\n              <media-control-bar slot="top-chrome">\n                {{>LiveButton}}\n                {{>TitleDisplay}}\n              </media-control-bar>\n              <div slot="centered-chrome" class="center-controls">\n                {{>SeekBackwardButton section="center"}}\n                {{>PlayButton section="center"}}\n                {{>SeekForwardButton section="center"}}\n              </div>\n              {{>TimeRange}}\n              <media-control-bar>\n                {{>PlayButton}}\n                {{>MuteButton}}\n                {{>VolumeRange}}\n                <div class="spacer"></div>\n                {{>RenditionSelect}}\n                {{>AudioTrackSelect}}\n                {{>CaptionsSelect}}\n                {{>AirplayButton}}\n                {{>CastButton}}\n                {{>PipButton}}\n                {{>FullscreenButton}}\n              </media-control-bar>\n            </template>\n          </template>\n\n          <template if="breakpointmd">\n            <media-control-bar slot="top-chrome">\n              {{>LiveButton}}\n              {{>TitleDisplay}}\n            </media-control-bar>\n            <div slot="centered-chrome" class="center-controls">\n              {{>PlayButton section="center"}}\n            </div>\n            {{>TimeRange}}\n            <media-control-bar>\n              {{>PlayButton}}\n              {{>SeekBackwardButton}}\n              {{>SeekForwardButton}}\n              {{>MuteButton}}\n              {{>VolumeRange}}\n              <div class="spacer"></div>\n              {{>RenditionSelect}}\n              {{>AudioTrackSelect}}\n              {{>CaptionsSelect}}\n              {{>AirplayButton}}\n              {{>CastButton}}\n              {{>PipButton}}\n              {{>FullscreenButton}}\n            </media-control-bar>\n          </template>\n\n        </template>\n\n      </template>\n\n    </template>\n\n    <slot></slot>\n\n  </media-controller>\n</template>\n');var AC,SC,kC=class extends uI{};kC.template=null==(SC=null==(AC=_C.content)?void 0:AC.children)?void 0:SC[0],AI.customElements.get("media-theme-classic")||AI.customElements.define("media-theme-classic",kC);var wC={SRC:"src",POSTER:"poster"},LC={STYLE:"style",DEFAULT_HIDDEN_CAPTIONS:"default-hidden-captions",PRIMARY_COLOR:"primary-color",SECONDARY_COLOR:"secondary-color",FORWARD_SEEK_OFFSET:"forward-seek-offset",BACKWARD_SEEK_OFFSET:"backward-seek-offset",PLAYBACK_TOKEN:"playback-token",THUMBNAIL_TOKEN:"thumbnail-token",STORYBOARD_TOKEN:"storyboard-token",STORYBOARD_SRC:"storyboard-src",THUMBNAIL_TIME:"thumbnail-time",AUDIO:"audio",NOHOTKEYS:"nohotkeys",HOTKEYS:"hotkeys",PLAYBACK_RATES:"playbackrates",DEFAULT_SHOW_REMAINING_TIME:"default-show-remaining-time",TITLE:"title",PLACEHOLDER:"placeholder",THEME:"theme",DEFAULT_STREAM_TYPE:"default-stream-type",TARGET_LIVE_WINDOW:"target-live-window",NO_VOLUME_PREF:"no-volume-pref"},RC=["audio","backwardseekoffset","defaultshowremainingtime","defaultsubtitles","noautoseektolive","disabled","exportparts","forwardseekoffset","hideduration","hotkeys","nohotkeys","playbackrates","defaultstreamtype","streamtype","style","targetlivewindow","template","title","novolumepref"];function IC(e){var t,n;let i=e.theme;if(i){let r=null==(n=null==(t=e.getRootNode())?void 0:t.getElementById)?void 0:n.call(t,i);if(r&&r instanceof HTMLTemplateElement)return r;i.startsWith("media-theme-")||(i=`media-theme-${i}`);let s=AI.customElements.get(i);if(null!=s&&s.template)return s.template}}function CC(e){var t;let n=null==(t=e.mediaController)?void 0:t.querySelector("media-time-display");return n&&"none"===getComputedStyle(n).getPropertyValue("--media-duration-display-display").trim()}function DC(e){let t=e.hasAttribute(LC.TITLE)?{video_title:e.getAttribute(LC.TITLE)}:{};return e.getAttributeNames().filter((e=>e.startsWith("metadata-"))).reduce(((t,n)=>{let i=e.getAttribute(n);return null!==i&&(t[n.replace(/^metadata-/,"").replace(/-/g,"_")]=i),t}),t)}var xC,MC,PC,OC,NC,FC,UC,BC,$C,VC,HC,WC,GC,KC,jC,qC,YC,zC,XC,QC,ZC,JC=Object.values(rR),eD=Object.values(wC),tD=Object.values(LC),nD=NI(),iD={dialog:void 0,isDialogOpen:!1},rD=class extends nC{constructor(){super(),pI(this,FC),pI(this,BC),pI(this,VC),pI(this,WC),pI(this,KC),pI(this,qC),pI(this,zC),pI(this,QC),pI(this,xC,!1),pI(this,MC,{}),pI(this,PC,!0),pI(this,OC,new WI(this,"hotkeys")),pI(this,NC,{...iD,onCloseErrorDialog:()=>gI(this,VC,HC).call(this,{dialog:void 0,isDialogOpen:!1}),onInitFocusDialog:e=>{MI(this,SI.activeElement)||e.preventDefault()}}),this.attachShadow({mode:"open"}),gI(this,BC,$C).call(this),this.isConnected&&gI(this,FC,UC).call(this)}static get observedAttributes(){var e;return[...null!=(e=nC.observedAttributes)?e:[],...eD,...JC,...tD]}get mediaTheme(){var e;return null==(e=this.shadowRoot)?void 0:e.querySelector("media-theme")}get mediaController(){var e,t;return null==(t=null==(e=this.mediaTheme)?void 0:e.shadowRoot)?void 0:t.querySelector("media-controller")}connectedCallback(){var e;let t=null==(e=this.shadowRoot)?void 0:e.querySelector("mux-video");t&&(t.metadata=DC(this))}attributeChangedCallback(e,t,n){switch(gI(this,FC,UC).call(this),super.attributeChangedCallback(e,t,n),e){case LC.HOTKEYS:fI(this,OC).value=n;break;case LC.THUMBNAIL_TIME:null!=n&&this.tokens.thumbnail&&KI(wI("Use of thumbnail-time with thumbnail-token is currently unsupported. Ignore thumbnail-time.").format({}));break;case LC.THUMBNAIL_TOKEN:{let{aud:e}=xI(n);n&&"t"!==e&&KI(wI("The provided thumbnail-token should have audience value 't' instead of '{aud}'.").format({aud:e}));break}case LC.STORYBOARD_TOKEN:{let{aud:e}=xI(n);n&&"s"!==e&&KI(wI("The provided storyboard-token should have audience value 's' instead of '{aud}'.").format({aud:e}));break}case rR.PLAYBACK_ID:null!=n&&n.includes("?token")&&jI(wI("The specificed playback ID {playbackId} contains a token which must be provided via the playback-token attribute.").format({playbackId:n}));break;case rR.STREAM_TYPE:n&&![Wk.LIVE,Wk.ON_DEMAND,Wk.UNKNOWN].includes(n)?["ll-live","live:dvr","ll-live:dvr"].includes(this.streamType)?this.targetLiveWindow=n.includes("dvr")?Number.POSITIVE_INFINITY:0:qI({file:"invalid-stream-type.md",message:wI("Invalid stream-type value supplied: `{streamType}`. Please provide stream-type as either: `on-demand` or `live`").format({streamType:this.streamType})}):this.targetLiveWindow=n===Wk.LIVE?0:Number.NaN}var i,r;[rR.PLAYBACK_ID,wC.SRC,LC.PLAYBACK_TOKEN].includes(e)&&t!==n&&mI(this,NC,{...fI(this,NC),...iD}),gI(this,WC,GC).call(this,{[(i=e,null!=(r=BI[i])?r:II(i))]:n})}get preferCmcd(){var e;return null!=(e=this.getAttribute(rR.PREFER_CMCD))?e:void 0}set preferCmcd(e){e!==this.preferCmcd&&(e?qk.includes(e)?this.setAttribute(rR.PREFER_CMCD,e):KI(`Invalid value for preferCmcd. Must be one of ${qk.join()}`):this.removeAttribute(rR.PREFER_CMCD))}get hasPlayed(){var e,t;return null!=(t=null==(e=this.mediaController)?void 0:e.hasAttribute("media-has-played"))&&t}get inLiveWindow(){var e;return null==(e=this.mediaController)?void 0:e.hasAttribute("media-time-is-live")}get _hls(){var e;return null==(e=this.media)?void 0:e._hls}get mux(){var e;return null==(e=this.media)?void 0:e.mux}get theme(){var e;return null!=(e=this.getAttribute(LC.THEME))?e:"classic"}set theme(e){this.setAttribute(LC.THEME,`${e}`)}get themeProps(){let e=this.mediaTheme;if(!e)return;let t={};for(let n of e.getAttributeNames()){if(RC.includes(n))continue;let i=e.getAttribute(n);t[II(n)]=""===i||i}return t}set themeProps(e){var t,n;gI(this,FC,UC).call(this);let i={...this.themeProps,...e};for(let r in i){if(RC.includes(r))continue;let i=null==e?void 0:e[r];"boolean"==typeof i||null==i?null==(t=this.mediaTheme)||t.toggleAttribute(RI(r),Boolean(i)):null==(n=this.mediaTheme)||n.setAttribute(RI(r),i)}}get playbackId(){var e;return null!=(e=this.getAttribute(rR.PLAYBACK_ID))?e:void 0}set playbackId(e){e?this.setAttribute(rR.PLAYBACK_ID,e):this.removeAttribute(rR.PLAYBACK_ID)}get src(){var e,t;return this.playbackId?null!=(e=sD(this,wC.SRC))?e:void 0:null!=(t=this.getAttribute(wC.SRC))?t:void 0}set src(e){e?this.setAttribute(wC.SRC,e):this.removeAttribute(wC.SRC)}get poster(){var e;let t=this.getAttribute(wC.POSTER);return null!=t?t:this.playbackId&&!this.audio?((e,{token:t,thumbnailTime:n,domain:i=PI}={})=>{let r=null==t?n:void 0,{aud:s}=xI(t);if(!t||"t"===s)return`https://image.${i}/${e}/thumbnail.webp${DI({token:t,time:r})}`})(this.playbackId,{domain:this.customDomain,thumbnailTime:null!=(e=this.thumbnailTime)?e:this.startTime,token:this.tokens.thumbnail}):void 0}set poster(e){e||""===e?this.setAttribute(wC.POSTER,e):this.removeAttribute(wC.POSTER)}get storyboardSrc(){var e;return null!=(e=this.getAttribute(LC.STORYBOARD_SRC))?e:void 0}set storyboardSrc(e){e?this.setAttribute(LC.STORYBOARD_SRC,e):this.removeAttribute(LC.STORYBOARD_SRC)}get storyboard(){return this.storyboardSrc&&!this.tokens.storyboard?this.storyboardSrc:!this.audio&&this.playbackId&&this.streamType&&![Wk.LIVE,Wk.UNKNOWN].includes(this.streamType)?((e,{token:t,domain:n=PI}={})=>{let{aud:i}=xI(t);if(!t||"s"===i)return`https://image.${n}/${e}/storyboard.vtt${DI({token:t,format:"webp"})}`})(this.playbackId,{domain:this.customDomain,token:this.tokens.storyboard}):void 0}get audio(){return this.hasAttribute(LC.AUDIO)}set audio(e){e?this.setAttribute(LC.AUDIO,""):this.removeAttribute(LC.AUDIO)}get hotkeys(){return fI(this,OC)}get nohotkeys(){return this.hasAttribute(LC.NOHOTKEYS)}set nohotkeys(e){e?this.setAttribute(LC.NOHOTKEYS,""):this.removeAttribute(LC.NOHOTKEYS)}get thumbnailTime(){return CI(this.getAttribute(LC.THUMBNAIL_TIME))}set thumbnailTime(e){this.setAttribute(LC.THUMBNAIL_TIME,`${e}`)}get title(){var e;return null!=(e=this.getAttribute(LC.TITLE))?e:""}set title(e){e!==this.title&&(e?this.setAttribute(LC.TITLE,e):this.removeAttribute("title"),super.title=e)}get placeholder(){var e;return null!=(e=sD(this,LC.PLACEHOLDER))?e:""}set placeholder(e){this.setAttribute(LC.PLACEHOLDER,`${e}`)}get primaryColor(){var e,t;let n=this.getAttribute(LC.PRIMARY_COLOR);if(null!=n||this.mediaTheme&&(n=null==(t=null==(e=AI.getComputedStyle(this.mediaTheme))?void 0:e.getPropertyValue("--_primary-color"))?void 0:t.trim(),n))return n}set primaryColor(e){this.setAttribute(LC.PRIMARY_COLOR,`${e}`)}get secondaryColor(){var e,t;let n=this.getAttribute(LC.SECONDARY_COLOR);if(null!=n||this.mediaTheme&&(n=null==(t=null==(e=AI.getComputedStyle(this.mediaTheme))?void 0:e.getPropertyValue("--_secondary-color"))?void 0:t.trim(),n))return n}set secondaryColor(e){this.setAttribute(LC.SECONDARY_COLOR,`${e}`)}get defaultShowRemainingTime(){return this.hasAttribute(LC.DEFAULT_SHOW_REMAINING_TIME)}set defaultShowRemainingTime(e){e?this.setAttribute(LC.DEFAULT_SHOW_REMAINING_TIME,""):this.removeAttribute(LC.DEFAULT_SHOW_REMAINING_TIME)}get playbackRates(){if(this.hasAttribute(LC.PLAYBACK_RATES))return this.getAttribute(LC.PLAYBACK_RATES).trim().split(/\s*,?\s+/).map((e=>Number(e))).filter((e=>!Number.isNaN(e))).sort(((e,t)=>e-t))}set playbackRates(e){e?this.setAttribute(LC.PLAYBACK_RATES,e.join(" ")):this.removeAttribute(LC.PLAYBACK_RATES)}get forwardSeekOffset(){var e;return null!=(e=CI(this.getAttribute(LC.FORWARD_SEEK_OFFSET)))?e:10}set forwardSeekOffset(e){this.setAttribute(LC.FORWARD_SEEK_OFFSET,`${e}`)}get backwardSeekOffset(){var e;return null!=(e=CI(this.getAttribute(LC.BACKWARD_SEEK_OFFSET)))?e:10}set backwardSeekOffset(e){this.setAttribute(LC.BACKWARD_SEEK_OFFSET,`${e}`)}get defaultHiddenCaptions(){return this.hasAttribute(LC.DEFAULT_HIDDEN_CAPTIONS)}set defaultHiddenCaptions(e){e?this.setAttribute(LC.DEFAULT_HIDDEN_CAPTIONS,""):this.removeAttribute(LC.DEFAULT_HIDDEN_CAPTIONS)}get playerSoftwareName(){var e;return null!=(e=this.getAttribute(rR.PLAYER_SOFTWARE_NAME))?e:"mux-player"}get playerSoftwareVersion(){var e;return null!=(e=this.getAttribute(rR.PLAYER_SOFTWARE_VERSION))?e:nD}get beaconCollectionDomain(){var e;return null!=(e=this.getAttribute(rR.BEACON_COLLECTION_DOMAIN))?e:void 0}set beaconCollectionDomain(e){e!==this.beaconCollectionDomain&&(e?this.setAttribute(rR.BEACON_COLLECTION_DOMAIN,e):this.removeAttribute(rR.BEACON_COLLECTION_DOMAIN))}get maxResolution(){var e;return null!=(e=this.getAttribute(rR.MAX_RESOLUTION))?e:void 0}set maxResolution(e){e!==this.maxResolution&&(e?this.setAttribute(rR.MAX_RESOLUTION,e):this.removeAttribute(rR.MAX_RESOLUTION))}get customDomain(){var e;return null!=(e=this.getAttribute(rR.CUSTOM_DOMAIN))?e:void 0}set customDomain(e){e!==this.customDomain&&(e?this.setAttribute(rR.CUSTOM_DOMAIN,e):this.removeAttribute(rR.CUSTOM_DOMAIN))}get envKey(){var e;return null!=(e=sD(this,rR.ENV_KEY))?e:void 0}set envKey(e){this.setAttribute(rR.ENV_KEY,`${e}`)}get noVolumePref(){return this.hasAttribute(LC.NO_VOLUME_PREF)}set noVolumePref(e){e?this.setAttribute(LC.NO_VOLUME_PREF,""):this.removeAttribute(LC.NO_VOLUME_PREF)}get debug(){return null!=sD(this,rR.DEBUG)}set debug(e){e?this.setAttribute(rR.DEBUG,""):this.removeAttribute(rR.DEBUG)}get disableCookies(){return null!=sD(this,rR.DISABLE_COOKIES)}set disableCookies(e){e?this.setAttribute(rR.DISABLE_COOKIES,""):this.removeAttribute(rR.DISABLE_COOKIES)}get streamType(){var e,t,n;return null!=(n=null!=(t=this.getAttribute(rR.STREAM_TYPE))?t:null==(e=this.media)?void 0:e.streamType)?n:Wk.UNKNOWN}set streamType(e){this.setAttribute(rR.STREAM_TYPE,`${e}`)}get defaultStreamType(){var e,t,n;return null!=(n=null!=(t=this.getAttribute(LC.DEFAULT_STREAM_TYPE))?t:null==(e=this.mediaController)?void 0:e.getAttribute(LC.DEFAULT_STREAM_TYPE))?n:Wk.ON_DEMAND}set defaultStreamType(e){e?this.setAttribute(LC.DEFAULT_STREAM_TYPE,e):this.removeAttribute(LC.DEFAULT_STREAM_TYPE)}get targetLiveWindow(){var e,t;return this.hasAttribute(LC.TARGET_LIVE_WINDOW)?+this.getAttribute(LC.TARGET_LIVE_WINDOW):null!=(t=null==(e=this.media)?void 0:e.targetLiveWindow)?t:Number.NaN}set targetLiveWindow(e){e!=this.targetLiveWindow&&(null==e?this.removeAttribute(LC.TARGET_LIVE_WINDOW):this.setAttribute(LC.TARGET_LIVE_WINDOW,""+ +e))}get liveEdgeStart(){var e;return null==(e=this.media)?void 0:e.liveEdgeStart}get startTime(){return CI(sD(this,rR.START_TIME))}set startTime(e){this.setAttribute(rR.START_TIME,`${e}`)}get preferPlayback(){let e=this.getAttribute(rR.PREFER_PLAYBACK);if(e===Gk||e===Kk)return e}set preferPlayback(e){e!==this.preferPlayback&&(e===Gk||e===Kk?this.setAttribute(rR.PREFER_PLAYBACK,e):this.removeAttribute(rR.PREFER_PLAYBACK))}get metadata(){var e;return null==(e=this.media)?void 0:e.metadata}set metadata(e){gI(this,FC,UC).call(this),this.media?this.media.metadata={...DC(this),...e}:jI("underlying media element missing when trying to set metadata. metadata will not be set.")}async addCuePoints(e){var t;if(gI(this,FC,UC).call(this),this.media)return null==(t=this.media)?void 0:t.addCuePoints(e);jI("underlying media element missing when trying to addCuePoints. cuePoints will not be added.")}get activeCuePoint(){var e;return null==(e=this.media)?void 0:e.activeCuePoint}get cuePoints(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.cuePoints)?t:[]}getStartDate(){var e;return null==(e=this.media)?void 0:e.getStartDate()}get currentPdt(){var e;return null==(e=this.media)?void 0:e.currentPdt}get tokens(){let e=this.getAttribute(LC.PLAYBACK_TOKEN),t=this.getAttribute(LC.THUMBNAIL_TOKEN),n=this.getAttribute(LC.STORYBOARD_TOKEN);return{...fI(this,MC),...null!=e?{playback:e}:{},...null!=t?{thumbnail:t}:{},...null!=n?{storyboard:n}:{}}}set tokens(e){mI(this,MC,null!=e?e:{})}get playbackToken(){var e;return null!=(e=this.getAttribute(LC.PLAYBACK_TOKEN))?e:void 0}set playbackToken(e){this.setAttribute(LC.PLAYBACK_TOKEN,`${e}`)}get thumbnailToken(){var e;return null!=(e=this.getAttribute(LC.THUMBNAIL_TOKEN))?e:void 0}set thumbnailToken(e){this.setAttribute(LC.THUMBNAIL_TOKEN,`${e}`)}get storyboardToken(){var e;return null!=(e=this.getAttribute(LC.STORYBOARD_TOKEN))?e:void 0}set storyboardToken(e){this.setAttribute(LC.STORYBOARD_TOKEN,`${e}`)}addTextTrack(e,t,n,i){var r;let s=null==(r=this.media)?void 0:r.nativeEl;if(s)return sw(s,e,t,n,i)}removeTextTrack(e){var t;let n=null==(t=this.media)?void 0:t.nativeEl;if(n)return function(e,t){let n=Array.prototype.find.call(e.querySelectorAll("track"),(e=>e.track===t));null==n||n.remove()}(n,e)}get textTracks(){var e;return null==(e=this.media)?void 0:e.textTracks}};function sD(e,t){return e.media?e.media.getAttribute(t):e.getAttribute(t)}xC=new WeakMap,MC=new WeakMap,PC=new WeakMap,OC=new WeakMap,NC=new WeakMap,FC=new WeakSet,UC=function(){var e,t,n,i;if(!fI(this,xC)){mI(this,xC,!0),gI(this,WC,GC).call(this);try{if(customElements.upgrade(this.mediaTheme),!(this.mediaTheme instanceof AI.HTMLElement))throw""}catch{jI("<media-theme> failed to upgrade!")}try{if(customElements.upgrade(this.media),!(this.media instanceof bR))throw""}catch{jI("<mux-video> failed to upgrade!")}try{if(customElements.upgrade(this.mediaController),!(this.mediaController instanceof xp))throw""}catch{jI("<media-controller> failed to upgrade!")}(i=this).querySelectorAll(":scope > track").forEach((e=>{var t;null==(t=i.media)||t.append(e.cloneNode())})),QI.forEach((e=>{var t;null==(t=i.media)||t.addEventListener(e,(e=>{i.dispatchEvent(new Event(e.type))}))})),gI(this,KC,jC).call(this),gI(this,qC,YC).call(this),gI(this,zC,XC).call(this),mI(this,PC,null==(t=null==(e=this.mediaController)?void 0:e.hasAttribute("userinactive"))||t),gI(this,QC,ZC).call(this),null==(n=this.media)||n.addEventListener("streamtypechange",(()=>{gI(this,WC,GC).call(this)}))}},BC=new WeakSet,$C=function(){var e,t;try{null==(e=null==window?void 0:window.CSS)||e.registerProperty({name:"--media-primary-color",syntax:"<color>",inherits:!0}),null==(t=null==window?void 0:window.CSS)||t.registerProperty({name:"--media-secondary-color",syntax:"<color>",inherits:!0})}catch{}},VC=new WeakSet,HC=function(e){Object.assign(fI(this,NC),e),gI(this,WC,GC).call(this)},WC=new WeakSet,GC=function(e={}){var t;!function(e,t){e.renderInto(t)}((t=function(e,t){var n;return{src:!e.playbackId&&e.src,playbackId:e.playbackId,hasSrc:!!e.playbackId||!!e.src,poster:e.poster,storyboard:e.storyboard,storyboardSrc:e.getAttribute(LC.STORYBOARD_SRC),placeholder:e.getAttribute("placeholder"),themeTemplate:IC(e),thumbnailTime:!e.tokens.thumbnail&&e.thumbnailTime,autoplay:e.autoplay,crossOrigin:e.crossOrigin,loop:e.loop,noHotKeys:e.hasAttribute(LC.NOHOTKEYS),hotKeys:e.getAttribute(LC.HOTKEYS),muted:e.muted,paused:e.paused,preload:e.preload,envKey:e.envKey,preferCmcd:e.preferCmcd,debug:e.debug,disableCookies:e.disableCookies,tokens:e.tokens,beaconCollectionDomain:e.beaconCollectionDomain,maxResolution:e.maxResolution,metadata:e.metadata,playerSoftwareName:e.playerSoftwareName,playerSoftwareVersion:e.playerSoftwareVersion,startTime:e.startTime,preferPlayback:e.preferPlayback,audio:e.audio,defaultStreamType:e.defaultStreamType,targetLiveWindow:e.getAttribute(rR.TARGET_LIVE_WINDOW),streamType:UI(e.getAttribute(rR.STREAM_TYPE)),primaryColor:e.primaryColor,secondaryColor:e.secondaryColor,forwardSeekOffset:e.forwardSeekOffset,backwardSeekOffset:e.backwardSeekOffset,defaultHiddenCaptions:e.defaultHiddenCaptions,defaultShowRemainingTime:e.defaultShowRemainingTime,hideDuration:CC(e),playbackRates:e.getAttribute(LC.PLAYBACK_RATES),customDomain:null!=(n=e.getAttribute(rR.CUSTOM_DOMAIN))?n:void 0,title:e.getAttribute(LC.TITLE),novolumepref:e.hasAttribute(LC.NO_VOLUME_PREF),...t}}(this,{...fI(this,NC),...e}),bC`
  <style>
    ${":host {\n  --media-control-display: var(--controls);\n  --media-loading-indicator-display: var(--loading-indicator);\n  --media-dialog-display: var(--dialog);\n  --media-play-button-display: var(--play-button);\n  --media-live-button-display: var(--live-button);\n  --media-seek-backward-button-display: var(--seek-backward-button);\n  --media-seek-forward-button-display: var(--seek-forward-button);\n  --media-mute-button-display: var(--mute-button);\n  --media-captions-button-display: var(--captions-button);\n  --media-captions-selectmenu-display: var(--captions-selectmenu, var(--media-captions-button-display));\n  --media-rendition-selectmenu-display: var(--rendition-selectmenu);\n  --media-audio-track-selectmenu-display: var(--audio-track-selectmenu);\n  --media-airplay-button-display: var(--airplay-button);\n  --media-pip-button-display: var(--pip-button);\n  --media-fullscreen-button-display: var(--fullscreen-button);\n  --media-cast-button-display: var(--cast-button);\n  --media-playback-rate-button-display: var(--playback-rate-button);\n  --media-volume-range-display: var(--volume-range);\n  --media-time-range-display: var(--time-range);\n  --media-time-display-display: var(--time-display);\n  --media-duration-display-display: var(--duration-display);\n  --media-title-display-display: var(--title-display);\n\n  display: inline-block;\n  width: 100%;\n}\n\n/* Hide custom elements that are not defined yet */\n:not(:defined) {\n  display: none;\n}\n\na {\n  color: #fff;\n  font-size: 0.9em;\n  text-decoration: underline;\n}\n\nmedia-theme {\n  width: 100%;\n  height: 100%;\n  direction: ltr;\n}\n\nmedia-poster-image {\n  width: 100%;\n  height: 100%;\n}\n\nmedia-poster-image:not([src]) {\n  display: none;\n}\n\n::part(top),\n[part~='top'] {\n  --media-control-display: var(--controls, var(--top-controls));\n  --media-play-button-display: var(--play-button, var(--top-play-button));\n  --media-live-button-display: var(--live-button, var(--top-live-button));\n  --media-seek-backward-button-display: var(--seek-backward-button, var(--top-seek-backward-button));\n  --media-seek-forward-button-display: var(--seek-forward-button, var(--top-seek-forward-button));\n  --media-mute-button-display: var(--mute-button, var(--top-mute-button));\n  --media-captions-button-display: var(--captions-button, var(--top-captions-button));\n  --media-captions-selectmenu-display: var(\n    --captions-selectmenu,\n    var(--media-captions-button-display, var(--top-captions-selectmenu))\n  );\n  --media-rendition-selectmenu-display: var(--rendition-selectmenu, var(--top-rendition-selectmenu));\n  --media-audio-track-selectmenu-display: var(--audio-track-selectmenu, var(--top-audio-track-selectmenu));\n  --media-airplay-button-display: var(--airplay-button, var(--top-airplay-button));\n  --media-pip-button-display: var(--pip-button, var(--top-pip-button));\n  --media-fullscreen-button-display: var(--fullscreen-button, var(--top-fullscreen-button));\n  --media-cast-button-display: var(--cast-button, var(--top-cast-button));\n  --media-playback-rate-button-display: var(--playback-rate-button, var(--top-playback-rate-button));\n  --media-volume-range-display: var(--volume-range, var(--top-volume-range));\n  --media-time-range-display: var(--time-range, var(--top-time-range));\n  --media-time-display-display: var(--time-display, var(--top-time-display));\n  --media-duration-display-display: var(--duration-display, var(--top-duration-display));\n  --media-title-display-display: var(--title-display, var(--top-title-display));\n}\n\n::part(center),\n[part~='center'] {\n  --media-control-display: var(--controls, var(--center-controls));\n  --media-play-button-display: var(--play-button, var(--center-play-button));\n  --media-live-button-display: var(--live-button, var(--center-live-button));\n  --media-seek-backward-button-display: var(--seek-backward-button, var(--center-seek-backward-button));\n  --media-seek-forward-button-display: var(--seek-forward-button, var(--center-seek-forward-button));\n  --media-mute-button-display: var(--mute-button, var(--center-mute-button));\n  --media-captions-button-display: var(--captions-button, var(--center-captions-button));\n  --media-captions-selectmenu-display: var(\n    --captions-selectmenu,\n    var(--media-captions-button-display, var(--center-captions-selectmenu))\n  );\n  --media-rendition-selectmenu-display: var(--rendition-selectmenu, var(--center-rendition-selectmenu));\n  --media-audio-track-selectmenu-display: var(--audio-track-selectmenu, var(--center-audio-track-selectmenu));\n  --media-airplay-button-display: var(--airplay-button, var(--center-airplay-button));\n  --media-pip-button-display: var(--pip-button, var(--center-pip-button));\n  --media-fullscreen-button-display: var(--fullscreen-button, var(--center-fullscreen-button));\n  --media-cast-button-display: var(--cast-button, var(--center-cast-button));\n  --media-playback-rate-button-display: var(--playback-rate-button, var(--center-playback-rate-button));\n  --media-volume-range-display: var(--volume-range, var(--center-volume-range));\n  --media-time-range-display: var(--time-range, var(--center-time-range));\n  --media-time-display-display: var(--time-display, var(--center-time-display));\n  --media-duration-display-display: var(--duration-display, var(--center-duration-display));\n}\n\n::part(bottom),\n[part~='bottom'] {\n  --media-control-display: var(--controls, var(--bottom-controls));\n  --media-play-button-display: var(--play-button, var(--bottom-play-button));\n  --media-live-button-display: var(--live-button, var(--bottom-live-button));\n  --media-seek-backward-button-display: var(--seek-backward-button, var(--bottom-seek-backward-button));\n  --media-seek-forward-button-display: var(--seek-forward-button, var(--bottom-seek-forward-button));\n  --media-mute-button-display: var(--mute-button, var(--bottom-mute-button));\n  --media-captions-button-display: var(--captions-button, var(--bottom-captions-button));\n  --media-captions-selectmenu-display: var(\n    --captions-selectmenu,\n    var(--media-captions-button-display, var(--bottom-captions-selectmenu))\n  );\n  --media-rendition-selectmenu-display: var(--rendition-selectmenu, var(--bottom-rendition-selectmenu));\n  --media-audio-track-selectmenu-display: var(--audio-track-selectmenu, var(--bottom-audio-track-selectmenu));\n  --media-airplay-button-display: var(--airplay-button, var(--bottom-airplay-button));\n  --media-pip-button-display: var(--pip-button, var(--bottom-pip-button));\n  --media-fullscreen-button-display: var(--fullscreen-button, var(--bottom-fullscreen-button));\n  --media-cast-button-display: var(--cast-button, var(--bottom-cast-button));\n  --media-playback-rate-button-display: var(--playback-rate-button, var(--bottom-playback-rate-button));\n  --media-volume-range-display: var(--volume-range, var(--bottom-volume-range));\n  --media-time-range-display: var(--time-range, var(--bottom-time-range));\n  --media-time-display-display: var(--time-display, var(--bottom-time-display));\n  --media-duration-display-display: var(--duration-display, var(--bottom-duration-display));\n  --media-title-display-display: var(--title-display, var(--bottom-title-display));\n}\n"}
  </style>
  ${EC(t)}
`),this.shadowRoot)},KC=new WeakSet,jC=function(){let e=e=>{var t,n;if(null==e||!e.startsWith("theme-"))return;let i=e.replace(/^theme-/,"");if(RC.includes(i))return;let r=this.getAttribute(e);null!=r?null==(t=this.mediaTheme)||t.setAttribute(i,r):null==(n=this.mediaTheme)||n.removeAttribute(i)};new MutationObserver((t=>{for(let{attributeName:n}of t)e(n)})).observe(this,{attributes:!0}),this.getAttributeNames().forEach(e)},qC=new WeakSet,YC=function(){var e;this.addEventListener("error",(e=>{let{detail:t}=e;if(t instanceof $k||(t=new $k(t.message,t.code,t.fatal)),null==t||!t.fatal)return KI(t),void(t.data&&KI(`${t.name} data:`,t.data));let{dialog:n,devlog:i}=TC(t,!window.navigator.onLine,this.playbackId,this.playbackToken);i.message&&qI(i),jI(t),t.data&&jI(`${t.name} data:`,t.data),gI(this,VC,HC).call(this,{isDialogOpen:!0,dialog:n})})),this.media&&(this.media.errorTranslator=(e={})=>{var t,n,i;if(!((null==(t=this.media)?void 0:t.error)instanceof $k))return e;let{devlog:r}=TC(null==(n=this.media)?void 0:n.error,!window.navigator.onLine,this.playbackId,this.playbackToken,!1);return{player_error_code:null==(i=this.media)?void 0:i.error.code,player_error_message:r.message?String(r.message):e.player_error_message,player_error_context:r.context?String(r.context):e.player_error_context}}),null==(e=this.media)||e.addEventListener("error",(e=>{var t,n;let{detail:i}=e;if(!i){let{message:e,code:r}=null!=(n=null==(t=this.media)?void 0:t.error)?n:{};i=new $k(e,r)}null==i||!i.fatal||this.dispatchEvent(new CustomEvent("error",{detail:i}))}))},zC=new WeakSet,XC=function(){var e,t,n,i;let r=()=>gI(this,WC,GC).call(this);null==(t=null==(e=this.media)?void 0:e.textTracks)||t.addEventListener("addtrack",r),null==(i=null==(n=this.media)?void 0:n.textTracks)||i.addEventListener("removetrack",r)},QC=new WeakSet,ZC=function(){var e,t;let n=/.*Version\/.*Safari\/.*/.test(navigator.userAgent);if(!/Firefox/i.test(navigator.userAgent))return;let i,r=new WeakMap,s=()=>this.streamType===Wk.LIVE&&!this.secondaryColor&&this.offsetWidth>=800,a=(e,t,i=!1)=>{s()||Array.from(e&&e.activeCues||[]).forEach((e=>{if(!(!e.snapToLines||e.line<-5||e.line>=0&&e.line<10))if(!t||this.paused){let t=e.text.split("\n").length,s=n?-2:-3;this.streamType===Wk.LIVE&&(s=n?-1:-2);let a=s-t;if(e.line===a&&!i)return;r.has(e)||r.set(e,e.line),e.line=a-1,e.line=a}else setTimeout((()=>{e.line=r.get(e)||"auto"}),500)}))},o=()=>{var e,t;a(i,null!=(t=null==(e=this.mediaController)?void 0:e.hasAttribute("userinactive"))&&t)},l=()=>{var e,t;let n=Array.from((null==(t=null==(e=this.mediaController)?void 0:e.media)?void 0:t.textTracks)||[]).filter((e=>["subtitles","captions"].includes(e.kind)&&"showing"===e.mode))[0];n!==i&&(null==i||i.removeEventListener("cuechange",o)),i=n,null==i||i.addEventListener("cuechange",o),a(i,fI(this,PC))};if(l(),null==(e=this.textTracks)||e.addEventListener("change",l),null==(t=this.textTracks)||t.addEventListener("addtrack",l),navigator.userAgent.includes("Chrome/")){let e=()=>{a(i,fI(this,PC),!0),this.paused||window.requestAnimationFrame(e)};this.addEventListener("playing",(()=>{e()}))}this.addEventListener("userinactivechange",(()=>{var e,t;let n=null==(t=null==(e=this.mediaController)?void 0:e.hasAttribute("userinactive"))||t;fI(this,PC)!==n&&(mI(this,PC,n),a(i,fI(this,PC)))}))},AI.customElements.get("mux-player")||(AI.customElements.define("mux-player",rD),AI.MuxPlayerElement=rD);var aD=n(155),oD=Object.create,lD=Object.defineProperty,dD=Object.getOwnPropertyDescriptor,cD=Object.getOwnPropertyNames,uD=Object.getPrototypeOf,hD=Object.prototype.hasOwnProperty,fD=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),pD=fD(((e,t)=>{var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t.exports=n})),mD=fD(((e,t)=>{t.exports=function(e){if(!e)return!1;var t=n.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)};var n=Object.prototype.toString})),gD=fD(((e,t)=>{var n=function(e){return e.replace(/^\s+|\s+$/g,"")},i=function(e){return"[object Array]"===Object.prototype.toString.call(e)};t.exports=function(e){if(!e)return{};for(var t={},r=n(e).split("\n"),s=0;s<r.length;s++){var a=r[s],o=a.indexOf(":"),l=n(a.slice(0,o)).toLowerCase(),d=n(a.slice(o+1));void 0===t[l]?t[l]=d:i(t[l])?t[l].push(d):t[l]=[t[l],d]}return t}})),vD=fD(((e,t)=>{t.exports=function(){for(var e={},t=0;t<arguments.length;t++){var i=arguments[t];for(var r in i)n.call(i,r)&&(e[r]=i[r])}return e};var n=Object.prototype.hasOwnProperty})),yD=fD(((e,t)=>{var n=pD(),i=mD(),r=gD(),s=vD();function a(e,t,n){var r=e;return i(t)?(n=t,"string"==typeof e&&(r={uri:e})):r=s(t,{uri:e}),r.callback=n,r}function o(e,t,n){return l(t=a(e,t,n))}function l(e){if(void 0===e.callback)throw new Error("callback argument missing");var t=!1,n=function(n,i,r){t||(t=!0,e.callback(n,i,r))};function i(){var e=void 0;if(e=l.response?l.response:l.responseText||function(e){try{if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;if(""===e.responseType&&!t)return e.responseXML}catch{}return null}(l),v)try{e=JSON.parse(e)}catch{}return e}function s(e){return clearTimeout(u),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,n(e,y)}function a(){if(!c){var t;clearTimeout(u),t=e.useXDR&&void 0===l.status?200:1223===l.status?204:l.status;var s=y,a=null;return 0!==t?(s={body:i(),statusCode:t,method:f,headers:{},url:h,rawRequest:l},l.getAllResponseHeaders&&(s.headers=r(l.getAllResponseHeaders()))):a=new Error("Internal XMLHttpRequest Error"),n(a,s,s.body)}}var l=e.xhr||null;l||(l=e.cors||e.useXDR?new o.XDomainRequest:new o.XMLHttpRequest);var d,c,u,h=l.url=e.uri||e.url,f=l.method=e.method||"GET",p=e.body||e.data,m=l.headers=e.headers||{},g=!!e.sync,v=!1,y={body:void 0,headers:{},statusCode:0,method:f,url:h,rawRequest:l};if("json"in e&&!1!==e.json&&(v=!0,m.accept||m.Accept||(m.Accept="application/json"),"GET"!==f&&"HEAD"!==f&&(m["content-type"]||m["Content-Type"]||(m["Content-Type"]="application/json"),p=JSON.stringify(!0===e.json?p:e.json))),l.onreadystatechange=function(){4===l.readyState&&setTimeout(a,0)},l.onload=a,l.onerror=s,l.onprogress=function(){},l.onabort=function(){c=!0},l.ontimeout=s,l.open(f,h,!g,e.username,e.password),g||(l.withCredentials=!!e.withCredentials),!g&&e.timeout>0&&(u=setTimeout((function(){if(!c){c=!0,l.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",s(e)}}),e.timeout)),l.setRequestHeader)for(d in m)m.hasOwnProperty(d)&&l.setRequestHeader(d,m[d]);else if(e.headers&&!function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(l.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(l),l.send(p||null),l}t.exports=o,t.exports.default=o,o.XMLHttpRequest=n.XMLHttpRequest||function(){},o.XDomainRequest="withCredentials"in new o.XMLHttpRequest?o.XMLHttpRequest:n.XDomainRequest,function(e,t){for(var n=0;n<e.length;n++)t(e[n])}(["get","put","post","patch","head","delete"],(function(e){o["delete"===e?"del":e]=function(t,n,i){return(n=a(t,n,i)).method=e.toUpperCase(),l(n)}}))}));function bD(e,t,...n){if(!e)throw new TypeError(ED(t,n))}function ED(e,t){let n=0;return e.replace(/%[os]/gu,(()=>TD(t[n++])))}function TD(e){return"object"!=typeof e||null===e?String(e):Object.prototype.toString.call(e)}var _D,AD="undefined"!=typeof window?window:"undefined"!=typeof self?self:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:void 0,SD=class{constructor(e,t){this.code=e,this.message=t}warn(...e){var t;try{_D;let n=(null!==(t=(new Error).stack)&&void 0!==t?t:"").replace(/^(?:.+?\n){2}/gu,"\n");console.warn(this.message,...e,n)}catch{}}},kD=new SD("W01","Unable to initialize event under dispatching."),wD=new SD("W02","Assigning any falsy value to 'cancelBubble' property has no effect."),LD=new SD("W03","Assigning any truthy value to 'returnValue' property has no effect."),RD=new SD("W04","Unable to preventDefault on non-cancelable events."),ID=new SD("W05","Unable to preventDefault inside passive event listener invocation."),CD=new SD("W06","An event listener wasn't added because it has been added already: %o, %o"),DD=new SD("W07","The %o option value was abandoned because the event listener wasn't added as duplicated."),xD=new SD("W08","The 'callback' argument must be a function or an object that has 'handleEvent' method: %o"),MD=(new SD("W09","Event attribute handler must be a function: %o"),class{static get NONE(){return PD}static get CAPTURING_PHASE(){return OD}static get AT_TARGET(){return ND}static get BUBBLING_PHASE(){return FD}constructor(e,t){Object.defineProperty(this,"isTrusted",{value:!1,enumerable:!0});let n=null!=t?t:{};UD.set(this,{type:String(e),bubbles:Boolean(n.bubbles),cancelable:Boolean(n.cancelable),composed:Boolean(n.composed),target:null,currentTarget:null,stopPropagationFlag:!1,stopImmediatePropagationFlag:!1,canceledFlag:!1,inPassiveListenerFlag:!1,dispatchFlag:!1,timeStamp:Date.now()})}get type(){return BD(this).type}get target(){return BD(this).target}get srcElement(){return BD(this).target}get currentTarget(){return BD(this).currentTarget}composedPath(){let e=BD(this).currentTarget;return e?[e]:[]}get NONE(){return PD}get CAPTURING_PHASE(){return OD}get AT_TARGET(){return ND}get BUBBLING_PHASE(){return FD}get eventPhase(){return BD(this).dispatchFlag?2:0}stopPropagation(){BD(this).stopPropagationFlag=!0}get cancelBubble(){return BD(this).stopPropagationFlag}set cancelBubble(e){e?BD(this).stopPropagationFlag=!0:wD.warn()}stopImmediatePropagation(){let e=BD(this);e.stopPropagationFlag=e.stopImmediatePropagationFlag=!0}get bubbles(){return BD(this).bubbles}get cancelable(){return BD(this).cancelable}get returnValue(){return!BD(this).canceledFlag}set returnValue(e){e?LD.warn():$D(BD(this))}preventDefault(){$D(BD(this))}get defaultPrevented(){return BD(this).canceledFlag}get composed(){return BD(this).composed}get isTrusted(){return!1}get timeStamp(){return BD(this).timeStamp}initEvent(e,t=!1,n=!1){let i=BD(this);i.dispatchFlag?kD.warn():UD.set(this,{...i,type:String(e),bubbles:Boolean(t),cancelable:Boolean(n),target:null,currentTarget:null,stopPropagationFlag:!1,stopImmediatePropagationFlag:!1,canceledFlag:!1})}}),PD=0,OD=1,ND=2,FD=3,UD=new WeakMap;function BD(e,t="this"){let n=UD.get(e);return bD(null!=n,"'%s' must be an object that Event constructor created, but got another one: %o",t,e),n}function $D(e){e.inPassiveListenerFlag?ID.warn():e.cancelable?e.canceledFlag=!0:RD.warn()}Object.defineProperty(MD,"NONE",{enumerable:!0}),Object.defineProperty(MD,"CAPTURING_PHASE",{enumerable:!0}),Object.defineProperty(MD,"AT_TARGET",{enumerable:!0}),Object.defineProperty(MD,"BUBBLING_PHASE",{enumerable:!0});var VD=Object.getOwnPropertyNames(MD.prototype);for(let e=0;e<VD.length;++e)"constructor"!==VD[e]&&Object.defineProperty(MD.prototype,VD[e],{enumerable:!0});void 0!==AD&&void 0!==AD.Event&&Object.setPrototypeOf(MD.prototype,AD.Event.prototype);var HD,WD={INDEX_SIZE_ERR:1,DOMSTRING_SIZE_ERR:2,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,INVALID_CHARACTER_ERR:5,NO_DATA_ALLOWED_ERR:6,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INUSE_ATTRIBUTE_ERR:10,INVALID_STATE_ERR:11,SYNTAX_ERR:12,INVALID_MODIFICATION_ERR:13,NAMESPACE_ERR:14,INVALID_ACCESS_ERR:15,VALIDATION_ERR:16,TYPE_MISMATCH_ERR:17,SECURITY_ERR:18,NETWORK_ERR:19,ABORT_ERR:20,URL_MISMATCH_ERR:21,QUOTA_EXCEEDED_ERR:22,TIMEOUT_ERR:23,INVALID_NODE_TYPE_ERR:24,DATA_CLONE_ERR:25};function GD(e){let t=Object.keys(WD);for(let n=0;n<t.length;++n){let i=t[n],r=WD[i];Object.defineProperty(e,i,{get:()=>r,configurable:!0,enumerable:!0})}}var KD=class extends MD{static wrap(e){return new(zD(e))(e)}constructor(e){super(e.type,{bubbles:e.bubbles,cancelable:e.cancelable,composed:e.composed}),e.cancelBubble&&super.stopPropagation(),e.defaultPrevented&&super.preventDefault(),jD.set(this,{original:e});let t=Object.keys(e);for(let n=0;n<t.length;++n){let i=t[n];i in this||Object.defineProperty(this,i,XD(e,i))}}stopPropagation(){super.stopPropagation();let{original:e}=qD(this);"stopPropagation"in e&&e.stopPropagation()}get cancelBubble(){return super.cancelBubble}set cancelBubble(e){super.cancelBubble=e;let{original:t}=qD(this);"cancelBubble"in t&&(t.cancelBubble=e)}stopImmediatePropagation(){super.stopImmediatePropagation();let{original:e}=qD(this);"stopImmediatePropagation"in e&&e.stopImmediatePropagation()}get returnValue(){return super.returnValue}set returnValue(e){super.returnValue=e;let{original:t}=qD(this);"returnValue"in t&&(t.returnValue=e)}preventDefault(){super.preventDefault();let{original:e}=qD(this);"preventDefault"in e&&e.preventDefault()}get timeStamp(){let{original:e}=qD(this);return"timeStamp"in e?e.timeStamp:super.timeStamp}},jD=new WeakMap;function qD(e){let t=jD.get(e);return bD(null!=t,"'this' is expected an Event object, but got",e),t}var YD=new WeakMap;function zD(e){let t=Object.getPrototypeOf(e);if(null==t)return KD;let n=YD.get(t);return null==n&&(n=function(e,t){class n extends e{}let i=Object.keys(t);for(let e=0;e<i.length;++e)Object.defineProperty(n.prototype,i[e],XD(t,i[e]));return n}(zD(t),t),YD.set(t,n)),n}function XD(e,t){let n=Object.getOwnPropertyDescriptor(e,t);return{get(){let e=qD(this).original,n=e[t];return"function"==typeof n?n.bind(e):n},set(e){qD(this).original[t]=e},configurable:n.configurable,enumerable:n.enumerable}}function QD(e){return 1==(1&e.flags)}function ZD(e){return 2==(2&e.flags)}function JD(e){return 4==(4&e.flags)}function ex(e){return 8==(8&e.flags)}function tx({callback:e},t,n){try{"function"==typeof e?e.call(t,n):"function"==typeof e.handleEvent&&e.handleEvent(n)}catch(e){!function(e){try{let t=e instanceof Error?e:new Error(TD(e));if("function"==typeof dispatchEvent&&"function"==typeof ErrorEvent)dispatchEvent(new ErrorEvent("error",{error:t,message:t.message}));else if(void 0!==aD&&"function"==typeof aD.emit)return void aD.emit("uncaughtException",t);console.error(t)}catch{}}(e)}}function nx({listeners:e},t,n){for(let i=0;i<e.length;++i)if(e[i].callback===t&&QD(e[i])===n)return i;return-1}function ix(e,t,n){let i=nx(e,t,n);return-1!==i&&rx(e,i)}function rx(e,t,n=!1){let i=e.listeners[t];return function(e){e.flags|=8}(i),i.signal&&i.signal.removeEventListener("abort",i.signalListener),e.cow&&!n?(e.cow=!1,e.listeners=e.listeners.filter(((e,n)=>n!==t)),!1):(e.listeners.splice(t,1),!0)}YD.set(Object.prototype,KD),void 0!==AD&&void 0!==AD.Event&&YD.set(AD.Event.prototype,KD);var sx=class{constructor(){ax.set(this,Object.create(null))}addEventListener(e,t,n){let i=ox(this),{callback:r,capture:s,once:a,passive:o,signal:l,type:d}=function(e,t,n){var i;return lx(t),"object"==typeof n&&null!==n?{type:String(e),callback:null!=t?t:void 0,capture:Boolean(n.capture),passive:Boolean(n.passive),once:Boolean(n.once),signal:null!==(i=n.signal)&&void 0!==i?i:void 0}:{type:String(e),callback:null!=t?t:void 0,capture:Boolean(n),passive:!1,once:!1,signal:void 0}}(e,t,n);if(null==r||(null==l?void 0:l.aborted))return;let c=function(e,t){var n;return null!==(n=e[t])&&void 0!==n?n:e[t]={attrCallback:void 0,attrListener:void 0,cow:!1,listeners:[]}}(i,d),u=nx(c,r,s);-1===u?function(e,t,n,i,r,s){let a;s&&(a=ix.bind(null,e,t,n),s.addEventListener("abort",a));let o=function(e,t,n,i,r,s){return{callback:e,flags:(t?1:0)|(n?2:0)|(i?4:0),signal:r,signalListener:s}}(t,n,i,r,s,a);e.cow?(e.cow=!1,e.listeners=[...e.listeners,o]):e.listeners.push(o)}(c,r,s,o,a,l):function(e,t,n,i){CD.warn(QD(e)?"capture":"bubble",e.callback),ZD(e)!==t&&DD.warn("passive"),JD(e)!==n&&DD.warn("once"),e.signal!==i&&DD.warn("signal")}(c.listeners[u],o,a,l)}removeEventListener(e,t,n){let i=ox(this),{callback:r,capture:s,type:a}=function(e,t,n){return lx(t),"object"==typeof n&&null!==n?{type:String(e),callback:null!=t?t:void 0,capture:Boolean(n.capture)}:{type:String(e),callback:null!=t?t:void 0,capture:Boolean(n)}}(e,t,n),o=i[a];null!=r&&o&&ix(o,r,s)}dispatchEvent(e){let t=ox(this)[String(e.type)];if(null==t)return!0;let n=e instanceof MD?e:KD.wrap(e),i=BD(n,"event");if(i.dispatchFlag)throw r="This event has been in dispatching.",AD.DOMException?new AD.DOMException(r,"InvalidStateError"):(null==HD&&(HD=class e extends Error{constructor(t){super(t),Error.captureStackTrace&&Error.captureStackTrace(this,e)}get code(){return 11}get name(){return"InvalidStateError"}},Object.defineProperties(HD.prototype,{code:{enumerable:!0},name:{enumerable:!0}}),GD(HD),GD(HD.prototype)),new HD(r));var r;if(i.dispatchFlag=!0,i.target=i.currentTarget=this,!i.stopPropagationFlag){let{cow:e,listeners:r}=t;t.cow=!0;for(let s=0;s<r.length;++s){let a=r[s];if(!ex(a)&&(JD(a)&&rx(t,s,!e)&&(s-=1),i.inPassiveListenerFlag=ZD(a),tx(a,this,n),i.inPassiveListenerFlag=!1,i.stopImmediatePropagationFlag))break}e||(t.cow=!1)}return i.target=null,i.currentTarget=null,i.stopImmediatePropagationFlag=!1,i.stopPropagationFlag=!1,i.dispatchFlag=!1,!i.canceledFlag}},ax=new WeakMap;function ox(e,t="this"){let n=ax.get(e);return bD(null!=n,"'%s' must be an object that EventTarget constructor created, but got another one: %o",t,e),n}function lx(e){if("function"!=typeof e&&("object"!=typeof e||null===e||"function"!=typeof e.handleEvent)){if(null==e||"object"==typeof e)return void xD.warn(e);throw new TypeError(ED(xD.message,[e]))}}var dx=Object.getOwnPropertyNames(sx.prototype);for(let e=0;e<dx.length;++e)"constructor"!==dx[e]&&Object.defineProperty(sx.prototype,dx[e],{enumerable:!0});void 0!==AD&&void 0!==AD.EventTarget&&Object.setPrototypeOf(sx.prototype,AD.EventTarget.prototype);var cx,ux,hx,fx=(cx=yD(),hx=null!=cx?oD(uD(cx)):{},((e,t,n,i)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of cD(t))!hD.call(e,r)&&r!==n&&lD(e,r,{get:()=>t[r],enumerable:!(i=dD(t,r))||i.enumerable});return e})(!ux&&cx&&cx.__esModule?hx:lD(hx,"default",{value:cx,enumerable:!0}),cx)),px=512e3,mx=256,gx=(e,{minChunkSize:t=mx,maxChunkSize:n=512e3}={})=>null==e||"number"==typeof e&&e>=256&&e%256==0&&e>=t&&e<=n,vx=(e,{minChunkSize:t=mx,maxChunkSize:n=512e3}={})=>new TypeError(`chunkSize ${e} must be a positive number in multiples of 256, between ${t} and ${n}`),yx=class{constructor(e,t={}){var n,i,r;if(this.readableStream=e,!gx(t.defaultChunkSize,t))throw vx(t.defaultChunkSize,t);this.defaultChunkSize=null!=(n=t.defaultChunkSize)?n:30720,this.minChunkSize=null!=(i=t.minChunkSize)?i:mx,this.maxChunkSize=null!=(r=t.maxChunkSize)?r:px}get chunkSize(){var e;return null!=(e=this._chunkSize)?e:this.defaultChunkSize}set chunkSize(e){if(!gx(e,this))throw vx(e,this);this._chunkSize=e}get chunkByteSize(){return 1024*this.chunkSize}async*[Symbol.asyncIterator](){let e,t=this.readableStream.getReader();try{for(;;){let{done:n,value:i}=await t.read();if(n){if(e){let t=e;e=void 0,yield t}break}let r=i instanceof Uint8Array?new Blob([i],{type:"application/octet-stream"}):i;for(e=e?new Blob([e,r]):r;e;){if(e.size===this.chunkByteSize){let t=e;e=void 0,yield t;break}if(e.size<this.chunkByteSize)break;{let t=e.slice(0,this.chunkByteSize);e=e.slice(this.chunkByteSize),yield t}}}}finally{if(e){let t=e;e=void 0,yield t}return void t.releaseLock()}}},bx=null,Ex=(e,t)=>!!e&&bx.includes(e.statusCode),Tx=class{static createUpload(e){return new Tx(e)}constructor(e){this.endpoint=e.endpoint,this.file=e.file,this.headers=e.headers||{},this.method=e.method||"PUT",this.attempts=e.attempts||5,this.delayBeforeAttempt=e.delayBeforeAttempt||1,this.retryCodes=e.retryCodes||null,this.dynamicChunkSize=e.dynamicChunkSize||!1,this.maxFileBytes=1024*(e.maxFileSize||0),this.chunkCount=0,this.attemptCount=0,this.offline=!1,this._paused=!1,this.success=!1,this.nextChunkRangeStart=0,this.chunkedStreamIterable=new yx(this.file.stream(),{...e,defaultChunkSize:e.chunkSize}),this.chunkedStreamIterator=this.chunkedStreamIterable[Symbol.asyncIterator](),this.totalChunks=Math.ceil(this.file.size/this.chunkByteSize),this.eventTarget=new sx,this.validateOptions(),this.getEndpoint().then((()=>this.sendChunks())),"undefined"!=typeof window&&(window.addEventListener("online",(()=>{!this.offline||(this.offline=!1,this.dispatch("online"),this.sendChunks())})),window.addEventListener("offline",(()=>{this.offline=!0,this.dispatch("offline")})))}get maxChunkSize(){var e,t;return null!=(t=null==(e=this.chunkedStreamIterable)?void 0:e.maxChunkSize)?t:px}get minChunkSize(){var e,t;return null!=(t=null==(e=this.chunkedStreamIterable)?void 0:e.minChunkSize)?t:mx}get chunkSize(){var e,t;return null!=(t=null==(e=this.chunkedStreamIterable)?void 0:e.chunkSize)?t:30720}set chunkSize(e){this.chunkedStreamIterable.chunkSize=e}get chunkByteSize(){return this.chunkedStreamIterable.chunkByteSize}get totalChunkSize(){return Math.ceil(this.file.size/this.chunkByteSize)}on(e,t){this.eventTarget.addEventListener(e,t)}once(e,t){this.eventTarget.addEventListener(e,t,{once:!0})}off(e,t){this.eventTarget.removeEventListener(e,t)}get paused(){return this._paused}abort(){var e;this.pause(),null==(e=this.currentXhr)||e.abort()}pause(){this._paused=!0}resume(){this._paused&&(this._paused=!1,this.sendChunks())}dispatch(e,t){let n=new CustomEvent(e,{detail:t});this.eventTarget.dispatchEvent(n)}validateOptions(){if(!this.endpoint||"function"!=typeof this.endpoint&&"string"!=typeof this.endpoint)throw new TypeError("endpoint must be defined as a string or a function that returns a promise");if(!(this.file instanceof File))throw new TypeError("file must be a File object");if(this.headers&&"function"!=typeof this.headers&&"object"!=typeof this.headers)throw new TypeError("headers must be null, an object, or a function that returns an object or a promise");if(!gx(this.chunkSize,{maxChunkSize:this.maxChunkSize,minChunkSize:this.minChunkSize}))throw vx(this.chunkSize,{maxChunkSize:this.maxChunkSize,minChunkSize:this.minChunkSize});if(this.maxChunkSize&&("number"!=typeof this.maxChunkSize||this.maxChunkSize<256||this.maxChunkSize%256!=0||this.maxChunkSize<this.chunkSize||this.maxChunkSize<this.minChunkSize))throw new TypeError(`maxChunkSize must be a positive number in multiples of 256, and larger than or equal to both ${this.minChunkSize} and ${this.chunkSize}`);if(this.minChunkSize&&("number"!=typeof this.minChunkSize||this.minChunkSize<256||this.minChunkSize%256!=0||this.minChunkSize>this.chunkSize||this.minChunkSize>this.maxChunkSize))throw new TypeError(`minChunkSize must be a positive number in multiples of 256, and smaller than ${this.chunkSize} and ${this.maxChunkSize}`);if(this.maxFileBytes>0&&this.maxFileBytes<this.file.size)throw new Error(`file size exceeds maximum (${this.file.size} > ${this.maxFileBytes})`);if(this.attempts&&("number"!=typeof this.attempts||this.attempts<=0))throw new TypeError("retries must be a positive number");if(this.delayBeforeAttempt&&("number"!=typeof this.delayBeforeAttempt||this.delayBeforeAttempt<0))throw new TypeError("delayBeforeAttempt must be a positive number")}getEndpoint(){return"string"==typeof this.endpoint?(this.endpointValue=this.endpoint,Promise.resolve(this.endpoint)):this.endpoint(this.file).then((e=>(this.endpointValue=e,this.endpointValue)))}xhrPromise(e){let t=e=>{e.upload.onprogress=e=>{var t;let n=this.totalChunks-this.chunkCount,i=(this.file.size-this.nextChunkRangeStart)/this.file.size/n,r=this.nextChunkRangeStart/this.file.size,s=e.loaded/(null!=(t=e.total)?t:this.chunkByteSize)*i;this.dispatch("progress",Math.min(100*(r+s),100))}};return new Promise(((n,i)=>{this.currentXhr=(0,fx.default)({...e,beforeSend:t},((e,t)=>(this.currentXhr=void 0,e?i(e):n(t))))}))}async sendChunk(e){let t=this.nextChunkRangeStart,n=t+e.size-1,i={...await("function"==typeof this.headers?this.headers():this.headers),"Content-Type":this.file.type,"Content-Range":`bytes ${t}-${n}/${this.file.size}`};return this.dispatch("attempt",{chunkNumber:this.chunkCount,totalChunks:this.totalChunks,chunkSize:this.chunkSize}),this.xhrPromise({headers:i,url:this.endpointValue,method:this.method,body:e})}async sendChunkWithRetries(e){let t;try{this.attemptCount=this.attemptCount+1,this.lastChunkStart=new Date,t=await this.sendChunk(e)}catch{}let n={retryCodes:this.retryCodes,attemptCount:this.attemptCount,attempts:this.attempts};return Ex(t)?(async(e,t)=>{var n;let i=((new Date).getTime()-this.lastChunkStart.getTime())/1e3;if(this.dispatch("chunkSuccess",{chunk:this.chunkCount,chunkSize:this.chunkSize,attempts:this.attemptCount,timeInterval:i,response:e}),this.attemptCount=0,this.chunkCount=(null!=(n=this.chunkCount)?n:0)+1,this.nextChunkRangeStart=this.nextChunkRangeStart+this.chunkByteSize,this.dynamicChunkSize){let e=this.chunkSize;i<10?e=Math.min(2*this.chunkSize,this.maxChunkSize):i>30&&(e=Math.max(this.chunkSize/2,this.minChunkSize)),this.chunkSize=256*Math.ceil(e/256);let t=(this.file.size-this.nextChunkRangeStart)/this.chunkByteSize;this.totalChunks=Math.ceil(this.chunkCount+t)}return!0})(t):((e,t)=>t.attemptCount>=t.attempts||!(Ex(e)||((e,{retryCodes:t=null})=>!e||t.includes(e.statusCode))(e,t)))(t,n)?(async(e,t)=>(this.dispatch("error",{message:`Server responded with ${e.statusCode}. Stopping upload.`,chunk:this.chunkCount,attempts:this.attemptCount}),!1))(t):(async(t,n)=>(this.dispatch("attemptFailure",{message:`An error occured uploading chunk ${this.chunkCount}. ${this.attempts-this.attemptCount} retries left.`,chunkNumber:this.chunkCount,attemptsLeft:this.attempts-this.attemptCount}),new Promise((t=>{setTimeout((async()=>{if(this._paused||this.offline)return this.pendingChunk=e,void t(!1);let n=await this.sendChunkWithRetries(e);t(n)}),1e3*this.delayBeforeAttempt)}))))()}async sendChunks(){if(this.pendingChunk&&!this._paused&&!this.offline){let e=this.pendingChunk;this.pendingChunk=void 0;let t=await this.sendChunkWithRetries(e);this.success&&t&&this.dispatch("success")}for(;!(this.success||this._paused||this.offline);){let{value:e,done:t}=await this.chunkedStreamIterator.next(),n=!e&&t;if(e&&(n=await this.sendChunkWithRetries(e)),this.success=!!t,this.success&&n&&this.dispatch("success"),!n)return}}},_x=Tx.createUpload,Ax={class:""},Sx=["onDragover"],kx=["accept","multiple"];function wx(e){return function(e){if(Array.isArray(e))return Lx(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Lx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Lx(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lx(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}const Rx={props:{multiple:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},acceptExtensions:{type:String,default:""},maxFileSize:{type:Number,default:NaN},validateFn:{type:Function,default:function(){return!0}}},emits:["changed","validated"],setup:function(e,t){var n=t.emit,i=Vt(),r=Vt(!1),s=function(t){return!e.multiple&&t.length>1?"MULTIFILES_ERROR":function(t){var n=wx(new Set(e.acceptExtensions.toLowerCase().split(",").filter(Boolean)));return-1===Array.from(t).findIndex((function(e){var t=".".concat(e.name.toLowerCase().split(".").pop());return!n.includes(t)}))}(t)?function(t){return!!Number.isNaN(e.maxFileSize)||-1===Array.from(t).findIndex((function(t){return t.size>e.maxFileSize}))}(t)?e.validateFn(t):"FILE_SIZE_ERROR":"EXTENSION_ERROR"},a=function(e){var t=s(e);n("validated",t,e),!0===t&&n("changed",e),i.value=""};return{fsFileInput:i,isDragEnter:r,onFileSelect:function(e){a(e.dataTransfer.files)},openFileSelectWindow:function(e){i.value.click()},handleDrop:function(e){r.value=!1,a(e.dataTransfer.files)},validate:s}}};var Ix=n(379),Cx=n.n(Ix),Dx=n(925),xx={insert:"head",singleton:!1};Cx()(Dx.Z,xx);Dx.Z.locals;var Mx=n(744);const Px=(0,Mx.Z)(Rx,[["render",function(e,t,n,i,r,s){return Rs(),Ps("div",null,[Hs("div",Ax,[Hs("button",{type:"button",class:Q(["btn",[i.isDragEnter?"":" dashed"]]),"data-icon":"upload","aria-label":"Upload a video",onClick:t[0]||(t[0]=Ko((function(){return i.openFileSelectWindow&&i.openFileSelectWindow.apply(i,arguments)}),["stop","prevent"])),onDragenter:t[1]||(t[1]=Ko((function(e){return i.isDragEnter=!0}),["stop","prevent"])),onDragover:Ko((function(){}),["stop","prevent"]),onDragleave:t[2]||(t[2]=Ko((function(e){return i.isDragEnter=!1}),["stop","prevent"])),onDrop:t[3]||(t[3]=Ko((function(){return i.handleDrop&&i.handleDrop.apply(i,arguments)}),["stop","prevent"]))}," Upload a video to MUX ",42,Sx),Hs("input",{ref:"fsFileInput",id:"file-upload",name:"file-upload",accept:n.acceptExtensions,tabindex:"-1",multiple:n.multiple,type:"file",class:"sr-only",onChange:t[4]||(t[4]=function(){return i.onFileSelect&&i.onFileSelect.apply(i,arguments)})},null,40,kx)]),rr(e.$slots,"files")])}]]);var Ox=function(e){return Un("data-v-28f3dfbc"),e=e(),Bn(),e},Nx={class:"mux-field-main flex-grow"},Fx={class:"mux-field"},Ux={class:""},Bx={class:"mux-asset-menu"},$x=[Ox((function(){return Hs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[Hs("path",{path:"currentColor","stroke-linecap":"round","stroke-linejoin":"round",d:"M8.625 12a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H8.25m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H12m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0h-.375M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)}))],Vx={key:0,class:"menu menu--disclosure",ref:"muxAssetMenu"},Hx={class:"flex-grow"},Wx={class:"flex flex-nowrap"},Gx=Ox((function(){return Hs("span",null,"Add Language Track",-1)})),Kx={class:"flex-grow"},jx={class:"flex flex-nowrap"},qx=Ox((function(){return Hs("span",null,"Remove Asset",-1)}));kt({assets:[],asset:null,total:0,selected:null,loading:!1,params:{limit:12,page:1}}),kt({progress:0,progressTotal:100,uploading:!1,uploadingFile:null});var Yx=function(e){return Un("data-v-05a8ed02"),e=e(),Bn(),e},zx={class:"mux-asset-track-form"},Xx={class:"field width-100"},Qx=Ys('<div class="heading" data-v-05a8ed02><label id="mux-track-url-heading" for="mux-track-url" data-v-05a8ed02> Caption/Subtitles File URL <span class="visually-hidden" data-v-05a8ed02>Required</span><span class="required" aria-hidden="true" data-v-05a8ed02></span><span class="info" data-v-05a8ed02><ol data-v-05a8ed02><li data-v-05a8ed02>Upload the caption file of the asset in either .srt or .vtt format to Craft CMS Assets.</li><li data-v-05a8ed02>Retrieve the URL associated with this input.</li></ol></span></label></div>',1),Zx={class:"input ltr"},Jx={class:"field-group"},eM={class:"field width-100"},tM=Yx((function(){return Hs("div",{class:"heading"},[Hs("label",{id:"mux-track-language-name-heading",for:"mux-track-language-name"},[qs("Language Name "),Hs("span",{class:"visually-hidden"},"Required"),Hs("span",{class:"required","aria-hidden":"true"})])],-1)})),nM={class:"input ltr"},iM={class:"field width-100"},rM=Yx((function(){return Hs("div",{class:"heading"},[Hs("label",{id:"mux-track-language-code-heading",for:"mux-track-language-code"},[qs("Language Code"),Hs("span",{class:"visually-hidden"},"Required"),Hs("span",{class:"required","aria-hidden":"true"})])],-1)})),sM={class:"input ltr"},aM={class:"field lightswitch-field"},oM=Yx((function(){return Hs("div",{class:"heading"},[Hs("label",{id:"mux-track-closed-captions-heading",for:"mux-track-closed-captions"},"Closed Captions")],-1)})),lM={class:"input ltr"},dM=[Yx((function(){return Hs("div",{class:"handle"},null,-1)}))],cM={class:"field"},uM=[Yx((function(){return Hs("div",{class:"label"},"Add Track",-1)})),Yx((function(){return Hs("div",{class:"spinner spinner-absolute"},null,-1)}))];const hM={__name:"MuxAssetTrackForm",props:{assetId:{type:[Number,String],required:!0}},setup:function(e){var t=e,n=Kr("emitter"),i=Vt(!1),r=kt({url:"",type:"text",text_type:"subtitles",language_code:"",name:"",closed_captions:!0}),s=function(e){i.value=!0,function(e,t){return new Promise((function(n,i){var r={id:e,track:t};r[window.Craft.csrfTokenName]=window.Craft.csrfTokenValue,fetch("/actions/mux/assets/add-asset-track-by-id",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(r)}).then((function(e){if(!e.ok)throw new Error("HTTP error ".concat(e.status));return e.json()})).then((function(e){n(e)})).catch((function(e){console.log(e),i("Adding asset track failed!")}))}))}(t.assetId,r).then((function(e){i.value=!1,n.emit("mux-asset-track-added")})).catch((function(e){i.value=!1}))};return function(e,t){return Rs(),Ps("div",zx,[Hs("div",Xx,[Qx,Hs("div",Zx,[ci(Hs("input",{id:"mux-track-url","onUpdate:modelValue":t[0]||(t[0]=function(e){return r.url=e}),type:"text",class:"nicetext code text fullwidth",autocomplete:"off",placeholder:"",dir:"ltr",required:""},null,512),[[xo,r.url]])])]),Hs("div",Jx,[Hs("div",eM,[tM,Hs("div",nM,[ci(Hs("input",{id:"mux-track-language-name","onUpdate:modelValue":t[1]||(t[1]=function(e){return r.name=e}),type:"text",class:"nicetext text fullwidth",autocomplete:"off",placeholder:"US English",dir:"ltr",required:""},null,512),[[xo,r.name]])])]),Hs("div",iM,[rM,Hs("div",sM,[ci(Hs("input",{id:"mux-track-language-code","onUpdate:modelValue":t[2]||(t[2]=function(e){return r.language_code=e}),type:"text",class:"nicetext text fullwidth",autocomplete:"off",placeholder:"en-US",dir:"ltr",required:""},null,512),[[xo,r.language_code]])])]),Hs("div",aM,[oM,Hs("div",lM,[Hs("button",{id:"mux-track-closed-captions",type:"button",class:Q(["lightswitch",[r.closed_captions?"on":""]]),role:"switch","aria-checked":"true","aria-labelledby":"mux-track-closed-captions","aria-describedby":"mux-track-closed-captions-instructions",onClick:t[4]||(t[4]=Ko((function(e){return r.closed_captions=!r.closed_captions}),["prevent"]))},[Hs("div",{class:"lightswitch-container",style:j([r.closed_captions?"margin-left: 0px;":"margin-left: -12px;"])},dM,4),ci(Hs("input",{"onUpdate:modelValue":t[3]||(t[3]=function(e){return r.closed_captions=e}),type:"hidden",name:"mux-track-closed-captions"},null,512),[[xo,r.closed_captions]])],2)])])]),Hs("div",cM,[Hs("button",{type:"button",class:Q(["btn submit",{loading:i.value}]),onClick:t[5]||(t[5]=function(e){return s()})},uM,2)])])}}};var fM=n(949),pM={insert:"head",singleton:!1};Cx()(fM.Z,pM);fM.Z.locals;const mM=(0,Mx.Z)(hM,[["__scopeId","data-v-05a8ed02"]]);function gM(e){return!!fe()&&(pe(e),!0)}function vM(e){return"function"==typeof e?e():jt(e)}const yM="undefined"!=typeof window&&"undefined"!=typeof document,bM=Object.prototype.toString,EM=e=>"[object Object]"===bM.call(e),TM=()=>{},_M=AM();function AM(){var e;return yM&&(null==(e=null==window?void 0:window.navigator)?void 0:e.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent)}function SM(e){const t=Object.create(null);return n=>t[n]||(t[n]=e(n))}const kM=/\B([A-Z])/g,wM=(SM((e=>e.replace(kM,"-$1").toLowerCase())),/-(\w)/g);SM((e=>e.replace(wM,((e,t)=>t?t.toUpperCase():""))));function LM(e){var t;const n=vM(e);return null!=(t=null==n?void 0:n.$el)?t:n}const RM=yM?window:void 0;yM&&window.document,yM&&window.navigator,yM&&window.location;function IM(...e){let t,n,i,r;if("string"==typeof e[0]||Array.isArray(e[0])?([n,i,r]=e,t=RM):[t,n,i,r]=e,!t)return TM;Array.isArray(n)||(n=[n]),Array.isArray(i)||(i=[i]);const s=[],a=()=>{s.forEach((e=>e())),s.length=0},o=si((()=>[LM(t),vM(r)]),(([e,t])=>{if(a(),!e)return;const r=EM(t)?{...t}:t;s.push(...n.flatMap((t=>i.map((n=>((e,t,n,i)=>(e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)))(e,t,n,r))))))}),{immediate:!0,flush:"post"}),l=()=>{o(),a()};return gM(l),l}let CM=!1;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;Number.POSITIVE_INFINITY;const DM={props:{file:{type:Object,default:{asset_id:null,playback_ids:[]}}},emits:["mux-asset-deleted"],setup:function(e,t){var n=t.emit,i=Vt(!1),r=Vt(!1),s=Vt(null);!function(e,t,n={}){const{window:i=RM,ignore:r=[],capture:s=!0,detectIframe:a=!1}=n;if(!i)return;_M&&!CM&&(CM=!0,Array.from(i.document.body.children).forEach((e=>e.addEventListener("click",TM))),i.document.documentElement.addEventListener("click",TM));let o=!0;const l=e=>r.some((t=>{if("string"==typeof t)return Array.from(i.document.querySelectorAll(t)).some((t=>t===e.target||e.composedPath().includes(t)));{const n=LM(t);return n&&(e.target===n||e.composedPath().includes(n))}})),d=[IM(i,"click",(n=>{const i=LM(e);i&&i!==n.target&&!n.composedPath().includes(i)&&(0===n.detail&&(o=!l(n)),o?t(n):o=!0)}),{passive:!0,capture:s}),IM(i,"pointerdown",(t=>{const n=LM(e);n&&(o=!t.composedPath().includes(n)&&!l(t))}),{passive:!0}),a&&IM(i,"blur",(n=>{setTimeout((()=>{var r;const s=LM(e);"IFRAME"!==(null==(r=i.document.activeElement)?void 0:r.tagName)||(null==s?void 0:s.contains(i.document.activeElement))||t(n)}),0)}))].filter(Boolean)}(s,(function(e){i.value=!1}));return{menuOpen:i,muxAssetMenu:s,onDeleteAsset:function(t){i.value=!1,function(e){return new Promise((function(t,n){var i={id:e};i[window.Craft.csrfTokenName]=window.Craft.csrfTokenValue,fetch("/actions/mux/assets/delete-asset-by-id",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(i)}).then((function(e){if(!e.ok)throw new Error("HTTP error ".concat(e.status));return e.json()})).then((function(e){t(e)})).catch((function(e){console.log(e)}))}))}(e.file.id).then((function(t){n("mux-asset-deleted",e.file)}))},onTrackAdded:function(e){},trackFormOpen:r}},components:{EllipsisHorizontalCircleIcon:function(e,t){return Rs(),Ps("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[Hs("path",{"fill-rule":"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm0 8.625a1.125 1.125 0 100 2.25 1.125 1.125 0 000-2.25zM15.375 12a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zM7.5 10.875a1.125 1.125 0 100 2.25 1.125 1.125 0 000-2.25z","clip-rule":"evenodd"})])},PlusCircleIcon:function(e,t){return Rs(),Ps("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[Hs("path",{"fill-rule":"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zM12.75 9a.75.75 0 00-1.5 0v2.25H9a.75.75 0 000 1.5h2.25V15a.75.75 0 001.5 0v-2.25H15a.75.75 0 000-1.5h-2.25V9z","clip-rule":"evenodd"})])},XCircleIcon:function(e,t){return Rs(),Ps("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[Hs("path",{"fill-rule":"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm-1.72 6.97a.75.75 0 10-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 101.06 1.06L12 13.06l1.72 1.72a.75.75 0 101.06-1.06L13.06 12l1.72-1.72a.75.75 0 10-1.06-1.06L12 10.94l-1.72-1.72z","clip-rule":"evenodd"})])},MuxAssetTrackForm:mM}};var xM=n(770),MM={insert:"head",singleton:!1};Cx()(xM.Z,MM);xM.Z.locals;const PM=(0,Mx.Z)(DM,[["render",function(e,t,n,i,r,s){var a=Xi("mux-player"),o=Xi("PlusCircleIcon"),l=Xi("XCircleIcon"),d=Xi("mux-asset-track-form");return Rs(),Ps("div",Nx,[Hs("div",Fx,[Hs("figure",Ux,[Ws(a,{"playback-id":n.file.playback_ids[0].id,"metadata-video-id":"props.file.id","stream-type":"on-demand","primary-color":"#ffffff","secondary-color":"rgba(0,0,0,.3)"},null,8,["playback-id"])]),Hs("div",Bx,[Hs("button",{onClick:t[0]||(t[0]=Ko((function(e){return i.menuOpen=!i.menuOpen}),["prevent"]))},$x),i.menuOpen?(Rs(),Ps("div",Vx,[Hs("ul",null,[Hs("li",null,[Hs("a",{href:"#",class:"",onClick:t[1]||(t[1]=Ko((function(e){return i.trackFormOpen=!i.trackFormOpen}),["prevent"]))},[Hs("div",Hx,[Hs("div",Wx,[Ws(o,{class:"pluscircleicon"}),qs(),Gx])])])]),Hs("li",null,[Hs("a",{href:"#",class:"error",alt:"Delete Mux Asset",onClick:t[2]||(t[2]=Ko((function(){return i.onDeleteAsset&&i.onDeleteAsset.apply(i,arguments)}),["prevent"]))},[Hs("div",Kx,[Hs("div",jx,[Ws(l,{class:"xcircleicon"}),qs(),qx])])])])])],512)):zs("",!0)])]),i.trackFormOpen?(Rs(),Os(d,{key:0,"asset-id":n.file.id,onMuxAssetTrackAdded:i.onTrackAdded},null,8,["asset-id","onMuxAssetTrackAdded"])):zs("",!0)])}],["__scopeId","data-v-28f3dfbc"]]);var OM={class:"progressbar"};const NM={props:{value:{type:Number,default:0}},setup:function(e){return{bar:Vt()}}};var FM=n(584),UM={insert:"head",singleton:!1};Cx()(FM.Z,UM);FM.Z.locals;const BM={props:{name:{type:String,default:""},value:{type:Object,default:null}},setup:function(e,t){t.emit;var n=Vt([]),i=Vt(0);return $i((function(){console.log("MUX FIELD INITIAL VALUE"),console.log(e.value),null!==e.value&&""!==e.value&&(n.value=[e.value])})),{onFileValidated:function(e){},onFileSelect:function(e){var t=e[0];new Promise((function(e,t){fetch("/actions/mux/assets/upload-asset").then((function(e){if(!e.ok)throw new Error("HTTP error "+e.status);return e.json()})).then((function(t){e(t)})).catch((function(){t()}))})).then((function(e){var r=_x({endpoint:e.url,file:t,chunkSize:30720});r.on("error",(function(e){console.error("💥 🙀",e.detail)})),r.on("progress",(function(e){i.value=e.detail})),r.on("success",(function(t){var r;(r=e.id,new Promise((function(e,t){var n={id:r};n[window.Craft.csrfTokenName]=window.Craft.csrfTokenValue,fetch("/actions/mux/assets/get-upload-by-id",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){if(!e.ok)throw new Error("HTTP error "+e.status);return e.json()})).then((function(t){e(t)})).catch((function(e){console.log(e)}))}))).then((function(e){(function(e){return new Promise((function(t,n){var i={id:e};i[window.Craft.csrfTokenName]=window.Craft.csrfTokenValue,fetch("/actions/mux/assets/get-asset-by-id",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(i)}).then((function(e){if(!e.ok)throw new Error("HTTP error "+e.status);return e.json()})).then((function(e){t(e)})).catch((function(e){console.log(e)}))}))})(e.asset_id).then((function(e){n.value=[e],i.value=0}))}))}))}))},onDeletedAsset:function(e){n.value=[]},assets:n,progress:i}},components:{FileInput:Px,File:PM,ProgressBar:(0,Mx.Z)(NM,[["render",function(e,t,n,i,r,s){return Rs(),Ps("div",OM,[Hs("div",{ref:"bar",class:"progressbar-inner",style:j("--progressbar-width:".concat(n.value,"%;"))},null,4)])}],["__scopeId","data-v-198a6554"]])}};il({name:"MuxField",components:{MuxAsset:(0,Mx.Z)(BM,[["render",function(e,t,n,i,r,s){var a=Xi("progress-bar"),o=Xi("file-input"),l=Xi("file");return Rs(),Ps("div",null,[0==i.assets.length?(Rs(),Os(o,{key:0,"accept-extensions":".mp4,.mov",multiple:!1,"max-file-size":734003200,onValidated:i.onFileValidated,onChanged:i.onFileSelect},{files:Vn((function(){return[Ws(a,{value:i.progress},null,8,["value"])]})),_:1},8,["onValidated","onChanged"])):zs("",!0),i.assets.length>0?(Rs(),Ps("div",Yu,[(Rs(!0),Ps(_s,null,nr(i.assets,(function(e){return Rs(),Os(l,{file:e,key:e.id,onMuxAssetDeleted:i.onDeletedAsset},null,8,["file","onMuxAssetDeleted"])})),128))])):zs("",!0),Hs("input",{type:"hidden",name:n.name,value:i.assets.length>0?JSON.stringify(i.assets[0]):""},null,8,zu)])}]])}}).mount("[id*=mux-muxfield]")},770:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(645),r=n.n(i)()((function(e){return e[1]}));r.push([e.id,".mux-field-main[data-v-28f3dfbc]{display:flex;flex-wrap:wrap;margin-top:16px}.mux-field[data-v-28f3dfbc],.mux-field-main[data-v-28f3dfbc]{align-items:flex-start;flex-direction:row;gap:14px;justify-content:flex-start}.mux-field[data-v-28f3dfbc]{display:inline-flex;position:relative}.mux-field>button[data-v-28f3dfbc]{color:var(--ui-control-color);z-index:2}button[data-v-28f3dfbc]:hover{color:rgba(96,125,159,.9)}figure[data-v-28f3dfbc]{max-width:360px;width:360px;z-index:1}.mux-asset-menu[data-v-28f3dfbc],figure[data-v-28f3dfbc]{position:relative}.mux-asset-menu>div[data-v-28f3dfbc]{right:0;top:100%;z-index:50}.mux-asset-menu>.menu[data-v-28f3dfbc]{display:block!important}.mux-asset-menu>.menu li[data-v-28f3dfbc]{align-items:center;display:flex}.mux-asset-menu>button>svg[data-v-28f3dfbc]{color:currentColor;height:32px;width:32px}.pluscircleicon[data-v-28f3dfbc],.xcircleicon[data-v-28f3dfbc]{color:currentColor;height:20px;width:20px}mux-player[data-v-28f3dfbc]{--controls-backdrop-color:rgba(0,0,0,.6)}",""]);const s=r},925:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(645),r=n.n(i)()((function(e){return e[1]}));r.push([e.id,".sr-only{clip:rect(0,0,0,0);border-width:0;height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}",""]);const s=r},949:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(645),r=n.n(i)()((function(e){return e[1]}));r.push([e.id,".mux-asset-track-form[data-v-05a8ed02]{flex:1 1 auto}.field-group[data-v-05a8ed02]{align-items:flex-start;display:flex;flex-wrap:wrap;gap:24px}.field-group .field[data-v-05a8ed02]{margin:0!important}.field-group>div[data-v-05a8ed02]:not(:last-child){flex:1 1 auto}.field-group>div[data-v-05a8ed02]:last-child{flex:1 0 auto}",""]);const s=r},584:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(645),r=n.n(i)()((function(e){return e[1]}));r.push([e.id,".progressbar[data-v-198a6554]{left:0;margin-top:16px;position:relative;width:100%}.progressbar-inner[data-v-198a6554]{--progressbar-width:0}.progressbar:not(.pending) .progressbar-inner[data-v-198a6554]{width:var(--progressbar-width)}",""]);const s=r},645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,i){"string"==typeof e&&(e=[[null,e,""]]);var r={};if(i)for(var s=0;s<this.length;s++){var a=this[s][0];null!=a&&(r[a]=!0)}for(var o=0;o<e.length;o++){var l=[].concat(e[o]);i&&r[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),t.push(l))}},t}},50:()=>{},125:e=>{var t;t=function(){return function(){var e={80:function(e,t,n){e.exports=n(728).default},728:function(e,t,n){"use strict";n.d(t,{default:function(){return Ot}});var i=n(48),r=n.n(i),s=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},a=function(){return("000000"+(Math.random()*Math.pow(36,6)<<0).toString(36)).slice(-6)},o=function(e){return e&&void 0!==e.nodeName?(e.muxId||(e.muxId=e.id||a()),e.muxId):e},l=function(e){var t;e&&void 0!==e.nodeName?e=o(t=e):t=document.querySelector(e);var n=t&&t.nodeName?t.nodeName.toLowerCase():"";return[t,e,n]},d=n(640),c=n.n(d),u=c().methodFactory;c().methodFactory=function(e,t,n){var i=u(e,t,n);return function(){for(var e=["[mux]"],t=0;t<arguments.length;t++)e.push(arguments[t]);i.apply(void 0,e)}},c().setLevel(c().getLevel());var h=c();function f(){return"1"===(r().doNotTrack||r().navigator&&r().navigator.doNotTrack)}var p={now:function(){var e=r().performance,t=e&&e.timing,n=t&&t.navigationStart,i="number"==typeof n&&"function"==typeof e.now?n+e.now():Date.now();return Math.round(i)}},m=function(e){return g(e)[0]},g=function(e){if("string"!=typeof e||""===e)return["localhost"];var t,n=(e.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/)||[])[4];return n&&(t=(n.match(/[^\.]+\.[^\.]+$/)||[])[0]),[n,t]},v=function(){var e=r().performance;return void 0!==(e&&e.timing)},y=function(){var e=r().performance,t=e&&e.timing;return t&&t.domContentLoadedEventEnd},b=function(){var e=r().performance,t=e&&e.timing;return t&&t.navigationStart};function E(e,t,n){n=void 0===n?1:n,e[t]=e[t]||0,e[t]+=n}var T=["x-request-id","cf-ray","x-amz-cf-id","x-akamai-request-id"],_=["x-cdn","content-type"].concat(T);function A(e){var t={};return(e=e||"").trim().split(/[\r\n]+/).forEach((function(e){if(e){var n=e.split(": "),i=n.shift();i&&(_.indexOf(i.toLowerCase())>=0||0===i.toLowerCase().indexOf("x-litix-"))&&(t[i]=n.join(": "))}})),t}function S(e){if(e){var t=T.find((function(t){return void 0!==e[t]}));return t?e[t]:void 0}}var k=function(e){var t={};for(var n in e){var i=e[n];-1!==i["DATA-ID"].search("io.litix.data.")&&(t[i["DATA-ID"].replace("io.litix.data.","")]=i.VALUE)}return t};function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){R(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=function(e){if(!e)return{};var t=b(),n=e.loading,i=n?n.start:e.trequest,r=n?n.first:e.tfirst,s=n?n.end:e.tload;return{bytesLoaded:e.total,requestStart:Math.round(t+i),responseStart:Math.round(t+r),responseEnd:Math.round(t+s)}},C=function(e){if(e&&"function"==typeof e.getAllResponseHeaders)return A(e.getAllResponseHeaders())};function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){M(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var P=function(e,t){if(!e||"function"!=typeof e.getRequests)return{};var n=e.getRequests({state:"executed"});if(0===n.length)return{};var i,r=n[n.length-1],s=m(r.url),a=r.url,o=r.bytesLoaded,l=new Date(r.requestStartDate).getTime(),d=new Date(r.firstByteDate).getTime(),c=new Date(r.requestEndDate).getTime(),u=isNaN(r.duration)?0:r.duration,h="function"==typeof t.getMetricsFor?t.getMetricsFor(r.mediaType).HttpList:t.getDashMetrics().getHttpRequests(r.mediaType);return h.length>0&&(i=A(h[h.length-1]._responseHeaders||"")),{requestStart:l,requestResponseStart:d,requestResponseEnd:c,requestBytesLoaded:o,requestResponseHeaders:i,requestMediaDuration:u,requestHostname:s,requestUrl:a,requestId:i?S(i):void 0}},O=function(e){var t;return null===(t=e.match(/.*codecs\*?="(.*)"/))||void 0===t?void 0:t[1]};function N(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var F=0,U=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"on",value:function(e,t,n){return t._eventEmitterGuid=t._eventEmitterGuid||++F,this._listeners=this._listeners||{},this._listeners[e]=this._listeners[e]||[],n&&(t=t.bind(n)),this._listeners[e].push(t),t}},{key:"off",value:function(e,t){var n=this._listeners&&this._listeners[e];n&&n.forEach((function(e,i){e._eventEmitterGuid===t._eventEmitterGuid&&n.splice(i,1)}))}},{key:"one",value:function(e,t,n){var i=this;t._eventEmitterGuid=t._eventEmitterGuid||++F;var r=function r(){i.off(e,r),t.apply(n||this,arguments)};r._eventEmitterGuid=t._eventEmitterGuid,this.on(e,r)}},{key:"emit",value:function(e,t){var n=this;if(this._listeners){t=t||{};var i=this._listeners["before*"]||[],r=this._listeners[e]||[],s=this._listeners["after"+e]||[],a=function(t,i){(t=t.slice()).forEach((function(t){t.call(n,{type:e},i)}))};a(i,t),a(r,t),a(s,t)}}}],n&&N(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),B=U;function $(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var V=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pm=t,this._playbackHeartbeatInterval=null,this._playheadShouldBeProgressing=!1,t.on("playing",(function(){n._playheadShouldBeProgressing=!0})),t.on("play",this._startPlaybackHeartbeatInterval.bind(this)),t.on("playing",this._startPlaybackHeartbeatInterval.bind(this)),t.on("adbreakstart",this._startPlaybackHeartbeatInterval.bind(this)),t.on("adplay",this._startPlaybackHeartbeatInterval.bind(this)),t.on("adplaying",this._startPlaybackHeartbeatInterval.bind(this)),t.on("seeking",this._startPlaybackHeartbeatInterval.bind(this)),t.on("devicewake",this._startPlaybackHeartbeatInterval.bind(this)),t.on("viewstart",this._startPlaybackHeartbeatInterval.bind(this)),t.on("rebufferstart",this._startPlaybackHeartbeatInterval.bind(this)),t.on("pause",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("ended",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("viewend",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("error",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("aderror",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("adpause",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("adended",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("adbreakend",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("seeked",(function(){t.data.player_is_paused?n._stopPlaybackHeartbeatInterval():n._startPlaybackHeartbeatInterval()})),t.on("timeupdate",(function(){null!==n._playbackHeartbeatInterval&&t.emit("playbackheartbeat")})),t.on("devicesleep",(function(e,i){null!==n._playbackHeartbeatInterval&&(r().clearInterval(n._playbackHeartbeatInterval),t.emit("playbackheartbeatend",{viewer_time:i.viewer_time}),n._playbackHeartbeatInterval=null)}))}var t,n;return t=e,(n=[{key:"_startPlaybackHeartbeatInterval",value:function(){var e=this;null===this._playbackHeartbeatInterval&&(this.pm.emit("playbackheartbeat"),this._playbackHeartbeatInterval=r().setInterval((function(){e.pm.emit("playbackheartbeat")}),this.pm.playbackHeartbeatTime))}},{key:"_stopPlaybackHeartbeatInterval",value:function(){this._playheadShouldBeProgressing=!1,null!==this._playbackHeartbeatInterval&&(r().clearInterval(this._playbackHeartbeatInterval),this.pm.emit("playbackheartbeatend"),this._playbackHeartbeatInterval=null)}}])&&$(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function H(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var W=function(e,t,n){return t&&H(e.prototype,t),n&&H(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t.on("viewinit",(function(){n.viewErrored=!1})),t.on("error",(function(e,i){try{var r=t.errorTranslator({player_error_code:i.player_error_code,player_error_message:i.player_error_message,player_error_context:i.player_error_context});r?(t.data.player_error_code=r.player_error_code||i.player_error_code,t.data.player_error_message=r.player_error_message||i.player_error_message,t.data.player_error_context=r.player_error_context||i.player_error_context,n.viewErrored=!0):(delete t.data.player_error_code,delete t.data.player_error_message,delete t.data.player_error_context)}catch(e){t.mux.log.warn("Exception in error translator callback.",e),n.viewErrored=!0}}))}));function G(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var K=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pm=t,this._watchTimeTrackerLastCheckedTime=null,t.on("playbackheartbeat",this._updateWatchTime.bind(this)),t.on("playbackheartbeatend",this._clearWatchTimeState.bind(this))}var t,n;return t=e,(n=[{key:"_updateWatchTime",value:function(e,t){var n=t.viewer_time;null===this._watchTimeTrackerLastCheckedTime&&(this._watchTimeTrackerLastCheckedTime=n),E(this.pm.data,"view_watch_time",n-this._watchTimeTrackerLastCheckedTime),this._watchTimeTrackerLastCheckedTime=n}},{key:"_clearWatchTimeState",value:function(e,t){this._updateWatchTime(e,t),this._watchTimeTrackerLastCheckedTime=null}}])&&G(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function j(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var q=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pm=t,this._playbackTimeTrackerLastPlayheadPosition=-1,this._lastTime=p.now(),this._isAdPlaying=!1,this._callbackUpdatePlaybackTime=null;var i=this._startPlaybackTimeTracking.bind(this);t.on("playing",i),t.on("adplaying",i),t.on("seeked",i);var r=this._stopPlaybackTimeTracking.bind(this);t.on("playbackheartbeatend",r),t.on("seeking",r),t.on("adplaying",(function(){n._isAdPlaying=!0})),t.on("adended",(function(){n._isAdPlaying=!1})),t.on("adpause",(function(){n._isAdPlaying=!1})),t.on("adbreakstart",(function(){n._isAdPlaying=!1})),t.on("adbreakend",(function(){n._isAdPlaying=!1})),t.on("adplay",(function(){n._isAdPlaying=!1})),t.on("viewinit",(function(){n._playbackTimeTrackerLastPlayheadPosition=-1,n._lastTime=p.now(),n._isAdPlaying=!1,n._callbackUpdatePlaybackTime=null}))}var t,n;return t=e,(n=[{key:"_startPlaybackTimeTracking",value:function(){null===this._callbackUpdatePlaybackTime&&(this._callbackUpdatePlaybackTime=this._updatePlaybackTime.bind(this),this._playbackTimeTrackerLastPlayheadPosition=this.pm.data.player_playhead_time,this.pm.on("playbackheartbeat",this._callbackUpdatePlaybackTime))}},{key:"_stopPlaybackTimeTracking",value:function(){this._callbackUpdatePlaybackTime&&(this._updatePlaybackTime(),this.pm.off("playbackheartbeat",this._callbackUpdatePlaybackTime),this._callbackUpdatePlaybackTime=null,this._playbackTimeTrackerLastPlayheadPosition=-1)}},{key:"_updatePlaybackTime",value:function(){var e=this.pm.data.player_playhead_time,t=p.now(),n=-1;this._playbackTimeTrackerLastPlayheadPosition>=0&&e>this._playbackTimeTrackerLastPlayheadPosition?n=e-this._playbackTimeTrackerLastPlayheadPosition:this._isAdPlaying&&(n=t-this._lastTime),n>0&&n<=1e3&&E(this.pm.data,"view_content_playback_time",n),this._playbackTimeTrackerLastPlayheadPosition=e,this._lastTime=t}}])&&j(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Y(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var z=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pm=t;var n=this._updatePlayheadTime.bind(this);t.on("playbackheartbeat",n),t.on("playbackheartbeatend",n),t.on("timeupdate",n),t.on("destroy",(function(){t.off("timeupdate",n)}))}var t,n;return t=e,(n=[{key:"_updateMaxPlayheadPosition",value:function(){this.pm.data.view_max_playhead_position=void 0===this.pm.data.view_max_playhead_position?this.pm.data.player_playhead_time:Math.max(this.pm.data.view_max_playhead_position,this.pm.data.player_playhead_time)}},{key:"_updatePlayheadTime",value:function(e,t){var n=this,i=function(){n.pm.currentFragmentPDT&&n.pm.currentFragmentStart&&(n.pm.data.player_program_time=n.pm.currentFragmentPDT+n.pm.data.player_playhead_time-n.pm.currentFragmentStart)};if(t&&t.player_playhead_time)this.pm.data.player_playhead_time=t.player_playhead_time,i(),this._updateMaxPlayheadPosition();else if(this.pm.getPlayheadTime){var r=this.pm.getPlayheadTime();void 0!==r&&(this.pm.data.player_playhead_time=r,i(),this._updateMaxPlayheadPosition())}}}])&&Y(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function X(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Q=3e5,Z=function(e,t,n){return t&&X(e.prototype,t),n&&X(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t.disableRebufferTracking){var n,i=function(e,t){r(t),n=void 0},r=function(e){if(n){var i=e.viewer_time-n;E(t.data,"view_rebuffer_duration",i),n=e.viewer_time,t.data.view_rebuffer_duration>Q&&(t.emit("viewend"),t.send("viewend"),t.mux.log.warn("Ending view after rebuffering for longer than ".concat(Q,"ms, future events will be ignored unless a programchange or videochange occurs.")))}t.data.view_watch_time>=0&&t.data.view_rebuffer_count>0&&(t.data.view_rebuffer_frequency=t.data.view_rebuffer_count/t.data.view_watch_time,t.data.view_rebuffer_percentage=t.data.view_rebuffer_duration/t.data.view_watch_time)};t.on("playbackheartbeat",(function(e,t){return r(t)})),t.on("rebufferstart",(function(e,r){n||(E(t.data,"view_rebuffer_count",1),n=r.viewer_time,t.one("rebufferend",i))})),t.on("viewinit",(function(){n=void 0,t.off("rebufferend",i)}))}}));function J(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ee=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pm=t,t.disableRebufferTracking||t.disablePlayheadRebufferTracking||(this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null,t.on("playbackheartbeat",this._checkIfRebuffering.bind(this)),t.on("playbackheartbeatend",this._cleanupRebufferTracker.bind(this)),t.on("seeking",(function(){n._cleanupRebufferTracker(null,{viewer_time:p.now()})})))}var t,n;return t=e,n=[{key:"_checkIfRebuffering",value:function(e,t){if(this.pm.seekingTracker.isSeeking||this.pm.adTracker.isAdBreak||!this.pm.playbackHeartbeat._playheadShouldBeProgressing)this._cleanupRebufferTracker(e,t);else if(null!==this._lastCheckedTime)if(this._lastPlayheadTime===this.pm.data.player_playhead_time){var n=t.viewer_time-this._lastPlayheadTimeUpdatedTime;"number"==typeof this.pm.sustainedRebufferThreshold&&n>=this.pm.sustainedRebufferThreshold&&(this._rebuffering||(this._rebuffering=!0,this.pm.emit("rebufferstart",{viewer_time:this._lastPlayheadTimeUpdatedTime}))),this._lastCheckedTime=t.viewer_time}else this._cleanupRebufferTracker(e,t,!0);else this._prepareRebufferTrackerState(t.viewer_time)}},{key:"_clearRebufferTrackerState",value:function(){this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null}},{key:"_prepareRebufferTrackerState",value:function(e){this._lastCheckedTime=e,this._lastPlayheadTime=this.pm.data.player_playhead_time,this._lastPlayheadTimeUpdatedTime=e}},{key:"_cleanupRebufferTracker",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this._rebuffering)this._rebuffering=!1,this.pm.emit("rebufferend",{viewer_time:t.viewer_time});else{if(null===this._lastCheckedTime)return;var i=this.pm.data.player_playhead_time-this._lastPlayheadTime,r=t.viewer_time-this._lastPlayheadTimeUpdatedTime;"number"==typeof this.pm.minimumRebufferDuration&&i>0&&r-i>this.pm.minimumRebufferDuration&&(this._lastCheckedTime=null,this.pm.emit("rebufferstart",{viewer_time:this._lastPlayheadTimeUpdatedTime}),this.pm.emit("rebufferend",{viewer_time:this._lastPlayheadTimeUpdatedTime+r-i}))}n?this._prepareRebufferTrackerState(t.viewer_time):this._clearRebufferTrackerState()}}],n&&J(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),te=ee;function ne(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ie=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pm=t,t.on("viewinit",(function(){var e=t.data,i=e.view_id;if(!e.view_program_changed){var r=function(e,r){var s=r.viewer_time;"playing"===e.type&&void 0===t.data.view_time_to_first_frame?n.calculateTimeToFirstFrame(s||p.now(),i):"adplaying"!==e.type||void 0!==t.data.view_time_to_first_frame&&!n._inPrerollPosition()||n.calculateTimeToFirstFrame(s||p.now(),i)};t.one("playing",r),t.one("adplaying",r),t.one("viewend",(function(){t.off("playing",r),t.off("adplaying",r)}))}}))}var t,n;return t=e,(n=[{key:"_inPrerollPosition",value:function(){return void 0===this.pm.data.view_content_playback_time||this.pm.data.view_content_playback_time<=1e3}},{key:"calculateTimeToFirstFrame",value:function(e,t){t===this.pm.data.view_id&&(this.pm.watchTimeTracker._updateWatchTime(null,{viewer_time:e}),this.pm.data.view_time_to_first_frame=this.pm.data.view_watch_time,(this.pm.data.player_autoplay_on||this.pm.data.video_is_autoplay)&&this.NAVIGATION_START&&(this.pm.data.view_aggregate_startup_time=this.pm.data.view_start+this.pm.data.view_watch_time-this.NAVIGATION_START))}}])&&ne(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function re(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var se=function(e,t,n){return t&&re(e.prototype,t),n&&re(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t.on("viewinit",(function(){n._lastPlayheadPosition=-1})),["pause","rebufferstart","seeking","error","adbreakstart","hb"].forEach((function(e){t.on(e,(function(){if(n._lastPlayheadPosition>=0&&t.data.player_playhead_time>=0&&n._lastPlayerWidth>=0&&n._lastSourceWidth>0&&n._lastPlayerHeight>=0&&n._lastSourceHeight>0){var e=t.data.player_playhead_time-n._lastPlayheadPosition;if(e<0)return void(n._lastPlayheadPosition=-1);var i=Math.min(n._lastPlayerWidth/n._lastSourceWidth,n._lastPlayerHeight/n._lastSourceHeight),r=Math.max(0,i-1),s=Math.max(0,1-i);t.data.view_max_upscale_percentage=Math.max(t.data.view_max_upscale_percentage||0,r),t.data.view_max_downscale_percentage=Math.max(t.data.view_max_downscale_percentage||0,s),E(t.data,"view_total_content_playback_time",e),E(t.data,"view_total_upscaling",r*e),E(t.data,"view_total_downscaling",s*e)}n._lastPlayheadPosition=-1}))})),["playing","hb"].forEach((function(e){t.on(e,(function(){n._lastPlayheadPosition=t.data.player_playhead_time,n._lastPlayerWidth=t.data.player_width,n._lastPlayerHeight=t.data.player_height,n._lastSourceWidth=t.data.video_source_width,n._lastSourceHeight=t.data.video_source_height}))}))}));function ae(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var oe=function(e,t,n){return t&&ae(e.prototype,t),n&&ae(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isSeeking=!1;var i=-1,r=function(){var e=p.now(),r=(t.data.viewer_time||e)-(i||e);E(t.data,"view_seek_duration",r),t.data.view_max_seek_time=Math.max(t.data.view_max_seek_time||0,r),n.isSeeking=!1,i=-1};t.on("seeking",(function(e,s){Object.assign(t.data,s),n.isSeeking&&s.viewer_time-i<=2e3?i=s.viewer_time:(n.isSeeking&&r(),n.isSeeking=!0,i=s.viewer_time,E(t.data,"view_seek_count",1),t.send("seeking"))})),t.on("seeked",(function(){r()})),t.on("viewend",(function(){n.isSeeking&&(r(),t.send("seeked")),n.isSeeking=!1,i=-1}))}));function le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,s=[],a=!0,o=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(s.push(i.value),!t||s.length!==t);a=!0);}catch(e){o=!0,r=e}finally{try{a||null==n.return||n.return()}finally{if(o)throw r}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return de(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?de(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function de(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function ce(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ue=function(e,t){e.push(t),e.sort((function(e,t){return e.viewer_time-t.viewer_time}))},he=["adbreakstart","adrequest","adresponse","adplay","adplaying","adpause","adended","adbreakend","aderror","adclicked","adskipped"],fe=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pm=t,t.on("viewinit",(function(){n.isAdBreak=!1,n._currentAdRequestNumber=0,n._currentAdResponseNumber=0,n._adRequests=[],n._adResponses=[],n._adHasPlayed=!1,n._wouldBeNewAdPlay=!0,n._prerollPlayTime=void 0})),he.forEach((function(e){return t.on(e,n._updateAdData.bind(n))}));var i=function(){n.isAdBreak=!1};t.on("adbreakstart",(function(){n.isAdBreak=!0})),t.on("play",i),t.on("playing",i),t.on("viewend",i),t.on("adrequest",(function(e,i){i=Object.assign({ad_request_id:"generatedAdRequestId"+n._currentAdRequestNumber++},i),ue(n._adRequests,i),E(t.data,"view_ad_request_count"),n.inPrerollPosition()&&(t.data.view_preroll_requested=!0,n._adHasPlayed||E(t.data,"view_preroll_request_count"))})),t.on("adresponse",(function(e,i){i=Object.assign({ad_request_id:"generatedAdRequestId"+n._currentAdResponseNumber++},i),ue(n._adResponses,i);var r=n.findAdRequest(i.ad_request_id);r&&E(t.data,"view_ad_request_time",Math.max(0,i.viewer_time-r.viewer_time))})),t.on("adplay",(function(e,i){n._adHasPlayed=!0,n._wouldBeNewAdPlay&&(n._wouldBeNewAdPlay=!1,E(t.data,"view_ad_played_count")),n.inPrerollPosition()&&!t.data.view_preroll_played&&(t.data.view_preroll_played=!0,n._adRequests.length>0&&(t.data.view_preroll_request_time=Math.max(0,i.viewer_time-n._adRequests[0].viewer_time)),t.data.view_start&&(t.data.view_startup_preroll_request_time=Math.max(0,i.viewer_time-t.data.view_start)),n._prerollPlayTime=i.viewer_time)})),t.on("adplaying",(function(e,i){n.inPrerollPosition()&&void 0===t.data.view_preroll_load_time&&void 0!==n._prerollPlayTime&&(t.data.view_preroll_load_time=i.viewer_time-n._prerollPlayTime,t.data.view_startup_preroll_load_time=i.viewer_time-n._prerollPlayTime)})),t.on("adclicked",(function(e,i){n._wouldBeNewAdPlay||E(t.data,"view_ad_clicked_count")})),t.on("adskipped",(function(e,i){n._wouldBeNewAdPlay||E(t.data,"view_ad_skipped_count")})),t.on("adended",(function(){n._wouldBeNewAdPlay=!0})),t.on("aderror",(function(){n._wouldBeNewAdPlay=!0}))}var t,n;return t=e,(n=[{key:"inPrerollPosition",value:function(){return void 0===this.pm.data.view_content_playback_time||this.pm.data.view_content_playback_time<=1e3}},{key:"findAdRequest",value:function(e){for(var t=0;t<this._adRequests.length;t++)if(this._adRequests[t].ad_request_id===e)return this._adRequests[t]}},{key:"_updateAdData",value:function(e,t){if(this.inPrerollPosition()){if(!this.pm.data.view_preroll_ad_tag_hostname&&t.ad_tag_url){var n=le(g(t.ad_tag_url),2),i=n[0],r=n[1];this.pm.data.view_preroll_ad_tag_domain=r,this.pm.data.view_preroll_ad_tag_hostname=i}if(!this.pm.data.view_preroll_ad_asset_hostname&&t.ad_asset_url){var s=le(g(t.ad_asset_url),2),a=s[0],o=s[1];this.pm.data.view_preroll_ad_asset_domain=o,this.pm.data.view_preroll_ad_asset_hostname=a}}this.pm.data.ad_asset_url=null==t?void 0:t.ad_asset_url,this.pm.data.ad_tag_url=null==t?void 0:t.ad_tag_url,this.pm.data.ad_creative_id=null==t?void 0:t.ad_creative_id,this.pm.data.ad_id=null==t?void 0:t.ad_id,this.pm.data.ad_universal_id=null==t?void 0:t.ad_universal_id}}])&&ce(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function pe(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var me=function(e,t,n){return t&&pe(e.prototype,t),n&&pe(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t){var n,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(){t.disableRebufferTracking||n&&(E(t.data,"view_waiting_rebuffer_duration",p.now()-n),n=!1,r().clearInterval(i))},a=!1,o=function(){a=!1,s()};t.on("waiting",(function(){a&&(t.disableRebufferTracking||(E(t.data,"view_waiting_rebuffer_count",1),n=p.now(),i=r().setInterval((function(){if(n){var e=p.now();E(t.data,"view_waiting_rebuffer_duration",e-n),n=e}}),250)))})),t.on("playing",(function(){s(),a=!0})),t.on("pause",o),t.on("seeking",o)}));function ge(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ve=function(e,t,n){return t&&ge(e.prototype,t),n&&ge(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(){n.lastWallClockTime=p.now(),t.on("before*",r)},r=function(e){var i=p.now(),r=n.lastWallClockTime;n.lastWallClockTime=i,i-r>3e4&&(t.emit("devicesleep",{viewer_time:r}),Object.assign(t.data,{viewer_time:r}),t.send("devicesleep"),t.emit("devicewake",{viewer_time:i}),Object.assign(t.data,{viewer_time:i}),t.send("devicewake"))};t.one("playbackheartbeat",i),t.on("playbackheartbeatend",(function(){t.off("before*",r),t.one("playbackheartbeat",i)}))})),ye=n(375),be=n(655),Ee=n.n(be),Te="muxData",_e=function(){var e;try{e=ye.parse(Ee().get(Te)||"")}catch(t){e={}}return e},Ae=function(e){try{Ee().set(Te,ye.stringify(e),{expires:365})}catch(e){}},Se=function(){var e=_e();return e.mux_viewer_id=e.mux_viewer_id||s(),e.msn=e.msn||Math.random(),Ae(e),{mux_viewer_id:e.mux_viewer_id,mux_sample_number:e.msn}};function ke(e,t){var n=t.beaconCollectionDomain,i=t.beaconDomain;if(n)return"https://"+n;var r=i||"litix.io";return(e=e||"inferred").match(/^[a-z0-9]+$/)?"https://"+e+"."+r:"https://img.litix.io/a.gif"}var we=function(){var e;switch(Le()){case"cellular":e="cellular";break;case"ethernet":e="wired";break;case"wifi":e="wifi";break;case void 0:break;default:e="other"}return e},Le=function(){var e=r().navigator,t=e&&(e.connection||e.mozConnection||e.webkitConnection);return t&&t.type};we.getConnectionFromAPI=Le;var Re=we,Ie=De({a:"env",b:"beacon",c:"custom",d:"ad",e:"event",f:"experiment",i:"internal",m:"mux",n:"response",p:"player",q:"request",r:"retry",s:"session",t:"timestamp",u:"viewer",v:"video",w:"page",x:"view",y:"sub"}),Ce=De({ad:"ad",ag:"aggregate",ap:"api",al:"application",ar:"architecture",as:"asset",au:"autoplay",av:"average",bi:"bitrate",br:"break",bw:"browser",by:"bytes",ca:"cached",cb:"cancel",cc:"codec",cd:"code",cg:"category",ch:"changed",ck:"clicked",cl:"canceled",cn:"config",co:"count",ce:"counter",cp:"complete",cr:"creative",ct:"content",cu:"current",cx:"connection",cz:"context",dg:"downscaling",dm:"domain",dn:"cdn",do:"downscale",dr:"drm",dp:"dropped",du:"duration",dv:"device",ec:"encoding",ed:"edge",en:"end",eg:"engine",em:"embed",er:"error",es:"errorcode",et:"errortext",ee:"event",ev:"events",ex:"expires",ep:"experiments",fa:"failed",fi:"first",fm:"family",ft:"format",fp:"fps",fq:"frequency",fr:"frame",fs:"fullscreen",ha:"has",hb:"holdback",he:"headers",ho:"host",hn:"hostname",ht:"height",id:"id",ii:"init",in:"instance",ip:"ip",is:"is",ke:"key",la:"language",lb:"labeled",le:"level",li:"live",ld:"loaded",lo:"load",ls:"lists",lt:"latency",ma:"max",md:"media",me:"message",mf:"manifest",mi:"mime",ml:"midroll",mm:"min",mn:"manufacturer",mo:"model",mx:"mux",ne:"newest",nm:"name",no:"number",on:"on",os:"os",pa:"paused",pb:"playback",pd:"producer",pe:"percentage",pf:"played",pg:"program",ph:"playhead",pi:"plugin",pl:"preroll",pn:"playing",po:"poster",pr:"preload",ps:"position",pt:"part",py:"property",ra:"rate",rd:"requested",re:"rebuffer",rf:"rendition",rm:"remote",ro:"ratio",rp:"response",rq:"request",rs:"requests",sa:"sample",sd:"skipped",se:"session",sk:"seek",sm:"stream",so:"source",sq:"sequence",sr:"series",st:"start",su:"startup",sv:"server",sw:"software",ta:"tag",tc:"tech",te:"text",tg:"target",th:"throughput",ti:"time",tl:"total",to:"to",tt:"title",ty:"type",ug:"upscaling",un:"universal",up:"upscale",ur:"url",us:"user",va:"variant",vd:"viewed",vi:"video",ve:"version",vw:"view",vr:"viewer",wd:"width",wa:"watch",wt:"waiting"});function De(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function xe(e){var t={},n={};return Object.keys(e).forEach((function(i){var r=!1;if(e.hasOwnProperty(i)&&void 0!==e[i]){var s=i.split("_"),a=s[0],o=Ie[a];o||(h.info("Data key word `"+s[0]+"` not expected in "+i),o=a+"_"),s.splice(1).forEach((function(e){"url"===e&&(r=!0),Ce[e]?o+=Ce[e]:Number(e)&&Math.floor(Number(e))===Number(e)?o+=e:(h.info("Data key word `"+e+"` not expected in "+i),o+="_"+e+"_")})),r?n[o]=e[i]:t[o]=e[i]}})),Object.assign(t,n)}var Me={maxBeaconSize:300,maxQueueLength:3600,baseTimeBetweenBeacons:1e4,maxPayloadKBSize:500},Pe=["hb","requestcompleted","requestfailed","requestcanceled"],Oe="https://img.litix.io",Ne=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._beaconUrl=e||Oe,this._eventQueue=[],this._postInFlight=!1,this._failureCount=0,this._sendTimeout=!1,this._options=Object.assign({},Me,t)};Ne.prototype.queueEvent=function(e,t){var n=Object.assign({},t);return(this._eventQueue.length<=this._options.maxQueueLength||"eventrateexceeded"===e)&&(this._eventQueue.push(n),this._sendTimeout||this._startBeaconSending(),this._eventQueue.length<=this._options.maxQueueLength)},Ne.prototype.flushEvents=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&1===this._eventQueue.length?this._eventQueue.pop():(this._eventQueue.length&&this._sendBeaconQueue(),this._startBeaconSending())},Ne.prototype.destroy=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.destroyed=!0,e?this._clearBeaconQueue():this.flushEvents(),r().clearTimeout(this._sendTimeout)},Ne.prototype._clearBeaconQueue=function(){var e=this._eventQueue.length>this._options.maxBeaconSize?this._eventQueue.length-this._options.maxBeaconSize:0,t=this._eventQueue.slice(e);e>0&&Object.assign(t[t.length-1],xe({mux_view_message:"event queue truncated"}));var n=this._createPayload(t);Ue(this._beaconUrl,n,!0,(function(){}))},Ne.prototype._sendBeaconQueue=function(){var e=this;if(!this._postInFlight){var t=this._eventQueue.slice(0,this._options.maxBeaconSize);this._eventQueue=this._eventQueue.slice(this._options.maxBeaconSize),this._postInFlight=!0;var n=this._createPayload(t),i=p.now();Ue(this._beaconUrl,n,!1,(function(n,r){r?(e._eventQueue=t.concat(e._eventQueue),e._failureCount+=1,h.info("Error sending beacon: "+r)):e._failureCount=0,e._roundTripTime=p.now()-i,e._postInFlight=!1}))}},Ne.prototype._getNextBeaconTime=function(){if(!this._failureCount)return this._options.baseTimeBetweenBeacons;var e=Math.pow(2,this._failureCount-1);return(1+(e*=Math.random()))*this._options.baseTimeBetweenBeacons},Ne.prototype._startBeaconSending=function(){var e=this;r().clearTimeout(this._sendTimeout),this.destroyed||(this._sendTimeout=r().setTimeout((function(){e._eventQueue.length&&e._sendBeaconQueue(),e._startBeaconSending()}),this._getNextBeaconTime()))},Ne.prototype._createPayload=function(e){var t,n,i,r=this,s={transmission_timestamp:Math.round(p.now())};this._roundTripTime&&(s.rtt_ms=Math.round(this._roundTripTime));var a=function(){t=JSON.stringify({metadata:s,events:n||e}),i=t.length/1024},o=function(){return i<=r._options.maxPayloadKBSize};return a(),o()||(h.info("Payload size is too big ("+i+" kb). Removing unnecessary events."),n=e.filter((function(e){return-1===Pe.indexOf(e.e)})),a()),o()||(h.info("Payload size still too big ("+i+" kb). Cropping fields.."),n.forEach((function(e){for(var t in e){var n=e[t];"string"==typeof n&&n.length>51200&&(e[t]=n.substring(0,51200))}})),a()),t};var Fe=function(e){return e.length<=57344},Ue=function(e,t,n,i){if(n&&navigator&&navigator.sendBeacon&&navigator.sendBeacon(e,t))i();else if(r().fetch)r().fetch(e,{method:"POST",body:t,headers:{"Content-Type":"text/plain"},keepalive:Fe(t)}).then((function(e){return i(null,e.ok?null:"Error")})).catch((function(e){return i(null,e)}));else{if(r().XMLHttpRequest){var s=new(r().XMLHttpRequest);return s.onreadystatechange=function(){if(4===s.readyState)return i(null,200!==s.status?"error":void 0)},s.open("POST",e),s.setRequestHeader("Content-Type","text/plain"),void s.send(t)}i()}},Be=Ne;function $e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function He(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(n),!0).forEach((function(t){je(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function We(e){return We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},We(e)}function Ge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ke(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function je(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var qe=["env_key","view_id","view_sequence_number","player_sequence_number","beacon_domain","player_playhead_time","viewer_time","mux_api_version","event","video_id","player_instance_id"],Ye=["adplay","adplaying","adpause","adfirstquartile","admidpoint","adthirdquartile","adended","adresponse","adrequest"],ze=["ad_id","ad_creative_id","ad_universal_id"],Xe=["viewstart","error","ended","viewend"],Qe=function(){function e(t,n){var i,s,a,o,l,d,c,u,h,f,p,m,g,v,y,b=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Ge(this,e),je(this,"previousBeaconData",null),je(this,"lastEventTime",0),je(this,"rateLimited",!1),this.mux=t,this.envKey=n,this.options=b,this.eventQueue=new Be(ke(this.envKey,this.options)),this.sampleRate=null!==(i=this.options.sampleRate)&&void 0!==i?i:1,this.disableCookies=null!==(s=this.options.disableCookies)&&void 0!==s&&s,this.respectDoNotTrack=null!==(a=this.options.respectDoNotTrack)&&void 0!==a&&a,this.previousBeaconData=null,this.lastEventTime=0,this.rateLimited=!1,this.pageLevelData={mux_api_version:this.mux.API_VERSION,mux_embed:this.mux.NAME,mux_embed_version:this.mux.VERSION,viewer_application_name:null===(o=this.options.platform)||void 0===o?void 0:o.name,viewer_application_version:null===(l=this.options.platform)||void 0===l?void 0:l.version,viewer_application_engine:null===(d=this.options.platform)||void 0===d?void 0:d.layout,viewer_device_name:null===(c=this.options.platform)||void 0===c?void 0:c.product,viewer_device_category:"",viewer_device_manufacturer:null===(u=this.options.platform)||void 0===u?void 0:u.manufacturer,viewer_os_family:null===(h=this.options.platform)||void 0===h||null===(f=h.os)||void 0===f?void 0:f.family,viewer_os_architecture:null===(p=this.options.platform)||void 0===p||null===(m=p.os)||void 0===m?void 0:m.architecture,viewer_os_version:null===(g=this.options.platform)||void 0===g||null===(v=g.os)||void 0===v?void 0:v.version,viewer_connection_type:Re(),page_url:null===r()||void 0===r()||null===(y=r().location)||void 0===y?void 0:y.href},this.viewerData=this.disableCookies?{}:Se()}var t,n;return t=e,(n=[{key:"send",value:function(e,t){var n;if(e&&null!=t&&t.view_id){if(this.respectDoNotTrack&&f())return h.info("Not sending `"+e+"` because Do Not Track is enabled");if(!t||"object"!==We(t))return h.error("A data object was expected in send() but was not provided");var i,r,a=this.disableCookies?{}:(i=_e(),r=p.now(),i.session_start&&(i.sst=i.session_start,delete i.session_start),i.session_id&&(i.sid=i.session_id,delete i.session_id),i.session_expires&&(i.sex=i.session_expires,delete i.session_expires),(!i.sex||i.sex<r)&&(i.sid=s(),i.sst=r),i.sex=r+15e5,Ae(i),{session_id:i.sid,session_start:i.sst,session_expires:i.sex}),o=He(He(He(He(He({},this.pageLevelData),t),a),this.viewerData),{},{event:e,env_key:this.envKey});o.user_id&&(o.viewer_user_id=o.user_id,delete o.user_id);var l=(null!==(n=o.mux_sample_number)&&void 0!==n?n:0)>=this.sampleRate,d=xe(this._deduplicateBeaconData(e,o));if(this.lastEventTime=this.mux.utils.now(),l)return h.info("Not sending event due to sample rate restriction",e,o,d);if(this.envKey||h.info("Missing environment key (envKey) - beacons will be dropped if the video source is not a valid mux video URL",e,o,d),!this.rateLimited)if(h.info("Sending event",e,o,d),this.rateLimited=!this.eventQueue.queueEvent(e,d),this.mux.WINDOW_UNLOADING&&"viewend"===e)this.eventQueue.destroy(!0);else if(this.mux.WINDOW_HIDDEN&&"hb"===e?this.eventQueue.flushEvents(!0):Xe.indexOf(e)>=0&&this.eventQueue.flushEvents(),this.rateLimited)return o.event="eventrateexceeded",d=xe(o),this.eventQueue.queueEvent(o.event,d),h.error("Beaconing disabled due to rate limit.")}}},{key:"destroy",value:function(){this.eventQueue.destroy(!1)}},{key:"_deduplicateBeaconData",value:function(e,t){var n=this,i={},r=t.view_id;if("-1"===r||"viewstart"===e||"viewend"===e||!this.previousBeaconData||this.mux.utils.now()-this.lastEventTime>=6e5)i=He({},t),r&&(this.previousBeaconData=i),r&&"viewend"===e&&(this.previousBeaconData=null);else{var s=0===e.indexOf("request");Object.entries(t).forEach((function(t){var r=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,s=[],a=!0,o=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(s.push(i.value),!t||s.length!==t);a=!0);}catch(e){o=!0,r=e}finally{try{a||null==n.return||n.return()}finally{if(o)throw r}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return $e(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$e(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t,2),a=r[0],o=r[1];n.previousBeaconData&&(o!==n.previousBeaconData[a]||qe.indexOf(a)>-1||n.objectHasChanged(s,a,o,n.previousBeaconData[a])||n.eventRequiresKey(e,a))&&(i[a]=o,n.previousBeaconData[a]=o)}))}return i}},{key:"objectHasChanged",value:function(e,t,n,i){return!(!e||0!==t.indexOf("request_")||"request_response_headers"!==t&&"object"===We(n)&&"object"===We(i)&&Object.keys(n||{}).length===Object.keys(i||{}).length)}},{key:"eventRequiresKey",value:function(e,t){return"renditionchange"===e&&0===t.indexOf("video_source_")||!(!ze.includes(t)||!Ye.includes(e))}}])&&Ke(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ze(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Je=function(e,t,n){return t&&Ze(e.prototype,t),n&&Ze(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=0,i=0,r=0,s=0,a=0,o=0,l=0;t.on("requestcompleted",(function(e,o){var l,d,c=o.request_start,u=o.request_response_start,h=o.request_response_end,f=o.request_bytes_loaded;if(s++,u?(l=u-(null!=c?c:0),d=(null!=h?h:0)-u):d=(null!=h?h:0)-(null!=c?c:0),d>0&&f&&f>0){var p=f/d*8e3;a++,i+=f,r+=d,t.data.view_min_request_throughput=Math.min(t.data.view_min_request_throughput||1/0,p),t.data.view_average_request_throughput=i/r*8e3,t.data.view_request_count=s,l>0&&(n+=l,t.data.view_max_request_latency=Math.max(t.data.view_max_request_latency||0,l),t.data.view_average_request_latency=n/a)}})),t.on("requestfailed",(function(e,n){s++,o++,t.data.view_request_count=s,t.data.view_request_failed_count=o})),t.on("requestcanceled",(function(e,n){s++,l++,t.data.view_request_count=s,t.data.view_request_canceled_count=l}))}));function et(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var tt=function(e,t,n){return t&&et(e.prototype,t),n&&et(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t.on("before*",(function(e,i){var r=i.viewer_time,s=p.now(),a=n._lastEventTime;if(n._lastEventTime=s,a&&s-a>36e5){var o=Object.keys(t.data).reduce((function(e,n){return 0===n.indexOf("video_")?Object.assign(e,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},n,t.data[n])):e}),{});t.mux.log.info("Received event after at least an hour inactivity, creating a new view"),t.emit("viewinit",Object.assign({viewer_time:r},o)),t.playbackHeartbeat._playheadShouldBeProgressing&&"play"!==e.type&&"adbreakstart"!==e.type&&(t.emit("play",{viewer_time:r}),"playing"!==e.type&&t.emit("playing",{viewer_time:r}))}}))}));function nt(e){return nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nt(e)}function it(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function rt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function st(e,t){return st=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},st(e,t)}function at(e,t){if(t&&("object"===nt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ot(e)}function ot(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lt(e){return lt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},lt(e)}var dt=["viewstart","ended","loadstart","pause","play","playing","ratechange","waiting","adplay","adpause","adended","aderror","adplaying","adrequest","adresponse","adbreakstart","adbreakend","adfirstquartile","admidpoint","adthirdquartile","rebufferstart","rebufferend","seeked","error","hb","requestcompleted","requestfailed","requestcanceled","renditionchange"],ct=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&st(e,t)}(r,e);var t,n,i=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=lt(e);if(t){var r=lt(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return at(this,n)}}(r);function r(e,t,n){var a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(a=i.call(this)).DOM_CONTENT_LOADED_EVENT_END=y(),a.NAVIGATION_START=b(),a.mux=e,a.id=t,(n=Object.assign({debug:!1,minimumRebufferDuration:250,sustainedRebufferThreshold:1e3,playbackHeartbeatTime:25,beaconDomain:"litix.io",sampleRate:1,disableCookies:!1,respectDoNotTrack:!1,disableRebufferTracking:!1,disablePlayheadRebufferTracking:!1,errorTranslator:function(e){return e}},n)).data=n.data||{},n.data.property_key&&(n.data.env_key=n.data.property_key,delete n.data.property_key),h.setLevel(n.debug?"debug":"warn"),a.getPlayheadTime=n.getPlayheadTime,a.getStateData=n.getStateData||function(){return{}},a.getAdData=n.getAdData||function(){},a.minimumRebufferDuration=n.minimumRebufferDuration,a.sustainedRebufferThreshold=n.sustainedRebufferThreshold,a.playbackHeartbeatTime=n.playbackHeartbeatTime,a.disableRebufferTracking=n.disableRebufferTracking,a.disableRebufferTracking&&a.mux.log.warn("Disabling rebuffer tracking. This should only be used in specific circumstances as a last resort when your player is known to unreliably track rebuffering."),a.disablePlayheadRebufferTracking=n.disablePlayheadRebufferTracking,a.errorTranslator=n.errorTranslator,a.playbackEventDispatcher=new Qe(e,n.data.env_key,n),a.data={player_instance_id:s(),mux_sample_rate:n.sampleRate,beacon_domain:n.beaconCollectionDomain?n.beaconCollectionDomain:n.beaconDomain},a.data.view_sequence_number=1,a.data.player_sequence_number=1,a.oldEmit=a.emit,a.emit=function(e,t){t=Object.assign({viewer_time:this.mux.utils.now()},t),this.oldEmit(e,t)};var o=function(){void 0===this.data.view_start&&(this.data.view_start=this.mux.utils.now(),this.emit("viewstart"))}.bind(ot(a));a.on("viewinit",(function(e,t){this._resetVideoData(),this._resetViewData(),this._resetErrorData(),this._updateStateData(),Object.assign(this.data,t),this._initializeViewData(),this.one("play",o),this.one("adbreakstart",o)}));var l=function(e){this.emit("viewend"),this.send("viewend"),this.emit("viewinit",e)}.bind(ot(a));if(a.on("videochange",(function(e,t){l(t)})),a.on("programchange",(function(e,t){this.data.player_is_paused&&this.mux.log.warn("The `programchange` event is intended to be used when the content changes mid playback without the video source changing, however the video is not currently playing. If the video source is changing please use the videochange event otherwise you will lose startup time information."),l(Object.assign(t,{view_program_changed:!0})),o(),this.emit("play"),this.emit("playing")})),a.on("fragmentchange",(function(e,t){this.currentFragmentPDT=t.currentFragmentPDT,this.currentFragmentStart=t.currentFragmentStart})),a.on("destroy",a.destroy),"undefined"!=typeof window&&"function"==typeof window.addEventListener&&"function"==typeof window.removeEventListener){var d=function(){var e=void 0!==a.data.view_start;a.mux.WINDOW_HIDDEN="hidden"===document.visibilityState,e&&a.mux.WINDOW_HIDDEN&&(a.data.player_is_paused||a.emit("hb"))};window.addEventListener("visibilitychange",d,!1);var c=function(e){e.persisted||a.destroy()};window.addEventListener("pagehide",c,!1),a.on("destroy",(function(){window.removeEventListener("visibilitychange",d),window.removeEventListener("pagehide",c)}))}return a.on("playerready",(function(e,t){Object.assign(this.data,t)})),dt.forEach((function(e){a.on(e,(function(t,n){0!==e.indexOf("ad")&&this._updateStateData(),Object.assign(this.data,n),this._sanitizeData()})),a.on("after"+e,(function(){("error"!==e||this.errorTracker.viewErrored)&&this.send(e)}))})),a.on("viewend",(function(e,t){Object.assign(a.data,t)})),a.one("playerready",(function(e){var t=this.mux.utils.now();this.data.player_init_time&&(this.data.player_startup_time=t-this.data.player_init_time),!this.mux.PLAYER_TRACKED&&this.NAVIGATION_START&&(this.mux.PLAYER_TRACKED=!0,(this.data.player_init_time||this.DOM_CONTENT_LOADED_EVENT_END)&&(this.data.page_load_time=Math.min(this.data.player_init_time||1/0,this.DOM_CONTENT_LOADED_EVENT_END||1/0)-this.NAVIGATION_START)),this.send("playerready"),delete this.data.player_startup_time,delete this.data.page_load_time})),a.longResumeTracker=new tt(ot(a)),a.errorTracker=new W(ot(a)),new ve(ot(a)),a.seekingTracker=new oe(ot(a)),a.playheadTime=new z(ot(a)),a.playbackHeartbeat=new V(ot(a)),new se(ot(a)),a.watchTimeTracker=new K(ot(a)),new q(ot(a)),a.adTracker=new fe(ot(a)),new te(ot(a)),new Z(ot(a)),new ie(ot(a)),new me(ot(a)),new Je(ot(a)),n.hlsjs&&a.addHLSJS(n),n.dashjs&&a.addDashJS(n),a.emit("viewinit",n.data),a}return t=r,n=[{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,void 0!==this.data.view_start&&(this.emit("viewend"),this.send("viewend")),this.playbackEventDispatcher.destroy(),this.removeHLSJS(),this.removeDashJS(),window.clearTimeout(this._heartBeatTimeout))}},{key:"send",value:function(e){if(this.data.view_id){var t=Object.assign({},this.data);if(void 0===t.video_source_is_live&&(t.player_source_duration===1/0||t.video_source_duration===1/0?t.video_source_is_live=!0:(t.player_source_duration>0||t.video_source_duration>0)&&(t.video_source_is_live=!1)),t.video_source_is_live||["player_program_time","player_manifest_newest_program_time","player_live_edge_program_time","player_program_time","video_holdback","video_part_holdback","video_target_duration","video_part_target_duration"].forEach((function(e){t[e]=void 0})),t.video_source_url=t.video_source_url||t.player_source_url,t.video_source_url){var n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,s=[],a=!0,o=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(s.push(i.value),!t||s.length!==t);a=!0);}catch(e){o=!0,r=e}finally{try{a||null==n.return||n.return()}finally{if(o)throw r}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return it(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?it(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(g(t.video_source_url),2),i=n[0],r=n[1];t.video_source_domain=r,t.video_source_hostname=i}delete t.ad_request_id,this.playbackEventDispatcher.send(e,t),this.data.view_sequence_number++,this.data.player_sequence_number++,this._restartHeartBeat(),"viewend"===e&&delete this.data.view_id}}},{key:"_updateStateData",value:function(){Object.assign(this.data,this.getStateData()),this.playheadTime._updatePlayheadTime(),this._sanitizeData()}},{key:"_sanitizeData",value:function(){var e=this;["player_width","player_height","video_source_width","video_source_height","player_playhead_time","video_source_bitrate"].forEach((function(t){var n=parseInt(e.data[t],10);e.data[t]=isNaN(n)?void 0:n})),["player_source_url","video_source_url"].forEach((function(t){if(e.data[t]){var n=e.data[t].toLowerCase();0!==n.indexOf("data:")&&0!==n.indexOf("blob:")||(e.data[t]="MSE style URL")}}))}},{key:"_resetVideoData",value:function(e,t){var n=this;Object.keys(this.data).forEach((function(e){0===e.indexOf("video_")&&delete n.data[e]}))}},{key:"_resetViewData",value:function(){var e=this;Object.keys(this.data).forEach((function(t){0===t.indexOf("view_")&&delete e.data[t]})),this.data.view_sequence_number=1}},{key:"_resetErrorData",value:function(e,t){delete this.data.player_error_code,delete this.data.player_error_message}},{key:"_initializeViewData",value:function(){var e=this,t=this.data.view_id=s(),n=function(){t===e.data.view_id&&E(e.data,"player_view_count",1)};this.data.player_is_paused?this.one("play",n):n()}},{key:"_restartHeartBeat",value:function(){var e=this;window.clearTimeout(this._heartBeatTimeout),this.errorTracker.viewErrored||(this._heartBeatTimeout=window.setTimeout((function(){e.data.player_is_paused||e.emit("hb")}),1e4))}},{key:"addHLSJS",value:function(e){e.hlsjs?this.hlsjs?this.mux.log.warn("An instance of HLS.js is already being monitored for this player."):(this.hlsjs=e.hlsjs,function(e,t,n){var i=arguments.length>4?arguments[4]:void 0,r=e.log,s=e.utils.secondsToMs,a=function(e){var t,n=parseInt(i.version);return 1===n&&null!==e.programDateTime&&(t=e.programDateTime),0===n&&null!==e.pdt&&(t=e.pdt),t};if(v()){var o=function(n,i){return e.emit(t,n,i)},l=function(e,t){var n=t.levels,i=t.audioTracks,r=t.url,s=t.stats,a=t.networkDetails,l=t.sessionData,d={},c={};n.forEach((function(e,t){d[t]={width:e.width,height:e.height,bitrate:e.bitrate,attrs:e.attrs}})),i.forEach((function(e,t){c[t]={name:e.name,language:e.lang,bitrate:e.bitrate}}));var u=I(s),h=u.bytesLoaded,f=u.requestStart,p=u.responseStart,g=u.responseEnd;o("requestcompleted",L(L({},k(l)),{},{request_event_type:e,request_bytes_loaded:h,request_start:f,request_response_start:p,request_response_end:g,request_type:"manifest",request_hostname:m(r),request_response_headers:C(a),request_rendition_lists:{media:d,audio:c,video:{}}}))};n.on(i.Events.MANIFEST_LOADED,l);var d=function(e,t){var n=t.details,i=t.level,r=t.networkDetails,l=t.stats,d=I(l),c=d.bytesLoaded,u=d.requestStart,h=d.responseStart,f=d.responseEnd,p=n.fragments[n.fragments.length-1],g=a(p)+s(p.duration);o("requestcompleted",{request_event_type:e,request_bytes_loaded:c,request_start:u,request_response_start:h,request_response_end:f,request_current_level:i,request_type:"manifest",request_hostname:m(n.url),request_response_headers:C(r),video_holdback:n.holdBack&&s(n.holdBack),video_part_holdback:n.partHoldBack&&s(n.partHoldBack),video_part_target_duration:n.partTarget&&s(n.partTarget),video_target_duration:n.targetduration&&s(n.targetduration),video_source_is_live:n.live,player_manifest_newest_program_time:isNaN(g)?void 0:g})};n.on(i.Events.LEVEL_LOADED,d);var c=function(e,t){var n=t.details,i=t.networkDetails,r=t.stats,s=I(r),a=s.bytesLoaded,l=s.requestStart,d=s.responseStart,c=s.responseEnd;o("requestcompleted",{request_event_type:e,request_bytes_loaded:a,request_start:l,request_response_start:d,request_response_end:c,request_type:"manifest",request_hostname:m(n.url),request_response_headers:C(i)})};n.on(i.Events.AUDIO_TRACK_LOADED,c);var u=function(e,t){var i=t.stats,r=t.networkDetails,s=t.frag;i=i||s.stats;var a=I(i),l=a.bytesLoaded,d=a.requestStart,c=a.responseStart,u=a.responseEnd,h=r?C(r):void 0,f={request_event_type:e,request_bytes_loaded:l,request_start:d,request_response_start:c,request_response_end:u,request_hostname:r?m(r.responseURL):void 0,request_id:h?S(h):void 0,request_response_headers:h,request_media_duration:s.duration,request_url:null==r?void 0:r.responseURL};"main"===s.type?(f.request_type="media",f.request_current_level=s.level,f.request_video_width=(n.levels[s.level]||{}).width,f.request_video_height=(n.levels[s.level]||{}).height,f.request_labeled_bitrate=(n.levels[s.level]||{}).bitrate):f.request_type=s.type,o("requestcompleted",f)};n.on(i.Events.FRAG_LOADED,u);var h=function(e,t){var n=t.frag,i=n.start,r={currentFragmentPDT:a(n),currentFragmentStart:s(i)};o("fragmentchange",r)};n.on(i.Events.FRAG_CHANGED,h);var f=function(e,t){var n=t.type,r=t.details,s=t.response,a=t.fatal,l=t.frag,d=t.networkDetails,c=(null==l?void 0:l.url)||t.url||"",u=d?C(d):void 0;if(r!==i.ErrorDetails.MANIFEST_LOAD_ERROR&&r!==i.ErrorDetails.MANIFEST_LOAD_TIMEOUT&&r!==i.ErrorDetails.FRAG_LOAD_ERROR&&r!==i.ErrorDetails.FRAG_LOAD_TIMEOUT&&r!==i.ErrorDetails.LEVEL_LOAD_ERROR&&r!==i.ErrorDetails.LEVEL_LOAD_TIMEOUT&&r!==i.ErrorDetails.AUDIO_TRACK_LOAD_ERROR&&r!==i.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT&&r!==i.ErrorDetails.SUBTITLE_LOAD_ERROR&&r!==i.ErrorDetails.SUBTITLE_LOAD_TIMEOUT&&r!==i.ErrorDetails.KEY_LOAD_ERROR&&r!==i.ErrorDetails.KEY_LOAD_TIMEOUT||o("requestfailed",{request_error:r,request_url:c,request_hostname:m(c),request_id:u?S(u):void 0,request_type:r===i.ErrorDetails.FRAG_LOAD_ERROR||r===i.ErrorDetails.FRAG_LOAD_TIMEOUT?"media":r===i.ErrorDetails.AUDIO_TRACK_LOAD_ERROR||r===i.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT?"audio":r===i.ErrorDetails.SUBTITLE_LOAD_ERROR||r===i.ErrorDetails.SUBTITLE_LOAD_TIMEOUT?"subtitle":r===i.ErrorDetails.KEY_LOAD_ERROR||r===i.ErrorDetails.KEY_LOAD_TIMEOUT?"encryption":"manifest",request_error_code:null==s?void 0:s.code,request_error_text:null==s?void 0:s.text}),a){var h,f="".concat(c?"url: ".concat(c,"\n"):"")+"".concat(s&&(s.code||s.text)?"response: ".concat(s.code,", ").concat(s.text,"\n"):"")+"".concat(t.reason?"failure reason: ".concat(t.reason,"\n"):"")+"".concat(t.level?"level: ".concat(t.level,"\n"):"")+"".concat(t.parent?"parent stream controller: ".concat(t.parent,"\n"):"")+"".concat(t.buffer?"buffer length: ".concat(t.buffer,"\n"):"")+"".concat(t.error?"error: ".concat(t.error,"\n"):"")+"".concat(t.event?"event: ".concat(t.event,"\n"):"")+"".concat(t.err?"error message: ".concat(null===(h=t.err)||void 0===h?void 0:h.message,"\n"):"");o("error",{player_error_code:n,player_error_message:r,player_error_context:f})}};n.on(i.Events.ERROR,f);var p=function(e,t){var n=t.frag,i=n&&n._url||"";o("requestcanceled",{request_event_type:e,request_url:i,request_type:"media",request_hostname:m(i)})};n.on(i.Events.FRAG_LOAD_EMERGENCY_ABORTED,p);var g=function(e,t){var i=t.level,s=n.levels[i];if(s&&s.attrs&&s.attrs.BANDWIDTH){var a,l=s.attrs.BANDWIDTH,d=parseFloat(s.attrs["FRAME-RATE"]);isNaN(d)||(a=d),l?o("renditionchange",{video_source_fps:a,video_source_bitrate:l,video_source_width:s.width,video_source_height:s.height,video_source_rendition_name:s.name,video_source_codec:null==s?void 0:s.videoCodec}):r.warn("missing BANDWIDTH from HLS manifest parsed by HLS.js")}};n.on(i.Events.LEVEL_SWITCHED,g),n._stopMuxMonitor=function(){n.off(i.Events.MANIFEST_LOADED,l),n.off(i.Events.LEVEL_LOADED,d),n.off(i.Events.AUDIO_TRACK_LOADED,c),n.off(i.Events.FRAG_LOADED,u),n.off(i.Events.FRAG_CHANGED,h),n.off(i.Events.ERROR,f),n.off(i.Events.FRAG_LOAD_EMERGENCY_ABORTED,p),n.off(i.Events.LEVEL_SWITCHED,g),n.off(i.Events.DESTROYING,n._stopMuxMonitor),delete n._stopMuxMonitor},n.on(i.Events.DESTROYING,n._stopMuxMonitor)}else r.warn("performance timing not supported. Not tracking HLS.js.")}(this.mux,this.id,e.hlsjs,{},e.Hls||window.Hls)):this.mux.log.warn("You must pass a valid hlsjs instance in order to track it.")}},{key:"removeHLSJS",value:function(){var e;this.hlsjs&&((e=this.hlsjs)&&"function"==typeof e._stopMuxMonitor&&e._stopMuxMonitor(),this.hlsjs=void 0)}},{key:"addDashJS",value:function(e){e.dashjs?this.dashjs?this.mux.log.warn("An instance of Dash.js is already being monitored for this player."):(this.dashjs=e.dashjs,function(e,t,n){var i=e.log;if(n&&n.on){var r=function(n,i){return e.emit(t,n,i)},s=function(e){var t=e.type,n=(e.data||{}).url;r("requestcompleted",{request_event_type:t,request_start:0,request_response_start:0,request_response_end:0,request_bytes_loaded:-1,request_type:"manifest",request_hostname:m(n),request_url:n})};n.on("manifestLoaded",s);var a={},o=function(e){var t=e.type,i=e.fragmentModel,s=(e.chunk||{}).mediaInfo||{},o=s.type,l=s.bitrateList,d={};(l=l||[]).forEach((function(e,t){d[t]={},d[t].width=e.width,d[t].height=e.height,d[t].bitrate=e.bandwidth,d[t].attrs={}})),"video"===o?a.video=d:"audio"===o?a.audio=d:a.media=d;var c=P(i,n),u=c.requestStart,h=c.requestResponseStart,f=c.requestResponseEnd,p=c.requestResponseHeaders,m=c.requestMediaDuration,g=c.requestHostname,v=c.requestUrl,y=c.requestId;r("requestcompleted",{request_event_type:t,request_start:u,request_response_start:h,request_response_end:f,request_bytes_loaded:-1,request_type:o+"_init",request_response_headers:p,request_hostname:g,request_id:y,request_url:v,request_media_duration:m,request_rendition_lists:a})};n.on("initFragmentLoaded",o);var l=function(e){var t=e.type,i=e.fragmentModel,s=e.chunk||{},a=s.mediaInfo,o=s.start,l=(a||{}).type,d=P(i,n),c=d.requestStart,u=d.requestResponseStart,h=d.requestResponseEnd,f=d.requestBytesLoaded,p=d.requestResponseHeaders,m=d.requestMediaDuration,g=d.requestHostname,v=d.requestUrl,y=d.requestId,b=function(e,t){var n=t.getQualityFor(e),i=t.getCurrentTrackFor(e).bitrateList;return i?{currentLevel:n,renditionWidth:i[n].width||null,renditionHeight:i[n].height||null,renditionBitrate:i[n].bandwidth}:{}}(l,n),E=b.currentLevel,T=b.renditionWidth,_=b.renditionHeight,A=b.renditionBitrate;r("requestcompleted",{request_event_type:t,request_start:c,request_response_start:u,request_response_end:h,request_bytes_loaded:f,request_type:l,request_response_headers:p,request_hostname:g,request_id:y,request_url:v,request_media_start_time:o,request_media_duration:m,request_current_level:E,request_labeled_bitrate:A,request_video_width:T,request_video_height:_})};n.on("mediaFragmentLoaded",l);var d={video:void 0,audio:void 0,totalBitrate:void 0},c=function(e,t,s){if("number"==typeof e.newQuality){var a=e.mediaType;if("audio"===a||"video"===a){var o=n.getBitrateInfoListFor(a).find((function(t){return t.qualityIndex===e.newQuality}));if(o&&"number"==typeof o.bitrate){d[a]=x(x({},o),{},{codec:n.getCurrentTrackFor(a).codec});var l=function(){if(d.video&&"number"==typeof d.video.bitrate){if(d.video.width&&d.video.height){var e=d.video.bitrate;return d.audio&&"number"==typeof d.audio.bitrate&&(e+=d.audio.bitrate),e!==d.totalBitrate?(d.totalBitrate=e,{video_source_bitrate:e,video_source_height:d.video.height,video_source_width:d.video.width,video_source_codec:O(d.video.codec)}):void 0}i.warn("have bitrate info for video but missing width/height")}}();l&&r("renditionchange",l)}else i.warn("missing bitrate info for ".concat(a))}}else i.warn("missing evt.newQuality in qualityChangeRendered event",e)};n.on("qualityChangeRendered",c);var u=function(e){var t=e.request,n=e.mediaType;r("requestcanceled",{request_event_type:(t=t||{}).type+"_"+t.action,request_url:t.url,request_type:n,request_hostname:m(t.url)})};n.on("fragmentLoadingAbandoned",u);var h=function(e){var t,n,i=e.error,s=(null==i||null===(t=i.data)||void 0===t?void 0:t.request)||{},a=(null==i||null===(n=i.data)||void 0===n?void 0:n.response)||{};27===(null==i?void 0:i.code)&&r("requestfailed",{request_error:s.type+"_"+s.action,request_url:s.url,request_hostname:m(s.url),request_type:s.mediaType,request_error_code:a.status,request_error_text:a.statusText});var o="".concat(null!=s&&s.url?"url: ".concat(s.url,"\n"):"")+"".concat(null!=a&&a.status||null!=a&&a.statusText?"response: ".concat(null==a?void 0:a.status,", ").concat(null==a?void 0:a.statusText,"\n"):"");r("error",{player_error_code:null==i?void 0:i.code,player_error_message:null==i?void 0:i.message,player_error_context:o})};n.on("error",h),n._stopMuxMonitor=function(){n.off("manifestLoaded",s),n.off("initFragmentLoaded",o),n.off("mediaFragmentLoaded",l),n.off("qualityChangeRendered",c),n.off("error",h),n.off("fragmentLoadingAbandoned",u),delete n._stopMuxMonitor}}else i.warn("Invalid dash.js player reference. Monitoring blocked.")}(this.mux,this.id,e.dashjs)):this.mux.log.warn("You must pass a valid dashjs instance in order to track it.")}},{key:"removeDashJS",value:function(){var e;this.dashjs&&((e=this.dashjs)&&"function"==typeof e._stopMuxMonitor&&e._stopMuxMonitor(),this.dashjs=void 0)}}],n&&rt(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),r}(B),ut=ct,ht=n(153),ft=n.n(ht);function pt(e){return pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pt(e)}function mt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,s=[],a=!0,o=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(s.push(i.value),!t||s.length!==t);a=!0);}catch(e){o=!0,r=e}finally{try{a||null==n.return||n.return()}finally{if(o)throw r}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return gt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var vt,yt=["loadstart","pause","play","playing","seeking","seeked","timeupdate","ratechange","stalled","waiting","error","ended"],bt={1:"MEDIA_ERR_ABORTED",2:"MEDIA_ERR_NETWORK",3:"MEDIA_ERR_DECODE",4:"MEDIA_ERR_SRC_NOT_SUPPORTED"};r()&&r().WeakMap&&(vt=new WeakMap);var Et=function(e){return this.buffer="",this.manifest={segments:[],serverControl:{},sessionData:{}},this.currentUri={},this.process(e),this.manifest};Et.prototype.process=function(e){var t;for(this.buffer+=e,t=this.buffer.indexOf("\n");t>-1;t=this.buffer.indexOf("\n"))this.processLine(this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)},Et.prototype.processLine=function(e){var t=e.indexOf(":"),n=Lt(e,t),i=n[0],r=2===n.length?At(n[1]):void 0;if("#"!==i[0])this.currentUri.uri=i,this.manifest.segments.push(this.currentUri),this.manifest.targetDuration&&!("duration"in this.currentUri)&&(this.currentUri.duration=this.manifest.targetDuration),this.currentUri={};else switch(i){case"#EXT-X-TARGETDURATION":if(!isFinite(r)||r<0)return;this.manifest.targetDuration=r,this.setHoldBack();break;case"#EXT-X-PART-INF":Tt(this.manifest,n),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),this.setHoldBack();break;case"#EXT-X-SERVER-CONTROL":Tt(this.manifest,n),this.setHoldBack();break;case"#EXTINF":0===r?this.currentUri.duration=.01:r>0&&(this.currentUri.duration=r);break;case"#EXT-X-PROGRAM-DATE-TIME":var s=r,a=new Date(s);this.manifest.dateTimeString||(this.manifest.dateTimeString=s,this.manifest.dateTimeObject=a),this.currentUri.dateTimeString=s,this.currentUri.dateTimeObject=a;break;case"#EXT-X-VERSION":Tt(this.manifest,n);break;case"#EXT-X-SESSION-DATA":var o=Rt(n[1]),l=k(o);Object.assign(this.manifest.sessionData,l)}},Et.prototype.setHoldBack=function(){var e=this.manifest,t=e.serverControl,n=e.targetDuration,i=e.partTargetDuration;if(t){var r="holdBack",s="partHoldBack",a=n&&3*n,o=i&&2*i;n&&!t.hasOwnProperty(r)&&(t[r]=a),a&&t[r]<a&&(t[r]=a),i&&!t.hasOwnProperty(s)&&(t[s]=3*i),i&&t[s]<o&&(t[s]=o)}};var Tt=function(e,t){var n,i=_t(t[0].replace("#EXT-X-",""));wt(t[1])?(n={},n=Object.assign(kt(t[1]),n)):n=At(t[1]),e[i]=n},_t=function(e){return e.toLowerCase().replace(/-(\w)/g,(function(e){return e[1].toUpperCase()}))},At=function(e){if("yes"===e.toLowerCase()||"no"===e.toLowerCase())return"yes"===e.toLowerCase();var t=-1!==e.indexOf(":")?e:parseFloat(e);return isNaN(t)?e:t},St=function(e){var t={},n=e.split("=");return n.length>1&&(t[_t(n[0])]=At(n[1])),t},kt=function(e){for(var t=e.split(","),n={},i=0;t.length>i;i++){var r=t[i],s=St(r);n=Object.assign(s,n)}return n},wt=function(e){return e.indexOf("=")>-1},Lt=function(e,t){return-1===t?[e]:[e.substring(0,t),e.substring(t+1)]},Rt=function(e){var t={};if(e){var n=e.search(",");return[e.slice(0,n),e.slice(n+1)].forEach((function(e,n){for(var i=e.replace(/['"]+/g,"").split("="),r=0;r<i.length;r++)"DATA-ID"===i[r]&&(t["DATA-ID"]=i[1-r]),"VALUE"===i[r]&&(t.VALUE=i[1-r])})),{data:t}}},It=Et,Ct={safeCall:function(e,t,n,i){var r=i;if(e&&"function"==typeof e[t])try{r=e[t].apply(e,n)}catch(e){h.info("safeCall error",e)}return r},safeIncrement:E,getComputedStyle:function(e,t){var n;if(e&&t&&r()&&"function"==typeof r().getComputedStyle)return vt&&vt.has(e)&&(n=vt.get(e)),n||(n=r().getComputedStyle(e,null),vt&&vt.set(e,n)),n.getPropertyValue(t)},secondsToMs:function(e){return Math.floor(1e3*e)},assign:Object.assign,headersStringToObject:A,cdnHeadersToRequestId:S,extractHostnameAndDomain:g,extractHostname:m,manifestParser:It,generateShortID:a,generateUUID:s,now:p.now};function Dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var xt={},Mt=function e(t){var n=arguments;"string"==typeof t?e.hasOwnProperty(t)?r().setTimeout((function(){n=Array.prototype.splice.call(n,1),e[t].apply(null,n)}),0):h.warn("`"+t+"` is an unknown task"):"function"==typeof t?r().setTimeout((function(){t(e)}),0):h.warn("`"+t+"` is invalid.")},Pt={loaded:p.now(),NAME:"mux-embed",VERSION:"4.27.0",API_VERSION:"2.1",PLAYER_TRACKED:!1,monitor:function(e,t){return function(e,t,n){var i=mt(l(t),3),r=i[0],s=i[1],a=i[2],o=e.log,d=e.utils.getComputedStyle,c=e.utils.secondsToMs;if(!r)return o.error("No element was found with the `"+s+"` query selector.");if("video"!==a&&"audio"!==a)return o.error("The element of `"+s+"` was not a media element.");r.mux&&(r.mux.destroy(),delete r.mux,o.warn("Already monitoring this video element, replacing existing event listeners")),(n=Object.assign({automaticErrorTracking:!0},n)).data=Object.assign({player_software:"HTML5 Video Element",player_mux_plugin_name:"VideoElementMonitor",player_mux_plugin_version:e.VERSION},n.data),n.getPlayheadTime=function(){return c(r.currentTime)},n.getStateData=function(){var e,t,i=this.hlsjs&&this.hlsjs.url,s=this.dashjs&&pt("function"===this.dashjs.getSource)&&this.dashjs.getSource(),a={player_is_paused:r.paused,player_playhead_time:c(r.currentTime),player_width:parseInt(d(r,"width")),player_height:parseInt(d(r,"height")),player_autoplay_on:r.autoplay,player_preload_on:r.preload,player_language_code:r.lang,player_is_fullscreen:ft()&&!!(ft().fullscreenElement||ft().webkitFullscreenElement||ft().mozFullScreenElement||ft().msFullscreenElement),video_poster_url:r.poster,video_source_url:i||s||r.currentSrc,video_source_duration:c(r.duration),video_source_height:r.videoHeight,video_source_width:r.videoWidth,view_dropped_frame_count:null===(e=r)||void 0===e||null===(t=e.getVideoPlaybackQuality)||void 0===t?void 0:t.call(e).droppedVideoFrames},o=n.getPlayheadTime();if(r.getStartDate&&o>0){var l=r.getStartDate();if(l&&"function"==typeof l.getTime&&l.getTime()){var u=l.getTime();if(a.player_program_time=u+o,r.seekable.length>0){var h=u+r.seekable.end(r.seekable.length-1);a.player_live_edge_program_time=h}}}return a},r.mux=r.mux||{},r.mux.deleted=!1,r.mux.emit=function(t,n){e.emit(s,t,n)};var u=function(){o.error("The monitor for this video element has already been destroyed.")};r.mux.destroy=function(){Object.keys(r.mux.listeners).forEach((function(e){r.removeEventListener(e,r.mux.listeners[e],!1)})),delete r.mux.listeners,r.mux.destroy=u,r.mux.swapElement=u,r.mux.emit=u,r.mux.addHLSJS=u,r.mux.addDashJS=u,r.mux.removeHLSJS=u,r.mux.removeDashJS=u,r.mux.deleted=!0,e.emit(s,"destroy")},r.mux.swapElement=function(t){var n=mt(l(t),3),i=n[0],s=n[1],a=n[2];return i?"video"!==a&&"audio"!==a?e.log.error("The element of `"+s+"` was not a media element."):(i.muxId=r.muxId,delete r.muxId,i.mux=i.mux||{},i.mux.listeners=Object.assign({},r.mux.listeners),delete r.mux.listeners,Object.keys(i.mux.listeners).forEach((function(e){r.removeEventListener(e,i.mux.listeners[e],!1),i.addEventListener(e,i.mux.listeners[e],!1)})),i.mux.swapElement=r.mux.swapElement,i.mux.destroy=r.mux.destroy,delete r.mux,void(r=i)):e.log.error("No element was found with the `"+s+"` query selector.")},r.mux.addHLSJS=function(t){e.addHLSJS(s,t)},r.mux.addDashJS=function(t){e.addDashJS(s,t)},r.mux.removeHLSJS=function(){e.removeHLSJS(s)},r.mux.removeDashJS=function(){e.removeDashJS(s)},e.init(s,n),e.emit(s,"playerready"),r.paused||(e.emit(s,"play"),r.readyState>2&&e.emit(s,"playing")),r.mux.listeners={},yt.forEach((function(t){("error"!==t||n.automaticErrorTracking)&&(r.mux.listeners[t]=function(){var n={};if("error"===t){if(!r.error)return;if(1===r.error.code)return;n.player_error_code=r.error.code,n.player_error_message=bt[r.error.code]||r.error.message}e.emit(s,t,n)},r.addEventListener(t,r.mux.listeners[t],!1))}))}(Mt,e,t)},destroyMonitor:function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,s=[],a=!0,o=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(s.push(i.value),!t||s.length!==t);a=!0);}catch(e){o=!0,r=e}finally{try{a||null==n.return||n.return()}finally{if(o)throw r}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Dt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Dt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(l(e),1)[0];t&&t.mux&&"function"==typeof t.mux.destroy?t.mux.destroy():h.error("A video element monitor for `"+e+"` has not been initialized via `mux.monitor`.")},addHLSJS:function(e,t){var n=o(e);xt[n]?xt[n].addHLSJS(t):h.error("A monitor for `"+n+"` has not been initialized.")},addDashJS:function(e,t){var n=o(e);xt[n]?xt[n].addDashJS(t):h.error("A monitor for `"+n+"` has not been initialized.")},removeHLSJS:function(e){var t=o(e);xt[t]?xt[t].removeHLSJS():h.error("A monitor for `"+t+"` has not been initialized.")},removeDashJS:function(e){var t=o(e);xt[t]?xt[t].removeDashJS():h.error("A monitor for `"+t+"` has not been initialized.")},init:function(e,t){f()&&t&&t.respectDoNotTrack&&h.info("The browser's Do Not Track flag is enabled - Mux beaconing is disabled.");var n=o(e);xt[n]=new ut(Mt,n,t)},emit:function(e,t,n){var i=o(e);xt[i]?(xt[i].emit(t,n),"destroy"===t&&delete xt[i]):h.error("A monitor for `"+i+"` has not been initialized.")},checkDoNotTrack:f,log:h,utils:Ct,events:{PLAYER_READY:"playerready",VIEW_INIT:"viewinit",VIDEO_CHANGE:"videochange",PLAY:"play",PAUSE:"pause",PLAYING:"playing",TIME_UPDATE:"timeupdate",SEEKING:"seeking",SEEKED:"seeked",REBUFFER_START:"rebufferstart",REBUFFER_END:"rebufferend",ERROR:"error",ENDED:"ended",RENDITION_CHANGE:"renditionchange",ORIENTATION_CHANGE:"orientationchange",AD_REQUEST:"adrequest",AD_RESPONSE:"adresponse",AD_BREAK_START:"adbreakstart",AD_PLAY:"adplay",AD_PLAYING:"adplaying",AD_PAUSE:"adpause",AD_FIRST_QUARTILE:"adfirstquartile",AD_MID_POINT:"admidpoint",AD_THIRD_QUARTILE:"adthirdquartile",AD_ENDED:"adended",AD_BREAK_END:"adbreakend",AD_ERROR:"aderror",REQUEST_COMPLETED:"requestcompleted",REQUEST_FAILED:"requestfailed",REQUEST_CANCELLED:"requestcanceled"},WINDOW_HIDDEN:!1,WINDOW_UNLOADING:!1};Object.assign(Mt,Pt),void 0!==r()&&"function"==typeof r().addEventListener&&r().addEventListener("pagehide",(function(e){e.persisted||(Mt.WINDOW_UNLOADING=!0)}),!1);var Ot=Mt},655:function(e,t,n){var i,r;function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}!function(a){var o=!1;if(void 0===(r="function"==typeof(i=a)?i.call(t,n,t,e):i)||(e.exports=r),o=!0,"object"===s(t)&&(e.exports=a(),o=!0),!o){var l=window.Cookies,d=window.Cookies=a();d.noConflict=function(){return window.Cookies=l,d}}}((function(){var e=function(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t};return function t(n){function i(t,r,s){var a;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(s=e({path:"/"},i.defaults,s)).expires){var o=new Date;o.setMilliseconds(o.getMilliseconds()+864e5*s.expires),s.expires=o}try{a=JSON.stringify(r),/^[\{\[]/.test(a)&&(r=a)}catch(e){}return r=n.write?n.write(r,t):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=(t=(t=encodeURIComponent(String(t))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape),document.cookie=[t,"=",r,s.expires?"; expires="+s.expires.toUTCString():"",s.path?"; path="+s.path:"",s.domain?"; domain="+s.domain:"",s.secure?"; secure":""].join("")}t||(a={});for(var l=document.cookie?document.cookie.split("; "):[],d=/(%[0-9A-Z]{2})+/g,c=0;c<l.length;c++){var u=l[c].split("="),h=u.slice(1).join("=");'"'===h.charAt(0)&&(h=h.slice(1,-1));try{var f=u[0].replace(d,decodeURIComponent);if(h=n.read?n.read(h,f):n(h,f)||h.replace(d,decodeURIComponent),this.json)try{h=JSON.parse(h)}catch(e){}if(t===f){a=h;break}t||(a[f]=h)}catch(e){}}return a}}return i.set=i,i.get=function(e){return i.call(i,e)},i.getJSON=function(){return i.apply({json:!0},[].slice.call(arguments))},i.defaults={},i.remove=function(t,n){i(t,"",e(n,{expires:-1}))},i.withConverter=t,i}((function(){}))}))},153:function(e,t,n){var i,r=void 0!==n.g?n.g:"undefined"!=typeof window?window:{},s=n(558);"undefined"!=typeof document?i=document:(i=r["__GLOBAL_DOCUMENT_CACHE@4"])||(i=r["__GLOBAL_DOCUMENT_CACHE@4"]=s),e.exports=i},48:function(e,t,n){var i;i="undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},e.exports=i},640:function(e,t,n){var i,r;!function(s,a){"use strict";i=function(){var e=function(){},t="undefined",n=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"];function r(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(t){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function s(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function a(i){return"debug"===i&&(i="log"),typeof console!==t&&("trace"===i&&n?s:void 0!==console[i]?r(console,i):void 0!==console.log?r(console,"log"):e)}function o(t,n){for(var r=0;r<i.length;r++){var s=i[r];this[s]=r<t?e:this.methodFactory(s,t,n)}this.log=this.debug}function l(e,n,i){return function(){typeof console!==t&&(o.call(this,n,i),this[e].apply(this,arguments))}}function d(e,t,n){return a(e)||l.apply(this,arguments)}function c(e,n,r){var s,a=this;n=null==n?"WARN":n;var l="loglevel";function c(e){var n=(i[e]||"silent").toUpperCase();if(typeof window!==t&&l){try{return void(window.localStorage[l]=n)}catch(e){}try{window.document.cookie=encodeURIComponent(l)+"="+n+";"}catch(e){}}}function u(){var e;if(typeof window!==t&&l){try{e=window.localStorage[l]}catch(e){}if(typeof e===t)try{var n=window.document.cookie,i=n.indexOf(encodeURIComponent(l)+"=");-1!==i&&(e=/^([^;]+)/.exec(n.slice(i))[1])}catch(e){}return void 0===a.levels[e]&&(e=void 0),e}}"string"==typeof e?l+=":"+e:"symbol"==typeof e&&(l=void 0),a.name=e,a.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},a.methodFactory=r||d,a.getLevel=function(){return s},a.setLevel=function(n,i){if("string"==typeof n&&void 0!==a.levels[n.toUpperCase()]&&(n=a.levels[n.toUpperCase()]),!("number"==typeof n&&n>=0&&n<=a.levels.SILENT))throw"log.setLevel() called with invalid level: "+n;if(s=n,!1!==i&&c(n),o.call(a,n,e),typeof console===t&&n<a.levels.SILENT)return"No console available for logging"},a.setDefaultLevel=function(e){n=e,u()||a.setLevel(e,!1)},a.resetLevel=function(){a.setLevel(n,!1),function(){if(typeof window!==t&&l){try{return void window.localStorage.removeItem(l)}catch(e){}try{window.document.cookie=encodeURIComponent(l)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}()},a.enableAll=function(e){a.setLevel(a.levels.TRACE,e)},a.disableAll=function(e){a.setLevel(a.levels.SILENT,e)};var h=u();null==h&&(h=n),a.setLevel(h,!1)}var u=new c,h={};u.getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=h[e];return t||(t=h[e]=new c(e,u.getLevel(),u.methodFactory)),t};var f=typeof window!==t?window.log:void 0;return u.noConflict=function(){return typeof window!==t&&window.log===u&&(window.log=f),u},u.getLoggers=function(){return h},u.default=u,u},void 0===(r=i.call(t,n,t,e))||(e.exports=r)}()},375:function(e,t){"use strict";var n=Object.prototype.hasOwnProperty;function i(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function r(e){try{return encodeURIComponent(e)}catch(e){return null}}t.stringify=function(e,t){t=t||"";var i,s,a=[];for(s in"string"!=typeof t&&(t="?"),e)if(n.call(e,s)){if((i=e[s])||null!=i&&!isNaN(i)||(i=""),s=r(s),i=r(i),null===s||null===i)continue;a.push(s+"="+i)}return a.length?t+a.join("&"):""},t.parse=function(e){for(var t,n=/([^=?#&]+)=?([^&]*)/g,r={};t=n.exec(e);){var s=i(t[1]),a=i(t[2]);null===s||null===a||s in r||(r[s]=a)}return r}},558:function(){}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var s=t[i]={exports:{}};return e[i].call(s.exports,s,s.exports,n),s.exports}return n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n(80)}()},e.exports=t()},155:e=>{var t,n,i=e.exports={};function r(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(e){t=r}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(e){n=s}}();var o,l=[],d=!1,c=-1;function u(){d&&o&&(d=!1,o.length?l=o.concat(l):c=-1,l.length&&h())}function h(){if(!d){var e=a(u);d=!0;for(var t=l.length;t;){for(o=l,l=[];++c<t;)o&&o[c].run();c=-1,t=l.length}o=null,d=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function p(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new f(e,t)),1!==l.length||d||a(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=p,i.addListener=p,i.once=p,i.off=p,i.removeListener=p,i.removeAllListeners=p,i.emit=p,i.prependListener=p,i.prependOnceListener=p,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},379:(e,t,n)=>{"use strict";var i,r=function(){return void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i},s=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),a=[];function o(e){for(var t=-1,n=0;n<a.length;n++)if(a[n].identifier===e){t=n;break}return t}function l(e,t){for(var n={},i=[],r=0;r<e.length;r++){var s=e[r],l=t.base?s[0]+t.base:s[0],d=n[l]||0,c="".concat(l," ").concat(d);n[l]=d+1;var u=o(c),h={css:s[1],media:s[2],sourceMap:s[3]};-1!==u?(a[u].references++,a[u].updater(h)):a.push({identifier:c,updater:g(h,t),references:1}),i.push(c)}return i}function d(e){var t=document.createElement("style"),i=e.attributes||{};if(void 0===i.nonce){var r=n.nc;r&&(i.nonce=r)}if(Object.keys(i).forEach((function(e){t.setAttribute(e,i[e])})),"function"==typeof e.insert)e.insert(t);else{var a=s(e.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(t)}return t}var c,u=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function h(e,t,n,i){var r=n?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(e.styleSheet)e.styleSheet.cssText=u(t,r);else{var s=document.createTextNode(r),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(s,a[t]):e.appendChild(s)}}function f(e,t,n){var i=n.css,r=n.media,s=n.sourceMap;if(r?e.setAttribute("media",r):e.removeAttribute("media"),s&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var p=null,m=0;function g(e,t){var n,i,r;if(t.singleton){var s=m++;n=p||(p=d(t)),i=h.bind(null,n,s,!1),r=h.bind(null,n,s,!0)}else n=d(t),i=f.bind(null,n,t),r=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else r()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=r());var n=l(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var i=0;i<n.length;i++){var r=o(n[i]);a[r].references--}for(var s=l(e,t),d=0;d<n.length;d++){var c=o(n[d]);0===a[c].references&&(a[c].updater(),a.splice(c,1))}n=s}}}},744:(e,t)=>{"use strict";t.Z=(e,t)=>{const n=e.__vccOpts||e;for(const[e,i]of t)n[e]=i;return n}}},n={};function i(e){var r=n[e];if(void 0!==r)return r.exports;var s=n[e]={id:e,exports:{}};return t[e](s,s.exports,i),s.exports}i.m=t,e=[],i.O=(t,n,r,s)=>{if(!n){var a=1/0;for(c=0;c<e.length;c++){for(var[n,r,s]=e[c],o=!0,l=0;l<n.length;l++)(!1&s||a>=s)&&Object.keys(i.O).every((e=>i.O[e](n[l])))?n.splice(l--,1):(o=!1,s<a&&(a=s));if(o){e.splice(c--,1);var d=r();void 0!==d&&(t=d)}}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[n,r,s]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={394:0,493:0};i.O.j=t=>0===e[t];var t=(t,n)=>{var r,s,[a,o,l]=n,d=0;if(a.some((t=>0!==e[t]))){for(r in o)i.o(o,r)&&(i.m[r]=o[r]);if(l)var c=l(i)}for(t&&t(n);d<a.length;d++)s=a[d],i.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return i.O(c)},n=self.webpackChunkmux=self.webpackChunkmux||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),i.nc=void 0,i.O(void 0,[493],(()=>i(227)));var r=i.O(void 0,[493],(()=>i(50)));r=i.O(r)})();