/*! For license information please see mux-field.js.LICENSE.txt */
(()=>{var e,t={662:(e,t,n)=>{"use strict";var i={};function r(e,t){const n=new Set(e.split(","));return t?e=>n.has(e.toLowerCase()):e=>n.has(e)}n.r(i),n.d(i,{BaseTransition:()=>$i,BaseTransitionPropsValidators:()=>Ui,Comment:()=>Js,DeprecationTypes:()=>go,EffectScope:()=>ve,ErrorCodes:()=>vn,ErrorTypeStrings:()=>co,Fragment:()=>Qs,KeepAlive:()=>Ji,ReactiveEffect:()=>_e,Static:()=>ea,Suspense:()=>fi,Teleport:()=>zs,Text:()=>Zs,TrackOpTypes:()=>cn,Transition:()=>Ao,TransitionGroup:()=>vl,TriggerOpTypes:()=>un,VueElement:()=>cl,assertNumber:()=>gn,callWithAsyncErrorHandling:()=>En,callWithErrorHandling:()=>yn,camelize:()=>M,capitalize:()=>N,cloneVNode:()=>Ea,compatUtils:()=>fo,computed:()=>to,createApp:()=>Yl,createBlock:()=>ca,createCommentVNode:()=>Aa,createElementBlock:()=>da,createElementVNode:()=>ga,createHydrationRenderer:()=>Ns,createPropsRestProxy:()=>Vr,createRenderer:()=>Ps,createSSRApp:()=>zl,createSlots:()=>Er,createStaticVNode:()=>_a,createTextVNode:()=>Ta,createVNode:()=>va,customRef:()=>rn,defineAsyncComponent:()=>zi,defineComponent:()=>ji,defineCustomElement:()=>ol,defineEmits:()=>Ir,defineExpose:()=>xr,defineModel:()=>Or,defineOptions:()=>Dr,defineProps:()=>Cr,defineSSRCustomElement:()=>ll,defineSlots:()=>Mr,devtools:()=>uo,effect:()=>Le,effectScope:()=>be,getCurrentInstance:()=>Ma,getCurrentScope:()=>Ee,getTransitionRawChildren:()=>qi,guardReactiveProps:()=>ya,h:()=>io,handleError:()=>Tn,hasInjectionContext:()=>ls,hydrate:()=>jl,initCustomFormatter:()=>ro,initDirectivesForSSR:()=>Jl,inject:()=>os,isMemoSame:()=>ao,isProxy:()=>Ft,isReactive:()=>Ot,isReadonly:()=>Pt,isRef:()=>qt,isRuntimeOnly:()=>Ka,isShallow:()=>Nt,isVNode:()=>ua,markRaw:()=>Bt,mergeDefaults:()=>$r,mergeModels:()=>Hr,mergeProps:()=>La,nextTick:()=>xn,normalizeClass:()=>Z,normalizeProps:()=>J,normalizeStyle:()=>j,onActivated:()=>tr,onBeforeMount:()=>dr,onBeforeUnmount:()=>mr,onBeforeUpdate:()=>ur,onDeactivated:()=>nr,onErrorCaptured:()=>br,onMounted:()=>cr,onRenderTracked:()=>vr,onRenderTriggered:()=>gr,onScopeDispose:()=>Te,onServerPrefetch:()=>fr,onUnmounted:()=>pr,onUpdated:()=>hr,openBlock:()=>ia,popScopeId:()=>Xn,provide:()=>as,proxyRefs:()=>tn,pushScopeId:()=>zn,queuePostFlushCb:()=>On,reactive:()=>Ct,readonly:()=>xt,ref:()=>jt,registerRuntimeCompiler:()=>Ga,render:()=>ql,renderList:()=>yr,renderSlot:()=>Tr,resolveComponent:()=>oi,resolveDirective:()=>ci,resolveDynamicComponent:()=>di,resolveFilter:()=>po,resolveTransitionHooks:()=>Vi,setBlockTracking:()=>oa,setDevtoolsHook:()=>ho,setTransitionHooks:()=>Ki,shallowReactive:()=>It,shallowReadonly:()=>Dt,shallowRef:()=>Yt,ssrContextKey:()=>Ti,ssrUtils:()=>mo,stop:()=>Re,toDisplayString:()=>he,toHandlerKey:()=>F,toHandlers:()=>Ar,toRaw:()=>Ut,toRef:()=>ln,toRefs:()=>sn,toValue:()=>Jt,transformVNodeArgs:()=>ma,triggerRef:()=>Qt,unref:()=>Zt,useAttrs:()=>Fr,useCssModule:()=>ul,useCssVars:()=>Go,useModel:()=>no,useSSRContext:()=>_i,useSlots:()=>Nr,useTransitionState:()=>Ni,vModelCheckbox:()=>wl,vModelDynamic:()=>Ml,vModelRadio:()=>Rl,vModelSelect:()=>Cl,vModelText:()=>kl,vShow:()=>Ho,version:()=>oo,warn:()=>lo,watch:()=>Li,watchEffect:()=>Ai,watchPostEffect:()=>Si,watchSyncEffect:()=>ki,withAsyncContext:()=>Wr,withCtx:()=>Zn,withDefaults:()=>Pr,withDirectives:()=>Di,withKeys:()=>$l,withMemo:()=>so,withModifiers:()=>Ul,withScopeId:()=>Qn});const s={},a=[],o=()=>{},l=()=>!1,d=e=>111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),c=e=>e.startsWith("onUpdate:"),u=Object.assign,h=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},m=Object.prototype.hasOwnProperty,p=(e,t)=>m.call(e,t),f=Array.isArray,g=e=>"[object Map]"===k(e),v=e=>"[object Set]"===k(e),b=e=>"[object Date]"===k(e),y=e=>"function"==typeof e,E=e=>"string"==typeof e,T=e=>"symbol"==typeof e,_=e=>null!==e&&"object"==typeof e,A=e=>(_(e)||y(e))&&y(e.then)&&y(e.catch),S=Object.prototype.toString,k=e=>S.call(e),w=e=>k(e).slice(8,-1),L=e=>"[object Object]"===k(e),R=e=>E(e)&&"NaN"!==e&&"-"!==e[0]&&""+parseInt(e,10)===e,C=r(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),I=r("bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo"),x=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},D=/-(\w)/g,M=x((e=>e.replace(D,((e,t)=>t?t.toUpperCase():"")))),O=/\B([A-Z])/g,P=x((e=>e.replace(O,"-$1").toLowerCase())),N=x((e=>e.charAt(0).toUpperCase()+e.slice(1))),F=x((e=>e?`on${N(e)}`:"")),U=(e,t)=>!Object.is(e,t),B=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},$=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},H=e=>{const t=parseFloat(e);return isNaN(t)?e:t},V=e=>{const t=E(e)?Number(e):NaN;return isNaN(t)?e:t};let W;const G=()=>W||(W="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n.g?n.g:{});const K={1:"TEXT",2:"CLASS",4:"STYLE",8:"PROPS",16:"FULL_PROPS",32:"NEED_HYDRATION",64:"STABLE_FRAGMENT",128:"KEYED_FRAGMENT",256:"UNKEYED_FRAGMENT",512:"NEED_PATCH",1024:"DYNAMIC_SLOTS",2048:"DEV_ROOT_FRAGMENT",[-1]:"HOISTED",[-2]:"BAIL"},q=r("Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error");function j(e){if(f(e)){const t={};for(let n=0;n<e.length;n++){const i=e[n],r=E(i)?Q(i):j(i);if(r)for(const e in r)t[e]=r[e]}return t}if(E(e)||_(e))return e}const Y=/;(?![^(]*\))/g,z=/:([^]+)/,X=/\/\*[^]*?\*\//g;function Q(e){const t={};return e.replace(X,"").split(Y).forEach((e=>{if(e){const n=e.split(z);n.length>1&&(t[n[0].trim()]=n[1].trim())}})),t}function Z(e){let t="";if(E(e))t=e;else if(f(e))for(let n=0;n<e.length;n++){const i=Z(e[n]);i&&(t+=i+" ")}else if(_(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function J(e){if(!e)return null;let{class:t,style:n}=e;return t&&!E(t)&&(e.class=Z(t)),n&&(e.style=j(n)),e}const ee=r("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,hgroup,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot"),te=r("svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistantLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view"),ne=r("annotation,annotation-xml,maction,maligngroup,malignmark,math,menclose,merror,mfenced,mfrac,mfraction,mglyph,mi,mlabeledtr,mlongdiv,mmultiscripts,mn,mo,mover,mpadded,mphantom,mprescripts,mroot,mrow,ms,mscarries,mscarry,msgroup,msline,mspace,msqrt,msrow,mstack,mstyle,msub,msubsup,msup,mtable,mtd,mtext,mtr,munder,munderover,none,semantics"),ie=r("area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr"),re="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",se=r(re),ae=r(re+",async,autofocus,autoplay,controls,default,defer,disabled,hidden,inert,loop,open,required,reversed,scoped,seamless,checked,muted,multiple,selected");function oe(e){return!!e||""===e}const le=r("accept,accept-charset,accesskey,action,align,allow,alt,async,autocapitalize,autocomplete,autofocus,autoplay,background,bgcolor,border,buffered,capture,challenge,charset,checked,cite,class,code,codebase,color,cols,colspan,content,contenteditable,contextmenu,controls,coords,crossorigin,csp,data,datetime,decoding,default,defer,dir,dirname,disabled,download,draggable,dropzone,enctype,enterkeyhint,for,form,formaction,formenctype,formmethod,formnovalidate,formtarget,headers,height,hidden,high,href,hreflang,http-equiv,icon,id,importance,inert,integrity,ismap,itemprop,keytype,kind,label,lang,language,loading,list,loop,low,manifest,max,maxlength,minlength,media,min,multiple,muted,name,novalidate,open,optimum,pattern,ping,placeholder,poster,preload,radiogroup,readonly,referrerpolicy,rel,required,reversed,rows,rowspan,sandbox,scope,scoped,selected,shape,size,sizes,slot,span,spellcheck,src,srcdoc,srclang,srcset,start,step,style,summary,tabindex,target,title,translate,type,usemap,value,width,wrap"),de=r("xmlns,accent-height,accumulate,additive,alignment-baseline,alphabetic,amplitude,arabic-form,ascent,attributeName,attributeType,azimuth,baseFrequency,baseline-shift,baseProfile,bbox,begin,bias,by,calcMode,cap-height,class,clip,clipPathUnits,clip-path,clip-rule,color,color-interpolation,color-interpolation-filters,color-profile,color-rendering,contentScriptType,contentStyleType,crossorigin,cursor,cx,cy,d,decelerate,descent,diffuseConstant,direction,display,divisor,dominant-baseline,dur,dx,dy,edgeMode,elevation,enable-background,end,exponent,fill,fill-opacity,fill-rule,filter,filterRes,filterUnits,flood-color,flood-opacity,font-family,font-size,font-size-adjust,font-stretch,font-style,font-variant,font-weight,format,from,fr,fx,fy,g1,g2,glyph-name,glyph-orientation-horizontal,glyph-orientation-vertical,glyphRef,gradientTransform,gradientUnits,hanging,height,href,hreflang,horiz-adv-x,horiz-origin-x,id,ideographic,image-rendering,in,in2,intercept,k,k1,k2,k3,k4,kernelMatrix,kernelUnitLength,kerning,keyPoints,keySplines,keyTimes,lang,lengthAdjust,letter-spacing,lighting-color,limitingConeAngle,local,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mask,maskContentUnits,maskUnits,mathematical,max,media,method,min,mode,name,numOctaves,offset,opacity,operator,order,orient,orientation,origin,overflow,overline-position,overline-thickness,panose-1,paint-order,path,pathLength,patternContentUnits,patternTransform,patternUnits,ping,pointer-events,points,pointsAtX,pointsAtY,pointsAtZ,preserveAlpha,preserveAspectRatio,primitiveUnits,r,radius,referrerPolicy,refX,refY,rel,rendering-intent,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,result,rotate,rx,ry,scale,seed,shape-rendering,slope,spacing,specularConstant,specularExponent,speed,spreadMethod,startOffset,stdDeviation,stemh,stemv,stitchTiles,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,string,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,style,surfaceScale,systemLanguage,tabindex,tableValues,target,targetX,targetY,text-anchor,text-decoration,text-rendering,textLength,to,transform,transform-origin,type,u1,u2,underline-position,underline-thickness,unicode,unicode-bidi,unicode-range,units-per-em,v-alphabetic,v-hanging,v-ideographic,v-mathematical,values,vector-effect,version,vert-adv-y,vert-origin-x,vert-origin-y,viewBox,viewTarget,visibility,width,widths,word-spacing,writing-mode,x,x-height,x1,x2,xChannelSelector,xlink:actuate,xlink:arcrole,xlink:href,xlink:role,xlink:show,xlink:title,xlink:type,xmlns:xlink,xml:base,xml:lang,xml:space,y,y1,y2,yChannelSelector,z,zoomAndPan");function ce(e,t){if(e===t)return!0;let n=b(e),i=b(t);if(n||i)return!(!n||!i)&&e.getTime()===t.getTime();if(n=T(e),i=T(t),n||i)return e===t;if(n=f(e),i=f(t),n||i)return!(!n||!i)&&function(e,t){if(e.length!==t.length)return!1;let n=!0;for(let i=0;n&&i<e.length;i++)n=ce(e[i],t[i]);return n}(e,t);if(n=_(e),i=_(t),n||i){if(!n||!i)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e){const i=e.hasOwnProperty(n),r=t.hasOwnProperty(n);if(i&&!r||!i&&r||!ce(e[n],t[n]))return!1}}return String(e)===String(t)}function ue(e,t){return e.findIndex((e=>ce(e,t)))}const he=e=>E(e)?e:null==e?"":f(e)||_(e)&&(e.toString===S||!y(e.toString))?JSON.stringify(e,me,2):String(e),me=(e,t)=>t&&t.__v_isRef?me(e,t.value):g(t)?{[`Map(${t.size})`]:[...t.entries()].reduce(((e,[t,n],i)=>(e[pe(t,i)+" =>"]=n,e)),{})}:v(t)?{[`Set(${t.size})`]:[...t.values()].map((e=>pe(e)))}:T(t)?pe(t):!_(t)||f(t)||L(t)?t:String(t),pe=(e,t="")=>{var n;return T(e)?`Symbol(${null!=(n=e.description)?n:t})`:e};let fe,ge;class ve{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=fe,!e&&fe&&(this.index=(fe.scopes||(fe.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const t=fe;try{return fe=this,e()}finally{fe=t}}else 0}on(){fe=this}off(){fe=this.parent}stop(e){if(this._active){let t,n;for(t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.parent=void 0,this._active=!1}}}function be(e){return new ve(e)}function ye(e,t=fe){t&&t.active&&t.effects.push(e)}function Ee(){return fe}function Te(e){fe&&fe.cleanups.push(e)}class _e{constructor(e,t,n,i){this.fn=e,this.trigger=t,this.scheduler=n,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,ye(this,i)}get dirty(){if(2===this._dirtyLevel||3===this._dirtyLevel){this._dirtyLevel=1,De();for(let e=0;e<this._depsLength;e++){const t=this.deps[e];if(t.computed&&(Ae(t.computed),this._dirtyLevel>=4))break}1===this._dirtyLevel&&(this._dirtyLevel=0),Me()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=Ce,t=ge;try{return Ce=!0,ge=this,this._runnings++,Se(this),this.fn()}finally{ke(this),this._runnings--,ge=t,Ce=e}}stop(){var e;this.active&&(Se(this),ke(this),null==(e=this.onStop)||e.call(this),this.active=!1)}}function Ae(e){return e.value}function Se(e){e._trackId++,e._depsLength=0}function ke(e){if(e.deps.length>e._depsLength){for(let t=e._depsLength;t<e.deps.length;t++)we(e.deps[t],e);e.deps.length=e._depsLength}}function we(e,t){const n=e.get(t);void 0!==n&&t._trackId!==n&&(e.delete(t),0===e.size&&e.cleanup())}function Le(e,t){e.effect instanceof _e&&(e=e.effect.fn);const n=new _e(e,o,(()=>{n.dirty&&n.run()}));t&&(u(n,t),t.scope&&ye(n,t.scope)),t&&t.lazy||n.run();const i=n.run.bind(n);return i.effect=n,i}function Re(e){e.effect.stop()}let Ce=!0,Ie=0;const xe=[];function De(){xe.push(Ce),Ce=!1}function Me(){const e=xe.pop();Ce=void 0===e||e}function Oe(){Ie++}function Pe(){for(Ie--;!Ie&&Fe.length;)Fe.shift()()}function Ne(e,t,n){if(t.get(e)!==e._trackId){t.set(e,e._trackId);const n=e.deps[e._depsLength];n!==t?(n&&we(n,e),e.deps[e._depsLength++]=t):e._depsLength++}}const Fe=[];function Ue(e,t,n){Oe();for(const n of e.keys()){let i;n._dirtyLevel<t&&(null!=i?i:i=e.get(n)===n._trackId)&&(n._shouldSchedule||(n._shouldSchedule=0===n._dirtyLevel),n._dirtyLevel=t),n._shouldSchedule&&(null!=i?i:i=e.get(n)===n._trackId)&&(n.trigger(),n._runnings&&!n.allowRecurse||2===n._dirtyLevel||(n._shouldSchedule=!1,n.scheduler&&Fe.push(n.scheduler)))}Pe()}const Be=(e,t)=>{const n=new Map;return n.cleanup=e,n.computed=t,n},$e=new WeakMap,He=Symbol(""),Ve=Symbol("");function We(e,t,n){if(Ce&&ge){let t=$e.get(e);t||$e.set(e,t=new Map);let i=t.get(n);i||t.set(n,i=Be((()=>t.delete(n)))),Ne(ge,i)}}function Ge(e,t,n,i,r,s){const a=$e.get(e);if(!a)return;let o=[];if("clear"===t)o=[...a.values()];else if("length"===n&&f(e)){const e=Number(i);a.forEach(((t,n)=>{("length"===n||!T(n)&&n>=e)&&o.push(t)}))}else switch(void 0!==n&&o.push(a.get(n)),t){case"add":f(e)?R(n)&&o.push(a.get("length")):(o.push(a.get(He)),g(e)&&o.push(a.get(Ve)));break;case"delete":f(e)||(o.push(a.get(He)),g(e)&&o.push(a.get(Ve)));break;case"set":g(e)&&o.push(a.get(He))}Oe();for(const e of o)e&&Ue(e,4);Pe()}const Ke=r("__proto__,__v_isRef,__isVue"),qe=new Set(Object.getOwnPropertyNames(Symbol).filter((e=>"arguments"!==e&&"caller"!==e)).map((e=>Symbol[e])).filter(T)),je=Ye();function Ye(){const e={};return["includes","indexOf","lastIndexOf"].forEach((t=>{e[t]=function(...e){const n=Ut(this);for(let e=0,t=this.length;e<t;e++)We(n,0,e+"");const i=n[t](...e);return-1===i||!1===i?n[t](...e.map(Ut)):i}})),["push","pop","shift","unshift","splice"].forEach((t=>{e[t]=function(...e){De(),Oe();const n=Ut(this)[t].apply(this,e);return Pe(),Me(),n}})),e}function ze(e){T(e)||(e=String(e));const t=Ut(this);return We(t,0,e),t.hasOwnProperty(e)}class Xe{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,n){const i=this._isReadonly,r=this._isShallow;if("__v_isReactive"===t)return!i;if("__v_isReadonly"===t)return i;if("__v_isShallow"===t)return r;if("__v_raw"===t)return n===(i?r?Rt:Lt:r?wt:kt).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const s=f(e);if(!i){if(s&&p(je,t))return Reflect.get(je,t,n);if("hasOwnProperty"===t)return ze}const a=Reflect.get(e,t,n);return(T(t)?qe.has(t):Ke(t))?a:(i||We(e,0,t),r?a:qt(a)?s&&R(t)?a:a.value:_(a)?i?xt(a):Ct(a):a)}}class Qe extends Xe{constructor(e=!1){super(!1,e)}set(e,t,n,i){let r=e[t];if(!this._isShallow){const t=Pt(r);if(Nt(n)||Pt(n)||(r=Ut(r),n=Ut(n)),!f(e)&&qt(r)&&!qt(n))return!t&&(r.value=n,!0)}const s=f(e)&&R(t)?Number(t)<e.length:p(e,t),a=Reflect.set(e,t,n,i);return e===Ut(i)&&(s?U(n,r)&&Ge(e,"set",t,n):Ge(e,"add",t,n)),a}deleteProperty(e,t){const n=p(e,t),i=(e[t],Reflect.deleteProperty(e,t));return i&&n&&Ge(e,"delete",t,void 0),i}has(e,t){const n=Reflect.has(e,t);return T(t)&&qe.has(t)||We(e,0,t),n}ownKeys(e){return We(e,0,f(e)?"length":He),Reflect.ownKeys(e)}}class Ze extends Xe{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const Je=new Qe,et=new Ze,tt=new Qe(!0),nt=new Ze(!0),it=e=>e,rt=e=>Reflect.getPrototypeOf(e);function st(e,t,n=!1,i=!1){const r=Ut(e=e.__v_raw),s=Ut(t);n||(U(t,s)&&We(r,0,t),We(r,0,s));const{has:a}=rt(r),o=i?it:n?Ht:$t;return a.call(r,t)?o(e.get(t)):a.call(r,s)?o(e.get(s)):void(e!==r&&e.get(t))}function at(e,t=!1){const n=this.__v_raw,i=Ut(n),r=Ut(e);return t||(U(e,r)&&We(i,0,e),We(i,0,r)),e===r?n.has(e):n.has(e)||n.has(r)}function ot(e,t=!1){return e=e.__v_raw,!t&&We(Ut(e),0,He),Reflect.get(e,"size",e)}function lt(e){e=Ut(e);const t=Ut(this);return rt(t).has.call(t,e)||(t.add(e),Ge(t,"add",e,e)),this}function dt(e,t){t=Ut(t);const n=Ut(this),{has:i,get:r}=rt(n);let s=i.call(n,e);s||(e=Ut(e),s=i.call(n,e));const a=r.call(n,e);return n.set(e,t),s?U(t,a)&&Ge(n,"set",e,t):Ge(n,"add",e,t),this}function ct(e){const t=Ut(this),{has:n,get:i}=rt(t);let r=n.call(t,e);r||(e=Ut(e),r=n.call(t,e));i&&i.call(t,e);const s=t.delete(e);return r&&Ge(t,"delete",e,void 0),s}function ut(){const e=Ut(this),t=0!==e.size,n=e.clear();return t&&Ge(e,"clear",void 0,void 0),n}function ht(e,t){return function(n,i){const r=this,s=r.__v_raw,a=Ut(s),o=t?it:e?Ht:$t;return!e&&We(a,0,He),s.forEach(((e,t)=>n.call(i,o(e),o(t),r)))}}function mt(e,t,n){return function(...i){const r=this.__v_raw,s=Ut(r),a=g(s),o="entries"===e||e===Symbol.iterator&&a,l="keys"===e&&a,d=r[e](...i),c=n?it:t?Ht:$t;return!t&&We(s,0,l?Ve:He),{next(){const{value:e,done:t}=d.next();return t?{value:e,done:t}:{value:o?[c(e[0]),c(e[1])]:c(e),done:t}},[Symbol.iterator](){return this}}}}function pt(e){return function(...t){return"delete"!==e&&("clear"===e?void 0:this)}}function ft(){const e={get(e){return st(this,e)},get size(){return ot(this)},has:at,add:lt,set:dt,delete:ct,clear:ut,forEach:ht(!1,!1)},t={get(e){return st(this,e,!1,!0)},get size(){return ot(this)},has:at,add:lt,set:dt,delete:ct,clear:ut,forEach:ht(!1,!0)},n={get(e){return st(this,e,!0)},get size(){return ot(this,!0)},has(e){return at.call(this,e,!0)},add:pt("add"),set:pt("set"),delete:pt("delete"),clear:pt("clear"),forEach:ht(!0,!1)},i={get(e){return st(this,e,!0,!0)},get size(){return ot(this,!0)},has(e){return at.call(this,e,!0)},add:pt("add"),set:pt("set"),delete:pt("delete"),clear:pt("clear"),forEach:ht(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach((r=>{e[r]=mt(r,!1,!1),n[r]=mt(r,!0,!1),t[r]=mt(r,!1,!0),i[r]=mt(r,!0,!0)})),[e,n,t,i]}const[gt,vt,bt,yt]=ft();function Et(e,t){const n=t?e?yt:bt:e?vt:gt;return(t,i,r)=>"__v_isReactive"===i?!e:"__v_isReadonly"===i?e:"__v_raw"===i?t:Reflect.get(p(n,i)&&i in t?n:t,i,r)}const Tt={get:Et(!1,!1)},_t={get:Et(!1,!0)},At={get:Et(!0,!1)},St={get:Et(!0,!0)};const kt=new WeakMap,wt=new WeakMap,Lt=new WeakMap,Rt=new WeakMap;function Ct(e){return Pt(e)?e:Mt(e,!1,Je,Tt,kt)}function It(e){return Mt(e,!1,tt,_t,wt)}function xt(e){return Mt(e,!0,et,At,Lt)}function Dt(e){return Mt(e,!0,nt,St,Rt)}function Mt(e,t,n,i,r){if(!_(e))return e;if(e.__v_raw&&(!t||!e.__v_isReactive))return e;const s=r.get(e);if(s)return s;const a=(o=e).__v_skip||!Object.isExtensible(o)?0:function(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}(w(o));var o;if(0===a)return e;const l=new Proxy(e,2===a?i:n);return r.set(e,l),l}function Ot(e){return Pt(e)?Ot(e.__v_raw):!(!e||!e.__v_isReactive)}function Pt(e){return!(!e||!e.__v_isReadonly)}function Nt(e){return!(!e||!e.__v_isShallow)}function Ft(e){return!!e&&!!e.__v_raw}function Ut(e){const t=e&&e.__v_raw;return t?Ut(t):e}function Bt(e){return Object.isExtensible(e)&&$(e,"__v_skip",!0),e}const $t=e=>_(e)?Ct(e):e,Ht=e=>_(e)?xt(e):e;class Vt{constructor(e,t,n,i){this.getter=e,this._setter=t,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new _e((()=>e(this._value)),(()=>Kt(this,2===this.effect._dirtyLevel?2:3))),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=n}get value(){const e=Ut(this);return e._cacheable&&!e.effect.dirty||!U(e._value,e._value=e.effect.run())||Kt(e,4),Gt(e),e.effect._dirtyLevel>=2&&Kt(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function Wt(e,t,n=!1){let i,r;const s=y(e);s?(i=e,r=o):(i=e.get,r=e.set);return new Vt(i,r,s||!r,n)}function Gt(e){var t;Ce&&ge&&(e=Ut(e),Ne(ge,null!=(t=e.dep)?t:e.dep=Be((()=>e.dep=void 0),e instanceof Vt?e:void 0)))}function Kt(e,t=4,n){const i=(e=Ut(e)).dep;i&&Ue(i,t)}function qt(e){return!(!e||!0!==e.__v_isRef)}function jt(e){return zt(e,!1)}function Yt(e){return zt(e,!0)}function zt(e,t){return qt(e)?e:new Xt(e,t)}class Xt{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:Ut(e),this._value=t?e:$t(e)}get value(){return Gt(this),this._value}set value(e){const t=this.__v_isShallow||Nt(e)||Pt(e);e=t?e:Ut(e),U(e,this._rawValue)&&(this._rawValue=e,this._value=t?e:$t(e),Kt(this,4))}}function Qt(e){Kt(e,4)}function Zt(e){return qt(e)?e.value:e}function Jt(e){return y(e)?e():Zt(e)}const en={get:(e,t,n)=>Zt(Reflect.get(e,t,n)),set:(e,t,n,i)=>{const r=e[t];return qt(r)&&!qt(n)?(r.value=n,!0):Reflect.set(e,t,n,i)}};function tn(e){return Ot(e)?e:new Proxy(e,en)}class nn{constructor(e){this.dep=void 0,this.__v_isRef=!0;const{get:t,set:n}=e((()=>Gt(this)),(()=>Kt(this)));this._get=t,this._set=n}get value(){return this._get()}set value(e){this._set(e)}}function rn(e){return new nn(e)}function sn(e){const t=f(e)?new Array(e.length):{};for(const n in e)t[n]=dn(e,n);return t}class an{constructor(e,t,n){this._object=e,this._key=t,this._defaultValue=n,this.__v_isRef=!0}get value(){const e=this._object[this._key];return void 0===e?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return function(e,t){var n;return null==(n=$e.get(e))?void 0:n.get(t)}(Ut(this._object),this._key)}}class on{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function ln(e,t,n){return qt(e)?e:y(e)?new on(e):_(e)&&arguments.length>1?dn(e,t,n):jt(e)}function dn(e,t,n){const i=e[t];return qt(i)?i:new an(e,t,n)}const cn={GET:"get",HAS:"has",ITERATE:"iterate"},un={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"},hn=[];function mn(e,...t){De();const n=hn.length?hn[hn.length-1].component:null,i=n&&n.appContext.config.warnHandler,r=function(){let e=hn[hn.length-1];if(!e)return[];const t=[];for(;e;){const n=t[0];n&&n.vnode===e?n.recurseCount++:t.push({vnode:e,recurseCount:0});const i=e.component&&e.component.parent;e=i&&i.vnode}return t}();if(i)yn(i,n,11,[e+t.map((e=>{var t,n;return null!=(n=null==(t=e.toString)?void 0:t.call(e))?n:JSON.stringify(e)})).join(""),n&&n.proxy,r.map((({vnode:e})=>`at <${Ja(n,e.type)}>`)).join("\n"),r]);else{const n=[`[Vue warn]: ${e}`,...t];r.length&&n.push("\n",...function(e){const t=[];return e.forEach(((e,n)=>{t.push(...0===n?[]:["\n"],...function({vnode:e,recurseCount:t}){const n=t>0?`... (${t} recursive calls)`:"",i=!!e.component&&null==e.component.parent,r=` at <${Ja(e.component,e.type,i)}`,s=">"+n;return e.props?[r,...pn(e.props),s]:[r+s]}(e))})),t}(r)),console.warn(...n)}Me()}function pn(e){const t=[],n=Object.keys(e);return n.slice(0,3).forEach((n=>{t.push(...fn(n,e[n]))})),n.length>3&&t.push(" ..."),t}function fn(e,t,n){return E(t)?(t=JSON.stringify(t),n?t:[`${e}=${t}`]):"number"==typeof t||"boolean"==typeof t||null==t?n?t:[`${e}=${t}`]:qt(t)?(t=fn(e,Ut(t.value),!0),n?t:[`${e}=Ref<`,t,">"]):y(t)?[`${e}=fn${t.name?`<${t.name}>`:""}`]:(t=Ut(t),n?t:[`${e}=`,t])}function gn(e,t){}const vn={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",WATCH_GETTER:2,2:"WATCH_GETTER",WATCH_CALLBACK:3,3:"WATCH_CALLBACK",WATCH_CLEANUP:4,4:"WATCH_CLEANUP",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER"},bn={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush. This is likely a Vue internals bug. Please open an issue at https://github.com/vuejs/core ."};function yn(e,t,n,i){try{return i?e(...i):e()}catch(e){Tn(e,t,n)}}function En(e,t,n,i){if(y(e)){const r=yn(e,t,n,i);return r&&A(r)&&r.catch((e=>{Tn(e,t,n)})),r}if(f(e)){const r=[];for(let s=0;s<e.length;s++)r.push(En(e[s],t,n,i));return r}}function Tn(e,t,n,i=!0){t&&t.vnode;if(t){let i=t.parent;const r=t.proxy,s=`https://vuejs.org/error-reference/#runtime-${n}`;for(;i;){const t=i.ec;if(t)for(let n=0;n<t.length;n++)if(!1===t[n](e,r,s))return;i=i.parent}const a=t.appContext.config.errorHandler;if(a)return De(),yn(a,null,10,[e,r,s]),void Me()}!function(e,t,n,i=!0){console.error(e)}(e,0,0,i)}let _n=!1,An=!1;const Sn=[];let kn=0;const wn=[];let Ln=null,Rn=0;const Cn=Promise.resolve();let In=null;function xn(e){const t=In||Cn;return e?t.then(this?e.bind(this):e):t}function Dn(e){Sn.length&&Sn.includes(e,_n&&e.allowRecurse?kn+1:kn)||(null==e.id?Sn.push(e):Sn.splice(function(e){let t=kn+1,n=Sn.length;for(;t<n;){const i=t+n>>>1,r=Sn[i],s=Fn(r);s<e||s===e&&r.pre?t=i+1:n=i}return t}(e.id),0,e),Mn())}function Mn(){_n||An||(An=!0,In=Cn.then(Bn))}function On(e){f(e)?wn.push(...e):Ln&&Ln.includes(e,e.allowRecurse?Rn+1:Rn)||wn.push(e),Mn()}function Pn(e,t,n=(_n?kn+1:0)){for(0;n<Sn.length;n++){const t=Sn[n];if(t&&t.pre){if(e&&t.id!==e.uid)continue;0,Sn.splice(n,1),n--,t()}}}function Nn(e){if(wn.length){const e=[...new Set(wn)].sort(((e,t)=>Fn(e)-Fn(t)));if(wn.length=0,Ln)return void Ln.push(...e);for(Ln=e,Rn=0;Rn<Ln.length;Rn++)Ln[Rn]();Ln=null,Rn=0}}const Fn=e=>null==e.id?1/0:e.id,Un=(e,t)=>{const n=Fn(e)-Fn(t);if(0===n){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function Bn(e){An=!1,_n=!0,Sn.sort(Un);try{for(kn=0;kn<Sn.length;kn++){const e=Sn[kn];e&&!1!==e.active&&yn(e,null,14)}}finally{kn=0,Sn.length=0,Nn(),_n=!1,In=null,(Sn.length||wn.length)&&Bn(e)}}let $n,Hn=[],Vn=!1;function Wn(e,t,...n){if(e.isUnmounted)return;const i=e.vnode.props||s;let r=n;const a=t.startsWith("update:"),o=a&&t.slice(7);if(o&&o in i){const e=`${"modelValue"===o?"model":o}Modifiers`,{number:t,trim:a}=i[e]||s;a&&(r=n.map((e=>E(e)?e.trim():e))),t&&(r=n.map(H))}let l;let d=i[l=F(t)]||i[l=F(M(t))];!d&&a&&(d=i[l=F(P(t))]),d&&En(d,e,6,r);const c=i[l+"Once"];if(c){if(e.emitted){if(e.emitted[l])return}else e.emitted={};e.emitted[l]=!0,En(c,e,6,r)}}function Gn(e,t,n=!1){const i=t.emitsCache,r=i.get(e);if(void 0!==r)return r;const s=e.emits;let a={},o=!1;if(!y(e)){const i=e=>{const n=Gn(e,t,!0);n&&(o=!0,u(a,n))};!n&&t.mixins.length&&t.mixins.forEach(i),e.extends&&i(e.extends),e.mixins&&e.mixins.forEach(i)}return s||o?(f(s)?s.forEach((e=>a[e]=null)):u(a,s),_(e)&&i.set(e,a),a):(_(e)&&i.set(e,null),null)}function Kn(e,t){return!(!e||!d(t))&&(t=t.slice(2).replace(/Once$/,""),p(e,t[0].toLowerCase()+t.slice(1))||p(e,P(t))||p(e,t))}let qn=null,jn=null;function Yn(e){const t=qn;return qn=e,jn=e&&e.type.__scopeId||null,t}function zn(e){jn=e}function Xn(){jn=null}const Qn=e=>Zn;function Zn(e,t=qn,n){if(!t)return e;if(e._n)return e;const i=(...n)=>{i._d&&oa(-1);const r=Yn(t);let s;try{s=e(...n)}finally{Yn(r),i._d&&oa(1)}return s};return i._n=!0,i._c=!0,i._d=!0,i}function Jn(e){const{type:t,vnode:n,proxy:i,withProxy:r,propsOptions:[s],slots:a,attrs:o,emit:l,render:d,renderCache:u,props:h,data:m,setupState:p,ctx:f,inheritAttrs:g}=e,v=Yn(e);let b,y;try{if(4&n.shapeFlag){const e=r||i,t=e;b=Sa(d.call(t,e,u,h,p,m,f)),y=o}else{const e=t;0,b=Sa(e.length>1?e(h,{attrs:o,slots:a,emit:l}):e(h,null)),y=t.props?o:ti(o)}}catch(t){ta.length=0,Tn(t,e,1),b=va(Js)}let E=b;if(y&&!1!==g){const e=Object.keys(y),{shapeFlag:t}=E;e.length&&7&t&&(s&&e.some(c)&&(y=ni(y,s)),E=Ea(E,y))}return n.dirs&&(E=Ea(E),E.dirs=E.dirs?E.dirs.concat(n.dirs):n.dirs),n.transition&&(E.transition=n.transition),b=E,Yn(v),b}function ei(e,t=!0){let n;for(let t=0;t<e.length;t++){const i=e[t];if(!ua(i))return;if(i.type!==Js||"v-if"===i.children){if(n)return;n=i}}return n}const ti=e=>{let t;for(const n in e)("class"===n||"style"===n||d(n))&&((t||(t={}))[n]=e[n]);return t},ni=(e,t)=>{const n={};for(const i in e)c(i)&&i.slice(9)in t||(n[i]=e[i]);return n};function ii(e,t,n){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let r=0;r<i.length;r++){const s=i[r];if(t[s]!==e[s]&&!Kn(n,s))return!0}return!1}function ri({vnode:e,parent:t},n){for(;t;){const i=t.subTree;if(i.suspense&&i.suspense.activeBranch===e&&(i.el=e.el),i!==e)break;(e=t.vnode).el=n,t=t.parent}}const si="components",ai="directives";function oi(e,t){return ui(si,e,!0,t)||e}const li=Symbol.for("v-ndc");function di(e){return E(e)?ui(si,e,!1)||e:e||li}function ci(e){return ui(ai,e)}function ui(e,t,n=!0,i=!1){const r=qn||Da;if(r){const n=r.type;if(e===si){const e=Za(n,!1);if(e&&(e===t||e===M(t)||e===N(M(t))))return n}const s=hi(r[e]||n[e],t)||hi(r.appContext[e],t);return!s&&i?n:s}}function hi(e,t){return e&&(e[t]||e[M(t)]||e[N(M(t))])}const mi=e=>e.__isSuspense;let pi=0;const fi={name:"Suspense",__isSuspense:!0,process(e,t,n,i,r,s,a,o,l,d){if(null==e)!function(e,t,n,i,r,s,a,o,l){const{p:d,o:{createElement:c}}=l,u=c("div"),h=e.suspense=vi(e,r,i,t,u,n,s,a,o,l);d(null,h.pendingBranch=e.ssContent,u,null,i,h,s,a),h.deps>0?(gi(e,"onPending"),gi(e,"onFallback"),d(null,e.ssFallback,t,n,i,null,s,a),Ei(h,e.ssFallback)):h.resolve(!1,!0)}(t,n,i,r,s,a,o,l,d);else{if(s&&s.deps>0&&!e.suspense.isInFallback)return t.suspense=e.suspense,t.suspense.vnode=t,void(t.el=e.el);!function(e,t,n,i,r,s,a,o,{p:l,um:d,o:{createElement:c}}){const u=t.suspense=e.suspense;u.vnode=t,t.el=e.el;const h=t.ssContent,m=t.ssFallback,{activeBranch:p,pendingBranch:f,isInFallback:g,isHydrating:v}=u;if(f)u.pendingBranch=h,ha(h,f)?(l(f,h,u.hiddenContainer,null,r,u,s,a,o),u.deps<=0?u.resolve():g&&(v||(l(p,m,n,i,r,null,s,a,o),Ei(u,m)))):(u.pendingId=pi++,v?(u.isHydrating=!1,u.activeBranch=f):d(f,r,u),u.deps=0,u.effects.length=0,u.hiddenContainer=c("div"),g?(l(null,h,u.hiddenContainer,null,r,u,s,a,o),u.deps<=0?u.resolve():(l(p,m,n,i,r,null,s,a,o),Ei(u,m))):p&&ha(h,p)?(l(p,h,n,i,r,u,s,a,o),u.resolve(!0)):(l(null,h,u.hiddenContainer,null,r,u,s,a,o),u.deps<=0&&u.resolve()));else if(p&&ha(h,p))l(p,h,n,i,r,u,s,a,o),Ei(u,h);else if(gi(t,"onPending"),u.pendingBranch=h,512&h.shapeFlag?u.pendingId=h.component.suspenseId:u.pendingId=pi++,l(null,h,u.hiddenContainer,null,r,u,s,a,o),u.deps<=0)u.resolve();else{const{timeout:e,pendingId:t}=u;e>0?setTimeout((()=>{u.pendingId===t&&u.fallback(m)}),e):0===e&&u.fallback(m)}}(e,t,n,i,r,a,o,l,d)}},hydrate:function(e,t,n,i,r,s,a,o,l){const d=t.suspense=vi(t,i,n,e.parentNode,document.createElement("div"),null,r,s,a,o,!0),c=l(e,d.pendingBranch=t.ssContent,n,d,s,a);0===d.deps&&d.resolve(!1,!0);return c},create:vi,normalize:function(e){const{shapeFlag:t,children:n}=e,i=32&t;e.ssContent=bi(i?n.default:n),e.ssFallback=i?bi(n.fallback):va(Js)}};function gi(e,t){const n=e.props&&e.props[t];y(n)&&n()}function vi(e,t,n,i,r,s,a,o,l,d,c=!1){const{p:u,m:h,um:m,n:p,o:{parentNode:f,remove:g}}=d;let v;const b=function(e){var t;return null!=(null==(t=e.props)?void 0:t.suspensible)&&!1!==e.props.suspensible}(e);b&&(null==t?void 0:t.pendingBranch)&&(v=t.pendingId,t.deps++);const y=e.props?V(e.props.timeout):void 0;const E=s,T={vnode:e,parent:t,parentComponent:n,namespace:a,container:i,hiddenContainer:r,deps:0,pendingId:pi++,timeout:"number"==typeof y?y:-1,activeBranch:null,pendingBranch:null,isInFallback:!c,isHydrating:c,isUnmounted:!1,effects:[],resolve(e=!1,n=!1){const{vnode:i,activeBranch:r,pendingBranch:a,pendingId:o,effects:l,parentComponent:d,container:c}=T;let u=!1;T.isHydrating?T.isHydrating=!1:e||(u=r&&a.transition&&"out-in"===a.transition.mode,u&&(r.transition.afterLeave=()=>{o===T.pendingId&&(h(a,c,s===E?p(r):s,0),On(l))}),r&&(f(r.el)!==T.hiddenContainer&&(s=p(r)),m(r,d,T,!0)),u||h(a,c,s,0)),Ei(T,a),T.pendingBranch=null,T.isInFallback=!1;let g=T.parent,y=!1;for(;g;){if(g.pendingBranch){g.effects.push(...l),y=!0;break}g=g.parent}y||u||On(l),T.effects=[],b&&t&&t.pendingBranch&&v===t.pendingId&&(t.deps--,0!==t.deps||n||t.resolve()),gi(i,"onResolve")},fallback(e){if(!T.pendingBranch)return;const{vnode:t,activeBranch:n,parentComponent:i,container:r,namespace:s}=T;gi(t,"onFallback");const a=p(n),d=()=>{T.isInFallback&&(u(null,e,r,a,i,null,s,o,l),Ei(T,e))},c=e.transition&&"out-in"===e.transition.mode;c&&(n.transition.afterLeave=d),T.isInFallback=!0,m(n,i,null,!0),c||d()},move(e,t,n){T.activeBranch&&h(T.activeBranch,e,t,n),T.container=e},next:()=>T.activeBranch&&p(T.activeBranch),registerDep(e,t){const n=!!T.pendingBranch;n&&T.deps++;const i=e.vnode.el;e.asyncDep.catch((t=>{Tn(t,e,0)})).then((r=>{if(e.isUnmounted||T.isUnmounted||T.pendingId!==e.suspenseId)return;e.asyncResolved=!0;const{vnode:s}=e;Wa(e,r,!1),i&&(s.el=i);const o=!i&&e.subTree.el;t(e,s,f(i||e.subTree.el),i?null:p(e.subTree),T,a,l),o&&g(o),ri(e,s.el),n&&0==--T.deps&&T.resolve()}))},unmount(e,t){T.isUnmounted=!0,T.activeBranch&&m(T.activeBranch,n,e,t),T.pendingBranch&&m(T.pendingBranch,n,e,t)}};return T}function bi(e){let t;if(y(e)){const n=aa&&e._c;n&&(e._d=!1,ia()),e=e(),n&&(e._d=!0,t=na,ra())}if(f(e)){const t=ei(e);0,e=t}return e=Sa(e),t&&!e.dynamicChildren&&(e.dynamicChildren=t.filter((t=>t!==e))),e}function yi(e,t){t&&t.pendingBranch?f(e)?t.effects.push(...e):t.effects.push(e):On(e)}function Ei(e,t){e.activeBranch=t;const{vnode:n,parentComponent:i}=e;let r=t.el;for(;!r&&t.component;)r=(t=t.component.subTree).el;n.el=r,i&&i.subTree===n&&(i.vnode.el=r,ri(i,r))}const Ti=Symbol.for("v-scx"),_i=()=>{{const e=os(Ti);return e}};function Ai(e,t){return Ri(e,null,t)}function Si(e,t){return Ri(e,null,{flush:"post"})}function ki(e,t){return Ri(e,null,{flush:"sync"})}const wi={};function Li(e,t,n){return Ri(e,t,n)}function Ri(e,t,{immediate:n,deep:i,flush:r,once:a,onTrack:l,onTrigger:d}=s){if(t&&a){const e=t;t=(...t)=>{e(...t),w()}}const c=Da,u=e=>!0===i?e:xi(e,!1===i?1:void 0);let m,p,g=!1,v=!1;if(qt(e)?(m=()=>e.value,g=Nt(e)):Ot(e)?(m=()=>u(e),g=!0):f(e)?(v=!0,g=e.some((e=>Ot(e)||Nt(e))),m=()=>e.map((e=>qt(e)?e.value:Ot(e)?u(e):y(e)?yn(e,c,2):void 0))):m=y(e)?t?()=>yn(e,c,2):()=>(p&&p(),En(e,c,3,[E])):o,t&&i){const e=m;m=()=>xi(e())}let b,E=e=>{p=S.onStop=()=>{yn(e,c,4),p=S.onStop=void 0}};if(Ha){if(E=o,t?n&&En(t,c,3,[m(),v?[]:void 0,E]):m(),"sync"!==r)return o;{const e=_i();b=e.__watcherHandles||(e.__watcherHandles=[])}}let T=v?new Array(e.length).fill(wi):wi;const _=()=>{if(S.active&&S.dirty)if(t){const e=S.run();(i||g||(v?e.some(((e,t)=>U(e,T[t]))):U(e,T)))&&(p&&p(),En(t,c,3,[e,T===wi?void 0:v&&T[0]===wi?[]:T,E]),T=e)}else S.run()};let A;_.allowRecurse=!!t,"sync"===r?A=_:"post"===r?A=()=>Os(_,c&&c.suspense):(_.pre=!0,c&&(_.id=c.uid),A=()=>Dn(_));const S=new _e(m,o,A),k=Ee(),w=()=>{S.stop(),k&&h(k.effects,S)};return t?n?_():T=S.run():"post"===r?Os(S.run.bind(S),c&&c.suspense):S.run(),b&&b.push(w),w}function Ci(e,t,n){const i=this.proxy,r=E(e)?e.includes(".")?Ii(i,e):()=>i[e]:e.bind(i,i);let s;y(t)?s=t:(s=t.handler,n=t);const a=Na(this),o=Ri(r,s.bind(i),n);return a(),o}function Ii(e,t){const n=t.split(".");return()=>{let t=e;for(let e=0;e<n.length&&t;e++)t=t[n[e]];return t}}function xi(e,t,n=0,i){if(!_(e)||e.__v_skip)return e;if(t&&t>0){if(n>=t)return e;n++}if((i=i||new Set).has(e))return e;if(i.add(e),qt(e))xi(e.value,t,n,i);else if(f(e))for(let r=0;r<e.length;r++)xi(e[r],t,n,i);else if(v(e)||g(e))e.forEach((e=>{xi(e,t,n,i)}));else if(L(e))for(const r in e)xi(e[r],t,n,i);return e}function Di(e,t){if(null===qn)return e;const n=za(qn)||qn.proxy,i=e.dirs||(e.dirs=[]);for(let e=0;e<t.length;e++){let[r,a,o,l=s]=t[e];r&&(y(r)&&(r={mounted:r,updated:r}),r.deep&&xi(a),i.push({dir:r,instance:n,value:a,oldValue:void 0,arg:o,modifiers:l}))}return e}function Mi(e,t,n,i){const r=e.dirs,s=t&&t.dirs;for(let a=0;a<r.length;a++){const o=r[a];s&&(o.oldValue=s[a].value);let l=o.dir[i];l&&(De(),En(l,n,8,[e.el,o,e,t]),Me())}}const Oi=Symbol("_leaveCb"),Pi=Symbol("_enterCb");function Ni(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return cr((()=>{e.isMounted=!0})),mr((()=>{e.isUnmounting=!0})),e}const Fi=[Function,Array],Ui={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Fi,onEnter:Fi,onAfterEnter:Fi,onEnterCancelled:Fi,onBeforeLeave:Fi,onLeave:Fi,onAfterLeave:Fi,onLeaveCancelled:Fi,onBeforeAppear:Fi,onAppear:Fi,onAfterAppear:Fi,onAppearCancelled:Fi},Bi={name:"BaseTransition",props:Ui,setup(e,{slots:t}){const n=Ma(),i=Ni();return()=>{const r=t.default&&qi(t.default(),!0);if(!r||!r.length)return;let s=r[0];if(r.length>1){let e=!1;for(const t of r)if(t.type!==Js){0,s=t,e=!0;break}}const a=Ut(e),{mode:o}=a;if(i.isLeaving)return Wi(s);const l=Gi(s);if(!l)return Wi(s);const d=Vi(l,a,i,n);Ki(l,d);const c=n.subTree,u=c&&Gi(c);if(u&&u.type!==Js&&!ha(l,u)){const e=Vi(u,a,i,n);if(Ki(u,e),"out-in"===o)return i.isLeaving=!0,e.afterLeave=()=>{i.isLeaving=!1,!1!==n.update.active&&(n.effect.dirty=!0,n.update())},Wi(s);"in-out"===o&&l.type!==Js&&(e.delayLeave=(e,t,n)=>{Hi(i,u)[String(u.key)]=u,e[Oi]=()=>{t(),e[Oi]=void 0,delete d.delayedLeave},d.delayedLeave=n})}return s}}},$i=Bi;function Hi(e,t){const{leavingVNodes:n}=e;let i=n.get(t.type);return i||(i=Object.create(null),n.set(t.type,i)),i}function Vi(e,t,n,i){const{appear:r,mode:s,persisted:a=!1,onBeforeEnter:o,onEnter:l,onAfterEnter:d,onEnterCancelled:c,onBeforeLeave:u,onLeave:h,onAfterLeave:m,onLeaveCancelled:p,onBeforeAppear:g,onAppear:v,onAfterAppear:b,onAppearCancelled:y}=t,E=String(e.key),T=Hi(n,e),_=(e,t)=>{e&&En(e,i,9,t)},A=(e,t)=>{const n=t[1];_(e,t),f(e)?e.every((e=>e.length<=1))&&n():e.length<=1&&n()},S={mode:s,persisted:a,beforeEnter(t){let i=o;if(!n.isMounted){if(!r)return;i=g||o}t[Oi]&&t[Oi](!0);const s=T[E];s&&ha(e,s)&&s.el[Oi]&&s.el[Oi](),_(i,[t])},enter(e){let t=l,i=d,s=c;if(!n.isMounted){if(!r)return;t=v||l,i=b||d,s=y||c}let a=!1;const o=e[Pi]=t=>{a||(a=!0,_(t?s:i,[e]),S.delayedLeave&&S.delayedLeave(),e[Pi]=void 0)};t?A(t,[e,o]):o()},leave(t,i){const r=String(e.key);if(t[Pi]&&t[Pi](!0),n.isUnmounting)return i();_(u,[t]);let s=!1;const a=t[Oi]=n=>{s||(s=!0,i(),_(n?p:m,[t]),t[Oi]=void 0,T[r]===e&&delete T[r])};T[r]=e,h?A(h,[t,a]):a()},clone:e=>Vi(e,t,n,i)};return S}function Wi(e){if(Qi(e))return(e=Ea(e)).children=null,e}function Gi(e){if(!Qi(e))return e;const{shapeFlag:t,children:n}=e;if(n){if(16&t)return n[0];if(32&t&&y(n.default))return n.default()}}function Ki(e,t){6&e.shapeFlag&&e.component?Ki(e.component.subTree,t):128&e.shapeFlag?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function qi(e,t=!1,n){let i=[],r=0;for(let s=0;s<e.length;s++){let a=e[s];const o=null==n?a.key:String(n)+String(null!=a.key?a.key:s);a.type===Qs?(128&a.patchFlag&&r++,i=i.concat(qi(a.children,t,o))):(t||a.type!==Js)&&i.push(null!=o?Ea(a,{key:o}):a)}if(r>1)for(let e=0;e<i.length;e++)i[e].patchFlag=-2;return i}function ji(e,t){return y(e)?(()=>u({name:e.name},t,{setup:e}))():e}const Yi=e=>!!e.type.__asyncLoader;function zi(e){y(e)&&(e={loader:e});const{loader:t,loadingComponent:n,errorComponent:i,delay:r=200,timeout:s,suspensible:a=!0,onError:o}=e;let l,d=null,c=0;const u=()=>{let e;return d||(e=d=t().catch((e=>{if(e=e instanceof Error?e:new Error(String(e)),o)return new Promise(((t,n)=>{o(e,(()=>t((c++,d=null,u()))),(()=>n(e)),c+1)}));throw e})).then((t=>e!==d&&d?d:(t&&(t.__esModule||"Module"===t[Symbol.toStringTag])&&(t=t.default),l=t,t))))};return ji({name:"AsyncComponentWrapper",__asyncLoader:u,get __asyncResolved(){return l},setup(){const e=Da;if(l)return()=>Xi(l,e);const t=t=>{d=null,Tn(t,e,13,!i)};if(a&&e.suspense||Ha)return u().then((t=>()=>Xi(t,e))).catch((e=>(t(e),()=>i?va(i,{error:e}):null)));const o=jt(!1),c=jt(),h=jt(!!r);return r&&setTimeout((()=>{h.value=!1}),r),null!=s&&setTimeout((()=>{if(!o.value&&!c.value){const e=new Error(`Async component timed out after ${s}ms.`);t(e),c.value=e}}),s),u().then((()=>{o.value=!0,e.parent&&Qi(e.parent.vnode)&&(e.parent.effect.dirty=!0,Dn(e.parent.update))})).catch((e=>{t(e),c.value=e})),()=>o.value&&l?Xi(l,e):c.value&&i?va(i,{error:c.value}):n&&!h.value?va(n):void 0}})}function Xi(e,t){const{ref:n,props:i,children:r,ce:s}=t.vnode,a=va(e,i,r);return a.ref=n,a.ce=s,delete t.vnode.ce,a}const Qi=e=>e.type.__isKeepAlive,Zi={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:t}){const n=Ma(),i=n.ctx;if(!i.renderer)return()=>{const e=t.default&&t.default();return e&&1===e.length?e[0]:e};const r=new Map,s=new Set;let a=null;const o=n.suspense,{renderer:{p:l,m:d,um:c,o:{createElement:u}}}=i,h=u("div");function m(e){sr(e),c(e,n,o,!0)}function p(e){r.forEach(((t,n)=>{const i=Za(t.type);!i||e&&e(i)||f(n)}))}function f(e){const t=r.get(e);a&&ha(t,a)?a&&sr(a):m(t),r.delete(e),s.delete(e)}i.activate=(e,t,n,i,r)=>{const s=e.component;d(e,t,n,0,o),l(s.vnode,e,t,n,s,o,i,e.slotScopeIds,r),Os((()=>{s.isDeactivated=!1,s.a&&B(s.a);const t=e.props&&e.props.onVnodeMounted;t&&Ra(t,s.parent,e)}),o)},i.deactivate=e=>{const t=e.component;d(e,h,null,1,o),Os((()=>{t.da&&B(t.da);const n=e.props&&e.props.onVnodeUnmounted;n&&Ra(n,t.parent,e),t.isDeactivated=!0}),o)},Li((()=>[e.include,e.exclude]),(([e,t])=>{e&&p((t=>er(e,t))),t&&p((e=>!er(t,e)))}),{flush:"post",deep:!0});let g=null;const v=()=>{null!=g&&r.set(g,ar(n.subTree))};return cr(v),hr(v),mr((()=>{r.forEach((e=>{const{subTree:t,suspense:i}=n,r=ar(t);if(e.type!==r.type||e.key!==r.key)m(e);else{sr(r);const e=r.component.da;e&&Os(e,i)}}))})),()=>{if(g=null,!t.default)return a=null;const n=t.default(),i=n[0];if(n.length>1)return a=null,n;if(!(ua(i)&&(4&i.shapeFlag||128&i.shapeFlag)))return a=null,i;let o=ar(i);const l=o.type,d=Za(Yi(o)?o.type.__asyncResolved||{}:l),{include:c,exclude:u,max:h}=e;if(c&&(!d||!er(c,d))||u&&d&&er(u,d))return a=o,i;const m=null==o.key?l:o.key,p=r.get(m);return o.el&&(o=Ea(o),128&i.shapeFlag&&(i.ssContent=o)),g=m,p?(o.el=p.el,o.component=p.component,o.transition&&Ki(o,o.transition),o.shapeFlag|=512,s.delete(m),s.add(m)):(s.add(m),h&&s.size>parseInt(h,10)&&f(s.values().next().value)),o.shapeFlag|=256,a=o,mi(i.type)?i:o}}},Ji=Zi;function er(e,t){return f(e)?e.some((e=>er(e,t))):E(e)?e.split(",").includes(t):"[object RegExp]"===k(e)&&e.test(t)}function tr(e,t){ir(e,"a",t)}function nr(e,t){ir(e,"da",t)}function ir(e,t,n=Da){const i=e.__wdc||(e.__wdc=()=>{let t=n;for(;t;){if(t.isDeactivated)return;t=t.parent}return e()});if(or(t,i,n),n){let e=n.parent;for(;e&&e.parent;)Qi(e.parent.vnode)&&rr(i,t,n,e),e=e.parent}}function rr(e,t,n,i){const r=or(t,e,i,!0);pr((()=>{h(i[t],r)}),n)}function sr(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function ar(e){return 128&e.shapeFlag?e.ssContent:e}function or(e,t,n=Da,i=!1){if(n){const r=n[e]||(n[e]=[]),s=t.__weh||(t.__weh=(...i)=>{if(n.isUnmounted)return;De();const r=Na(n),s=En(t,n,e,i);return r(),Me(),s});return i?r.unshift(s):r.push(s),s}}const lr=e=>(t,n=Da)=>(!Ha||"sp"===e)&&or(e,((...e)=>t(...e)),n),dr=lr("bm"),cr=lr("m"),ur=lr("bu"),hr=lr("u"),mr=lr("bum"),pr=lr("um"),fr=lr("sp"),gr=lr("rtg"),vr=lr("rtc");function br(e,t=Da){or("ec",e,t)}function yr(e,t,n,i){let r;const s=n&&n[i];if(f(e)||E(e)){r=new Array(e.length);for(let n=0,i=e.length;n<i;n++)r[n]=t(e[n],n,void 0,s&&s[n])}else if("number"==typeof e){0,r=new Array(e);for(let n=0;n<e;n++)r[n]=t(n+1,n,void 0,s&&s[n])}else if(_(e))if(e[Symbol.iterator])r=Array.from(e,((e,n)=>t(e,n,void 0,s&&s[n])));else{const n=Object.keys(e);r=new Array(n.length);for(let i=0,a=n.length;i<a;i++){const a=n[i];r[i]=t(e[a],a,i,s&&s[i])}}else r=[];return n&&(n[i]=r),r}function Er(e,t){for(let n=0;n<t.length;n++){const i=t[n];if(f(i))for(let t=0;t<i.length;t++)e[i[t].name]=i[t].fn;else i&&(e[i.name]=i.key?(...e)=>{const t=i.fn(...e);return t&&(t.key=i.key),t}:i.fn)}return e}function Tr(e,t,n={},i,r){if(qn.isCE||qn.parent&&Yi(qn.parent)&&qn.parent.isCE)return"default"!==t&&(n.name=t),va("slot",n,i&&i());let s=e[t];s&&s._c&&(s._d=!1),ia();const a=s&&_r(s(n)),o=ca(Qs,{key:n.key||a&&a.key||`_${t}`},a||(i?i():[]),a&&1===e._?64:-2);return!r&&o.scopeId&&(o.slotScopeIds=[o.scopeId+"-s"]),s&&s._c&&(s._d=!0),o}function _r(e){return e.some((e=>!ua(e)||e.type!==Js&&!(e.type===Qs&&!_r(e.children))))?e:null}function Ar(e,t){const n={};for(const i in e)n[t&&/[A-Z]/.test(i)?`on:${i}`:F(i)]=e[i];return n}const Sr=e=>e?Ua(e)?za(e)||e.proxy:Sr(e.parent):null,kr=u(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Sr(e.parent),$root:e=>Sr(e.root),$emit:e=>e.emit,$options:e=>Yr(e),$forceUpdate:e=>e.f||(e.f=()=>{e.effect.dirty=!0,Dn(e.update)}),$nextTick:e=>e.n||(e.n=xn.bind(e.proxy)),$watch:e=>Ci.bind(e)}),wr=(e,t)=>e!==s&&!e.__isScriptSetup&&p(e,t),Lr={get({_:e},t){if("__v_skip"===t)return!0;const{ctx:n,setupState:i,data:r,props:a,accessCache:o,type:l,appContext:d}=e;let c;if("$"!==t[0]){const l=o[t];if(void 0!==l)switch(l){case 1:return i[t];case 2:return r[t];case 4:return n[t];case 3:return a[t]}else{if(wr(i,t))return o[t]=1,i[t];if(r!==s&&p(r,t))return o[t]=2,r[t];if((c=e.propsOptions[0])&&p(c,t))return o[t]=3,a[t];if(n!==s&&p(n,t))return o[t]=4,n[t];Gr&&(o[t]=0)}}const u=kr[t];let h,m;return u?("$attrs"===t&&We(e.attrs,0,""),u(e)):(h=l.__cssModules)&&(h=h[t])?h:n!==s&&p(n,t)?(o[t]=4,n[t]):(m=d.config.globalProperties,p(m,t)?m[t]:void 0)},set({_:e},t,n){const{data:i,setupState:r,ctx:a}=e;return wr(r,t)?(r[t]=n,!0):i!==s&&p(i,t)?(i[t]=n,!0):!p(e.props,t)&&(("$"!==t[0]||!(t.slice(1)in e))&&(a[t]=n,!0))},has({_:{data:e,setupState:t,accessCache:n,ctx:i,appContext:r,propsOptions:a}},o){let l;return!!n[o]||e!==s&&p(e,o)||wr(t,o)||(l=a[0])&&p(l,o)||p(i,o)||p(kr,o)||p(r.config.globalProperties,o)},defineProperty(e,t,n){return null!=n.get?e._.accessCache[t]=0:p(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};const Rr=u({},Lr,{get(e,t){if(t!==Symbol.unscopables)return Lr.get(e,t,e)},has:(e,t)=>"_"!==t[0]&&!q(t)});function Cr(){return null}function Ir(){return null}function xr(e){0}function Dr(e){0}function Mr(){return null}function Or(){0}function Pr(e,t){return null}function Nr(){return Ur().slots}function Fr(){return Ur().attrs}function Ur(){const e=Ma();return e.setupContext||(e.setupContext=Ya(e))}function Br(e){return f(e)?e.reduce(((e,t)=>(e[t]=null,e)),{}):e}function $r(e,t){const n=Br(e);for(const e in t){if(e.startsWith("__skip"))continue;let i=n[e];i?f(i)||y(i)?i=n[e]={type:i,default:t[e]}:i.default=t[e]:null===i&&(i=n[e]={default:t[e]}),i&&t[`__skip_${e}`]&&(i.skipFactory=!0)}return n}function Hr(e,t){return e&&t?f(e)&&f(t)?e.concat(t):u({},Br(e),Br(t)):e||t}function Vr(e,t){const n={};for(const i in e)t.includes(i)||Object.defineProperty(n,i,{enumerable:!0,get:()=>e[i]});return n}function Wr(e){const t=Ma();let n=e();return Fa(),A(n)&&(n=n.catch((e=>{throw Na(t),e}))),[n,()=>Na(t)]}let Gr=!0;function Kr(e){const t=Yr(e),n=e.proxy,i=e.ctx;Gr=!1,t.beforeCreate&&qr(t.beforeCreate,e,"bc");const{data:r,computed:s,methods:a,watch:l,provide:d,inject:c,created:u,beforeMount:h,mounted:m,beforeUpdate:p,updated:g,activated:v,deactivated:b,beforeDestroy:E,beforeUnmount:T,destroyed:A,unmounted:S,render:k,renderTracked:w,renderTriggered:L,errorCaptured:R,serverPrefetch:C,expose:I,inheritAttrs:x,components:D,directives:M,filters:O}=t;if(c&&function(e,t,n=o){f(e)&&(e=Zr(e));for(const n in e){const i=e[n];let r;r=_(i)?"default"in i?os(i.from||n,i.default,!0):os(i.from||n):os(i),qt(r)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>r.value,set:e=>r.value=e}):t[n]=r}}(c,i,null),a)for(const e in a){const t=a[e];y(t)&&(i[e]=t.bind(n))}if(r){0;const t=r.call(n,n);0,_(t)&&(e.data=Ct(t))}if(Gr=!0,s)for(const e in s){const t=s[e],r=y(t)?t.bind(n,n):y(t.get)?t.get.bind(n,n):o;0;const a=!y(t)&&y(t.set)?t.set.bind(n):o,l=to({get:r,set:a});Object.defineProperty(i,e,{enumerable:!0,configurable:!0,get:()=>l.value,set:e=>l.value=e})}if(l)for(const e in l)jr(l[e],i,n,e);if(d){const e=y(d)?d.call(n):d;Reflect.ownKeys(e).forEach((t=>{as(t,e[t])}))}function P(e,t){f(t)?t.forEach((t=>e(t.bind(n)))):t&&e(t.bind(n))}if(u&&qr(u,e,"c"),P(dr,h),P(cr,m),P(ur,p),P(hr,g),P(tr,v),P(nr,b),P(br,R),P(vr,w),P(gr,L),P(mr,T),P(pr,S),P(fr,C),f(I))if(I.length){const t=e.exposed||(e.exposed={});I.forEach((e=>{Object.defineProperty(t,e,{get:()=>n[e],set:t=>n[e]=t})}))}else e.exposed||(e.exposed={});k&&e.render===o&&(e.render=k),null!=x&&(e.inheritAttrs=x),D&&(e.components=D),M&&(e.directives=M)}function qr(e,t,n){En(f(e)?e.map((e=>e.bind(t.proxy))):e.bind(t.proxy),t,n)}function jr(e,t,n,i){const r=i.includes(".")?Ii(n,i):()=>n[i];if(E(e)){const n=t[e];y(n)&&Li(r,n)}else if(y(e))Li(r,e.bind(n));else if(_(e))if(f(e))e.forEach((e=>jr(e,t,n,i)));else{const i=y(e.handler)?e.handler.bind(n):t[e.handler];y(i)&&Li(r,i,e)}else 0}function Yr(e){const t=e.type,{mixins:n,extends:i}=t,{mixins:r,optionsCache:s,config:{optionMergeStrategies:a}}=e.appContext,o=s.get(t);let l;return o?l=o:r.length||n||i?(l={},r.length&&r.forEach((e=>zr(l,e,a,!0))),zr(l,t,a)):l=t,_(t)&&s.set(t,l),l}function zr(e,t,n,i=!1){const{mixins:r,extends:s}=t;s&&zr(e,s,n,!0),r&&r.forEach((t=>zr(e,t,n,!0)));for(const r in t)if(i&&"expose"===r);else{const i=Xr[r]||n&&n[r];e[r]=i?i(e[r],t[r]):t[r]}return e}const Xr={data:Qr,props:ts,emits:ts,methods:es,computed:es,beforeCreate:Jr,created:Jr,beforeMount:Jr,mounted:Jr,beforeUpdate:Jr,updated:Jr,beforeDestroy:Jr,beforeUnmount:Jr,destroyed:Jr,unmounted:Jr,activated:Jr,deactivated:Jr,errorCaptured:Jr,serverPrefetch:Jr,components:es,directives:es,watch:function(e,t){if(!e)return t;if(!t)return e;const n=u(Object.create(null),e);for(const i in t)n[i]=Jr(e[i],t[i]);return n},provide:Qr,inject:function(e,t){return es(Zr(e),Zr(t))}};function Qr(e,t){return t?e?function(){return u(y(e)?e.call(this,this):e,y(t)?t.call(this,this):t)}:t:e}function Zr(e){if(f(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Jr(e,t){return e?[...new Set([].concat(e,t))]:t}function es(e,t){return e?u(Object.create(null),e,t):t}function ts(e,t){return e?f(e)&&f(t)?[...new Set([...e,...t])]:u(Object.create(null),Br(e),Br(null!=t?t:{})):t}function ns(){return{app:null,config:{isNativeTag:l,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let is=0;function rs(e,t){return function(n,i=null){y(n)||(n=u({},n)),null==i||_(i)||(i=null);const r=ns(),s=new WeakSet;let a=!1;const o=r.app={_uid:is++,_component:n,_props:i,_container:null,_context:r,_instance:null,version:oo,get config(){return r.config},set config(e){0},use:(e,...t)=>(s.has(e)||(e&&y(e.install)?(s.add(e),e.install(o,...t)):y(e)&&(s.add(e),e(o,...t))),o),mixin:e=>(r.mixins.includes(e)||r.mixins.push(e),o),component:(e,t)=>t?(r.components[e]=t,o):r.components[e],directive:(e,t)=>t?(r.directives[e]=t,o):r.directives[e],mount(s,l,d){if(!a){0;const c=va(n,i);return c.appContext=r,!0===d?d="svg":!1===d&&(d=void 0),l&&t?t(c,s):e(c,s,d),a=!0,o._container=s,s.__vue_app__=o,za(c.component)||c.component.proxy}},unmount(){a&&(e(null,o._container),delete o._container.__vue_app__)},provide:(e,t)=>(r.provides[e]=t,o),runWithContext(e){const t=ss;ss=o;try{return e()}finally{ss=t}}};return o}}let ss=null;function as(e,t){if(Da){let n=Da.provides;const i=Da.parent&&Da.parent.provides;i===n&&(n=Da.provides=Object.create(i)),n[e]=t}else 0}function os(e,t,n=!1){const i=Da||qn;if(i||ss){const r=i?null==i.parent?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:ss._context.provides;if(r&&e in r)return r[e];if(arguments.length>1)return n&&y(t)?t.call(i&&i.proxy):t}else 0}function ls(){return!!(Da||qn||ss)}const ds={},cs=()=>Object.create(ds),us=e=>Object.getPrototypeOf(e)===ds;function hs(e,t,n,i){const[r,a]=e.propsOptions;let o,l=!1;if(t)for(let s in t){if(C(s))continue;const d=t[s];let c;r&&p(r,c=M(s))?a&&a.includes(c)?(o||(o={}))[c]=d:n[c]=d:Kn(e.emitsOptions,s)||s in i&&d===i[s]||(i[s]=d,l=!0)}if(a){const t=Ut(n),i=o||s;for(let s=0;s<a.length;s++){const o=a[s];n[o]=ms(r,t,o,i[o],e,!p(i,o))}}return l}function ms(e,t,n,i,r,s){const a=e[n];if(null!=a){const e=p(a,"default");if(e&&void 0===i){const e=a.default;if(a.type!==Function&&!a.skipFactory&&y(e)){const{propsDefaults:s}=r;if(n in s)i=s[n];else{const a=Na(r);i=s[n]=e.call(null,t),a()}}else i=e}a[0]&&(s&&!e?i=!1:!a[1]||""!==i&&i!==P(n)||(i=!0))}return i}function ps(e,t,n=!1){const i=t.propsCache,r=i.get(e);if(r)return r;const o=e.props,l={},d=[];let c=!1;if(!y(e)){const i=e=>{c=!0;const[n,i]=ps(e,t,!0);u(l,n),i&&d.push(...i)};!n&&t.mixins.length&&t.mixins.forEach(i),e.extends&&i(e.extends),e.mixins&&e.mixins.forEach(i)}if(!o&&!c)return _(e)&&i.set(e,a),a;if(f(o))for(let e=0;e<o.length;e++){0;const t=M(o[e]);fs(t)&&(l[t]=s)}else if(o){0;for(const e in o){const t=M(e);if(fs(t)){const n=o[e],i=l[t]=f(n)||y(n)?{type:n}:u({},n);if(i){const e=bs(Boolean,i.type),n=bs(String,i.type);i[0]=e>-1,i[1]=n<0||e<n,(e>-1||p(i,"default"))&&d.push(t)}}}}const h=[l,d];return _(e)&&i.set(e,h),h}function fs(e){return"$"!==e[0]&&!C(e)}function gs(e){if(null===e)return"null";if("function"==typeof e)return e.name||"";if("object"==typeof e){return e.constructor&&e.constructor.name||""}return""}function vs(e,t){return gs(e)===gs(t)}function bs(e,t){return f(t)?t.findIndex((t=>vs(t,e))):y(t)&&vs(t,e)?0:-1}const ys=e=>"_"===e[0]||"$stable"===e,Es=e=>f(e)?e.map(Sa):[Sa(e)],Ts=(e,t,n)=>{if(t._n)return t;const i=Zn(((...e)=>Es(t(...e))),n);return i._c=!1,i},_s=(e,t,n)=>{const i=e._ctx;for(const n in e){if(ys(n))continue;const r=e[n];if(y(r))t[n]=Ts(0,r,i);else if(null!=r){0;const e=Es(r);t[n]=()=>e}}},As=(e,t)=>{const n=Es(t);e.slots.default=()=>n},Ss=(e,t)=>{const n=e.slots=cs();if(32&e.vnode.shapeFlag){const e=t._;e?(u(n,t),$(n,"_",e)):_s(t,n)}else t&&As(e,t)},ks=(e,t,n)=>{const{vnode:i,slots:r}=e;let a=!0,o=s;if(32&i.shapeFlag){const e=t._;e?n&&1===e?a=!1:(u(r,t),n||1!==e||delete r._):(a=!t.$stable,_s(t,r)),o=t}else t&&(As(e,t),o={default:1});if(a)for(const e in r)ys(e)||null!=o[e]||delete r[e]};function ws(e,t,n,i,r=!1){if(f(e))return void e.forEach(((e,s)=>ws(e,t&&(f(t)?t[s]:t),n,i,r)));if(Yi(i)&&!r)return;const a=4&i.shapeFlag?za(i.component)||i.component.proxy:i.el,o=r?null:a,{i:l,r:d}=e;const c=t&&t.r,u=l.refs===s?l.refs={}:l.refs,m=l.setupState;if(null!=c&&c!==d&&(E(c)?(u[c]=null,p(m,c)&&(m[c]=null)):qt(c)&&(c.value=null)),y(d))yn(d,l,12,[o,u]);else{const t=E(d),i=qt(d);if(t||i){const s=()=>{if(e.f){const n=t?p(m,d)?m[d]:u[d]:d.value;r?f(n)&&h(n,a):f(n)?n.includes(a)||n.push(a):t?(u[d]=[a],p(m,d)&&(m[d]=u[d])):(d.value=[a],e.k&&(u[e.k]=d.value))}else t?(u[d]=o,p(m,d)&&(m[d]=o)):i&&(d.value=o,e.k&&(u[e.k]=o))};o?(s.id=-1,Os(s,n)):s()}else 0}}let Ls=!1;const Rs=e=>(e=>e.namespaceURI.includes("svg")&&"foreignObject"!==e.tagName)(e)?"svg":(e=>e.namespaceURI.includes("MathML"))(e)?"mathml":void 0,Cs=e=>8===e.nodeType;function Is(e){const{mt:t,p:n,o:{patchProp:i,createText:r,nextSibling:s,parentNode:a,remove:o,insert:l,createComment:c}}=e,u=(n,i,o,d,c,y=!1)=>{y=y||!!i.dynamicChildren;const E=Cs(n)&&"["===n.data,T=()=>f(n,i,o,d,c,E),{type:_,ref:A,shapeFlag:S,patchFlag:k}=i;let w=n.nodeType;i.el=n,-2===k&&(y=!1,i.dynamicChildren=null);let L=null;switch(_){case Zs:3!==w?""===i.children?(l(i.el=r(""),a(n),n),L=n):L=T():(n.data!==i.children&&(Ls=!0,__VUE_PROD_HYDRATION_MISMATCH_DETAILS__&&mn("Hydration text mismatch in",n.parentNode,`\n  - rendered on server: ${JSON.stringify(n.data)}\n  - expected on client: ${JSON.stringify(i.children)}`),n.data=i.children),L=s(n));break;case Js:b(n)?(L=s(n),v(i.el=n.content.firstChild,n,o)):L=8!==w||E?T():s(n);break;case ea:if(E&&(w=(n=s(n)).nodeType),1===w||3===w){L=n;const e=!i.children.length;for(let t=0;t<i.staticCount;t++)e&&(i.children+=1===L.nodeType?L.outerHTML:L.data),t===i.staticCount-1&&(i.anchor=L),L=s(L);return E?s(L):L}T();break;case Qs:L=E?p(n,i,o,d,c,y):T();break;default:if(1&S)L=1===w&&i.type.toLowerCase()===n.tagName.toLowerCase()||b(n)?h(n,i,o,d,c,y):T();else if(6&S){i.slotScopeIds=c;const e=a(n);if(L=E?g(n):Cs(n)&&"teleport start"===n.data?g(n,n.data,"teleport end"):s(n),t(i,e,null,o,d,Rs(e),y),Yi(i)){let t;E?(t=va(Qs),t.anchor=L?L.previousSibling:e.lastChild):t=3===n.nodeType?Ta(""):va("div"),t.el=n,i.component.subTree=t}}else 64&S?L=8!==w?T():i.type.hydrate(n,i,o,d,c,y,e,m):128&S?L=i.type.hydrate(n,i,o,d,Rs(a(n)),c,y,e,u):__VUE_PROD_HYDRATION_MISMATCH_DETAILS__&&mn("Invalid HostVNode type:",_,`(${typeof _})`)}return null!=A&&ws(A,null,d,i),L},h=(e,t,n,r,s,a)=>{a=a||!!t.dynamicChildren;const{type:l,props:c,patchFlag:u,shapeFlag:h,dirs:p,transition:f}=t,g="input"===l||"option"===l;if(g||-1!==u){p&&Mi(t,null,n,"created");let l,y=!1;if(b(e)){y=$s(r,f)&&n&&n.vnode.props&&n.vnode.props.appear;const i=e.content.firstChild;y&&f.beforeEnter(i),v(i,e,n),t.el=e=i}if(16&h&&(!c||!c.innerHTML&&!c.textContent)){let i=m(e.firstChild,t,e,n,r,s,a),l=!1;for(;i;){Ls=!0,__VUE_PROD_HYDRATION_MISMATCH_DETAILS__&&!l&&(mn("Hydration children mismatch on",e,"\nServer rendered element contains more child nodes than client vdom."),l=!0);const t=i;i=i.nextSibling,o(t)}}else 8&h&&e.textContent!==t.children&&(Ls=!0,__VUE_PROD_HYDRATION_MISMATCH_DETAILS__&&mn("Hydration text content mismatch on",e,`\n  - rendered on server: ${e.textContent}\n  - expected on client: ${t.children}`),e.textContent=t.children);if(c)if(__VUE_PROD_HYDRATION_MISMATCH_DETAILS__||g||!a||48&u)for(const r in c)__VUE_PROD_HYDRATION_MISMATCH_DETAILS__&&xs(e,r,c[r],t,n)&&(Ls=!0),(g&&(r.endsWith("value")||"indeterminate"===r)||d(r)&&!C(r)||"."===r[0])&&i(e,r,null,c[r],void 0,void 0,n);else c.onClick&&i(e,"onClick",null,c.onClick,void 0,void 0,n);(l=c&&c.onVnodeBeforeMount)&&Ra(l,n,t),p&&Mi(t,null,n,"beforeMount"),((l=c&&c.onVnodeMounted)||p||y)&&yi((()=>{l&&Ra(l,n,t),y&&f.enter(e),p&&Mi(t,null,n,"mounted")}),r)}return e.nextSibling},m=(e,t,i,r,s,a,o)=>{o=o||!!t.dynamicChildren;const l=t.children,d=l.length;let c=!1;for(let t=0;t<d;t++){const d=o?l[t]:l[t]=Sa(l[t]);if(e)e=u(e,d,r,s,a,o);else{if(d.type===Zs&&!d.children)continue;Ls=!0,__VUE_PROD_HYDRATION_MISMATCH_DETAILS__&&!c&&(mn("Hydration children mismatch on",i,"\nServer rendered element contains fewer child nodes than client vdom."),c=!0),n(null,d,i,null,r,s,Rs(i),a)}}return e},p=(e,t,n,i,r,o)=>{const{slotScopeIds:d}=t;d&&(r=r?r.concat(d):d);const u=a(e),h=m(s(e),t,u,n,i,r,o);return h&&Cs(h)&&"]"===h.data?s(t.anchor=h):(Ls=!0,l(t.anchor=c("]"),u,h),h)},f=(e,t,i,r,l,d)=>{if(Ls=!0,__VUE_PROD_HYDRATION_MISMATCH_DETAILS__&&mn("Hydration node mismatch:\n- rendered on server:",e,3===e.nodeType?"(text)":Cs(e)&&"["===e.data?"(start of fragment)":"","\n- expected on client:",t.type),t.el=null,d){const t=g(e);for(;;){const n=s(e);if(!n||n===t)break;o(n)}}const c=s(e),u=a(e);return o(e),n(null,t,u,c,i,r,Rs(u),l),c},g=(e,t="[",n="]")=>{let i=0;for(;e;)if((e=s(e))&&Cs(e)&&(e.data===t&&i++,e.data===n)){if(0===i)return s(e);i--}return e},v=(e,t,n)=>{const i=t.parentNode;i&&i.replaceChild(e,t);let r=n;for(;r;)r.vnode.el===t&&(r.vnode.el=r.subTree.el=e),r=r.parent},b=e=>1===e.nodeType&&"template"===e.tagName.toLowerCase();return[(e,t)=>{if(!t.hasChildNodes())return __VUE_PROD_HYDRATION_MISMATCH_DETAILS__&&mn("Attempting to hydrate existing markup but container is empty. Performing full mount instead."),n(null,e,t),Nn(),void(t._vnode=e);Ls=!1,u(t.firstChild,e,null,null,null),Nn(),t._vnode=e,Ls&&console.error("Hydration completed but contains mismatches.")},u]}function xs(e,t,n,i,r){var s;let a,o,l,d;if("class"===t)l=e.getAttribute("class"),d=Z(n),function(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}(Ds(l||""),Ds(d))||(a=o="class");else if("style"===t){l=e.getAttribute("style"),d=E(n)?n:function(e){let t="";if(!e||E(e))return t;for(const n in e){const i=e[n],r=n.startsWith("--")?n:P(n);(E(i)||"number"==typeof i)&&(t+=`${r}:${i};`)}return t}(j(n));const t=Ms(l),c=Ms(d);if(i.dirs)for(const{dir:e,value:t}of i.dirs)"show"!==e.name||t||c.set("display","none");const u=null==r?void 0:r.subTree;if(i===u||(null==u?void 0:u.type)===Qs&&u.children.includes(i)){const e=null==(s=null==r?void 0:r.getCssVars)?void 0:s.call(r);for(const t in e)c.set(`--${t}`,String(e[t]))}(function(e,t){if(e.size!==t.size)return!1;for(const[n,i]of e)if(i!==t.get(n))return!1;return!0})(t,c)||(a=o="style")}else(e instanceof SVGElement&&de(t)||e instanceof HTMLElement&&(ae(t)||le(t)))&&(ae(t)?(l=e.hasAttribute(t),d=oe(n)):null==n?(l=e.hasAttribute(t),d=!1):(l=e.hasAttribute(t)?e.getAttribute(t):"value"===t&&"TEXTAREA"===e.tagName&&e.value,d=!!function(e){if(null==e)return!1;const t=typeof e;return"string"===t||"number"===t||"boolean"===t}(n)&&String(n)),l!==d&&(a="attribute",o=t));if(a){const t=e=>!1===e?"(not rendered)":`${o}="${e}"`;return mn(`Hydration ${a} mismatch on`,e,`\n  - rendered on server: ${t(l)}\n  - expected on client: ${t(d)}\n  Note: this mismatch is check-only. The DOM will not be rectified in production due to performance overhead.\n  You should fix the source of the mismatch.`),!0}return!1}function Ds(e){return new Set(e.trim().split(/\s+/))}function Ms(e){const t=new Map;for(const n of e.split(";")){let[e,i]=n.split(":");e=null==e?void 0:e.trim(),i=null==i?void 0:i.trim(),e&&i&&t.set(e,i)}return t}const Os=yi;function Ps(e){return Fs(e)}function Ns(e){return Fs(e,Is)}function Fs(e,t){"boolean"!=typeof __VUE_PROD_HYDRATION_MISMATCH_DETAILS__&&(G().__VUE_PROD_HYDRATION_MISMATCH_DETAILS__=!1);G().__VUE__=!0;const{insert:n,remove:i,patchProp:r,createElement:l,createText:d,createComment:c,setText:u,setElementText:h,parentNode:m,nextSibling:f,setScopeId:g=o,insertStaticContent:v}=e,b=(e,t,n,i=null,r=null,s=null,a=void 0,o=null,l=!!t.dynamicChildren)=>{if(e===t)return;e&&!ha(e,t)&&(i=X(e),K(e,r,s,!0),e=null),-2===t.patchFlag&&(l=!1,t.dynamicChildren=null);const{type:d,ref:c,shapeFlag:u}=t;switch(d){case Zs:y(e,t,n,i);break;case Js:E(e,t,n,i);break;case ea:null==e&&T(t,n,i,a);break;case Qs:x(e,t,n,i,r,s,a,o,l);break;default:1&u?A(e,t,n,i,r,s,a,o,l):6&u?D(e,t,n,i,r,s,a,o,l):(64&u||128&u)&&d.process(e,t,n,i,r,s,a,o,l,J)}null!=c&&r&&ws(c,e&&e.ref,s,t||e,!t)},y=(e,t,i,r)=>{if(null==e)n(t.el=d(t.children),i,r);else{const n=t.el=e.el;t.children!==e.children&&u(n,t.children)}},E=(e,t,i,r)=>{null==e?n(t.el=c(t.children||""),i,r):t.el=e.el},T=(e,t,n,i)=>{[e.el,e.anchor]=v(e.children,t,n,i,e.el,e.anchor)},_=({el:e,anchor:t})=>{let n;for(;e&&e!==t;)n=f(e),i(e),e=n;i(t)},A=(e,t,n,i,r,s,a,o,l)=>{"svg"===t.type?a="svg":"math"===t.type&&(a="mathml"),null==e?S(t,n,i,r,s,a,o,l):L(e,t,r,s,a,o,l)},S=(e,t,i,s,a,o,d,c)=>{let u,m;const{props:p,shapeFlag:f,transition:g,dirs:v}=e;if(u=e.el=l(e.type,o,p&&p.is,p),8&f?h(u,e.children):16&f&&w(e.children,u,null,s,a,Us(e,o),d,c),v&&Mi(e,null,s,"created"),k(u,e,e.scopeId,d,s),p){for(const t in p)"value"===t||C(t)||r(u,t,null,p[t],o,e.children,s,a,z);"value"in p&&r(u,"value",null,p.value,o),(m=p.onVnodeBeforeMount)&&Ra(m,s,e)}v&&Mi(e,null,s,"beforeMount");const b=$s(a,g);b&&g.beforeEnter(u),n(u,t,i),((m=p&&p.onVnodeMounted)||b||v)&&Os((()=>{m&&Ra(m,s,e),b&&g.enter(u),v&&Mi(e,null,s,"mounted")}),a)},k=(e,t,n,i,r)=>{if(n&&g(e,n),i)for(let t=0;t<i.length;t++)g(e,i[t]);if(r){if(t===r.subTree){const t=r.vnode;k(e,t,t.scopeId,t.slotScopeIds,r.parent)}}},w=(e,t,n,i,r,s,a,o,l=0)=>{for(let d=l;d<e.length;d++){const l=e[d]=o?ka(e[d]):Sa(e[d]);b(null,l,t,n,i,r,s,a,o)}},L=(e,t,n,i,a,o,l)=>{const d=t.el=e.el;let{patchFlag:c,dynamicChildren:u,dirs:m}=t;c|=16&e.patchFlag;const p=e.props||s,f=t.props||s;let g;if(n&&Bs(n,!1),(g=f.onVnodeBeforeUpdate)&&Ra(g,n,t,e),m&&Mi(t,e,n,"beforeUpdate"),n&&Bs(n,!0),u?R(e.dynamicChildren,u,d,n,i,Us(t,a),o):l||$(e,t,d,null,n,i,Us(t,a),o,!1),c>0){if(16&c)I(d,t,p,f,n,i,a);else if(2&c&&p.class!==f.class&&r(d,"class",null,f.class,a),4&c&&r(d,"style",p.style,f.style,a),8&c){const s=t.dynamicProps;for(let t=0;t<s.length;t++){const o=s[t],l=p[o],c=f[o];c===l&&"value"!==o||r(d,o,l,c,a,e.children,n,i,z)}}1&c&&e.children!==t.children&&h(d,t.children)}else l||null!=u||I(d,t,p,f,n,i,a);((g=f.onVnodeUpdated)||m)&&Os((()=>{g&&Ra(g,n,t,e),m&&Mi(t,e,n,"updated")}),i)},R=(e,t,n,i,r,s,a)=>{for(let o=0;o<t.length;o++){const l=e[o],d=t[o],c=l.el&&(l.type===Qs||!ha(l,d)||70&l.shapeFlag)?m(l.el):n;b(l,d,c,null,i,r,s,a,!0)}},I=(e,t,n,i,a,o,l)=>{if(n!==i){if(n!==s)for(const s in n)C(s)||s in i||r(e,s,n[s],null,l,t.children,a,o,z);for(const s in i){if(C(s))continue;const d=i[s],c=n[s];d!==c&&"value"!==s&&r(e,s,c,d,l,t.children,a,o,z)}"value"in i&&r(e,"value",n.value,i.value,l)}},x=(e,t,i,r,s,a,o,l,c)=>{const u=t.el=e?e.el:d(""),h=t.anchor=e?e.anchor:d("");let{patchFlag:m,dynamicChildren:p,slotScopeIds:f}=t;f&&(l=l?l.concat(f):f),null==e?(n(u,i,r),n(h,i,r),w(t.children||[],i,h,s,a,o,l,c)):m>0&&64&m&&p&&e.dynamicChildren?(R(e.dynamicChildren,p,i,s,a,o,l),(null!=t.key||s&&t===s.subTree)&&Hs(e,t,!0)):$(e,t,i,h,s,a,o,l,c)},D=(e,t,n,i,r,s,a,o,l)=>{t.slotScopeIds=o,null==e?512&t.shapeFlag?r.ctx.activate(t,n,i,a,l):O(t,n,i,r,s,a,l):N(e,t,l)},O=(e,t,n,i,r,s,a)=>{const o=e.component=xa(e,i,r);if(Qi(e)&&(o.ctx.renderer=J),Va(o),o.asyncDep){if(r&&r.registerDep(o,F),!e.el){const e=o.subTree=va(Js);E(null,e,t,n)}}else F(o,e,t,n,r,s,a)},N=(e,t,n)=>{const i=t.component=e.component;if(function(e,t,n){const{props:i,children:r,component:s}=e,{props:a,children:o,patchFlag:l}=t,d=s.emitsOptions;if(t.dirs||t.transition)return!0;if(!(n&&l>=0))return!(!r&&!o||o&&o.$stable)||i!==a&&(i?!a||ii(i,a,d):!!a);if(1024&l)return!0;if(16&l)return i?ii(i,a,d):!!a;if(8&l){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const n=e[t];if(a[n]!==i[n]&&!Kn(d,n))return!0}}return!1}(e,t,n)){if(i.asyncDep&&!i.asyncResolved)return void U(i,t,n);i.next=t,function(e){const t=Sn.indexOf(e);t>kn&&Sn.splice(t,1)}(i.update),i.effect.dirty=!0,i.update()}else t.el=e.el,i.vnode=t},F=(e,t,n,i,r,s,a)=>{const l=()=>{if(e.isMounted){let{next:t,bu:n,u:i,parent:o,vnode:d}=e;{const n=Vs(e);if(n)return t&&(t.el=d.el,U(e,t,a)),void n.asyncDep.then((()=>{e.isUnmounted||l()}))}let c,u=t;0,Bs(e,!1),t?(t.el=d.el,U(e,t,a)):t=d,n&&B(n),(c=t.props&&t.props.onVnodeBeforeUpdate)&&Ra(c,o,t,d),Bs(e,!0);const h=Jn(e);0;const p=e.subTree;e.subTree=h,b(p,h,m(p.el),X(p),e,r,s),t.el=h.el,null===u&&ri(e,h.el),i&&Os(i,r),(c=t.props&&t.props.onVnodeUpdated)&&Os((()=>Ra(c,o,t,d)),r)}else{let a;const{el:o,props:l}=t,{bm:d,m:c,parent:u}=e,h=Yi(t);if(Bs(e,!1),d&&B(d),!h&&(a=l&&l.onVnodeBeforeMount)&&Ra(a,u,t),Bs(e,!0),o&&te){const n=()=>{e.subTree=Jn(e),te(o,e.subTree,e,r,null)};h?t.type.__asyncLoader().then((()=>!e.isUnmounted&&n())):n()}else{0;const a=e.subTree=Jn(e);0,b(null,a,n,i,e,r,s),t.el=a.el}if(c&&Os(c,r),!h&&(a=l&&l.onVnodeMounted)){const e=t;Os((()=>Ra(a,u,e)),r)}(256&t.shapeFlag||u&&Yi(u.vnode)&&256&u.vnode.shapeFlag)&&e.a&&Os(e.a,r),e.isMounted=!0,t=n=i=null}},d=e.effect=new _e(l,o,(()=>Dn(c)),e.scope),c=e.update=()=>{d.dirty&&d.run()};c.id=e.uid,Bs(e,!0),c()},U=(e,t,n)=>{t.component=e;const i=e.vnode.props;e.vnode=t,e.next=null,function(e,t,n,i){const{props:r,attrs:s,vnode:{patchFlag:a}}=e,o=Ut(r),[l]=e.propsOptions;let d=!1;if(!(i||a>0)||16&a){let i;hs(e,t,r,s)&&(d=!0);for(const s in o)t&&(p(t,s)||(i=P(s))!==s&&p(t,i))||(l?!n||void 0===n[s]&&void 0===n[i]||(r[s]=ms(l,o,s,void 0,e,!0)):delete r[s]);if(s!==o)for(const e in s)t&&p(t,e)||(delete s[e],d=!0)}else if(8&a){const n=e.vnode.dynamicProps;for(let i=0;i<n.length;i++){let a=n[i];if(Kn(e.emitsOptions,a))continue;const c=t[a];if(l)if(p(s,a))c!==s[a]&&(s[a]=c,d=!0);else{const t=M(a);r[t]=ms(l,o,t,c,e,!1)}else c!==s[a]&&(s[a]=c,d=!0)}}d&&Ge(e.attrs,"set","")}(e,t.props,i,n),ks(e,t.children,n),De(),Pn(e),Me()},$=(e,t,n,i,r,s,a,o,l=!1)=>{const d=e&&e.children,c=e?e.shapeFlag:0,u=t.children,{patchFlag:m,shapeFlag:p}=t;if(m>0){if(128&m)return void V(d,u,n,i,r,s,a,o,l);if(256&m)return void H(d,u,n,i,r,s,a,o,l)}8&p?(16&c&&z(d,r,s),u!==d&&h(n,u)):16&c?16&p?V(d,u,n,i,r,s,a,o,l):z(d,r,s,!0):(8&c&&h(n,""),16&p&&w(u,n,i,r,s,a,o,l))},H=(e,t,n,i,r,s,o,l,d)=>{t=t||a;const c=(e=e||a).length,u=t.length,h=Math.min(c,u);let m;for(m=0;m<h;m++){const i=t[m]=d?ka(t[m]):Sa(t[m]);b(e[m],i,n,null,r,s,o,l,d)}c>u?z(e,r,s,!0,!1,h):w(t,n,i,r,s,o,l,d,h)},V=(e,t,n,i,r,s,o,l,d)=>{let c=0;const u=t.length;let h=e.length-1,m=u-1;for(;c<=h&&c<=m;){const i=e[c],a=t[c]=d?ka(t[c]):Sa(t[c]);if(!ha(i,a))break;b(i,a,n,null,r,s,o,l,d),c++}for(;c<=h&&c<=m;){const i=e[h],a=t[m]=d?ka(t[m]):Sa(t[m]);if(!ha(i,a))break;b(i,a,n,null,r,s,o,l,d),h--,m--}if(c>h){if(c<=m){const e=m+1,a=e<u?t[e].el:i;for(;c<=m;)b(null,t[c]=d?ka(t[c]):Sa(t[c]),n,a,r,s,o,l,d),c++}}else if(c>m)for(;c<=h;)K(e[c],r,s,!0),c++;else{const p=c,f=c,g=new Map;for(c=f;c<=m;c++){const e=t[c]=d?ka(t[c]):Sa(t[c]);null!=e.key&&g.set(e.key,c)}let v,y=0;const E=m-f+1;let T=!1,_=0;const A=new Array(E);for(c=0;c<E;c++)A[c]=0;for(c=p;c<=h;c++){const i=e[c];if(y>=E){K(i,r,s,!0);continue}let a;if(null!=i.key)a=g.get(i.key);else for(v=f;v<=m;v++)if(0===A[v-f]&&ha(i,t[v])){a=v;break}void 0===a?K(i,r,s,!0):(A[a-f]=c+1,a>=_?_=a:T=!0,b(i,t[a],n,null,r,s,o,l,d),y++)}const S=T?function(e){const t=e.slice(),n=[0];let i,r,s,a,o;const l=e.length;for(i=0;i<l;i++){const l=e[i];if(0!==l){if(r=n[n.length-1],e[r]<l){t[i]=r,n.push(i);continue}for(s=0,a=n.length-1;s<a;)o=s+a>>1,e[n[o]]<l?s=o+1:a=o;l<e[n[s]]&&(s>0&&(t[i]=n[s-1]),n[s]=i)}}s=n.length,a=n[s-1];for(;s-- >0;)n[s]=a,a=t[a];return n}(A):a;for(v=S.length-1,c=E-1;c>=0;c--){const e=f+c,a=t[e],h=e+1<u?t[e+1].el:i;0===A[c]?b(null,a,n,h,r,s,o,l,d):T&&(v<0||c!==S[v]?W(a,n,h,2):v--)}}},W=(e,t,i,r,s=null)=>{const{el:a,type:o,transition:l,children:d,shapeFlag:c}=e;if(6&c)return void W(e.component.subTree,t,i,r);if(128&c)return void e.suspense.move(t,i,r);if(64&c)return void o.move(e,t,i,J);if(o===Qs){n(a,t,i);for(let e=0;e<d.length;e++)W(d[e],t,i,r);return void n(e.anchor,t,i)}if(o===ea)return void(({el:e,anchor:t},i,r)=>{let s;for(;e&&e!==t;)s=f(e),n(e,i,r),e=s;n(t,i,r)})(e,t,i);if(2!==r&&1&c&&l)if(0===r)l.beforeEnter(a),n(a,t,i),Os((()=>l.enter(a)),s);else{const{leave:e,delayLeave:r,afterLeave:s}=l,o=()=>n(a,t,i),d=()=>{e(a,(()=>{o(),s&&s()}))};r?r(a,o,d):d()}else n(a,t,i)},K=(e,t,n,i=!1,r=!1)=>{const{type:s,props:a,ref:o,children:l,dynamicChildren:d,shapeFlag:c,patchFlag:u,dirs:h}=e;if(null!=o&&ws(o,null,n,e,!0),256&c)return void t.ctx.deactivate(e);const m=1&c&&h,p=!Yi(e);let f;if(p&&(f=a&&a.onVnodeBeforeUnmount)&&Ra(f,t,e),6&c)Y(e.component,n,i);else{if(128&c)return void e.suspense.unmount(n,i);m&&Mi(e,null,t,"beforeUnmount"),64&c?e.type.remove(e,t,n,r,J,i):d&&(s!==Qs||u>0&&64&u)?z(d,t,n,!1,!0):(s===Qs&&384&u||!r&&16&c)&&z(l,t,n),i&&q(e)}(p&&(f=a&&a.onVnodeUnmounted)||m)&&Os((()=>{f&&Ra(f,t,e),m&&Mi(e,null,t,"unmounted")}),n)},q=e=>{const{type:t,el:n,anchor:r,transition:s}=e;if(t===Qs)return void j(n,r);if(t===ea)return void _(e);const a=()=>{i(n),s&&!s.persisted&&s.afterLeave&&s.afterLeave()};if(1&e.shapeFlag&&s&&!s.persisted){const{leave:t,delayLeave:i}=s,r=()=>t(n,a);i?i(e.el,a,r):r()}else a()},j=(e,t)=>{let n;for(;e!==t;)n=f(e),i(e),e=n;i(t)},Y=(e,t,n)=>{const{bum:i,scope:r,update:s,subTree:a,um:o}=e;i&&B(i),r.stop(),s&&(s.active=!1,K(a,e,t,n)),o&&Os(o,t),Os((()=>{e.isUnmounted=!0}),t),t&&t.pendingBranch&&!t.isUnmounted&&e.asyncDep&&!e.asyncResolved&&e.suspenseId===t.pendingId&&(t.deps--,0===t.deps&&t.resolve())},z=(e,t,n,i=!1,r=!1,s=0)=>{for(let a=s;a<e.length;a++)K(e[a],t,n,i,r)},X=e=>6&e.shapeFlag?X(e.component.subTree):128&e.shapeFlag?e.suspense.next():f(e.anchor||e.el);let Q=!1;const Z=(e,t,n)=>{null==e?t._vnode&&K(t._vnode,null,null,!0):b(t._vnode||null,e,t,null,null,null,n),Q||(Q=!0,Pn(),Nn(),Q=!1),t._vnode=e},J={p:b,um:K,m:W,r:q,mt:O,mc:w,pc:$,pbc:R,n:X,o:e};let ee,te;return t&&([ee,te]=t(J)),{render:Z,hydrate:ee,createApp:rs(Z,ee)}}function Us({type:e,props:t},n){return"svg"===n&&"foreignObject"===e||"mathml"===n&&"annotation-xml"===e&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Bs({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function $s(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Hs(e,t,n=!1){const i=e.children,r=t.children;if(f(i)&&f(r))for(let e=0;e<i.length;e++){const t=i[e];let s=r[e];1&s.shapeFlag&&!s.dynamicChildren&&((s.patchFlag<=0||32===s.patchFlag)&&(s=r[e]=ka(r[e]),s.el=t.el),n||Hs(t,s)),s.type===Zs&&(s.el=t.el)}}function Vs(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Vs(t)}const Ws=e=>e&&(e.disabled||""===e.disabled),Gs=e=>"undefined"!=typeof SVGElement&&e instanceof SVGElement,Ks=e=>"function"==typeof MathMLElement&&e instanceof MathMLElement,qs=(e,t)=>{const n=e&&e.to;if(E(n)){if(t){const e=t(n);return e}return null}return n},js={name:"Teleport",__isTeleport:!0,process(e,t,n,i,r,s,a,o,l,d){const{mc:c,pc:u,pbc:h,o:{insert:m,querySelector:p,createText:f,createComment:g}}=d,v=Ws(t.props);let{shapeFlag:b,children:y,dynamicChildren:E}=t;if(null==e){const e=t.el=f(""),d=t.anchor=f("");m(e,n,i),m(d,n,i);const u=t.target=qs(t.props,p),h=t.targetAnchor=f("");u&&(m(h,u),"svg"===a||Gs(u)?a="svg":("mathml"===a||Ks(u))&&(a="mathml"));const g=(e,t)=>{16&b&&c(y,e,t,r,s,a,o,l)};v?g(n,d):u&&g(u,h)}else{t.el=e.el;const i=t.anchor=e.anchor,c=t.target=e.target,m=t.targetAnchor=e.targetAnchor,f=Ws(e.props),g=f?n:c,b=f?i:m;if("svg"===a||Gs(c)?a="svg":("mathml"===a||Ks(c))&&(a="mathml"),E?(h(e.dynamicChildren,E,g,r,s,a,o),Hs(e,t,!0)):l||u(e,t,g,b,r,s,a,o,!1),v)f?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):Ys(t,n,i,d,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const e=t.target=qs(t.props,p);e&&Ys(t,e,null,d,0)}else f&&Ys(t,c,m,d,1)}Xs(t)},remove(e,t,n,i,{um:r,o:{remove:s}},a){const{shapeFlag:o,children:l,anchor:d,targetAnchor:c,target:u,props:h}=e;if(u&&s(c),a&&s(d),16&o){const e=a||!Ws(h);for(let i=0;i<l.length;i++){const s=l[i];r(s,t,n,e,!!s.dynamicChildren)}}},move:Ys,hydrate:function(e,t,n,i,r,s,{o:{nextSibling:a,parentNode:o,querySelector:l}},d){const c=t.target=qs(t.props,l);if(c){const l=c._lpa||c.firstChild;if(16&t.shapeFlag)if(Ws(t.props))t.anchor=d(a(e),t,o(e),n,i,r,s),t.targetAnchor=l;else{t.anchor=a(e);let o=l;for(;o;)if(o=a(o),o&&8===o.nodeType&&"teleport anchor"===o.data){t.targetAnchor=o,c._lpa=t.targetAnchor&&a(t.targetAnchor);break}d(l,t,c,n,i,r,s)}Xs(t)}return t.anchor&&a(t.anchor)}};function Ys(e,t,n,{o:{insert:i},m:r},s=2){0===s&&i(e.targetAnchor,t,n);const{el:a,anchor:o,shapeFlag:l,children:d,props:c}=e,u=2===s;if(u&&i(a,t,n),(!u||Ws(c))&&16&l)for(let e=0;e<d.length;e++)r(d[e],t,n,2);u&&i(o,t,n)}const zs=js;function Xs(e){const t=e.ctx;if(t&&t.ut){let n=e.children[0].el;for(;n&&n!==e.targetAnchor;)1===n.nodeType&&n.setAttribute("data-v-owner",t.uid),n=n.nextSibling;t.ut()}}const Qs=Symbol.for("v-fgt"),Zs=Symbol.for("v-txt"),Js=Symbol.for("v-cmt"),ea=Symbol.for("v-stc"),ta=[];let na=null;function ia(e=!1){ta.push(na=e?null:[])}function ra(){ta.pop(),na=ta[ta.length-1]||null}let sa,aa=1;function oa(e){aa+=e}function la(e){return e.dynamicChildren=aa>0?na||a:null,ra(),aa>0&&na&&na.push(e),e}function da(e,t,n,i,r,s){return la(ga(e,t,n,i,r,s,!0))}function ca(e,t,n,i,r){return la(va(e,t,n,i,r,!0))}function ua(e){return!!e&&!0===e.__v_isVNode}function ha(e,t){return e.type===t.type&&e.key===t.key}function ma(e){sa=e}const pa=({key:e})=>null!=e?e:null,fa=({ref:e,ref_key:t,ref_for:n})=>("number"==typeof e&&(e=""+e),null!=e?E(e)||qt(e)||y(e)?{i:qn,r:e,k:t,f:!!n}:e:null);function ga(e,t=null,n=null,i=0,r=null,s=(e===Qs?0:1),a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&pa(t),ref:t&&fa(t),scopeId:jn,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:i,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:qn};return o?(wa(l,n),128&s&&e.normalize(l)):n&&(l.shapeFlag|=E(n)?8:16),aa>0&&!a&&na&&(l.patchFlag>0||6&s)&&32!==l.patchFlag&&na.push(l),l}const va=ba;function ba(e,t=null,n=null,i=0,r=null,s=!1){if(e&&e!==li||(e=Js),ua(e)){const i=Ea(e,t,!0);return n&&wa(i,n),aa>0&&!s&&na&&(6&i.shapeFlag?na[na.indexOf(e)]=i:na.push(i)),i.patchFlag|=-2,i}if(eo(e)&&(e=e.__vccOpts),t){t=ya(t);let{class:e,style:n}=t;e&&!E(e)&&(t.class=Z(e)),_(n)&&(Ft(n)&&!f(n)&&(n=u({},n)),t.style=j(n))}return ga(e,t,n,i,r,E(e)?1:mi(e)?128:(e=>e.__isTeleport)(e)?64:_(e)?4:y(e)?2:0,s,!0)}function ya(e){return e?Ft(e)||us(e)?u({},e):e:null}function Ea(e,t,n=!1){const{props:i,ref:r,patchFlag:s,children:a}=e,o=t?La(i||{},t):i;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:o,key:o&&pa(o),ref:t&&t.ref?n&&r?f(r)?r.concat(fa(t)):[r,fa(t)]:fa(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Qs?-1===s?16:16|s:s,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Ea(e.ssContent),ssFallback:e.ssFallback&&Ea(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function Ta(e=" ",t=0){return va(Zs,null,e,t)}function _a(e,t){const n=va(ea,null,e);return n.staticCount=t,n}function Aa(e="",t=!1){return t?(ia(),ca(Js,null,e)):va(Js,null,e)}function Sa(e){return null==e||"boolean"==typeof e?va(Js):f(e)?va(Qs,null,e.slice()):"object"==typeof e?ka(e):va(Zs,null,String(e))}function ka(e){return null===e.el&&-1!==e.patchFlag||e.memo?e:Ea(e)}function wa(e,t){let n=0;const{shapeFlag:i}=e;if(null==t)t=null;else if(f(t))n=16;else if("object"==typeof t){if(65&i){const n=t.default;return void(n&&(n._c&&(n._d=!1),wa(e,n()),n._c&&(n._d=!0)))}{n=32;const i=t._;i||us(t)?3===i&&qn&&(1===qn.slots._?t._=1:(t._=2,e.patchFlag|=1024)):t._ctx=qn}}else y(t)?(t={default:t,_ctx:qn},n=32):(t=String(t),64&i?(n=16,t=[Ta(t)]):n=8);e.children=t,e.shapeFlag|=n}function La(...e){const t={};for(let n=0;n<e.length;n++){const i=e[n];for(const e in i)if("class"===e)t.class!==i.class&&(t.class=Z([t.class,i.class]));else if("style"===e)t.style=j([t.style,i.style]);else if(d(e)){const n=t[e],r=i[e];!r||n===r||f(n)&&n.includes(r)||(t[e]=n?[].concat(n,r):r)}else""!==e&&(t[e]=i[e])}return t}function Ra(e,t,n,i=null){En(e,t,7,[n,i])}const Ca=ns();let Ia=0;function xa(e,t,n){const i=e.type,r=(t?t.appContext:e.appContext)||Ca,a={uid:Ia++,vnode:e,type:i,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new ve(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ps(i,r),emitsOptions:Gn(i,r),emit:null,emitted:null,propsDefaults:s,inheritAttrs:i.inheritAttrs,ctx:s,data:s,props:s,attrs:s,slots:s,refs:s,setupState:s,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=Wn.bind(null,a),e.ce&&e.ce(a),a}let Da=null;const Ma=()=>Da||qn;let Oa,Pa;{const e=G(),t=(t,n)=>{let i;return(i=e[t])||(i=e[t]=[]),i.push(n),e=>{i.length>1?i.forEach((t=>t(e))):i[0](e)}};Oa=t("__VUE_INSTANCE_SETTERS__",(e=>Da=e)),Pa=t("__VUE_SSR_SETTERS__",(e=>Ha=e))}const Na=e=>{const t=Da;return Oa(e),e.scope.on(),()=>{e.scope.off(),Oa(t)}},Fa=()=>{Da&&Da.scope.off(),Oa(null)};function Ua(e){return 4&e.vnode.shapeFlag}let Ba,$a,Ha=!1;function Va(e,t=!1){t&&Pa(t);const{props:n,children:i}=e.vnode,r=Ua(e);!function(e,t,n,i=!1){const r={},s=cs();e.propsDefaults=Object.create(null),hs(e,t,r,s);for(const t in e.propsOptions[0])t in r||(r[t]=void 0);n?e.props=i?r:It(r):e.type.props?e.props=r:e.props=s,e.attrs=s}(e,n,r,t),Ss(e,i);const s=r?function(e,t){const n=e.type;0;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Lr),!1;const{setup:i}=n;if(i){const n=e.setupContext=i.length>1?Ya(e):null,r=Na(e);De();const s=yn(i,e,0,[e.props,n]);if(Me(),r(),A(s)){if(s.then(Fa,Fa),t)return s.then((n=>{Wa(e,n,t)})).catch((t=>{Tn(t,e,0)}));e.asyncDep=s}else Wa(e,s,t)}else qa(e,t)}(e,t):void 0;return t&&Pa(!1),s}function Wa(e,t,n){y(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:_(t)&&(e.setupState=tn(t)),qa(e,n)}function Ga(e){Ba=e,$a=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,Rr))}}const Ka=()=>!Ba;function qa(e,t,n){const i=e.type;if(!e.render){if(!t&&Ba&&!i.render){const t=i.template||Yr(e).template;if(t){0;const{isCustomElement:n,compilerOptions:r}=e.appContext.config,{delimiters:s,compilerOptions:a}=i,o=u(u({isCustomElement:n,delimiters:s},r),a);i.render=Ba(t,o)}}e.render=i.render||o,$a&&$a(e)}{const t=Na(e);De();try{Kr(e)}finally{Me(),t()}}}const ja={get:(e,t)=>(We(e,0,""),e[t])};function Ya(e){const t=t=>{e.exposed=t||{}};return{attrs:new Proxy(e.attrs,ja),slots:e.slots,emit:e.emit,expose:t}}function za(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(tn(Bt(e.exposed)),{get:(t,n)=>n in t?t[n]:n in kr?kr[n](e):void 0,has:(e,t)=>t in e||t in kr}))}const Xa=/(?:^|[-_])(\w)/g,Qa=e=>e.replace(Xa,(e=>e.toUpperCase())).replace(/[-_]/g,"");function Za(e,t=!0){return y(e)?e.displayName||e.name:e.name||t&&e.__name}function Ja(e,t,n=!1){let i=Za(t);if(!i&&t.__file){const e=t.__file.match(/([^/\\]+)\.\w+$/);e&&(i=e[1])}if(!i&&e&&e.parent){const n=e=>{for(const n in e)if(e[n]===t)return n};i=n(e.components||e.parent.type.components)||n(e.appContext.components)}return i?Qa(i):n?"App":"Anonymous"}function eo(e){return y(e)&&"__vccOpts"in e}const to=(e,t)=>Wt(e,0,Ha);function no(e,t,n=s){const i=Ma();const r=M(t),a=P(t),o=rn(((s,o)=>{let l;return ki((()=>{const n=e[t];U(l,n)&&(l=n,o())})),{get:()=>(s(),n.get?n.get(l):l),set(e){const s=i.vnode.props;s&&(t in s||r in s||a in s)&&(`onUpdate:${t}`in s||`onUpdate:${r}`in s||`onUpdate:${a}`in s)||!U(e,l)||(l=e,o()),i.emit(`update:${t}`,n.set?n.set(e):e)}}})),l="modelValue"===t?"modelModifiers":`${t}Modifiers`;return o[Symbol.iterator]=()=>{let t=0;return{next:()=>t<2?{value:t++?e[l]||{}:o,done:!1}:{done:!0}}},o}function io(e,t,n){const i=arguments.length;return 2===i?_(t)&&!f(t)?ua(t)?va(e,null,[t]):va(e,t):va(e,null,t):(i>3?n=Array.prototype.slice.call(arguments,2):3===i&&ua(n)&&(n=[n]),va(e,t,n))}function ro(){return void 0}function so(e,t,n,i){const r=n[i];if(r&&ao(r,e))return r;const s=t();return s.memo=e.slice(),n[i]=s}function ao(e,t){const n=e.memo;if(n.length!=t.length)return!1;for(let e=0;e<n.length;e++)if(U(n[e],t[e]))return!1;return aa>0&&na&&na.push(e),!0}const oo="3.4.25",lo=o,co=bn,uo=$n,ho=function e(t,n){var i,r;if($n=t,$n)$n.enabled=!0,Hn.forEach((({event:e,args:t})=>$n.emit(e,...t))),Hn=[];else if("undefined"!=typeof window&&window.HTMLElement&&!(null==(r=null==(i=window.navigator)?void 0:i.userAgent)?void 0:r.includes("jsdom"))){(n.__VUE_DEVTOOLS_HOOK_REPLAY__=n.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push((t=>{e(t,n)})),setTimeout((()=>{$n||(n.__VUE_DEVTOOLS_HOOK_REPLAY__=null,Vn=!0,Hn=[])}),3e3)}else Vn=!0,Hn=[]},mo={createComponentInstance:xa,setupComponent:Va,renderComponentRoot:Jn,setCurrentRenderingInstance:Yn,isVNode:ua,normalizeVNode:Sa},po=null,fo=null,go=null,vo="undefined"!=typeof document?document:null,bo=vo&&vo.createElement("template"),yo={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,i)=>{const r="svg"===t?vo.createElementNS("http://www.w3.org/2000/svg",e):"mathml"===t?vo.createElementNS("http://www.w3.org/1998/Math/MathML",e):vo.createElement(e,n?{is:n}:void 0);return"select"===e&&i&&null!=i.multiple&&r.setAttribute("multiple",i.multiple),r},createText:e=>vo.createTextNode(e),createComment:e=>vo.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>vo.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,i,r,s){const a=n?n.previousSibling:t.lastChild;if(r&&(r===s||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),n),r!==s&&(r=r.nextSibling););else{bo.innerHTML="svg"===i?`<svg>${e}</svg>`:"mathml"===i?`<math>${e}</math>`:e;const r=bo.content;if("svg"===i||"mathml"===i){const e=r.firstChild;for(;e.firstChild;)r.appendChild(e.firstChild);r.removeChild(e)}t.insertBefore(r,n)}return[a?a.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},Eo="transition",To="animation",_o=Symbol("_vtc"),Ao=(e,{slots:t})=>io($i,Ro(e),t);Ao.displayName="Transition";const So={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},ko=Ao.props=u({},Ui,So),wo=(e,t=[])=>{f(e)?e.forEach((e=>e(...t))):e&&e(...t)},Lo=e=>!!e&&(f(e)?e.some((e=>e.length>1)):e.length>1);function Ro(e){const t={};for(const n in e)n in So||(t[n]=e[n]);if(!1===e.css)return t;const{name:n="v",type:i,duration:r,enterFromClass:s=`${n}-enter-from`,enterActiveClass:a=`${n}-enter-active`,enterToClass:o=`${n}-enter-to`,appearFromClass:l=s,appearActiveClass:d=a,appearToClass:c=o,leaveFromClass:h=`${n}-leave-from`,leaveActiveClass:m=`${n}-leave-active`,leaveToClass:p=`${n}-leave-to`}=e,f=function(e){if(null==e)return null;if(_(e))return[Co(e.enter),Co(e.leave)];{const t=Co(e);return[t,t]}}(r),g=f&&f[0],v=f&&f[1],{onBeforeEnter:b,onEnter:y,onEnterCancelled:E,onLeave:T,onLeaveCancelled:A,onBeforeAppear:S=b,onAppear:k=y,onAppearCancelled:w=E}=t,L=(e,t,n)=>{xo(e,t?c:o),xo(e,t?d:a),n&&n()},R=(e,t)=>{e._isLeaving=!1,xo(e,h),xo(e,p),xo(e,m),t&&t()},C=e=>(t,n)=>{const r=e?k:y,a=()=>L(t,e,n);wo(r,[t,a]),Do((()=>{xo(t,e?l:s),Io(t,e?c:o),Lo(r)||Oo(t,i,g,a)}))};return u(t,{onBeforeEnter(e){wo(b,[e]),Io(e,s),Io(e,a)},onBeforeAppear(e){wo(S,[e]),Io(e,l),Io(e,d)},onEnter:C(!1),onAppear:C(!0),onLeave(e,t){e._isLeaving=!0;const n=()=>R(e,t);Io(e,h),Io(e,m),Uo(),Do((()=>{e._isLeaving&&(xo(e,h),Io(e,p),Lo(T)||Oo(e,i,v,n))})),wo(T,[e,n])},onEnterCancelled(e){L(e,!1),wo(E,[e])},onAppearCancelled(e){L(e,!0),wo(w,[e])},onLeaveCancelled(e){R(e),wo(A,[e])}})}function Co(e){return V(e)}function Io(e,t){t.split(/\s+/).forEach((t=>t&&e.classList.add(t))),(e[_o]||(e[_o]=new Set)).add(t)}function xo(e,t){t.split(/\s+/).forEach((t=>t&&e.classList.remove(t)));const n=e[_o];n&&(n.delete(t),n.size||(e[_o]=void 0))}function Do(e){requestAnimationFrame((()=>{requestAnimationFrame(e)}))}let Mo=0;function Oo(e,t,n,i){const r=e._endId=++Mo,s=()=>{r===e._endId&&i()};if(n)return setTimeout(s,n);const{type:a,timeout:o,propCount:l}=Po(e,t);if(!a)return i();const d=a+"end";let c=0;const u=()=>{e.removeEventListener(d,h),s()},h=t=>{t.target===e&&++c>=l&&u()};setTimeout((()=>{c<l&&u()}),o+1),e.addEventListener(d,h)}function Po(e,t){const n=window.getComputedStyle(e),i=e=>(n[e]||"").split(", "),r=i(`${Eo}Delay`),s=i(`${Eo}Duration`),a=No(r,s),o=i(`${To}Delay`),l=i(`${To}Duration`),d=No(o,l);let c=null,u=0,h=0;t===Eo?a>0&&(c=Eo,u=a,h=s.length):t===To?d>0&&(c=To,u=d,h=l.length):(u=Math.max(a,d),c=u>0?a>d?Eo:To:null,h=c?c===Eo?s.length:l.length:0);return{type:c,timeout:u,propCount:h,hasTransform:c===Eo&&/\b(transform|all)(,|$)/.test(i(`${Eo}Property`).toString())}}function No(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map(((t,n)=>Fo(t)+Fo(e[n]))))}function Fo(e){return"auto"===e?0:1e3*Number(e.slice(0,-1).replace(",","."))}function Uo(){return document.body.offsetHeight}const Bo=Symbol("_vod"),$o=Symbol("_vsh"),Ho={beforeMount(e,{value:t},{transition:n}){e[Bo]="none"===e.style.display?"":e.style.display,n&&t?n.beforeEnter(e):Vo(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:i}){!t!=!n&&(i?t?(i.beforeEnter(e),Vo(e,!0),i.enter(e)):i.leave(e,(()=>{Vo(e,!1)})):Vo(e,t))},beforeUnmount(e,{value:t}){Vo(e,t)}};function Vo(e,t){e.style.display=t?e[Bo]:"none",e[$o]=!t}const Wo=Symbol("");function Go(e){const t=Ma();if(!t)return;const n=t.ut=(n=e(t.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${t.uid}"]`)).forEach((e=>qo(e,n)))};const i=()=>{const i=e(t.proxy);Ko(t.subTree,i),n(i)};cr((()=>{Si(i);const e=new MutationObserver(i);e.observe(t.subTree.el.parentNode,{childList:!0}),pr((()=>e.disconnect()))}))}function Ko(e,t){if(128&e.shapeFlag){const n=e.suspense;e=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push((()=>{Ko(n.activeBranch,t)}))}for(;e.component;)e=e.component.subTree;if(1&e.shapeFlag&&e.el)qo(e.el,t);else if(e.type===Qs)e.children.forEach((e=>Ko(e,t)));else if(e.type===ea){let{el:n,anchor:i}=e;for(;n&&(qo(n,t),n!==i);)n=n.nextSibling}}function qo(e,t){if(1===e.nodeType){const n=e.style;let i="";for(const e in t)n.setProperty(`--${e}`,t[e]),i+=`--${e}: ${t[e]};`;n[Wo]=i}}const jo=/(^|;)\s*display\s*:/;const Yo=/\s*!important$/;function zo(e,t,n){if(f(n))n.forEach((n=>zo(e,t,n)));else if(null==n&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const i=function(e,t){const n=Qo[t];if(n)return n;let i=M(t);if("filter"!==i&&i in e)return Qo[t]=i;i=N(i);for(let n=0;n<Xo.length;n++){const r=Xo[n]+i;if(r in e)return Qo[t]=r}return t}(e,t);Yo.test(n)?e.setProperty(P(i),n.replace(Yo,""),"important"):e[i]=n}}const Xo=["Webkit","Moz","ms"],Qo={};const Zo="http://www.w3.org/1999/xlink";function Jo(e,t,n,i){e.addEventListener(t,n,i)}const el=Symbol("_vei");function tl(e,t,n,i,r=null){const s=e[el]||(e[el]={}),a=s[t];if(i&&a)a.value=i;else{const[n,o]=function(e){let t;if(nl.test(e)){let n;for(t={};n=e.match(nl);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}const n=":"===e[2]?e.slice(3):P(e.slice(2));return[n,t]}(t);if(i){const a=s[t]=function(e,t){const n=e=>{if(e._vts){if(e._vts<=n.attached)return}else e._vts=Date.now();En(function(e,t){if(f(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map((e=>t=>!t._stopped&&e&&e(t)))}return t}(e,n.value),t,5,[e])};return n.value=e,n.attached=sl(),n}(i,r);Jo(e,n,a,o)}else a&&(!function(e,t,n,i){e.removeEventListener(t,n,i)}(e,n,a,o),s[t]=void 0)}}const nl=/(?:Once|Passive|Capture)$/;let il=0;const rl=Promise.resolve(),sl=()=>il||(rl.then((()=>il=0)),il=Date.now());const al=e=>111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123;function ol(e,t){const n=ji(e);class i extends cl{constructor(e){super(n,e,t)}}return i.def=n,i}const ll=e=>ol(e,jl),dl="undefined"!=typeof HTMLElement?HTMLElement:class{};class cl extends dl{constructor(e,t={},n){super(),this._def=e,this._props=t,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this._ob=null,this.shadowRoot&&n?n(this._createVNode(),this.shadowRoot):(this.attachShadow({mode:"open"}),this._def.__asyncLoader||this._resolveProps(this._def))}connectedCallback(){this._connected=!0,this._instance||(this._resolved?this._update():this._resolveDef())}disconnectedCallback(){this._connected=!1,this._ob&&(this._ob.disconnect(),this._ob=null),xn((()=>{this._connected||(ql(null,this.shadowRoot),this._instance=null)}))}_resolveDef(){this._resolved=!0;for(let e=0;e<this.attributes.length;e++)this._setAttr(this.attributes[e].name);this._ob=new MutationObserver((e=>{for(const t of e)this._setAttr(t.attributeName)})),this._ob.observe(this,{attributes:!0});const e=(e,t=!1)=>{const{props:n,styles:i}=e;let r;if(n&&!f(n))for(const e in n){const t=n[e];(t===Number||t&&t.type===Number)&&(e in this._props&&(this._props[e]=V(this._props[e])),(r||(r=Object.create(null)))[M(e)]=!0)}this._numberProps=r,t&&this._resolveProps(e),this._applyStyles(i),this._update()},t=this._def.__asyncLoader;t?t().then((t=>e(t,!0))):e(this._def)}_resolveProps(e){const{props:t}=e,n=f(t)?t:Object.keys(t||{});for(const e of Object.keys(this))"_"!==e[0]&&n.includes(e)&&this._setProp(e,this[e],!0,!1);for(const e of n.map(M))Object.defineProperty(this,e,{get(){return this._getProp(e)},set(t){this._setProp(e,t)}})}_setAttr(e){let t=this.hasAttribute(e)?this.getAttribute(e):void 0;const n=M(e);this._numberProps&&this._numberProps[n]&&(t=V(t)),this._setProp(n,t,!1)}_getProp(e){return this._props[e]}_setProp(e,t,n=!0,i=!0){t!==this._props[e]&&(this._props[e]=t,i&&this._instance&&this._update(),n&&(!0===t?this.setAttribute(P(e),""):"string"==typeof t||"number"==typeof t?this.setAttribute(P(e),t+""):t||this.removeAttribute(P(e))))}_update(){ql(this._createVNode(),this.shadowRoot)}_createVNode(){const e=va(this._def,u({},this._props));return this._instance||(e.ce=e=>{this._instance=e,e.isCE=!0;const t=(e,t)=>{this.dispatchEvent(new CustomEvent(e,{detail:t}))};e.emit=(e,...n)=>{t(e,n),P(e)!==e&&t(P(e),n)};let n=this;for(;n=n&&(n.parentNode||n.host);)if(n instanceof cl){e.parent=n._instance,e.provides=n._instance.provides;break}}),e}_applyStyles(e){e&&e.forEach((e=>{const t=document.createElement("style");t.textContent=e,this.shadowRoot.appendChild(t)}))}}function ul(e="$style"){{const t=Ma();if(!t)return s;const n=t.type.__cssModules;if(!n)return s;const i=n[e];return i||s}}const hl=new WeakMap,ml=new WeakMap,pl=Symbol("_moveCb"),fl=Symbol("_enterCb"),gl={name:"TransitionGroup",props:u({},ko,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=Ma(),i=Ni();let r,s;return hr((()=>{if(!r.length)return;const t=e.moveClass||`${e.name||"v"}-move`;if(!function(e,t,n){const i=e.cloneNode(),r=e[_o];r&&r.forEach((e=>{e.split(/\s+/).forEach((e=>e&&i.classList.remove(e)))}));n.split(/\s+/).forEach((e=>e&&i.classList.add(e))),i.style.display="none";const s=1===t.nodeType?t:t.parentNode;s.appendChild(i);const{hasTransform:a}=Po(i);return s.removeChild(i),a}(r[0].el,n.vnode.el,t))return;r.forEach(bl),r.forEach(yl);const i=r.filter(El);Uo(),i.forEach((e=>{const n=e.el,i=n.style;Io(n,t),i.transform=i.webkitTransform=i.transitionDuration="";const r=n[pl]=e=>{e&&e.target!==n||e&&!/transform$/.test(e.propertyName)||(n.removeEventListener("transitionend",r),n[pl]=null,xo(n,t))};n.addEventListener("transitionend",r)}))})),()=>{const a=Ut(e),o=Ro(a);let l=a.tag||Qs;if(r=[],s)for(let e=0;e<s.length;e++){const t=s[e];t.el&&t.el instanceof Element&&(r.push(t),Ki(t,Vi(t,o,i,n)),hl.set(t,t.el.getBoundingClientRect()))}s=t.default?qi(t.default()):[];for(let e=0;e<s.length;e++){const t=s[e];null!=t.key&&Ki(t,Vi(t,o,i,n))}return va(l,null,s)}}},vl=gl;function bl(e){const t=e.el;t[pl]&&t[pl](),t[fl]&&t[fl]()}function yl(e){ml.set(e,e.el.getBoundingClientRect())}function El(e){const t=hl.get(e),n=ml.get(e),i=t.left-n.left,r=t.top-n.top;if(i||r){const t=e.el.style;return t.transform=t.webkitTransform=`translate(${i}px,${r}px)`,t.transitionDuration="0s",e}}const Tl=e=>{const t=e.props["onUpdate:modelValue"]||!1;return f(t)?e=>B(t,e):t};function _l(e){e.target.composing=!0}function Al(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Sl=Symbol("_assign"),kl={created(e,{modifiers:{lazy:t,trim:n,number:i}},r){e[Sl]=Tl(r);const s=i||r.props&&"number"===r.props.type;Jo(e,t?"change":"input",(t=>{if(t.target.composing)return;let i=e.value;n&&(i=i.trim()),s&&(i=H(i)),e[Sl](i)})),n&&Jo(e,"change",(()=>{e.value=e.value.trim()})),t||(Jo(e,"compositionstart",_l),Jo(e,"compositionend",Al),Jo(e,"change",Al))},mounted(e,{value:t}){e.value=null==t?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:i,number:r}},s){if(e[Sl]=Tl(s),e.composing)return;const a=null==t?"":t;if((!r&&"number"!==e.type||/^0\d/.test(e.value)?e.value:H(e.value))!==a){if(document.activeElement===e&&"range"!==e.type){if(n)return;if(i&&e.value.trim()===a)return}e.value=a}}},wl={deep:!0,created(e,t,n){e[Sl]=Tl(n),Jo(e,"change",(()=>{const t=e._modelValue,n=xl(e),i=e.checked,r=e[Sl];if(f(t)){const e=ue(t,n),s=-1!==e;if(i&&!s)r(t.concat(n));else if(!i&&s){const n=[...t];n.splice(e,1),r(n)}}else if(v(t)){const e=new Set(t);i?e.add(n):e.delete(n),r(e)}else r(Dl(e,i))}))},mounted:Ll,beforeUpdate(e,t,n){e[Sl]=Tl(n),Ll(e,t,n)}};function Ll(e,{value:t,oldValue:n},i){e._modelValue=t,f(t)?e.checked=ue(t,i.props.value)>-1:v(t)?e.checked=t.has(i.props.value):t!==n&&(e.checked=ce(t,Dl(e,!0)))}const Rl={created(e,{value:t},n){e.checked=ce(t,n.props.value),e[Sl]=Tl(n),Jo(e,"change",(()=>{e[Sl](xl(e))}))},beforeUpdate(e,{value:t,oldValue:n},i){e[Sl]=Tl(i),t!==n&&(e.checked=ce(t,i.props.value))}},Cl={deep:!0,created(e,{value:t,modifiers:{number:n}},i){const r=v(t);Jo(e,"change",(()=>{const t=Array.prototype.filter.call(e.options,(e=>e.selected)).map((e=>n?H(xl(e)):xl(e)));e[Sl](e.multiple?r?new Set(t):t:t[0]),e._assigning=!0,xn((()=>{e._assigning=!1}))})),e[Sl]=Tl(i)},mounted(e,{value:t,modifiers:{number:n}}){Il(e,t)},beforeUpdate(e,t,n){e[Sl]=Tl(n)},updated(e,{value:t,modifiers:{number:n}}){e._assigning||Il(e,t)}};function Il(e,t,n){const i=e.multiple,r=f(t);if(!i||r||v(t)){for(let n=0,s=e.options.length;n<s;n++){const s=e.options[n],a=xl(s);if(i)if(r){const e=typeof a;s.selected="string"===e||"number"===e?t.some((e=>String(e)===String(a))):ue(t,a)>-1}else s.selected=t.has(a);else if(ce(xl(s),t))return void(e.selectedIndex!==n&&(e.selectedIndex=n))}i||-1===e.selectedIndex||(e.selectedIndex=-1)}}function xl(e){return"_value"in e?e._value:e.value}function Dl(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const Ml={created(e,t,n){Pl(e,t,n,null,"created")},mounted(e,t,n){Pl(e,t,n,null,"mounted")},beforeUpdate(e,t,n,i){Pl(e,t,n,i,"beforeUpdate")},updated(e,t,n,i){Pl(e,t,n,i,"updated")}};function Ol(e,t){switch(e){case"SELECT":return Cl;case"TEXTAREA":return kl;default:switch(t){case"checkbox":return wl;case"radio":return Rl;default:return kl}}}function Pl(e,t,n,i,r){const s=Ol(e.tagName,n.props&&n.props.type)[r];s&&s(e,t,n,i)}const Nl=["ctrl","shift","alt","meta"],Fl={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&0!==e.button,middle:e=>"button"in e&&1!==e.button,right:e=>"button"in e&&2!==e.button,exact:(e,t)=>Nl.some((n=>e[`${n}Key`]&&!t.includes(n)))},Ul=(e,t)=>{const n=e._withMods||(e._withMods={}),i=t.join(".");return n[i]||(n[i]=(n,...i)=>{for(let e=0;e<t.length;e++){const i=Fl[t[e]];if(i&&i(n,t))return}return e(n,...i)})},Bl={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},$l=(e,t)=>{const n=e._withKeys||(e._withKeys={}),i=t.join(".");return n[i]||(n[i]=n=>{if(!("key"in n))return;const i=P(n.key);return t.some((e=>e===i||Bl[e]===i))?e(n):void 0})},Hl=u({patchProp:(e,t,n,i,r,s,a,o,l)=>{const u="svg"===r;"class"===t?function(e,t,n){const i=e[_o];i&&(t=(t?[t,...i]:[...i]).join(" ")),null==t?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}(e,i,u):"style"===t?function(e,t,n){const i=e.style,r=E(n);let s=!1;if(n&&!r){if(t)if(E(t))for(const e of t.split(";")){const t=e.slice(0,e.indexOf(":")).trim();null==n[t]&&zo(i,t,"")}else for(const e in t)null==n[e]&&zo(i,e,"");for(const e in n)"display"===e&&(s=!0),zo(i,e,n[e])}else if(r){if(t!==n){const e=i[Wo];e&&(n+=";"+e),i.cssText=n,s=jo.test(n)}}else t&&e.removeAttribute("style");Bo in e&&(e[Bo]=s?i.display:"",e[$o]&&(i.display="none"))}(e,n,i):d(t)?c(t)||tl(e,t,0,i,a):("."===t[0]?(t=t.slice(1),1):"^"===t[0]?(t=t.slice(1),0):function(e,t,n,i){if(i)return"innerHTML"===t||"textContent"===t||!!(t in e&&al(t)&&y(n));if("spellcheck"===t||"draggable"===t||"translate"===t)return!1;if("form"===t)return!1;if("list"===t&&"INPUT"===e.tagName)return!1;if("type"===t&&"TEXTAREA"===e.tagName)return!1;if("width"===t||"height"===t){const t=e.tagName;if("IMG"===t||"VIDEO"===t||"CANVAS"===t||"SOURCE"===t)return!1}if(al(t)&&E(n))return!1;return t in e}(e,t,i,u))?function(e,t,n,i,r,s,a){if("innerHTML"===t||"textContent"===t)return i&&a(i,r,s),void(e[t]=null==n?"":n);const o=e.tagName;if("value"===t&&"PROGRESS"!==o&&!o.includes("-")){const i=null==n?"":n;return("OPTION"===o?e.getAttribute("value")||"":e.value)===i&&"_value"in e||(e.value=i),null==n&&e.removeAttribute(t),void(e._value=n)}let l=!1;if(""===n||null==n){const i=typeof e[t];"boolean"===i?n=oe(n):null==n&&"string"===i?(n="",l=!0):"number"===i&&(n=0,l=!0)}try{e[t]=n}catch(e){}l&&e.removeAttribute(t)}(e,t,i,s,a,o,l):("true-value"===t?e._trueValue=i:"false-value"===t&&(e._falseValue=i),function(e,t,n,i,r){if(i&&t.startsWith("xlink:"))null==n?e.removeAttributeNS(Zo,t.slice(6,t.length)):e.setAttributeNS(Zo,t,n);else{const i=se(t);null==n||i&&!oe(n)?e.removeAttribute(t):e.setAttribute(t,i?"":n)}}(e,t,i,u))}},yo);let Vl,Wl=!1;function Gl(){return Vl||(Vl=Ps(Hl))}function Kl(){return Vl=Wl?Vl:Ns(Hl),Wl=!0,Vl}const ql=(...e)=>{Gl().render(...e)},jl=(...e)=>{Kl().hydrate(...e)},Yl=(...e)=>{const t=Gl().createApp(...e);const{mount:n}=t;return t.mount=e=>{const i=Ql(e);if(!i)return;const r=t._component;y(r)||r.render||r.template||(r.template=i.innerHTML),i.innerHTML="";const s=n(i,!1,Xl(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),s},t},zl=(...e)=>{const t=Kl().createApp(...e);const{mount:n}=t;return t.mount=e=>{const t=Ql(e);if(t)return n(t,!0,Xl(t))},t};function Xl(e){return e instanceof SVGElement?"svg":"function"==typeof MathMLElement&&e instanceof MathMLElement?"mathml":void 0}function Ql(e){if(E(e)){return document.querySelector(e)}return e}let Zl=!1;const Jl=()=>{Zl||(Zl=!0,kl.getSSRProps=({value:e})=>({value:e}),Rl.getSSRProps=({value:e},t)=>{if(t.props&&ce(t.props.value,e))return{checked:!0}},wl.getSSRProps=({value:e},t)=>{if(f(e)){if(t.props&&ue(e,t.props.value)>-1)return{checked:!0}}else if(v(e)){if(t.props&&e.has(t.props.value))return{checked:!0}}else if(e)return{checked:!0}},Ml.getSSRProps=(e,t)=>{if("string"!=typeof t.type)return;const n=Ol(t.type.toUpperCase(),t.props&&t.props.type);return n.getSSRProps?n.getSSRProps(e,t):void 0},Ho.getSSRProps=({value:e})=>{if(!e)return{style:{display:"none"}}})},ed=Symbol(""),td=Symbol(""),nd=Symbol(""),id=Symbol(""),rd=Symbol(""),sd=Symbol(""),ad=Symbol(""),od=Symbol(""),ld=Symbol(""),dd=Symbol(""),cd=Symbol(""),ud=Symbol(""),hd=Symbol(""),md=Symbol(""),pd=Symbol(""),fd=Symbol(""),gd=Symbol(""),vd=Symbol(""),bd=Symbol(""),yd=Symbol(""),Ed=Symbol(""),Td=Symbol(""),_d=Symbol(""),Ad=Symbol(""),Sd=Symbol(""),kd=Symbol(""),wd=Symbol(""),Ld=Symbol(""),Rd=Symbol(""),Cd=Symbol(""),Id=Symbol(""),xd=Symbol(""),Dd=Symbol(""),Md=Symbol(""),Od=Symbol(""),Pd=Symbol(""),Nd=Symbol(""),Fd=Symbol(""),Ud=Symbol(""),Bd={[ed]:"Fragment",[td]:"Teleport",[nd]:"Suspense",[id]:"KeepAlive",[rd]:"BaseTransition",[sd]:"openBlock",[ad]:"createBlock",[od]:"createElementBlock",[ld]:"createVNode",[dd]:"createElementVNode",[cd]:"createCommentVNode",[ud]:"createTextVNode",[hd]:"createStaticVNode",[md]:"resolveComponent",[pd]:"resolveDynamicComponent",[fd]:"resolveDirective",[gd]:"resolveFilter",[vd]:"withDirectives",[bd]:"renderList",[yd]:"renderSlot",[Ed]:"createSlots",[Td]:"toDisplayString",[_d]:"mergeProps",[Ad]:"normalizeClass",[Sd]:"normalizeStyle",[kd]:"normalizeProps",[wd]:"guardReactiveProps",[Ld]:"toHandlers",[Rd]:"camelize",[Cd]:"capitalize",[Id]:"toHandlerKey",[xd]:"setBlockTracking",[Dd]:"pushScopeId",[Md]:"popScopeId",[Od]:"withCtx",[Pd]:"unref",[Nd]:"isRef",[Fd]:"withMemo",[Ud]:"isMemoSame"};const $d={start:{line:1,column:1,offset:0},end:{line:1,column:1,offset:0},source:""};function Hd(e,t,n,i,r,s,a,o=!1,l=!1,d=!1,c=$d){return e&&(o?(e.helper(sd),e.helper(Qd(e.inSSR,d))):e.helper(Xd(e.inSSR,d)),a&&e.helper(vd)),{type:13,tag:t,props:n,children:i,patchFlag:r,dynamicProps:s,directives:a,isBlock:o,disableTracking:l,isComponent:d,loc:c}}function Vd(e,t=$d){return{type:17,loc:t,elements:e}}function Wd(e,t=$d){return{type:15,loc:t,properties:e}}function Gd(e,t){return{type:16,loc:$d,key:E(e)?Kd(e,!0):e,value:t}}function Kd(e,t=!1,n=$d,i=0){return{type:4,loc:n,content:e,isStatic:t,constType:t?3:i}}function qd(e,t=$d){return{type:8,loc:t,children:e}}function jd(e,t=[],n=$d){return{type:14,loc:n,callee:e,arguments:t}}function Yd(e,t=void 0,n=!1,i=!1,r=$d){return{type:18,params:e,returns:t,newline:n,isSlot:i,loc:r}}function zd(e,t,n,i=!0){return{type:19,test:e,consequent:t,alternate:n,newline:i,loc:$d}}function Xd(e,t){return e||t?ld:dd}function Qd(e,t){return e||t?ad:od}function Zd(e,{helper:t,removeHelper:n,inSSR:i}){e.isBlock||(e.isBlock=!0,n(Xd(i,e.isComponent)),t(sd),t(Qd(i,e.isComponent)))}const Jd=new Uint8Array([123,123]),ec=new Uint8Array([125,125]);function tc(e){return e>=97&&e<=122||e>=65&&e<=90}function nc(e){return 32===e||10===e||9===e||12===e||13===e}function ic(e){return 47===e||62===e||nc(e)}function rc(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}const sc={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101]),TextareaEnd:new Uint8Array([60,47,116,101,120,116,97,114,101,97])};function ac(e,{compatConfig:t}){const n=t&&t[e];return"MODE"===e?n||3:n}function oc(e,t){const n=ac("MODE",t),i=ac(e,t);return 3===n?!0===i:!1!==i}function lc(e,t,n,...i){return oc(e,t)}function dc(e){throw e}function cc(e){}function uc(e,t,n,i){const r=new SyntaxError(String(`https://vuejs.org/error-reference/#compiler-${e}`));return r.code=e,r.loc=t,r}const hc=e=>4===e.type&&e.isStatic;function mc(e){switch(e){case"Teleport":case"teleport":return td;case"Suspense":case"suspense":return nd;case"KeepAlive":case"keep-alive":return id;case"BaseTransition":case"base-transition":return rd}}const pc=/^\d|[^\$\w]/,fc=e=>!pc.test(e),gc=/[A-Za-z_$\xA0-\uFFFF]/,vc=/[\.\?\w$\xA0-\uFFFF]/,bc=/\s+[.[]\s*|\s*[.[]\s+/g,yc=e=>{e=e.trim().replace(bc,(e=>e.trim()));let t=0,n=[],i=0,r=0,s=null;for(let a=0;a<e.length;a++){const o=e.charAt(a);switch(t){case 0:if("["===o)n.push(t),t=1,i++;else if("("===o)n.push(t),t=2,r++;else if(!(0===a?gc:vc).test(o))return!1;break;case 1:"'"===o||'"'===o||"`"===o?(n.push(t),t=3,s=o):"["===o?i++:"]"===o&&(--i||(t=n.pop()));break;case 2:if("'"===o||'"'===o||"`"===o)n.push(t),t=3,s=o;else if("("===o)r++;else if(")"===o){if(a===e.length-1)return!1;--r||(t=n.pop())}break;case 3:o===s&&(t=n.pop(),s=null)}}return!i&&!r};function Ec(e,t,n=!1){for(let i=0;i<e.props.length;i++){const r=e.props[i];if(7===r.type&&(n||r.exp)&&(E(t)?r.name===t:t.test(r.name)))return r}}function Tc(e,t,n=!1,i=!1){for(let r=0;r<e.props.length;r++){const s=e.props[r];if(6===s.type){if(n)continue;if(s.name===t&&(s.value||i))return s}else if("bind"===s.name&&(s.exp||i)&&_c(s.arg,t))return s}}function _c(e,t){return!(!e||!hc(e)||e.content!==t)}function Ac(e){return 5===e.type||2===e.type}function Sc(e){return 7===e.type&&"slot"===e.name}function kc(e){return 1===e.type&&3===e.tagType}function wc(e){return 1===e.type&&2===e.tagType}const Lc=new Set([kd,wd]);function Rc(e,t=[]){if(e&&!E(e)&&14===e.type){const n=e.callee;if(!E(n)&&Lc.has(n))return Rc(e.arguments[0],t.concat(e))}return[e,t]}function Cc(e,t,n){let i,r,s=13===e.type?e.props:e.arguments[2],a=[];if(s&&!E(s)&&14===s.type){const e=Rc(s);s=e[0],a=e[1],r=a[a.length-1]}if(null==s||E(s))i=Wd([t]);else if(14===s.type){const e=s.arguments[0];E(e)||15!==e.type?s.callee===Ld?i=jd(n.helper(_d),[Wd([t]),s]):s.arguments.unshift(Wd([t])):Ic(t,e)||e.properties.unshift(t),!i&&(i=s)}else 15===s.type?(Ic(t,s)||s.properties.unshift(t),i=s):(i=jd(n.helper(_d),[Wd([t]),s]),r&&r.callee===wd&&(r=a[a.length-2]));13===e.type?r?r.arguments[0]=i:e.props=i:r?r.arguments[0]=i:e.arguments[2]=i}function Ic(e,t){let n=!1;if(4===e.key.type){const i=e.key.content;n=t.properties.some((e=>4===e.key.type&&e.key.content===i))}return n}function xc(e,t){return`_${t}_${e.replace(/[^\w]/g,((t,n)=>"-"===t?"_":e.charCodeAt(n).toString()))}`}const Dc=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,Mc={parseMode:"base",ns:0,delimiters:["{{","}}"],getNamespace:()=>0,isVoidTag:l,isPreTag:l,isCustomElement:l,onError:dc,onWarn:cc,comments:!1,prefixIdentifiers:!1};let Oc=Mc,Pc=null,Nc="",Fc=null,Uc=null,Bc="",$c=-1,Hc=-1,Vc=0,Wc=!1,Gc=null;const Kc=[],qc=new class{constructor(e,t){this.stack=e,this.cbs=t,this.state=1,this.buffer="",this.sectionStart=0,this.index=0,this.entityStart=0,this.baseState=1,this.inRCDATA=!1,this.inXML=!1,this.inVPre=!1,this.newlines=[],this.mode=0,this.delimiterOpen=Jd,this.delimiterClose=ec,this.delimiterIndex=-1,this.currentSequence=void 0,this.sequenceIndex=0}get inSFCRoot(){return 2===this.mode&&0===this.stack.length}reset(){this.state=1,this.mode=0,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=1,this.inRCDATA=!1,this.currentSequence=void 0,this.newlines.length=0,this.delimiterOpen=Jd,this.delimiterClose=ec}getPos(e){let t=1,n=e+1;for(let i=this.newlines.length-1;i>=0;i--){const r=this.newlines[i];if(e>r){t=i+2,n=e-r;break}}return{column:n,line:t,offset:e}}peek(){return this.buffer.charCodeAt(this.index+1)}stateText(e){60===e?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=5,this.sectionStart=this.index):this.inVPre||e!==this.delimiterOpen[0]||(this.state=2,this.delimiterIndex=0,this.stateInterpolationOpen(e))}stateInterpolationOpen(e){if(e===this.delimiterOpen[this.delimiterIndex])if(this.delimiterIndex===this.delimiterOpen.length-1){const e=this.index+1-this.delimiterOpen.length;e>this.sectionStart&&this.cbs.ontext(this.sectionStart,e),this.state=3,this.sectionStart=e}else this.delimiterIndex++;else this.inRCDATA?(this.state=32,this.stateInRCDATA(e)):(this.state=1,this.stateText(e))}stateInterpolation(e){e===this.delimiterClose[0]&&(this.state=4,this.delimiterIndex=0,this.stateInterpolationClose(e))}stateInterpolationClose(e){e===this.delimiterClose[this.delimiterIndex]?this.delimiterIndex===this.delimiterClose.length-1?(this.cbs.oninterpolation(this.sectionStart,this.index+1),this.inRCDATA?this.state=32:this.state=1,this.sectionStart=this.index+1):this.delimiterIndex++:(this.state=3,this.stateInterpolation(e))}stateSpecialStartSequence(e){const t=this.sequenceIndex===this.currentSequence.length;if(t?ic(e):(32|e)===this.currentSequence[this.sequenceIndex]){if(!t)return void this.sequenceIndex++}else this.inRCDATA=!1;this.sequenceIndex=0,this.state=6,this.stateInTagName(e)}stateInRCDATA(e){if(this.sequenceIndex===this.currentSequence.length){if(62===e||nc(e)){const t=this.index-this.currentSequence.length;if(this.sectionStart<t){const e=this.index;this.index=t,this.cbs.ontext(this.sectionStart,t),this.index=e}return this.sectionStart=t+2,this.stateInClosingTagName(e),void(this.inRCDATA=!1)}this.sequenceIndex=0}(32|e)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:0===this.sequenceIndex?this.currentSequence===sc.TitleEnd||this.currentSequence===sc.TextareaEnd&&!this.inSFCRoot?e===this.delimiterOpen[0]&&(this.state=2,this.delimiterIndex=0,this.stateInterpolationOpen(e)):this.fastForwardTo(60)&&(this.sequenceIndex=1):this.sequenceIndex=Number(60===e)}stateCDATASequence(e){e===sc.Cdata[this.sequenceIndex]?++this.sequenceIndex===sc.Cdata.length&&(this.state=28,this.currentSequence=sc.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=23,this.stateInDeclaration(e))}fastForwardTo(e){for(;++this.index<this.buffer.length;){const t=this.buffer.charCodeAt(this.index);if(10===t&&this.newlines.push(this.index),t===e)return!0}return this.index=this.buffer.length-1,!1}stateInCommentLike(e){e===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===sc.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index-2):this.cbs.oncomment(this.sectionStart,this.index-2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=1):0===this.sequenceIndex?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):e!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)}startSpecial(e,t){this.enterRCDATA(e,t),this.state=31}enterRCDATA(e,t){this.inRCDATA=!0,this.currentSequence=e,this.sequenceIndex=t}stateBeforeTagName(e){33===e?(this.state=22,this.sectionStart=this.index+1):63===e?(this.state=24,this.sectionStart=this.index+1):tc(e)?(this.sectionStart=this.index,0===this.mode?this.state=6:this.inSFCRoot?this.state=34:this.inXML?this.state=6:this.state=116===e?30:115===e?29:6):47===e?this.state=8:(this.state=1,this.stateText(e))}stateInTagName(e){ic(e)&&this.handleTagName(e)}stateInSFCRootTagName(e){if(ic(e)){const t=this.buffer.slice(this.sectionStart,this.index);"template"!==t&&this.enterRCDATA(rc("</"+t),0),this.handleTagName(e)}}handleTagName(e){this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=11,this.stateBeforeAttrName(e)}stateBeforeClosingTagName(e){nc(e)||(62===e?(this.state=1,this.sectionStart=this.index+1):(this.state=tc(e)?9:27,this.sectionStart=this.index))}stateInClosingTagName(e){(62===e||nc(e))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=10,this.stateAfterClosingTagName(e))}stateAfterClosingTagName(e){62===e&&(this.state=1,this.sectionStart=this.index+1)}stateBeforeAttrName(e){62===e?(this.cbs.onopentagend(this.index),this.inRCDATA?this.state=32:this.state=1,this.sectionStart=this.index+1):47===e?this.state=7:60===e&&47===this.peek()?(this.cbs.onopentagend(this.index),this.state=5,this.sectionStart=this.index):nc(e)||this.handleAttrStart(e)}handleAttrStart(e){118===e&&45===this.peek()?(this.state=13,this.sectionStart=this.index):46===e||58===e||64===e||35===e?(this.cbs.ondirname(this.index,this.index+1),this.state=14,this.sectionStart=this.index+1):(this.state=12,this.sectionStart=this.index)}stateInSelfClosingTag(e){62===e?(this.cbs.onselfclosingtag(this.index),this.state=1,this.sectionStart=this.index+1,this.inRCDATA=!1):nc(e)||(this.state=11,this.stateBeforeAttrName(e))}stateInAttrName(e){(61===e||ic(e))&&(this.cbs.onattribname(this.sectionStart,this.index),this.handleAttrNameEnd(e))}stateInDirName(e){61===e||ic(e)?(this.cbs.ondirname(this.sectionStart,this.index),this.handleAttrNameEnd(e)):58===e?(this.cbs.ondirname(this.sectionStart,this.index),this.state=14,this.sectionStart=this.index+1):46===e&&(this.cbs.ondirname(this.sectionStart,this.index),this.state=16,this.sectionStart=this.index+1)}stateInDirArg(e){61===e||ic(e)?(this.cbs.ondirarg(this.sectionStart,this.index),this.handleAttrNameEnd(e)):91===e?this.state=15:46===e&&(this.cbs.ondirarg(this.sectionStart,this.index),this.state=16,this.sectionStart=this.index+1)}stateInDynamicDirArg(e){93===e?this.state=14:(61===e||ic(e))&&(this.cbs.ondirarg(this.sectionStart,this.index+1),this.handleAttrNameEnd(e))}stateInDirModifier(e){61===e||ic(e)?(this.cbs.ondirmodifier(this.sectionStart,this.index),this.handleAttrNameEnd(e)):46===e&&(this.cbs.ondirmodifier(this.sectionStart,this.index),this.sectionStart=this.index+1)}handleAttrNameEnd(e){this.sectionStart=this.index,this.state=17,this.cbs.onattribnameend(this.index),this.stateAfterAttrName(e)}stateAfterAttrName(e){61===e?this.state=18:47===e||62===e?(this.cbs.onattribend(0,this.sectionStart),this.sectionStart=-1,this.state=11,this.stateBeforeAttrName(e)):nc(e)||(this.cbs.onattribend(0,this.sectionStart),this.handleAttrStart(e))}stateBeforeAttrValue(e){34===e?(this.state=19,this.sectionStart=this.index+1):39===e?(this.state=20,this.sectionStart=this.index+1):nc(e)||(this.sectionStart=this.index,this.state=21,this.stateInAttrValueNoQuotes(e))}handleInAttrValue(e,t){(e===t||this.fastForwardTo(t))&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(34===t?3:2,this.index+1),this.state=11)}stateInAttrValueDoubleQuotes(e){this.handleInAttrValue(e,34)}stateInAttrValueSingleQuotes(e){this.handleInAttrValue(e,39)}stateInAttrValueNoQuotes(e){nc(e)||62===e?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(1,this.index),this.state=11,this.stateBeforeAttrName(e)):39!==e&&60!==e&&61!==e&&96!==e||this.cbs.onerr(18,this.index)}stateBeforeDeclaration(e){91===e?(this.state=26,this.sequenceIndex=0):this.state=45===e?25:23}stateInDeclaration(e){(62===e||this.fastForwardTo(62))&&(this.state=1,this.sectionStart=this.index+1)}stateInProcessingInstruction(e){(62===e||this.fastForwardTo(62))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=1,this.sectionStart=this.index+1)}stateBeforeComment(e){45===e?(this.state=28,this.currentSequence=sc.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=23}stateInSpecialComment(e){(62===e||this.fastForwardTo(62))&&(this.cbs.oncomment(this.sectionStart,this.index),this.state=1,this.sectionStart=this.index+1)}stateBeforeSpecialS(e){e===sc.ScriptEnd[3]?this.startSpecial(sc.ScriptEnd,4):e===sc.StyleEnd[3]?this.startSpecial(sc.StyleEnd,4):(this.state=6,this.stateInTagName(e))}stateBeforeSpecialT(e){e===sc.TitleEnd[3]?this.startSpecial(sc.TitleEnd,4):e===sc.TextareaEnd[3]?this.startSpecial(sc.TextareaEnd,4):(this.state=6,this.stateInTagName(e))}startEntity(){}stateInEntity(){}parse(e){for(this.buffer=e;this.index<this.buffer.length;){const e=this.buffer.charCodeAt(this.index);switch(10===e&&this.newlines.push(this.index),this.state){case 1:this.stateText(e);break;case 2:this.stateInterpolationOpen(e);break;case 3:this.stateInterpolation(e);break;case 4:this.stateInterpolationClose(e);break;case 31:this.stateSpecialStartSequence(e);break;case 32:this.stateInRCDATA(e);break;case 26:this.stateCDATASequence(e);break;case 19:this.stateInAttrValueDoubleQuotes(e);break;case 12:this.stateInAttrName(e);break;case 13:this.stateInDirName(e);break;case 14:this.stateInDirArg(e);break;case 15:this.stateInDynamicDirArg(e);break;case 16:this.stateInDirModifier(e);break;case 28:this.stateInCommentLike(e);break;case 27:this.stateInSpecialComment(e);break;case 11:this.stateBeforeAttrName(e);break;case 6:this.stateInTagName(e);break;case 34:this.stateInSFCRootTagName(e);break;case 9:this.stateInClosingTagName(e);break;case 5:this.stateBeforeTagName(e);break;case 17:this.stateAfterAttrName(e);break;case 20:this.stateInAttrValueSingleQuotes(e);break;case 18:this.stateBeforeAttrValue(e);break;case 8:this.stateBeforeClosingTagName(e);break;case 10:this.stateAfterClosingTagName(e);break;case 29:this.stateBeforeSpecialS(e);break;case 30:this.stateBeforeSpecialT(e);break;case 21:this.stateInAttrValueNoQuotes(e);break;case 7:this.stateInSelfClosingTag(e);break;case 23:this.stateInDeclaration(e);break;case 22:this.stateBeforeDeclaration(e);break;case 25:this.stateBeforeComment(e);break;case 24:this.stateInProcessingInstruction(e);break;case 33:this.stateInEntity()}this.index++}this.cleanup(),this.finish()}cleanup(){this.sectionStart!==this.index&&(1===this.state||32===this.state&&0===this.sequenceIndex?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):19!==this.state&&20!==this.state&&21!==this.state||(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))}finish(){this.handleTrailingData(),this.cbs.onend()}handleTrailingData(){const e=this.buffer.length;this.sectionStart>=e||(28===this.state?this.currentSequence===sc.CdataEnd?this.cbs.oncdata(this.sectionStart,e):this.cbs.oncomment(this.sectionStart,e):6===this.state||11===this.state||18===this.state||17===this.state||12===this.state||13===this.state||14===this.state||15===this.state||16===this.state||20===this.state||19===this.state||21===this.state||9===this.state||this.cbs.ontext(this.sectionStart,e))}emitCodePoint(e,t){}}(Kc,{onerr:hu,ontext(e,t){Qc(zc(e,t),e,t)},ontextentity(e,t,n){Qc(e,t,n)},oninterpolation(e,t){if(Wc)return Qc(zc(e,t),e,t);let n=e+qc.delimiterOpen.length,i=t-qc.delimiterClose.length;for(;nc(Nc.charCodeAt(n));)n++;for(;nc(Nc.charCodeAt(i-1));)i--;let r=zc(n,i);r.includes("&")&&(r=Oc.decodeEntities(r,!1)),ou({type:5,content:uu(r,!1,lu(n,i)),loc:lu(e,t)})},onopentagname(e,t){const n=zc(e,t);Fc={type:1,tag:n,ns:Oc.getNamespace(n,Kc[0],Oc.ns),tagType:0,props:[],children:[],loc:lu(e-1,t),codegenNode:void 0}},onopentagend(e){Xc(e)},onclosetag(e,t){const n=zc(e,t);if(!Oc.isVoidTag(n)){let i=!1;for(let e=0;e<Kc.length;e++){if(Kc[e].tag.toLowerCase()===n.toLowerCase()){i=!0,e>0&&hu(24,Kc[0].loc.start.offset);for(let n=0;n<=e;n++){Zc(Kc.shift(),t,n<e)}break}}i||hu(23,Jc(e,60))}},onselfclosingtag(e){var t;const n=Fc.tag;Fc.isSelfClosing=!0,Xc(e),(null==(t=Kc[0])?void 0:t.tag)===n&&Zc(Kc.shift(),e)},onattribname(e,t){Uc={type:6,name:zc(e,t),nameLoc:lu(e,t),value:void 0,loc:lu(e)}},ondirname(e,t){const n=zc(e,t),i="."===n||":"===n?"bind":"@"===n?"on":"#"===n?"slot":n.slice(2);if(Wc||""!==i||hu(26,e),Wc||""===i)Uc={type:6,name:n,nameLoc:lu(e,t),value:void 0,loc:lu(e)};else if(Uc={type:7,name:i,rawName:n,exp:void 0,arg:void 0,modifiers:"."===n?["prop"]:[],loc:lu(e)},"pre"===i){Wc=qc.inVPre=!0,Gc=Fc;const e=Fc.props;for(let t=0;t<e.length;t++)7===e[t].type&&(e[t]=cu(e[t]))}},ondirarg(e,t){if(e===t)return;const n=zc(e,t);if(Wc)Uc.name+=n,du(Uc.nameLoc,t);else{const i="["!==n[0];Uc.arg=uu(i?n:n.slice(1,-1),i,lu(e,t),i?3:0)}},ondirmodifier(e,t){const n=zc(e,t);if(Wc)Uc.name+="."+n,du(Uc.nameLoc,t);else if("slot"===Uc.name){const e=Uc.arg;e&&(e.content+="."+n,du(e.loc,t))}else Uc.modifiers.push(n)},onattribdata(e,t){Bc+=zc(e,t),$c<0&&($c=e),Hc=t},onattribentity(e,t,n){Bc+=e,$c<0&&($c=t),Hc=n},onattribnameend(e){const t=Uc.loc.start.offset,n=zc(t,e);7===Uc.type&&(Uc.rawName=n),Fc.props.some((e=>(7===e.type?e.rawName:e.name)===n))&&hu(2,t)},onattribend(e,t){if(Fc&&Uc){if(du(Uc.loc,t),0!==e)if(Bc.includes("&")&&(Bc=Oc.decodeEntities(Bc,!0)),6===Uc.type)"class"===Uc.name&&(Bc=au(Bc).trim()),1!==e||Bc||hu(13,t),Uc.value={type:2,content:Bc,loc:1===e?lu($c,Hc):lu($c-1,Hc+1)},qc.inSFCRoot&&"template"===Fc.tag&&"lang"===Uc.name&&Bc&&"html"!==Bc&&qc.enterRCDATA(rc("</template"),0);else{let e=0;Uc.exp=uu(Bc,!1,lu($c,Hc),0,e),"for"===Uc.name&&(Uc.forParseResult=function(e){const t=e.loc,n=e.content,i=n.match(Dc);if(!i)return;const[,r,s]=i,a=(e,n,i=!1)=>{const r=t.start.offset+n;return uu(e,!1,lu(r,r+e.length),0,i?1:0)},o={source:a(s.trim(),n.indexOf(s,r.length)),value:void 0,key:void 0,index:void 0,finalized:!1};let l=r.trim().replace(Yc,"").trim();const d=r.indexOf(l),c=l.match(jc);if(c){l=l.replace(jc,"").trim();const e=c[1].trim();let t;if(e&&(t=n.indexOf(e,d+l.length),o.key=a(e,t,!0)),c[2]){const i=c[2].trim();i&&(o.index=a(i,n.indexOf(i,o.key?t+e.length:d+l.length),!0))}}l&&(o.value=a(l,d,!0));return o}(Uc.exp));let t=-1;"bind"===Uc.name&&(t=Uc.modifiers.indexOf("sync"))>-1&&lc("COMPILER_V_BIND_SYNC",Oc,Uc.loc,Uc.rawName)&&(Uc.name="model",Uc.modifiers.splice(t,1))}7===Uc.type&&"pre"===Uc.name||Fc.props.push(Uc)}Bc="",$c=Hc=-1},oncomment(e,t){Oc.comments&&ou({type:3,content:zc(e,t),loc:lu(e-4,t+3)})},onend(){const e=Nc.length;for(let t=0;t<Kc.length;t++)Zc(Kc[t],e-1),hu(24,Kc[t].loc.start.offset)},oncdata(e,t){0!==Kc[0].ns?Qc(zc(e,t),e,t):hu(1,e-9)},onprocessinginstruction(e){0===(Kc[0]?Kc[0].ns:Oc.ns)&&hu(21,e-1)}}),jc=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,Yc=/^\(|\)$/g;function zc(e,t){return Nc.slice(e,t)}function Xc(e){qc.inSFCRoot&&(Fc.innerLoc=lu(e+1,e+1)),ou(Fc);const{tag:t,ns:n}=Fc;0===n&&Oc.isPreTag(t)&&Vc++,Oc.isVoidTag(t)?Zc(Fc,e):(Kc.unshift(Fc),1!==n&&2!==n||(qc.inXML=!0)),Fc=null}function Qc(e,t,n){var i;{const t=null==(i=Kc[0])?void 0:i.tag;"script"!==t&&"style"!==t&&e.includes("&")&&(e=Oc.decodeEntities(e,!1))}const r=Kc[0]||Pc,s=r.children[r.children.length-1];2===(null==s?void 0:s.type)?(s.content+=e,du(s.loc,n)):r.children.push({type:2,content:e,loc:lu(t,n)})}function Zc(e,t,n=!1){du(e.loc,n?Jc(t,60):function(e,t){let n=e;for(;Nc.charCodeAt(n)!==t&&n<Nc.length-1;)n++;return n}(t,62)+1),qc.inSFCRoot&&(e.children.length?e.innerLoc.end=u({},e.children[e.children.length-1].loc.end):e.innerLoc.end=u({},e.innerLoc.start),e.innerLoc.source=zc(e.innerLoc.start.offset,e.innerLoc.end.offset));const{tag:i,ns:r}=e;Wc||("slot"===i?e.tagType=2:tu(e)?e.tagType=3:function({tag:e,props:t}){var n;if(Oc.isCustomElement(e))return!1;if("component"===e||function(e){return e>64&&e<91}(e.charCodeAt(0))||mc(e)||(null==(n=Oc.isBuiltInComponent)?void 0:n.call(Oc,e))||Oc.isNativeTag&&!Oc.isNativeTag(e))return!0;for(let e=0;e<t.length;e++){const n=t[e];if(6===n.type){if("is"===n.name&&n.value){if(n.value.content.startsWith("vue:"))return!0;if(lc("COMPILER_IS_ON_ELEMENT",Oc,n.loc))return!0}}else if("bind"===n.name&&_c(n.arg,"is")&&lc("COMPILER_IS_ON_ELEMENT",Oc,n.loc))return!0}return!1}(e)&&(e.tagType=1)),qc.inRCDATA||(e.children=iu(e.children,e.tag)),0===r&&Oc.isPreTag(i)&&Vc--,Gc===e&&(Wc=qc.inVPre=!1,Gc=null),qc.inXML&&0===(Kc[0]?Kc[0].ns:Oc.ns)&&(qc.inXML=!1);{const t=e.props;if(!qc.inSFCRoot&&oc("COMPILER_NATIVE_TEMPLATE",Oc)&&"template"===e.tag&&!tu(e)){const t=Kc[0]||Pc,n=t.children.indexOf(e);t.children.splice(n,1,...e.children)}const n=t.find((e=>6===e.type&&"inline-template"===e.name));n&&lc("COMPILER_INLINE_TEMPLATE",Oc,n.loc)&&e.children.length&&(n.value={type:2,content:zc(e.children[0].loc.start.offset,e.children[e.children.length-1].loc.end.offset),loc:n.loc})}}function Jc(e,t){let n=e;for(;Nc.charCodeAt(n)!==t&&n>=0;)n--;return n}const eu=new Set(["if","else","else-if","for","slot"]);function tu({tag:e,props:t}){if("template"===e)for(let e=0;e<t.length;e++)if(7===t[e].type&&eu.has(t[e].name))return!0;return!1}const nu=/\r\n/g;function iu(e,t){var n,i;const r="preserve"!==Oc.whitespace;let s=!1;for(let t=0;t<e.length;t++){const a=e[t];if(2===a.type)if(Vc)a.content=a.content.replace(nu,"\n");else if(ru(a.content)){const o=null==(n=e[t-1])?void 0:n.type,l=null==(i=e[t+1])?void 0:i.type;!o||!l||r&&(3===o&&(3===l||1===l)||1===o&&(3===l||1===l&&su(a.content)))?(s=!0,e[t]=null):a.content=" "}else r&&(a.content=au(a.content))}if(Vc&&t&&Oc.isPreTag(t)){const t=e[0];t&&2===t.type&&(t.content=t.content.replace(/^\r?\n/,""))}return s?e.filter(Boolean):e}function ru(e){for(let t=0;t<e.length;t++)if(!nc(e.charCodeAt(t)))return!1;return!0}function su(e){for(let t=0;t<e.length;t++){const n=e.charCodeAt(t);if(10===n||13===n)return!0}return!1}function au(e){let t="",n=!1;for(let i=0;i<e.length;i++)nc(e.charCodeAt(i))?n||(t+=" ",n=!0):(t+=e[i],n=!1);return t}function ou(e){(Kc[0]||Pc).children.push(e)}function lu(e,t){return{start:qc.getPos(e),end:null==t?t:qc.getPos(t),source:null==t?t:zc(e,t)}}function du(e,t){e.end=qc.getPos(t),e.source=zc(e.start.offset,t)}function cu(e){const t={type:6,name:e.rawName,nameLoc:lu(e.loc.start.offset,e.loc.start.offset+e.rawName.length),value:void 0,loc:e.loc};if(e.exp){const n=e.exp.loc;n.end.offset<e.loc.end.offset&&(n.start.offset--,n.start.column--,n.end.offset++,n.end.column++),t.value={type:2,content:e.exp.content,loc:n}}return t}function uu(e,t=!1,n,i=0,r=0){return Kd(e,t,n,i)}function hu(e,t,n){Oc.onError(uc(e,lu(t,t)))}function mu(e,t){if(qc.reset(),Fc=null,Uc=null,Bc="",$c=-1,Hc=-1,Kc.length=0,Nc=e,Oc=u({},Mc),t){let e;for(e in t)null!=t[e]&&(Oc[e]=t[e])}qc.mode="html"===Oc.parseMode?1:"sfc"===Oc.parseMode?2:0,qc.inXML=1===Oc.ns||2===Oc.ns;const n=null==t?void 0:t.delimiters;n&&(qc.delimiterOpen=rc(n[0]),qc.delimiterClose=rc(n[1]));const i=Pc=function(e,t=""){return{type:0,source:t,children:e,helpers:new Set,components:[],directives:[],hoists:[],imports:[],cached:0,temps:0,codegenNode:void 0,loc:$d}}([],e);return qc.parse(Nc),i.loc=lu(0,e.length),i.children=iu(i.children),Pc=null,i}function pu(e,t){gu(e,t,fu(e,e.children[0]))}function fu(e,t){const{children:n}=e;return 1===n.length&&1===t.type&&!wc(t)}function gu(e,t,n=!1){const{children:i}=e,r=i.length;let s=0;for(let e=0;e<i.length;e++){const r=i[e];if(1===r.type&&0===r.tagType){const e=n?0:vu(r,t);if(e>0){if(e>=2){r.codegenNode.patchFlag="-1",r.codegenNode=t.hoist(r.codegenNode),s++;continue}}else{const e=r.codegenNode;if(13===e.type){const n=_u(e);if((!n||512===n||1===n)&&Eu(r,t)>=2){const n=Tu(r);n&&(e.props=t.hoist(n))}e.dynamicProps&&(e.dynamicProps=t.hoist(e.dynamicProps))}}}if(1===r.type){const e=1===r.tagType;e&&t.scopes.vSlot++,gu(r,t),e&&t.scopes.vSlot--}else if(11===r.type)gu(r,t,1===r.children.length);else if(9===r.type)for(let e=0;e<r.branches.length;e++)gu(r.branches[e],t,1===r.branches[e].children.length)}if(s&&t.transformHoist&&t.transformHoist(i,t,e),s&&s===r&&1===e.type&&0===e.tagType&&e.codegenNode&&13===e.codegenNode.type&&f(e.codegenNode.children)){const n=t.hoist(Vd(e.codegenNode.children));t.hmr&&(n.content=`[...${n.content}]`),e.codegenNode.children=n}}function vu(e,t){const{constantCache:n}=t;switch(e.type){case 1:if(0!==e.tagType)return 0;const i=n.get(e);if(void 0!==i)return i;const r=e.codegenNode;if(13!==r.type)return 0;if(r.isBlock&&"svg"!==e.tag&&"foreignObject"!==e.tag)return 0;if(_u(r))return n.set(e,0),0;{let i=3;const s=Eu(e,t);if(0===s)return n.set(e,0),0;s<i&&(i=s);for(let r=0;r<e.children.length;r++){const s=vu(e.children[r],t);if(0===s)return n.set(e,0),0;s<i&&(i=s)}if(i>1)for(let r=0;r<e.props.length;r++){const s=e.props[r];if(7===s.type&&"bind"===s.name&&s.exp){const r=vu(s.exp,t);if(0===r)return n.set(e,0),0;r<i&&(i=r)}}if(r.isBlock){for(let t=0;t<e.props.length;t++){if(7===e.props[t].type)return n.set(e,0),0}t.removeHelper(sd),t.removeHelper(Qd(t.inSSR,r.isComponent)),r.isBlock=!1,t.helper(Xd(t.inSSR,r.isComponent))}return n.set(e,i),i}case 2:case 3:return 3;case 9:case 11:case 10:default:return 0;case 5:case 12:return vu(e.content,t);case 4:return e.constType;case 8:let s=3;for(let n=0;n<e.children.length;n++){const i=e.children[n];if(E(i)||T(i))continue;const r=vu(i,t);if(0===r)return 0;r<s&&(s=r)}return s}}const bu=new Set([Ad,Sd,kd,wd]);function yu(e,t){if(14===e.type&&!E(e.callee)&&bu.has(e.callee)){const n=e.arguments[0];if(4===n.type)return vu(n,t);if(14===n.type)return yu(n,t)}return 0}function Eu(e,t){let n=3;const i=Tu(e);if(i&&15===i.type){const{properties:e}=i;for(let i=0;i<e.length;i++){const{key:r,value:s}=e[i],a=vu(r,t);if(0===a)return a;let o;if(a<n&&(n=a),o=4===s.type?vu(s,t):14===s.type?yu(s,t):0,0===o)return o;o<n&&(n=o)}}return n}function Tu(e){const t=e.codegenNode;if(13===t.type)return t.props}function _u(e){const t=e.patchFlag;return t?parseInt(t,10):void 0}function Au(e,{filename:t="",prefixIdentifiers:n=!1,hoistStatic:i=!1,hmr:r=!1,cacheHandlers:a=!1,nodeTransforms:l=[],directiveTransforms:d={},transformHoist:c=null,isBuiltInComponent:u=o,isCustomElement:h=o,expressionPlugins:m=[],scopeId:p=null,slotted:f=!0,ssr:g=!1,inSSR:v=!1,ssrCssVars:b="",bindingMetadata:y=s,inline:T=!1,isTS:_=!1,onError:A=dc,onWarn:S=cc,compatConfig:k}){const w=t.replace(/\?.*$/,"").match(/([^/\\]+)\.\w+$/),L={filename:t,selfName:w&&N(M(w[1])),prefixIdentifiers:n,hoistStatic:i,hmr:r,cacheHandlers:a,nodeTransforms:l,directiveTransforms:d,transformHoist:c,isBuiltInComponent:u,isCustomElement:h,expressionPlugins:m,scopeId:p,slotted:f,ssr:g,inSSR:v,ssrCssVars:b,bindingMetadata:y,inline:T,isTS:_,onError:A,onWarn:S,compatConfig:k,root:e,helpers:new Map,components:new Set,directives:new Set,hoists:[],imports:[],constantCache:new WeakMap,temps:0,cached:0,identifiers:Object.create(null),scopes:{vFor:0,vSlot:0,vPre:0,vOnce:0},parent:null,grandParent:null,currentNode:e,childIndex:0,inVOnce:!1,helper(e){const t=L.helpers.get(e)||0;return L.helpers.set(e,t+1),e},removeHelper(e){const t=L.helpers.get(e);if(t){const n=t-1;n?L.helpers.set(e,n):L.helpers.delete(e)}},helperString:e=>`_${Bd[L.helper(e)]}`,replaceNode(e){L.parent.children[L.childIndex]=L.currentNode=e},removeNode(e){const t=L.parent.children,n=e?t.indexOf(e):L.currentNode?L.childIndex:-1;e&&e!==L.currentNode?L.childIndex>n&&(L.childIndex--,L.onNodeRemoved()):(L.currentNode=null,L.onNodeRemoved()),L.parent.children.splice(n,1)},onNodeRemoved:o,addIdentifiers(e){},removeIdentifiers(e){},hoist(e){E(e)&&(e=Kd(e)),L.hoists.push(e);const t=Kd(`_hoisted_${L.hoists.length}`,!1,e.loc,2);return t.hoisted=e,t},cache:(e,t=!1)=>function(e,t,n=!1){return{type:20,index:e,value:t,isVNode:n,loc:$d}}(L.cached++,e,t)};return L.filters=new Set,L}function Su(e,t){const n=Au(e,t);ku(e,n),t.hoistStatic&&pu(e,n),t.ssr||function(e,t){const{helper:n}=t,{children:i}=e;if(1===i.length){const n=i[0];if(fu(e,n)&&n.codegenNode){const i=n.codegenNode;13===i.type&&Zd(i,t),e.codegenNode=i}else e.codegenNode=n}else if(i.length>1){let i=64;K[64];0,e.codegenNode=Hd(t,n(ed),void 0,e.children,i+"",void 0,void 0,!0,void 0,!1)}}(e,n),e.helpers=new Set([...n.helpers.keys()]),e.components=[...n.components],e.directives=[...n.directives],e.imports=n.imports,e.hoists=n.hoists,e.temps=n.temps,e.cached=n.cached,e.transformed=!0,e.filters=[...n.filters]}function ku(e,t){t.currentNode=e;const{nodeTransforms:n}=t,i=[];for(let r=0;r<n.length;r++){const s=n[r](e,t);if(s&&(f(s)?i.push(...s):i.push(s)),!t.currentNode)return;e=t.currentNode}switch(e.type){case 3:t.ssr||t.helper(cd);break;case 5:t.ssr||t.helper(Td);break;case 9:for(let n=0;n<e.branches.length;n++)ku(e.branches[n],t);break;case 10:case 11:case 1:case 0:!function(e,t){let n=0;const i=()=>{n--};for(;n<e.children.length;n++){const r=e.children[n];E(r)||(t.grandParent=t.parent,t.parent=e,t.childIndex=n,t.onNodeRemoved=i,ku(r,t))}}(e,t)}t.currentNode=e;let r=i.length;for(;r--;)i[r]()}function wu(e,t){const n=E(e)?t=>t===e:t=>e.test(t);return(e,i)=>{if(1===e.type){const{props:r}=e;if(3===e.tagType&&r.some(Sc))return;const s=[];for(let a=0;a<r.length;a++){const o=r[a];if(7===o.type&&n(o.name)){r.splice(a,1),a--;const n=t(e,o,i);n&&s.push(n)}}return s}}}const Lu="/*#__PURE__*/",Ru=e=>`${Bd[e]}: _${Bd[e]}`;function Cu(e,t={}){const n=function(e,{mode:t="function",prefixIdentifiers:n="module"===t,sourceMap:i=!1,filename:r="template.vue.html",scopeId:s=null,optimizeImports:a=!1,runtimeGlobalName:o="Vue",runtimeModuleName:l="vue",ssrRuntimeModuleName:d="vue/server-renderer",ssr:c=!1,isTS:u=!1,inSSR:h=!1}){const m={mode:t,prefixIdentifiers:n,sourceMap:i,filename:r,scopeId:s,optimizeImports:a,runtimeGlobalName:o,runtimeModuleName:l,ssrRuntimeModuleName:d,ssr:c,isTS:u,inSSR:h,source:e.source,code:"",column:1,line:1,offset:0,indentLevel:0,pure:!1,map:void 0,helper:e=>`_${Bd[e]}`,push(e,t=-2,n){m.code+=e},indent(){p(++m.indentLevel)},deindent(e=!1){e?--m.indentLevel:p(--m.indentLevel)},newline(){p(m.indentLevel)}};function p(e){m.push("\n"+"  ".repeat(e),0)}return m}(e,t);t.onContextCreated&&t.onContextCreated(n);const{mode:i,push:r,prefixIdentifiers:s,indent:a,deindent:o,newline:l,scopeId:d,ssr:c}=n,u=Array.from(e.helpers),h=u.length>0,m=!s&&"module"!==i;!function(e,t){const{ssr:n,prefixIdentifiers:i,push:r,newline:s,runtimeModuleName:a,runtimeGlobalName:o,ssrRuntimeModuleName:l}=t,d=o,c=Array.from(e.helpers);if(c.length>0&&(r(`const _Vue = ${d}\n`,-1),e.hoists.length)){r(`const { ${[ld,dd,cd,ud,hd].filter((e=>c.includes(e))).map(Ru).join(", ")} } = _Vue\n`,-1)}(function(e,t){if(!e.length)return;t.pure=!0;const{push:n,newline:i,helper:r,scopeId:s,mode:a}=t;i();for(let r=0;r<e.length;r++){const s=e[r];s&&(n(`const _hoisted_${r+1} = `),Mu(s,t),i())}t.pure=!1})(e.hoists,t),s(),r("return ")}(e,n);if(r(`function ${c?"ssrRender":"render"}(${(c?["_ctx","_push","_parent","_attrs"]:["_ctx","_cache"]).join(", ")}) {`),a(),m&&(r("with (_ctx) {"),a(),h&&(r(`const { ${u.map(Ru).join(", ")} } = _Vue\n`,-1),l())),e.components.length&&(Iu(e.components,"component",n),(e.directives.length||e.temps>0)&&l()),e.directives.length&&(Iu(e.directives,"directive",n),e.temps>0&&l()),e.filters&&e.filters.length&&(l(),Iu(e.filters,"filter",n),l()),e.temps>0){r("let ");for(let t=0;t<e.temps;t++)r(`${t>0?", ":""}_temp${t}`)}return(e.components.length||e.directives.length||e.temps)&&(r("\n",0),l()),c||r("return "),e.codegenNode?Mu(e.codegenNode,n):r("null"),m&&(o(),r("}")),o(),r("}"),{ast:e,code:n.code,preamble:"",map:n.map?n.map.toJSON():void 0}}function Iu(e,t,{helper:n,push:i,newline:r,isTS:s}){const a=n("filter"===t?gd:"component"===t?md:fd);for(let n=0;n<e.length;n++){let o=e[n];const l=o.endsWith("__self");l&&(o=o.slice(0,-6)),i(`const ${xc(o,t)} = ${a}(${JSON.stringify(o)}${l?", true":""})${s?"!":""}`),n<e.length-1&&r()}}function xu(e,t){const n=e.length>3||!1;t.push("["),n&&t.indent(),Du(e,t,n),n&&t.deindent(),t.push("]")}function Du(e,t,n=!1,i=!0){const{push:r,newline:s}=t;for(let a=0;a<e.length;a++){const o=e[a];E(o)?r(o,-3):f(o)?xu(o,t):Mu(o,t),a<e.length-1&&(n?(i&&r(","),s()):i&&r(", "))}}function Mu(e,t){if(E(e))t.push(e,-3);else if(T(e))t.push(t.helper(e));else switch(e.type){case 1:case 9:case 11:case 12:Mu(e.codegenNode,t);break;case 2:!function(e,t){t.push(JSON.stringify(e.content),-3,e)}(e,t);break;case 4:Ou(e,t);break;case 5:!function(e,t){const{push:n,helper:i,pure:r}=t;r&&n(Lu);n(`${i(Td)}(`),Mu(e.content,t),n(")")}(e,t);break;case 8:Pu(e,t);break;case 3:!function(e,t){const{push:n,helper:i,pure:r}=t;r&&n(Lu);n(`${i(cd)}(${JSON.stringify(e.content)})`,-3,e)}(e,t);break;case 13:!function(e,t){const{push:n,helper:i,pure:r}=t,{tag:s,props:a,children:o,patchFlag:l,dynamicProps:d,directives:c,isBlock:u,disableTracking:h,isComponent:m}=e;c&&n(i(vd)+"(");u&&n(`(${i(sd)}(${h?"true":""}), `);r&&n(Lu);const p=u?Qd(t.inSSR,m):Xd(t.inSSR,m);n(i(p)+"(",-2,e),Du(function(e){let t=e.length;for(;t--&&null==e[t];);return e.slice(0,t+1).map((e=>e||"null"))}([s,a,o,l,d]),t),n(")"),u&&n(")");c&&(n(", "),Mu(c,t),n(")"))}(e,t);break;case 14:!function(e,t){const{push:n,helper:i,pure:r}=t,s=E(e.callee)?e.callee:i(e.callee);r&&n(Lu);n(s+"(",-2,e),Du(e.arguments,t),n(")")}(e,t);break;case 15:!function(e,t){const{push:n,indent:i,deindent:r,newline:s}=t,{properties:a}=e;if(!a.length)return void n("{}",-2,e);const o=a.length>1||!1;n(o?"{":"{ "),o&&i();for(let e=0;e<a.length;e++){const{key:i,value:r}=a[e];Nu(i,t),n(": "),Mu(r,t),e<a.length-1&&(n(","),s())}o&&r(),n(o?"}":" }")}(e,t);break;case 17:!function(e,t){xu(e.elements,t)}(e,t);break;case 18:!function(e,t){const{push:n,indent:i,deindent:r}=t,{params:s,returns:a,body:o,newline:l,isSlot:d}=e;d&&n(`_${Bd[Od]}(`);n("(",-2,e),f(s)?Du(s,t):s&&Mu(s,t);n(") => "),(l||o)&&(n("{"),i());a?(l&&n("return "),f(a)?xu(a,t):Mu(a,t)):o&&Mu(o,t);(l||o)&&(r(),n("}"));d&&(e.isNonScopedSlot&&n(", undefined, true"),n(")"))}(e,t);break;case 19:!function(e,t){const{test:n,consequent:i,alternate:r,newline:s}=e,{push:a,indent:o,deindent:l,newline:d}=t;if(4===n.type){const e=!fc(n.content);e&&a("("),Ou(n,t),e&&a(")")}else a("("),Mu(n,t),a(")");s&&o(),t.indentLevel++,s||a(" "),a("? "),Mu(i,t),t.indentLevel--,s&&d(),s||a(" "),a(": ");const c=19===r.type;c||t.indentLevel++;Mu(r,t),c||t.indentLevel--;s&&l(!0)}(e,t);break;case 20:!function(e,t){const{push:n,helper:i,indent:r,deindent:s,newline:a}=t;n(`_cache[${e.index}] || (`),e.isVNode&&(r(),n(`${i(xd)}(-1),`),a());n(`_cache[${e.index}] = `),Mu(e.value,t),e.isVNode&&(n(","),a(),n(`${i(xd)}(1),`),a(),n(`_cache[${e.index}]`),s());n(")")}(e,t);break;case 21:Du(e.body,t,!0,!1)}}function Ou(e,t){const{content:n,isStatic:i}=e;t.push(i?JSON.stringify(n):n,-3,e)}function Pu(e,t){for(let n=0;n<e.children.length;n++){const i=e.children[n];E(i)?t.push(i,-3):Mu(i,t)}}function Nu(e,t){const{push:n}=t;if(8===e.type)n("["),Pu(e,t),n("]");else if(e.isStatic){n(fc(e.content)?e.content:JSON.stringify(e.content),-2,e)}else n(`[${e.content}]`,-3,e)}new RegExp("\\b"+"arguments,await,break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,let,new,return,super,switch,throw,try,var,void,while,with,yield".split(",").join("\\b|\\b")+"\\b");const Fu=wu(/^(if|else|else-if)$/,((e,t,n)=>function(e,t,n,i){if(!("else"===t.name||t.exp&&t.exp.content.trim())){const i=t.exp?t.exp.loc:e.loc;n.onError(uc(28,t.loc)),t.exp=Kd("true",!1,i)}0;if("if"===t.name){const r=Uu(e,t),s={type:9,loc:e.loc,branches:[r]};if(n.replaceNode(s),i)return i(s,r,!0)}else{const r=n.parent.children;let s=r.indexOf(e);for(;s-- >=-1;){const a=r[s];if(a&&3===a.type)n.removeNode(a);else{if(!a||2!==a.type||a.content.trim().length){if(a&&9===a.type){"else-if"===t.name&&void 0===a.branches[a.branches.length-1].condition&&n.onError(uc(30,e.loc)),n.removeNode();const r=Uu(e,t);0,a.branches.push(r);const s=i&&i(a,r,!1);ku(r,n),s&&s(),n.currentNode=null}else n.onError(uc(30,e.loc));break}n.removeNode(a)}}}}(e,t,n,((e,t,i)=>{const r=n.parent.children;let s=r.indexOf(e),a=0;for(;s-- >=0;){const e=r[s];e&&9===e.type&&(a+=e.branches.length)}return()=>{if(i)e.codegenNode=Bu(t,a,n);else{const i=function(e){for(;;)if(19===e.type){if(19!==e.alternate.type)return e;e=e.alternate}else 20===e.type&&(e=e.value)}(e.codegenNode);i.alternate=Bu(t,a+e.branches.length-1,n)}}}))));function Uu(e,t){const n=3===e.tagType;return{type:10,loc:e.loc,condition:"else"===t.name?void 0:t.exp,children:n&&!Ec(e,"for")?e.children:[e],userKey:Tc(e,"key"),isTemplateIf:n}}function Bu(e,t,n){return e.condition?zd(e.condition,$u(e,t,n),jd(n.helper(cd),['""',"true"])):$u(e,t,n)}function $u(e,t,n){const{helper:i}=n,r=Gd("key",Kd(`${t}`,!1,$d,2)),{children:s}=e,a=s[0];if(1!==s.length||1!==a.type){if(1===s.length&&11===a.type){const e=a.codegenNode;return Cc(e,r,n),e}{let t=64;K[64];return Hd(n,i(ed),Wd([r]),s,t+"",void 0,void 0,!0,!1,!1,e.loc)}}{const e=a.codegenNode,t=14===(o=e).type&&o.callee===Fd?o.arguments[1].returns:o;return 13===t.type&&Zd(t,n),Cc(t,r,n),e}var o}const Hu=wu("for",((e,t,n)=>{const{helper:i,removeHelper:r}=n;return function(e,t,n,i){if(!t.exp)return void n.onError(uc(31,t.loc));const r=t.forParseResult;if(!r)return void n.onError(uc(32,t.loc));Vu(r,n);const{addIdentifiers:s,removeIdentifiers:a,scopes:o}=n,{source:l,value:d,key:c,index:u}=r,h={type:11,loc:t.loc,source:l,valueAlias:d,keyAlias:c,objectIndexAlias:u,parseResult:r,children:kc(e)?e.children:[e]};n.replaceNode(h),o.vFor++;const m=i&&i(h);return()=>{o.vFor--,m&&m()}}(e,t,n,(t=>{const s=jd(i(bd),[t.source]),a=kc(e),o=Ec(e,"memo"),l=Tc(e,"key"),d=l&&(6===l.type?Kd(l.value.content,!0):l.exp),c=l?Gd("key",d):null,u=4===t.source.type&&t.source.constType>0,h=u?64:l?128:256;return t.codegenNode=Hd(n,i(ed),void 0,s,h+"",void 0,void 0,!0,!u,!1,e.loc),()=>{let l;const{children:h}=t;const m=1!==h.length||1!==h[0].type,p=wc(e)?e:a&&1===e.children.length&&wc(e.children[0])?e.children[0]:null;if(p?(l=p.codegenNode,a&&c&&Cc(l,c,n)):m?l=Hd(n,i(ed),c?Wd([c]):void 0,e.children,"64",void 0,void 0,!0,void 0,!1):(l=h[0].codegenNode,a&&c&&Cc(l,c,n),l.isBlock!==!u&&(l.isBlock?(r(sd),r(Qd(n.inSSR,l.isComponent))):r(Xd(n.inSSR,l.isComponent))),l.isBlock=!u,l.isBlock?(i(sd),i(Qd(n.inSSR,l.isComponent))):i(Xd(n.inSSR,l.isComponent))),o){const e=Yd(Wu(t.parseResult,[Kd("_cached")]));e.body={type:21,body:[qd(["const _memo = (",o.exp,")"]),qd(["if (_cached",...d?[" && _cached.key === ",d]:[],` && ${n.helperString(Ud)}(_cached, _memo)) return _cached`]),qd(["const _item = ",l]),Kd("_item.memo = _memo"),Kd("return _item")],loc:$d},s.arguments.push(e,Kd("_cache"),Kd(String(n.cached++)))}else s.arguments.push(Yd(Wu(t.parseResult),l,!0))}}))}));function Vu(e,t){e.finalized||(e.finalized=!0)}function Wu({value:e,key:t,index:n},i=[]){return function(e){let t=e.length;for(;t--&&!e[t];);return e.slice(0,t+1).map(((e,t)=>e||Kd("_".repeat(t+1),!1)))}([e,t,n,...i])}const Gu=Kd("undefined",!1),Ku=(e,t)=>{if(1===e.type&&(1===e.tagType||3===e.tagType)){const n=Ec(e,"slot");if(n)return n.exp,t.scopes.vSlot++,()=>{t.scopes.vSlot--}}},qu=(e,t,n,i)=>Yd(e,n,!1,!0,n.length?n[0].loc:i);function ju(e,t,n=qu){t.helper(Od);const{children:i,loc:r}=e,s=[],a=[];let o=t.scopes.vSlot>0||t.scopes.vFor>0;const l=Ec(e,"slot",!0);if(l){const{arg:e,exp:t}=l;e&&!hc(e)&&(o=!0),s.push(Gd(e||Kd("default",!0),n(t,void 0,i,r)))}let d=!1,c=!1;const u=[],h=new Set;let m=0;for(let e=0;e<i.length;e++){const r=i[e];let p;if(!kc(r)||!(p=Ec(r,"slot",!0))){3!==r.type&&u.push(r);continue}if(l){t.onError(uc(37,p.loc));break}d=!0;const{children:f,loc:g}=r,{arg:v=Kd("default",!0),exp:b,loc:y}=p;let E;hc(v)?E=v?v.content:"default":o=!0;const T=Ec(r,"for"),_=n(b,T,f,g);let A,S;if(A=Ec(r,"if"))o=!0,a.push(zd(A.exp,Yu(v,_,m++),Gu));else if(S=Ec(r,/^else(-if)?$/,!0)){let n,r=e;for(;r--&&(n=i[r],3===n.type););if(n&&kc(n)&&Ec(n,"if")){i.splice(e,1),e--;let t=a[a.length-1];for(;19===t.alternate.type;)t=t.alternate;t.alternate=S.exp?zd(S.exp,Yu(v,_,m++),Gu):Yu(v,_,m++)}else t.onError(uc(30,S.loc))}else if(T){o=!0;const e=T.forParseResult;e?(Vu(e),a.push(jd(t.helper(bd),[e.source,Yd(Wu(e),Yu(v,_),!0)]))):t.onError(uc(32,T.loc))}else{if(E){if(h.has(E)){t.onError(uc(38,y));continue}h.add(E),"default"===E&&(c=!0)}s.push(Gd(v,_))}}if(!l){const e=(e,i)=>{const s=n(e,void 0,i,r);return t.compatConfig&&(s.isNonScopedSlot=!0),Gd("default",s)};d?u.length&&u.some((e=>Xu(e)))&&(c?t.onError(uc(39,u[0].loc)):s.push(e(void 0,u))):s.push(e(void 0,i))}const p=o?2:zu(e.children)?3:1;let f=Wd(s.concat(Gd("_",Kd(p+"",!1))),r);return a.length&&(f=jd(t.helper(Ed),[f,Vd(a)])),{slots:f,hasDynamicSlots:o}}function Yu(e,t,n){const i=[Gd("name",e),Gd("fn",t)];return null!=n&&i.push(Gd("key",Kd(String(n),!0))),Wd(i)}function zu(e){for(let t=0;t<e.length;t++){const n=e[t];switch(n.type){case 1:if(2===n.tagType||zu(n.children))return!0;break;case 9:if(zu(n.branches))return!0;break;case 10:case 11:if(zu(n.children))return!0}}return!1}function Xu(e){return 2!==e.type&&12!==e.type||(2===e.type?!!e.content.trim():Xu(e.content))}const Qu=new WeakMap,Zu=(e,t)=>function(){if(1!==(e=t.currentNode).type||0!==e.tagType&&1!==e.tagType)return;const{tag:n,props:i}=e,r=1===e.tagType;let s=r?function(e,t,n=!1){let{tag:i}=e;const r=nh(i),s=Tc(e,"is",!1,!0);if(s)if(r||oc("COMPILER_IS_ON_ELEMENT",t)){let e;if(6===s.type?e=s.value&&Kd(s.value.content,!0):(e=s.exp,e||(e=Kd("is",!1,s.loc))),e)return jd(t.helper(pd),[e])}else 6===s.type&&s.value.content.startsWith("vue:")&&(i=s.value.content.slice(4));const a=mc(i)||t.isBuiltInComponent(i);if(a)return n||t.helper(a),a;return t.helper(md),t.components.add(i),xc(i,"component")}(e,t):`"${n}"`;const a=_(s)&&s.callee===pd;let o,l,d,c,u,h,m=0,p=a||s===td||s===nd||!r&&("svg"===n||"foreignObject"===n);if(i.length>0){const n=Ju(e,t,void 0,r,a);o=n.props,m=n.patchFlag,u=n.dynamicPropNames;const i=n.directives;h=i&&i.length?Vd(i.map((e=>function(e,t){const n=[],i=Qu.get(e);i?n.push(t.helperString(i)):(t.helper(fd),t.directives.add(e.name),n.push(xc(e.name,"directive")));const{loc:r}=e;e.exp&&n.push(e.exp);e.arg&&(e.exp||n.push("void 0"),n.push(e.arg));if(Object.keys(e.modifiers).length){e.arg||(e.exp||n.push("void 0"),n.push("void 0"));const t=Kd("true",!1,r);n.push(Wd(e.modifiers.map((e=>Gd(e,t))),r))}return Vd(n,e.loc)}(e,t)))):void 0,n.shouldUseBlock&&(p=!0)}if(e.children.length>0){s===id&&(p=!0,m|=1024);if(r&&s!==td&&s!==id){const{slots:n,hasDynamicSlots:i}=ju(e,t);l=n,i&&(m|=1024)}else if(1===e.children.length&&s!==td){const n=e.children[0],i=n.type,r=5===i||8===i;r&&0===vu(n,t)&&(m|=1),l=r||2===i?n:e.children}else l=e.children}0!==m&&(d=String(m),u&&u.length&&(c=function(e){let t="[";for(let n=0,i=e.length;n<i;n++)t+=JSON.stringify(e[n]),n<i-1&&(t+=", ");return t+"]"}(u))),e.codegenNode=Hd(t,s,o,l,d,c,h,!!p,!1,r,e.loc)};function Ju(e,t,n=e.props,i,r,s=!1){const{tag:a,loc:o,children:l}=e;let c=[];const u=[],h=[],m=l.length>0;let p=!1,f=0,g=!1,v=!1,b=!1,y=!1,E=!1,_=!1;const A=[],S=e=>{c.length&&(u.push(Wd(eh(c),o)),c=[]),e&&u.push(e)},k=()=>{t.scopes.vFor>0&&c.push(Gd(Kd("ref_for",!0),Kd("true")))},w=({key:e,value:n})=>{if(hc(e)){const s=e.content,a=d(s);if(!a||i&&!r||"onclick"===s.toLowerCase()||"onUpdate:modelValue"===s||C(s)||(y=!0),a&&C(s)&&(_=!0),a&&14===n.type&&(n=n.arguments[0]),20===n.type||(4===n.type||8===n.type)&&vu(n,t)>0)return;"ref"===s?g=!0:"class"===s?v=!0:"style"===s?b=!0:"key"===s||A.includes(s)||A.push(s),!i||"class"!==s&&"style"!==s||A.includes(s)||A.push(s)}else E=!0};for(let r=0;r<n.length;r++){const l=n[r];if(6===l.type){const{loc:e,name:n,nameLoc:i,value:r}=l;let s=!0;if("ref"===n&&(g=!0,k()),"is"===n&&(nh(a)||r&&r.content.startsWith("vue:")||oc("COMPILER_IS_ON_ELEMENT",t)))continue;c.push(Gd(Kd(n,!0,i),Kd(r?r.content:"",s,r?r.loc:e)))}else{const{name:n,arg:r,exp:d,loc:g,modifiers:v}=l,b="bind"===n,y="on"===n;if("slot"===n){i||t.onError(uc(40,g));continue}if("once"===n||"memo"===n)continue;if("is"===n||b&&_c(r,"is")&&(nh(a)||oc("COMPILER_IS_ON_ELEMENT",t)))continue;if(y&&s)continue;if((b&&_c(r,"key")||y&&m&&_c(r,"vue:before-update"))&&(p=!0),b&&_c(r,"ref")&&k(),!r&&(b||y)){if(E=!0,d)if(b){if(k(),S(),oc("COMPILER_V_BIND_OBJECT_ORDER",t)){u.unshift(d);continue}u.push(d)}else S({type:14,loc:g,callee:t.helper(Ld),arguments:i?[d]:[d,"true"]});else t.onError(uc(b?34:35,g));continue}b&&v.includes("prop")&&(f|=32);const _=t.directiveTransforms[n];if(_){const{props:n,needRuntime:i}=_(l,e,t);!s&&n.forEach(w),y&&r&&!hc(r)?S(Wd(n,o)):c.push(...n),i&&(h.push(l),T(i)&&Qu.set(l,i))}else I(n)||(h.push(l),m&&(p=!0))}}let L;if(u.length?(S(),L=u.length>1?jd(t.helper(_d),u,o):u[0]):c.length&&(L=Wd(eh(c),o)),E?f|=16:(v&&!i&&(f|=2),b&&!i&&(f|=4),A.length&&(f|=8),y&&(f|=32)),p||0!==f&&32!==f||!(g||_||h.length>0)||(f|=512),!t.inSSR&&L)switch(L.type){case 15:let e=-1,n=-1,i=!1;for(let t=0;t<L.properties.length;t++){const r=L.properties[t].key;hc(r)?"class"===r.content?e=t:"style"===r.content&&(n=t):r.isHandlerKey||(i=!0)}const r=L.properties[e],s=L.properties[n];i?L=jd(t.helper(kd),[L]):(r&&!hc(r.value)&&(r.value=jd(t.helper(Ad),[r.value])),s&&(b||4===s.value.type&&"["===s.value.content.trim()[0]||17===s.value.type)&&(s.value=jd(t.helper(Sd),[s.value])));break;case 14:break;default:L=jd(t.helper(kd),[jd(t.helper(wd),[L])])}return{props:L,directives:h,patchFlag:f,dynamicPropNames:A,shouldUseBlock:p}}function eh(e){const t=new Map,n=[];for(let i=0;i<e.length;i++){const r=e[i];if(8===r.key.type||!r.key.isStatic){n.push(r);continue}const s=r.key.content,a=t.get(s);a?("style"===s||"class"===s||d(s))&&th(a,r):(t.set(s,r),n.push(r))}return n}function th(e,t){17===e.value.type?e.value.elements.push(t.value):e.value=Vd([e.value,t.value],e.loc)}function nh(e){return"component"===e||"Component"===e}const ih=(e,t)=>{if(wc(e)){const{children:n,loc:i}=e,{slotName:r,slotProps:s}=function(e,t){let n,i='"default"';const r=[];for(let t=0;t<e.props.length;t++){const n=e.props[t];if(6===n.type)n.value&&("name"===n.name?i=JSON.stringify(n.value.content):(n.name=M(n.name),r.push(n)));else if("bind"===n.name&&_c(n.arg,"name")){if(n.exp)i=n.exp;else if(n.arg&&4===n.arg.type){const e=M(n.arg.content);i=n.exp=Kd(e,!1,n.arg.loc)}}else"bind"===n.name&&n.arg&&hc(n.arg)&&(n.arg.content=M(n.arg.content)),r.push(n)}if(r.length>0){const{props:i,directives:s}=Ju(e,t,r,!1,!1);n=i,s.length&&t.onError(uc(36,s[0].loc))}return{slotName:i,slotProps:n}}(e,t),a=[t.prefixIdentifiers?"_ctx.$slots":"$slots",r,"{}","undefined","true"];let o=2;s&&(a[2]=s,o=3),n.length&&(a[3]=Yd([],n,!1,!1,i),o=4),t.scopeId&&!t.slotted&&(o=5),a.splice(o),e.codegenNode=jd(t.helper(yd),a,i)}};const rh=/^\s*([\w$_]+|(async\s*)?\([^)]*?\))\s*(:[^=]+)?=>|^\s*(async\s+)?function(?:\s+[\w$]+)?\s*\(/,sh=(e,t,n,i)=>{const{loc:r,modifiers:s,arg:a}=e;let o;if(e.exp||s.length||n.onError(uc(35,r)),4===a.type)if(a.isStatic){let e=a.content;0,e.startsWith("vue:")&&(e=`vnode-${e.slice(4)}`);o=Kd(0!==t.tagType||e.startsWith("vnode")||!/[A-Z]/.test(e)?F(M(e)):`on:${e}`,!0,a.loc)}else o=qd([`${n.helperString(Id)}(`,a,")"]);else o=a,o.children.unshift(`${n.helperString(Id)}(`),o.children.push(")");let l=e.exp;l&&!l.content.trim()&&(l=void 0);let d=n.cacheHandlers&&!l&&!n.inVOnce;if(l){const e=yc(l.content),t=!(e||rh.test(l.content)),n=l.content.includes(";");0,(t||d&&e)&&(l=qd([`${t?"$event":"(...args)"} => ${n?"{":"("}`,l,n?"}":")"]))}let c={props:[Gd(o,l||Kd("() => {}",!1,r))]};return i&&(c=i(c)),d&&(c.props[0].value=n.cache(c.props[0].value)),c.props.forEach((e=>e.key.isHandlerKey=!0)),c},ah=(e,t,n)=>{const{modifiers:i,loc:r}=e,s=e.arg;let{exp:a}=e;if(a&&4===a.type&&!a.content.trim()&&(a=void 0),!a){if(4!==s.type||!s.isStatic)return n.onError(uc(52,s.loc)),{props:[Gd(s,Kd("",!0,r))]};const t=M(s.content);a=e.exp=Kd(t,!1,s.loc)}return 4!==s.type?(s.children.unshift("("),s.children.push(') || ""')):s.isStatic||(s.content=`${s.content} || ""`),i.includes("camel")&&(4===s.type?s.isStatic?s.content=M(s.content):s.content=`${n.helperString(Rd)}(${s.content})`:(s.children.unshift(`${n.helperString(Rd)}(`),s.children.push(")"))),n.inSSR||(i.includes("prop")&&oh(s,"."),i.includes("attr")&&oh(s,"^")),{props:[Gd(s,a)]}},oh=(e,t)=>{4===e.type?e.isStatic?e.content=t+e.content:e.content=`\`${t}\${${e.content}}\``:(e.children.unshift(`'${t}' + (`),e.children.push(")"))},lh=(e,t)=>{if(0===e.type||1===e.type||11===e.type||10===e.type)return()=>{const n=e.children;let i,r=!1;for(let e=0;e<n.length;e++){const t=n[e];if(Ac(t)){r=!0;for(let r=e+1;r<n.length;r++){const s=n[r];if(!Ac(s)){i=void 0;break}i||(i=n[e]=qd([t],t.loc)),i.children.push(" + ",s),n.splice(r,1),r--}}}if(r&&(1!==n.length||0!==e.type&&(1!==e.type||0!==e.tagType||e.props.find((e=>7===e.type&&!t.directiveTransforms[e.name]))||"template"===e.tag)))for(let e=0;e<n.length;e++){const i=n[e];if(Ac(i)||8===i.type){const r=[];2===i.type&&" "===i.content||r.push(i),t.ssr||0!==vu(i,t)||r.push("1"),n[e]={type:12,content:i,loc:i.loc,codegenNode:jd(t.helper(ud),r)}}}}},dh=new WeakSet,ch=(e,t)=>{if(1===e.type&&Ec(e,"once",!0)){if(dh.has(e)||t.inVOnce||t.inSSR)return;return dh.add(e),t.inVOnce=!0,t.helper(xd),()=>{t.inVOnce=!1;const e=t.currentNode;e.codegenNode&&(e.codegenNode=t.cache(e.codegenNode,!0))}}},uh=(e,t,n)=>{const{exp:i,arg:r}=e;if(!i)return n.onError(uc(41,e.loc)),hh();const s=i.loc.source,a=4===i.type?i.content:s,o=n.bindingMetadata[s];if("props"===o||"props-aliased"===o)return n.onError(uc(44,i.loc)),hh();if(!a.trim()||!yc(a))return n.onError(uc(42,i.loc)),hh();const l=r||Kd("modelValue",!0),d=r?hc(r)?`onUpdate:${M(r.content)}`:qd(['"onUpdate:" + ',r]):"onUpdate:modelValue";let c;c=qd([`${n.isTS?"($event: any)":"$event"} => ((`,i,") = $event)"]);const u=[Gd(l,e.exp),Gd(d,c)];if(e.modifiers.length&&1===t.tagType){const t=e.modifiers.map((e=>(fc(e)?e:JSON.stringify(e))+": true")).join(", "),n=r?hc(r)?`${r.content}Modifiers`:qd([r,' + "Modifiers"']):"modelModifiers";u.push(Gd(n,Kd(`{ ${t} }`,!1,e.loc,2)))}return hh(u)};function hh(e=[]){return{props:e}}const mh=/[\w).+\-_$\]]/,ph=(e,t)=>{oc("COMPILER_FILTERS",t)&&(5===e.type&&fh(e.content,t),1===e.type&&e.props.forEach((e=>{7===e.type&&"for"!==e.name&&e.exp&&fh(e.exp,t)})))};function fh(e,t){if(4===e.type)gh(e,t);else for(let n=0;n<e.children.length;n++){const i=e.children[n];"object"==typeof i&&(4===i.type?gh(i,t):8===i.type?fh(e,t):5===i.type&&fh(i.content,t))}}function gh(e,t){const n=e.content;let i,r,s,a,o=!1,l=!1,d=!1,c=!1,u=0,h=0,m=0,p=0,f=[];for(s=0;s<n.length;s++)if(r=i,i=n.charCodeAt(s),o)39===i&&92!==r&&(o=!1);else if(l)34===i&&92!==r&&(l=!1);else if(d)96===i&&92!==r&&(d=!1);else if(c)47===i&&92!==r&&(c=!1);else if(124!==i||124===n.charCodeAt(s+1)||124===n.charCodeAt(s-1)||u||h||m){switch(i){case 34:l=!0;break;case 39:o=!0;break;case 96:d=!0;break;case 40:m++;break;case 41:m--;break;case 91:h++;break;case 93:h--;break;case 123:u++;break;case 125:u--}if(47===i){let e,t=s-1;for(;t>=0&&(e=n.charAt(t)," "===e);t--);e&&mh.test(e)||(c=!0)}}else void 0===a?(p=s+1,a=n.slice(0,s).trim()):g();function g(){f.push(n.slice(p,s).trim()),p=s+1}if(void 0===a?a=n.slice(0,s).trim():0!==p&&g(),f.length){for(s=0;s<f.length;s++)a=vh(a,f[s],t);e.content=a}}function vh(e,t,n){n.helper(gd);const i=t.indexOf("(");if(i<0)return n.filters.add(t),`${xc(t,"filter")}(${e})`;{const r=t.slice(0,i),s=t.slice(i+1);return n.filters.add(r),`${xc(r,"filter")}(${e}${")"!==s?","+s:s}`}}const bh=new WeakSet,yh=(e,t)=>{if(1===e.type){const n=Ec(e,"memo");if(!n||bh.has(e))return;return bh.add(e),()=>{const i=e.codegenNode||t.currentNode.codegenNode;i&&13===i.type&&(1!==e.tagType&&Zd(i,t),e.codegenNode=jd(t.helper(Fd),[n.exp,Yd(void 0,i),"_cache",String(t.cached++)]))}}};function Eh(e,t={}){const n=t.onError||dc,i="module"===t.mode;!0===t.prefixIdentifiers?n(uc(47)):i&&n(uc(48));t.cacheHandlers&&n(uc(49)),t.scopeId&&!i&&n(uc(50));const r=u({},t,{prefixIdentifiers:!1}),s=E(e)?mu(e,r):e,[a,o]=[[ch,Fu,yh,Hu,ph,ih,Zu,Ku,lh],{on:sh,bind:ah,model:uh}];return Su(s,u({},r,{nodeTransforms:[...a,...t.nodeTransforms||[]],directiveTransforms:u({},o,t.directiveTransforms||{})})),Cu(s,r)}const Th=Symbol(""),_h=Symbol(""),Ah=Symbol(""),Sh=Symbol(""),kh=Symbol(""),wh=Symbol(""),Lh=Symbol(""),Rh=Symbol(""),Ch=Symbol(""),Ih=Symbol("");var xh;let Dh;xh={[Th]:"vModelRadio",[_h]:"vModelCheckbox",[Ah]:"vModelText",[Sh]:"vModelSelect",[kh]:"vModelDynamic",[wh]:"withModifiers",[Lh]:"withKeys",[Rh]:"vShow",[Ch]:"Transition",[Ih]:"TransitionGroup"},Object.getOwnPropertySymbols(xh).forEach((e=>{Bd[e]=xh[e]}));const Mh={parseMode:"html",isVoidTag:ie,isNativeTag:e=>ee(e)||te(e)||ne(e),isPreTag:e=>"pre"===e,decodeEntities:function(e,t=!1){return Dh||(Dh=document.createElement("div")),t?(Dh.innerHTML=`<div foo="${e.replace(/"/g,"&quot;")}">`,Dh.children[0].getAttribute("foo")):(Dh.innerHTML=e,Dh.textContent)},isBuiltInComponent:e=>"Transition"===e||"transition"===e?Ch:"TransitionGroup"===e||"transition-group"===e?Ih:void 0,getNamespace(e,t,n){let i=t?t.ns:n;if(t&&2===i)if("annotation-xml"===t.tag){if("svg"===e)return 1;t.props.some((e=>6===e.type&&"encoding"===e.name&&null!=e.value&&("text/html"===e.value.content||"application/xhtml+xml"===e.value.content)))&&(i=0)}else/^m(?:[ions]|text)$/.test(t.tag)&&"mglyph"!==e&&"malignmark"!==e&&(i=0);else t&&1===i&&("foreignObject"!==t.tag&&"desc"!==t.tag&&"title"!==t.tag||(i=0));if(0===i){if("svg"===e)return 1;if("math"===e)return 2}return i}},Oh=(e,t)=>{const n=Q(e);return Kd(JSON.stringify(n),!1,t,3)};function Ph(e,t){return uc(e,t)}const Nh=r("passive,once,capture"),Fh=r("stop,prevent,self,ctrl,shift,alt,meta,exact,middle"),Uh=r("left,right"),Bh=r("onkeyup,onkeydown,onkeypress",!0),$h=(e,t)=>hc(e)&&"onclick"===e.content.toLowerCase()?Kd(t,!0):4!==e.type?qd(["(",e,`) === "onClick" ? "${t}" : (`,e,")"]):e;const Hh=(e,t)=>{1!==e.type||0!==e.tagType||"script"!==e.tag&&"style"!==e.tag||t.removeNode()},Vh=[e=>{1===e.type&&e.props.forEach(((t,n)=>{6===t.type&&"style"===t.name&&t.value&&(e.props[n]={type:7,name:"bind",arg:Kd("style",!0,t.loc),exp:Oh(t.value.content,t.loc),modifiers:[],loc:t.loc})}))}],Wh={cloak:()=>({props:[]}),html:(e,t,n)=>{const{exp:i,loc:r}=e;return i||n.onError(Ph(53,r)),t.children.length&&(n.onError(Ph(54,r)),t.children.length=0),{props:[Gd(Kd("innerHTML",!0,r),i||Kd("",!0))]}},text:(e,t,n)=>{const{exp:i,loc:r}=e;return i||n.onError(Ph(55,r)),t.children.length&&(n.onError(Ph(56,r)),t.children.length=0),{props:[Gd(Kd("textContent",!0),i?vu(i,n)>0?i:jd(n.helperString(Td),[i],r):Kd("",!0))]}},model:(e,t,n)=>{const i=uh(e,t,n);if(!i.props.length||1===t.tagType)return i;e.arg&&n.onError(Ph(58,e.arg.loc));const{tag:r}=t,s=n.isCustomElement(r);if("input"===r||"textarea"===r||"select"===r||s){let a=Ah,o=!1;if("input"===r||s){const i=Tc(t,"type");if(i){if(7===i.type)a=kh;else if(i.value)switch(i.value.content){case"radio":a=Th;break;case"checkbox":a=_h;break;case"file":o=!0,n.onError(Ph(59,e.loc))}}else(function(e){return e.props.some((e=>!(7!==e.type||"bind"!==e.name||e.arg&&4===e.arg.type&&e.arg.isStatic)))})(t)&&(a=kh)}else"select"===r&&(a=Sh);o||(i.needRuntime=n.helper(a))}else n.onError(Ph(57,e.loc));return i.props=i.props.filter((e=>!(4===e.key.type&&"modelValue"===e.key.content))),i},on:(e,t,n)=>sh(e,t,n,(t=>{const{modifiers:i}=e;if(!i.length)return t;let{key:r,value:s}=t.props[0];const{keyModifiers:a,nonKeyModifiers:o,eventOptionModifiers:l}=((e,t,n,i)=>{const r=[],s=[],a=[];for(let i=0;i<t.length;i++){const o=t[i];"native"===o&&lc("COMPILER_V_ON_NATIVE",n)||Nh(o)?a.push(o):Uh(o)?hc(e)?Bh(e.content)?r.push(o):s.push(o):(r.push(o),s.push(o)):Fh(o)?s.push(o):r.push(o)}return{keyModifiers:r,nonKeyModifiers:s,eventOptionModifiers:a}})(r,i,n,e.loc);if(o.includes("right")&&(r=$h(r,"onContextmenu")),o.includes("middle")&&(r=$h(r,"onMouseup")),o.length&&(s=jd(n.helper(wh),[s,JSON.stringify(o)])),!a.length||hc(r)&&!Bh(r.content)||(s=jd(n.helper(Lh),[s,JSON.stringify(a)])),l.length){const e=l.map(N).join("");r=hc(r)?Kd(`${r.content}${e}`,!0):qd(["(",r,`) + "${e}"`])}return{props:[Gd(r,s)]}})),show:(e,t,n)=>{const{exp:i,loc:r}=e;return i||n.onError(Ph(61,r)),{props:[],needRuntime:n.helper(Rh)}}};const Gh=new WeakMap;Ga((function(e,t){if(!E(e)){if(!e.nodeType)return o;e=e.innerHTML}const n=e,r=function(e){let t=Gh.get(null!=e?e:s);return t||(t=Object.create(null),Gh.set(null!=e?e:s,t)),t}(t),a=r[n];if(a)return a;if("#"===e[0]){const t=document.querySelector(e);0,e=t?t.innerHTML:""}const l=u({hoistStatic:!0,onError:void 0,onWarn:o},t);l.isCustomElement||"undefined"==typeof customElements||(l.isCustomElement=e=>!!customElements.get(e));const{code:d}=function(e,t={}){return Eh(e,u({},Mh,t,{nodeTransforms:[Hh,...Vh,...t.nodeTransforms||[]],directiveTransforms:u({},Wh,t.directiveTransforms||{}),transformHoist:null}))}(e,l),c=new Function("Vue",d)(i);return c._rc=!0,r[n]=c}));var Kh={key:1,class:""},qh=["name","value"];const jh={MEDIA_PLAY_REQUEST:"mediaplayrequest",MEDIA_PAUSE_REQUEST:"mediapauserequest",MEDIA_MUTE_REQUEST:"mediamuterequest",MEDIA_UNMUTE_REQUEST:"mediaunmuterequest",MEDIA_VOLUME_REQUEST:"mediavolumerequest",MEDIA_SEEK_REQUEST:"mediaseekrequest",MEDIA_AIRPLAY_REQUEST:"mediaairplayrequest",MEDIA_ENTER_FULLSCREEN_REQUEST:"mediaenterfullscreenrequest",MEDIA_EXIT_FULLSCREEN_REQUEST:"mediaexitfullscreenrequest",MEDIA_PREVIEW_REQUEST:"mediapreviewrequest",MEDIA_ENTER_PIP_REQUEST:"mediaenterpiprequest",MEDIA_EXIT_PIP_REQUEST:"mediaexitpiprequest",MEDIA_ENTER_CAST_REQUEST:"mediaentercastrequest",MEDIA_EXIT_CAST_REQUEST:"mediaexitcastrequest",MEDIA_SHOW_TEXT_TRACKS_REQUEST:"mediashowtexttracksrequest",MEDIA_HIDE_TEXT_TRACKS_REQUEST:"mediahidetexttracksrequest",MEDIA_SHOW_SUBTITLES_REQUEST:"mediashowsubtitlesrequest",MEDIA_DISABLE_SUBTITLES_REQUEST:"mediadisablesubtitlesrequest",MEDIA_TOGGLE_SUBTITLES_REQUEST:"mediatogglesubtitlesrequest",MEDIA_PLAYBACK_RATE_REQUEST:"mediaplaybackraterequest",MEDIA_RENDITION_REQUEST:"mediarenditionrequest",MEDIA_AUDIO_TRACK_REQUEST:"mediaaudiotrackrequest",MEDIA_SEEK_TO_LIVE_REQUEST:"mediaseektoliverequest",REGISTER_MEDIA_STATE_RECEIVER:"registermediastatereceiver",UNREGISTER_MEDIA_STATE_RECEIVER:"unregistermediastatereceiver"},Yh={MEDIA_CHROME_ATTRIBUTES:"mediachromeattributes",MEDIA_CONTROLLER:"mediacontroller"},zh={MEDIA_AIRPLAY_UNAVAILABLE:"mediaAirplayUnavailable",MEDIA_FULLSCREEN_UNAVAILABLE:"mediaFullscreenUnavailable",MEDIA_PIP_UNAVAILABLE:"mediaPipUnavailable",MEDIA_CAST_UNAVAILABLE:"mediaCastUnavailable",MEDIA_RENDITION_UNAVAILABLE:"mediaRenditionUnavailable",MEDIA_AUDIO_TRACK_UNAVAILABLE:"mediaAudioTrackUnavailable",MEDIA_PAUSED:"mediaPaused",MEDIA_HAS_PLAYED:"mediaHasPlayed",MEDIA_ENDED:"mediaEnded",MEDIA_MUTED:"mediaMuted",MEDIA_VOLUME_LEVEL:"mediaVolumeLevel",MEDIA_VOLUME:"mediaVolume",MEDIA_VOLUME_UNAVAILABLE:"mediaVolumeUnavailable",MEDIA_IS_PIP:"mediaIsPip",MEDIA_IS_CASTING:"mediaIsCasting",MEDIA_IS_AIRPLAYING:"mediaIsAirplaying",MEDIA_SUBTITLES_LIST:"mediaSubtitlesList",MEDIA_SUBTITLES_SHOWING:"mediaSubtitlesShowing",MEDIA_IS_FULLSCREEN:"mediaIsFullscreen",MEDIA_PLAYBACK_RATE:"mediaPlaybackRate",MEDIA_CURRENT_TIME:"mediaCurrentTime",MEDIA_DURATION:"mediaDuration",MEDIA_SEEKABLE:"mediaSeekable",MEDIA_PREVIEW_TIME:"mediaPreviewTime",MEDIA_PREVIEW_IMAGE:"mediaPreviewImage",MEDIA_PREVIEW_COORDS:"mediaPreviewCoords",MEDIA_PREVIEW_CHAPTER:"mediaPreviewChapter",MEDIA_LOADING:"mediaLoading",MEDIA_BUFFERED:"mediaBuffered",MEDIA_STREAM_TYPE:"mediaStreamType",MEDIA_TARGET_LIVE_WINDOW:"mediaTargetLiveWindow",MEDIA_TIME_IS_LIVE:"mediaTimeIsLive",MEDIA_RENDITION_LIST:"mediaRenditionList",MEDIA_RENDITION_SELECTED:"mediaRenditionSelected",MEDIA_AUDIO_TRACK_LIST:"mediaAudioTrackList",MEDIA_AUDIO_TRACK_ENABLED:"mediaAudioTrackEnabled",MEDIA_CHAPTERS_CUES:"mediaChaptersCues"},Xh=Object.entries(zh),Qh=Xh.reduce(((e,[t,n])=>(e[t]=`${n.toLowerCase()}`,e)),{}),Zh=Xh.reduce(((e,[t,n])=>(e[t]=`${n.toLowerCase()}`,e)),{USER_INACTIVE:"userinactivechange",BREAKPOINTS_CHANGE:"breakpointchange",BREAKPOINTS_COMPUTED:"breakpointscomputed"}),Jh=(Object.entries(Zh).reduce(((e,[t,n])=>{const i=Qh[t];return i&&(e[n]=i),e}),{userinactivechange:"userinactive"}),Object.entries(Qh).reduce(((e,[t,n])=>{const i=Zh[t];return i&&(e[n]=i),e}),{userinactive:"userinactivechange"})),em={SUBTITLES:"subtitles",CAPTIONS:"captions",DESCRIPTIONS:"descriptions",CHAPTERS:"chapters",METADATA:"metadata"},tm="disabled",nm="showing",im="mouse",rm="touch",sm="unavailable",am="unsupported",om={LIVE:"live",ON_DEMAND:"on-demand",UNKNOWN:"unknown"},lm="fullscreen",dm={AUDIO_PLAYER:()=>"audio player",VIDEO_PLAYER:()=>"video player",VOLUME:()=>"volume",SEEK:()=>"seek",CLOSED_CAPTIONS:()=>"closed captions",PLAYBACK_RATE:({playbackRate:e=1}={})=>`current playback rate ${e}`,PLAYBACK_TIME:()=>"playback time",MEDIA_LOADING:()=>"media loading",SETTINGS:()=>"settings",AUDIO_TRACKS:()=>"audio tracks",QUALITY:()=>"quality"},cm={PLAY:()=>"play",PAUSE:()=>"pause",MUTE:()=>"mute",UNMUTE:()=>"unmute",ENTER_AIRPLAY:()=>"start airplay",EXIT_AIRPLAY:()=>"stop airplay",ENTER_CAST:()=>"start casting",EXIT_CAST:()=>"stop casting",ENTER_FULLSCREEN:()=>"enter fullscreen mode",EXIT_FULLSCREEN:()=>"exit fullscreen mode",ENTER_PIP:()=>"enter picture in picture mode",EXIT_PIP:()=>"exit picture in picture mode",SEEK_FORWARD_N_SECS:({seekOffset:e=30}={})=>`seek forward ${e} seconds`,SEEK_BACK_N_SECS:({seekOffset:e=30}={})=>`seek back ${e} seconds`,SEEK_LIVE:()=>"seek to live",PLAYING_LIVE:()=>"playing live"};function um(e){return null==e?void 0:e.split(/\s+/).map(mm)}function hm(e){if(e){const{id:t,width:n,height:i}=e;return[t,n,i].filter((e=>null!=e)).join(":")}}function mm(e){if(e){const[t,n,i]=e.split(":");return{id:t,width:n,height:i}}}function pm(e){return null==e?void 0:e.split(/\s+/).map(gm)}function fm(e){if(e){const{id:t,kind:n,language:i,label:r}=e;return[t,n,i,r].filter((e=>null!=e)).join(":")}}function gm(e){if(e){const[t,n,i,r]=e.split(":");return{id:t,kind:n,language:i,label:r}}}function vm(e){return e.replace(/[-_]([a-z])/g,((e,t)=>t.toUpperCase()))}function bm(e){return"string"==typeof e&&(!isNaN(e)&&!isNaN(parseFloat(e)))}const ym=e=>new Promise((t=>setTimeout(t,e))),Em=[{singular:"hour",plural:"hours"},{singular:"minute",plural:"minutes"},{singular:"second",plural:"seconds"}],Tm=e=>{if(!function(e){return"number"==typeof e&&!Number.isNaN(e)&&Number.isFinite(e)}(e))return"";const t=Math.abs(e),n=t!==e,i=new Date(0,0,0,0,0,t,0),r=[i.getHours(),i.getMinutes(),i.getSeconds()].map(((e,t)=>e&&((e,t)=>`${e} ${1===e?Em[t].singular:Em[t].plural}`)(e,t))).filter((e=>e)).join(", ");return`${r}${n?" remaining":""}`};function _m(e,t){let n=!1;e<0&&(n=!0,e=0-e),e=e<0?0:e;let i=Math.floor(e%60),r=Math.floor(e/60%60),s=Math.floor(e/3600);const a=Math.floor(t/60%60),o=Math.floor(t/3600);return(isNaN(e)||e===1/0)&&(s=r=i="0"),s=s>0||o>0?s+":":"",r=((s||a>=10)&&r<10?"0"+r:r)+":",i=i<10?"0"+i:i,(n?"-":"")+s+r+i}Object.freeze({length:0,start(e){const t=e>>>0;if(t>=this.length)throw new DOMException(`Failed to execute 'start' on 'TimeRanges': The index provided (${t}) is greater than or equal to the maximum bound (${this.length}).`);return 0},end(e){const t=e>>>0;if(t>=this.length)throw new DOMException(`Failed to execute 'end' on 'TimeRanges': The index provided (${t}) is greater than or equal to the maximum bound (${this.length}).`);return 0}});class Am{addEventListener(){}removeEventListener(){}dispatchEvent(){return!0}}class Sm extends Am{}const km={createElement:function(){return new wm.HTMLElement},createElementNS:function(){return new wm.HTMLElement},addEventListener(){},removeEventListener(){},dispatchEvent:e=>!1},wm={ResizeObserver:class{observe(){}unobserve(){}disconnect(){}},document:km,Node:Sm,HTMLElement:class extends Sm{},DocumentFragment:class extends Am{},customElements:{get:function(){},define:function(){},whenDefined:function(){}},localStorage:{getItem:e=>null,setItem(e,t){},removeItem(e){}},CustomEvent:function(){},getComputedStyle:function(){},navigator:{languages:[],get userAgent(){return""}},matchMedia:e=>({matches:!1,media:e})},Lm="undefined"==typeof window||void 0===window.customElements,Rm=Object.keys(wm).every((e=>e in globalThis)),Cm=Lm&&!Rm?wm:globalThis,Im=Lm&&!Rm?km:globalThis.document,xm=new WeakMap,Dm=e=>{let t=xm.get(e);return t||xm.set(e,t=new Set),t},Mm=new Cm.ResizeObserver((e=>{for(let t of e)for(let e of Dm(t.target))e(t)}));function Om(e,t){Dm(e).add(t),Mm.observe(e)}function Pm(e,t){const n=Dm(e);n.delete(t),n.size||Mm.unobserve(e)}function Nm(e){var t;return null!=(t=Fm(e))?t:Hm(e,"media-controller")}function Fm(e){var t;const{MEDIA_CONTROLLER:n}=Yh,i=e.getAttribute(n);if(i)return null==(t=Wm(e))?void 0:t.getElementById(i)}const Um=(e,t,n=".value")=>{const i=e.querySelector(n);i&&(i.textContent=t)},Bm=(e,t)=>((e,t)=>{const n=`slot[name="${t}"]`,i=e.shadowRoot.querySelector(n);return i?i.children:[]})(e,t)[0],$m=(e,t)=>!(!e||!t)&&(!!(null==e?void 0:e.contains(t))||$m(e,t.getRootNode().host)),Hm=(e,t)=>{if(!e)return null;const n=e.closest(t);return n||Hm(e.getRootNode().host,t)};function Vm(e=document){var t;const n=null==e?void 0:e.activeElement;return n?null!=(t=Vm(n.shadowRoot))?t:n:null}function Wm(e){var t;const n=null==(t=null==e?void 0:e.getRootNode)?void 0:t.call(e);return n instanceof ShadowRoot||n instanceof Document?n:null}function Gm(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Km(e,t){const n=function(e,t){var n;let i;for(i of e.querySelectorAll("style")){let e;try{e=null==(n=i.sheet)?void 0:n.cssRules}catch{continue}for(let n of null!=e?e:[])if(t(n.selectorText))return n}}(e,(e=>e===t));return n||qm(e,t)}function qm(e,t){var n,i;const r=null!=(n=e.querySelectorAll("style"))?n:[],s=null==r?void 0:r[r.length-1];return(null==s?void 0:s.sheet)?(null==s||s.sheet.insertRule(`${t}{}`,s.sheet.cssRules.length),null==(i=s.sheet.cssRules)?void 0:i[s.sheet.cssRules.length-1]):(console.warn("Media Chrome: No style sheet found on style tag of",e),{style:{setProperty:()=>{},removeProperty:()=>"",getPropertyValue:()=>""}})}function jm(e,t,n=Number.NaN){const i=e.getAttribute(t);return null!=i?+i:n}function Ym(e,t,n){const i=+n;null==n||Number.isNaN(i)?e.hasAttribute(t)&&e.removeAttribute(t):jm(e,t,void 0)!==i&&e.setAttribute(t,`${i}`)}function zm(e,t){return e.hasAttribute(t)}function Xm(e,t,n){null!=n?zm(e,t)!=n&&e.toggleAttribute(t,n):e.hasAttribute(t)&&e.removeAttribute(t)}function Qm(e,t,n=null){var i;return null!=(i=e.getAttribute(t))?i:n}function Zm(e,t,n){if(null==n)return void(e.hasAttribute(t)&&e.removeAttribute(t));const i=`${n}`;Qm(e,t,void 0)!==i&&e.setAttribute(t,i)}var Jm,ep=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},tp=(e,t,n)=>(ep(e,t,"read from private field"),n?n.call(e):t.get(e)),np=(e,t,n,i)=>(ep(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n);const ip=Im.createElement("template");ip.innerHTML="\n<style>\n  :host {\n    display: var(--media-control-display, var(--media-gesture-receiver-display, inline-block));\n    box-sizing: border-box;\n  }\n</style>\n";class rp extends Cm.HTMLElement{constructor(e={}){if(super(),((e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)})(this,Jm,void 0),!this.shadowRoot){const t=this.attachShadow({mode:"open"}),n=ip.content.cloneNode(!0);this.nativeEl=n;let i=e.slotTemplate;i||(i=Im.createElement("template"),i.innerHTML=`<slot>${e.defaultContent||""}</slot>`),this.nativeEl.appendChild(i.content.cloneNode(!0)),t.appendChild(n)}}static get observedAttributes(){return[Yh.MEDIA_CONTROLLER,Qh.MEDIA_PAUSED]}attributeChangedCallback(e,t,n){var i,r,s,a,o;e===Yh.MEDIA_CONTROLLER&&(t&&(null==(r=null==(i=tp(this,Jm))?void 0:i.unassociateElement)||r.call(i,this),np(this,Jm,null)),n&&this.isConnected&&(np(this,Jm,null==(s=this.getRootNode())?void 0:s.getElementById(n)),null==(o=null==(a=tp(this,Jm))?void 0:a.associateElement)||o.call(a,this)))}connectedCallback(){var e,t,n,i;this.tabIndex=-1,this.setAttribute("aria-hidden","true"),np(this,Jm,function(e){var t;const n=e.getAttribute(Yh.MEDIA_CONTROLLER);if(n)return null==(t=e.getRootNode())?void 0:t.getElementById(n);return Hm(e,"media-controller")}(this)),this.getAttribute(Yh.MEDIA_CONTROLLER)&&(null==(t=null==(e=tp(this,Jm))?void 0:e.associateElement)||t.call(e,this)),null==(n=tp(this,Jm))||n.addEventListener("pointerdown",this),null==(i=tp(this,Jm))||i.addEventListener("click",this)}disconnectedCallback(){var e,t,n,i;this.getAttribute(Yh.MEDIA_CONTROLLER)&&(null==(t=null==(e=tp(this,Jm))?void 0:e.unassociateElement)||t.call(e,this)),null==(n=tp(this,Jm))||n.removeEventListener("pointerdown",this),null==(i=tp(this,Jm))||i.removeEventListener("click",this),np(this,Jm,null)}handleEvent(e){var t;const n=null==(t=e.composedPath())?void 0:t[0];if(["video","media-controller"].includes(null==n?void 0:n.localName))if("pointerdown"===e.type)this._pointerType=e.pointerType;else if("click"===e.type){const{clientX:t,clientY:n}=e,{left:i,top:r,width:s,height:a}=this.getBoundingClientRect(),o=t-i,l=n-r;if(o<0||l<0||o>s||l>a||0===s&&0===a)return;const{pointerType:d=this._pointerType}=e;if(this._pointerType=void 0,d===rm)return void this.handleTap(e);if(d===im)return void this.handleMouseClick(e)}}get mediaPaused(){return zm(this,Qh.MEDIA_PAUSED)}set mediaPaused(e){Xm(this,Qh.MEDIA_PAUSED,e)}handleTap(e){}handleMouseClick(e){const t=this.mediaPaused?jh.MEDIA_PLAY_REQUEST:jh.MEDIA_PAUSE_REQUEST;this.dispatchEvent(new Cm.CustomEvent(t,{composed:!0,bubbles:!0}))}}Jm=new WeakMap,Cm.customElements.get("media-gesture-receiver")||Cm.customElements.define("media-gesture-receiver",rp);var sp,ap,op,lp,dp,cp,up,hp,mp,pp,fp,gp,vp=Object.defineProperty,bp=(e,t,n)=>(((e,t,n)=>{t in e?vp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n),yp=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Ep=(e,t,n)=>(yp(e,t,"read from private field"),n?n.call(e):t.get(e)),Tp=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},_p=(e,t,n,i)=>(yp(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),Ap=(e,t,n)=>(yp(e,t,"access private method"),n);const Sp={AUDIO:"audio",AUTOHIDE:"autohide",BREAKPOINTS:"breakpoints",GESTURES_DISABLED:"gesturesdisabled",KEYBOARD_CONTROL:"keyboardcontrol",NO_AUTOHIDE:"noautohide",USER_INACTIVE:"userinactive"},kp=Im.createElement("template");kp.innerHTML=`\n  <style>\n    \n    :host([${Qh.MEDIA_IS_FULLSCREEN}]) ::slotted([slot=media]) {\n      outline: none;\n    }\n\n    :host {\n      box-sizing: border-box;\n      position: relative;\n      display: inline-block;\n      line-height: 0;\n      background-color: var(--media-background-color, #000);\n    }\n\n    :host(:not([${Sp.AUDIO}])) [part~=layer]:not([part~=media-layer]) {\n      position: absolute;\n      top: 0;\n      left: 0;\n      bottom: 0;\n      right: 0;\n      display: flex;\n      flex-flow: column nowrap;\n      align-items: start;\n      pointer-events: none;\n      background: none;\n    }\n\n    slot[name=media] {\n      display: var(--media-slot-display, contents);\n    }\n\n    \n    :host([${Sp.AUDIO}]) slot[name=media] {\n      display: var(--media-slot-display, none);\n    }\n\n    \n    :host([${Sp.AUDIO}]) [part~=layer][part~=gesture-layer] {\n      height: 0;\n      display: block;\n    }\n\n    \n    :host(:not([${Sp.AUDIO}])[${Sp.GESTURES_DISABLED}]) ::slotted([slot=gestures-chrome]),\n    :host(:not([${Sp.AUDIO}])[${Sp.GESTURES_DISABLED}]) media-gesture-receiver[slot=gestures-chrome] {\n      display: none;\n    }\n\n    \n    ::slotted(:not([slot=media]):not([slot=poster]):not(media-loading-indicator):not([hidden])) {\n      pointer-events: auto;\n    }\n\n    :host(:not([${Sp.AUDIO}])) *[part~=layer][part~=centered-layer] {\n      align-items: center;\n      justify-content: center;\n    }\n\n    :host(:not([${Sp.AUDIO}])) ::slotted(media-gesture-receiver[slot=gestures-chrome]),\n    :host(:not([${Sp.AUDIO}])) media-gesture-receiver[slot=gestures-chrome] {\n      align-self: stretch;\n      flex-grow: 1;\n    }\n\n    slot[name=middle-chrome] {\n      display: inline;\n      flex-grow: 1;\n      pointer-events: none;\n      background: none;\n    }\n\n    \n    ::slotted([slot=media]),\n    ::slotted([slot=poster]) {\n      width: 100%;\n      height: 100%;\n    }\n\n    \n    :host(:not([${Sp.AUDIO}])) .spacer {\n      flex-grow: 1;\n    }\n\n    \n    :host(:-webkit-full-screen) {\n      \n      width: 100% !important;\n      height: 100% !important;\n    }\n\n    \n    ::slotted(:not([slot=media]):not([slot=poster]):not([${Sp.NO_AUTOHIDE}]):not([hidden])) {\n      opacity: 1;\n      transition: opacity 0.25s;\n    }\n\n    \n    :host([${Sp.USER_INACTIVE}]:not([${Qh.MEDIA_PAUSED}]):not([${Qh.MEDIA_IS_AIRPLAYING}]):not([${Qh.MEDIA_IS_CASTING}]):not([${Sp.AUDIO}])) ::slotted(:not([slot=media]):not([slot=poster]):not([${Sp.NO_AUTOHIDE}])) {\n      opacity: 0;\n      transition: opacity 1s;\n    }\n\n    :host([${Sp.USER_INACTIVE}]:not([${Qh.MEDIA_PAUSED}]):not([${Qh.MEDIA_IS_CASTING}]):not([${Sp.AUDIO}])) ::slotted([slot=media]) {\n      cursor: none;\n    }\n\n    ::slotted(media-control-bar)  {\n      align-self: stretch;\n    }\n\n    \n    :host(:not([${Sp.AUDIO}])[${Qh.MEDIA_HAS_PLAYED}]) slot[name=poster] {\n      display: none;\n    }\n\n    ::slotted([role="menu"]) {\n      align-self: end;\n    }\n\n    ::slotted([role="dialog"]) {\n      align-self: center;\n    }\n  </style>\n\n  <slot name="media" part="layer media-layer"></slot>\n  <slot name="poster" part="layer poster-layer"></slot>\n  <slot name="gestures-chrome" part="layer gesture-layer">\n    <media-gesture-receiver slot="gestures-chrome"></media-gesture-receiver>\n  </slot>\n  <span part="layer vertical-layer">\n    <slot name="top-chrome" part="top chrome"></slot>\n    <slot name="middle-chrome" part="middle chrome"></slot>\n    <slot name="centered-chrome" part="layer centered-layer center centered chrome"></slot>\n    \n    <slot part="bottom chrome"></slot>\n  </span>\n`;const wp=Object.values(Qh),Lp="sm:384 md:576 lg:768 xl:960";function Rp(e){!function(e,t){var n;if(!e.isConnected)return;const i=null!=(n=e.getAttribute(Sp.BREAKPOINTS))?n:Lp,r=function(e){const t=e.split(/\s+/);return Object.fromEntries(t.map((e=>e.split(":"))))}(i),s=function(e,t){return Object.keys(e).filter((n=>t>=e[n]))}(r,t);let a=!1;if(Object.keys(r).forEach((t=>{s.includes(t)?e.hasAttribute(`breakpoint${t}`)||(e.setAttribute(`breakpoint${t}`,""),a=!0):e.hasAttribute(`breakpoint${t}`)&&(e.removeAttribute(`breakpoint${t}`),a=!0)})),a){const t=new CustomEvent(Zh.BREAKPOINTS_CHANGE,{detail:s});e.dispatchEvent(t)}}(e.target,e.contentRect.width)}class Cp extends Cm.HTMLElement{constructor(){super(),Tp(this,op),Tp(this,dp),Tp(this,up),Tp(this,mp),Tp(this,fp),Tp(this,sp,0),Tp(this,ap,void 0),bp(this,"breakpointsComputed",!1),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(kp.content.cloneNode(!0)));new MutationObserver((e=>{const t=this.media;for(let n of e)"childList"===n.type&&(n.removedNodes.forEach((e=>{if("media"==e.slot&&n.target==this){let i=n.previousSibling&&n.previousSibling.previousElementSibling;if(i&&t){let t="media"!==i.slot;for(;null!==(i=i.previousSibling);)"media"==i.slot&&(t=!1);t&&this.mediaUnsetCallback(e)}else this.mediaUnsetCallback(e)}})),t&&n.addedNodes.forEach((e=>{e===t&&this.handleMediaUpdated(t)})))})).observe(this,{childList:!0,subtree:!0});let e=!1;Om(this,(t=>{e||(setTimeout((()=>{Rp(t),e=!1,this.breakpointsComputed||(this.breakpointsComputed=!0,this.dispatchEvent(new CustomEvent(Zh.BREAKPOINTS_COMPUTED,{bubbles:!0,composed:!0})))}),0),e=!0)}));let t=this.querySelector(":scope > slot[slot=media]");t&&t.addEventListener("slotchange",(()=>{t.assignedElements({flatten:!0}).length?this.handleMediaUpdated(this.media):Ep(this,ap)&&this.mediaUnsetCallback(Ep(this,ap))}))}static get observedAttributes(){return[Sp.AUTOHIDE,Sp.GESTURES_DISABLED].concat(wp).filter((e=>![Qh.MEDIA_RENDITION_LIST,Qh.MEDIA_AUDIO_TRACK_LIST,Qh.MEDIA_CHAPTERS_CUES].includes(e)))}attributeChangedCallback(e,t,n){e.toLowerCase()==Sp.AUTOHIDE&&(this.autohide=n)}get media(){let e=this.querySelector(":scope > [slot=media]");return"SLOT"==(null==e?void 0:e.nodeName)&&(e=e.assignedElements({flatten:!0})[0]),e}async handleMediaUpdated(e){e&&(_p(this,ap,e),e.localName.includes("-")&&await Cm.customElements.whenDefined(e.localName),this.mediaSetCallback(e))}connectedCallback(){var e;const t=null!=this.getAttribute(Sp.AUDIO)?dm.AUDIO_PLAYER():dm.VIDEO_PLAYER();this.setAttribute("role","region"),this.setAttribute("aria-label",t),this.handleMediaUpdated(this.media),this.setAttribute(Sp.USER_INACTIVE,""),this.addEventListener("pointerdown",this),this.addEventListener("pointermove",this),this.addEventListener("pointerup",this),this.addEventListener("mouseleave",this),this.addEventListener("keyup",this),null==(e=Cm.window)||e.addEventListener("mouseup",this)}disconnectedCallback(){var e;this.media&&this.mediaUnsetCallback(this.media),null==(e=Cm.window)||e.removeEventListener("mouseup",this)}mediaSetCallback(e){}mediaUnsetCallback(e){_p(this,ap,null)}handleEvent(e){switch(e.type){case"pointerdown":_p(this,sp,e.timeStamp);break;case"pointermove":Ap(this,op,lp).call(this,e);break;case"pointerup":Ap(this,dp,cp).call(this,e);break;case"mouseleave":Ap(this,up,hp).call(this);break;case"mouseup":this.removeAttribute(Sp.KEYBOARD_CONTROL);break;case"keyup":Ap(this,fp,gp).call(this),this.setAttribute(Sp.KEYBOARD_CONTROL,"")}}set autohide(e){e=Number(e),this._autohide=isNaN(e)?0:e}get autohide(){return void 0===this._autohide?2:this._autohide}}sp=new WeakMap,ap=new WeakMap,op=new WeakSet,lp=function(e){if("mouse"!==e.pointerType){const t=250;if(e.timeStamp-Ep(this,sp)<t)return}Ap(this,mp,pp).call(this),clearTimeout(this._inactiveTimeout),[this,this.media].includes(e.target)&&Ap(this,fp,gp).call(this)},dp=new WeakSet,cp=function(e){if("touch"===e.pointerType){const t=!this.hasAttribute(Sp.USER_INACTIVE);[this,this.media].includes(e.target)&&t?Ap(this,up,hp).call(this):Ap(this,fp,gp).call(this)}else e.composedPath().some((e=>["media-play-button","media-fullscreen-button"].includes(null==e?void 0:e.localName)))&&Ap(this,fp,gp).call(this)},up=new WeakSet,hp=function(){if(this.autohide<0)return;if(this.hasAttribute(Sp.USER_INACTIVE))return;this.setAttribute(Sp.USER_INACTIVE,"");const e=new Cm.CustomEvent(Zh.USER_INACTIVE,{composed:!0,bubbles:!0,detail:!0});this.dispatchEvent(e)},mp=new WeakSet,pp=function(){if(!this.hasAttribute(Sp.USER_INACTIVE))return;this.removeAttribute(Sp.USER_INACTIVE);const e=new Cm.CustomEvent(Zh.USER_INACTIVE,{composed:!0,bubbles:!0,detail:!1});this.dispatchEvent(e)},fp=new WeakSet,gp=function(){Ap(this,mp,pp).call(this),clearTimeout(this._inactiveTimeout),this.autohide<0||(this._inactiveTimeout=setTimeout((()=>{Ap(this,up,hp).call(this)}),1e3*this.autohide))},Cm.customElements.get("media-container")||Cm.customElements.define("media-container",Cp);var Ip,xp,Dp,Mp,Op,Pp,Np=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Fp=(e,t,n)=>(Np(e,t,"read from private field"),n?n.call(e):t.get(e)),Up=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Bp=(e,t,n,i)=>(Np(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n);class $p{constructor(e,t,{defaultValue:n}={defaultValue:void 0}){Up(this,Op),Up(this,Ip,void 0),Up(this,xp,void 0),Up(this,Dp,void 0),Up(this,Mp,new Set),Bp(this,Ip,e),Bp(this,xp,t),Bp(this,Dp,new Set(n))}[Symbol.iterator](){return Fp(this,Op,Pp).values()}get length(){return Fp(this,Op,Pp).size}get value(){var e;return null!=(e=[...Fp(this,Op,Pp)].join(" "))?e:""}set value(e){var t;e!==this.value&&(Bp(this,Mp,new Set),this.add(...null!=(t=null==e?void 0:e.split(" "))?t:[]))}toString(){return this.value}item(e){return[...Fp(this,Op,Pp)][e]}values(){return Fp(this,Op,Pp).values()}forEach(e){Fp(this,Op,Pp).forEach(e)}add(...e){var t,n;e.forEach((e=>Fp(this,Mp).add(e))),(""!==this.value||(null==(t=Fp(this,Ip))?void 0:t.hasAttribute(`${Fp(this,xp)}`)))&&(null==(n=Fp(this,Ip))||n.setAttribute(`${Fp(this,xp)}`,`${this.value}`))}remove(...e){var t;e.forEach((e=>Fp(this,Mp).delete(e))),null==(t=Fp(this,Ip))||t.setAttribute(`${Fp(this,xp)}`,`${this.value}`)}contains(e){return Fp(this,Op,Pp).has(e)}toggle(e,t){return void 0!==t?t?(this.add(e),!0):(this.remove(e),!1):this.contains(e)?(this.remove(e),!1):(this.add(e),!0)}replace(e,t){return this.remove(e),this.add(t),e===t}}Ip=new WeakMap,xp=new WeakMap,Dp=new WeakMap,Mp=new WeakMap,Op=new WeakSet,Pp=function(){return Fp(this,Mp).size?Fp(this,Mp):Fp(this,Dp)};const Hp=(e="")=>{let[t,n,i]=e.split(":");return t="cc"===t?"captions":"subtitles",{kind:t,language:n,label:i?decodeURIComponent(i):void 0}},Vp=(e="",t={})=>((e="")=>e.split(/\s+/))(e).map((e=>{const n=Hp(e);return{...t,...n}})),Wp=e=>e?Array.isArray(e)?e.map((e=>"string"==typeof e?Hp(e):e)):"string"==typeof e?Vp(e):[e]:[],Gp=({kind:e,label:t,language:n}={kind:"subtitles"})=>t?`${"captions"===e?"cc":"sb"}:${n}:${encodeURIComponent(t)}`:n,Kp=(e=[])=>Array.prototype.map.call(e,Gp).join(" "),qp=e=>{const t=Object.entries(e).map((([e,t])=>((e,t)=>n=>n[e]===t)(e,t)));return e=>t.every((t=>t(e)))},jp=(e,t=[],n=[])=>{const i=Wp(n).map(qp);Array.from(t).filter((e=>i.some((t=>t(e))))).forEach((t=>{t.mode=e}))},Yp=(e,t=(()=>!0))=>{if(!(null==e?void 0:e.textTracks))return[];const n="function"==typeof t?t:qp(t);return Array.from(e.textTracks).filter(n)},zp=e=>{var t;return!!(null==(t=e.mediaSubtitlesShowing)?void 0:t.length)||e.hasAttribute(Qh.MEDIA_SUBTITLES_SHOWING)},Xp={enter:"requestFullscreen",exit:"exitFullscreen",rootEvents:["fullscreenchange"],mediaEvents:[],element:"fullscreenElement",error:"fullscreenerror",enabled:"fullscreenEnabled"};let Qp;void 0===Im.fullscreenElement&&(Xp.enter="webkitRequestFullScreen",Xp.exit=null!=Im.webkitExitFullscreen?"webkitExitFullscreen":"webkitCancelFullScreen",Xp.rootEvents=["webkitfullscreenchange"],Xp.mediaEvents=["webkitbeginfullscreen","webkitendfullscreen"],Xp.element="webkitFullscreenElement",Xp.error="webkitfullscreenerror",Xp.enabled="webkitFullscreenEnabled");const Zp=()=>{var e,t;return Qp||(Qp=null==(t=null==(e=Im)?void 0:e.createElement)?void 0:t.call(e,"video"),Qp)},Jp=/.*Version\/.*Safari\/.*/.test(Cm.navigator.userAgent),ef=(e=Zp())=>(!Cm.matchMedia("(display-mode: standalone)").matches||!Jp)&&"function"==typeof(null==e?void 0:e.requestPictureInPicture),tf=(e=Zp())=>{let t=Im[Xp.enabled];return!t&&e&&(t="webkitSupportsFullscreen"in e),t},nf=tf(),rf=ef(),sf=!!Cm.WebKitPlaybackTargetAvailabilityEvent,af=!!Cm.chrome,of=e=>Yp(e.media,(e=>[em.SUBTITLES,em.CAPTIONS].includes(e.kind))).sort(((e,t)=>e.kind>=t.kind?1:-1)),lf=e=>Yp(e.media,(e=>e.mode===nm&&[em.SUBTITLES,em.CAPTIONS].includes(e.kind))),df=(e,t)=>{const n=of(e),i=lf(e),r=!!i.length;if(n.length)if(!1===t||r&&!0!==t)jp(tm,n,i);else if(!0===t||!r&&!1!==t){let t=n[0];const{options:r}=e;if(!(null==r?void 0:r.noSubtitlesLangPref)){const e=globalThis.localStorage.getItem("media-chrome-pref-subtitles-lang"),i=e?[e,...globalThis.navigator.languages]:globalThis.navigator.languages,r=n.filter((e=>i.some((t=>e.language.toLowerCase().startsWith(t.split("-")[0]))))).sort(((e,t)=>i.findIndex((t=>e.language.toLowerCase().startsWith(t.split("-")[0])))-i.findIndex((e=>t.language.toLowerCase().startsWith(e.split("-")[0])))));r[0]&&(t=r[0])}const{language:s,label:a,kind:o}=t;jp(tm,n,i),jp(nm,n,[{language:s,label:a,kind:o}])}},cf=(e,t)=>e===t||typeof e==typeof t&&(!("number"!=typeof e||!Number.isNaN(e)||!Number.isNaN(t))||"object"==typeof e&&(Array.isArray(e)?uf(e,t):Object.entries(e).every((([e,n])=>e in t&&cf(n,t[e]))))),uf=(e,t)=>{const n=Array.isArray(e),i=Array.isArray(t);return n===i&&(!n&&!i||e.length===t.length&&e.every(((e,n)=>cf(e,t[n]))))},hf=Object.values(om);let mf;const pf=(async(e=Zp())=>{if(!e)return!1;const t=e.volume;return e.volume=t/2+.1,await ym(0),e.volume!==t})().then((e=>(mf=e,mf))),ff={mediaPaused:{get(e){var t;const{media:n}=e;return null==(t=null==n?void 0:n.paused)||t},set(e,t){var n;const{media:i}=t;i&&(e?i.pause():null==(n=i.play())||n.catch((()=>{})))},mediaEvents:["play","playing","pause","emptied"]},mediaHasPlayed:{get(e,t){const{media:n}=e;return!!n&&(t?"playing"===t.type:!n.paused)},mediaEvents:["playing","emptied"]},mediaEnded:{get(e){var t;const{media:n}=e;return null!=(t=null==n?void 0:n.ended)&&t},mediaEvents:["seeked","ended","emptied"]},mediaPlaybackRate:{get(e){var t;const{media:n}=e;return null!=(t=null==n?void 0:n.playbackRate)?t:1},set(e,t){const{media:n}=t;n&&Number.isFinite(+e)&&(n.playbackRate=+e)},mediaEvents:["ratechange","loadstart"]},mediaMuted:{get(e){var t;const{media:n}=e;return null!=(t=null==n?void 0:n.muted)&&t},set(e,t){const{media:n}=t;n&&(n.muted=e)},mediaEvents:["volumechange"]},mediaVolume:{get(e){var t;const{media:n}=e;return null!=(t=null==n?void 0:n.volume)?t:1},set(e,t){const{media:n}=t;if(n){try{null==e?Cm.localStorage.removeItem("media-chrome-pref-volume"):Cm.localStorage.setItem("media-chrome-pref-volume",e.toString())}catch(e){}Number.isFinite(+e)&&(n.volume=+e)}},mediaEvents:["volumechange"],stateOwnersUpdateHandlers:[(e,t)=>{const{options:{noVolumePref:n}}=t;if(!n)try{const n=Cm.localStorage.getItem("media-chrome-pref-volume");if(null==n)return;ff.mediaVolume.set(+n,t),e(n)}catch(e){console.debug("Error getting volume pref",e)}}]},mediaVolumeLevel:{get(e){const{media:t}=e;return void 0===(null==t?void 0:t.volume)?"high":t.muted||0===t.volume?"off":t.volume<.5?"low":t.volume<.75?"medium":"high"},mediaEvents:["volumechange"]},mediaCurrentTime:{get(e){var t;const{media:n}=e;return null!=(t=null==n?void 0:n.currentTime)?t:0},set(e,t){const{media:n}=t;n&&0!==n.readyState&&(n.currentTime=e)},mediaEvents:["timeupdate","loadedmetadata"]},mediaDuration:{get(e){const{media:t,options:{defaultDuration:n}={}}=e;return!n||t&&t.duration&&!Number.isNaN(t.duration)&&Number.isFinite(t.duration)?Number.isFinite(null==t?void 0:t.duration)?t.duration:Number.NaN:n},mediaEvents:["durationchange","loadedmetadata","emptied"]},mediaLoading:{get(e){const{media:t}=e;return(null==t?void 0:t.readyState)<3},mediaEvents:["waiting","playing","emptied"]},mediaSeekable:{get(e){var t;const{media:n}=e;if(!(null==(t=null==n?void 0:n.seekable)?void 0:t.length))return;const i=n.seekable.start(0),r=n.seekable.end(n.seekable.length-1);return i||r?[Number(i.toFixed(3)),Number(r.toFixed(3))]:void 0},mediaEvents:["loadedmetadata","emptied","progress","seekablechange"]},mediaBuffered:{get(e){var t;const{media:n}=e,i=null!=(t=null==n?void 0:n.buffered)?t:[];return Array.from(i).map(((e,t)=>[Number(i.start(t).toFixed(3)),Number(i.end(t).toFixed(3))]))},mediaEvents:["progress","emptied"]},mediaStreamType:{get(e){const{media:t,options:{defaultStreamType:n}={}}=e,i=[om.LIVE,om.ON_DEMAND].includes(n)?n:void 0;if(!t)return i;const{streamType:r}=t;if(hf.includes(r))return r===om.UNKNOWN?i:r;const s=t.duration;return s===1/0?om.LIVE:Number.isFinite(s)?om.ON_DEMAND:i},mediaEvents:["emptied","durationchange","loadedmetadata","streamtypechange"]},mediaTargetLiveWindow:{get(e){const{media:t}=e;if(!t)return Number.NaN;const{targetLiveWindow:n}=t,i=ff.mediaStreamType.get(e);return null!=n&&!Number.isNaN(n)||i!==om.LIVE?n:0},mediaEvents:["emptied","durationchange","loadedmetadata","streamtypechange","targetlivewindowchange"]},mediaTimeIsLive:{get(e){const{media:t,options:{liveEdgeOffset:n=10}={}}=e;if(!t)return!1;if("number"==typeof t.liveEdgeStart)return!Number.isNaN(t.liveEdgeStart)&&t.currentTime>=t.liveEdgeStart;if(!(ff.mediaStreamType.get(e)===om.LIVE))return!1;const i=t.seekable;if(!i)return!0;if(!i.length)return!1;const r=i.end(i.length-1)-n;return t.currentTime>=r},mediaEvents:["playing","timeupdate","progress","waiting","emptied"]},mediaSubtitlesList:{get:e=>of(e).map((({kind:e,label:t,language:n})=>({kind:e,label:t,language:n}))),mediaEvents:["loadstart"],textTracksEvents:["addtrack","removetrack"]},mediaSubtitlesShowing:{get:e=>lf(e).map((({kind:e,label:t,language:n})=>({kind:e,label:t,language:n}))),mediaEvents:["loadstart"],textTracksEvents:["addtrack","removetrack","change"],stateOwnersUpdateHandlers:[(e,t)=>{var n,i;const{media:r,options:s}=t;if(!r)return;const a=e=>{var n;if(!s.defaultSubtitles)return;e&&![em.CAPTIONS,em.SUBTITLES].includes(null==(n=null==e?void 0:e.track)?void 0:n.kind)||df(t,!0)};return null==(n=r.textTracks)||n.addEventListener("addtrack",a),null==(i=r.textTracks)||i.addEventListener("removetrack",a),a(),()=>{var e,t;null==(e=r.textTracks)||e.removeEventListener("addtrack",a),null==(t=r.textTracks)||t.removeEventListener("removetrack",a)}}]},mediaChaptersCues:{get(e){var t;const{media:n}=e;if(!n)return[];const[i]=Yp(n,{kind:em.CHAPTERS});return Array.from(null!=(t=null==i?void 0:i.cues)?t:[]).map((({text:e,startTime:t,endTime:n})=>({text:e,startTime:t,endTime:n})))},mediaEvents:["loadstart","loadedmetadata"],textTracksEvents:["addtrack","removetrack","change"],stateOwnersUpdateHandlers:[(e,t)=>{const{media:n}=t;if(!n)return;const i=n.querySelector('track[kind="chapters"][default][src]');return null==i||i.addEventListener("load",e),()=>{null==i||i.removeEventListener("load",e)}}]},mediaIsPip:{get(e){var t,n;const{media:i,documentElement:r}=e;if(!i||!r)return!1;if(!r.pictureInPictureElement)return!1;if(r.pictureInPictureElement===i)return!0;if(r.pictureInPictureElement instanceof HTMLMediaElement)return!!(null==(t=i.localName)?void 0:t.includes("-"))&&$m(i,r.pictureInPictureElement);if(r.pictureInPictureElement.localName.includes("-")){let e=r.pictureInPictureElement.shadowRoot;for(;null==e?void 0:e.pictureInPictureElement;){if(e.pictureInPictureElement===i)return!0;e=null==(n=e.pictureInPictureElement)?void 0:n.shadowRoot}}return!1},set(e,t){const{media:n}=t;if(n)if(e){if(!Im.pictureInPictureEnabled)return void console.warn("MediaChrome: Picture-in-picture is not enabled");if(!n.requestPictureInPicture)return void console.warn("MediaChrome: The current media does not support picture-in-picture");const e=()=>{console.warn("MediaChrome: The media is not ready for picture-in-picture. It must have a readyState > 0.")};n.requestPictureInPicture().catch((t=>{if(11!==t.code)throw t;if(n.src){if(0!==n.readyState||"none"!==n.preload)throw t;{const t=()=>{n.removeEventListener("loadedmetadata",i),n.preload="none"},i=()=>{n.requestPictureInPicture().catch(e),t()};n.addEventListener("loadedmetadata",i),n.preload="metadata",setTimeout((()=>{0===n.readyState&&e(),t()}),1e3)}}else console.warn("MediaChrome: The media is not ready for picture-in-picture. It must have a src set.")}))}else Im.pictureInPictureElement&&Im.exitPictureInPicture()},mediaEvents:["enterpictureinpicture","leavepictureinpicture"]},mediaRenditionList:{get(e){var t;const{media:n}=e;return[...null!=(t=null==n?void 0:n.videoRenditions)?t:[]].map((e=>({...e})))},mediaEvents:["emptied","loadstart"],videoRenditionsEvents:["addrendition","removerendition"]},mediaRenditionSelected:{get(e){var t,n,i;const{media:r}=e;return null==(i=null==(n=null==r?void 0:r.videoRenditions)?void 0:n[null==(t=r.videoRenditions)?void 0:t.selectedIndex])?void 0:i.id},set(e,t){const{media:n}=t;if(!(null==n?void 0:n.videoRenditions))return void console.warn("MediaController: Rendition selection not supported by this media.");const i=e,r=Array.prototype.findIndex.call(n.videoRenditions,(e=>e.id==i));n.videoRenditions.selectedIndex!=r&&(n.videoRenditions.selectedIndex=r)},mediaEvents:["emptied"],videoRenditionsEvents:["addrendition","removerendition","change"]},mediaAudioTrackList:{get(e){var t;const{media:n}=e;return[...null!=(t=null==n?void 0:n.audioTracks)?t:[]]},mediaEvents:["emptied","loadstart"],audioTracksEvents:["addtrack","removetrack"]},mediaAudioTrackEnabled:{get(e){var t,n;const{media:i}=e;return null==(n=[...null!=(t=null==i?void 0:i.audioTracks)?t:[]].find((e=>e.enabled)))?void 0:n.id},set(e,t){const{media:n}=t;if(!(null==n?void 0:n.audioTracks))return void console.warn("MediaChrome: Audio track selection not supported by this media.");const i=e;for(let e of n.audioTracks)e.enabled=i==e.id},mediaEvents:["emptied"],audioTracksEvents:["addtrack","removetrack","change"]},mediaIsFullscreen:{get(e){var t;const{media:n,documentElement:i,fullscreenElement:r=n}=e;if(!n||!i)return!1;if(!i[Xp.element])return"webkitDisplayingFullscreen"in n&&"webkitPresentationMode"in n&&(n.webkitDisplayingFullscreen&&n.webkitPresentationMode===lm);if(i[Xp.element]===r)return!0;if(i[Xp.element].localName.includes("-")){let e=i[Xp.element].shadowRoot;if(!(Xp.element in e))return $m(i[Xp.element],r);for(;null==e?void 0:e[Xp.element];){if(e[Xp.element]===r)return!0;e=null==(t=e[Xp.element])?void 0:t.shadowRoot}}return!1},set(e,t){var n,i;const{media:r,fullscreenElement:s,documentElement:a}=t;if(e||!(null==a?void 0:a[Xp.exit]))if(null==s?void 0:s[Xp.enter]){const e=null==(i=s[Xp.enter])?void 0:i.call(s);e instanceof Promise&&e.catch((()=>{}))}else(null==r?void 0:r.webkitEnterFullscreen)?r.webkitEnterFullscreen():(null==r?void 0:r.requestFullscreen)&&r.requestFullscreen();else{const e=null==(n=null==a?void 0:a[Xp.exit])?void 0:n.call(a);e instanceof Promise&&e.catch((()=>{}))}},rootEvents:Xp.rootEvents,mediaEvents:Xp.mediaEvents},mediaIsCasting:{get(e){var t;const{media:n}=e;return!(!(null==n?void 0:n.remote)||"disconnected"===(null==(t=n.remote)?void 0:t.state))&&!!n.remote.state},set(e,t){var n,i;const{media:r}=t;r&&(e&&"disconnected"!==(null==(n=r.remote)?void 0:n.state)||(e||"connected"===(null==(i=r.remote)?void 0:i.state))&&("function"==typeof r.remote.prompt?r.remote.prompt().catch((()=>{})):console.warn("MediaChrome: Casting is not supported in this environment")))},remoteEvents:["connect","connecting","disconnect"]},mediaIsAirplaying:{get:()=>!1,set(e,t){const{media:n}=t;n&&(n.webkitShowPlaybackTargetPicker&&Cm.WebKitPlaybackTargetAvailabilityEvent?n.webkitShowPlaybackTargetPicker():console.warn("MediaChrome: received a request to select AirPlay but AirPlay is not supported in this environment"))},mediaEvents:["webkitcurrentplaybacktargetiswirelesschanged"]},mediaFullscreenUnavailable:{get(e){const{media:t}=e;if(!nf||!tf(t))return am}},mediaPipUnavailable:{get(e){const{media:t}=e;if(!rf||!ef(t))return am}},mediaVolumeUnavailable:{get(e){const{media:t}=e;if(!1===mf||null==(null==t?void 0:t.volume))return am},stateOwnersUpdateHandlers:[e=>{null==mf&&pf.then((t=>e(t?void 0:am)))}]},mediaCastUnavailable:{get(e,{availability:t="not-available"}={}){var n;const{media:i}=e;return af&&(null==(n=null==i?void 0:i.remote)?void 0:n.state)?null!=t&&"available"!==t?sm:void 0:am},stateOwnersUpdateHandlers:[(e,t)=>{var n;const{media:i}=t;if(!i)return;return i.disableRemotePlayback||i.hasAttribute("disableremoteplayback")||null==(n=null==i?void 0:i.remote)||n.watchAvailability((t=>{e({availability:t?"available":"not-available"})})).catch((t=>{"NotSupportedError"===t.name?e({availability:null}):e({availability:"not-available"})})),()=>{var e;null==(e=null==i?void 0:i.remote)||e.cancelWatchAvailability().catch((()=>{}))}}]},mediaAirplayUnavailable:{get:(e,t)=>sf?"not-available"===(null==t?void 0:t.availability)?sm:void 0:am,mediaEvents:["webkitplaybacktargetavailabilitychanged"],stateOwnersUpdateHandlers:[(e,t)=>{var n;const{media:i}=t;if(!i)return;return i.disableRemotePlayback||i.hasAttribute("disableremoteplayback")||null==(n=null==i?void 0:i.remote)||n.watchAvailability((t=>{e({availability:t?"available":"not-available"})})).catch((t=>{"NotSupportedError"===t.name?e({availability:null}):e({availability:"not-available"})})),()=>{var e;null==(e=null==i?void 0:i.remote)||e.cancelWatchAvailability().catch((()=>{}))}}]},mediaRenditionUnavailable:{get(e){var t;const{media:n}=e;return(null==n?void 0:n.videoRenditions)?(null==(t=n.videoRenditions)?void 0:t.length)?void 0:sm:am},mediaEvents:["emptied","loadstart"],videoRenditionsEvents:["addrendition","removerendition"]},mediaAudioTrackUnavailable:{get(e){var t,n;const{media:i}=e;return(null==i?void 0:i.audioTracks)?(null!=(n=null==(t=i.audioTracks)?void 0:t.length)?n:0)<=1?sm:void 0:am},mediaEvents:["emptied","loadstart"],audioTracksEvents:["addtrack","removetrack"]}},gf={[jh.MEDIA_PREVIEW_REQUEST](e,t,{detail:n}){var i,r,s;const{media:a}=t,o=null!=n?n:void 0;let l,d;if(a&&null!=o){const[e]=Yp(a,{kind:em.METADATA,label:"thumbnails"}),t=Array.prototype.find.call(null!=(i=null==e?void 0:e.cues)?i:[],((e,t,n)=>0===t?e.endTime>o:t===n.length-1?e.startTime<=o:e.startTime<=o&&e.endTime>o));if(t){const e=/'^(?:[a-z]+:)?\/\//i.test(t.text)||null==(r=null==a?void 0:a.querySelector('track[label="thumbnails"]'))?void 0:r.src,n=new URL(t.text,e);d=new URLSearchParams(n.hash).get("#xywh").split(",").map((e=>+e)),l=n.href}}const c=e.mediaDuration.get(t);let u=null==(s=e.mediaChaptersCues.get(t).find(((e,t,n)=>t===n.length-1&&c===e.endTime?e.startTime<=o&&e.endTime>=o:e.startTime<=o&&e.endTime>o)))?void 0:s.text;return null!=n&&null==u&&(u=""),{mediaPreviewTime:o,mediaPreviewImage:l,mediaPreviewCoords:d,mediaPreviewChapter:u}},[jh.MEDIA_PAUSE_REQUEST](e,t){e.mediaPaused.set(!0,t)},[jh.MEDIA_PLAY_REQUEST](e,t){var n;if(e.mediaStreamType.get(t)===om.LIVE){const i=!(e.mediaTargetLiveWindow.get(t)>0),r=null==(n=e.mediaSeekable.get(t))?void 0:n[1];i&&r&&e.mediaCurrentTime.set(r,t)}e.mediaPaused.set(!1,t)},[jh.MEDIA_PLAYBACK_RATE_REQUEST](e,t,{detail:n}){const i=n;e.mediaPlaybackRate.set(i,t)},[jh.MEDIA_MUTE_REQUEST](e,t){e.mediaMuted.set(!0,t)},[jh.MEDIA_UNMUTE_REQUEST](e,t){e.mediaVolume.get(t)||e.mediaVolume.set(.25,t),e.mediaMuted.set(!1,t)},[jh.MEDIA_VOLUME_REQUEST](e,t,{detail:n}){const i=n;i&&e.mediaMuted.get(t)&&e.mediaMuted.set(!1,t),e.mediaVolume.set(i,t)},[jh.MEDIA_SEEK_REQUEST](e,t,{detail:n}){const i=n;e.mediaCurrentTime.set(i,t)},[jh.MEDIA_SEEK_TO_LIVE_REQUEST](e,t){var n;const i=null==(n=e.mediaSeekable.get(t))?void 0:n[1];Number.isNaN(Number(i))&&e.mediaCurrentTime.set(i,t)},[jh.MEDIA_SHOW_SUBTITLES_REQUEST](e,t,{detail:n}){var i;const{options:r}=t,s=of(t),a=Wp(n),o=null==(i=a[0])?void 0:i.language;o&&!r.noSubtitlesLangPref&&Cm.localStorage.setItem("media-chrome-pref-subtitles-lang",o),jp(nm,s,a)},[jh.MEDIA_DISABLE_SUBTITLES_REQUEST](e,t,{detail:n}){const i=of(t);jp(tm,i,null!=n?n:[])},[jh.MEDIA_TOGGLE_SUBTITLES_REQUEST](e,t,{detail:n}){df(t,n)},[jh.MEDIA_RENDITION_REQUEST](e,t,{detail:n}){const i=n;e.mediaRenditionSelected.set(i,t)},[jh.MEDIA_AUDIO_TRACK_REQUEST](e,t,{detail:n}){const i=n;e.mediaAudioTrackEnabled.set(i,t)},[jh.MEDIA_ENTER_PIP_REQUEST](e,t){e.mediaIsFullscreen.get(t)&&e.mediaIsFullscreen.set(!1,t),e.mediaIsPip.set(!0,t)},[jh.MEDIA_EXIT_PIP_REQUEST](e,t){e.mediaIsPip.set(!1,t)},[jh.MEDIA_ENTER_FULLSCREEN_REQUEST](e,t){e.mediaIsPip.get(t)&&e.mediaIsPip.set(!1,t),e.mediaIsFullscreen.set(!0,t)},[jh.MEDIA_EXIT_FULLSCREEN_REQUEST](e,t){e.mediaIsFullscreen.set(!1,t)},[jh.MEDIA_ENTER_CAST_REQUEST](e,t){e.mediaIsFullscreen.get(t)&&e.mediaIsFullscreen.set(!1,t),e.mediaIsCasting.set(!0,t)},[jh.MEDIA_EXIT_CAST_REQUEST](e,t){e.mediaIsCasting.set(!1,t)},[jh.MEDIA_AIRPLAY_REQUEST](e,t){e.mediaIsAirplaying.set(!0,t)}};var vf,bf,yf,Ef,Tf,_f,Af,Sf,kf,wf,Lf,Rf,Cf=({media:e,fullscreenElement:t,documentElement:n,stateMediator:i=ff,requestMap:r=gf,options:s={},monitorStateOwnersOnlyWithSubscriptions:a=!0})=>{const o=[],l={options:{...s}};let d=Object.freeze({mediaPreviewTime:void 0,mediaPreviewImage:void 0,mediaPreviewCoords:void 0,mediaPreviewChapter:void 0});const c=e=>{null!=e&&(cf(e,d)||(d=Object.freeze({...d,...e}),o.forEach((e=>e(d)))))},u=()=>{const e=Object.entries(i).reduce(((e,[t,{get:n}])=>(e[t]=n(l),e)),{});c(e)},h={};let m;const p=async(e,t)=>{var n,r,s,d,p,f,g,v,b,y,E,T,_,A,S,k;const w=!!m;if(m={...l,...null!=m?m:{},...e},w)return;await(async(...e)=>{await Promise.all(e.filter((e=>e)).map((async e=>{if(!("localName"in e&&e instanceof Cm.HTMLElement))return;const t=e.localName;if(!t.includes("-"))return;const n=Cm.customElements.get(t);n&&e instanceof n||(await Cm.customElements.whenDefined(t),Cm.customElements.upgrade(e))})))})(...Object.values(e));const L=o.length>0&&0===t&&a,R=l.media!==m.media,C=(null==(n=l.media)?void 0:n.textTracks)!==(null==(r=m.media)?void 0:r.textTracks),I=(null==(s=l.media)?void 0:s.videoRenditions)!==(null==(d=m.media)?void 0:d.videoRenditions),x=(null==(p=l.media)?void 0:p.audioTracks)!==(null==(f=m.media)?void 0:f.audioTracks),D=(null==(g=l.media)?void 0:g.remote)!==(null==(v=m.media)?void 0:v.remote),M=l.documentElement!==m.documentElement,O=!!l.media&&(R||L),P=!!(null==(b=l.media)?void 0:b.textTracks)&&(C||L),N=!!(null==(y=l.media)?void 0:y.videoRenditions)&&(I||L),F=!!(null==(E=l.media)?void 0:E.audioTracks)&&(x||L),U=!!(null==(T=l.media)?void 0:T.remote)&&(D||L),B=!!l.documentElement&&(M||L),$=O||P||N||F||U||B,H=0===o.length&&1===t&&a,V=!!m.media&&(R||H),W=!!(null==(_=m.media)?void 0:_.textTracks)&&(C||H),G=!!(null==(A=m.media)?void 0:A.videoRenditions)&&(I||H),K=!!(null==(S=m.media)?void 0:S.audioTracks)&&(x||H),q=!!(null==(k=m.media)?void 0:k.remote)&&(D||H),j=!!m.documentElement&&(M||H),Y=V||W||G||K||q||j;if(!($||Y))return Object.entries(m).forEach((([e,t])=>{l[e]=t})),u(),void(m=void 0);Object.entries(i).forEach((([e,{get:t,mediaEvents:n=[],textTracksEvents:i=[],videoRenditionsEvents:r=[],audioTracksEvents:s=[],remoteEvents:a=[],rootEvents:o=[],stateOwnersUpdateHandlers:d=[]}])=>{h[e]||(h[e]={});const u=n=>{const i=t(l,n);c({[e]:i})};let p;p=h[e].mediaEvents,n.forEach((t=>{p&&O&&(l.media.removeEventListener(t,p),h[e].mediaEvents=void 0),V&&(m.media.addEventListener(t,u),h[e].mediaEvents=u)})),p=h[e].textTracksEvents,i.forEach((t=>{var n,i;p&&P&&(null==(n=l.media.textTracks)||n.removeEventListener(t,p),h[e].textTracksEvents=void 0),W&&(null==(i=m.media.textTracks)||i.addEventListener(t,u),h[e].textTracksEvents=u)})),p=h[e].videoRenditionsEvents,r.forEach((t=>{var n,i;p&&N&&(null==(n=l.media.videoRenditions)||n.removeEventListener(t,p),h[e].videoRenditionsEvents=void 0),G&&(null==(i=m.media.videoRenditions)||i.addEventListener(t,u),h[e].videoRenditionsEvents=u)})),p=h[e].audioTracksEvents,s.forEach((t=>{var n,i;p&&F&&(null==(n=l.media.audioTracks)||n.removeEventListener(t,p),h[e].audioTracksEvents=void 0),K&&(null==(i=m.media.audioTracks)||i.addEventListener(t,u),h[e].audioTracksEvents=u)})),p=h[e].remoteEvents,a.forEach((t=>{var n,i;p&&U&&(null==(n=l.media.remote)||n.removeEventListener(t,p),h[e].remoteEvents=void 0),q&&(null==(i=m.media.remote)||i.addEventListener(t,u),h[e].remoteEvents=u)})),p=h[e].rootEvents,o.forEach((t=>{p&&B&&(l.documentElement.removeEventListener(t,p),h[e].rootEvents=void 0),j&&(m.documentElement.addEventListener(t,u),h[e].rootEvents=u)}));const f=h[e].stateOwnersUpdateHandlers;d.forEach((t=>{f&&$&&f(),Y&&(h[e].stateOwnersUpdateHandlers=t(u,m))}))})),Object.entries(m).forEach((([e,t])=>{l[e]=t})),u(),m=void 0};return p({media:e,fullscreenElement:t,documentElement:n,options:s}),{dispatch(e){const{type:t,detail:n}=e;r[t]?c(r[t](i,l,e)):"mediaelementchangerequest"===t?p({media:n}):"fullscreenelementchangerequest"===t?p({fullscreenElement:n}):"documentelementchangerequest"===t?p({documentElement:n}):"optionschangerequest"===t&&Object.entries(null!=n?n:{}).forEach((([e,t])=>{l.options[e]=t}))},getState:()=>d,subscribe:e=>(p({},o.length+1),o.push(e),e(d),()=>{const t=o.indexOf(e);t>=0&&(p({},o.length-1),o.splice(t,1))})}},If=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},xf=(e,t,n)=>(If(e,t,"read from private field"),n?n.call(e):t.get(e)),Df=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Mf=(e,t,n,i)=>(If(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),Of=(e,t,n)=>(If(e,t,"access private method"),n);const Pf=["ArrowLeft","ArrowRight","Enter"," ","f","m","k","c"],Nf="defaultsubtitles",Ff="defaultstreamtype",Uf="defaultduration",Bf="fullscreenelement",$f="hotkeys",Hf="keysused",Vf="liveedgeoffset",Wf="nohotkeys",Gf="novolumepref",Kf="nosubtitleslangpref",qf="nodefaultstore",jf="keyboardforwardseekoffset",Yf="keyboardbackwardseekoffset";class zf extends Cp{constructor(){super(),Df(this,Af),Df(this,kf),Df(this,Lf),Df(this,vf,new $p(this,$f)),Df(this,bf,void 0),Df(this,yf,void 0),Df(this,Ef,void 0),Df(this,Tf,void 0),Df(this,_f,(e=>{var t;null==(t=xf(this,yf))||t.dispatch(e)})),this.mediaStateReceivers=[],this.associatedElementSubscriptions=new Map,this.associateElement(this);let e={};Mf(this,Ef,(t=>{Object.entries(t).forEach((([t,n])=>{if(t in e&&e[t]===n)return;this.propagateMediaState(t,n);const i=t.toLowerCase(),r=new Cm.CustomEvent(Jh[i],{composed:!0,detail:n});this.dispatchEvent(r)})),e=t})),this.enableHotkeys()}static get observedAttributes(){return super.observedAttributes.concat(Wf,$f,Ff,Nf,Uf)}get mediaStore(){return xf(this,yf)}set mediaStore(e){var t,n;xf(this,yf)&&(null==(t=xf(this,Tf))||t.call(this),Mf(this,Tf,void 0)),Mf(this,yf,e),xf(this,yf)||this.hasAttribute(qf)?Mf(this,Tf,null==(n=xf(this,yf))?void 0:n.subscribe(xf(this,Ef))):Of(this,Af,Sf).call(this)}get fullscreenElement(){var e;return null!=(e=xf(this,bf))?e:this}set fullscreenElement(e){var t;this.hasAttribute(Bf)&&this.removeAttribute(Bf),Mf(this,bf,e),null==(t=xf(this,yf))||t.dispatch({type:"fullscreenelementchangerequest",detail:this.fullscreenElement})}attributeChangedCallback(e,t,n){var i,r,s,a,o,l;if(super.attributeChangedCallback(e,t,n),e===Wf)n!==t&&""===n?(this.hasAttribute($f)&&console.warn("Media Chrome: Both `hotkeys` and `nohotkeys` have been set. All hotkeys will be disabled."),this.disableHotkeys()):n!==t&&null===n&&this.enableHotkeys();else if(e===$f)xf(this,vf).value=n;else if(e===Nf&&n!==t)null==(i=xf(this,yf))||i.dispatch({type:"optionschangerequest",detail:{defaultSubtitles:this.hasAttribute(Nf)}});else if(e===Ff)null==(s=xf(this,yf))||s.dispatch({type:"optionschangerequest",detail:{defaultStreamType:null!=(r=this.getAttribute(Ff))?r:void 0}});else if(e===Vf)null==(a=xf(this,yf))||a.dispatch({type:"optionschangerequest",detail:{liveEdgeOffset:this.hasAttribute(Vf)?+this.getAttribute(Vf):void 0}});else if(e===Bf){const e=n?null==(o=this.getRootNode())?void 0:o.getElementById(n):void 0;Mf(this,bf,e),null==(l=xf(this,yf))||l.dispatch({type:"fullscreenelementchangerequest",detail:this.fullscreenElement})}}connectedCallback(){var e,t;xf(this,yf)||this.hasAttribute(qf)||Of(this,Af,Sf).call(this),null==(e=xf(this,yf))||e.dispatch({type:"documentelementchangerequest",detail:Im}),super.connectedCallback(),xf(this,yf)&&!xf(this,Tf)&&Mf(this,Tf,null==(t=xf(this,yf))?void 0:t.subscribe(xf(this,Ef))),this.enableHotkeys()}disconnectedCallback(){var e,t,n,i;null==(e=super.disconnectedCallback)||e.call(this),xf(this,yf)&&(null==(t=xf(this,yf))||t.dispatch({type:"documentelementchangerequest",detail:void 0}),null==(n=xf(this,yf))||n.dispatch({type:jh.MEDIA_TOGGLE_SUBTITLES_REQUEST,detail:!1})),xf(this,Tf)&&(null==(i=xf(this,Tf))||i.call(this),Mf(this,Tf,void 0))}mediaSetCallback(e){var t;super.mediaSetCallback(e),null==(t=xf(this,yf))||t.dispatch({type:"mediaelementchangerequest",detail:e}),e.hasAttribute("tabindex")||(e.tabIndex=-1)}mediaUnsetCallback(e){var t;super.mediaUnsetCallback(e),null==(t=xf(this,yf))||t.dispatch({type:"mediaelementchangerequest",detail:void 0})}propagateMediaState(e,t){ig(this.mediaStateReceivers,e,t)}associateElement(e){if(!e)return;const{associatedElementSubscriptions:t}=this;if(t.has(e))return;const n=this.registerMediaStateReceiver.bind(this),i=this.unregisterMediaStateReceiver.bind(this),r=rg(e,n,i);Object.values(jh).forEach((t=>{e.addEventListener(t,xf(this,_f))})),t.set(e,r)}unassociateElement(e){if(!e)return;const{associatedElementSubscriptions:t}=this;if(!t.has(e))return;t.get(e)(),t.delete(e),Object.values(jh).forEach((t=>{e.removeEventListener(t,xf(this,_f))}))}registerMediaStateReceiver(e){if(!e)return;const t=this.mediaStateReceivers;t.indexOf(e)>-1||(t.push(e),xf(this,yf)&&Object.entries(xf(this,yf).getState()).forEach((([t,n])=>{ig([e],t,n)})))}unregisterMediaStateReceiver(e){const t=this.mediaStateReceivers,n=t.indexOf(e);n<0||t.splice(n,1)}enableHotkeys(){this.addEventListener("keydown",Of(this,Lf,Rf))}disableHotkeys(){this.removeEventListener("keydown",Of(this,Lf,Rf)),this.removeEventListener("keyup",Of(this,kf,wf))}get hotkeys(){return xf(this,vf)}keyboardShortcutHandler(e){var t,n,i,r,s,a;if((null!=(r=null!=(i=null==(t=e.target.getAttribute(Hf))?void 0:t.split(" "))?i:null==(n=e.target)?void 0:n.keysUsed)?r:[]).map((e=>"Space"===e?" ":e)).filter(Boolean).includes(e.key))return;let o,l,d;if(!(xf(this,vf).contains(`no${e.key.toLowerCase()}`)||" "===e.key&&xf(this,vf).contains("nospace")))switch(e.key){case" ":case"k":o=xf(this,yf).getState().mediaPaused?jh.MEDIA_PLAY_REQUEST:jh.MEDIA_PAUSE_REQUEST,this.dispatchEvent(new Cm.CustomEvent(o,{composed:!0,bubbles:!0}));break;case"m":o="off"===this.mediaStore.getState().mediaVolumeLevel?jh.MEDIA_UNMUTE_REQUEST:jh.MEDIA_MUTE_REQUEST,this.dispatchEvent(new Cm.CustomEvent(o,{composed:!0,bubbles:!0}));break;case"f":o=this.mediaStore.getState().mediaIsFullscreen?jh.MEDIA_EXIT_FULLSCREEN_REQUEST:jh.MEDIA_ENTER_FULLSCREEN_REQUEST,this.dispatchEvent(new Cm.CustomEvent(o,{composed:!0,bubbles:!0}));break;case"c":this.dispatchEvent(new Cm.CustomEvent(jh.MEDIA_TOGGLE_SUBTITLES_REQUEST,{composed:!0,bubbles:!0}));break;case"ArrowLeft":{const e=this.hasAttribute(Yf)?+this.getAttribute(Yf):10;l=Math.max((null!=(s=this.mediaStore.getState().mediaCurrentTime)?s:0)-e,0),d=new Cm.CustomEvent(jh.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:l}),this.dispatchEvent(d);break}case"ArrowRight":{const e=this.hasAttribute(jf)?+this.getAttribute(jf):10;l=Math.max((null!=(a=this.mediaStore.getState().mediaCurrentTime)?a:0)+e,0),d=new Cm.CustomEvent(jh.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:l}),this.dispatchEvent(d);break}}}}vf=new WeakMap,bf=new WeakMap,yf=new WeakMap,Ef=new WeakMap,Tf=new WeakMap,_f=new WeakMap,Af=new WeakSet,Sf=function(){var e;this.mediaStore=Cf({media:this.media,fullscreenElement:this.fullscreenElement,options:{defaultSubtitles:this.hasAttribute(Nf),defaultDuration:this.hasAttribute(Uf)?+this.getAttribute(Uf):void 0,defaultStreamType:null!=(e=this.getAttribute(Ff))?e:void 0,liveEdgeOffset:this.hasAttribute(Vf)?+this.getAttribute(Vf):void 0,noVolumePref:this.hasAttribute(Gf),noSubtitlesLangPref:this.hasAttribute(Kf)}})},kf=new WeakSet,wf=function(e){const{key:t}=e;Pf.includes(t)?this.keyboardShortcutHandler(e):this.removeEventListener("keyup",Of(this,kf,wf))},Lf=new WeakSet,Rf=function(e){const{metaKey:t,altKey:n,key:i}=e;t||n||!Pf.includes(i)?this.removeEventListener("keyup",Of(this,kf,wf)):([" ","ArrowLeft","ArrowRight"].includes(i)&&!(xf(this,vf).contains(`no${i.toLowerCase()}`)||" "===i&&xf(this,vf).contains("nospace"))&&e.preventDefault(),this.addEventListener("keyup",Of(this,kf,wf),{once:!0}))};const Xf=Object.values(Qh),Qf=Object.values(zh),Zf=e=>{var t,n,i,r;let{observedAttributes:s}=e.constructor;!s&&(null==(t=e.nodeName)?void 0:t.includes("-"))&&(Cm.customElements.upgrade(e),({observedAttributes:s}=e.constructor));const a=null==(r=null==(i=null==(n=null==e?void 0:e.getAttribute)?void 0:n.call(e,Yh.MEDIA_CHROME_ATTRIBUTES))?void 0:i.split)?void 0:r.call(i,/\s+/);return Array.isArray(s||a)?(s||a).filter((e=>Xf.includes(e))):[]},Jf=e=>(e=>{var t,n;return!(null==(t=e.nodeName)?void 0:t.includes("-"))||!Cm.customElements.get(null==(n=e.nodeName)?void 0:n.toLowerCase())||e instanceof Cm.customElements.get(e.nodeName.toLowerCase())||Cm.customElements.upgrade(e),Qf.some((t=>t in e))})(e)||!!Zf(e).length,eg=e=>{var t;return null==(t=null==e?void 0:e.join)?void 0:t.call(e,":")},tg={[Qh.MEDIA_SUBTITLES_LIST]:Kp,[Qh.MEDIA_SUBTITLES_SHOWING]:Kp,[Qh.MEDIA_SEEKABLE]:eg,[Qh.MEDIA_BUFFERED]:e=>null==e?void 0:e.map(eg).join(" "),[Qh.MEDIA_PREVIEW_COORDS]:e=>null==e?void 0:e.join(" "),[Qh.MEDIA_RENDITION_LIST]:function(e){return null==e?void 0:e.map(hm).join(" ")},[Qh.MEDIA_AUDIO_TRACK_LIST]:function(e){return null==e?void 0:e.map(fm).join(" ")}},ng=(e,t)=>{if((e=>{var t;return!!(null==(t=e.closest)?void 0:t.call(e,'*[slot="media"]'))})(e))return;const n=(e,t)=>{var n,i;Jf(e)&&t(e);const{children:r=[]}=null!=e?e:{};[...r,...null!=(i=null==(n=null==e?void 0:e.shadowRoot)?void 0:n.children)?i:[]].forEach((e=>ng(e,t)))},i=null==e?void 0:e.nodeName.toLowerCase();!i.includes("-")||Jf(e)?n(e,t):Cm.customElements.whenDefined(i).then((()=>{n(e,t)}))},ig=(e,t,n)=>{e.forEach((e=>{if(t in e)return void(e[t]=n);const i=Zf(e),r=t.toLowerCase();i.includes(r)&&(async(e,t,n)=>{var i,r;if(e.isConnected||await ym(0),"boolean"==typeof n||null==n)return Xm(e,t,n);if("number"==typeof n)return Ym(e,t,n);if("string"==typeof n)return Zm(e,t,n);if(Array.isArray(n)&&!n.length)return e.removeAttribute(t);const s=null!=(r=null==(i=tg[t])?void 0:i.call(tg,n))?r:n;e.setAttribute(t,s)})(e,r,n)}))},rg=(e,t,n)=>{ng(e,t);const i=e=>{var n;const i=null!=(n=null==e?void 0:e.composedPath()[0])?n:e.target;t(i)},r=e=>{var t;const i=null!=(t=null==e?void 0:e.composedPath()[0])?t:e.target;n(i)};e.addEventListener(jh.REGISTER_MEDIA_STATE_RECEIVER,i),e.addEventListener(jh.UNREGISTER_MEDIA_STATE_RECEIVER,r);let s=[];const a=e=>{const i=e.target;"media"!==i.name&&(s.forEach((e=>ng(e,n))),s=[...i.assignedElements({flatten:!0})],s.forEach((e=>ng(e,t))))};e.addEventListener("slotchange",a);const o=new MutationObserver((e=>{e.forEach((e=>{const{addedNodes:i=[],removedNodes:r=[],type:s,target:a,attributeName:o}=e;"childList"===s?(Array.prototype.forEach.call(i,(e=>ng(e,t))),Array.prototype.forEach.call(r,(e=>ng(e,n)))):"attributes"===s&&o===Yh.MEDIA_CHROME_ATTRIBUTES&&(Jf(a)?t(a):n(a))}))}));o.observe(e,{childList:!0,attributes:!0,subtree:!0});return()=>{ng(e,n),e.removeEventListener("slotchange",a),o.disconnect(),e.removeEventListener(jh.REGISTER_MEDIA_STATE_RECEIVER,i),e.removeEventListener(jh.UNREGISTER_MEDIA_STATE_RECEIVER,r)}};Cm.customElements.get("media-controller")||Cm.customElements.define("media-controller",zf);var sg,ag,og,lg,dg=zf,cg=Object.defineProperty,ug=(e,t,n)=>(((e,t,n)=>{t in e?cg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n),hg=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},mg=(e,t,n)=>(hg(e,t,"read from private field"),n?n.call(e):t.get(e)),pg=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},fg=(e,t,n,i)=>(hg(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n);const gg=Im.createElement("template");gg.innerHTML="\n<style>\n  :host {\n    font: var(--media-font,\n      var(--media-font-weight, bold)\n      var(--media-font-size, 14px) /\n      var(--media-text-content-height, var(--media-control-height, 24px))\n      var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));\n    color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));\n    background: var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .7)));\n    padding: var(--media-button-padding, var(--media-control-padding, 10px));\n    justify-content: var(--media-button-justify-content, center);\n    display: inline-flex;\n    align-items: center;\n    vertical-align: middle;\n    box-sizing: border-box;\n    transition: background .15s linear;\n    pointer-events: auto;\n    cursor: pointer;\n    -webkit-tap-highlight-color: transparent;\n  }\n\n  \n  :host(:focus-visible) {\n    box-shadow: inset 0 0 0 2px rgb(27 127 204 / .9);\n    outline: 0;\n  }\n  \n  :host(:where(:focus)) {\n    box-shadow: none;\n    outline: 0;\n  }\n\n  :host(:hover) {\n    background: var(--media-control-hover-background, rgba(50 50 70 / .7));\n  }\n\n  svg, img, ::slotted(svg), ::slotted(img) {\n    width: var(--media-button-icon-width);\n    height: var(--media-button-icon-height, var(--media-control-height, 24px));\n    transform: var(--media-button-icon-transform);\n    transition: var(--media-button-icon-transition);\n    fill: var(--media-icon-color, var(--media-primary-color, rgb(238 238 238)));\n    vertical-align: middle;\n    max-width: 100%;\n    max-height: 100%;\n    min-width: 100%;\n  }\n</style>\n";class vg extends Cm.HTMLElement{constructor(e={}){if(super(),pg(this,sg,void 0),ug(this,"preventClick",!1),pg(this,ag,(e=>{this.preventClick||this.handleClick(e)})),pg(this,og,(e=>{const{key:t}=e;this.keysUsed.includes(t)?this.preventClick||this.handleClick(e):this.removeEventListener("keyup",mg(this,og))})),pg(this,lg,(e=>{const{metaKey:t,altKey:n,key:i}=e;t||n||!this.keysUsed.includes(i)?this.removeEventListener("keyup",mg(this,og)):this.addEventListener("keyup",mg(this,og),{once:!0})})),!this.shadowRoot){this.attachShadow({mode:"open"});const t=gg.content.cloneNode(!0);this.nativeEl=t;let n=e.slotTemplate;n||(n=Im.createElement("template"),n.innerHTML=`<slot>${e.defaultContent||""}</slot>`),this.nativeEl.appendChild(n.content.cloneNode(!0)),this.shadowRoot.appendChild(t)}}static get observedAttributes(){return["disabled",Yh.MEDIA_CONTROLLER]}enable(){this.addEventListener("click",mg(this,ag)),this.addEventListener("keydown",mg(this,lg)),this.tabIndex=0}disable(){this.removeEventListener("click",mg(this,ag)),this.removeEventListener("keydown",mg(this,lg)),this.removeEventListener("keyup",mg(this,og)),this.tabIndex=-1}attributeChangedCallback(e,t,n){var i,r,s,a,o;e===Yh.MEDIA_CONTROLLER?(t&&(null==(r=null==(i=mg(this,sg))?void 0:i.unassociateElement)||r.call(i,this),fg(this,sg,null)),n&&this.isConnected&&(fg(this,sg,null==(s=this.getRootNode())?void 0:s.getElementById(n)),null==(o=null==(a=mg(this,sg))?void 0:a.associateElement)||o.call(a,this))):"disabled"===e&&n!==t&&(null==n?this.enable():this.disable())}connectedCallback(){var e,t,n;const{style:i}=Km(this.shadowRoot,":host");i.setProperty("display",`var(--media-control-display, var(--${this.localName}-display, inline-flex))`),this.hasAttribute("disabled")||this.enable(),this.setAttribute("role","button");const r=this.getAttribute(Yh.MEDIA_CONTROLLER);r&&(fg(this,sg,null==(e=this.getRootNode())?void 0:e.getElementById(r)),null==(n=null==(t=mg(this,sg))?void 0:t.associateElement)||n.call(t,this))}disconnectedCallback(){var e,t;this.disable(),null==(t=null==(e=mg(this,sg))?void 0:e.unassociateElement)||t.call(e,this),fg(this,sg,null)}get keysUsed(){return["Enter"," "]}handleClick(e){}}sg=new WeakMap,ag=new WeakMap,og=new WeakMap,lg=new WeakMap,Cm.customElements.get("media-chrome-button")||Cm.customElements.define("media-chrome-button",vg);const bg='<svg aria-hidden="true" viewBox="0 0 26 24">\n  <path d="M22.13 3H3.87a.87.87 0 0 0-.87.87v13.26a.87.87 0 0 0 .87.87h3.4L9 16H5V5h16v11h-4l1.72 2h3.4a.87.87 0 0 0 .87-.87V3.87a.87.87 0 0 0-.86-.87Zm-8.75 11.44a.5.5 0 0 0-.76 0l-4.91 5.73a.5.5 0 0 0 .38.83h9.82a.501.501 0 0 0 .38-.83l-4.91-5.73Z"/>\n</svg>\n',yg=Im.createElement("template");yg.innerHTML=`\n  <style>\n  :host([${Qh.MEDIA_IS_AIRPLAYING}]) slot:not([name=exit]):not([name=icon]) {\n    display: none !important;\n  }\n\n  \n  :host(:not([${Qh.MEDIA_IS_AIRPLAYING}])) slot:not([name=enter]):not([name=icon]) {\n    display: none !important;\n  }\n  </style>\n\n  <slot name="icon">\n    <slot name="enter">${bg}</slot>\n    <slot name="exit">${bg}</slot>\n  </slot>\n`;const Eg=e=>{const t=e.mediaIsAirplaying?cm.EXIT_AIRPLAY():cm.ENTER_AIRPLAY();e.setAttribute("aria-label",t)};class Tg extends vg{static get observedAttributes(){return[...super.observedAttributes,Qh.MEDIA_IS_AIRPLAYING,Qh.MEDIA_AIRPLAY_UNAVAILABLE]}constructor(e={}){super({slotTemplate:yg,...e})}connectedCallback(){super.connectedCallback(),Eg(this)}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),e===Qh.MEDIA_IS_AIRPLAYING&&Eg(this)}get mediaIsAirplaying(){return zm(this,Qh.MEDIA_IS_AIRPLAYING)}set mediaIsAirplaying(e){Xm(this,Qh.MEDIA_IS_AIRPLAYING,e)}get mediaAirplayUnavailable(){return Qm(this,Qh.MEDIA_AIRPLAY_UNAVAILABLE)}set mediaAirplayUnavailable(e){Zm(this,Qh.MEDIA_AIRPLAY_UNAVAILABLE,e)}handleClick(){const e=new Cm.CustomEvent(jh.MEDIA_AIRPLAY_REQUEST,{composed:!0,bubbles:!0});this.dispatchEvent(e)}}Cm.customElements.get("media-airplay-button")||Cm.customElements.define("media-airplay-button",Tg);function _g({anchor:e,floating:t,placement:n}){let i=function({anchor:e,floating:t}){return{anchor:Ag(e,t.offsetParent),floating:{x:0,y:0,width:t.offsetWidth,height:t.offsetHeight}}}({anchor:e,floating:t}),{x:r,y:s}=function({anchor:e,floating:t},n){const i="x"===function(e){return["top","bottom"].includes(Sg(e))?"y":"x"}(n)?"y":"x",r="y"===i?"height":"width",s=Sg(n),a=e.x+e.width/2-t.width/2,o=e.y+e.height/2-t.height/2,l=e[r]/2-t[r]/2;let d;switch(s){case"top":d={x:a,y:e.y-t.height};break;case"bottom":d={x:a,y:e.y+e.height};break;case"right":d={x:e.x+e.width,y:o};break;case"left":d={x:e.x-t.width,y:o};break;default:d={x:e.x,y:e.y}}switch(n.split("-")[1]){case"start":d[i]-=l;break;case"end":d[i]+=l}return d}(i,n);return{x:r,y:s}}function Ag(e,t){let n=e.getBoundingClientRect(),i=t.getBoundingClientRect();return{x:n.x-i.x,y:n.y-i.y,width:n.width,height:n.height}}function Sg(e){return e.split("-")[0]}var kg=Object.defineProperty,wg=(e,t,n)=>(((e,t,n)=>{t in e?kg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class Lg extends Event{constructor({action:e="auto",relatedTarget:t,...n}){super("invoke",n),wg(this,"action"),wg(this,"relatedTarget"),this.action=e,this.relatedTarget=t}}class Rg extends Event{constructor({newState:e,oldState:t,...n}){super("toggle",n),wg(this,"newState"),wg(this,"oldState"),this.newState=e,this.oldState=t}}var Cg,Ig,xg,Dg,Mg,Og,Pg,Ng,Fg,Ug,Bg,$g,Hg,Vg,Wg,Gg,Kg,qg,jg,Yg,zg,Xg,Qg,Zg,Jg,ev,tv,nv,iv,rv,sv,av,ov,lv,dv,cv,uv,hv,mv,pv,fv,gv,vv,bv,yv,Ev=Object.defineProperty,Tv=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},_v=(e,t,n)=>(Tv(e,t,"read from private field"),n?n.call(e):t.get(e)),Av=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Sv=(e,t,n,i)=>(Tv(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),kv=(e,t,n)=>(Tv(e,t,"access private method"),n);function wv({type:e,text:t,value:n,checked:i}){const r=Im.createElement("media-chrome-menu-item");r.type=null!=e?e:"",r.part.add("menu-item"),e&&r.part.add(e),r.value=n,r.checked=i;const s=Im.createElement("span");return s.textContent=t,r.append(s),r}function Lv(e,t){let n=e.querySelector(`:scope > [slot="${t}"]`);if("SLOT"==(null==n?void 0:n.nodeName)&&(n=n.assignedElements({flatten:!0})[0]),n)return n=n.cloneNode(!0),n;let i=e.shadowRoot.querySelector(`[name="${t}"] > svg`);return i?i.cloneNode(!0):""}const Rv=Im.createElement("template");Rv.innerHTML='\n  <style>\n    :host {\n      font: var(--media-font,\n        var(--media-font-weight, normal)\n        var(--media-font-size, 14px) /\n        var(--media-text-content-height, var(--media-control-height, 24px))\n        var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));\n      color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));\n      background: var(--media-menu-background, var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .8))));\n      border-radius: var(--media-menu-border-radius);\n      border: var(--media-menu-border, none);\n      display: var(--media-menu-display, inline-flex);\n      transition: var(--media-menu-transition-in,\n        visibility 0s,\n        opacity .2s ease-out,\n        transform .15s ease-out,\n        left .2s ease-in-out,\n        min-width .2s ease-in-out,\n        min-height .2s ease-in-out\n      ) !important;\n      \n      visibility: var(--media-menu-visibility, visible);\n      opacity: var(--media-menu-opacity, 1);\n      max-height: var(--media-menu-max-height, var(--_menu-max-height, 300px));\n      transform: var(--media-menu-transform-in, translateY(0) scale(1));\n      flex-direction: column;\n      \n      min-height: 0;\n      position: relative;\n      box-sizing: border-box;\n    }\n\n    :host([hidden]) {\n      transition: var(--media-menu-transition-out,\n        visibility .15s ease-in,\n        opacity .15s ease-in,\n        transform .15s ease-in\n      ) !important;\n      visibility: var(--media-menu-hidden-visibility, hidden);\n      opacity: var(--media-menu-hidden-opacity, 0);\n      max-height: var(--media-menu-hidden-max-height,\n        var(--media-menu-max-height, var(--_menu-max-height, 300px)));\n      transform: var(--media-menu-transform-out, translateY(2px) scale(.99));\n      pointer-events: none;\n    }\n\n    :host([slot="submenu"]) {\n      background: none;\n      width: 100%;\n      min-height: 100%;\n      position: absolute;\n      bottom: 0;\n      right: -100%;\n    }\n\n    #container {\n      display: flex;\n      flex-direction: column;\n      min-height: 0;\n      transition: transform .2s ease-out;\n      transform: translate(0, 0);\n    }\n\n    #container.has-expanded {\n      transition: transform .2s ease-in;\n      transform: translate(-100%, 0);\n    }\n\n    slot[name="header"] {\n      display: flex;\n      padding: .4em .7em;\n      border-bottom: 1px solid rgb(255 255 255 / .25);\n      cursor: default;\n    }\n\n    slot[name="header"][hidden] {\n      display: none;\n    }\n\n    button[part~="back"] {\n      background: none;\n      color: inherit;\n      border: none;\n      padding: 0;\n      font: inherit;\n      cursor: pointer;\n      outline: inherit;\n      display: inline-flex;\n      align-items: center;\n      cursor: pointer;\n    }\n\n    svg[part~="back"] {\n      height: var(--media-menu-icon-height, var(--media-control-height, 24px));\n      fill: var(--media-icon-color, var(--media-primary-color, rgb(238 238 238)));\n      display: block;\n      margin-right: .5ch;\n    }\n\n    slot:not([name]) {\n      gap: var(--media-menu-gap);\n      flex-direction: var(--media-menu-flex-direction, column);\n      overflow: var(--media-menu-overflow, hidden auto);\n      display: flex;\n      min-height: 0;\n    }\n\n    :host([role="menu"]) slot:not([name]) {\n      padding-block: .4em;\n    }\n\n    slot:not([name])::slotted([role="menu"]) {\n      background: none;\n    }\n\n    media-chrome-menu-item > span {\n      margin-right: .5ch;\n      max-width: var(--media-menu-item-max-width);\n      text-overflow: ellipsis;\n      overflow: hidden;\n    }\n  </style>\n  <style id="layout-row" media="width:0">\n\n    slot[name="header"] {\n      padding: .4em .5em;\n    }\n\n    slot:not([name]) {\n      gap: var(--media-menu-gap, .25em);\n      flex-direction: var(--media-menu-flex-direction, row);\n      padding-inline: .5em;\n    }\n\n    media-chrome-menu-item {\n      padding: .3em .5em;\n    }\n\n    media-chrome-menu-item[aria-checked="true"] {\n      background: var(--media-menu-item-checked-background, rgb(255 255 255 / .2));\n    }\n\n    \n    media-chrome-menu-item::part(checked-indicator) {\n      display: var(--media-menu-item-checked-indicator-display, none);\n    }\n  </style>\n  <div id="container">\n    <slot name="header" hidden>\n      <button part="back button" aria-label="Back to previous menu">\n        <slot name="back-icon">\n          <svg aria-hidden="true" viewBox="0 0 20 24" part="back indicator">\n            <path d="m11.88 17.585.742-.669-4.2-4.665 4.2-4.666-.743-.669-4.803 5.335 4.803 5.334Z"/>\n          </svg>\n        </slot>\n        <slot name="title"></slot>\n      </button>\n    </slot>\n    <slot></slot>\n  </div>\n  <slot name="checked-indicator" hidden></slot>\n';const Cv="style",Iv="hidden",xv="disabled",Dv="anchor";class Mv extends Cm.HTMLElement{constructor(){super(),Av(this,Fg),Av(this,$g),Av(this,Vg),Av(this,Gg),Av(this,qg),Av(this,Xg),Av(this,Zg),Av(this,ev),Av(this,nv),Av(this,rv),Av(this,av),Av(this,lv),Av(this,cv),Av(this,hv),Av(this,pv),Av(this,gv),Av(this,bv),Av(this,Cg,void 0),Av(this,Ig,void 0),Av(this,xg,void 0),Av(this,Dg,""),Av(this,Mg,null),Av(this,Og,new Set),Av(this,Pg,void 0),Av(this,Ng,!1),Av(this,Bg,(()=>{const e=_v(this,Og),t=new Set(this.items);for(const n of e)t.has(n)||this.dispatchEvent(new CustomEvent("removemenuitem",{detail:n}));for(const n of t)e.has(n)||this.dispatchEvent(new CustomEvent("addmenuitem",{detail:n}));Sv(this,Og,t)})),Av(this,Yg,(()=>{kv(this,Xg,Qg).call(this,!1),kv(this,Zg,Jg).call(this,!1)})),Av(this,zg,(()=>{kv(this,Xg,Qg).call(this,!1)})),this.shadowRoot||(this.attachShadow({mode:"open"}),this.nativeEl=this.constructor.template.content.cloneNode(!0),this.shadowRoot.append(this.nativeEl)),this.container=this.shadowRoot.querySelector("#container"),this.defaultSlot=this.shadowRoot.querySelector("slot:not([name])"),this.shadowRoot.addEventListener("slotchange",this),Sv(this,Pg,new MutationObserver(_v(this,Bg))),_v(this,Pg).observe(this.defaultSlot,{childList:!0})}static get observedAttributes(){return[xv,Iv,Cv,Dv,Yh.MEDIA_CONTROLLER]}static formatMenuItemText(e){return e}enable(){this.addEventListener("click",this),this.addEventListener("focusout",this),this.addEventListener("keydown",this),this.addEventListener("invoke",this),this.addEventListener("toggle",this)}disable(){this.removeEventListener("click",this),this.removeEventListener("focusout",this),this.removeEventListener("keyup",this),this.removeEventListener("invoke",this),this.removeEventListener("toggle",this)}handleEvent(e){switch(e.type){case"slotchange":kv(this,Fg,Ug).call(this,e);break;case"invoke":kv(this,Vg,Wg).call(this,e);break;case"click":kv(this,ev,tv).call(this,e);break;case"toggle":kv(this,rv,sv).call(this,e);break;case"focusout":kv(this,lv,dv).call(this,e);break;case"keydown":kv(this,cv,uv).call(this,e)}}connectedCallback(){var e,t;kv(this,$g,Hg).call(this),this.hasAttribute("disabled")||this.enable(),this.role||(this.role="menu"),Sv(this,Cg,Fm(this)),null==(t=null==(e=_v(this,Cg))?void 0:e.associateElement)||t.call(e,this),this.hidden||(Om(Nv(this),_v(this,Yg)),Om(this,_v(this,zg)))}disconnectedCallback(){var e,t;Pm(Nv(this),_v(this,Yg)),Pm(this,_v(this,zg)),this.disable(),null==(t=null==(e=_v(this,Cg))?void 0:e.unassociateElement)||t.call(e,this),Sv(this,Cg,null)}attributeChangedCallback(e,t,n){var i,r,s,a;e===Iv&&n!==t?(_v(this,Ng)||Sv(this,Ng,!0),this.hidden?kv(this,qg,jg).call(this):kv(this,Gg,Kg).call(this),this.dispatchEvent(new Rg({oldState:this.hidden?"open":"closed",newState:this.hidden?"closed":"open",bubbles:!0}))):e===Yh.MEDIA_CONTROLLER?(t&&(null==(r=null==(i=_v(this,Cg))?void 0:i.unassociateElement)||r.call(i,this),Sv(this,Cg,null)),n&&this.isConnected&&(Sv(this,Cg,Fm(this)),null==(a=null==(s=_v(this,Cg))?void 0:s.associateElement)||a.call(s,this))):e===xv&&n!==t?null==n?this.enable():this.disable():e===Cv&&n!==t&&kv(this,$g,Hg).call(this)}formatMenuItemText(e,t){return this.constructor.formatMenuItemText(e,t)}get anchor(){return this.getAttribute("anchor")}set anchor(e){this.setAttribute("anchor",`${e}`)}get anchorElement(){var e;return this.anchor?null==(e=Wm(this))?void 0:e.querySelector(`#${this.anchor}`):null}get items(){return this.defaultSlot.assignedElements({flatten:!0}).filter(Pv)}get radioGroupItems(){return this.items.filter((e=>"menuitemradio"===e.role))}get checkedItems(){return this.items.filter((e=>e.checked))}get value(){var e,t;return null!=(t=null==(e=this.checkedItems[0])?void 0:e.value)?t:""}set value(e){const t=this.items.find((t=>t.value===e));t&&kv(this,bv,yv).call(this,t)}focus(){if(Sv(this,Ig,Vm()),this.items.length)return kv(this,gv,vv).call(this,this.items[0]),void this.items[0].focus();const e=this.querySelector('[autofocus], [tabindex]:not([tabindex="-1"]), [role="menu"]');null==e||e.focus()}handleSelect(e){var t;const n=kv(this,hv,mv).call(this,e);n&&(kv(this,bv,yv).call(this,n,"checkbox"===n.type),_v(this,xg)&&!this.hidden&&(null==(t=_v(this,Ig))||t.focus(),this.hidden=!0))}get keysUsed(){return["Enter","Escape","Tab"," ","ArrowDown","ArrowUp","Home","End"]}handleMove(e){var t,n;const{key:i}=e,r=this.items,s=null!=(n=null!=(t=kv(this,hv,mv).call(this,e))?t:kv(this,pv,fv).call(this))?n:r[0],a=r.indexOf(s);let o=Math.max(0,a);"ArrowDown"===i?o++:"ArrowUp"===i?o--:"Home"===e.key?o=0:"End"===e.key&&(o=r.length-1),o<0&&(o=r.length-1),o>r.length-1&&(o=0),kv(this,gv,vv).call(this,r[o]),r[o].focus()}}var Ov;function Pv(e){return["menuitem","menuitemradio","menuitemcheckbox"].includes(null==e?void 0:e.role)}function Nv(e){var t;return null!=(t=e.getAttribute("bounds")?Hm(e,`#${e.getAttribute("bounds")}`):Nm(e)||e.parentElement)?t:e}Cg=new WeakMap,Ig=new WeakMap,xg=new WeakMap,Dg=new WeakMap,Mg=new WeakMap,Og=new WeakMap,Pg=new WeakMap,Ng=new WeakMap,Fg=new WeakSet,Ug=function(e){const t=e.target;for(let e of t.assignedNodes({flatten:!0}))3===e.nodeType&&""===e.textContent.trim()&&e.remove();if(["header","title"].includes(t.name)){this.shadowRoot.querySelector('slot[name="header"]').hidden=0===t.assignedNodes().length}t.name||_v(this,Bg).call(this)},Bg=new WeakMap,$g=new WeakSet,Hg=function(){var e;const t=this.shadowRoot.querySelector("#layout-row"),n=null==(e=getComputedStyle(this).getPropertyValue("--media-menu-layout"))?void 0:e.trim();t.setAttribute("media","row"===n?"":"width:0")},Vg=new WeakSet,Wg=function(e){Sv(this,xg,e.relatedTarget),$m(this,e.relatedTarget)||(this.hidden=!this.hidden)},Gg=new WeakSet,Kg=function(){var e;null==(e=_v(this,xg))||e.setAttribute("aria-expanded","true"),requestAnimationFrame((()=>kv(this,Xg,Qg).call(this,!1))),this.addEventListener("transitionend",(()=>this.focus()),{once:!0}),Om(Nv(this),_v(this,Yg)),Om(this,_v(this,zg))},qg=new WeakSet,jg=function(){var e;null==(e=_v(this,xg))||e.setAttribute("aria-expanded","false"),Pm(Nv(this),_v(this,Yg)),Pm(this,_v(this,zg))},Yg=new WeakMap,zg=new WeakMap,Xg=new WeakSet,Qg=function(e,t){if(this.hasAttribute("mediacontroller")&&!this.anchor)return;if(this.hidden||!this.anchorElement)return;const{x:n,y:i}=_g({anchor:this.anchorElement,floating:this,placement:"top-start"});null!=t||(t=this.offsetWidth);const r=Nv(this).getBoundingClientRect(),s=this.anchorElement.getBoundingClientRect(),a=r.width-n-t,o=r.height-i-this.offsetHeight,l=r.height-s.height,{style:d}=Km(this.shadowRoot,":host");e||d.setProperty("--media-menu-transition-in","none"),d.setProperty("position","absolute"),d.setProperty("right",`${Math.max(0,a)}px`),d.setProperty("bottom",`${o}px`),d.setProperty("--_menu-max-height",`${l}px`),d.removeProperty("--media-menu-transition-in")},Zg=new WeakSet,Jg=function(e){const t=this.querySelector('[role="menuitem"][aria-haspopup][aria-expanded="true"]'),n=null==t?void 0:t.querySelector('[role="menu"]'),{style:i}=Km(this.shadowRoot,":host");if(e||i.setProperty("--media-menu-transition-in","none"),n){const i=n.offsetHeight,r=Math.max(n.offsetWidth,t.offsetWidth);this.style.setProperty("min-width",`${r}px`),this.style.setProperty("min-height",`${i}px`),kv(this,Xg,Qg).call(this,e,r)}else this.style.removeProperty("min-width"),this.style.removeProperty("min-height"),kv(this,Xg,Qg).call(this,e);i.removeProperty("--media-menu-transition-in")},ev=new WeakSet,tv=function(e){var t;if(e.stopPropagation(),e.composedPath().includes(_v(this,nv,iv)))return null==(t=_v(this,Ig))||t.focus(),void(this.hidden=!0);const n=kv(this,hv,mv).call(this,e);n&&!n.hasAttribute("disabled")&&(kv(this,gv,vv).call(this,n),this.handleSelect(e))},nv=new WeakSet,iv=function(){var e;return null==(e=this.shadowRoot.querySelector('slot[name="header"]').assignedElements({flatten:!0}))?void 0:e.find((e=>e.part.contains("back")&&e.part.contains("button")))},rv=new WeakSet,sv=function(e){if(e.target===this)return;kv(this,av,ov).call(this);const t=Array.from(this.querySelectorAll('[role="menuitem"][aria-haspopup]'));for(const n of t)n.invokeTargetElement!=e.target&&("open"!=e.newState||"true"!=n.getAttribute("aria-expanded")||n.invokeTargetElement.hidden||n.invokeTargetElement.dispatchEvent(new Lg({relatedTarget:n})));for(const e of t)e.setAttribute("aria-expanded",`${!e.submenuElement.hidden}`);kv(this,Zg,Jg).call(this,!0)},av=new WeakSet,ov=function(){const e=this.querySelector('[role="menuitem"] > [role="menu"]:not([hidden])');this.container.classList.toggle("has-expanded",!!e)},lv=new WeakSet,dv=function(e){var t;$m(this,e.relatedTarget)||(_v(this,Ng)&&(null==(t=_v(this,Ig))||t.focus()),_v(this,xg)&&_v(this,xg)!==e.relatedTarget&&!this.hidden&&(this.hidden=!0))},cv=new WeakSet,uv=function(e){var t,n,i,r,s;const{key:a,ctrlKey:o,altKey:l,metaKey:d}=e;if(!(o||l||d)&&this.keysUsed.includes(a))if(e.preventDefault(),e.stopPropagation(),"Tab"===a){if(_v(this,Ng))return void(this.hidden=!0);e.shiftKey?null==(n=null==(t=this.previousElementSibling)?void 0:t.focus)||n.call(t):null==(r=null==(i=this.nextElementSibling)?void 0:i.focus)||r.call(i),this.blur()}else"Escape"===a?(null==(s=_v(this,Ig))||s.focus(),_v(this,Ng)&&(this.hidden=!0)):"Enter"===a||" "===a?this.handleSelect(e):this.handleMove(e)},hv=new WeakSet,mv=function(e){return e.composedPath().find((e=>["menuitemradio","menuitemcheckbox"].includes(e.role)))},pv=new WeakSet,fv=function(){return this.items.find((e=>0===e.tabIndex))},gv=new WeakSet,vv=function(e){for(const t of this.items)t.tabIndex=t===e?0:-1},bv=new WeakSet,yv=function(e,t){const n=[...this.checkedItems];"radio"===e.type&&this.radioGroupItems.forEach((e=>e.checked=!1)),e.checked=!t||!e.checked,this.checkedItems.some(((e,t)=>e!=n[t]))&&this.dispatchEvent(new Event("change",{bubbles:!0,composed:!0}))},((e,t,n)=>{t in e?Ev(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(Mv,"symbol"!=typeof(Ov="template")?Ov+"":Ov,Rv),Cm.customElements.get("media-chrome-menu")||Cm.customElements.define("media-chrome-menu",Mv);var Fv,Uv,Bv,$v,Hv,Vv,Wv=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Gv=(e,t,n)=>(Wv(e,t,"read from private field"),n?n.call(e):t.get(e)),Kv=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},qv=(e,t,n,i)=>(Wv(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),jv=(e,t,n)=>(Wv(e,t,"access private method"),n);class Yv extends Mv{constructor(){super(...arguments),Kv(this,Bv),Kv(this,Hv),Kv(this,Fv,[]),Kv(this,Uv,void 0)}static get observedAttributes(){return[...super.observedAttributes,Qh.MEDIA_AUDIO_TRACK_LIST,Qh.MEDIA_AUDIO_TRACK_ENABLED,Qh.MEDIA_AUDIO_TRACK_UNAVAILABLE]}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),e===Qh.MEDIA_AUDIO_TRACK_ENABLED&&t!==n?this.value=n:e===Qh.MEDIA_AUDIO_TRACK_LIST&&t!==n&&(qv(this,Fv,pm(n)),jv(this,Bv,$v).call(this))}connectedCallback(){super.connectedCallback(),this.addEventListener("change",jv(this,Hv,Vv))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("change",jv(this,Hv,Vv))}get anchorElement(){return"auto"!==this.anchor?super.anchorElement:Nm(this).querySelector("media-audio-track-menu-button")}get mediaAudioTrackList(){return Gv(this,Fv)}set mediaAudioTrackList(e){qv(this,Fv,e),jv(this,Bv,$v).call(this)}get mediaAudioTrackEnabled(){return Qm(this,Qh.MEDIA_AUDIO_TRACK_ENABLED)}set mediaAudioTrackEnabled(e){Zm(this,Qh.MEDIA_AUDIO_TRACK_ENABLED,e)}}Fv=new WeakMap,Uv=new WeakMap,Bv=new WeakSet,$v=function(){if(Gv(this,Uv)===JSON.stringify(this.mediaAudioTrackList))return;qv(this,Uv,JSON.stringify(this.mediaAudioTrackList));const e=this.mediaAudioTrackList;this.defaultSlot.textContent="";for(const t of e){const e=wv({type:"radio",text:this.formatMenuItemText(t.label,t),value:`${t.id}`,checked:t.enabled});e.prepend(Lv(this,"checked-indicator")),this.defaultSlot.append(e)}},Hv=new WeakSet,Vv=function(){if(null==this.value)return;const e=new Cm.CustomEvent(jh.MEDIA_AUDIO_TRACK_REQUEST,{composed:!0,bubbles:!0,detail:this.value});this.dispatchEvent(e)},Cm.customElements.get("media-audio-track-menu")||Cm.customElements.define("media-audio-track-menu",Yv);class zv extends vg{connectedCallback(){super.connectedCallback(),this.invokeTargetElement&&this.setAttribute("aria-haspopup","menu")}get invokeTarget(){return this.getAttribute("invoketarget")}set invokeTarget(e){this.setAttribute("invoketarget",`${e}`)}get invokeTargetElement(){var e;return this.invokeTarget?null==(e=Wm(this))?void 0:e.querySelector(`#${this.invokeTarget}`):null}handleClick(){this.invokeTargetElement.dispatchEvent(new Lg({relatedTarget:this}))}}Cm.customElements.get("media-chrome-menu-button")||Cm.customElements.define("media-chrome-menu-button",zv);const Xv=Im.createElement("template");Xv.innerHTML='\n  <slot name="icon"><svg aria-hidden="true" viewBox="0 0 24 24">\n  <path d="M11 17H9.5V7H11v10Zm-3-3H6.5v-4H8v4Zm6-5h-1.5v6H14V9Zm3 7h-1.5V8H17v8Z"/>\n  <path d="M22 12c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2s10 4.477 10 10Zm-2 0a8 8 0 1 0-16 0 8 8 0 0 0 16 0Z"/>\n</svg></slot>\n';class Qv extends zv{static get observedAttributes(){return[...super.observedAttributes,Qh.MEDIA_AUDIO_TRACK_ENABLED,Qh.MEDIA_AUDIO_TRACK_UNAVAILABLE]}constructor(){super({slotTemplate:Xv})}connectedCallback(){super.connectedCallback(),this.setAttribute("aria-label",dm.AUDIO_TRACKS())}get invokeTargetElement(){return null!=this.invokeTarget?super.invokeTargetElement:Nm(this).querySelector("media-audio-track-menu")}get mediaAudioTrackEnabled(){return Qm(this,Qh.MEDIA_AUDIO_TRACK_ENABLED)}set mediaAudioTrackEnabled(e){Zm(this,Qh.MEDIA_AUDIO_TRACK_ENABLED,e)}}Cm.customElements.get("media-audio-track-menu-button")||Cm.customElements.define("media-audio-track-menu-button",Qv);const Zv=Im.createElement("template");Zv.innerHTML='\n  <style>\n    :host([aria-checked="true"]) slot[name=off] {\n      display: none !important;\n    }\n\n    \n    :host(:not([aria-checked="true"])) slot[name=on] {\n      display: none !important;\n    }\n  </style>\n\n  <slot name="icon">\n    <slot name="on"><svg aria-hidden="true" viewBox="0 0 26 24">\n  <path d="M22.83 5.68a2.58 2.58 0 0 0-2.3-2.5c-3.62-.24-11.44-.24-15.06 0a2.58 2.58 0 0 0-2.3 2.5c-.23 4.21-.23 8.43 0 12.64a2.58 2.58 0 0 0 2.3 2.5c3.62.24 11.44.24 15.06 0a2.58 2.58 0 0 0 2.3-2.5c.23-4.21.23-8.43 0-12.64Zm-11.39 9.45a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.92 3.92 0 0 1 .92-2.77 3.18 3.18 0 0 1 2.43-1 2.94 2.94 0 0 1 2.13.78c.364.359.62.813.74 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.17 1.61 1.61 0 0 0-1.29.58 2.79 2.79 0 0 0-.5 1.89 3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.48 1.48 0 0 0 1-.37 2.1 2.1 0 0 0 .59-1.14l1.4.44a3.23 3.23 0 0 1-1.07 1.69Zm7.22 0a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.88 3.88 0 0 1 .93-2.77 3.14 3.14 0 0 1 2.42-1 3 3 0 0 1 2.16.82 2.8 2.8 0 0 1 .73 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.21 1.61 1.61 0 0 0-1.29.58A2.79 2.79 0 0 0 15 12a3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.44 1.44 0 0 0 1-.37 2.1 2.1 0 0 0 .6-1.15l1.4.44a3.17 3.17 0 0 1-1.1 1.7Z"/>\n</svg></slot>\n    <slot name="off"><svg aria-hidden="true" viewBox="0 0 26 24">\n  <path d="M17.73 14.09a1.4 1.4 0 0 1-1 .37 1.579 1.579 0 0 1-1.27-.58A3 3 0 0 1 15 12a2.8 2.8 0 0 1 .5-1.85 1.63 1.63 0 0 1 1.29-.57 1.47 1.47 0 0 1 1.51 1.2l1.43-.34A2.89 2.89 0 0 0 19 9.07a3 3 0 0 0-2.14-.78 3.14 3.14 0 0 0-2.42 1 3.91 3.91 0 0 0-.93 2.78 3.74 3.74 0 0 0 .92 2.66 3.07 3.07 0 0 0 2.34 1 3.07 3.07 0 0 0 1.91-.57 3.17 3.17 0 0 0 1.07-1.74l-1.4-.45c-.083.43-.3.822-.62 1.12Zm-7.22 0a1.43 1.43 0 0 1-1 .37 1.58 1.58 0 0 1-1.27-.58A3 3 0 0 1 7.76 12a2.8 2.8 0 0 1 .5-1.85 1.63 1.63 0 0 1 1.29-.57 1.47 1.47 0 0 1 1.51 1.2l1.43-.34a2.81 2.81 0 0 0-.74-1.32 2.94 2.94 0 0 0-2.13-.78 3.18 3.18 0 0 0-2.43 1 4 4 0 0 0-.92 2.78 3.74 3.74 0 0 0 .92 2.66 3.07 3.07 0 0 0 2.34 1 3.07 3.07 0 0 0 1.91-.57 3.23 3.23 0 0 0 1.07-1.74l-1.4-.45a2.06 2.06 0 0 1-.6 1.07Zm12.32-8.41a2.59 2.59 0 0 0-2.3-2.51C18.72 3.05 15.86 3 13 3c-2.86 0-5.72.05-7.53.17a2.59 2.59 0 0 0-2.3 2.51c-.23 4.207-.23 8.423 0 12.63a2.57 2.57 0 0 0 2.3 2.5c1.81.13 4.67.19 7.53.19 2.86 0 5.72-.06 7.53-.19a2.57 2.57 0 0 0 2.3-2.5c.23-4.207.23-8.423 0-12.63Zm-1.49 12.53a1.11 1.11 0 0 1-.91 1.11c-1.67.11-4.45.18-7.43.18-2.98 0-5.76-.07-7.43-.18a1.11 1.11 0 0 1-.91-1.11c-.21-4.14-.21-8.29 0-12.43a1.11 1.11 0 0 1 .91-1.11C7.24 4.56 10 4.49 13 4.49s5.76.07 7.43.18a1.11 1.11 0 0 1 .91 1.11c.21 4.14.21 8.29 0 12.43Z"/>\n</svg></slot>\n  </slot>\n';const Jv=e=>{e.setAttribute("aria-checked",zp(e))};class eb extends vg{static get observedAttributes(){return[...super.observedAttributes,Qh.MEDIA_SUBTITLES_LIST,Qh.MEDIA_SUBTITLES_SHOWING]}constructor(e={}){super({slotTemplate:Zv,...e}),this._captionsReady=!1}connectedCallback(){super.connectedCallback(),this.setAttribute("role","switch"),this.setAttribute("aria-label",dm.CLOSED_CAPTIONS()),Jv(this)}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),e===Qh.MEDIA_SUBTITLES_SHOWING&&Jv(this)}get mediaSubtitlesList(){return tb(this,Qh.MEDIA_SUBTITLES_LIST)}set mediaSubtitlesList(e){nb(this,Qh.MEDIA_SUBTITLES_LIST,e)}get mediaSubtitlesShowing(){return tb(this,Qh.MEDIA_SUBTITLES_SHOWING)}set mediaSubtitlesShowing(e){nb(this,Qh.MEDIA_SUBTITLES_SHOWING,e)}handleClick(){this.dispatchEvent(new Cm.CustomEvent(jh.MEDIA_TOGGLE_SUBTITLES_REQUEST,{composed:!0,bubbles:!0}))}}const tb=(e,t)=>{const n=e.getAttribute(t);return n?Vp(n):[]},nb=(e,t,n)=>{if(!(null==n?void 0:n.length))return void e.removeAttribute(t);const i=Kp(n);e.getAttribute(t)!==i&&e.setAttribute(t,i)};Cm.customElements.get("media-captions-button")||Cm.customElements.define("media-captions-button",eb);var ib,rb,sb,ab,ob,lb=Object.defineProperty,db=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},cb=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},ub=(e,t,n)=>(db(e,t,"access private method"),n);const hb=Im.createElement("template");hb.innerHTML=Mv.template.innerHTML+'\n  <slot name="captions-indicator" hidden>\n  <svg aria-hidden="true" viewBox="0 0 26 24" part="captions-indicator indicator">\n    <path d="M22.83 5.68a2.58 2.58 0 0 0-2.3-2.5c-3.62-.24-11.44-.24-15.06 0a2.58 2.58 0 0 0-2.3 2.5c-.23 4.21-.23 8.43 0 12.64a2.58 2.58 0 0 0 2.3 2.5c3.62.24 11.44.24 15.06 0a2.58 2.58 0 0 0 2.3-2.5c.23-4.21.23-8.43 0-12.64Zm-11.39 9.45a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.92 3.92 0 0 1 .92-2.77 3.18 3.18 0 0 1 2.43-1 2.94 2.94 0 0 1 2.13.78c.364.359.62.813.74 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.17 1.61 1.61 0 0 0-1.29.58 2.79 2.79 0 0 0-.5 1.89 3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.48 1.48 0 0 0 1-.37 2.1 2.1 0 0 0 .59-1.14l1.4.44a3.23 3.23 0 0 1-1.07 1.69Zm7.22 0a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.88 3.88 0 0 1 .93-2.77 3.14 3.14 0 0 1 2.42-1 3 3 0 0 1 2.16.82 2.8 2.8 0 0 1 .73 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.21 1.61 1.61 0 0 0-1.29.58A2.79 2.79 0 0 0 15 12a3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.44 1.44 0 0 0 1-.37 2.1 2.1 0 0 0 .6-1.15l1.4.44a3.17 3.17 0 0 1-1.1 1.7Z"/>\n  </svg></slot>';class mb extends Mv{constructor(){super(...arguments),cb(this,rb),cb(this,ab),cb(this,ib,void 0)}static get observedAttributes(){return[...super.observedAttributes,Qh.MEDIA_SUBTITLES_LIST,Qh.MEDIA_SUBTITLES_SHOWING]}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),e===Qh.MEDIA_SUBTITLES_LIST&&t!==n?ub(this,rb,sb).call(this):e===Qh.MEDIA_SUBTITLES_SHOWING&&t!==n&&(this.value=n)}connectedCallback(){super.connectedCallback(),this.addEventListener("change",ub(this,ab,ob))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("change",ub(this,ab,ob))}get anchorElement(){return"auto"!==this.anchor?super.anchorElement:Nm(this).querySelector("media-captions-menu-button")}get mediaSubtitlesList(){return pb(this,Qh.MEDIA_SUBTITLES_LIST)}set mediaSubtitlesList(e){fb(this,Qh.MEDIA_SUBTITLES_LIST,e)}get mediaSubtitlesShowing(){return pb(this,Qh.MEDIA_SUBTITLES_SHOWING)}set mediaSubtitlesShowing(e){fb(this,Qh.MEDIA_SUBTITLES_SHOWING,e)}}ib=new WeakMap,rb=new WeakSet,sb=function(){var e;if(((e,t,n)=>(db(e,t,"read from private field"),n?n.call(e):t.get(e)))(this,ib)===JSON.stringify(this.mediaSubtitlesList))return;((e,t,n,i)=>{db(e,t,"write to private field"),i?i.call(e,n):t.set(e,n)})(this,ib,JSON.stringify(this.mediaSubtitlesList)),this.defaultSlot.textContent="";const t=!this.value,n=wv({type:"radio",text:this.formatMenuItemText("Off"),value:"off",checked:t});n.prepend(Lv(this,"checked-indicator")),this.defaultSlot.append(n);const i=this.mediaSubtitlesList;for(const t of i){const n=wv({type:"radio",text:this.formatMenuItemText(t.label,t),value:Gp(t),checked:this.value==Gp(t)});n.prepend(Lv(this,"checked-indicator"));"captions"===(null!=(e=t.kind)?e:"subs")&&n.append(Lv(this,"captions-indicator")),this.defaultSlot.append(n)}},ab=new WeakSet,ob=function(){const e=this.mediaSubtitlesShowing,t=this.getAttribute(Qh.MEDIA_SUBTITLES_SHOWING),n=this.value!==t;if((null==e?void 0:e.length)&&n&&this.dispatchEvent(new Cm.CustomEvent(jh.MEDIA_DISABLE_SUBTITLES_REQUEST,{composed:!0,bubbles:!0,detail:e})),!this.value||!n)return;const i=new Cm.CustomEvent(jh.MEDIA_SHOW_SUBTITLES_REQUEST,{composed:!0,bubbles:!0,detail:this.value});this.dispatchEvent(i)},((e,t,n)=>{((e,t,n)=>{t in e?lb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n)})(mb,"template",hb);const pb=(e,t)=>{const n=e.getAttribute(t);return n?Vp(n):[]},fb=(e,t,n)=>{if(!(null==n?void 0:n.length))return void e.removeAttribute(t);const i=Kp(n);e.getAttribute(t)!==i&&e.setAttribute(t,i)};Cm.customElements.get("media-captions-menu")||Cm.customElements.define("media-captions-menu",mb);const gb=Im.createElement("template");gb.innerHTML='\n  <style>\n    :host([aria-checked="true"]) slot[name=off] {\n      display: none !important;\n    }\n\n    \n    :host(:not([aria-checked="true"])) slot[name=on] {\n      display: none !important;\n    }\n  </style>\n\n  <slot name="icon">\n    <slot name="on"><svg aria-hidden="true" viewBox="0 0 26 24">\n  <path d="M22.83 5.68a2.58 2.58 0 0 0-2.3-2.5c-3.62-.24-11.44-.24-15.06 0a2.58 2.58 0 0 0-2.3 2.5c-.23 4.21-.23 8.43 0 12.64a2.58 2.58 0 0 0 2.3 2.5c3.62.24 11.44.24 15.06 0a2.58 2.58 0 0 0 2.3-2.5c.23-4.21.23-8.43 0-12.64Zm-11.39 9.45a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.92 3.92 0 0 1 .92-2.77 3.18 3.18 0 0 1 2.43-1 2.94 2.94 0 0 1 2.13.78c.364.359.62.813.74 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.17 1.61 1.61 0 0 0-1.29.58 2.79 2.79 0 0 0-.5 1.89 3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.48 1.48 0 0 0 1-.37 2.1 2.1 0 0 0 .59-1.14l1.4.44a3.23 3.23 0 0 1-1.07 1.69Zm7.22 0a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.88 3.88 0 0 1 .93-2.77 3.14 3.14 0 0 1 2.42-1 3 3 0 0 1 2.16.82 2.8 2.8 0 0 1 .73 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.21 1.61 1.61 0 0 0-1.29.58A2.79 2.79 0 0 0 15 12a3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.44 1.44 0 0 0 1-.37 2.1 2.1 0 0 0 .6-1.15l1.4.44a3.17 3.17 0 0 1-1.1 1.7Z"/>\n</svg></slot>\n    <slot name="off"><svg aria-hidden="true" viewBox="0 0 26 24">\n  <path d="M17.73 14.09a1.4 1.4 0 0 1-1 .37 1.579 1.579 0 0 1-1.27-.58A3 3 0 0 1 15 12a2.8 2.8 0 0 1 .5-1.85 1.63 1.63 0 0 1 1.29-.57 1.47 1.47 0 0 1 1.51 1.2l1.43-.34A2.89 2.89 0 0 0 19 9.07a3 3 0 0 0-2.14-.78 3.14 3.14 0 0 0-2.42 1 3.91 3.91 0 0 0-.93 2.78 3.74 3.74 0 0 0 .92 2.66 3.07 3.07 0 0 0 2.34 1 3.07 3.07 0 0 0 1.91-.57 3.17 3.17 0 0 0 1.07-1.74l-1.4-.45c-.083.43-.3.822-.62 1.12Zm-7.22 0a1.43 1.43 0 0 1-1 .37 1.58 1.58 0 0 1-1.27-.58A3 3 0 0 1 7.76 12a2.8 2.8 0 0 1 .5-1.85 1.63 1.63 0 0 1 1.29-.57 1.47 1.47 0 0 1 1.51 1.2l1.43-.34a2.81 2.81 0 0 0-.74-1.32 2.94 2.94 0 0 0-2.13-.78 3.18 3.18 0 0 0-2.43 1 4 4 0 0 0-.92 2.78 3.74 3.74 0 0 0 .92 2.66 3.07 3.07 0 0 0 2.34 1 3.07 3.07 0 0 0 1.91-.57 3.23 3.23 0 0 0 1.07-1.74l-1.4-.45a2.06 2.06 0 0 1-.6 1.07Zm12.32-8.41a2.59 2.59 0 0 0-2.3-2.51C18.72 3.05 15.86 3 13 3c-2.86 0-5.72.05-7.53.17a2.59 2.59 0 0 0-2.3 2.51c-.23 4.207-.23 8.423 0 12.63a2.57 2.57 0 0 0 2.3 2.5c1.81.13 4.67.19 7.53.19 2.86 0 5.72-.06 7.53-.19a2.57 2.57 0 0 0 2.3-2.5c.23-4.207.23-8.423 0-12.63Zm-1.49 12.53a1.11 1.11 0 0 1-.91 1.11c-1.67.11-4.45.18-7.43.18-2.98 0-5.76-.07-7.43-.18a1.11 1.11 0 0 1-.91-1.11c-.21-4.14-.21-8.29 0-12.43a1.11 1.11 0 0 1 .91-1.11C7.24 4.56 10 4.49 13 4.49s5.76.07 7.43.18a1.11 1.11 0 0 1 .91 1.11c.21 4.14.21 8.29 0 12.43Z"/>\n</svg></slot>\n  </slot>\n';const vb=e=>{e.setAttribute("aria-checked",zp(e))};class bb extends zv{static get observedAttributes(){return[...super.observedAttributes,Qh.MEDIA_SUBTITLES_LIST,Qh.MEDIA_SUBTITLES_SHOWING]}constructor(e={}){super({slotTemplate:gb,...e}),this._captionsReady=!1}connectedCallback(){super.connectedCallback(),this.setAttribute("aria-label",dm.CLOSED_CAPTIONS()),vb(this)}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),e===Qh.MEDIA_SUBTITLES_SHOWING&&vb(this)}get invokeTargetElement(){return null!=this.invokeTarget?super.invokeTargetElement:Nm(this).querySelector("media-captions-menu")}get mediaSubtitlesList(){return yb(this,Qh.MEDIA_SUBTITLES_LIST)}set mediaSubtitlesList(e){Eb(this,Qh.MEDIA_SUBTITLES_LIST,e)}get mediaSubtitlesShowing(){return yb(this,Qh.MEDIA_SUBTITLES_SHOWING)}set mediaSubtitlesShowing(e){Eb(this,Qh.MEDIA_SUBTITLES_SHOWING,e)}}const yb=(e,t)=>{const n=e.getAttribute(t);return n?Vp(n):[]},Eb=(e,t,n)=>{if(!(null==n?void 0:n.length))return void e.removeAttribute(t);const i=Kp(n);e.getAttribute(t)!==i&&e.setAttribute(t,i)};Cm.customElements.get("media-captions-menu-button")||Cm.customElements.define("media-captions-menu-button",bb);const Tb=Im.createElement("template");Tb.innerHTML=`\n  <style>\n  :host([${Qh.MEDIA_IS_CASTING}]) slot:not([name=exit]):not([name=icon]) {\n    display: none !important;\n  }\n\n  \n  :host(:not([${Qh.MEDIA_IS_CASTING}])) slot:not([name=enter]):not([name=icon]) {\n    display: none !important;\n  }\n  </style>\n\n  <slot name="icon">\n    <slot name="enter"><svg aria-hidden="true" viewBox="0 0 24 24"><g><path class="cast_caf_icon_arch0" d="M1,18 L1,21 L4,21 C4,19.3 2.66,18 1,18 L1,18 Z"/><path class="cast_caf_icon_arch1" d="M1,14 L1,16 C3.76,16 6,18.2 6,21 L8,21 C8,17.13 4.87,14 1,14 L1,14 Z"/><path class="cast_caf_icon_arch2" d="M1,10 L1,12 C5.97,12 10,16.0 10,21 L12,21 C12,14.92 7.07,10 1,10 L1,10 Z"/><path class="cast_caf_icon_box" d="M21,3 L3,3 C1.9,3 1,3.9 1,5 L1,8 L3,8 L3,5 L21,5 L21,19 L14,19 L14,21 L21,21 C22.1,21 23,20.1 23,19 L23,5 C23,3.9 22.1,3 21,3 L21,3 Z"/></g></svg></slot>\n    <slot name="exit"><svg aria-hidden="true" viewBox="0 0 24 24"><g><path class="cast_caf_icon_arch0" d="M1,18 L1,21 L4,21 C4,19.3 2.66,18 1,18 L1,18 Z"/><path class="cast_caf_icon_arch1" d="M1,14 L1,16 C3.76,16 6,18.2 6,21 L8,21 C8,17.13 4.87,14 1,14 L1,14 Z"/><path class="cast_caf_icon_arch2" d="M1,10 L1,12 C5.97,12 10,16.0 10,21 L12,21 C12,14.92 7.07,10 1,10 L1,10 Z"/><path class="cast_caf_icon_box" d="M21,3 L3,3 C1.9,3 1,3.9 1,5 L1,8 L3,8 L3,5 L21,5 L21,19 L14,19 L14,21 L21,21 C22.1,21 23,20.1 23,19 L23,5 C23,3.9 22.1,3 21,3 L21,3 Z"/><path class="cast_caf_icon_boxfill" d="M5,7 L5,8.63 C8,8.6 13.37,14 13.37,17 L19,17 L19,7 Z"/></g></svg></slot>\n  </slot>\n`;const _b=e=>{const t=e.mediaIsCasting?cm.EXIT_CAST():cm.ENTER_CAST();e.setAttribute("aria-label",t)};class Ab extends vg{static get observedAttributes(){return[...super.observedAttributes,Qh.MEDIA_IS_CASTING,Qh.MEDIA_CAST_UNAVAILABLE]}constructor(e={}){super({slotTemplate:Tb,...e})}connectedCallback(){super.connectedCallback(),_b(this)}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),e===Qh.MEDIA_IS_CASTING&&_b(this)}get mediaIsCasting(){return zm(this,Qh.MEDIA_IS_CASTING)}set mediaIsCasting(e){Xm(this,Qh.MEDIA_IS_CASTING,e)}get mediaCastUnavailable(){return Qm(this,Qh.MEDIA_CAST_UNAVAILABLE)}set mediaCastUnavailable(e){Zm(this,Qh.MEDIA_CAST_UNAVAILABLE,e)}handleClick(){const e=this.mediaIsCasting?jh.MEDIA_EXIT_CAST_REQUEST:jh.MEDIA_ENTER_CAST_REQUEST;this.dispatchEvent(new Cm.CustomEvent(e,{composed:!0,bubbles:!0}))}}Cm.customElements.get("media-cast-button")||Cm.customElements.define("media-cast-button",Ab);var Sb,kb,wb,Lb,Rb,Cb,Ib,xb,Db,Mb,Ob,Pb,Nb=Object.defineProperty,Fb=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Ub=(e,t,n)=>(Fb(e,t,"read from private field"),n?n.call(e):t.get(e)),Bb=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},$b=(e,t,n,i)=>(Fb(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),Hb=(e,t,n)=>(Fb(e,t,"access private method"),n);const Vb=Im.createElement("template");Vb.innerHTML="\n  <style>\n    :host {\n      font: var(--media-font,\n        var(--media-font-weight, normal)\n        var(--media-font-size, 14px) /\n        var(--media-text-content-height, var(--media-control-height, 24px))\n        var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));\n      color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));\n      background: var(--media-dialog-background, var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .8))));\n      border-radius: var(--media-dialog-border-radius);\n      border: var(--media-dialog-border, none);\n      display: var(--media-dialog-display, inline-flex);\n      transition: var(--media-dialog-transition-in,\n        visibility 0s,\n        opacity .2s ease-out,\n        transform .15s ease-out\n      ) !important;\n      \n      visibility: var(--media-dialog-visibility, visible);\n      opacity: var(--media-dialog-opacity, 1);\n      transform: var(--media-dialog-transform-in, translateY(0) scale(1));\n    }\n\n    :host([hidden]) {\n      transition: var(--media-dialog-transition-out,\n        visibility .15s ease-in,\n        opacity .15s ease-in,\n        transform .15s ease-in\n      ) !important;\n      visibility: var(--media-dialog-hidden-visibility, hidden);\n      opacity: var(--media-dialog-hidden-opacity, 0);\n      transform: var(--media-dialog-transform-out, translateY(2px) scale(.99));\n      pointer-events: none;\n    }\n  </style>\n  <slot></slot>\n";const Wb="hidden",Gb="anchor";class Kb extends Cm.HTMLElement{constructor(){super(),Bb(this,wb),Bb(this,Rb),Bb(this,Ib),Bb(this,Db),Bb(this,Ob),Bb(this,Sb,void 0),Bb(this,kb,void 0),this.shadowRoot||(this.attachShadow({mode:"open"}),this.nativeEl=this.constructor.template.content.cloneNode(!0),this.shadowRoot.append(this.nativeEl)),this.addEventListener("invoke",this),this.addEventListener("focusout",this),this.addEventListener("keydown",this)}static get observedAttributes(){return[Wb,Gb]}handleEvent(e){switch(e.type){case"invoke":Hb(this,Ib,xb).call(this,e);break;case"focusout":Hb(this,Db,Mb).call(this,e);break;case"keydown":Hb(this,Ob,Pb).call(this,e)}}connectedCallback(){this.role||(this.role="dialog")}attributeChangedCallback(e,t,n){e===Wb&&n!==t&&(this.hidden?Hb(this,Rb,Cb).call(this):Hb(this,wb,Lb).call(this))}focus(){$b(this,Sb,Vm());const e=this.querySelector('[autofocus], [tabindex]:not([tabindex="-1"]), [role="menu"]');null==e||e.focus()}get keysUsed(){return["Escape","Tab"]}}Sb=new WeakMap,kb=new WeakMap,wb=new WeakSet,Lb=function(){var e;null==(e=Ub(this,kb))||e.setAttribute("aria-expanded","true"),this.addEventListener("transitionend",(()=>this.focus()),{once:!0})},Rb=new WeakSet,Cb=function(){var e;null==(e=Ub(this,kb))||e.setAttribute("aria-expanded","false")},Ib=new WeakSet,xb=function(e){$b(this,kb,e.relatedTarget),$m(this,e.relatedTarget)||(this.hidden=!this.hidden)},Db=new WeakSet,Mb=function(e){var t;$m(this,e.relatedTarget)||(null==(t=Ub(this,Sb))||t.focus(),Ub(this,kb)&&Ub(this,kb)!==e.relatedTarget&&!this.hidden&&(this.hidden=!0))},Ob=new WeakSet,Pb=function(e){var t,n,i,r,s;const{key:a,ctrlKey:o,altKey:l,metaKey:d}=e;o||l||d||this.keysUsed.includes(a)&&(e.preventDefault(),e.stopPropagation(),"Tab"===a?(e.shiftKey?null==(n=null==(t=this.previousElementSibling)?void 0:t.focus)||n.call(t):null==(r=null==(i=this.nextElementSibling)?void 0:i.focus)||r.call(i),this.blur()):"Escape"===a&&(null==(s=Ub(this,Sb))||s.focus(),this.hidden=!0))},((e,t,n)=>{((e,t,n)=>{t in e?Nb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n)})(Kb,"template",Vb),Cm.customElements.get("media-chrome-dialog")||Cm.customElements.define("media-chrome-dialog",Kb);var qb,jb,Yb,zb,Xb,Qb,Zb,Jb,ey,ty,ny,iy,ry,sy,ay,oy=Object.defineProperty,ly=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},dy=(e,t,n)=>(ly(e,t,"read from private field"),n?n.call(e):t.get(e)),cy=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},uy=(e,t,n,i)=>(ly(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),hy=(e,t,n)=>(ly(e,t,"access private method"),n);const my=Im.createElement("template");my.innerHTML='\n  <style>\n    :host {\n      transition: var(--media-menu-item-transition,\n        background .15s linear,\n        opacity .2s ease-in-out\n      );\n      outline: var(--media-menu-item-outline, 0);\n      outline-offset: var(--media-menu-item-outline-offset, -1px);\n      cursor: pointer;\n      display: flex;\n      align-items: center;\n      align-self: stretch;\n      justify-self: stretch;\n      white-space: nowrap;\n      white-space-collapse: collapse;\n      text-wrap: nowrap;\n      padding: .4em .8em .4em 1em;\n    }\n\n    :host(:focus-visible) {\n      box-shadow: var(--media-menu-item-focus-shadow, inset 0 0 0 2px rgb(27 127 204 / .9));\n      outline: var(--media-menu-item-hover-outline, 0);\n      outline-offset: var(--media-menu-item-hover-outline-offset,  var(--media-menu-item-outline-offset, -1px));\n    }\n\n    :host(:hover) {\n      cursor: pointer;\n      background: var(--media-menu-item-hover-background, rgb(92 92 102 / .5));\n      outline: var(--media-menu-item-hover-outline);\n      outline-offset: var(--media-menu-item-hover-outline-offset,  var(--media-menu-item-outline-offset, -1px));\n    }\n\n    :host([aria-checked="true"]) {\n      background: var(--media-menu-item-checked-background);\n    }\n\n    :host([hidden]) {\n      display: none;\n    }\n\n    :host([disabled]) {\n      pointer-events: none;\n      color: rgba(255, 255, 255, .3);\n    }\n\n    slot:not([name]) {\n      width: 100%;\n    }\n\n    slot:not([name="submenu"]) {\n      display: inline-flex;\n      align-items: center;\n      transition: inherit;\n      opacity: var(--media-menu-item-opacity, 1);\n    }\n\n    slot[name="description"] {\n      justify-content: end;\n    }\n\n    slot[name="description"] > span {\n      display: inline-block;\n      margin-inline: 1em .2em;\n      max-width: var(--media-menu-item-description-max-width, 100px);\n      text-overflow: ellipsis;\n      overflow: hidden;\n      font-size: .8em;\n      font-weight: 400;\n      text-align: right;\n      position: relative;\n      top: .04em;\n    }\n\n    slot[name="checked-indicator"] {\n      display: none;\n    }\n\n    :host(:is([role="menuitemradio"],[role="menuitemcheckbox"])) slot[name="checked-indicator"] {\n      display: var(--media-menu-item-checked-indicator-display, inline-block);\n    }\n\n    \n    svg, img, ::slotted(svg), ::slotted(img) {\n      height: var(--media-menu-item-icon-height, var(--media-control-height, 24px));\n      fill: var(--media-icon-color, var(--media-primary-color, rgb(238 238 238)));\n      display: block;\n    }\n\n    \n    [part~="indicator"],\n    ::slotted([part~="indicator"]) {\n      fill: var(--media-menu-item-indicator-fill,\n        var(--media-icon-color, var(--media-primary-color, rgb(238 238 238))));\n      height: var(--media-menu-item-indicator-height, 1.25em);\n      margin-right: .5ch;\n    }\n\n    [part~="checked-indicator"] {\n      visibility: hidden;\n    }\n\n    :host([aria-checked="true"]) [part~="checked-indicator"] {\n      visibility: visible;\n    }\n  </style>\n  <slot name="checked-indicator">\n    <svg aria-hidden="true" viewBox="0 1 24 24" part="checked-indicator indicator">\n      <path d="m10 15.17 9.193-9.191 1.414 1.414-10.606 10.606-6.364-6.364 1.414-1.414 4.95 4.95Z"/>\n    </svg>\n  </slot>\n  <slot name="prefix"></slot>\n  <slot></slot>\n  <slot name="description"></slot>\n  <slot name="suffix"></slot>\n  <slot name="submenu"></slot>\n';const py="type",fy="value",gy="checked",vy="disabled";class by extends Cm.HTMLElement{constructor(){super(),cy(this,Yb),cy(this,Xb),cy(this,Zb),cy(this,ty),cy(this,iy),cy(this,sy),cy(this,qb,!1),cy(this,jb,void 0),cy(this,ey,(()=>{var e,t;this.setAttribute("submenusize",`${this.submenuElement.items.length}`);const n=this.shadowRoot.querySelector('slot[name="description"]'),i=null==(t=null==(e=this.submenuElement.checkedItems)?void 0:e[0])?void 0:t.text,r=Im.createElement("span");r.textContent=null!=i?i:"",n.replaceChildren(r)})),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.append(this.constructor.template.content.cloneNode(!0))),this.shadowRoot.addEventListener("slotchange",this)}static get observedAttributes(){return[py,vy,gy,fy]}enable(){this.hasAttribute("tabindex")||this.setAttribute("tabindex","-1"),yy(this)&&!this.hasAttribute("aria-checked")&&this.setAttribute("aria-checked","false"),this.addEventListener("click",this),this.addEventListener("keydown",this)}disable(){this.removeAttribute("tabindex"),this.removeEventListener("click",this),this.removeEventListener("keydown",this),this.removeEventListener("keyup",this)}handleEvent(e){switch(e.type){case"slotchange":hy(this,Yb,zb).call(this,e);break;case"click":this.handleClick(e);break;case"keydown":hy(this,iy,ry).call(this,e);break;case"keyup":hy(this,ty,ny).call(this,e)}}attributeChangedCallback(e,t,n){e===gy&&yy(this)&&!dy(this,qb)?this.setAttribute("aria-checked",null!=n?"true":"false"):e===py&&n!==t?this.role="menuitem"+n:e===vy&&n!==t&&(null==n?this.enable():this.disable())}connectedCallback(){this.hasAttribute(vy)||this.enable(),this.role="menuitem"+this.type,uy(this,jb,Ey(this,this.parentNode)),hy(this,sy,ay).call(this)}disconnectedCallback(){this.disable(),hy(this,sy,ay).call(this),uy(this,jb,null)}get invokeTarget(){return this.getAttribute("invoketarget")}set invokeTarget(e){this.setAttribute("invoketarget",`${e}`)}get invokeTargetElement(){var e;return this.invokeTarget?null==(e=Wm(this))?void 0:e.querySelector(`#${this.invokeTarget}`):this.submenuElement}get submenuElement(){return this.shadowRoot.querySelector('slot[name="submenu"]').assignedElements({flatten:!0})[0]}get type(){var e;return null!=(e=this.getAttribute(py))?e:""}set type(e){this.setAttribute(py,`${e}`)}get value(){var e;return null!=(e=this.getAttribute(fy))?e:this.text}set value(e){this.setAttribute(fy,e)}get text(){var e;return(null!=(e=this.textContent)?e:"").trim()}get checked(){if(yy(this))return"true"===this.getAttribute("aria-checked")}set checked(e){yy(this)&&(uy(this,qb,!0),this.setAttribute("aria-checked",e?"true":"false"),e?this.part.add("checked"):this.part.remove("checked"))}handleClick(e){yy(this)||this.invokeTargetElement&&$m(this,e.target)&&this.invokeTargetElement.dispatchEvent(new Lg({relatedTarget:this}))}get keysUsed(){return["Enter"," "]}}function yy(e){return"radio"===e.type||"checkbox"===e.type}function Ey(e,t){if(!e)return null;const{host:n}=e.getRootNode();return!t&&n?Ey(e,n):(null==t?void 0:t.items)?t:Ey(t,null==t?void 0:t.parentNode)}qb=new WeakMap,jb=new WeakMap,Yb=new WeakSet,zb=function(e){const t=e.target;if(!(null==t?void 0:t.name))for(let e of t.assignedNodes({flatten:!0}))e instanceof Text&&""===e.textContent.trim()&&e.remove();"submenu"===t.name&&(this.submenuElement?hy(this,Xb,Qb).call(this):hy(this,Zb,Jb).call(this))},Xb=new WeakSet,Qb=async function(){this.setAttribute("aria-haspopup","menu"),this.setAttribute("aria-expanded",`${!this.submenuElement.hidden}`),this.submenuElement.addEventListener("change",dy(this,ey)),this.submenuElement.addEventListener("addmenuitem",dy(this,ey)),this.submenuElement.addEventListener("removemenuitem",dy(this,ey)),dy(this,ey).call(this)},Zb=new WeakSet,Jb=function(){this.removeAttribute("aria-haspopup"),this.removeAttribute("aria-expanded"),this.submenuElement.removeEventListener("change",dy(this,ey)),this.submenuElement.removeEventListener("addmenuitem",dy(this,ey)),this.submenuElement.removeEventListener("removemenuitem",dy(this,ey)),dy(this,ey).call(this)},ey=new WeakMap,ty=new WeakSet,ny=function(e){const{key:t}=e;this.keysUsed.includes(t)?this.handleClick(e):this.removeEventListener("keyup",hy(this,ty,ny))},iy=new WeakSet,ry=function(e){const{metaKey:t,altKey:n,key:i}=e;t||n||!this.keysUsed.includes(i)?this.removeEventListener("keyup",hy(this,ty,ny)):this.addEventListener("keyup",hy(this,ty,ny),{once:!0})},sy=new WeakSet,ay=function(){var e;const t=null==(e=dy(this,jb))?void 0:e.radioGroupItems;if(!t)return;let n=t.filter((e=>"true"===e.getAttribute("aria-checked"))).pop();n||(n=t[0]);for(const e of t)e.setAttribute("aria-checked","false");null==n||n.setAttribute("aria-checked","true")},((e,t,n)=>{((e,t,n)=>{t in e?oy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n)})(by,"template",my),Cm.customElements.get("media-chrome-menu-item")||Cm.customElements.define("media-chrome-menu-item",by);var Ty,_y,Ay,Sy,ky,wy,Ly,Ry,Cy,Iy,xy,Dy,My,Oy,Py,Ny,Fy,Uy,By,$y,Hy,Vy,Wy,Gy,Ky,qy=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},jy=(e,t,n)=>(qy(e,t,"read from private field"),n?n.call(e):t.get(e)),Yy=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},zy=(e,t,n,i)=>(qy(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),Xy=(e,t,n)=>(qy(e,t,"access private method"),n);const Qy=Im.createElement("template");Qy.innerHTML='\n  <style>\n    :host {\n      --_focus-box-shadow: var(--media-focus-box-shadow, inset 0 0 0 2px rgb(27 127 204 / .9));\n      --_media-range-padding: var(--media-range-padding, var(--media-control-padding, 10px));\n\n      box-shadow: var(--_focus-visible-box-shadow, none);\n      background: var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .7)));\n      height: calc(var(--media-control-height, 24px) + 2 * var(--_media-range-padding));\n      display: inline-flex;\n      align-items: center;\n      \n      vertical-align: middle;\n      box-sizing: border-box;\n      position: relative;\n      width: 100px;\n      transition: background .15s linear;\n      cursor: pointer;\n      pointer-events: auto;\n      touch-action: none; \n      z-index: 1; \n    }\n\n    \n    input[type=range]:focus {\n      outline: 0;\n    }\n    input[type=range]:focus::-webkit-slider-runnable-track {\n      outline: 0;\n    }\n\n    :host(:hover) {\n      background: var(--media-control-hover-background, rgb(50 50 70 / .7));\n    }\n\n    #leftgap {\n      padding-left: var(--media-range-padding-left, var(--_media-range-padding));\n    }\n\n    #rightgap {\n      padding-right: var(--media-range-padding-right, var(--_media-range-padding));\n    }\n\n    #startpoint,\n    #endpoint {\n      position: absolute;\n    }\n\n    #endpoint {\n      right: 0;\n    }\n\n    #container {\n      \n      width: var(--media-range-track-width, 100%);\n      transform: translate(var(--media-range-track-translate-x, 0px), var(--media-range-track-translate-y, 0px));\n      position: relative;\n      height: 100%;\n      display: flex;\n      align-items: center;\n      min-width: 40px;\n    }\n\n    #range {\n      \n      display: var(--media-time-range-hover-display, block);\n      bottom: var(--media-time-range-hover-bottom, -7px);\n      height: var(--media-time-range-hover-height, max(100% + 7px, 25px));\n      width: 100%;\n      position: absolute;\n      cursor: pointer;\n\n      -webkit-appearance: none; \n      -webkit-tap-highlight-color: transparent;\n      background: transparent; \n      margin: 0;\n      z-index: 1;\n    }\n\n    @media (hover: hover) {\n      #range {\n        bottom: var(--media-time-range-hover-bottom, -5px);\n        height: var(--media-time-range-hover-height, max(100% + 5px, 20px));\n      }\n    }\n\n    \n    \n    #range::-webkit-slider-thumb {\n      -webkit-appearance: none;\n      background: transparent;\n      width: .1px;\n      height: .1px;\n    }\n\n    \n    #range::-moz-range-thumb {\n      background: transparent;\n      border: transparent;\n      width: .1px;\n      height: .1px;\n    }\n\n    #appearance {\n      height: var(--media-range-track-height, 4px);\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      width: 100%;\n      position: absolute;\n      \n      will-change: transform;\n    }\n\n    #background,\n    #track {\n      border-radius: var(--media-range-track-border-radius, 1px);\n      position: absolute;\n      width: 100%;\n      height: 100%;\n    }\n\n    #background {\n      background: var(--media-range-track-background, rgb(255 255 255 / .2));\n      backdrop-filter: var(--media-range-track-background-backdrop-filter);\n      -webkit-backdrop-filter: var(--media-range-track-background-backdrop-filter);\n    }\n\n    #track {\n      border: var(--media-range-track-border, none);\n      outline: var(--media-range-track-outline);\n      outline-offset: var(--media-range-track-outline-offset);\n      backdrop-filter: var(--media-range-track-backdrop-filter);\n      -webkit-backdrop-filter: var(--media-range-track-backdrop-filter);\n      box-shadow: var(--media-range-track-box-shadow, none);\n      overflow: hidden;\n    }\n\n    #progress,\n    #highlight,\n    #pointer {\n      position: absolute;\n      height: 100%;\n      will-change: width;\n    }\n\n    #progress {\n      background: var(--media-range-bar-color, var(--media-primary-color, rgb(238 238 238)));\n      transition: var(--media-range-track-transition);\n    }\n\n    #pointer {\n      background: var(--media-range-track-pointer-background);\n      border-right: var(--media-range-track-pointer-border-right);\n      transition: visibility .25s, opacity .25s;\n      visibility: hidden;\n      opacity: 0;\n    }\n\n    @media (hover: hover) {\n      :host(:hover) #pointer {\n        transition: visibility .5s, opacity .5s;\n        visibility: visible;\n        opacity: 1;\n      }\n    }\n\n    #thumb {\n      width: var(--media-range-thumb-width, 10px);\n      height: var(--media-range-thumb-height, 10px);\n      margin-left: calc(var(--media-range-thumb-width, 10px) / -2);\n      border: var(--media-range-thumb-border, none);\n      border-radius: var(--media-range-thumb-border-radius, 10px);\n      background: var(--media-range-thumb-background, var(--media-primary-color, rgb(238 238 238)));\n      box-shadow: var(--media-range-thumb-box-shadow, 1px 1px 1px transparent);\n      transition: var(--media-range-thumb-transition);\n      transform: var(--media-range-thumb-transform, none);\n      opacity: var(--media-range-thumb-opacity, 1);\n      position: absolute;\n      left: 0;\n      cursor: pointer;\n    }\n\n    :host([disabled]) #thumb {\n      background-color: #777;\n    }\n\n    .segments #appearance {\n      height: var(--media-range-segment-hover-height, 7px);\n    }\n\n    #background,\n    #track {\n      clip-path: url(#segments-clipping);\n    }\n\n    #segments {\n      --segments-gap: var(--media-range-segments-gap, 2px);\n      position: absolute;\n      width: 100%;\n      height: 100%;\n    }\n\n    #segments-clipping {\n      transform: translateX(calc(var(--segments-gap) / 2));\n    }\n\n    #segments-clipping:empty {\n      display: none;\n    }\n\n    #segments-clipping rect {\n      height: var(--media-range-track-height, 4px);\n      y: calc((var(--media-range-segment-hover-height, 7px) - var(--media-range-track-height, 4px)) / 2);\n      transition: var(--media-range-segment-transition, transform .1s ease-in-out);\n      transform: var(--media-range-segment-transform, scaleY(1));\n      transform-origin: center;\n    }\n  </style>\n  <div id="leftgap"></div>\n  <div id="container">\n    <div id="startpoint"></div>\n    <div id="endpoint"></div>\n    <div id="appearance" part="appearance">\n      <div id="background"></div>\n      <div id="track">\n        <div id="highlight"></div>\n        <div id="pointer"></div>\n        <div id="progress"></div>\n      </div>\n      <div id="thumb"></div>\n      <svg id="segments"><clipPath id="segments-clipping"></clipPath></svg>\n    </div>\n    <input id="range" type="range" min="0" max="1" step="any" value="0">\n  </div>\n  <div id="rightgap"></div>\n';class Zy extends Cm.HTMLElement{constructor(){super(),Yy(this,Iy),Yy(this,Dy),Yy(this,Oy),Yy(this,Ny),Yy(this,Uy),Yy(this,$y),Yy(this,Vy),Yy(this,Gy),Yy(this,Ty,void 0),Yy(this,_y,void 0),Yy(this,Ay,void 0),Yy(this,Sy,void 0),Yy(this,ky,{}),Yy(this,wy,[]),Yy(this,Ly,(()=>{if(this.range.matches(":focus-visible")){const{style:e}=Km(this.shadowRoot,":host");e.setProperty("--_focus-visible-box-shadow","var(--_focus-box-shadow)")}})),Yy(this,Ry,(()=>{const{style:e}=Km(this.shadowRoot,":host");e.removeProperty("--_focus-visible-box-shadow")})),Yy(this,Cy,(()=>{const e=this.shadowRoot.querySelector("#segments-clipping");e&&e.parentNode.append(e)})),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(Qy.content.cloneNode(!0))),this.container=this.shadowRoot.querySelector("#container"),zy(this,Ay,this.shadowRoot.querySelector("#startpoint")),zy(this,Sy,this.shadowRoot.querySelector("#endpoint")),this.range=this.shadowRoot.querySelector("#range"),this.appearance=this.shadowRoot.querySelector("#appearance")}static get observedAttributes(){return["disabled","aria-disabled",Yh.MEDIA_CONTROLLER]}attributeChangedCallback(e,t,n){var i,r,s,a,o;e===Yh.MEDIA_CONTROLLER?(t&&(null==(r=null==(i=jy(this,Ty))?void 0:i.unassociateElement)||r.call(i,this),zy(this,Ty,null)),n&&this.isConnected&&(zy(this,Ty,null==(s=this.getRootNode())?void 0:s.getElementById(n)),null==(o=null==(a=jy(this,Ty))?void 0:a.associateElement)||o.call(a,this))):("disabled"===e||"aria-disabled"===e&&t!==n)&&(null==n?(this.range.removeAttribute(e),Xy(this,Dy,My).call(this)):(this.range.setAttribute(e,n),Xy(this,Oy,Py).call(this)))}connectedCallback(){var e,t,n;const{style:i}=Km(this.shadowRoot,":host");i.setProperty("display",`var(--media-control-display, var(--${this.localName}-display, inline-flex))`),jy(this,ky).pointer=Km(this.shadowRoot,"#pointer"),jy(this,ky).progress=Km(this.shadowRoot,"#progress"),jy(this,ky).thumb=Km(this.shadowRoot,"#thumb");const r=this.getAttribute(Yh.MEDIA_CONTROLLER);r&&(zy(this,Ty,null==(e=this.getRootNode())?void 0:e.getElementById(r)),null==(n=null==(t=jy(this,Ty))?void 0:t.associateElement)||n.call(t,this)),this.updateBar(),this.shadowRoot.addEventListener("focusin",jy(this,Ly)),this.shadowRoot.addEventListener("focusout",jy(this,Ry)),Xy(this,Dy,My).call(this),Om(this.container,jy(this,Cy))}disconnectedCallback(){var e,t;Xy(this,Oy,Py).call(this),null==(t=null==(e=jy(this,Ty))?void 0:e.unassociateElement)||t.call(e,this),zy(this,Ty,null),this.shadowRoot.removeEventListener("focusin",jy(this,Ly)),this.shadowRoot.removeEventListener("focusout",jy(this,Ry)),Pm(this.container,jy(this,Cy))}updatePointerBar(e){var t;null==(t=jy(this,ky).pointer)||t.style.setProperty("width",100*this.getPointerRatio(e)+"%")}updateBar(){var e,t;const n=100*this.range.valueAsNumber;null==(e=jy(this,ky).progress)||e.style.setProperty("width",`${n}%`),null==(t=jy(this,ky).thumb)||t.style.setProperty("left",`${n}%`)}updateSegments(e){const t=this.shadowRoot.querySelector("#segments-clipping");if(t.textContent="",this.container.classList.toggle("segments",!!(null==e?void 0:e.length)),!(null==e?void 0:e.length))return;jy(this,ky).activeSegment=qm(this.shadowRoot,"#segments-clipping rect:nth-child(0)");const n=[...new Set([+this.range.min,...e.flatMap((e=>[e.start,e.end])),+this.range.max])];zy(this,wy,[...n]);const i=n.pop();for(const[e,r]of n.entries()){const[s,a]=[0===e,e===n.length-1],o=s?"calc(var(--segments-gap) / -1)":100*r+"%",l=`calc(${100*((a?i:n[e+1])-r)}%${s||a?"":" - var(--segments-gap)"})`,d=Im.createElementNS("http://www.w3.org/2000/svg","rect"),c=Km(this.shadowRoot,`#segments-clipping rect:nth-child(${e+1})`);c.style.setProperty("x",o),c.style.setProperty("width",l),t.append(d)}}getPointerRatio(e){let t=function(e,t,n,i){const r=Gm(n,i),s=Gm(n,{x:e,y:t}),a=Gm(i,{x:e,y:t});return s>r||a>r?s>a?1:0:s/r}(e.clientX,e.clientY,jy(this,Ay).getBoundingClientRect(),jy(this,Sy).getBoundingClientRect());return Math.max(0,Math.min(1,t))}get dragging(){return this.hasAttribute("dragging")}handleEvent(e){switch(e.type){case"pointermove":Xy(this,Gy,Ky).call(this,e);break;case"input":this.updateBar();break;case"pointerenter":Xy(this,Uy,By).call(this,e);break;case"pointerdown":Xy(this,Ny,Fy).call(this,e);break;case"pointerup":Xy(this,$y,Hy).call(this);break;case"pointerleave":Xy(this,Vy,Wy).call(this)}}get keysUsed(){return["ArrowUp","ArrowRight","ArrowDown","ArrowLeft"]}}Ty=new WeakMap,_y=new WeakMap,Ay=new WeakMap,Sy=new WeakMap,ky=new WeakMap,wy=new WeakMap,Ly=new WeakMap,Ry=new WeakMap,Cy=new WeakMap,Iy=new WeakSet,xy=function(e){const t=jy(this,ky).activeSegment;if(!t)return;const n=this.getPointerRatio(e),i=jy(this,wy).findIndex(((e,t,i)=>{const r=i[t+1];return null!=r&&n>=e&&n<=r})),r=`#segments-clipping rect:nth-child(${i+1})`;t.selectorText==r&&t.style.transform||(t.selectorText=r,t.style.setProperty("transform","var(--media-range-segment-hover-transform, scaleY(2))"))},Dy=new WeakSet,My=function(){this.hasAttribute("disabled")||(this.addEventListener("input",this),this.addEventListener("pointerdown",this),this.addEventListener("pointerenter",this))},Oy=new WeakSet,Py=function(){var e,t;this.removeEventListener("input",this),this.removeEventListener("pointerdown",this),this.removeEventListener("pointerenter",this),null==(e=Cm.window)||e.removeEventListener("pointerup",this),null==(t=Cm.window)||t.removeEventListener("pointermove",this)},Ny=new WeakSet,Fy=function(e){var t;zy(this,_y,e.composedPath().includes(this.range)),null==(t=Cm.window)||t.addEventListener("pointerup",this)},Uy=new WeakSet,By=function(e){var t;"mouse"!==e.pointerType&&Xy(this,Ny,Fy).call(this,e),this.addEventListener("pointerleave",this),null==(t=Cm.window)||t.addEventListener("pointermove",this)},$y=new WeakSet,Hy=function(){var e;null==(e=Cm.window)||e.removeEventListener("pointerup",this),this.toggleAttribute("dragging",!1),this.range.disabled=this.hasAttribute("disabled")},Vy=new WeakSet,Wy=function(){var e,t;this.removeEventListener("pointerleave",this),null==(e=Cm.window)||e.removeEventListener("pointermove",this),this.toggleAttribute("dragging",!1),this.range.disabled=this.hasAttribute("disabled"),null==(t=jy(this,ky).activeSegment)||t.style.removeProperty("transform")},Gy=new WeakSet,Ky=function(e){this.toggleAttribute("dragging",1===e.buttons||"mouse"!==e.pointerType),this.updatePointerBar(e),Xy(this,Iy,xy).call(this,e),!this.dragging||"mouse"===e.pointerType&&jy(this,_y)||(this.range.disabled=!0,this.range.valueAsNumber=this.getPointerRatio(e),this.range.dispatchEvent(new Event("input",{bubbles:!0,composed:!0})))},Cm.customElements.get("media-chrome-range")||Cm.customElements.define("media-chrome-range",Zy);var Jy,eE=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},tE=(e,t,n)=>(eE(e,t,"read from private field"),n?n.call(e):t.get(e)),nE=(e,t,n,i)=>(eE(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n);const iE=Im.createElement("template");iE.innerHTML="\n  <style>\n    :host {\n      \n      box-sizing: border-box;\n      display: var(--media-control-display, var(--media-control-bar-display, inline-flex));\n      color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));\n      --media-loading-indicator-icon-height: 44px;\n    }\n\n    ::slotted(media-time-range),\n    ::slotted(media-volume-range) {\n      min-height: 100%;\n    }\n\n    ::slotted(media-time-range),\n    ::slotted(media-clip-selector) {\n      flex-grow: 1;\n    }\n  </style>\n\n  <slot></slot>\n";class rE extends Cm.HTMLElement{constructor(){super(),((e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)})(this,Jy,void 0),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(iE.content.cloneNode(!0)))}static get observedAttributes(){return[Yh.MEDIA_CONTROLLER]}attributeChangedCallback(e,t,n){var i,r,s,a,o;e===Yh.MEDIA_CONTROLLER&&(t&&(null==(r=null==(i=tE(this,Jy))?void 0:i.unassociateElement)||r.call(i,this),nE(this,Jy,null)),n&&this.isConnected&&(nE(this,Jy,null==(s=this.getRootNode())?void 0:s.getElementById(n)),null==(o=null==(a=tE(this,Jy))?void 0:a.associateElement)||o.call(a,this)))}connectedCallback(){var e,t,n;const i=this.getAttribute(Yh.MEDIA_CONTROLLER);i&&(nE(this,Jy,null==(e=this.getRootNode())?void 0:e.getElementById(i)),null==(n=null==(t=tE(this,Jy))?void 0:t.associateElement)||n.call(t,this))}disconnectedCallback(){var e,t;null==(t=null==(e=tE(this,Jy))?void 0:e.unassociateElement)||t.call(e,this),nE(this,Jy,null)}}Jy=new WeakMap,Cm.customElements.get("media-control-bar")||Cm.customElements.define("media-control-bar",rE);var sE,aE=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},oE=(e,t,n)=>(aE(e,t,"read from private field"),n?n.call(e):t.get(e)),lE=(e,t,n,i)=>(aE(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n);const dE=Im.createElement("template");dE.innerHTML="\n  <style>\n    :host {\n      font: var(--media-font,\n        var(--media-font-weight, normal)\n        var(--media-font-size, 14px) /\n        var(--media-text-content-height, var(--media-control-height, 24px))\n        var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));\n      color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));\n      background: var(--media-text-background, var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .7))));\n      padding: var(--media-control-padding, 10px);\n      display: inline-flex;\n      justify-content: center;\n      align-items: center;\n      vertical-align: middle;\n      box-sizing: border-box;\n      text-align: center;\n      pointer-events: auto;\n    }\n\n    \n    :host(:focus-visible) {\n      box-shadow: inset 0 0 0 2px rgb(27 127 204 / .9);\n      outline: 0;\n    }\n\n    \n    :host(:where(:focus)) {\n      box-shadow: none;\n      outline: 0;\n    }\n  </style>\n  <slot></slot>\n";class cE extends Cm.HTMLElement{constructor(){super(),((e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)})(this,sE,void 0),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(dE.content.cloneNode(!0)))}static get observedAttributes(){return[Yh.MEDIA_CONTROLLER]}attributeChangedCallback(e,t,n){var i,r,s,a,o;e===Yh.MEDIA_CONTROLLER&&(t&&(null==(r=null==(i=oE(this,sE))?void 0:i.unassociateElement)||r.call(i,this),lE(this,sE,null)),n&&this.isConnected&&(lE(this,sE,null==(s=this.getRootNode())?void 0:s.getElementById(n)),null==(o=null==(a=oE(this,sE))?void 0:a.associateElement)||o.call(a,this)))}connectedCallback(){var e,t,n;const{style:i}=Km(this.shadowRoot,":host");i.setProperty("display",`var(--media-control-display, var(--${this.localName}-display, inline-flex))`);const r=this.getAttribute(Yh.MEDIA_CONTROLLER);r&&(lE(this,sE,null==(e=this.getRootNode())?void 0:e.getElementById(r)),null==(n=null==(t=oE(this,sE))?void 0:t.associateElement)||n.call(t,this))}disconnectedCallback(){var e,t;null==(t=null==(e=oE(this,sE))?void 0:e.unassociateElement)||t.call(e,this),lE(this,sE,null)}}sE=new WeakMap,Cm.customElements.get("media-text-display")||Cm.customElements.define("media-text-display",cE);var uE,hE=cE,mE=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},pE=(e,t,n)=>(mE(e,t,"read from private field"),n?n.call(e):t.get(e));class fE extends cE{constructor(){super(),((e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)})(this,uE,void 0),((e,t,n,i)=>{mE(e,t,"write to private field"),i?i.call(e,n):t.set(e,n)})(this,uE,this.shadowRoot.querySelector("slot")),pE(this,uE).textContent=_m(0)}static get observedAttributes(){return[...super.observedAttributes,Qh.MEDIA_DURATION]}attributeChangedCallback(e,t,n){e===Qh.MEDIA_DURATION&&(pE(this,uE).textContent=_m(+n)),super.attributeChangedCallback(e,t,n)}get mediaDuration(){return jm(this,Qh.MEDIA_DURATION)}set mediaDuration(e){Ym(this,Qh.MEDIA_DURATION,e)}}uE=new WeakMap,Cm.customElements.get("media-duration-display")||Cm.customElements.define("media-duration-display",fE);const gE=Im.createElement("template");gE.innerHTML=`\n  <style>\n  :host([${Qh.MEDIA_IS_FULLSCREEN}]) slot:not([name=exit]):not([name=icon]) {\n    display: none !important;\n  }\n\n  \n  :host(:not([${Qh.MEDIA_IS_FULLSCREEN}])) slot:not([name=enter]):not([name=icon]) {\n    display: none !important;\n  }\n  </style>\n\n  <slot name="icon">\n    <slot name="enter"><svg aria-hidden="true" viewBox="0 0 26 24">\n  <path d="M16 3v2.5h3.5V9H22V3h-6ZM4 9h2.5V5.5H10V3H4v6Zm15.5 9.5H16V21h6v-6h-2.5v3.5ZM6.5 15H4v6h6v-2.5H6.5V15Z"/>\n</svg></slot>\n    <slot name="exit"><svg aria-hidden="true" viewBox="0 0 26 24">\n  <path d="M18.5 6.5V3H16v6h6V6.5h-3.5ZM16 21h2.5v-3.5H22V15h-6v6ZM4 17.5h3.5V21H10v-6H4v2.5Zm3.5-11H4V9h6V3H7.5v3.5Z"/>\n</svg></slot>\n  </slot>\n`;const vE=e=>{const t=e.mediaIsFullscreen?cm.EXIT_FULLSCREEN():cm.ENTER_FULLSCREEN();e.setAttribute("aria-label",t)};class bE extends vg{static get observedAttributes(){return[...super.observedAttributes,Qh.MEDIA_IS_FULLSCREEN,Qh.MEDIA_FULLSCREEN_UNAVAILABLE]}constructor(e={}){super({slotTemplate:gE,...e})}connectedCallback(){super.connectedCallback(),vE(this)}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),e===Qh.MEDIA_IS_FULLSCREEN&&vE(this)}get mediaFullscreenUnavailable(){return Qm(this,Qh.MEDIA_FULLSCREEN_UNAVAILABLE)}set mediaFullscreenUnavailable(e){Zm(this,Qh.MEDIA_FULLSCREEN_UNAVAILABLE,e)}get mediaIsFullscreen(){return zm(this,Qh.MEDIA_IS_FULLSCREEN)}set mediaIsFullscreen(e){Xm(this,Qh.MEDIA_IS_FULLSCREEN,e)}handleClick(){const e=this.mediaIsFullscreen?jh.MEDIA_EXIT_FULLSCREEN_REQUEST:jh.MEDIA_ENTER_FULLSCREEN_REQUEST;this.dispatchEvent(new Cm.CustomEvent(e,{composed:!0,bubbles:!0}))}}Cm.customElements.get("media-fullscreen-button")||Cm.customElements.define("media-fullscreen-button",bE);const{MEDIA_TIME_IS_LIVE:yE,MEDIA_PAUSED:EE}=Qh,{MEDIA_SEEK_TO_LIVE_REQUEST:TE,MEDIA_PLAY_REQUEST:_E}=jh,AE=Im.createElement("template");AE.innerHTML=`\n  <style>\n\n  slot[name=indicator] > *,\n  :host ::slotted([slot=indicator]) {\n    \n    min-width: auto;\n    fill: var(--media-live-button-icon-color, rgb(140, 140, 140));\n    color: var(--media-live-button-icon-color, rgb(140, 140, 140));\n  }\n\n  :host([${yE}]:not([${EE}])) slot[name=indicator] > *,\n  :host([${yE}]:not([${EE}])) ::slotted([slot=indicator]) {\n    fill: var(--media-live-button-indicator-color, rgb(255, 0, 0));\n    color: var(--media-live-button-indicator-color, rgb(255, 0, 0));\n  }\n\n  :host([${yE}]:not([${EE}])) {\n    cursor: not-allowed;\n  }\n\n  </style>\n\n  <slot name="indicator"><svg viewBox="0 0 6 12"><circle cx="3" cy="6" r="2"></circle></svg></slot>\n  \n  <slot name="spacer">&nbsp;</slot><slot name="text">LIVE</slot>\n`;const SE=e=>{const t=e.mediaPaused||!e.mediaTimeIsLive,n=t?cm.SEEK_LIVE():cm.PLAYING_LIVE();e.setAttribute("aria-label",n),t?e.removeAttribute("aria-disabled"):e.setAttribute("aria-disabled","true")};class kE extends vg{static get observedAttributes(){return[...super.observedAttributes,EE,yE]}constructor(e={}){super({slotTemplate:AE,...e})}connectedCallback(){SE(this),super.connectedCallback()}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),SE(this)}get mediaPaused(){return zm(this,Qh.MEDIA_PAUSED)}set mediaPaused(e){Xm(this,Qh.MEDIA_PAUSED,e)}get mediaTimeIsLive(){return zm(this,Qh.MEDIA_TIME_IS_LIVE)}set mediaTimeIsLive(e){Xm(this,Qh.MEDIA_TIME_IS_LIVE,e)}handleClick(){!this.mediaPaused&&this.mediaTimeIsLive||(this.dispatchEvent(new Cm.CustomEvent(TE,{composed:!0,bubbles:!0})),this.hasAttribute(EE)&&this.dispatchEvent(new Cm.CustomEvent(_E,{composed:!0,bubbles:!0})))}}Cm.customElements.get("media-live-button")||Cm.customElements.define("media-live-button",kE);var wE,LE,RE=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},CE=(e,t,n)=>(RE(e,t,"read from private field"),n?n.call(e):t.get(e)),IE=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},xE=(e,t,n,i)=>(RE(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n);const DE="loadingdelay",ME=Im.createElement("template");ME.innerHTML=`\n<style>\n:host {\n  display: var(--media-control-display, var(--media-loading-indicator-display, inline-block));\n  vertical-align: middle;\n  box-sizing: border-box;\n  --_loading-indicator-delay: var(--media-loading-indicator-transition-delay, 500ms);\n}\n\n#status {\n  color: rgba(0,0,0,0);\n  width: 0px;\n  height: 0px;\n}\n\n:host slot[name=icon] > *,\n:host ::slotted([slot=icon]) {\n  opacity: var(--media-loading-indicator-opacity, 0);\n  transition: opacity 0.15s;\n}\n\n:host([${Qh.MEDIA_LOADING}]:not([${Qh.MEDIA_PAUSED}])) slot[name=icon] > *,\n:host([${Qh.MEDIA_LOADING}]:not([${Qh.MEDIA_PAUSED}])) ::slotted([slot=icon]) {\n  opacity: var(--media-loading-indicator-opacity, 1);\n  transition: opacity 0.15s var(--_loading-indicator-delay);\n}\n\n:host #status {\n  visibility: var(--media-loading-indicator-opacity, hidden);\n  transition: visibility 0.15s;\n}\n\n:host([${Qh.MEDIA_LOADING}]:not([${Qh.MEDIA_PAUSED}])) #status {\n  visibility: var(--media-loading-indicator-opacity, visible);\n  transition: visibility 0.15s var(--_loading-indicator-delay);\n}\n\nsvg, img, ::slotted(svg), ::slotted(img) {\n  width: var(--media-loading-indicator-icon-width);\n  height: var(--media-loading-indicator-icon-height, 100px);\n  fill: var(--media-icon-color, var(--media-primary-color, rgb(238 238 238)));\n  vertical-align: middle;\n}\n</style>\n\n<slot name="icon">\n<svg aria-hidden="true" viewBox="0 0 100 100">\n  <path d="M73,50c0-12.7-10.3-23-23-23S27,37.3,27,50 M30.9,50c0-10.5,8.5-19.1,19.1-19.1S69.1,39.5,69.1,50">\n    <animateTransform\n       attributeName="transform"\n       attributeType="XML"\n       type="rotate"\n       dur="1s"\n       from="0 50 50"\n       to="360 50 50"\n       repeatCount="indefinite" />\n  </path>\n</svg>\n</slot>\n<div id="status" role="status" aria-live="polite">${dm.MEDIA_LOADING()}</div>\n`;class OE extends Cm.HTMLElement{constructor(){if(super(),IE(this,wE,void 0),IE(this,LE,500),!this.shadowRoot){const e=this.attachShadow({mode:"open"}),t=ME.content.cloneNode(!0);e.appendChild(t)}}static get observedAttributes(){return[Yh.MEDIA_CONTROLLER,Qh.MEDIA_PAUSED,Qh.MEDIA_LOADING,DE]}attributeChangedCallback(e,t,n){var i,r,s,a,o;e===DE&&t!==n?this.loadingDelay=Number(n):e===Yh.MEDIA_CONTROLLER&&(t&&(null==(r=null==(i=CE(this,wE))?void 0:i.unassociateElement)||r.call(i,this),xE(this,wE,null)),n&&this.isConnected&&(xE(this,wE,null==(s=this.getRootNode())?void 0:s.getElementById(n)),null==(o=null==(a=CE(this,wE))?void 0:a.associateElement)||o.call(a,this)))}connectedCallback(){var e,t,n;const i=this.getAttribute(Yh.MEDIA_CONTROLLER);i&&(xE(this,wE,null==(e=this.getRootNode())?void 0:e.getElementById(i)),null==(n=null==(t=CE(this,wE))?void 0:t.associateElement)||n.call(t,this))}disconnectedCallback(){var e,t;null==(t=null==(e=CE(this,wE))?void 0:e.unassociateElement)||t.call(e,this),xE(this,wE,null)}get loadingDelay(){return CE(this,LE)}set loadingDelay(e){xE(this,LE,e);const{style:t}=Km(this.shadowRoot,":host");t.setProperty("--_loading-indicator-delay",`var(--media-loading-indicator-transition-delay, ${e}ms)`)}get mediaPaused(){return zm(this,Qh.MEDIA_PAUSED)}set mediaPaused(e){Xm(this,Qh.MEDIA_PAUSED,e)}get mediaLoading(){return zm(this,Qh.MEDIA_LOADING)}set mediaLoading(e){Xm(this,Qh.MEDIA_LOADING,e)}}wE=new WeakMap,LE=new WeakMap,Cm.customElements.get("media-loading-indicator")||Cm.customElements.define("media-loading-indicator",OE);const{MEDIA_VOLUME_LEVEL:PE}=Qh,NE='<svg aria-hidden="true" viewBox="0 0 24 24">\n  <path d="M3 9v6h4l5 5V4L7 9H3Zm13.5 3A4.5 4.5 0 0 0 14 8v8a4.47 4.47 0 0 0 2.5-4Z"/>\n</svg>',FE=Im.createElement("template");FE.innerHTML=`\n  <style>\n  \n  :host(:not([${PE}])) slot:not([name=high]):not([name=icon]), \n  :host([${PE}=high]) slot:not([name=high]):not([name=icon]) {\n    display: none !important;\n  }\n\n  :host([${PE}=off]) slot:not([name=off]):not([name=icon]) {\n    display: none !important;\n  }\n\n  :host([${PE}=low]) slot:not([name=low]):not([name=icon]) {\n    display: none !important;\n  }\n\n  :host([${PE}=medium]) slot:not([name=medium]):not([name=icon]) {\n    display: none !important;\n  }\n  </style>\n\n  <slot name="icon">\n    <slot name="off"><svg aria-hidden="true" viewBox="0 0 24 24">\n  <path d="M16.5 12A4.5 4.5 0 0 0 14 8v2.18l2.45 2.45a4.22 4.22 0 0 0 .05-.63Zm2.5 0a6.84 6.84 0 0 1-.54 2.64L20 16.15A8.8 8.8 0 0 0 21 12a9 9 0 0 0-7-8.77v2.06A7 7 0 0 1 19 12ZM4.27 3 3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25A6.92 6.92 0 0 1 14 18.7v2.06A9 9 0 0 0 17.69 19l2 2.05L21 19.73l-9-9L4.27 3ZM12 4 9.91 6.09 12 8.18V4Z"/>\n</svg></slot>\n    <slot name="low">${NE}</slot>\n    <slot name="medium">${NE}</slot>\n    <slot name="high"><svg aria-hidden="true" viewBox="0 0 24 24">\n  <path d="M3 9v6h4l5 5V4L7 9H3Zm13.5 3A4.5 4.5 0 0 0 14 8v8a4.47 4.47 0 0 0 2.5-4ZM14 3.23v2.06a7 7 0 0 1 0 13.42v2.06a9 9 0 0 0 0-17.54Z"/>\n</svg></slot>\n  </slot>\n`;const UE=e=>{const t="off"===e.mediaVolumeLevel?cm.UNMUTE():cm.MUTE();e.setAttribute("aria-label",t)};class BE extends vg{static get observedAttributes(){return[...super.observedAttributes,Qh.MEDIA_VOLUME_LEVEL]}constructor(e={}){super({slotTemplate:FE,...e})}connectedCallback(){UE(this),super.connectedCallback()}attributeChangedCallback(e,t,n){e===Qh.MEDIA_VOLUME_LEVEL&&UE(this),super.attributeChangedCallback(e,t,n)}get mediaVolumeLevel(){return Qm(this,Qh.MEDIA_VOLUME_LEVEL)}set mediaVolumeLevel(e){Zm(this,Qh.MEDIA_VOLUME_LEVEL,e)}handleClick(){const e="off"===this.mediaVolumeLevel?jh.MEDIA_UNMUTE_REQUEST:jh.MEDIA_MUTE_REQUEST;this.dispatchEvent(new Cm.CustomEvent(e,{composed:!0,bubbles:!0}))}}Cm.customElements.get("media-mute-button")||Cm.customElements.define("media-mute-button",BE);const $E='<svg aria-hidden="true" viewBox="0 0 28 24">\n  <path d="M24 3H4a1 1 0 0 0-1 1v16a1 1 0 0 0 1 1h20a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1Zm-1 16H5V5h18v14Zm-3-8h-7v5h7v-5Z"/>\n</svg>',HE=Im.createElement("template");HE.innerHTML=`\n  <style>\n  :host([${Qh.MEDIA_IS_PIP}]) slot:not([name=exit]):not([name=icon]) {\n    display: none !important;\n  }\n\n  \n  :host(:not([${Qh.MEDIA_IS_PIP}])) slot:not([name=enter]):not([name=icon]) {\n    display: none !important;\n  }\n  </style>\n\n  <slot name="icon">\n    <slot name="enter">${$E}</slot>\n    <slot name="exit">${$E}</slot>\n  </slot>\n`;const VE=e=>{const t=e.mediaIsPip?cm.EXIT_PIP():cm.ENTER_PIP();e.setAttribute("aria-label",t)};class WE extends vg{static get observedAttributes(){return[...super.observedAttributes,Qh.MEDIA_IS_PIP,Qh.MEDIA_PIP_UNAVAILABLE]}constructor(e={}){super({slotTemplate:HE,...e})}connectedCallback(){VE(this),super.connectedCallback()}attributeChangedCallback(e,t,n){e===Qh.MEDIA_IS_PIP&&VE(this),super.attributeChangedCallback(e,t,n)}get mediaPipUnavailable(){return Qm(this,Qh.MEDIA_PIP_UNAVAILABLE)}set mediaPipUnavailable(e){Zm(this,Qh.MEDIA_PIP_UNAVAILABLE,e)}get mediaIsPip(){return zm(this,Qh.MEDIA_IS_PIP)}set mediaIsPip(e){Xm(this,Qh.MEDIA_IS_PIP,e)}handleClick(){const e=this.mediaIsPip?jh.MEDIA_EXIT_PIP_REQUEST:jh.MEDIA_ENTER_PIP_REQUEST;this.dispatchEvent(new Cm.CustomEvent(e,{composed:!0,bubbles:!0}))}}Cm.customElements.get("media-pip-button")||Cm.customElements.define("media-pip-button",WE);var GE,KE=(e,t,n)=>(((e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)})(e,t,"read from private field"),n?n.call(e):t.get(e));const qE="rates",jE=[1,1.2,1.5,1.7,2],YE=Im.createElement("template");YE.innerHTML='\n  <style>\n    :host {\n      min-width: 5ch;\n      padding: var(--media-button-padding, var(--media-control-padding, 10px 5px));\n    }\n  </style>\n  <slot name="icon"></slot>\n';class zE extends vg{constructor(e={}){super({slotTemplate:YE,...e}),((e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)})(this,GE,new $p(this,qE,{defaultValue:jE})),this.container=this.shadowRoot.querySelector('slot[name="icon"]'),this.container.innerHTML="1x"}static get observedAttributes(){return[...super.observedAttributes,Qh.MEDIA_PLAYBACK_RATE,qE]}attributeChangedCallback(e,t,n){if(super.attributeChangedCallback(e,t,n),e===qE&&(KE(this,GE).value=n),e===Qh.MEDIA_PLAYBACK_RATE){const e=n?+n:Number.NaN,t=Number.isNaN(e)?1:e;this.container.innerHTML=`${t}x`,this.setAttribute("aria-label",dm.PLAYBACK_RATE({playbackRate:t}))}}get rates(){return KE(this,GE)}set rates(e){e?Array.isArray(e)&&(KE(this,GE).value=e.join(" ")):KE(this,GE).value=""}get mediaPlaybackRate(){return jm(this,Qh.MEDIA_PLAYBACK_RATE,1)}set mediaPlaybackRate(e){Ym(this,Qh.MEDIA_PLAYBACK_RATE,e)}handleClick(){var e,t;const n=Array.from(this.rates.values(),(e=>+e)).sort(((e,t)=>e-t)),i=null!=(t=null!=(e=n.find((e=>e>this.mediaPlaybackRate)))?e:n[0])?t:1,r=new Cm.CustomEvent(jh.MEDIA_PLAYBACK_RATE_REQUEST,{composed:!0,bubbles:!0,detail:i});this.dispatchEvent(r)}}GE=new WeakMap,Cm.customElements.get("media-playback-rate-button")||Cm.customElements.define("media-playback-rate-button",zE);var XE,QE,ZE,JE,eT,tT=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},nT=(e,t,n)=>(tT(e,t,"read from private field"),n?n.call(e):t.get(e)),iT=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},rT=(e,t,n)=>(tT(e,t,"access private method"),n);const sT="rates";class aT extends Mv{constructor(){super(),iT(this,QE),iT(this,JE),iT(this,XE,new $p(this,sT,{defaultValue:jE})),rT(this,QE,ZE).call(this)}static get observedAttributes(){return[...super.observedAttributes,Qh.MEDIA_PLAYBACK_RATE,sT]}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),e===Qh.MEDIA_PLAYBACK_RATE&&t!=n?this.value=n:e===sT&&t!=n&&(nT(this,XE).value=n,rT(this,QE,ZE).call(this))}connectedCallback(){super.connectedCallback(),this.addEventListener("change",rT(this,JE,eT))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("change",rT(this,JE,eT))}get anchorElement(){return"auto"!==this.anchor?super.anchorElement:Nm(this).querySelector("media-playback-rate-menu-button")}get rates(){return nT(this,XE)}set rates(e){e?Array.isArray(e)&&(nT(this,XE).value=e.join(" ")):nT(this,XE).value="",rT(this,QE,ZE).call(this)}get mediaPlaybackRate(){return jm(this,Qh.MEDIA_PLAYBACK_RATE,1)}set mediaPlaybackRate(e){Ym(this,Qh.MEDIA_PLAYBACK_RATE,e)}}XE=new WeakMap,QE=new WeakSet,ZE=function(){this.defaultSlot.textContent="";for(const e of this.rates){const t=wv({type:"radio",text:this.formatMenuItemText(`${e}x`,e),value:e,checked:this.mediaPlaybackRate==e});t.prepend(Lv(this,"checked-indicator")),this.defaultSlot.append(t)}},JE=new WeakSet,eT=function(){if(!this.value)return;const e=new Cm.CustomEvent(jh.MEDIA_PLAYBACK_RATE_REQUEST,{composed:!0,bubbles:!0,detail:this.value});this.dispatchEvent(e)},Cm.customElements.get("media-playback-rate-menu")||Cm.customElements.define("media-playback-rate-menu",aT);var oT,lT=(e,t,n)=>(((e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)})(e,t,"read from private field"),n?n.call(e):t.get(e));const dT="rates",cT=[1,1.2,1.5,1.7,2],uT=Im.createElement("template");uT.innerHTML='\n  <style>\n    :host {\n      min-width: 5ch;\n      padding: var(--media-button-padding, var(--media-control-padding, 10px 5px));\n    }\n  </style>\n  <slot name="icon"></slot>\n';class hT extends zv{constructor(e={}){super({slotTemplate:uT,...e}),((e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)})(this,oT,new $p(this,dT,{defaultValue:cT})),this.container=this.shadowRoot.querySelector('slot[name="icon"]'),this.container.innerHTML="1x"}static get observedAttributes(){return[...super.observedAttributes,Qh.MEDIA_PLAYBACK_RATE,dT]}attributeChangedCallback(e,t,n){if(super.attributeChangedCallback(e,t,n),e===dT&&(lT(this,oT).value=n),e===Qh.MEDIA_PLAYBACK_RATE){const e=n?+n:Number.NaN,t=Number.isNaN(e)?1:e;this.container.innerHTML=`${t}x`,this.setAttribute("aria-label",dm.PLAYBACK_RATE({playbackRate:t}))}}get invokeTargetElement(){return null!=this.invokeTarget?super.invokeTargetElement:Nm(this).querySelector("media-playback-rate-menu")}get rates(){return lT(this,oT)}set rates(e){e?Array.isArray(e)&&(lT(this,oT).value=e.join(" ")):lT(this,oT).value=""}get mediaPlaybackRate(){return jm(this,Qh.MEDIA_PLAYBACK_RATE,1)}set mediaPlaybackRate(e){Ym(this,Qh.MEDIA_PLAYBACK_RATE,e)}}oT=new WeakMap,Cm.customElements.get("media-playback-rate-menu-button")||Cm.customElements.define("media-playback-rate-menu-button",hT);const mT=Im.createElement("template");mT.innerHTML=`\n  <style>\n  :host([${Qh.MEDIA_PAUSED}]) slot[name=pause] {\n    display: none !important;\n  }\n\n  :host(:not([${Qh.MEDIA_PAUSED}])) slot[name=play] {\n    display: none !important;\n  }\n  </style>\n\n  <slot name="icon">\n    <slot name="play"><svg aria-hidden="true" viewBox="0 0 24 24">\n  <path d="m6 21 15-9L6 3v18Z"/>\n</svg></slot>\n    <slot name="pause"><svg aria-hidden="true" viewBox="0 0 24 24">\n  <path d="M6 20h4V4H6v16Zm8-16v16h4V4h-4Z"/>\n</svg></slot>\n  </slot>\n`;const pT=e=>{const t=e.mediaPaused?cm.PLAY():cm.PAUSE();e.setAttribute("aria-label",t)};class fT extends vg{static get observedAttributes(){return[...super.observedAttributes,Qh.MEDIA_PAUSED,Qh.MEDIA_ENDED]}constructor(e={}){super({slotTemplate:mT,...e})}connectedCallback(){pT(this),super.connectedCallback()}attributeChangedCallback(e,t,n){e===Qh.MEDIA_PAUSED&&pT(this),super.attributeChangedCallback(e,t,n)}get mediaPaused(){return zm(this,Qh.MEDIA_PAUSED)}set mediaPaused(e){Xm(this,Qh.MEDIA_PAUSED,e)}handleClick(){const e=this.mediaPaused?jh.MEDIA_PLAY_REQUEST:jh.MEDIA_PAUSE_REQUEST;this.dispatchEvent(new Cm.CustomEvent(e,{composed:!0,bubbles:!0}))}}Cm.customElements.get("media-play-button")||Cm.customElements.define("media-play-button",fT);const gT="placeholdersrc",vT="src",bT=Im.createElement("template");bT.innerHTML='\n  <style>\n    :host {\n      pointer-events: none;\n      display: var(--media-poster-image-display, inline-block);\n      box-sizing: border-box;\n    }\n\n    img {\n      max-width: 100%;\n      max-height: 100%;\n      min-width: 100%;\n      min-height: 100%;\n      background-repeat: no-repeat;\n      background-position: var(--media-poster-image-background-position, var(--media-object-position, center));\n      background-size: var(--media-poster-image-background-size, var(--media-object-fit, contain));\n      object-fit: var(--media-object-fit, contain);\n      object-position: var(--media-object-position, center);\n    }\n  </style>\n\n  <img part="poster img" aria-hidden="true" id="image"/>\n';class yT extends Cm.HTMLElement{static get observedAttributes(){return[gT,vT]}constructor(){super(),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(bT.content.cloneNode(!0))),this.image=this.shadowRoot.querySelector("#image")}attributeChangedCallback(e,t,n){e===vT&&(null==n?this.image.removeAttribute(vT):this.image.setAttribute(vT,n)),e===gT&&(null==n?this.image.style.removeProperty("background-image"):((e,t)=>{e.style["background-image"]=`url('${t}')`})(this.image,n))}get placeholderSrc(){return Qm(this,gT)}set placeholderSrc(e){Zm(this,vT,e)}get src(){return Qm(this,vT)}set src(e){Zm(this,vT,e)}}Cm.customElements.get("media-poster-image")||Cm.customElements.define("media-poster-image",yT);var ET,TT=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)};class _T extends hE{constructor(){super(),((e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)})(this,ET,void 0),((e,t,n,i)=>{TT(e,t,"write to private field"),i?i.call(e,n):t.set(e,n)})(this,ET,this.shadowRoot.querySelector("slot"))}static get observedAttributes(){return[...super.observedAttributes,Qh.MEDIA_PREVIEW_CHAPTER]}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),e===Qh.MEDIA_PREVIEW_CHAPTER&&n!==t&&null!=n&&(((e,t,n)=>(TT(e,t,"read from private field"),n?n.call(e):t.get(e)))(this,ET).textContent=n,""!==n?this.setAttribute("aria-valuetext",`chapter: ${n}`):this.removeAttribute("aria-valuetext"))}get mediaPreviewChapter(){return Qm(this,Qh.MEDIA_PREVIEW_CHAPTER)}set mediaPreviewChapter(e){Zm(this,Qh.MEDIA_PREVIEW_CHAPTER,e)}}ET=new WeakMap,Cm.customElements.get("media-preview-chapter-display")||Cm.customElements.define("media-preview-chapter-display",_T);var AT,ST=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},kT=(e,t,n)=>(ST(e,t,"read from private field"),n?n.call(e):t.get(e)),wT=(e,t,n,i)=>(ST(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n);const LT=Im.createElement("template");LT.innerHTML='\n  <style>\n    :host {\n      box-sizing: border-box;\n      display: var(--media-control-display, var(--media-preview-thumbnail-display, inline-block));\n      overflow: hidden;\n    }\n\n    img {\n      display: none;\n      position: relative;\n    }\n  </style>\n  <img crossorigin loading="eager" decoding="async">\n';class RT extends Cm.HTMLElement{constructor(){super(),((e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)})(this,AT,void 0),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(LT.content.cloneNode(!0)))}static get observedAttributes(){return[Yh.MEDIA_CONTROLLER,Qh.MEDIA_PREVIEW_IMAGE,Qh.MEDIA_PREVIEW_COORDS]}connectedCallback(){var e,t,n;const i=this.getAttribute(Yh.MEDIA_CONTROLLER);i&&(wT(this,AT,null==(e=this.getRootNode())?void 0:e.getElementById(i)),null==(n=null==(t=kT(this,AT))?void 0:t.associateElement)||n.call(t,this))}disconnectedCallback(){var e,t;null==(t=null==(e=kT(this,AT))?void 0:e.unassociateElement)||t.call(e,this),wT(this,AT,null)}attributeChangedCallback(e,t,n){var i,r,s,a,o;[Qh.MEDIA_PREVIEW_IMAGE,Qh.MEDIA_PREVIEW_COORDS].includes(e)&&this.update(),e===Yh.MEDIA_CONTROLLER&&(t&&(null==(r=null==(i=kT(this,AT))?void 0:i.unassociateElement)||r.call(i,this),wT(this,AT,null)),n&&this.isConnected&&(wT(this,AT,null==(s=this.getRootNode())?void 0:s.getElementById(n)),null==(o=null==(a=kT(this,AT))?void 0:a.associateElement)||o.call(a,this)))}get mediaPreviewImage(){return Qm(this,Qh.MEDIA_PREVIEW_IMAGE)}set mediaPreviewImage(e){Zm(this,Qh.MEDIA_PREVIEW_IMAGE,e)}get mediaPreviewCoords(){const e=this.getAttribute(Qh.MEDIA_PREVIEW_COORDS);if(e)return e.split(/\s+/).map((e=>+e))}set mediaPreviewCoords(e){e?this.setAttribute(Qh.MEDIA_PREVIEW_COORDS,e.join(" ")):this.removeAttribute(Qh.MEDIA_PREVIEW_COORDS)}update(){const e=this.mediaPreviewCoords,t=this.mediaPreviewImage;if(!e||!t)return;const[n,i,r,s]=e,a=t.split("#")[0],o=getComputedStyle(this),{maxWidth:l,maxHeight:d,minWidth:c,minHeight:u}=o,h=Math.min(parseInt(l)/r,parseInt(d)/s),m=Math.max(parseInt(c)/r,parseInt(u)/s),p=h<1,f=p?h:m>1?m:1,{style:g}=Km(this.shadowRoot,":host"),v=Km(this.shadowRoot,"img").style,b=this.shadowRoot.querySelector("img"),y=p?"min":"max";g.setProperty(`${y}-width`,"initial","important"),g.setProperty(`${y}-height`,"initial","important"),g.width=r*f+"px",g.height=s*f+"px";const E=()=>{v.width=this.imgWidth*f+"px",v.height=this.imgHeight*f+"px",v.display="block"};b.src!==a&&(b.onload=()=>{this.imgWidth=b.naturalWidth,this.imgHeight=b.naturalHeight,E()},b.src=a,E()),E(),v.transform=`translate(-${n*f}px, -${i*f}px)`}}AT=new WeakMap,Cm.customElements.get("media-preview-thumbnail")||Cm.customElements.define("media-preview-thumbnail",RT);var CT,IT=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},xT=(e,t,n)=>(IT(e,t,"read from private field"),n?n.call(e):t.get(e));class DT extends cE{constructor(){super(),((e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)})(this,CT,void 0),((e,t,n,i)=>{IT(e,t,"write to private field"),i?i.call(e,n):t.set(e,n)})(this,CT,this.shadowRoot.querySelector("slot")),xT(this,CT).textContent=_m(0)}static get observedAttributes(){return[...super.observedAttributes,Qh.MEDIA_PREVIEW_TIME]}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),e===Qh.MEDIA_PREVIEW_TIME&&null!=n&&(xT(this,CT).textContent=_m(n))}get mediaPreviewTime(){return jm(this,Qh.MEDIA_PREVIEW_TIME)}set mediaPreviewTime(e){Ym(this,Qh.MEDIA_PREVIEW_TIME,e)}}CT=new WeakMap,Cm.customElements.get("media-preview-time-display")||Cm.customElements.define("media-preview-time-display",DT);var MT,OT,PT,NT,FT,UT,BT=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},$T=(e,t,n)=>(BT(e,t,"read from private field"),n?n.call(e):t.get(e)),HT=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},VT=(e,t,n,i)=>(BT(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),WT=(e,t,n)=>(BT(e,t,"access private method"),n);class GT extends Mv{constructor(){super(...arguments),HT(this,PT),HT(this,FT),HT(this,MT,[]),HT(this,OT,void 0)}static get observedAttributes(){return[...super.observedAttributes,Qh.MEDIA_RENDITION_LIST,Qh.MEDIA_RENDITION_SELECTED,Qh.MEDIA_RENDITION_UNAVAILABLE]}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),e===Qh.MEDIA_RENDITION_SELECTED&&t!==n?this.value=null!=n?n:"auto":e===Qh.MEDIA_RENDITION_LIST&&t!==n&&(VT(this,MT,um(n)),WT(this,PT,NT).call(this))}connectedCallback(){super.connectedCallback(),this.addEventListener("change",WT(this,FT,UT))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("change",WT(this,FT,UT))}get anchorElement(){return"auto"!==this.anchor?super.anchorElement:Nm(this).querySelector("media-rendition-menu-button")}get mediaRenditionList(){return $T(this,MT)}set mediaRenditionList(e){VT(this,MT,e),WT(this,PT,NT).call(this)}get mediaRenditionSelected(){return Qm(this,Qh.MEDIA_RENDITION_SELECTED)}set mediaRenditionSelected(e){Zm(this,Qh.MEDIA_RENDITION_SELECTED,e)}}MT=new WeakMap,OT=new WeakMap,PT=new WeakSet,NT=function(){if($T(this,OT)===JSON.stringify(this.mediaRenditionList))return;VT(this,OT,JSON.stringify(this.mediaRenditionList));const e=this.mediaRenditionList.sort(((e,t)=>t.height-e.height));this.defaultSlot.textContent="";let t=!this.mediaRenditionSelected;for(const n of e){const e=wv({type:"radio",text:this.formatMenuItemText(`${Math.min(n.width,n.height)}p`,n),value:`${n.id}`,checked:n.selected&&!t});e.prepend(Lv(this,"checked-indicator")),this.defaultSlot.append(e)}const n=wv({type:"radio",text:this.formatMenuItemText("Auto"),value:"auto",checked:t});n.prepend(Lv(this,"checked-indicator")),this.defaultSlot.append(n)},FT=new WeakSet,UT=function(){if(null==this.value)return;const e=new Cm.CustomEvent(jh.MEDIA_RENDITION_REQUEST,{composed:!0,bubbles:!0,detail:this.value});this.dispatchEvent(e)},Cm.customElements.get("media-rendition-menu")||Cm.customElements.define("media-rendition-menu",GT);const KT=Im.createElement("template");KT.innerHTML='\n  <slot name="icon"><svg aria-hidden="true" viewBox="0 0 24 24">\n  <path d="M13.5 2.5h2v6h-2v-2h-11v-2h11v-2Zm4 2h4v2h-4v-2Zm-12 4h2v6h-2v-2h-3v-2h3v-2Zm4 2h12v2h-12v-2Zm1 4h2v6h-2v-2h-8v-2h8v-2Zm4 2h7v2h-7v-2Z" />\n</svg></slot>\n';class qT extends zv{static get observedAttributes(){return[...super.observedAttributes,Qh.MEDIA_RENDITION_SELECTED,Qh.MEDIA_RENDITION_UNAVAILABLE]}constructor(){super({slotTemplate:KT})}connectedCallback(){super.connectedCallback(),this.setAttribute("aria-label",dm.QUALITY())}get invokeTargetElement(){return null!=this.invokeTarget?super.invokeTargetElement:Nm(this).querySelector("media-rendition-menu")}get mediaRenditionSelected(){return Qm(this,Qh.MEDIA_RENDITION_SELECTED)}set mediaRenditionSelected(e){Zm(this,Qh.MEDIA_RENDITION_SELECTED,e)}}Cm.customElements.get("media-rendition-menu-button")||Cm.customElements.define("media-rendition-menu-button",qT);const jT="seekoffset",YT=Im.createElement("template");YT.innerHTML='\n  <slot name="icon"><svg aria-hidden="true" viewBox="0 0 20 24"><defs><style>.text{font-size:8px;font-family:Arial-BoldMT, Arial;font-weight:700;}</style></defs><text class="text value" transform="translate(2.18 19.87)">30</text><path d="M10 6V3L4.37 7 10 10.94V8a5.54 5.54 0 0 1 1.9 10.48v2.12A7.5 7.5 0 0 0 10 6Z"/></svg></slot>\n';class zT extends vg{static get observedAttributes(){return[...super.observedAttributes,Qh.MEDIA_CURRENT_TIME,jT]}constructor(e={}){super({slotTemplate:YT,...e})}connectedCallback(){this.seekOffset=jm(this,jT,30),super.connectedCallback()}attributeChangedCallback(e,t,n){e===jT&&(this.seekOffset=jm(this,jT,30)),super.attributeChangedCallback(e,t,n)}get seekOffset(){return jm(this,jT,30)}set seekOffset(e){Ym(this,jT,e),this.setAttribute("aria-label",cm.SEEK_BACK_N_SECS({seekOffset:this.seekOffset})),Um(Bm(this,"icon"),this.seekOffset)}get mediaCurrentTime(){return jm(this,Qh.MEDIA_CURRENT_TIME,0)}set mediaCurrentTime(e){Ym(this,Qh.MEDIA_CURRENT_TIME,e)}handleClick(){const e=Math.max(this.mediaCurrentTime-this.seekOffset,0),t=new Cm.CustomEvent(jh.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:e});this.dispatchEvent(t)}}Cm.customElements.get("media-seek-backward-button")||Cm.customElements.define("media-seek-backward-button",zT);const XT="seekoffset",QT=Im.createElement("template");QT.innerHTML='\n  <slot name="icon"><svg aria-hidden="true" viewBox="0 0 20 24"><defs><style>.text{font-size:8px;font-family:Arial-BoldMT, Arial;font-weight:700;}</style></defs><text class="text value" transform="translate(8.9 19.87)">30</text><path d="M10 6V3l5.61 4L10 10.94V8a5.54 5.54 0 0 0-1.9 10.48v2.12A7.5 7.5 0 0 1 10 6Z"/></svg></slot>\n';class ZT extends vg{static get observedAttributes(){return[...super.observedAttributes,Qh.MEDIA_CURRENT_TIME,XT]}constructor(e={}){super({slotTemplate:QT,...e})}connectedCallback(){this.seekOffset=jm(this,XT,30),super.connectedCallback()}attributeChangedCallback(e,t,n){e===XT&&(this.seekOffset=jm(this,XT,30)),super.attributeChangedCallback(e,t,n)}get seekOffset(){return jm(this,XT,30)}set seekOffset(e){Ym(this,XT,e),this.setAttribute("aria-label",cm.SEEK_FORWARD_N_SECS({seekOffset:this.seekOffset})),Um(Bm(this,"icon"),this.seekOffset)}get mediaCurrentTime(){return jm(this,Qh.MEDIA_CURRENT_TIME,0)}set mediaCurrentTime(e){Ym(this,Qh.MEDIA_CURRENT_TIME,e)}handleClick(){const e=this.mediaCurrentTime+this.seekOffset,t=new Cm.CustomEvent(jh.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:e});this.dispatchEvent(t)}}Cm.customElements.get("media-seek-forward-button")||Cm.customElements.define("media-seek-forward-button",ZT);var JT=Object.defineProperty;const e_=Im.createElement("template");e_.innerHTML=Mv.template.innerHTML+'\n  <style>\n    :host {\n      background: var(--media-settings-menu-background,\n        var(--media-menu-background,\n        var(--media-control-background,\n        var(--media-secondary-color, rgb(20 20 30 / .8)))));\n      min-width: var(--media-settings-menu-min-width, 160px);\n      border-radius: 2px 2px 0 0;\n      overflow: hidden;\n    }\n\n    :host([role="menu"]) {\n      \n      justify-content: end;\n    }\n\n    slot:not([name]) {\n      justify-content: var(--media-settings-menu-justify-content);\n      flex-direction: var(--media-settings-menu-flex-direction, column);\n      overflow: visible;\n    }\n\n    #container.has-expanded {\n      --media-settings-menu-item-opacity: 0;\n    }\n  </style>\n';class t_ extends Mv{get anchorElement(){return"auto"!==this.anchor?super.anchorElement:Nm(this).querySelector("media-settings-menu-button")}}((e,t,n)=>{((e,t,n)=>{t in e?JT(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n)})(t_,"template",e_),Cm.customElements.get("media-settings-menu")||Cm.customElements.define("media-settings-menu",t_);const n_=Im.createElement("template");n_.innerHTML='\n  <slot name="icon">\n    <svg aria-hidden="true" viewBox="0 0 24 24">\n      <path d="M4.5 14.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Zm7.5 0a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Zm7.5 0a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z"/>\n    </svg>\n  </slot>\n';class i_ extends zv{static get observedAttributes(){return[...super.observedAttributes,"target"]}constructor(){super({slotTemplate:n_})}connectedCallback(){super.connectedCallback(),this.setAttribute("aria-label",dm.SETTINGS())}get invokeTargetElement(){return null!=this.invokeTarget?super.invokeTargetElement:Nm(this).querySelector("media-settings-menu")}}Cm.customElements.get("media-settings-menu-button")||Cm.customElements.define("media-settings-menu-button",i_);var r_,s_=Object.defineProperty;const a_=Im.createElement("template");a_.innerHTML=by.template.innerHTML+'\n  <style>\n    slot:not([name="submenu"]) {\n      opacity: var(--media-settings-menu-item-opacity, var(--media-menu-item-opacity));\n    }\n\n    :host([aria-expanded="true"]:hover) {\n      background: transparent;\n    }\n  </style>\n',(null==(r_=a_.content)?void 0:r_.querySelector)&&(a_.content.querySelector('slot[name="suffix"]').innerHTML='\n    <svg aria-hidden="true" viewBox="0 0 20 24">\n      <path d="m8.12 17.585-.742-.669 4.2-4.665-4.2-4.666.743-.669 4.803 5.335-4.803 5.334Z"/>\n    </svg>\n  ');class o_ extends by{}((e,t,n)=>{((e,t,n)=>{t in e?s_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n)})(o_,"template",a_),Cm.customElements.get("media-settings-menu-item")||Cm.customElements.define("media-settings-menu-item",o_);var l_,d_=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},c_=(e,t,n)=>(d_(e,t,"read from private field"),n?n.call(e):t.get(e));const u_={REMAINING:"remaining",SHOW_DURATION:"showduration",NO_TOGGLE:"notoggle"},h_=[...Object.values(u_),Qh.MEDIA_CURRENT_TIME,Qh.MEDIA_DURATION,Qh.MEDIA_SEEKABLE],m_=["Enter"," "],p_=(e,{timesSep:t="&nbsp;/&nbsp;"}={})=>{var n,i;const r=e.hasAttribute(u_.REMAINING),s=e.hasAttribute(u_.SHOW_DURATION),a=null!=(n=e.mediaCurrentTime)?n:0,[,o]=null!=(i=e.mediaSeekable)?i:[];let l=0;Number.isFinite(e.mediaDuration)?l=e.mediaDuration:Number.isFinite(o)&&(l=o);const d=_m(r?0-(l-a):a);return s?`${d}${t}${_m(l)}`:d};class f_ extends cE{constructor(){super(),((e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)})(this,l_,void 0),((e,t,n,i)=>{d_(e,t,"write to private field"),i?i.call(e,n):t.set(e,n)})(this,l_,this.shadowRoot.querySelector("slot")),c_(this,l_).innerHTML=`${p_(this)}`}static get observedAttributes(){return[...super.observedAttributes,...h_,"disabled"]}connectedCallback(){const{style:e}=Km(this.shadowRoot,":host(:hover:not([notoggle]))");e.setProperty("cursor","pointer"),e.setProperty("background","var(--media-control-hover-background, rgba(50 50 70 / .7))"),this.hasAttribute("disabled")||this.enable(),this.setAttribute("role","progressbar"),this.setAttribute("aria-label",dm.PLAYBACK_TIME());const t=e=>{const{key:n}=e;m_.includes(n)?this.toggleTimeDisplay():this.removeEventListener("keyup",t)};this.addEventListener("keydown",(e=>{const{metaKey:n,altKey:i,key:r}=e;n||i||!m_.includes(r)?this.removeEventListener("keyup",t):this.addEventListener("keyup",t)})),this.addEventListener("click",this.toggleTimeDisplay),super.connectedCallback()}toggleTimeDisplay(){this.noToggle||(this.hasAttribute("remaining")?this.removeAttribute("remaining"):this.setAttribute("remaining",""))}disconnectedCallback(){this.disable(),super.disconnectedCallback()}attributeChangedCallback(e,t,n){h_.includes(e)?this.update():"disabled"===e&&n!==t&&(null==n?this.enable():this.disable()),super.attributeChangedCallback(e,t,n)}enable(){this.tabIndex=0}disable(){this.tabIndex=-1}get remaining(){return zm(this,u_.REMAINING)}set remaining(e){Xm(this,u_.REMAINING,e)}get showDuration(){return zm(this,u_.SHOW_DURATION)}set showDuration(e){Xm(this,u_.SHOW_DURATION,e)}get noToggle(){return zm(this,u_.NO_TOGGLE)}set noToggle(e){Xm(this,u_.NO_TOGGLE,e)}get mediaDuration(){return jm(this,Qh.MEDIA_DURATION)}set mediaDuration(e){Ym(this,Qh.MEDIA_DURATION,e)}get mediaCurrentTime(){return jm(this,Qh.MEDIA_CURRENT_TIME)}set mediaCurrentTime(e){Ym(this,Qh.MEDIA_CURRENT_TIME,e)}get mediaSeekable(){const e=this.getAttribute(Qh.MEDIA_SEEKABLE);if(e)return e.split(":").map((e=>+e))}set mediaSeekable(e){null!=e?this.setAttribute(Qh.MEDIA_SEEKABLE,e.join(":")):this.removeAttribute(Qh.MEDIA_SEEKABLE)}update(){const e=p_(this);(e=>{var t;const n=e.mediaCurrentTime,[,i]=null!=(t=e.mediaSeekable)?t:[];let r=null;if(Number.isFinite(e.mediaDuration)?r=e.mediaDuration:Number.isFinite(i)&&(r=i),null==n||null===r)return void e.setAttribute("aria-valuetext","video not loaded, unknown time.");const s=e.hasAttribute(u_.REMAINING),a=e.hasAttribute(u_.SHOW_DURATION),o=Tm(s?0-(r-n):n);if(!a)return void e.setAttribute("aria-valuetext",o);const l=`${o} of ${Tm(r)}`;e.setAttribute("aria-valuetext",l)})(this),e!==c_(this,l_).innerHTML&&(c_(this,l_).innerHTML=e)}}l_=new WeakMap,Cm.customElements.get("media-time-display")||Cm.customElements.define("media-time-display",f_);var g_,v_,b_,y_,E_,T_,__,A_,S_,k_,w_=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},L_=(e,t,n)=>(w_(e,t,"read from private field"),n?n.call(e):t.get(e)),R_=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},C_=(e,t,n,i)=>(w_(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n);class I_{constructor(e,t,n){R_(this,g_,void 0),R_(this,v_,void 0),R_(this,b_,void 0),R_(this,y_,void 0),R_(this,E_,void 0),R_(this,T_,void 0),R_(this,__,void 0),R_(this,A_,void 0),R_(this,S_,0),R_(this,k_,((e=performance.now())=>{C_(this,S_,requestAnimationFrame(L_(this,k_))),C_(this,y_,performance.now()-L_(this,b_));const t=1e3/this.fps;if(L_(this,y_)>t){C_(this,b_,e-L_(this,y_)%t);const n=1e3/((e-L_(this,v_))/++((e,t,n,i)=>({set _(i){C_(e,t,i,n)},get _(){return L_(e,t,i)}}))(this,E_)._),i=(e-L_(this,T_))/1e3/this.duration;let r=L_(this,__)+i*this.playbackRate;r-L_(this,g_).valueAsNumber>0?C_(this,A_,this.playbackRate/this.duration/n):(C_(this,A_,.995*L_(this,A_)),r=L_(this,g_).valueAsNumber+L_(this,A_)),this.callback(r)}})),C_(this,g_,e),this.callback=t,this.fps=n}start(){0===L_(this,S_)&&(C_(this,b_,performance.now()),C_(this,v_,L_(this,b_)),C_(this,E_,0),L_(this,k_).call(this))}stop(){0!==L_(this,S_)&&(cancelAnimationFrame(L_(this,S_)),C_(this,S_,0))}update({start:e,duration:t,playbackRate:n}){const i=e-L_(this,g_).valueAsNumber,r=Math.abs(t-this.duration);(i>0||i<-.03||r>=.5)&&this.callback(e),C_(this,__,e),C_(this,T_,performance.now()),this.duration=t,this.playbackRate=n}}g_=new WeakMap,v_=new WeakMap,b_=new WeakMap,y_=new WeakMap,E_=new WeakMap,T_=new WeakMap,__=new WeakMap,A_=new WeakMap,S_=new WeakMap,k_=new WeakMap;var x_,D_,M_,O_,P_,N_,F_,U_,B_,$_,H_,V_,W_,G_,K_,q_,j_,Y_,z_,X_,Q_,Z_,J_,eA,tA,nA,iA=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},rA=(e,t,n)=>(iA(e,t,"read from private field"),n?n.call(e):t.get(e)),sA=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},aA=(e,t,n,i)=>(iA(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),oA=(e,t,n)=>(iA(e,t,"access private method"),n);const lA=Im.createElement("template");lA.innerHTML=`\n  <style>\n    :host {\n      --media-box-border-radius: 4px;\n      --media-box-padding-left: 10px;\n      --media-box-padding-right: 10px;\n      --media-preview-border-radius: var(--media-box-border-radius);\n      --media-box-arrow-offset: var(--media-box-border-radius);\n      --_control-background: var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .7)));\n      --_preview-background: var(--media-preview-background, var(--_control-background));\n\n      \n      contain: layout;\n    }\n\n    #highlight {\n      background: var(--media-time-range-buffered-color, rgb(255 255 255 / .4));\n    }\n\n    #preview-rail,\n    #current-rail {\n      width: 100%;\n      position: absolute;\n      left: 0;\n      bottom: 100%;\n      pointer-events: none;\n      will-change: transform;\n    }\n\n    [part~="box"] {\n      width: min-content;\n      \n      position: absolute;\n      bottom: 100%;\n      flex-direction: column;\n      align-items: center;\n      transform: translateX(-50%);\n    }\n\n    [part~="current-box"] {\n      display: var(--media-current-box-display, var(--media-box-display, flex));\n      margin: var(--media-current-box-margin, var(--media-box-margin, 0 0 5px));\n      visibility: hidden;\n    }\n\n    [part~="preview-box"] {\n      display: var(--media-preview-box-display, var(--media-box-display, flex));\n      margin: var(--media-preview-box-margin, var(--media-box-margin, 0 0 5px));\n      transition-property: var(--media-preview-transition-property, visibility, opacity);\n      transition-duration: var(--media-preview-transition-duration-out, .25s);\n      transition-delay: var(--media-preview-transition-delay-out, 0s);\n      visibility: hidden;\n      opacity: 0;\n    }\n\n    :host(:is([${Qh.MEDIA_PREVIEW_IMAGE}], [${Qh.MEDIA_PREVIEW_TIME}])[dragging]) [part~="preview-box"] {\n      transition-duration: var(--media-preview-transition-duration-in, .5s);\n      transition-delay: var(--media-preview-transition-delay-in, .25s);\n      visibility: visible;\n      opacity: 1;\n    }\n\n    @media (hover: hover) {\n      :host(:is([${Qh.MEDIA_PREVIEW_IMAGE}], [${Qh.MEDIA_PREVIEW_TIME}]):hover) [part~="preview-box"] {\n        transition-duration: var(--media-preview-transition-duration-in, .5s);\n        transition-delay: var(--media-preview-transition-delay-in, .25s);\n        visibility: visible;\n        opacity: 1;\n      }\n    }\n\n    media-preview-thumbnail,\n    ::slotted(media-preview-thumbnail) {\n      visibility: hidden;\n      \n      transition: visibility 0s .25s;\n      transition-delay: calc(var(--media-preview-transition-delay-out, 0s) + var(--media-preview-transition-duration-out, .25s));\n      background: var(--media-preview-thumbnail-background, var(--_preview-background));\n      box-shadow: var(--media-preview-thumbnail-box-shadow, 0 0 4px rgb(0 0 0 / .2));\n      max-width: var(--media-preview-thumbnail-max-width, 180px);\n      max-height: var(--media-preview-thumbnail-max-height, 160px);\n      min-width: var(--media-preview-thumbnail-min-width, 120px);\n      min-height: var(--media-preview-thumbnail-min-height, 80px);\n      border: var(--media-preview-thumbnail-border);\n      border-radius: var(--media-preview-thumbnail-border-radius,\n        var(--media-preview-border-radius) var(--media-preview-border-radius) 0 0);\n    }\n\n    :host([${Qh.MEDIA_PREVIEW_IMAGE}][dragging]) media-preview-thumbnail,\n    :host([${Qh.MEDIA_PREVIEW_IMAGE}][dragging]) ::slotted(media-preview-thumbnail) {\n      transition-delay: var(--media-preview-transition-delay-in, .25s);\n      visibility: visible;\n    }\n\n    @media (hover: hover) {\n      :host([${Qh.MEDIA_PREVIEW_IMAGE}]:hover) media-preview-thumbnail,\n      :host([${Qh.MEDIA_PREVIEW_IMAGE}]:hover) ::slotted(media-preview-thumbnail) {\n        transition-delay: var(--media-preview-transition-delay-in, .25s);\n        visibility: visible;\n      }\n\n      :host([${Qh.MEDIA_PREVIEW_TIME}]:hover) {\n        --media-time-range-hover-display: block;\n      }\n    }\n\n    media-preview-chapter-display,\n    ::slotted(media-preview-chapter-display) {\n      font-size: var(--media-font-size, 13px);\n      line-height: 17px;\n      min-width: 0;\n      visibility: hidden;\n      \n      transition: min-width 0s, border-radius 0s, margin 0s, padding 0s, visibility 0s;\n      transition-delay: calc(var(--media-preview-transition-delay-out, 0s) + var(--media-preview-transition-duration-out, .25s));\n      background: var(--media-preview-chapter-background, var(--_preview-background));\n      border-radius: var(--media-preview-chapter-border-radius,\n        var(--media-preview-border-radius) var(--media-preview-border-radius)\n        var(--media-preview-border-radius) var(--media-preview-border-radius));\n      padding: var(--media-preview-chapter-padding, 3.5px 9px);\n      margin: var(--media-preview-chapter-margin, 0 0 5px);\n      text-shadow: var(--media-preview-chapter-text-shadow, 0 0 4px rgb(0 0 0 / .75));\n    }\n\n    :host([${Qh.MEDIA_PREVIEW_IMAGE}]) media-preview-chapter-display,\n    :host([${Qh.MEDIA_PREVIEW_IMAGE}]) ::slotted(media-preview-chapter-display) {\n      transition-delay: var(--media-preview-transition-delay-in, .25s);\n      border-radius: var(--media-preview-chapter-border-radius, 0);\n      padding: var(--media-preview-chapter-padding, 3.5px 9px 0);\n      margin: var(--media-preview-chapter-margin, 0);\n      min-width: 100%;\n    }\n\n    media-preview-chapter-display[${Qh.MEDIA_PREVIEW_CHAPTER}],\n    ::slotted(media-preview-chapter-display[${Qh.MEDIA_PREVIEW_CHAPTER}]) {\n      visibility: visible;\n    }\n\n    media-preview-chapter-display:not([aria-valuetext]),\n    ::slotted(media-preview-chapter-display:not([aria-valuetext])) {\n      display: none;\n    }\n\n    media-preview-time-display,\n    ::slotted(media-preview-time-display),\n    media-time-display,\n    ::slotted(media-time-display) {\n      font-size: var(--media-font-size, 13px);\n      line-height: 17px;\n      min-width: 0;\n      \n      transition: min-width 0s, border-radius 0s;\n      transition-delay: calc(var(--media-preview-transition-delay-out, 0s) + var(--media-preview-transition-duration-out, .25s));\n      background: var(--media-preview-time-background, var(--_preview-background));\n      border-radius: var(--media-preview-time-border-radius,\n        var(--media-preview-border-radius) var(--media-preview-border-radius)\n        var(--media-preview-border-radius) var(--media-preview-border-radius));\n      padding: var(--media-preview-time-padding, 3.5px 9px);\n      margin: var(--media-preview-time-margin, 0);\n      text-shadow: var(--media-preview-time-text-shadow, 0 0 4px rgb(0 0 0 / .75));\n      transform: translateX(min(\n        max(calc(50% - var(--_box-width) / 2),\n        calc(var(--_box-shift, 0))),\n        calc(var(--_box-width) / 2 - 50%)\n      ));\n    }\n\n    :host([${Qh.MEDIA_PREVIEW_IMAGE}]) media-preview-time-display,\n    :host([${Qh.MEDIA_PREVIEW_IMAGE}]) ::slotted(media-preview-time-display) {\n      transition-delay: var(--media-preview-transition-delay-in, .25s);\n      border-radius: var(--media-preview-time-border-radius,\n        0 0 var(--media-preview-border-radius) var(--media-preview-border-radius));\n      min-width: 100%;\n      transform: translateX(0);\n    }\n\n    :host([${Qh.MEDIA_PREVIEW_TIME}]:hover) {\n      --media-time-range-hover-display: block;\n    }\n\n    [part~="arrow"],\n    ::slotted([part~="arrow"]) {\n      display: var(--media-box-arrow-display, inline-block);\n      transform: translateX(min(\n        max(calc(50% - var(--_box-width) / 2 + var(--media-box-arrow-offset)),\n        calc(var(--_box-shift, 0))),\n        calc(var(--_box-width) / 2 - 50% - var(--media-box-arrow-offset))\n      ));\n      \n      border-color: transparent;\n      border-top-color: var(--media-box-arrow-background, var(--_control-background));\n      border-width: var(--media-box-arrow-border-width,\n        var(--media-box-arrow-height, 5px) var(--media-box-arrow-width, 6px) 0);\n      border-style: solid;\n      justify-content: center;\n      height: 0;\n    }\n  </style>\n  <div id="preview-rail">\n    <slot name="preview" part="box preview-box">\n      <media-preview-thumbnail></media-preview-thumbnail>\n      <media-preview-chapter-display></media-preview-chapter-display>\n      <media-preview-time-display></media-preview-time-display>\n      <slot name="preview-arrow"><div part="arrow"></div></slot>\n    </slot>\n  </div>\n  <div id="current-rail">\n    <slot name="current" part="box current-box">\n      \n    </slot>\n  </div>\n`;const dA=(e,t=e.mediaCurrentTime)=>{const n=Number.isFinite(e.mediaSeekableStart)?e.mediaSeekableStart:0,i=Number.isFinite(e.mediaDuration)?e.mediaDuration:e.mediaSeekableEnd;if(Number.isNaN(i))return 0;const r=(t-n)/(i-n);return Math.max(0,Math.min(r,1))},cA=(e,t=e.range.valueAsNumber)=>{const n=Number.isFinite(e.mediaSeekableStart)?e.mediaSeekableStart:0,i=Number.isFinite(e.mediaDuration)?e.mediaDuration:e.mediaSeekableEnd;return Number.isNaN(i)?0:t*(i-n)+n};class uA extends Zy{constructor(){super(),sA(this,$_),sA(this,V_),sA(this,K_),sA(this,j_),sA(this,z_),sA(this,Q_),sA(this,J_),sA(this,tA),sA(this,x_,void 0),sA(this,D_,void 0),sA(this,M_,void 0),sA(this,O_,void 0),sA(this,P_,void 0),sA(this,N_,void 0),sA(this,F_,void 0),sA(this,U_,void 0),sA(this,B_,void 0),sA(this,G_,(e=>{this.dragging||(this.range.valueAsNumber=e,this.updateBar())})),this.container.appendChild(lA.content.cloneNode(!0)),aA(this,M_,this.shadowRoot.querySelectorAll('[part~="box"]')),aA(this,P_,this.shadowRoot.querySelector('[part~="preview-box"]')),aA(this,N_,this.shadowRoot.querySelector('[part~="current-box"]'));const e=getComputedStyle(this);aA(this,F_,parseInt(e.getPropertyValue("--media-box-padding-left"))),aA(this,U_,parseInt(e.getPropertyValue("--media-box-padding-right"))),aA(this,D_,new I_(this.range,rA(this,G_),60))}static get observedAttributes(){return[...super.observedAttributes,Qh.MEDIA_PAUSED,Qh.MEDIA_DURATION,Qh.MEDIA_SEEKABLE,Qh.MEDIA_CURRENT_TIME,Qh.MEDIA_PREVIEW_IMAGE,Qh.MEDIA_PREVIEW_TIME,Qh.MEDIA_PREVIEW_CHAPTER,Qh.MEDIA_BUFFERED,Qh.MEDIA_PLAYBACK_RATE,Qh.MEDIA_LOADING,Qh.MEDIA_ENDED]}connectedCallback(){var e;super.connectedCallback(),this.range.setAttribute("aria-label",dm.SEEK()),oA(this,$_,H_).call(this),aA(this,x_,this.getRootNode()),null==(e=rA(this,x_))||e.addEventListener("transitionstart",this)}disconnectedCallback(){var e;super.disconnectedCallback(),oA(this,$_,H_).call(this),null==(e=rA(this,x_))||e.removeEventListener("transitionstart",this),aA(this,x_,null)}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),t!=n&&(e===Qh.MEDIA_CURRENT_TIME||e===Qh.MEDIA_PAUSED||e===Qh.MEDIA_ENDED||e===Qh.MEDIA_LOADING||e===Qh.MEDIA_DURATION||e===Qh.MEDIA_SEEKABLE?(rA(this,D_).update({start:dA(this),duration:this.mediaSeekableEnd-this.mediaSeekableStart,playbackRate:this.mediaPlaybackRate}),oA(this,$_,H_).call(this),(e=>{const t=e.range,n=Tm(+cA(e)),i=Tm(+e.mediaSeekableEnd),r=n&&i?`${n} of ${i}`:"video not loaded, unknown time.";t.setAttribute("aria-valuetext",r)})(this)):e===Qh.MEDIA_BUFFERED&&this.updateBufferedBar(),e!==Qh.MEDIA_DURATION&&e!==Qh.MEDIA_SEEKABLE||(this.mediaChaptersCues=rA(this,B_),this.updateBar()))}get mediaChaptersCues(){return rA(this,B_)}set mediaChaptersCues(e){var t;aA(this,B_,e),this.updateSegments(null==(t=rA(this,B_))?void 0:t.map((e=>({start:dA(this,e.startTime),end:dA(this,e.endTime)}))))}get mediaPaused(){return zm(this,Qh.MEDIA_PAUSED)}set mediaPaused(e){Xm(this,Qh.MEDIA_PAUSED,e)}get mediaLoading(){return zm(this,Qh.MEDIA_LOADING)}set mediaLoading(e){Xm(this,Qh.MEDIA_LOADING,e)}get mediaDuration(){return jm(this,Qh.MEDIA_DURATION)}set mediaDuration(e){Ym(this,Qh.MEDIA_DURATION,e)}get mediaCurrentTime(){return jm(this,Qh.MEDIA_CURRENT_TIME)}set mediaCurrentTime(e){Ym(this,Qh.MEDIA_CURRENT_TIME,e)}get mediaPlaybackRate(){return jm(this,Qh.MEDIA_PLAYBACK_RATE,1)}set mediaPlaybackRate(e){Ym(this,Qh.MEDIA_PLAYBACK_RATE,e)}get mediaBuffered(){const e=this.getAttribute(Qh.MEDIA_BUFFERED);return e?e.split(" ").map((e=>e.split(":").map((e=>+e)))):[]}set mediaBuffered(e){if(!e)return void this.removeAttribute(Qh.MEDIA_BUFFERED);const t=e.map((e=>e.join(":"))).join(" ");this.setAttribute(Qh.MEDIA_BUFFERED,t)}get mediaSeekable(){const e=this.getAttribute(Qh.MEDIA_SEEKABLE);if(e)return e.split(":").map((e=>+e))}set mediaSeekable(e){null!=e?this.setAttribute(Qh.MEDIA_SEEKABLE,e.join(":")):this.removeAttribute(Qh.MEDIA_SEEKABLE)}get mediaSeekableEnd(){var e;const[,t=this.mediaDuration]=null!=(e=this.mediaSeekable)?e:[];return t}get mediaSeekableStart(){var e;const[t=0]=null!=(e=this.mediaSeekable)?e:[];return t}get mediaPreviewImage(){return Qm(this,Qh.MEDIA_PREVIEW_IMAGE)}set mediaPreviewImage(e){Zm(this,Qh.MEDIA_PREVIEW_IMAGE,e)}get mediaPreviewTime(){return jm(this,Qh.MEDIA_PREVIEW_TIME)}set mediaPreviewTime(e){Ym(this,Qh.MEDIA_PREVIEW_TIME,e)}get mediaEnded(){return zm(this,Qh.MEDIA_ENDED)}set mediaEnded(e){Xm(this,Qh.MEDIA_ENDED,e)}updateBar(){super.updateBar(),this.updateBufferedBar(),this.updateCurrentBox()}updateBufferedBar(){var e;const t=this.mediaBuffered;if(!t.length)return;let n;if(this.mediaEnded)n=1;else{const i=this.mediaCurrentTime,[,r=this.mediaSeekableStart]=null!=(e=t.find((([e,t])=>e<=i&&i<=t)))?e:[];n=dA(this,r)}const{style:i}=Km(this.shadowRoot,"#highlight");i.setProperty("width",100*n+"%")}updateCurrentBox(){if(!this.shadowRoot.querySelector('slot[name="current"]').assignedElements().length)return;const e=Km(this.shadowRoot,"#current-rail"),t=Km(this.shadowRoot,'[part~="current-box"]'),n=oA(this,K_,q_).call(this,rA(this,N_)),i=oA(this,j_,Y_).call(this,n,this.range.valueAsNumber),r=oA(this,z_,X_).call(this,n,this.range.valueAsNumber);e.style.transform=`translateX(${i})`,e.style.setProperty("--_range-width",`${n.range.width}`),t.style.setProperty("--_box-shift",`${r}`),t.style.setProperty("--_box-width",`${n.box.width}px`),t.style.setProperty("visibility","initial")}handleEvent(e){switch(super.handleEvent(e),e.type){case"input":oA(this,tA,nA).call(this);break;case"pointermove":oA(this,Q_,Z_).call(this,e);break;case"pointerup":case"pointerleave":oA(this,J_,eA).call(this,null);break;case"transitionstart":$m(e.target,this)&&setTimeout((()=>oA(this,$_,H_).call(this)),0)}}}x_=new WeakMap,D_=new WeakMap,M_=new WeakMap,O_=new WeakMap,P_=new WeakMap,N_=new WeakMap,F_=new WeakMap,U_=new WeakMap,B_=new WeakMap,$_=new WeakSet,H_=function(){oA(this,V_,W_).call(this)?rA(this,D_).start():rA(this,D_).stop()},V_=new WeakSet,W_=function(){return this.isConnected&&!this.mediaPaused&&!this.mediaLoading&&!this.mediaEnded&&this.mediaSeekableEnd>0&&function(e,t=3){if(e.checkVisibility)return e.checkVisibility({checkOpacity:!0,checkVisibilityCSS:!0});let n=e;for(;n&&t>0;){const e=getComputedStyle(n);if("0"===e.opacity||"hidden"===e.visibility||"none"===e.display)return!1;n=n.parentElement,t--}return!0}(this)},G_=new WeakMap,K_=new WeakSet,q_=function(e){var t;const n=(null!=(t=this.getAttribute("bounds")?Hm(this,`#${this.getAttribute("bounds")}`):this.parentElement)?t:this).getBoundingClientRect(),i=this.range.getBoundingClientRect(),r=e.offsetWidth;return{box:{width:r,min:-(i.left-n.left-r/2),max:n.right-i.left-r/2},bounds:n,range:i}},j_=new WeakSet,Y_=function(e,t){let n=100*t+"%";const{width:i,min:r,max:s}=e.box;if(!i)return n;if(!Number.isNaN(r)){n=`max(${`calc(1 / var(--_range-width) * 100 * ${r}% + ${"var(--media-box-padding-left)"})`}, ${n})`}if(!Number.isNaN(s)){n=`min(${n}, ${`calc(1 / var(--_range-width) * 100 * ${s}% - ${"var(--media-box-padding-right)"})`})`}return n},z_=new WeakSet,X_=function(e,t){const{width:n,min:i,max:r}=e.box,s=t*e.range.width;if(s<i+rA(this,F_)){return`${s-n/2+(e.range.left-e.bounds.left-rA(this,F_))}px`}if(s>r-rA(this,U_)){return s+n/2-(e.bounds.right-e.range.right-rA(this,U_))-e.range.width+"px"}return 0},Q_=new WeakSet,Z_=function(e){const t=[...rA(this,M_)].some((t=>e.composedPath().includes(t)));if(!this.dragging&&(t||!e.composedPath().includes(this)))return void oA(this,J_,eA).call(this,null);const n=this.mediaSeekableEnd;if(!n)return;const i=Km(this.shadowRoot,"#preview-rail"),r=Km(this.shadowRoot,'[part~="preview-box"]'),s=oA(this,K_,q_).call(this,rA(this,P_));let a=(e.clientX-s.range.left)/s.range.width;a=Math.max(0,Math.min(1,a));const o=oA(this,j_,Y_).call(this,s,a),l=oA(this,z_,X_).call(this,s,a);i.style.transform=`translateX(${o})`,i.style.setProperty("--_range-width",`${s.range.width}`),r.style.setProperty("--_box-shift",`${l}`),r.style.setProperty("--_box-width",`${s.box.width}px`);const d=Math.round(rA(this,O_))-Math.round(a*n);Math.abs(d)<1&&a>.01&&a<.99||(aA(this,O_,a*n),oA(this,J_,eA).call(this,rA(this,O_)))},J_=new WeakSet,eA=function(e){this.dispatchEvent(new Cm.CustomEvent(jh.MEDIA_PREVIEW_REQUEST,{composed:!0,bubbles:!0,detail:e}))},tA=new WeakSet,nA=function(){rA(this,D_).stop();const e=cA(this);this.dispatchEvent(new Cm.CustomEvent(jh.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:e}))},Cm.customElements.get("media-time-range")||Cm.customElements.define("media-time-range",uA);class hA extends Zy{static get observedAttributes(){return[...super.observedAttributes,Qh.MEDIA_VOLUME,Qh.MEDIA_MUTED,Qh.MEDIA_VOLUME_UNAVAILABLE]}constructor(){super(),this.range.addEventListener("input",(()=>{const e=this.range.value,t=new Cm.CustomEvent(jh.MEDIA_VOLUME_REQUEST,{composed:!0,bubbles:!0,detail:e});this.dispatchEvent(t)}))}connectedCallback(){super.connectedCallback(),this.range.setAttribute("aria-label",dm.VOLUME())}attributeChangedCallback(e,t,n){var i;super.attributeChangedCallback(e,t,n),e!==Qh.MEDIA_VOLUME&&e!==Qh.MEDIA_MUTED||(this.range.valueAsNumber=(i=this).mediaMuted?0:i.mediaVolume,this.range.setAttribute("aria-valuetext",(({value:e})=>`${Math.round(100*e)}%`)(this.range)),this.updateBar())}get mediaVolume(){return jm(this,Qh.MEDIA_VOLUME,1)}set mediaVolume(e){Ym(this,Qh.MEDIA_VOLUME,e)}get mediaMuted(){return zm(this,Qh.MEDIA_MUTED)}set mediaMuted(e){Xm(this,Qh.MEDIA_MUTED,e)}get mediaVolumeUnavailable(){return Qm(this,Qh.MEDIA_VOLUME_UNAVAILABLE)}set mediaVolumeUnavailable(e){Zm(this,Qh.MEDIA_VOLUME_UNAVAILABLE,e)}}Cm.customElements.get("media-volume-range")||Cm.customElements.define("media-volume-range",hA);var mA,pA,fA,gA,vA,bA,yA,EA,TA,_A,AA,SA,kA,wA,LA,RA,CA,IA,xA,DA=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},MA=(e,t,n)=>(DA(e,t,"read from private field"),n?n.call(e):t.get(e)),OA=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},PA=(e,t,n,i)=>(DA(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),NA=(e,t,n)=>(DA(e,t,"access private method"),n);function FA(e,t,n){const i=Im.createElement("media-chrome-option");i.part.add("option"),i.value=t,i.selected=n;const r=Im.createElement("span");return r.textContent=e,i.append(r),i}function UA(e,t){let n=e.querySelector(`:scope > [slot="${t}"]`);return"SLOT"==(null==n?void 0:n.nodeName)&&(n=n.assignedElements({flatten:!0})[0]),n?(n=n.cloneNode(!0),n.removeAttribute("slot"),n):e.shadowRoot.querySelector(`[name="${t}"] > svg`).cloneNode(!0)}const BA=Im.createElement("template");BA.innerHTML='\n<style>\n  :host {\n    font: var(--media-font,\n      var(--media-font-weight, normal)\n      var(--media-font-size, 15px) /\n      var(--media-text-content-height, var(--media-control-height, 24px))\n      var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));\n    color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));\n    background: var(--media-listbox-background, var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .8))));\n    border-radius: var(--media-listbox-border-radius);\n    display: inline-flex;\n    flex-direction: column;\n    position: relative;\n    box-sizing: border-box;\n  }\n\n  ::slotted([slot="header"]) {\n    padding: .4em 1.4em;\n    border-bottom: 1px solid rgb(255 255 255 / .25);\n  }\n\n  #container {\n    gap: var(--media-listbox-gap);\n    display: flex;\n    flex-direction: var(--media-listbox-flex-direction, column);\n    overflow: hidden auto;\n    padding-block: .5em;\n  }\n\n  media-chrome-option {\n    padding-inline: .7em 1.4em;\n  }\n\n  media-chrome-option > span {\n    margin-inline: .5ch;\n  }\n\n  [part~="indicator"] {\n    fill: var(--media-option-indicator-fill, var(--media-icon-color, var(--media-primary-color, rgb(238 238 238))));\n    height: var(--media-option-indicator-height, 1.25em);\n    vertical-align: var(--media-option-indicator-vertical-align, text-top);\n  }\n\n  [part~="select-indicator"] {\n    display: var(--media-option-select-indicator-display);\n    visibility: hidden;\n  }\n\n  [aria-selected="true"] > [part~="select-indicator"] {\n    visibility: visible;\n  }\n</style>\n<style id="layout-row" media="width:0">\n\n  ::slotted([slot="header"]) {\n    padding: .4em .5em;\n  }\n\n  #container {\n    gap: var(--media-listbox-gap, .25em);\n    flex-direction: var(--media-listbox-flex-direction, row);\n    padding-inline: .5em;\n  }\n\n  media-chrome-option {\n    padding: .3em .24em;\n  }\n\n  media-chrome-option[aria-selected="true"] {\n    background: var(--media-option-selected-background, rgb(255 255 255 / .2));\n  }\n\n  [part~="select-indicator"] {\n    display: var(--media-option-select-indicator-display, none);\n  }\n</style>\n<slot name="header"></slot>\n<slot id="container"></slot>\n<slot name="select-indicator" hidden>\n<svg aria-hidden="true" viewBox="0 1 24 24" part="select-indicator indicator">\n  <path d="m10 15.17 9.193-9.191 1.414 1.414-10.606 10.606-6.364-6.364 1.414-1.414 4.95 4.95Z"/>\n</svg></slot>\n';class $A extends Cm.HTMLElement{constructor(e={}){super(),OA(this,bA),OA(this,_A),OA(this,SA),OA(this,wA),OA(this,RA),OA(this,IA),OA(this,mA,void 0),OA(this,pA,""),OA(this,fA,null),OA(this,gA,!1),OA(this,vA,(e=>{this.handleClick(e)})),OA(this,EA,(e=>{const{key:t}=e;"Escape"!==t?"Meta"!==t?NA(this,bA,yA).call(this,e):PA(this,gA,!1):this.removeEventListener("keyup",MA(this,EA))})),OA(this,TA,(e=>{const{key:t,altKey:n}=e;n?this.removeEventListener("keyup",MA(this,EA)):"Meta"!==t?(this.keysUsed.includes(t)&&e.preventDefault(),MA(this,gA)&&this.keysUsed.includes(t)?NA(this,bA,yA).call(this,e):this.addEventListener("keyup",MA(this,EA),{once:!0})):PA(this,gA,!0)})),this.shadowRoot||(this.attachShadow({mode:"open"}),this.nativeEl=BA.content.cloneNode(!0),e.slotTemplate&&this.nativeEl.append(e.slotTemplate.content.cloneNode(!0)),this.shadowRoot.append(this.nativeEl)),this.container=this.shadowRoot.querySelector("#container"),this.container.addEventListener("slotchange",(e=>{for(let t of e.target.assignedNodes({flatten:!0}))3===t.nodeType&&""===t.textContent.trim()&&t.remove()}))}static get observedAttributes(){return["disabled","style",Yh.MEDIA_CONTROLLER]}static formatOptionText(e){return e}formatOptionText(e,t){return this.constructor.formatOptionText(e,t)}get options(){var e;let t=this.querySelectorAll("media-chrome-option");return t.length||(t=null==(e=this.container)?void 0:e.querySelectorAll("media-chrome-option")),Array.from(t)}get selectedOptions(){return this.options.filter((e=>e.selected))}get value(){var e,t;return null!=(t=null==(e=this.selectedOptions[0])?void 0:e.value)?t:""}set value(e){const t=this.options.find((t=>t.value===e));t&&NA(this,wA,LA).call(this,t)}focus(){var e;null==(e=this.selectedOptions[0])||e.focus()}enable(){this.addEventListener("click",MA(this,vA)),this.addEventListener("keydown",MA(this,TA))}disable(){this.removeEventListener("click",MA(this,vA)),this.removeEventListener("keyup",MA(this,EA))}attributeChangedCallback(e,t,n){var i,r,s,a,o;"style"===e&&n!==t?NA(this,_A,AA).call(this):e===Yh.MEDIA_CONTROLLER?(t&&(null==(r=null==(i=MA(this,mA))?void 0:i.unassociateElement)||r.call(i,this),PA(this,mA,null)),n&&this.isConnected&&(PA(this,mA,null==(s=this.getRootNode())?void 0:s.getElementById(n)),null==(o=null==(a=MA(this,mA))?void 0:a.associateElement)||o.call(a,this))):"disabled"===e&&n!==t&&(null==n?this.enable():this.disable())}connectedCallback(){var e,t,n;NA(this,_A,AA).call(this),this.hasAttribute("disabled")||this.enable(),this.hasAttribute("role")||this.setAttribute("role","listbox");const i=this.getAttribute(Yh.MEDIA_CONTROLLER);i&&(PA(this,mA,null==(e=this.getRootNode())?void 0:e.getElementById(i)),null==(n=null==(t=MA(this,mA))?void 0:t.associateElement)||n.call(t,this))}disconnectedCallback(){var e,t;this.disable(),null==(t=null==(e=MA(this,mA))?void 0:e.unassociateElement)||t.call(e,this),PA(this,mA,null)}get keysUsed(){return["Enter"," ","ArrowDown","ArrowUp","Home","End"]}handleSelection(e,t){const n=NA(this,SA,kA).call(this,e);n&&NA(this,wA,LA).call(this,n,t)}handleMovement(e){const{key:t}=e,n=this.options;let i,r=NA(this,SA,kA).call(this,e);switch(r||(r=n.filter((e=>"0"===e.getAttribute("tabindex")))[0]),t){case"ArrowDown":i=r.nextElementSibling,(null==i?void 0:i.hasAttribute("disabled"))&&(i=i.nextElementSibling);break;case"ArrowUp":i=r.previousElementSibling,(null==i?void 0:i.hasAttribute("disabled"))&&(i=i.previousElementSibling);break;case"Home":i=n[0];break;case"End":i=n[n.length-1];break;default:i=NA(this,RA,CA).call(this,t)}i&&(n.forEach((e=>e.setAttribute("tabindex","-1"))),i.setAttribute("tabindex","0"),i.focus())}handleClick(e){const t=NA(this,SA,kA).call(this,e);t&&!t.hasAttribute("disabled")&&(this.options.forEach((e=>e.setAttribute("tabindex","-1"))),t.setAttribute("tabindex","0"),this.handleSelection(e,this.hasAttribute("aria-multiselectable")&&"true"===this.getAttribute("aria-multiselectable")))}}mA=new WeakMap,pA=new WeakMap,fA=new WeakMap,gA=new WeakMap,vA=new WeakMap,bA=new WeakSet,yA=function(e){const{key:t}=e;"Enter"===t||" "===t?this.handleSelection(e,this.hasAttribute("aria-multiselectable")&&"true"===this.getAttribute("aria-multiselectable")):this.handleMovement(e)},EA=new WeakMap,TA=new WeakMap,_A=new WeakSet,AA=function(){var e;const t=this.shadowRoot.querySelector("#layout-row"),n="row"===(null==(e=getComputedStyle(this).getPropertyValue("--media-listbox-layout"))?void 0:e.trim());t.setAttribute("media",n?"":"width:0")},SA=new WeakSet,kA=function(e){const t=e.composedPath(),n=t.findIndex((e=>"MEDIA-CHROME-OPTION"===e.nodeName));return t[n]},wA=new WeakSet,LA=function(e,t){const n=[...this.selectedOptions];this.hasAttribute("aria-multiselectable")&&"true"===this.getAttribute("aria-multiselectable")||this.options.forEach((e=>e.selected=!1)),e.selected=!t||!e.selected,this.selectedOptions.some(((e,t)=>e!=n[t]))&&this.dispatchEvent(new Event("change",{bubbles:!0,composed:!0}))},RA=new WeakSet,CA=function(e){NA(this,IA,xA).call(this);const t=this.options,n=t.findIndex((e=>"0"===e.getAttribute("tabindex")));PA(this,pA,MA(this,pA)+e);const i=MA(this,pA).split("").every((t=>t===e)),r=t.slice(n+(i?1:0)).filter((e=>e.textContent.toLowerCase().startsWith(MA(this,pA)))),s=t.slice(0,n-(i?1:0)).filter((e=>e.textContent.toLowerCase().startsWith(MA(this,pA))));let a=[],o=[];i&&(a=t.slice(n+(i?1:0)).filter((t=>t.textContent.startsWith(e))),o=t.slice(0,n-(i?1:0)).filter((t=>t.textContent.startsWith(e))));return[...r,...s,...a,...o][0]},IA=new WeakSet,xA=function(){clearTimeout(MA(this,fA)),PA(this,fA,null),PA(this,fA,setTimeout((()=>{PA(this,pA,""),PA(this,fA,null)}),500))},Cm.customElements.get("media-chrome-listbox")||Cm.customElements.define("media-chrome-listbox",$A);var HA,VA,WA,GA,KA=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},qA=(e,t,n)=>(KA(e,t,"read from private field"),n?n.call(e):t.get(e)),jA=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},YA=(e,t,n,i)=>(KA(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),zA=(e,t,n)=>(KA(e,t,"access private method"),n);const XA=Im.createElement("template");XA.innerHTML='\n<style>\n  :host {\n    cursor: pointer;\n    display: block;\n    line-height: revert;\n    white-space: nowrap;\n    white-space-collapse: collapse;\n    text-wrap: nowrap;\n    padding: .4em .5em;\n    transition: var(--media-option-transition);\n    outline: var(--media-option-outline, 0);\n    outline-offset: var(--media-option-outline-offset, -1px);\n  }\n\n  :host(:focus-visible) {\n    box-shadow: var(--media-option-focus-shadow, inset 0 0 0 2px rgb(27 127 204 / .9));\n    outline: var(--media-option-hover-outline, 0);\n    outline-offset: var(--media-option-hover-outline-offset,  var(--media-option-outline-offset, -1px));\n  }\n\n  :host(:hover) {\n    cursor: pointer;\n    background: var(--media-option-hover-background, rgb(82 82 122 / .8));\n    outline: var(--media-option-hover-outline);\n    outline-offset: var(--media-option-hover-outline-offset,  var(--media-option-outline-offset, -1px));\n  }\n\n  :host([aria-selected="true"]) {\n    background: var(--media-option-selected-background);\n  }\n\n  :host([disabled]) {\n    pointer-events: none;\n    color: rgba(255, 255, 255, .3);\n  }\n</style>\n<slot></slot>\n';const QA="value",ZA="selected",JA="disabled";class eS extends Cm.HTMLElement{constructor(){super(),jA(this,WA),jA(this,HA,!1),jA(this,VA,void 0),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(XA.content.cloneNode(!0)))}static get observedAttributes(){return[JA,ZA,QA]}get value(){var e;return null!=(e=this.getAttribute(QA))?e:this.text}set value(e){this.setAttribute(QA,e)}get text(){var e;return(null!=(e=this.textContent)?e:"").trim()}get selected(){return"true"===this.getAttribute("aria-selected")}set selected(e){YA(this,HA,!0),this.setAttribute("aria-selected",e?"true":"false"),e?this.part.add("option-selected"):this.part.remove("option-selected")}enable(){this.hasAttribute("tabindex")||this.setAttribute("tabindex",-1),this.hasAttribute("aria-selected")||this.setAttribute("aria-selected","false")}disable(){this.removeAttribute("tabindex")}attributeChangedCallback(e,t,n){e!==ZA||qA(this,HA)?e===JA&&n!==t&&(null==n?this.enable():this.disable()):this.setAttribute("aria-selected",null!=n?"true":"false")}connectedCallback(){this.hasAttribute(JA)||this.enable(),this.setAttribute("role","option"),YA(this,VA,tS(this,this.parentNode)),zA(this,WA,GA).call(this)}disconnectedCallback(){this.disable(),zA(this,WA,GA).call(this),YA(this,VA,null)}handleClick(){}}function tS(e,t){if(!e)return null;const{host:n}=e.getRootNode();return!t&&n?tS(e,n):(null==t?void 0:t.options)?t:tS(t,null==t?void 0:t.parentNode)}HA=new WeakMap,VA=new WeakMap,WA=new WeakSet,GA=function(){var e;const t=null==(e=qA(this,VA))?void 0:e.options;if(!t)return;let n=t.filter((e=>"true"===e.getAttribute("aria-selected"))).pop();n||(n=t[0]),"true"!==qA(this,VA).getAttribute("aria-multiselectable")&&t.forEach((e=>{e.setAttribute("tabindex","-1"),e.setAttribute("aria-selected","false")})),null==n||n.setAttribute("tabindex","0"),null==n||n.setAttribute("aria-selected","true")},Cm.customElements.get("media-chrome-option")||Cm.customElements.define("media-chrome-option",eS);var nS,iS,rS,sS,aS,oS,lS,dS,cS,uS,hS,mS,pS,fS,gS,vS,bS,yS=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},ES=(e,t,n)=>(yS(e,t,"read from private field"),n?n.call(e):t.get(e)),TS=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},_S=(e,t,n,i)=>(yS(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),AS=(e,t,n)=>(yS(e,t,"access private method"),n);const SS=Im.createElement("template");SS.innerHTML='\n  <style>\n  :host {\n    font: var(--media-font,\n      var(--media-font-weight, normal)\n      var(--media-font-size, 15px) /\n      var(--media-text-content-height, var(--media-control-height, 24px))\n      var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));\n    color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));\n    display: inline-flex;\n    position: relative;\n    flex-shrink: .5;\n  }\n\n  [name=listbox]::slotted(*),\n  [part=listbox] {\n    position: absolute;\n    bottom: 100%;\n    max-height: 300px;\n    transition: var(--media-selectmenu-transition-in,\n      visibility 0s, transform .15s ease-out, opacity .15s ease-out);\n    transform: var(--media-listbox-transform-in, translateY(0) scale(1));\n    visibility: visible;\n    opacity: 1;\n  }\n\n  [name=listbox][hidden]::slotted(*),\n  [hidden] [part=listbox] {\n    transition: var(--media-selectmenu-transition-out,\n      visibility .15s ease-out, transform .15s ease-out, opacity .15s ease-out);\n    transform: var(--media-listbox-transform-out, translateY(2px) scale(.99));\n    visibility: hidden;\n    opacity: 0;\n    pointer-events: none;\n  }\n\n  slot[name=listbox][hidden] {\n    display: block;\n  }\n  </style>\n\n  <slot name="button">\n    <media-chrome-button aria-haspopup="listbox" part="button">\n      <slot name="button-content"></slot>\n    </media-chrome-button>\n  </slot>\n  <slot name="listbox" hidden>\n    <media-chrome-listbox id="listbox" part="listbox">\n      <slot></slot>\n    </media-chrome-listbox>\n  </slot>\n';class kS extends Cm.HTMLElement{constructor(){var e;super(),TS(this,hS),TS(this,pS),TS(this,gS),TS(this,nS,void 0),TS(this,iS,void 0),TS(this,rS,void 0),TS(this,sS,void 0),TS(this,aS,void 0),TS(this,oS,(e=>{const{key:t}=e;if(!this.keysUsed.includes(t))return void this.removeEventListener("keyup",ES(this,oS));!e.composedPath().includes(ES(this,iS))||"Enter"!==t&&" "!==t?"Escape"===t&&AS(this,gS,vS).call(this):AS(this,hS,mS).call(this)})),TS(this,lS,(e=>{const{metaKey:t,altKey:n,key:i}=e;t||n||!this.keysUsed.includes(i)?this.removeEventListener("keyup",ES(this,oS)):(e.preventDefault(),this.addEventListener("keyup",ES(this,oS),{once:!0}))})),TS(this,dS,(e=>{e.composedPath().includes(this)||AS(this,gS,vS).call(this)})),TS(this,cS,(e=>{e.composedPath().includes(ES(this,iS))&&AS(this,hS,mS).call(this)})),TS(this,uS,(()=>{AS(this,gS,vS).call(this)})),TS(this,bS,(()=>{if(0===ES(this,sS).offsetWidth)return;const e=ES(this,sS).offsetWidth,t=ES(this,iS).getBoundingClientRect();if(this.hasAttribute("mediacontroller")||ES(this,iS).hasAttribute("mediacontroller")||ES(this,sS).hasAttribute("mediacontroller"))return ES(this,sS).style.zIndex="1",ES(this,sS).style.bottom="unset",ES(this,sS).style.right=null,ES(this,sS).style.left="0",void(ES(this,sS).style.top=`${t.height}px`);const n=wS(this).getBoundingClientRect(),i=t.x+e,r=Math.max(t.right-i,t.right-n.right);ES(this,sS).style.left=null,ES(this,sS).style.right=`${r}px`,ES(this,sS).style.maxHeight=n.height-t.height+"px"})),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(SS.content.cloneNode(!0))),null==(e=this.init)||e.call(this),_S(this,iS,this.shadowRoot.querySelector("[part=button]")),_S(this,sS,this.shadowRoot.querySelector("[part=listbox]")),_S(this,rS,this.shadowRoot.querySelector("slot[name=button]")),ES(this,rS).addEventListener("slotchange",(()=>{const e=ES(this,rS).assignedElements()[0];if(!e)return;_S(this,iS,e),ES(this,iS).preventClick=!0;this.hasAttribute("disabled")||ES(this,iS).hasAttribute("disabled")?this.disable():(this.enable(),ES(this,iS).setAttribute("aria-haspopup","listbox"))})),_S(this,aS,this.shadowRoot.querySelector("slot[name=listbox]")),ES(this,aS).addEventListener("slotchange",(()=>{_S(this,sS,ES(this,aS).assignedElements()[0]||ES(this,sS))}))}static get observedAttributes(){return["disabled",Yh.MEDIA_CONTROLLER]}enable(){ES(this,iS).toggleAttribute("disabled",!1),this.addEventListener("change",ES(this,uS)),this.addEventListener("keydown",ES(this,lS)),this.addEventListener("click",ES(this,cS)),Im.addEventListener("click",ES(this,dS))}disable(){ES(this,iS).toggleAttribute("disabled",!0),this.removeEventListener("change",ES(this,uS)),this.removeEventListener("keydown",ES(this,lS)),this.removeEventListener("keyup",ES(this,oS)),this.removeEventListener("click",ES(this,cS)),Im.removeEventListener("click",ES(this,dS))}attributeChangedCallback(e,t,n){var i,r,s,a,o;e===Yh.MEDIA_CONTROLLER?(t&&(null==(r=null==(i=ES(this,nS))?void 0:i.unassociateElement)||r.call(i,this),_S(this,nS,null),ES(this,sS).removeAttribute(Yh.MEDIA_CONTROLLER)),n&&this.isConnected&&(_S(this,nS,null==(s=this.getRootNode())?void 0:s.getElementById(n)),null==(o=null==(a=ES(this,nS))?void 0:a.associateElement)||o.call(a,this),ES(this,sS).setAttribute(Yh.MEDIA_CONTROLLER,n))):"disabled"===e&&n!==t&&(null==n?this.enable():this.disable())}connectedCallback(){var e,t,n;const{style:i}=Km(this.shadowRoot,":host");i.setProperty("display",`var(--media-control-display, var(--${this.localName}-display, inline-flex))`);const r=this.getAttribute(Yh.MEDIA_CONTROLLER);r&&(_S(this,nS,null==(e=this.getRootNode())?void 0:e.getElementById(r)),null==(n=null==(t=ES(this,nS))?void 0:t.associateElement)||n.call(t,this),ES(this,sS).setAttribute(Yh.MEDIA_CONTROLLER,r)),this.hasAttribute("disabled")||this.enable(),ES(this,aS).hidden||Om(wS(this),ES(this,bS))}disconnectedCallback(){var e,t;Pm(wS(this),ES(this,bS)),this.disable(),null==(t=null==(e=ES(this,nS))?void 0:e.unassociateElement)||t.call(e,this),_S(this,nS,null),ES(this,sS).removeAttribute(Yh.MEDIA_CONTROLLER)}get keysUsed(){return["Enter","Escape"," ","ArrowUp","ArrowDown","f","c","k","m"]}}function wS(e){var t;return null!=(t=e.getAttribute("bounds")?Hm(e,`#${e.getAttribute("bounds")}`):function(e){var t;const n=e.getAttribute(Yh.MEDIA_CONTROLLER);if(n)return null==(t=e.getRootNode())?void 0:t.getElementById(n);return Hm(e,"media-controller")}(e)||e.parentElement)?t:e}nS=new WeakMap,iS=new WeakMap,rS=new WeakMap,sS=new WeakMap,aS=new WeakMap,oS=new WeakMap,lS=new WeakMap,dS=new WeakMap,cS=new WeakMap,uS=new WeakMap,hS=new WeakSet,mS=function(){ES(this,aS).hidden?AS(this,pS,fS).call(this):AS(this,gS,vS).call(this)},pS=new WeakSet,fS=function(){ES(this,aS).hidden&&(ES(this,aS).hidden=!1,ES(this,iS).setAttribute("aria-expanded","true"),ES(this,bS).call(this),ES(this,sS).focus(),Om(wS(this),ES(this,bS)))},gS=new WeakSet,vS=function(){if(ES(this,aS).hidden)return;Pm(wS(this),ES(this,bS));const e=Vm();ES(this,aS).hidden=!0,ES(this,iS).setAttribute("aria-expanded","false"),$m(ES(this,sS),e)&&ES(this,iS).focus()},bS=new WeakMap,Cm.customElements.get("media-chrome-selectmenu")||Cm.customElements.define("media-chrome-selectmenu",kS);var LS,RS,CS,IS,xS,DS=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},MS=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},OS=(e,t,n)=>(DS(e,t,"access private method"),n);const PS=Im.createElement("template");PS.innerHTML='\n  <slot name="captions-indicator" hidden>\n<svg aria-hidden="true" viewBox="0 0 26 24" part="captions-indicator indicator">\n  <path d="M22.83 5.68a2.58 2.58 0 0 0-2.3-2.5c-3.62-.24-11.44-.24-15.06 0a2.58 2.58 0 0 0-2.3 2.5c-.23 4.21-.23 8.43 0 12.64a2.58 2.58 0 0 0 2.3 2.5c3.62.24 11.44.24 15.06 0a2.58 2.58 0 0 0 2.3-2.5c.23-4.21.23-8.43 0-12.64Zm-11.39 9.45a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.92 3.92 0 0 1 .92-2.77 3.18 3.18 0 0 1 2.43-1 2.94 2.94 0 0 1 2.13.78c.364.359.62.813.74 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.17 1.61 1.61 0 0 0-1.29.58 2.79 2.79 0 0 0-.5 1.89 3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.48 1.48 0 0 0 1-.37 2.1 2.1 0 0 0 .59-1.14l1.4.44a3.23 3.23 0 0 1-1.07 1.69Zm7.22 0a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.88 3.88 0 0 1 .93-2.77 3.14 3.14 0 0 1 2.42-1 3 3 0 0 1 2.16.82 2.8 2.8 0 0 1 .73 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.21 1.61 1.61 0 0 0-1.29.58A2.79 2.79 0 0 0 15 12a3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.44 1.44 0 0 0 1-.37 2.1 2.1 0 0 0 .6-1.15l1.4.44a3.17 3.17 0 0 1-1.1 1.7Z"/>\n</svg></slot>\n';class NS extends $A{constructor(){super({slotTemplate:PS}),MS(this,RS),MS(this,IS),MS(this,LS,void 0)}static get observedAttributes(){return[...super.observedAttributes,"aria-multiselectable",Qh.MEDIA_SUBTITLES_LIST,Qh.MEDIA_SUBTITLES_SHOWING]}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),e===Qh.MEDIA_SUBTITLES_LIST&&t!==n?OS(this,RS,CS).call(this):e===Qh.MEDIA_SUBTITLES_SHOWING&&t!==n?this.value=n:"aria-multiselectable"===e&&(this.removeAttribute("aria-multiselectable"),console.warn("Captions List doesn't currently support multiple selections. You can enable multiple items via the media.textTracks API."))}connectedCallback(){super.connectedCallback(),this.addEventListener("change",OS(this,IS,xS))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("change",OS(this,IS,xS))}get mediaSubtitlesList(){return FS(this,Qh.MEDIA_SUBTITLES_LIST)}set mediaSubtitlesList(e){US(this,Qh.MEDIA_SUBTITLES_LIST,e)}get mediaSubtitlesShowing(){return FS(this,Qh.MEDIA_SUBTITLES_SHOWING)}set mediaSubtitlesShowing(e){US(this,Qh.MEDIA_SUBTITLES_SHOWING,e)}}LS=new WeakMap,RS=new WeakSet,CS=function(){var e;if(((e,t,n)=>(DS(e,t,"read from private field"),n?n.call(e):t.get(e)))(this,LS)===JSON.stringify(this.mediaSubtitlesList))return;((e,t,n,i)=>{DS(e,t,"write to private field"),i?i.call(e,n):t.set(e,n)})(this,LS,JSON.stringify(this.mediaSubtitlesList));const t=this.shadowRoot.querySelector("#container");t.textContent="";const n=!this.value,i=FA(this.formatOptionText("Off"),"off",n);i.prepend(UA(this,"select-indicator")),t.append(i);const r=this.mediaSubtitlesList;for(const n of r){const i=FA(this.formatOptionText(n.label,n),Gp(n),this.value==Gp(n));i.prepend(UA(this,"select-indicator"));"captions"===(null!=(e=n.kind)?e:"subs")&&i.append(UA(this,"captions-indicator")),t.append(i)}},IS=new WeakSet,xS=function(){const e=this.mediaSubtitlesShowing,t=this.getAttribute(Qh.MEDIA_SUBTITLES_SHOWING),n=this.value!==t;if((null==e?void 0:e.length)&&n&&this.dispatchEvent(new Cm.CustomEvent(jh.MEDIA_DISABLE_SUBTITLES_REQUEST,{composed:!0,bubbles:!0,detail:e})),!this.value||!n)return;const i=new Cm.CustomEvent(jh.MEDIA_SHOW_SUBTITLES_REQUEST,{composed:!0,bubbles:!0,detail:this.value});this.dispatchEvent(i)};const FS=(e,t)=>{const n=e.getAttribute(t);return n?Vp(n):[]},US=(e,t,n)=>{if(!(null==n?void 0:n.length))return void e.removeAttribute(t);const i=Kp(n);e.getAttribute(t)!==i&&e.setAttribute(t,i)};Cm.customElements.get("media-captions-listbox")||Cm.customElements.define("media-captions-listbox",NS);class BS extends kS{init(){const e=Im.createElement("media-captions-button");e.part.add("button"),e.preventClick=!0;const t=Im.createElement("media-captions-listbox");t.part.add("listbox"),t.setAttribute("exportparts","option, option-selected, indicator");const n=this.shadowRoot.querySelector("slot[name=button]"),i=this.shadowRoot.querySelector("slot[name=listbox]");n.textContent="",i.textContent="",n.append(e),i.append(t)}}Cm.customElements.get("media-captions-selectmenu")||Cm.customElements.define("media-captions-selectmenu",BS);var $S,HS,VS,WS,GS,KS=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},qS=(e,t,n)=>(KS(e,t,"read from private field"),n?n.call(e):t.get(e)),jS=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},YS=(e,t,n)=>(KS(e,t,"access private method"),n);const zS="rates";class XS extends $A{constructor(){super(),jS(this,HS),jS(this,WS),jS(this,$S,new $p(this,zS,{defaultValue:jE})),YS(this,HS,VS).call(this)}static get observedAttributes(){return[...super.observedAttributes,"aria-multiselectable",Qh.MEDIA_PLAYBACK_RATE,zS]}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),e===Qh.MEDIA_PLAYBACK_RATE&&t!=n?this.value=n:e===zS&&t!=n&&(qS(this,$S).value=n,YS(this,HS,VS).call(this))}get rates(){return qS(this,$S)}set rates(e){e?Array.isArray(e)&&(qS(this,$S).value=e.join(" ")):qS(this,$S).value="",YS(this,HS,VS).call(this)}get mediaPlaybackRate(){return jm(this,Qh.MEDIA_PLAYBACK_RATE,1)}set mediaPlaybackRate(e){Ym(this,Qh.MEDIA_PLAYBACK_RATE,e)}connectedCallback(){super.connectedCallback(),this.addEventListener("change",YS(this,WS,GS))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("change",YS(this,WS,GS))}}$S=new WeakMap,HS=new WeakSet,VS=function(){const e=this.shadowRoot.querySelector("#container");e.textContent="";for(const t of this.rates){const n=FA(this.formatOptionText(`${t}x`,t),t,this.mediaPlaybackRate==t);n.prepend(UA(this,"select-indicator")),e.append(n)}},WS=new WeakSet,GS=function(){if(!this.value)return;const e=new Cm.CustomEvent(jh.MEDIA_PLAYBACK_RATE_REQUEST,{composed:!0,bubbles:!0,detail:this.value});this.dispatchEvent(e)},Cm.customElements.get("media-playback-rate-listbox")||Cm.customElements.define("media-playback-rate-listbox",XS);class QS extends kS{init(){const e=Im.createElement("media-playback-rate-button");e.part.add("button"),e.preventClick=!0;const t=Im.createElement("media-playback-rate-listbox");t.part.add("listbox"),t.setAttribute("exportparts","option, option-selected, indicator");const n=this.shadowRoot.querySelector("slot[name=button]"),i=this.shadowRoot.querySelector("slot[name=listbox]");n.textContent="",i.textContent="",n.append(e),i.append(t)}}Cm.customElements.get("media-playback-rate-selectmenu")||Cm.customElements.define("media-playback-rate-selectmenu",QS);var ZS,JS,ek,tk,nk,ik,rk=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},sk=(e,t,n)=>(rk(e,t,"read from private field"),n?n.call(e):t.get(e)),ak=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},ok=(e,t,n,i)=>(rk(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),lk=(e,t,n)=>(rk(e,t,"access private method"),n);class dk extends $A{constructor(){super(...arguments),ak(this,ek),ak(this,nk),ak(this,ZS,[]),ak(this,JS,void 0)}static get observedAttributes(){return[...super.observedAttributes,Qh.MEDIA_RENDITION_LIST,Qh.MEDIA_RENDITION_SELECTED]}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),e===Qh.MEDIA_RENDITION_SELECTED&&t!==n?this.value=null!=n?n:"auto":e===Qh.MEDIA_RENDITION_LIST&&t!==n&&(ok(this,ZS,um(n)),lk(this,ek,tk).call(this))}connectedCallback(){super.connectedCallback(),this.addEventListener("change",lk(this,nk,ik))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("change",lk(this,nk,ik))}get mediaRenditionList(){return sk(this,ZS)}set mediaRenditionList(e){ok(this,ZS,e),lk(this,ek,tk).call(this)}get mediaRenditionSelected(){return Qm(this,Qh.MEDIA_RENDITION_SELECTED)}set mediaRenditionSelected(e){Zm(this,Qh.MEDIA_RENDITION_SELECTED,e)}}ZS=new WeakMap,JS=new WeakMap,ek=new WeakSet,tk=function(){if(sk(this,JS)===JSON.stringify(this.mediaRenditionList))return;ok(this,JS,JSON.stringify(this.mediaRenditionList));const e=this.mediaRenditionList.sort(((e,t)=>t.height-e.height)),t=this.shadowRoot.querySelector("#container");t.textContent="";let n=!this.mediaRenditionSelected;for(const i of e){const e=FA(this.formatOptionText(`${Math.min(i.width,i.height)}p`,i),`${i.id}`,i.selected&&!n);e.prepend(UA(this,"select-indicator")),t.append(e)}const i=FA(this.formatOptionText("Auto"),"auto",n);i.prepend(UA(this,"select-indicator")),t.append(i)},nk=new WeakSet,ik=function(){if(null==this.value)return;const e=new Cm.CustomEvent(jh.MEDIA_RENDITION_REQUEST,{composed:!0,bubbles:!0,detail:this.value});this.dispatchEvent(e)},Cm.customElements.get("media-rendition-listbox")||Cm.customElements.define("media-rendition-listbox",dk);const ck=Im.createElement("template");ck.innerHTML='\n  <slot name="icon"><svg aria-hidden="true" viewBox="0 0 24 24">\n  <path d="M13.5 2.5h2v6h-2v-2h-11v-2h11v-2Zm4 2h4v2h-4v-2Zm-12 4h2v6h-2v-2h-3v-2h3v-2Zm4 2h12v2h-12v-2Zm1 4h2v6h-2v-2h-8v-2h8v-2Zm4 2h7v2h-7v-2Z" />\n</svg></slot>\n';class uk extends vg{static get observedAttributes(){return[...super.observedAttributes,Qh.MEDIA_RENDITION_SELECTED,Qh.MEDIA_RENDITION_UNAVAILABLE]}constructor(){super({slotTemplate:ck})}get mediaRenditionSelected(){return Qm(this,Qh.MEDIA_RENDITION_SELECTED)}set mediaRenditionSelected(e){Zm(this,Qh.MEDIA_RENDITION_SELECTED,e)}}Cm.customElements.get("media-rendition-button")||Cm.customElements.define("media-rendition-button",uk);class hk extends kS{static get observedAttributes(){return[...super.observedAttributes,Qh.MEDIA_RENDITION_SELECTED,Qh.MEDIA_RENDITION_UNAVAILABLE]}init(){const e=Im.createElement("media-rendition-button");e.part.add("button"),e.preventClick=!0;const t=Im.createElement("media-rendition-listbox");t.part.add("listbox"),t.setAttribute("exportparts","option, option-selected, indicator");const n=this.shadowRoot.querySelector("slot[name=button]"),i=this.shadowRoot.querySelector("slot[name=listbox]");n.textContent="",i.textContent="",n.append(e),i.append(t)}}Cm.customElements.get("media-rendition-selectmenu")||Cm.customElements.define("media-rendition-selectmenu",hk);var mk,pk,fk,gk,vk,bk,yk=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Ek=(e,t,n)=>(yk(e,t,"read from private field"),n?n.call(e):t.get(e)),Tk=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},_k=(e,t,n,i)=>(yk(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),Ak=(e,t,n)=>(yk(e,t,"access private method"),n);class Sk extends $A{constructor(){super(...arguments),Tk(this,fk),Tk(this,vk),Tk(this,mk,[]),Tk(this,pk,void 0)}static get observedAttributes(){return[...super.observedAttributes,Qh.MEDIA_AUDIO_TRACK_LIST,Qh.MEDIA_AUDIO_TRACK_ENABLED]}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),e===Qh.MEDIA_AUDIO_TRACK_ENABLED&&t!==n?this.value=n:e===Qh.MEDIA_AUDIO_TRACK_LIST&&t!==n&&(_k(this,mk,pm(n)),Ak(this,fk,gk).call(this))}connectedCallback(){super.connectedCallback(),this.addEventListener("change",Ak(this,vk,bk))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("change",Ak(this,vk,bk))}get mediaAudioTrackList(){return Ek(this,mk)}set mediaAudioTrackList(e){_k(this,mk,e),Ak(this,fk,gk).call(this)}get mediaAudioTrackEnabled(){return Qm(this,Qh.MEDIA_AUDIO_TRACK_ENABLED)}set mediaAudioTrackEnabled(e){Zm(this,Qh.MEDIA_AUDIO_TRACK_ENABLED,e)}}mk=new WeakMap,pk=new WeakMap,fk=new WeakSet,gk=function(){if(Ek(this,pk)===JSON.stringify(this.mediaAudioTrackList))return;_k(this,pk,JSON.stringify(this.mediaAudioTrackList));const e=this.mediaAudioTrackList,t=this.shadowRoot.querySelector("#container");t.textContent="";for(const n of e){const e=FA(this.formatOptionText(n.label,n),`${n.id}`,n.enabled);e.prepend(UA(this,"select-indicator")),t.append(e)}},vk=new WeakSet,bk=function(){if(null==this.value)return;const e=new Cm.CustomEvent(jh.MEDIA_AUDIO_TRACK_REQUEST,{composed:!0,bubbles:!0,detail:this.value});this.dispatchEvent(e)},Cm.customElements.get("media-audio-track-listbox")||Cm.customElements.define("media-audio-track-listbox",Sk);const kk=Im.createElement("template");kk.innerHTML='\n  <slot name="icon"><svg aria-hidden="true" viewBox="0 0 24 24">\n  <path d="M11 17H9.5V7H11v10Zm-3-3H6.5v-4H8v4Zm6-5h-1.5v6H14V9Zm3 7h-1.5V8H17v8Z"/>\n  <path d="M22 12c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2s10 4.477 10 10Zm-2 0a8 8 0 1 0-16 0 8 8 0 0 0 16 0Z"/>\n</svg></slot>\n';class wk extends vg{static get observedAttributes(){return[...super.observedAttributes,Qh.MEDIA_AUDIO_TRACK_ENABLED,Qh.MEDIA_AUDIO_TRACK_UNAVAILABLE]}constructor(){super({slotTemplate:kk})}get mediaAudioTrackEnabled(){return Qm(this,Qh.MEDIA_AUDIO_TRACK_ENABLED)}set mediaAudioTrackEnabled(e){Zm(this,Qh.MEDIA_AUDIO_TRACK_ENABLED,e)}}Cm.customElements.get("media-audio-track-button")||Cm.customElements.define("media-audio-track-button",wk);class Lk extends kS{static get observedAttributes(){return[...super.observedAttributes,Qh.MEDIA_AUDIO_TRACK_ENABLED,Qh.MEDIA_AUDIO_TRACK_UNAVAILABLE]}init(){const e=Im.createElement("media-audio-track-button");e.part.add("button"),e.preventClick=!0;const t=Im.createElement("media-audio-track-listbox");t.part.add("listbox"),t.setAttribute("exportparts","option, option-selected, indicator");const n=this.shadowRoot.querySelector("slot[name=button]"),i=this.shadowRoot.querySelector("slot[name=listbox]");n.textContent="",i.textContent="",n.append(e),i.append(t)}}Cm.customElements.get("media-audio-track-selectmenu")||Cm.customElements.define("media-audio-track-selectmenu",Lk);var Rk=Object.create,Ck=Object.defineProperty,Ik=Object.getOwnPropertyDescriptor,xk=Object.getOwnPropertyNames,Dk=Object.getPrototypeOf,Mk=Object.prototype.hasOwnProperty,Ok=function(e,t){return function(){return e&&(t=e(e=0)),t}},Pk=function(e,t){return function(){return t||e((t={exports:{}}).exports,t),t.exports}},Nk=function(e,t,n){return n=null!=e?Rk(Dk(e)):{},function(e,t,n,i){if(t&&"object"==typeof t||"function"==typeof t)for(var r,s=xk(t),a=0,o=s.length;a<o;a++)r=s[a],!Mk.call(e,r)&&r!==n&&Ck(e,r,{get:function(e){return t[e]}.bind(null,r),enumerable:!(i=Ik(t,r))||i.enumerable});return e}(!t&&e&&e.__esModule?n:Ck(n,"default",{value:e,enumerable:!0}),e)},Fk=Pk((function(e,t){var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t.exports=n}));function Uk(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}var Bk=Ok((function(){})),$k=Pk((function(e,t){var n,i;Bk(),n=e,i=function(){var e=function(){},t="undefined",n=("undefined"==typeof window?"undefined":Uk(window))!==t&&Uk(window.navigator)!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"];function r(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(t){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function s(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function a(t,n){for(var r=0;r<i.length;r++){var s=i[r];this[s]=r<t?e:this.methodFactory(s,t,n)}this.log=this.debug}function o(e,n,i){return function(){("undefined"==typeof console?"undefined":Uk(console))!==t&&(a.call(this,n,i),this[e].apply(this,arguments))}}function l(i,a,l){return function(i){return"debug"===i&&(i="log"),("undefined"==typeof console?"undefined":Uk(console))!==t&&("trace"===i&&n?s:void 0!==console[i]?r(console,i):void 0!==console.log?r(console,"log"):e)}(i)||o.apply(this,arguments)}function d(e,n,r){var s,o=this;n=null==n?"WARN":n;var d="loglevel";function c(){var e;if(("undefined"==typeof window?"undefined":Uk(window))!==t&&d){try{e=window.localStorage[d]}catch(e){}if((void 0===e?"undefined":Uk(e))===t)try{var n=window.document.cookie,i=n.indexOf(encodeURIComponent(d)+"=");-1!==i&&(e=/^([^;]+)/.exec(n.slice(i))[1])}catch(e){}return void 0===o.levels[e]&&(e=void 0),e}}"string"==typeof e?d+=":"+e:"symbol"===(void 0===e?"undefined":Uk(e))&&(d=void 0),o.name=e,o.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},o.methodFactory=r||l,o.getLevel=function(){return s},o.setLevel=function(n,r){if("string"==typeof n&&void 0!==o.levels[n.toUpperCase()]&&(n=o.levels[n.toUpperCase()]),!("number"==typeof n&&n>=0&&n<=o.levels.SILENT))throw"log.setLevel() called with invalid level: "+n;if(s=n,!1!==r&&function(e){var n=(i[e]||"silent").toUpperCase();if(("undefined"==typeof window?"undefined":Uk(window))!==t&&d){try{return void(window.localStorage[d]=n)}catch(e){}try{window.document.cookie=encodeURIComponent(d)+"="+n+";"}catch(e){}}}(n),a.call(o,n,e),("undefined"==typeof console?"undefined":Uk(console))===t&&n<o.levels.SILENT)return"No console available for logging"},o.setDefaultLevel=function(e){n=e,c()||o.setLevel(e,!1)},o.resetLevel=function(){o.setLevel(n,!1),function(){if(("undefined"==typeof window?"undefined":Uk(window))!==t&&d){try{return void window.localStorage.removeItem(d)}catch(e){}try{window.document.cookie=encodeURIComponent(d)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}()},o.enableAll=function(e){o.setLevel(o.levels.TRACE,e)},o.disableAll=function(e){o.setLevel(o.levels.SILENT,e)};var u=c();null==u&&(u=n),o.setLevel(u,!1)}var c=new d,u={};c.getLogger=function(e){if("symbol"!==(void 0===e?"undefined":Uk(e))&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=u[e];return t||(t=u[e]=new d(e,c.getLevel(),c.methodFactory)),t};var h=("undefined"==typeof window?"undefined":Uk(window))!==t?window.log:void 0;return c.noConflict=function(){return("undefined"==typeof window?"undefined":Uk(window))!==t&&window.log===c&&(window.log=h),c},c.getLoggers=function(){return u},c.default=c,c},"function"==typeof define&&define.amd?define(i):"object"==typeof t&&t.exports?t.exports=i():n.log=i()}));function Hk(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):Hk(e,t)}var Vk=Ok((function(){Vk()})),Wk=Pk((function(e){var t=Object.prototype.hasOwnProperty;function n(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function i(e){try{return encodeURIComponent(e)}catch(e){return null}}e.stringify=function(e,n){n=n||"";var r,s,a=[];for(s in"string"!=typeof n&&(n="?"),e)if(t.call(e,s)){if(!(r=e[s])&&(null==r||isNaN(r))&&(r=""),s=i(s),r=i(r),null===s||null===r)continue;a.push(s+"="+r)}return a.length?n+a.join("&"):""},e.parse=function(e){for(var t,i=/([^=?#&]+)=?([^&]*)/g,r={};t=i.exec(e);){var s=n(t[1]),a=n(t[2]);null===s||null===a||s in r||(r[s]=a)}return r}})),Gk=Pk((function(e,t){!function(n){var i=!1;if("function"==typeof define&&define.amd&&(define(n),i=!0),"object"==typeof e&&(t.exports=n(),i=!0),!i){var r=window.Cookies,s=window.Cookies=n();s.noConflict=function(){return window.Cookies=r,s}}}((function(){var e=function(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t};return function t(n){function i(t,r,s){var a;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(s=e({path:"/"},i.defaults,s)).expires){var o=new Date;o.setMilliseconds(o.getMilliseconds()+864e5*s.expires),s.expires=o}try{a=JSON.stringify(r),/^[\{\[]/.test(a)&&(r=a)}catch(e){}return r=n.write?n.write(r,t):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=(t=(t=encodeURIComponent(String(t))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape),document.cookie=[t,"=",r,s.expires?"; expires="+s.expires.toUTCString():"",s.path?"; path="+s.path:"",s.domain?"; domain="+s.domain:"",s.secure?"; secure":""].join("")}t||(a={});for(var l=document.cookie?document.cookie.split("; "):[],d=/(%[0-9A-Z]{2})+/g,c=0;c<l.length;c++){var u=l[c].split("="),h=u.slice(1).join("=");'"'===h.charAt(0)&&(h=h.slice(1,-1));try{var m=u[0].replace(d,decodeURIComponent);if(h=n.read?n.read(h,m):n(h,m)||h.replace(d,decodeURIComponent),this.json)try{h=JSON.parse(h)}catch(e){}if(t===m){a=h;break}t||(a[m]=h)}catch(e){}}return a}}return i.set=i,i.get=function(e){return i.call(i,e)},i.getJSON=function(){return i.apply({json:!0},[].slice.call(arguments))},i.defaults={},i.remove=function(t,n){i(t,"",e(n,{expires:-1}))},i.withConverter=t,i}((function(){}))}))})),Kk=Pk((function(e,t){var n=Array.prototype.slice;t.exports=function(e,t){for(("length"in e||(e=[e]),e=n.call(e));e.length;){var i=e.shift(),r=t(i);if(r)return r;i.childNodes&&i.childNodes.length&&(e=n.call(i.childNodes).concat(e))}}})),qk=Pk((function(e,t){function n(e,t){if(!Hk(this,n))return new n(e,t);this.data=e,this.nodeValue=e,this.length=e.length,this.ownerDocument=t||null}Vk(),t.exports=n,n.prototype.nodeType=8,n.prototype.nodeName="#comment",n.prototype.toString=function(){return"[object Comment]"}})),jk=Pk((function(e,t){function n(e,t){if(!Hk(this,n))return new n(e);this.data=e||"",this.length=this.data.length,this.ownerDocument=t||null}Vk(),t.exports=n,n.prototype.type="DOMTextNode",n.prototype.nodeType=3,n.prototype.nodeName="#text",n.prototype.toString=function(){return this.data},n.prototype.replaceData=function(e,t,n){var i=this.data,r=i.substring(0,e),s=i.substring(e+t,i.length);this.data=r+n+s,this.length=this.data.length}})),Yk=Pk((function(e,t){t.exports=function(e){var t=this,n=e.type;e.target||(e.target=t),t.listeners||(t.listeners={});var i=t.listeners[n];if(i)return i.forEach((function(n){e.currentTarget=t,"function"==typeof n?n(e):n.handleEvent(e)}));t.parentNode&&t.parentNode.dispatchEvent(e)}})),zk=Pk((function(e,t){t.exports=function(e,t){var n=this;n.listeners||(n.listeners={}),n.listeners[e]||(n.listeners[e]=[]),-1===n.listeners[e].indexOf(t)&&n.listeners[e].push(t)}})),Xk=Pk((function(e,t){t.exports=function(e,t){var n=this;if(n.listeners&&n.listeners[e]){var i=n.listeners[e],r=i.indexOf(t);-1!==r&&i.splice(r,1)}}})),Qk=Pk((function(e,t){Bk(),t.exports=i;var n=["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"];function i(e){switch(e.nodeType){case 3:return a(e.data);case 8:return"\x3c!--"+e.data+"--\x3e";default:return function(e){var t=[],o=e.tagName;return"http://www.w3.org/1999/xhtml"===e.namespaceURI&&(o=o.toLowerCase()),t.push("<"+o+function(e){var t=[];for(var n in e)r(e,n)&&t.push({name:n,value:e[n]});for(var i in e._attributes)for(var a in e._attributes[i]){var o=e._attributes[i][a],l=(o.prefix?o.prefix+":":"")+a;t.push({name:l,value:o.value})}return e.className&&t.push({name:"class",value:e.className}),t.length?s(t):""}(e)+function(e){var t=e.dataset,n=[];for(var i in t)n.push({name:"data-"+i,value:t[i]});return n.length?s(n):""}(e)),n.indexOf(o)>-1?t.push(" />"):(t.push(">"),e.childNodes.length?t.push.apply(t,e.childNodes.map(i)):e.textContent||e.innerText?t.push(a(e.textContent||e.innerText)):e.innerHTML&&t.push(e.innerHTML),t.push("</"+o+">")),t.join("")}(e)}}function r(e,t){var n=Uk(e[t]);return"style"===t&&Object.keys(e.style).length>0||e.hasOwnProperty(t)&&("string"===n||"boolean"===n||"number"===n)&&"nodeName"!==t&&"className"!==t&&"tagName"!==t&&"textContent"!==t&&"innerText"!==t&&"namespaceURI"!==t&&"innerHTML"!==t}function s(e){var t=[];return e.forEach((function(e){var n=e.name,i=e.value;"style"===n&&(i=function(e){if("string"==typeof e)return e;var t="";return Object.keys(e).forEach((function(n){var i=e[n];n=n.replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()})),t+=n+":"+i+";"})),t}(i)),t.push(n+'="'+function(e){return a(e).replace(/"/g,"&quot;")}(i)+'"')})),t.length?" "+t.join(" "):""}function a(e){var t="";return"string"==typeof e?t=e:e&&(t=e.toString()),t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}})),Zk=Pk((function(e,t){Vk();var n=Kk(),i=Yk(),r=zk(),s=Xk(),a=Qk(),o="http://www.w3.org/1999/xhtml";function l(e,t,n){if(!Hk(this,l))return new l(e);var i=void 0===n?o:n||null;this.tagName=i===o?String(e).toUpperCase():e,this.nodeName=this.tagName,this.className="",this.dataset={},this.childNodes=[],this.parentNode=null,this.style={},this.ownerDocument=t||null,this.namespaceURI=i,this._attributes={},"INPUT"===this.tagName&&(this.type="text")}t.exports=l,l.prototype.type="DOMElement",l.prototype.nodeType=1,l.prototype.appendChild=function(e){return e.parentNode&&e.parentNode.removeChild(e),this.childNodes.push(e),e.parentNode=this,e},l.prototype.replaceChild=function(e,t){e.parentNode&&e.parentNode.removeChild(e);var n=this.childNodes.indexOf(t);return t.parentNode=null,this.childNodes[n]=e,e.parentNode=this,t},l.prototype.removeChild=function(e){var t=this.childNodes.indexOf(e);return this.childNodes.splice(t,1),e.parentNode=null,e},l.prototype.insertBefore=function(e,t){e.parentNode&&e.parentNode.removeChild(e);var n=null==t?-1:this.childNodes.indexOf(t);return n>-1?this.childNodes.splice(n,0,e):this.childNodes.push(e),e.parentNode=this,e},l.prototype.setAttributeNS=function(e,t,n){var i=null,r=t,s=t.indexOf(":");(s>-1&&(i=t.substr(0,s),r=t.substr(s+1)),"INPUT"===this.tagName&&"type"===t)?this.type=n:(this._attributes[e]||(this._attributes[e]={}))[r]={value:n,prefix:i}},l.prototype.getAttributeNS=function(e,t){var n=this._attributes[e],i=n&&n[t]&&n[t].value;return"INPUT"===this.tagName&&"type"===t?this.type:"string"!=typeof i?null:i},l.prototype.removeAttributeNS=function(e,t){var n=this._attributes[e];n&&delete n[t]},l.prototype.hasAttributeNS=function(e,t){var n=this._attributes[e];return!!n&&t in n},l.prototype.setAttribute=function(e,t){return this.setAttributeNS(null,e,t)},l.prototype.getAttribute=function(e){return this.getAttributeNS(null,e)},l.prototype.removeAttribute=function(e){return this.removeAttributeNS(null,e)},l.prototype.hasAttribute=function(e){return this.hasAttributeNS(null,e)},l.prototype.removeEventListener=s,l.prototype.addEventListener=r,l.prototype.dispatchEvent=i,l.prototype.focus=function(){},l.prototype.toString=function(){return a(this)},l.prototype.getElementsByClassName=function(e){var t=e.split(" "),i=[];return n(this,(function(e){if(1===e.nodeType){var n=(e.className||"").split(" ");t.every((function(e){return-1!==n.indexOf(e)}))&&i.push(e)}})),i},l.prototype.getElementsByTagName=function(e){e=e.toLowerCase();var t=[];return n(this.childNodes,(function(n){1===n.nodeType&&("*"===e||n.tagName.toLowerCase()===e)&&t.push(n)})),t},l.prototype.contains=function(e){return n(this,(function(t){return e===t}))||!1}})),Jk=Pk((function(e,t){Vk();var n=Zk();function i(e){if(!Hk(this,i))return new i;this.childNodes=[],this.parentNode=null,this.ownerDocument=e||null}t.exports=i,i.prototype.type="DocumentFragment",i.prototype.nodeType=11,i.prototype.nodeName="#document-fragment",i.prototype.appendChild=n.prototype.appendChild,i.prototype.replaceChild=n.prototype.replaceChild,i.prototype.removeChild=n.prototype.removeChild,i.prototype.toString=function(){return this.childNodes.map((function(e){return String(e)})).join("")}})),ew=Pk((function(e,t){function n(e){}t.exports=n,n.prototype.initEvent=function(e,t,n){this.type=e,this.bubbles=t,this.cancelable=n},n.prototype.preventDefault=function(){}})),tw=Pk((function(e,t){Vk();var n=Kk(),i=qk(),r=jk(),s=Zk(),a=Jk(),o=ew(),l=Yk(),d=zk(),c=Xk();function u(){if(!Hk(this,u))return new u;this.head=this.createElement("head"),this.body=this.createElement("body"),this.documentElement=this.createElement("html"),this.documentElement.appendChild(this.head),this.documentElement.appendChild(this.body),this.childNodes=[this.documentElement],this.nodeType=9}t.exports=u;var h=u.prototype;h.createTextNode=function(e){return new r(e,this)},h.createElementNS=function(e,t){var n=null===e?null:String(e);return new s(t,this,n)},h.createElement=function(e){return new s(e,this)},h.createDocumentFragment=function(){return new a(this)},h.createEvent=function(e){return new o(e)},h.createComment=function(e){return new i(e,this)},h.getElementById=function(e){e=String(e);var t=n(this.childNodes,(function(t){if(String(t.id)===e)return t}));return t||null},h.getElementsByClassName=s.prototype.getElementsByClassName,h.getElementsByTagName=s.prototype.getElementsByTagName,h.contains=s.prototype.contains,h.removeEventListener=c,h.addEventListener=d,h.dispatchEvent=l})),nw=Pk((function(e,t){var n=tw();t.exports=new n})),iw=Pk((function(e,t){var n,i="undefined"!=typeof global?global:"undefined"!=typeof window?window:{},r=nw();"undefined"!=typeof document?n=document:(n=i["__GLOBAL_DOCUMENT_CACHE@4"])||(n=i["__GLOBAL_DOCUMENT_CACHE@4"]=r),t.exports=n}));function rw(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function sw(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,s=[],a=!0,o=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(s.push(i.value),!t||s.length!==t);a=!0);}catch(e){o=!0,r=e}finally{try{!a&&null!=n.return&&n.return()}finally{if(o)throw r}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return rw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rw(e,t)}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var aw=Nk(Fk()),ow=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},lw=function(){return("000000"+(Math.random()*Math.pow(36,6)|0).toString(36)).slice(-6)},dw=function(e){if(e&&void 0!==e.nodeName)return e.muxId||(e.muxId=lw()),e.muxId;var t;try{t=document.querySelector(e)}catch(e){}return t&&!t.muxId&&(t.muxId=e),(null==t?void 0:t.muxId)||e},cw=function(e){var t;e&&void 0!==e.nodeName?e=dw(t=e):t=document.querySelector(e);var n=t&&t.nodeName?t.nodeName.toLowerCase():"";return[t,e,n]},uw=Nk($k()),hw=uw.default.methodFactory;uw.default.methodFactory=function(e,t,n){var i=hw(e,t,n);return function(){for(var e=["[mux]"],t=0;t<arguments.length;t++)e.push(arguments[t]);i.apply(void 0,e)}},uw.default.setLevel(uw.default.getLevel());var mw=uw.default,pw=Nk(Fk());function fw(){return"1"===(pw.default.doNotTrack||pw.default.navigator&&pw.default.navigator.doNotTrack)}var gw=Nk(Fk()),vw={now:function(){var e=gw.default.performance,t=e&&e.timing,n=t&&t.navigationStart,i="number"==typeof n&&"function"==typeof e.now?n+e.now():Date.now();return Math.round(i)}},bw=vw;function yw(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ew(e,t){if(!Hk(e,t))throw new TypeError("Cannot call a class as a function")}function Tw(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _w(e,t,n){return t&&Tw(e.prototype,t),n&&Tw(e,n),e}function Aw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sw(e,t){return Sw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Sw(e,t)}function kw(e){return(kw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ww(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=kw(e);if(t){var r=kw(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(e,t){return!t||"object"!==Uk(t)&&"function"!=typeof t?yw(e):t}(this,n)}}Vk(),Bk();var Lw=function(e){return Rw(e)[0]},Rw=function(e){if("string"!=typeof e||""===e)return["localhost"];var t,n=(e.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/)||[])[4];return n&&(t=(n.match(/[^\.]+\.[^\.]+$/)||[])[0]),[n,t]},Cw=Nk(Fk()),Iw={exists:function(){var e=Cw.default.performance;return void 0!==(e&&e.timing)},domContentLoadedEventEnd:function(){var e=Cw.default.performance,t=e&&e.timing;return t&&t.domContentLoadedEventEnd},navigationStart:function(){var e=Cw.default.performance,t=e&&e.timing;return t&&t.navigationStart}};function xw(e,t,n){n=void 0===n?1:n,e[t]=e[t]||0,e[t]+=n}function Dw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){Aw(e,t,n[t])}))}return e}function Mw(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}var Ow=["x-request-id","cf-ray","x-amz-cf-id","x-akamai-request-id"],Pw=["x-cdn","content-type"].concat(Ow);function Nw(e){var t={};return(e=e||"").trim().split(/[\r\n]+/).forEach((function(e){if(e){var n=e.split(": "),i=n.shift();i&&(Pw.indexOf(i.toLowerCase())>=0||0===i.toLowerCase().indexOf("x-litix-"))&&(t[i]=n.join(": "))}})),t}function Fw(e){if(e){var t=Ow.find((function(t){return void 0!==e[t]}));return t?e[t]:void 0}}var Uw=function(e){var t={};for(var n in e){var i=e[n];if(-1!==i["DATA-ID"].search("io.litix.data."))t[i["DATA-ID"].replace("io.litix.data.","")]=i.VALUE}return t},Bw=function(e){if(!e)return{};var t=Iw.navigationStart(),n=e.loading,i=n?n.start:e.trequest,r=n?n.first:e.tfirst,s=n?n.end:e.tload;return{bytesLoaded:e.total,requestStart:Math.round(t+i),responseStart:Math.round(t+r),responseEnd:Math.round(t+s)}},$w=function(e){if(e&&"function"==typeof e.getAllResponseHeaders)return Nw(e.getAllResponseHeaders())},Hw=function(e,t){if(!e||!e.requestEndDate)return{};var n,i=Lw(e.url),r=e.url,s=e.bytesLoaded,a=new Date(e.requestStartDate).getTime(),o=new Date(e.firstByteDate).getTime(),l=new Date(e.requestEndDate).getTime(),d=isNaN(e.duration)?0:e.duration,c="function"==typeof t.getMetricsFor?t.getMetricsFor(e.mediaType).HttpList:t.getDashMetrics().getHttpRequests(e.mediaType);return c.length>0&&(n=Nw(c[c.length-1]._responseHeaders||"")),{requestStart:a,requestResponseStart:o,requestResponseEnd:l,requestBytesLoaded:s,requestResponseHeaders:n,requestMediaDuration:d,requestHostname:i,requestUrl:r,requestId:n?Fw(n):void 0}},Vw=function(e){var t;return null===(t=e.match(/.*codecs\*?="(.*)"/))||void 0===t?void 0:t[1]},Ww=function(e,t,n){var i=e.log;if(n&&n.on){var r=function(e){try{var t,n,i=null===(n=e.getVersion)||void 0===n||null===(t=n.call(e))||void 0===t?void 0:t.split(".").map((function(e){return parseInt(e)}))[0];return i}catch(e){return!1}}(n),s=function(n,i){return e.emit(t,n,i)},a=function(e){var t=e.type,n=(e.data||{}).url;s("requestcompleted",{request_event_type:t,request_start:0,request_response_start:0,request_response_end:0,request_bytes_loaded:-1,request_type:"manifest",request_hostname:Lw(n),request_url:n})};n.on("manifestLoaded",a);var o={},l=function(e){if("function"!=typeof e.getRequests)return null;var t=e.getRequests({state:"executed"});return 0===t.length?null:t[t.length-1]},d=function(e){var t=e.type,i=e.chunk,r=e.request,a=(i||{}).mediaInfo||{},l=a.type,d=a.bitrateList,c={};(d=d||[]).forEach((function(e,t){c[t]={},c[t].width=e.width,c[t].height=e.height,c[t].bitrate=e.bandwidth,c[t].attrs={}})),"video"===l?o.video=c:"audio"===l?o.audio=c:o.media=c;var u=Hw(r,n),h=u.requestStart,m=u.requestResponseStart,p=u.requestResponseEnd,f=u.requestResponseHeaders,g=u.requestMediaDuration,v=u.requestHostname,b=u.requestUrl,y=u.requestId;s("requestcompleted",{request_event_type:t,request_start:h,request_response_start:m,request_response_end:p,request_bytes_loaded:-1,request_type:l+"_init",request_response_headers:f,request_hostname:v,request_id:y,request_url:b,request_media_duration:g,request_rendition_lists:o})};r>=4?n.on("initFragmentLoaded",d):n.on("initFragmentLoaded",(function(e){var t=e.type,n=e.fragmentModel,i=e.chunk,r=l(n);d({type:t,request:r,chunk:i})}));var c=function(e){var t=e.type,i=e.chunk,r=e.request,a=i||{},o=a.mediaInfo,l=a.start,d=(o||{}).type,c=Hw(r,n),u=c.requestStart,h=c.requestResponseStart,m=c.requestResponseEnd,p=c.requestBytesLoaded,f=c.requestResponseHeaders,g=c.requestMediaDuration,v=c.requestHostname,b=c.requestUrl,y=c.requestId,E=function(e,t){var n=t.getQualityFor(e),i=t.getCurrentTrackFor(e).bitrateList;return i?{currentLevel:n,renditionWidth:i[n].width||null,renditionHeight:i[n].height||null,renditionBitrate:i[n].bandwidth}:{}}(d,n),T=E.currentLevel,_=E.renditionWidth,A=E.renditionHeight,S=E.renditionBitrate;s("requestcompleted",{request_event_type:t,request_start:u,request_response_start:h,request_response_end:m,request_bytes_loaded:p,request_type:d,request_response_headers:f,request_hostname:v,request_id:y,request_url:b,request_media_start_time:l,request_media_duration:g,request_current_level:T,request_labeled_bitrate:S,request_video_width:_,request_video_height:A})};r>=4?n.on("mediaFragmentLoaded",c):n.on("mediaFragmentLoaded",(function(e){var t=e.type,n=e.fragmentModel,i=e.chunk,r=l(n);c({type:t,request:r,chunk:i})}));var u={video:void 0,audio:void 0,totalBitrate:void 0},h=function(e,t,r){if("number"==typeof e.newQuality){var a=e.mediaType;if("audio"===a||"video"===a){var o=n.getBitrateInfoListFor(a).find((function(t){return t.qualityIndex===e.newQuality}));if(!o||"number"!=typeof o.bitrate)return void i.warn("missing bitrate info for ".concat(a));u[a]=Mw(Dw({},o),{codec:n.getCurrentTrackFor(a).codec});var l=function(){if(u.video&&"number"==typeof u.video.bitrate){if(!u.video.width||!u.video.height)return void i.warn("have bitrate info for video but missing width/height");var e=u.video.bitrate;if(u.audio&&"number"==typeof u.audio.bitrate&&(e+=u.audio.bitrate),e!==u.totalBitrate)return u.totalBitrate=e,{video_source_bitrate:e,video_source_height:u.video.height,video_source_width:u.video.width,video_source_codec:Vw(u.video.codec)}}}();l&&s("renditionchange",l)}}else i.warn("missing evt.newQuality in qualityChangeRendered event",e)};n.on("qualityChangeRendered",h);var m=function(e){var t=e.request,n=e.mediaType;s("requestcanceled",{request_event_type:(t=t||{}).type+"_"+t.action,request_url:t.url,request_type:n,request_hostname:Lw(t.url)})};n.on("fragmentLoadingAbandoned",m);var p=function(e){var t,n,i=e.error,r=(null==i||null===(t=i.data)||void 0===t?void 0:t.request)||{},a=(null==i||null===(n=i.data)||void 0===n?void 0:n.response)||{};27===(null==i?void 0:i.code)&&s("requestfailed",{request_error:r.type+"_"+r.action,request_url:r.url,request_hostname:Lw(r.url),request_type:r.mediaType,request_error_code:a.status,request_error_text:a.statusText});var o="".concat(null!=r&&r.url?"url: ".concat(r.url,"\n"):"")+"".concat(null!=a&&a.status||null!=a&&a.statusText?"response: ".concat(null==a?void 0:a.status,", ").concat(null==a?void 0:a.statusText,"\n"):"");s("error",{player_error_code:null==i?void 0:i.code,player_error_message:null==i?void 0:i.message,player_error_context:o})};n.on("error",p),n._stopMuxMonitor=function(){n.off("manifestLoaded",a),n.off("initFragmentLoaded",d),n.off("mediaFragmentLoaded",c),n.off("qualityChangeRendered",h),n.off("error",p),n.off("fragmentLoadingAbandoned",m),delete n._stopMuxMonitor}}else i.warn("Invalid dash.js player reference. Monitoring blocked.")},Gw=0,Kw=function(){function e(){Ew(this,e),Aw(this,"_listeners",void 0)}return _w(e,[{key:"on",value:function(e,t,n){return t._eventEmitterGuid=t._eventEmitterGuid||++Gw,this._listeners=this._listeners||{},this._listeners[e]=this._listeners[e]||[],n&&(t=t.bind(n)),this._listeners[e].push(t),t}},{key:"off",value:function(e,t){var n=this._listeners&&this._listeners[e];n&&n.forEach((function(e,i){e._eventEmitterGuid===t._eventEmitterGuid&&n.splice(i,1)}))}},{key:"one",value:function(e,t,n){var i=this;t._eventEmitterGuid=t._eventEmitterGuid||++Gw;var r=function(){i.off(e,r),t.apply(n||this,arguments)};r._eventEmitterGuid=t._eventEmitterGuid,this.on(e,r)}},{key:"emit",value:function(e,t){var n=this;if(this._listeners){t=t||{};var i=this._listeners["before*"]||[],r=this._listeners[e]||[],s=this._listeners["after"+e]||[],a=function(t,i){(t=t.slice()).forEach((function(t){t.call(n,{type:e},i)}))};a(i,t),a(r,t),a(s,t)}}}]),e}(),qw=Kw,jw=Nk(Fk()),Yw=function(){function e(t){var n=this;Ew(this,e),Aw(this,"_playbackHeartbeatInterval",void 0),Aw(this,"_playheadShouldBeProgressing",void 0),Aw(this,"pm",void 0),this.pm=t,this._playbackHeartbeatInterval=null,this._playheadShouldBeProgressing=!1,t.on("playing",(function(){n._playheadShouldBeProgressing=!0})),t.on("play",this._startPlaybackHeartbeatInterval.bind(this)),t.on("playing",this._startPlaybackHeartbeatInterval.bind(this)),t.on("adbreakstart",this._startPlaybackHeartbeatInterval.bind(this)),t.on("adplay",this._startPlaybackHeartbeatInterval.bind(this)),t.on("adplaying",this._startPlaybackHeartbeatInterval.bind(this)),t.on("devicewake",this._startPlaybackHeartbeatInterval.bind(this)),t.on("viewstart",this._startPlaybackHeartbeatInterval.bind(this)),t.on("rebufferstart",this._startPlaybackHeartbeatInterval.bind(this)),t.on("pause",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("ended",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("viewend",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("error",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("aderror",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("adpause",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("adended",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("adbreakend",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("seeked",(function(){t.data.player_is_paused?n._stopPlaybackHeartbeatInterval():n._startPlaybackHeartbeatInterval()})),t.on("timeupdate",(function(){null!==n._playbackHeartbeatInterval&&t.emit("playbackheartbeat")})),t.on("devicesleep",(function(e,i){null!==n._playbackHeartbeatInterval&&(jw.default.clearInterval(n._playbackHeartbeatInterval),t.emit("playbackheartbeatend",{viewer_time:i.viewer_time}),n._playbackHeartbeatInterval=null)}))}return _w(e,[{key:"_startPlaybackHeartbeatInterval",value:function(){var e=this;null===this._playbackHeartbeatInterval&&(this.pm.emit("playbackheartbeat"),this._playbackHeartbeatInterval=jw.default.setInterval((function(){e.pm.emit("playbackheartbeat")}),this.pm.playbackHeartbeatTime))}},{key:"_stopPlaybackHeartbeatInterval",value:function(){this._playheadShouldBeProgressing=!1,null!==this._playbackHeartbeatInterval&&(jw.default.clearInterval(this._playbackHeartbeatInterval),this.pm.emit("playbackheartbeatend"),this._playbackHeartbeatInterval=null)}}]),e}(),zw=Yw,Xw=function e(t){var n=this;Ew(this,e),Aw(this,"viewErrored",void 0),t.on("viewinit",(function(){n.viewErrored=!1})),t.on("error",(function(e,i){try{var r=t.errorTranslator({player_error_code:i.player_error_code,player_error_message:i.player_error_message,player_error_context:i.player_error_context,player_error_severity:i.player_error_severity,player_error_business_exception:i.player_error_business_exception});r&&(t.data.player_error_code=r.player_error_code||i.player_error_code,t.data.player_error_message=r.player_error_message||i.player_error_message,t.data.player_error_context=r.player_error_context||i.player_error_context,t.data.player_error_severity=r.player_error_severity||i.player_error_severity,t.data.player_error_business_exception=r.player_error_business_exception||i.player_error_business_exception,n.viewErrored=!0)}catch(e){t.mux.log.warn("Exception in error translator callback.",e),n.viewErrored=!0}})),t.on("aftererror",(function(){var e,n,i,r,s;null===(e=t.data)||void 0===e||delete e.player_error_code,null===(n=t.data)||void 0===n||delete n.player_error_message,null===(i=t.data)||void 0===i||delete i.player_error_context,null===(r=t.data)||void 0===r||delete r.player_error_severity,null===(s=t.data)||void 0===s||delete s.player_error_business_exception}))},Qw=function(){function e(t){Ew(this,e),Aw(this,"_watchTimeTrackerLastCheckedTime",void 0),Aw(this,"pm",void 0),this.pm=t,this._watchTimeTrackerLastCheckedTime=null,t.on("playbackheartbeat",this._updateWatchTime.bind(this)),t.on("playbackheartbeatend",this._clearWatchTimeState.bind(this))}return _w(e,[{key:"_updateWatchTime",value:function(e,t){var n=t.viewer_time;null===this._watchTimeTrackerLastCheckedTime&&(this._watchTimeTrackerLastCheckedTime=n),xw(this.pm.data,"view_watch_time",n-this._watchTimeTrackerLastCheckedTime),this._watchTimeTrackerLastCheckedTime=n}},{key:"_clearWatchTimeState",value:function(e,t){this._updateWatchTime(e,t),this._watchTimeTrackerLastCheckedTime=null}}]),e}(),Zw=Qw,Jw=function(){function e(t){var n=this;Ew(this,e),Aw(this,"_playbackTimeTrackerLastPlayheadPosition",void 0),Aw(this,"_lastTime",void 0),Aw(this,"_isAdPlaying",void 0),Aw(this,"_callbackUpdatePlaybackTime",void 0),Aw(this,"pm",void 0),this.pm=t,this._playbackTimeTrackerLastPlayheadPosition=-1,this._lastTime=bw.now(),this._isAdPlaying=!1,this._callbackUpdatePlaybackTime=null;var i=this._startPlaybackTimeTracking.bind(this);t.on("playing",i),t.on("adplaying",i),t.on("seeked",i);var r=this._stopPlaybackTimeTracking.bind(this);t.on("playbackheartbeatend",r),t.on("seeking",r),t.on("adplaying",(function(){n._isAdPlaying=!0})),t.on("adended",(function(){n._isAdPlaying=!1})),t.on("adpause",(function(){n._isAdPlaying=!1})),t.on("adbreakstart",(function(){n._isAdPlaying=!1})),t.on("adbreakend",(function(){n._isAdPlaying=!1})),t.on("adplay",(function(){n._isAdPlaying=!1})),t.on("viewinit",(function(){n._playbackTimeTrackerLastPlayheadPosition=-1,n._lastTime=bw.now(),n._isAdPlaying=!1,n._callbackUpdatePlaybackTime=null}))}return _w(e,[{key:"_startPlaybackTimeTracking",value:function(){null===this._callbackUpdatePlaybackTime&&(this._callbackUpdatePlaybackTime=this._updatePlaybackTime.bind(this),this._playbackTimeTrackerLastPlayheadPosition=this.pm.data.player_playhead_time,this.pm.on("playbackheartbeat",this._callbackUpdatePlaybackTime))}},{key:"_stopPlaybackTimeTracking",value:function(){this._callbackUpdatePlaybackTime&&(this._updatePlaybackTime(),this.pm.off("playbackheartbeat",this._callbackUpdatePlaybackTime),this._callbackUpdatePlaybackTime=null,this._playbackTimeTrackerLastPlayheadPosition=-1)}},{key:"_updatePlaybackTime",value:function(){var e=this.pm.data.player_playhead_time,t=bw.now(),n=-1;this._playbackTimeTrackerLastPlayheadPosition>=0&&e>this._playbackTimeTrackerLastPlayheadPosition?n=e-this._playbackTimeTrackerLastPlayheadPosition:this._isAdPlaying&&(n=t-this._lastTime),n>0&&n<=1e3&&xw(this.pm.data,"view_content_playback_time",n),this._playbackTimeTrackerLastPlayheadPosition=e,this._lastTime=t}}]),e}(),eL=Jw,tL=function(){function e(t){Ew(this,e),Aw(this,"pm",void 0),this.pm=t;var n=this._updatePlayheadTime.bind(this);t.on("playbackheartbeat",n),t.on("playbackheartbeatend",n),t.on("timeupdate",n),t.on("destroy",(function(){t.off("timeupdate",n)}))}return _w(e,[{key:"_updateMaxPlayheadPosition",value:function(){this.pm.data.view_max_playhead_position=void 0===this.pm.data.view_max_playhead_position?this.pm.data.player_playhead_time:Math.max(this.pm.data.view_max_playhead_position,this.pm.data.player_playhead_time)}},{key:"_updatePlayheadTime",value:function(e,t){var n=this,i=function(){n.pm.currentFragmentPDT&&n.pm.currentFragmentStart&&(n.pm.data.player_program_time=n.pm.currentFragmentPDT+n.pm.data.player_playhead_time-n.pm.currentFragmentStart)};if(t&&t.player_playhead_time)this.pm.data.player_playhead_time=t.player_playhead_time,i(),this._updateMaxPlayheadPosition();else if(this.pm.getPlayheadTime){var r=this.pm.getPlayheadTime();void 0!==r&&(this.pm.data.player_playhead_time=r,i(),this._updateMaxPlayheadPosition())}}}]),e}(),nL=tL,iL=3e5,rL=function e(t){if(Ew(this,e),!t.disableRebufferTracking){var n,i=function(e,t){r(t),n=void 0},r=function(e){if(n){var i=e.viewer_time-n;xw(t.data,"view_rebuffer_duration",i),n=e.viewer_time,t.data.view_rebuffer_duration>iL&&(t.emit("viewend"),t.send("viewend"),t.mux.log.warn("Ending view after rebuffering for longer than ".concat(iL,"ms, future events will be ignored unless a programchange or videochange occurs.")))}t.data.view_watch_time>=0&&t.data.view_rebuffer_count>0&&(t.data.view_rebuffer_frequency=t.data.view_rebuffer_count/t.data.view_watch_time,t.data.view_rebuffer_percentage=t.data.view_rebuffer_duration/t.data.view_watch_time)};t.on("playbackheartbeat",(function(e,t){return r(t)})),t.on("rebufferstart",(function(e,r){n||(xw(t.data,"view_rebuffer_count",1),n=r.viewer_time,t.one("rebufferend",i))})),t.on("viewinit",(function(){n=void 0,t.off("rebufferend",i)}))}},sL=function(){function e(t){var n=this;Ew(this,e),Aw(this,"_lastCheckedTime",void 0),Aw(this,"_lastPlayheadTime",void 0),Aw(this,"_lastPlayheadTimeUpdatedTime",void 0),Aw(this,"_rebuffering",void 0),Aw(this,"pm",void 0),this.pm=t,!t.disableRebufferTracking&&!t.disablePlayheadRebufferTracking&&(this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null,t.on("playbackheartbeat",this._checkIfRebuffering.bind(this)),t.on("playbackheartbeatend",this._cleanupRebufferTracker.bind(this)),t.on("seeking",(function(){n._cleanupRebufferTracker(null,{viewer_time:bw.now()})})))}return _w(e,[{key:"_checkIfRebuffering",value:function(e,t){if(this.pm.seekingTracker.isSeeking||this.pm.adTracker.isAdBreak||!this.pm.playbackHeartbeat._playheadShouldBeProgressing)this._cleanupRebufferTracker(e,t);else if(null!==this._lastCheckedTime)if(this._lastPlayheadTime===this.pm.data.player_playhead_time){var n=t.viewer_time-this._lastPlayheadTimeUpdatedTime;"number"==typeof this.pm.sustainedRebufferThreshold&&n>=this.pm.sustainedRebufferThreshold&&(this._rebuffering||(this._rebuffering=!0,this.pm.emit("rebufferstart",{viewer_time:this._lastPlayheadTimeUpdatedTime}))),this._lastCheckedTime=t.viewer_time}else this._cleanupRebufferTracker(e,t,!0);else this._prepareRebufferTrackerState(t.viewer_time)}},{key:"_clearRebufferTrackerState",value:function(){this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null}},{key:"_prepareRebufferTrackerState",value:function(e){this._lastCheckedTime=e,this._lastPlayheadTime=this.pm.data.player_playhead_time,this._lastPlayheadTimeUpdatedTime=e}},{key:"_cleanupRebufferTracker",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this._rebuffering)this._rebuffering=!1,this.pm.emit("rebufferend",{viewer_time:t.viewer_time});else{if(null===this._lastCheckedTime)return;var i=this.pm.data.player_playhead_time-this._lastPlayheadTime,r=t.viewer_time-this._lastPlayheadTimeUpdatedTime;"number"==typeof this.pm.minimumRebufferDuration&&i>0&&r-i>this.pm.minimumRebufferDuration&&(this._lastCheckedTime=null,this.pm.emit("rebufferstart",{viewer_time:this._lastPlayheadTimeUpdatedTime}),this.pm.emit("rebufferend",{viewer_time:this._lastPlayheadTimeUpdatedTime+r-i}))}n?this._prepareRebufferTrackerState(t.viewer_time):this._clearRebufferTrackerState()}}]),e}(),aL=sL,oL=function(){function e(t){var n=this;Ew(this,e),Aw(this,"NAVIGATION_START",void 0),Aw(this,"pm",void 0),this.pm=t,t.on("viewinit",(function(){var e=t.data,i=e.view_id;if(!e.view_program_changed){var r=function(e,r){var s=r.viewer_time;("playing"===e.type&&void 0===t.data.view_time_to_first_frame||"adplaying"===e.type&&(void 0===t.data.view_time_to_first_frame||n._inPrerollPosition()))&&n.calculateTimeToFirstFrame(s||bw.now(),i)};t.one("playing",r),t.one("adplaying",r),t.one("viewend",(function(){t.off("playing",r),t.off("adplaying",r)}))}}))}return _w(e,[{key:"_inPrerollPosition",value:function(){return void 0===this.pm.data.view_content_playback_time||this.pm.data.view_content_playback_time<=1e3}},{key:"calculateTimeToFirstFrame",value:function(e,t){t===this.pm.data.view_id&&(this.pm.watchTimeTracker._updateWatchTime(null,{viewer_time:e}),this.pm.data.view_time_to_first_frame=this.pm.data.view_watch_time,(this.pm.data.player_autoplay_on||this.pm.data.video_is_autoplay)&&this.NAVIGATION_START&&(this.pm.data.view_aggregate_startup_time=this.pm.data.view_start+this.pm.data.view_watch_time-this.NAVIGATION_START))}}]),e}(),lL=oL,dL=function e(t){var n=this;Ew(this,e),Aw(this,"_lastPlayerHeight",void 0),Aw(this,"_lastPlayerWidth",void 0),Aw(this,"_lastPlayheadPosition",void 0),Aw(this,"_lastSourceHeight",void 0),Aw(this,"_lastSourceWidth",void 0),t.on("viewinit",(function(){n._lastPlayheadPosition=-1}));["pause","rebufferstart","seeking","error","adbreakstart","hb"].forEach((function(e){t.on(e,(function(){if(n._lastPlayheadPosition>=0&&t.data.player_playhead_time>=0&&n._lastPlayerWidth>=0&&n._lastSourceWidth>0&&n._lastPlayerHeight>=0&&n._lastSourceHeight>0){var e=t.data.player_playhead_time-n._lastPlayheadPosition;if(e<0)return void(n._lastPlayheadPosition=-1);var i=Math.min(n._lastPlayerWidth/n._lastSourceWidth,n._lastPlayerHeight/n._lastSourceHeight),r=Math.max(0,i-1),s=Math.max(0,1-i);t.data.view_max_upscale_percentage=Math.max(t.data.view_max_upscale_percentage||0,r),t.data.view_max_downscale_percentage=Math.max(t.data.view_max_downscale_percentage||0,s),xw(t.data,"view_total_content_playback_time",e),xw(t.data,"view_total_upscaling",r*e),xw(t.data,"view_total_downscaling",s*e)}n._lastPlayheadPosition=-1}))})),["playing","hb"].forEach((function(e){t.on(e,(function(){n._lastPlayheadPosition=t.data.player_playhead_time,n._lastPlayerWidth=t.data.player_width,n._lastPlayerHeight=t.data.player_height,n._lastSourceWidth=t.data.video_source_width,n._lastSourceHeight=t.data.video_source_height}))}))},cL=function e(t){var n=this;Ew(this,e),Aw(this,"isSeeking",void 0),this.isSeeking=!1;var i=-1,r=function(){var e=bw.now(),r=(t.data.viewer_time||e)-(i||e);xw(t.data,"view_seek_duration",r),t.data.view_max_seek_time=Math.max(t.data.view_max_seek_time||0,r),n.isSeeking=!1,i=-1};t.on("seeking",(function(e,s){Object.assign(t.data,s),n.isSeeking&&s.viewer_time-i<=2e3?i=s.viewer_time:(n.isSeeking&&r(),n.isSeeking=!0,i=s.viewer_time,xw(t.data,"view_seek_count",1),t.send("seeking"))})),t.on("seeked",(function(){r()})),t.on("viewend",(function(){n.isSeeking&&(r(),t.send("seeked")),n.isSeeking=!1,i=-1}))},uL=function(e,t){e.push(t),e.sort((function(e,t){return e.viewer_time-t.viewer_time}))},hL=["adbreakstart","adrequest","adresponse","adplay","adplaying","adpause","adended","adbreakend","aderror","adclicked","adskipped"],mL=function(){function e(t){var n=this;Ew(this,e),Aw(this,"_adHasPlayed",void 0),Aw(this,"_adRequests",void 0),Aw(this,"_adResponses",void 0),Aw(this,"_currentAdRequestNumber",void 0),Aw(this,"_currentAdResponseNumber",void 0),Aw(this,"_prerollPlayTime",void 0),Aw(this,"_wouldBeNewAdPlay",void 0),Aw(this,"isAdBreak",void 0),Aw(this,"pm",void 0),this.pm=t,t.on("viewinit",(function(){n.isAdBreak=!1,n._currentAdRequestNumber=0,n._currentAdResponseNumber=0,n._adRequests=[],n._adResponses=[],n._adHasPlayed=!1,n._wouldBeNewAdPlay=!0,n._prerollPlayTime=void 0})),hL.forEach((function(e){return t.on(e,n._updateAdData.bind(n))}));var i=function(){n.isAdBreak=!1};t.on("adbreakstart",(function(){n.isAdBreak=!0})),t.on("play",i),t.on("playing",i),t.on("viewend",i),t.on("adrequest",(function(e,i){i=Object.assign({ad_request_id:"generatedAdRequestId"+n._currentAdRequestNumber++},i),uL(n._adRequests,i),xw(t.data,"view_ad_request_count"),n.inPrerollPosition()&&(t.data.view_preroll_requested=!0,n._adHasPlayed||xw(t.data,"view_preroll_request_count"))})),t.on("adresponse",(function(e,i){i=Object.assign({ad_request_id:"generatedAdRequestId"+n._currentAdResponseNumber++},i),uL(n._adResponses,i);var r=n.findAdRequest(i.ad_request_id);r&&xw(t.data,"view_ad_request_time",Math.max(0,i.viewer_time-r.viewer_time))})),t.on("adplay",(function(e,i){n._adHasPlayed=!0,n._wouldBeNewAdPlay&&(n._wouldBeNewAdPlay=!1,xw(t.data,"view_ad_played_count")),n.inPrerollPosition()&&!t.data.view_preroll_played&&(t.data.view_preroll_played=!0,n._adRequests.length>0&&(t.data.view_preroll_request_time=Math.max(0,i.viewer_time-n._adRequests[0].viewer_time)),t.data.view_start&&(t.data.view_startup_preroll_request_time=Math.max(0,i.viewer_time-t.data.view_start)),n._prerollPlayTime=i.viewer_time)})),t.on("adplaying",(function(e,i){n.inPrerollPosition()&&void 0===t.data.view_preroll_load_time&&void 0!==n._prerollPlayTime&&(t.data.view_preroll_load_time=i.viewer_time-n._prerollPlayTime,t.data.view_startup_preroll_load_time=i.viewer_time-n._prerollPlayTime)})),t.on("adclicked",(function(e,i){n._wouldBeNewAdPlay||xw(t.data,"view_ad_clicked_count")})),t.on("adskipped",(function(e,i){n._wouldBeNewAdPlay||xw(t.data,"view_ad_skipped_count")})),t.on("adended",(function(){n._wouldBeNewAdPlay=!0})),t.on("aderror",(function(){n._wouldBeNewAdPlay=!0}))}return _w(e,[{key:"inPrerollPosition",value:function(){return void 0===this.pm.data.view_content_playback_time||this.pm.data.view_content_playback_time<=1e3}},{key:"findAdRequest",value:function(e){for(var t=0;t<this._adRequests.length;t++)if(this._adRequests[t].ad_request_id===e)return this._adRequests[t]}},{key:"_updateAdData",value:function(e,t){if(this.inPrerollPosition()){if(!this.pm.data.view_preroll_ad_tag_hostname&&t.ad_tag_url){var n=sw(Rw(t.ad_tag_url),2),i=n[0],r=n[1];this.pm.data.view_preroll_ad_tag_domain=r,this.pm.data.view_preroll_ad_tag_hostname=i}if(!this.pm.data.view_preroll_ad_asset_hostname&&t.ad_asset_url){var s=sw(Rw(t.ad_asset_url),2),a=s[0],o=s[1];this.pm.data.view_preroll_ad_asset_domain=o,this.pm.data.view_preroll_ad_asset_hostname=a}}this.pm.data.ad_asset_url=null==t?void 0:t.ad_asset_url,this.pm.data.ad_tag_url=null==t?void 0:t.ad_tag_url,this.pm.data.ad_creative_id=null==t?void 0:t.ad_creative_id,this.pm.data.ad_id=null==t?void 0:t.ad_id,this.pm.data.ad_universal_id=null==t?void 0:t.ad_universal_id}}]),e}(),pL=mL,fL=Nk(Fk()),gL=function e(t){Ew(this,e);var n,i,r=function(){t.disableRebufferTracking||n&&(xw(t.data,"view_waiting_rebuffer_duration",bw.now()-n),n=!1,fL.default.clearInterval(i))},s=!1,a=function(){s=!1,r()};t.on("waiting",(function(){s&&(t.disableRebufferTracking||(xw(t.data,"view_waiting_rebuffer_count",1),n=bw.now(),i=fL.default.setInterval((function(){if(n){var e=bw.now();xw(t.data,"view_waiting_rebuffer_duration",e-n),n=e}}),250)))})),t.on("playing",(function(){r(),s=!0})),t.on("pause",a),t.on("seeking",a)},vL=function e(t){var n=this;Ew(this,e),Aw(this,"lastWallClockTime",void 0);var i=function(){n.lastWallClockTime=bw.now(),t.on("before*",r)},r=function(e){var i=bw.now(),r=n.lastWallClockTime;n.lastWallClockTime=i,i-r>3e4&&(t.emit("devicesleep",{viewer_time:r}),Object.assign(t.data,{viewer_time:r}),t.send("devicesleep"),t.emit("devicewake",{viewer_time:i}),Object.assign(t.data,{viewer_time:i}),t.send("devicewake"))};t.one("playbackheartbeat",i),t.on("playbackheartbeatend",(function(){t.off("before*",r),t.one("playbackheartbeat",i)}))},bL=Nk(Fk()),yL=Nk(Wk()),EL=Nk(Gk()),TL="muxData",_L=function(){var e;try{e=yL.default.parse(EL.default.get(TL)||"")}catch(t){e={}}return e},AL=function(e){try{EL.default.set(TL,yL.default.stringify(e),{expires:365})}catch(e){}};var SL=Nk(Fk()),kL=function(){var e;switch(wL()){case"cellular":e="cellular";break;case"ethernet":e="wired";break;case"wifi":e="wifi";break;case void 0:break;default:e="other"}return e},wL=function(){var e=SL.default.navigator,t=e&&(e.connection||e.mozConnection||e.webkitConnection);return t&&t.type};kL.getConnectionFromAPI=wL;var LL=kL,RL=IL({a:"env",b:"beacon",c:"custom",d:"ad",e:"event",f:"experiment",i:"internal",m:"mux",n:"response",p:"player",q:"request",r:"retry",s:"session",t:"timestamp",u:"viewer",v:"video",w:"page",x:"view",y:"sub"}),CL=IL({ad:"ad",ag:"aggregate",ap:"api",al:"application",ar:"architecture",as:"asset",au:"autoplay",av:"average",bi:"bitrate",br:"break",bw:"browser",by:"bytes",bz:"business",ca:"cached",cb:"cancel",cc:"codec",cd:"code",cg:"category",ch:"changed",ck:"clicked",cl:"canceled",cn:"config",co:"count",ce:"counter",cp:"complete",cr:"creative",ct:"content",cu:"current",cx:"connection",cz:"context",dg:"downscaling",dm:"domain",dn:"cdn",do:"downscale",dr:"drm",dp:"dropped",du:"duration",dv:"device",ec:"encoding",ed:"edge",en:"end",eg:"engine",em:"embed",er:"error",ep:"experiments",es:"errorcode",et:"errortext",ee:"event",ev:"events",ex:"expires",ez:"exception",fa:"failed",fi:"first",fm:"family",ft:"format",fp:"fps",fq:"frequency",fr:"frame",fs:"fullscreen",ha:"has",hb:"holdback",he:"headers",ho:"host",hn:"hostname",ht:"height",id:"id",ii:"init",in:"instance",ip:"ip",is:"is",ke:"key",la:"language",lb:"labeled",le:"level",li:"live",ld:"loaded",lo:"load",ls:"lists",lt:"latency",ma:"max",md:"media",me:"message",mf:"manifest",mi:"mime",ml:"midroll",mm:"min",mn:"manufacturer",mo:"model",mx:"mux",ne:"newest",nm:"name",no:"number",on:"on",os:"os",pa:"paused",pb:"playback",pd:"producer",pe:"percentage",pf:"played",pg:"program",ph:"playhead",pi:"plugin",pl:"preroll",pn:"playing",po:"poster",pr:"preload",ps:"position",pt:"part",py:"property",ra:"rate",rd:"requested",re:"rebuffer",rf:"rendition",rm:"remote",ro:"ratio",rp:"response",rq:"request",rs:"requests",sa:"sample",sd:"skipped",se:"session",sk:"seek",sm:"stream",so:"source",sq:"sequence",sr:"series",st:"start",su:"startup",sv:"server",sw:"software",sy:"severity",ta:"tag",tc:"tech",te:"text",tg:"target",th:"throughput",ti:"time",tl:"total",to:"to",tt:"title",ty:"type",ug:"upscaling",un:"universal",up:"upscale",ur:"url",us:"user",va:"variant",vd:"viewed",vi:"video",ve:"version",vw:"view",vr:"viewer",wd:"width",wa:"watch",wt:"waiting"});function IL(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function xL(e){var t={},n={};return Object.keys(e).forEach((function(i){var r=!1;if(e.hasOwnProperty(i)&&void 0!==e[i]){var s=i.split("_"),a=s[0],o=RL[a];o||(mw.info("Data key word `"+s[0]+"` not expected in "+i),o=a+"_"),s.splice(1).forEach((function(e){"url"===e&&(r=!0),CL[e]?o+=CL[e]:Number(e)&&Math.floor(Number(e))===Number(e)?o+=e:(mw.info("Data key word `"+e+"` not expected in "+i),o+="_"+e+"_")})),r?n[o]=e[i]:t[o]=e[i]}})),Object.assign(t,n)}var DL=Nk(Fk()),ML={maxBeaconSize:300,maxQueueLength:3600,baseTimeBetweenBeacons:1e4,maxPayloadKBSize:500},OL=["hb","requestcompleted","requestfailed","requestcanceled"],PL=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._beaconUrl=e||"https://img.litix.io",this._eventQueue=[],this._postInFlight=!1,this._failureCount=0,this._sendTimeout=!1,this._options=Object.assign({},ML,t)};PL.prototype.queueEvent=function(e,t){var n=Object.assign({},t);return(this._eventQueue.length<=this._options.maxQueueLength||"eventrateexceeded"===e)&&(this._eventQueue.push(n),this._sendTimeout||this._startBeaconSending(),this._eventQueue.length<=this._options.maxQueueLength)},PL.prototype.flushEvents=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&1===this._eventQueue.length?this._eventQueue.pop():(this._eventQueue.length&&this._sendBeaconQueue(),this._startBeaconSending())},PL.prototype.destroy=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.destroyed=!0,e?this._clearBeaconQueue():this.flushEvents(),DL.default.clearTimeout(this._sendTimeout)},PL.prototype._clearBeaconQueue=function(){var e=this._eventQueue.length>this._options.maxBeaconSize?this._eventQueue.length-this._options.maxBeaconSize:0,t=this._eventQueue.slice(e);e>0&&Object.assign(t[t.length-1],xL({mux_view_message:"event queue truncated"}));var n=this._createPayload(t);FL(this._beaconUrl,n,!0,(function(){}))},PL.prototype._sendBeaconQueue=function(){var e=this;if(!this._postInFlight){var t=this._eventQueue.slice(0,this._options.maxBeaconSize);this._eventQueue=this._eventQueue.slice(this._options.maxBeaconSize),this._postInFlight=!0;var n=this._createPayload(t),i=bw.now();FL(this._beaconUrl,n,!1,(function(n,r){r?(e._eventQueue=t.concat(e._eventQueue),e._failureCount+=1,mw.info("Error sending beacon: "+r)):e._failureCount=0,e._roundTripTime=bw.now()-i,e._postInFlight=!1}))}},PL.prototype._getNextBeaconTime=function(){if(!this._failureCount)return this._options.baseTimeBetweenBeacons;var e=Math.pow(2,this._failureCount-1);return(1+(e*=Math.random()))*this._options.baseTimeBetweenBeacons},PL.prototype._startBeaconSending=function(){var e=this;DL.default.clearTimeout(this._sendTimeout),!this.destroyed&&(this._sendTimeout=DL.default.setTimeout((function(){e._eventQueue.length&&e._sendBeaconQueue(),e._startBeaconSending()}),this._getNextBeaconTime()))},PL.prototype._createPayload=function(e){var t=this,n={transmission_timestamp:Math.round(bw.now())};this._roundTripTime&&(n.rtt_ms=Math.round(this._roundTripTime));var i,r,s,a=function(){i=JSON.stringify({metadata:n,events:r||e}),s=i.length/1024},o=function(){return s<=t._options.maxPayloadKBSize};return a(),o()||(mw.info("Payload size is too big ("+s+" kb). Removing unnecessary events."),r=e.filter((function(e){return-1===OL.indexOf(e.e)})),a()),o()||(mw.info("Payload size still too big ("+s+" kb). Cropping fields.."),r.forEach((function(e){for(var t in e){var n=e[t];"string"==typeof n&&n.length>51200&&(e[t]=n.substring(0,51200))}})),a()),i};var NL=function(e){return e.length<=57344},FL=function(e,t,n,i){if(n&&navigator&&navigator.sendBeacon&&navigator.sendBeacon(e,t))i();else if(DL.default.fetch)DL.default.fetch(e,{method:"POST",body:t,headers:{"Content-Type":"text/plain"},keepalive:NL(t)}).then((function(e){return i(null,e.ok?null:"Error")})).catch((function(e){return i(null,e)}));else{if(DL.default.XMLHttpRequest){var r=new DL.default.XMLHttpRequest;return r.onreadystatechange=function(){if(4===r.readyState)return i(null,200!==r.status?"error":void 0)},r.open("POST",e),r.setRequestHeader("Content-Type","text/plain"),void r.send(t)}i()}},UL=PL,BL=["env_key","view_id","view_sequence_number","player_sequence_number","beacon_domain","player_playhead_time","viewer_time","mux_api_version","event","video_id","player_instance_id","player_error_code","player_error_message","player_error_context","player_error_severity","player_error_business_exception"],$L=["adplay","adplaying","adpause","adfirstquartile","admidpoint","adthirdquartile","adended","adresponse","adrequest"],HL=["ad_id","ad_creative_id","ad_universal_id"],VL=["viewstart","error","ended","viewend"],WL=function(){function e(t,n){var i,r,s,a,o,l,d,c,u,h,m,p,f,g,v,b=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Ew(this,e),Aw(this,"mux",void 0),Aw(this,"envKey",void 0),Aw(this,"options",void 0),Aw(this,"eventQueue",void 0),Aw(this,"sampleRate",void 0),Aw(this,"disableCookies",void 0),Aw(this,"respectDoNotTrack",void 0),Aw(this,"previousBeaconData",void 0),Aw(this,"lastEventTime",void 0),Aw(this,"rateLimited",void 0),Aw(this,"pageLevelData",void 0),Aw(this,"viewerData",void 0),this.mux=t,this.envKey=n,this.options=b,this.previousBeaconData=null,this.lastEventTime=0,this.rateLimited=!1,this.eventQueue=new UL(function(e,t){var n=t.beaconCollectionDomain,i=t.beaconDomain;if(n)return"https://"+n;var r=i||"litix.io";return(e=e||"inferred").match(/^[a-z0-9]+$/)?"https://"+e+"."+r:"https://img.litix.io/a.gif"}(this.envKey,this.options)),this.sampleRate=null!==(f=this.options.sampleRate)&&void 0!==f?f:1,this.disableCookies=null!==(g=this.options.disableCookies)&&void 0!==g&&g,this.respectDoNotTrack=null!==(v=this.options.respectDoNotTrack)&&void 0!==v&&v,this.previousBeaconData=null,this.lastEventTime=0,this.rateLimited=!1,this.pageLevelData={mux_api_version:this.mux.API_VERSION,mux_embed:this.mux.NAME,mux_embed_version:this.mux.VERSION,viewer_application_name:null===(i=this.options.platform)||void 0===i?void 0:i.name,viewer_application_version:null===(r=this.options.platform)||void 0===r?void 0:r.version,viewer_application_engine:null===(s=this.options.platform)||void 0===s?void 0:s.layout,viewer_device_name:null===(a=this.options.platform)||void 0===a?void 0:a.product,viewer_device_category:"",viewer_device_manufacturer:null===(o=this.options.platform)||void 0===o?void 0:o.manufacturer,viewer_os_family:null===(d=this.options.platform)||void 0===d||null===(l=d.os)||void 0===l?void 0:l.family,viewer_os_architecture:null===(u=this.options.platform)||void 0===u||null===(c=u.os)||void 0===c?void 0:c.architecture,viewer_os_version:null===(m=this.options.platform)||void 0===m||null===(h=m.os)||void 0===h?void 0:h.version,viewer_connection_type:LL(),page_url:null===bL.default||void 0===bL.default||null===(p=bL.default.location)||void 0===p?void 0:p.href},this.viewerData=this.disableCookies?{}:function(){var e=_L();return e.mux_viewer_id=e.mux_viewer_id||ow(),e.msn=e.msn||Math.random(),AL(e),{mux_viewer_id:e.mux_viewer_id,mux_sample_number:e.msn}}()}return _w(e,[{key:"send",value:function(e,t){if(e&&null!=t&&t.view_id){if(this.respectDoNotTrack&&fw())return mw.info("Not sending `"+e+"` because Do Not Track is enabled");if(!t||"object"!=typeof t)return mw.error("A data object was expected in send() but was not provided");var n=this.disableCookies?{}:function(){var e=_L(),t=bw.now();return e.session_start&&(e.sst=e.session_start,delete e.session_start),e.session_id&&(e.sid=e.session_id,delete e.session_id),e.session_expires&&(e.sex=e.session_expires,delete e.session_expires),(!e.sex||e.sex<t)&&(e.sid=ow(),e.sst=t),e.sex=t+15e5,AL(e),{session_id:e.sid,session_start:e.sst,session_expires:e.sex}}(),i=Mw(Dw({},this.pageLevelData,t,n,this.viewerData),{event:e,env_key:this.envKey});i.user_id&&(i.viewer_user_id=i.user_id,delete i.user_id);var r,s=(null!==(r=i.mux_sample_number)&&void 0!==r?r:0)>=this.sampleRate,a=xL(this._deduplicateBeaconData(e,i));if(this.lastEventTime=this.mux.utils.now(),s)return mw.info("Not sending event due to sample rate restriction",e,i,a);if(this.envKey||mw.info("Missing environment key (envKey) - beacons will be dropped if the video source is not a valid mux video URL",e,i,a),!this.rateLimited)if(mw.info("Sending event",e,i,a),this.rateLimited=!this.eventQueue.queueEvent(e,a),this.mux.WINDOW_UNLOADING&&"viewend"===e)this.eventQueue.destroy(!0);else if(this.mux.WINDOW_HIDDEN&&"hb"===e?this.eventQueue.flushEvents(!0):VL.indexOf(e)>=0&&this.eventQueue.flushEvents(),this.rateLimited)return i.event="eventrateexceeded",a=xL(i),this.eventQueue.queueEvent(i.event,a),mw.error("Beaconing disabled due to rate limit.")}}},{key:"destroy",value:function(){this.eventQueue.destroy(!1)}},{key:"_deduplicateBeaconData",value:function(e,t){var n=this,i={},r=t.view_id;if("-1"===r||"viewstart"===e||"viewend"===e||!this.previousBeaconData||this.mux.utils.now()-this.lastEventTime>=6e5)i=Dw({},t),r&&(this.previousBeaconData=i),r&&"viewend"===e&&(this.previousBeaconData=null);else{var s=0===e.indexOf("request");Object.entries(t).forEach((function(t){var r=sw(t,2),a=r[0],o=r[1];n.previousBeaconData&&(o!==n.previousBeaconData[a]||BL.indexOf(a)>-1||n.objectHasChanged(s,a,o,n.previousBeaconData[a])||n.eventRequiresKey(e,a))&&(i[a]=o,n.previousBeaconData[a]=o)}))}return i}},{key:"objectHasChanged",value:function(e,t,n,i){return!(!e||0!==t.indexOf("request_"))&&("request_response_headers"===t||"object"!=typeof n||"object"!=typeof i||Object.keys(n||{}).length!==Object.keys(i||{}).length)}},{key:"eventRequiresKey",value:function(e,t){return!!("renditionchange"===e&&0===t.indexOf("video_source_")||HL.includes(t)&&$L.includes(e))}}]),e}(),GL=function e(t){Ew(this,e);var n=0,i=0,r=0,s=0,a=0,o=0,l=0;t.on("requestcompleted",(function(e,o){var l,d,c=o.request_start,u=o.request_response_start,h=o.request_response_end,m=o.request_bytes_loaded;if(s++,u?(l=u-(null!=c?c:0),d=(null!=h?h:0)-u):d=(null!=h?h:0)-(null!=c?c:0),d>0&&m&&m>0){var p=m/d*8e3;a++,i+=m,r+=d,t.data.view_min_request_throughput=Math.min(t.data.view_min_request_throughput||1/0,p),t.data.view_average_request_throughput=i/r*8e3,t.data.view_request_count=s,l>0&&(n+=l,t.data.view_max_request_latency=Math.max(t.data.view_max_request_latency||0,l),t.data.view_average_request_latency=n/a)}})),t.on("requestfailed",(function(e,n){s++,o++,t.data.view_request_count=s,t.data.view_request_failed_count=o})),t.on("requestcanceled",(function(e,n){s++,l++,t.data.view_request_count=s,t.data.view_request_canceled_count=l}))},KL=function e(t){var n=this;Ew(this,e),Aw(this,"_lastEventTime",void 0),t.on("before*",(function(e,i){var r=i.viewer_time,s=bw.now(),a=n._lastEventTime;if(n._lastEventTime=s,a&&s-a>36e5){var o=Object.keys(t.data).reduce((function(e,n){return 0===n.indexOf("video_")?Object.assign(e,Aw({},n,t.data[n])):e}),{});t.mux.log.info("Received event after at least an hour inactivity, creating a new view"),t.emit("viewinit",Object.assign({viewer_time:r},o)),t.playbackHeartbeat._playheadShouldBeProgressing&&"play"!==e.type&&"adbreakstart"!==e.type&&(t.emit("play",{viewer_time:r}),"playing"!==e.type&&t.emit("playing",{viewer_time:r}))}}))},qL=["viewstart","ended","loadstart","pause","play","playing","ratechange","waiting","adplay","adpause","adended","aderror","adplaying","adrequest","adresponse","adbreakstart","adbreakend","adfirstquartile","admidpoint","adthirdquartile","rebufferstart","rebufferend","seeked","error","hb","requestcompleted","requestfailed","requestcanceled","renditionchange"],jL=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sw(e,t)}(n,e);var t=ww(n);function n(e,i,r){var s;Ew(this,n),Aw(yw(s=t.call(this)),"DOM_CONTENT_LOADED_EVENT_END",void 0),Aw(yw(s),"NAVIGATION_START",void 0),Aw(yw(s),"_destroyed",void 0),Aw(yw(s),"_heartBeatTimeout",void 0),Aw(yw(s),"adTracker",void 0),Aw(yw(s),"dashjs",void 0),Aw(yw(s),"data",void 0),Aw(yw(s),"disablePlayheadRebufferTracking",void 0),Aw(yw(s),"disableRebufferTracking",void 0),Aw(yw(s),"errorTracker",void 0),Aw(yw(s),"errorTranslator",void 0),Aw(yw(s),"getAdData",void 0),Aw(yw(s),"getPlayheadTime",void 0),Aw(yw(s),"getStateData",void 0),Aw(yw(s),"hlsjs",void 0),Aw(yw(s),"id",void 0),Aw(yw(s),"longResumeTracker",void 0),Aw(yw(s),"minimumRebufferDuration",void 0),Aw(yw(s),"mux",void 0),Aw(yw(s),"oldEmit",void 0),Aw(yw(s),"playbackEventDispatcher",void 0),Aw(yw(s),"playbackHeartbeat",void 0),Aw(yw(s),"playbackHeartbeatTime",void 0),Aw(yw(s),"playheadTime",void 0),Aw(yw(s),"seekingTracker",void 0),Aw(yw(s),"sustainedRebufferThreshold",void 0),Aw(yw(s),"watchTimeTracker",void 0),Aw(yw(s),"currentFragmentPDT",void 0),Aw(yw(s),"currentFragmentStart",void 0),s.DOM_CONTENT_LOADED_EVENT_END=Iw.domContentLoadedEventEnd(),s.NAVIGATION_START=Iw.navigationStart();s.mux=e,s.id=i,null!=r&&r.beaconDomain&&s.mux.log.warn("The `beaconDomain` setting has been deprecated in favor of `beaconCollectionDomain`. Please change your integration to use `beaconCollectionDomain` instead of `beaconDomain`."),r=Object.assign({debug:!1,minimumRebufferDuration:250,sustainedRebufferThreshold:1e3,playbackHeartbeatTime:25,beaconDomain:"litix.io",sampleRate:1,disableCookies:!1,respectDoNotTrack:!1,disableRebufferTracking:!1,disablePlayheadRebufferTracking:!1,errorTranslator:function(e){return e}},r),r.data=r.data||{},r.data.property_key&&(r.data.env_key=r.data.property_key,delete r.data.property_key),mw.setLevel(r.debug?"debug":"warn"),s.getPlayheadTime=r.getPlayheadTime,s.getStateData=r.getStateData||function(){return{}},s.getAdData=r.getAdData||function(){},s.minimumRebufferDuration=r.minimumRebufferDuration,s.sustainedRebufferThreshold=r.sustainedRebufferThreshold,s.playbackHeartbeatTime=r.playbackHeartbeatTime,s.disableRebufferTracking=r.disableRebufferTracking,s.disableRebufferTracking&&s.mux.log.warn("Disabling rebuffer tracking. This should only be used in specific circumstances as a last resort when your player is known to unreliably track rebuffering."),s.disablePlayheadRebufferTracking=r.disablePlayheadRebufferTracking,s.errorTranslator=r.errorTranslator,s.playbackEventDispatcher=new WL(e,r.data.env_key,r),s.data={player_instance_id:ow(),mux_sample_rate:r.sampleRate,beacon_domain:r.beaconCollectionDomain||r.beaconDomain},s.data.view_sequence_number=1,s.data.player_sequence_number=1,s.oldEmit=s.emit,s.emit=function(e,t){t=Object.assign({viewer_time:this.mux.utils.now()},t),this.oldEmit(e,t)};var a=function(){void 0===this.data.view_start&&(this.data.view_start=this.mux.utils.now(),this.emit("viewstart"))}.bind(yw(s));s.on("viewinit",(function(e,t){this._resetVideoData(),this._resetViewData(),this._resetErrorData(),this._updateStateData(),Object.assign(this.data,t),this._initializeViewData(),this.one("play",a),this.one("adbreakstart",a)}));var o=function(e){this.emit("viewend"),this.send("viewend"),this.emit("viewinit",e)}.bind(yw(s));if(s.on("videochange",(function(e,t){o(t)})),s.on("programchange",(function(e,t){this.data.player_is_paused&&this.mux.log.warn("The `programchange` event is intended to be used when the content changes mid playback without the video source changing, however the video is not currently playing. If the video source is changing please use the videochange event otherwise you will lose startup time information."),o(Object.assign(t,{view_program_changed:!0})),a(),this.emit("play"),this.emit("playing")})),s.on("fragmentchange",(function(e,t){this.currentFragmentPDT=t.currentFragmentPDT,this.currentFragmentStart=t.currentFragmentStart})),s.on("destroy",s.destroy),"undefined"!=typeof window&&"function"==typeof window.addEventListener&&"function"==typeof window.removeEventListener){var l=function(){var e=void 0!==s.data.view_start;s.mux.WINDOW_HIDDEN="hidden"===document.visibilityState,e&&s.mux.WINDOW_HIDDEN&&(s.data.player_is_paused||s.emit("hb"))};window.addEventListener("visibilitychange",l,!1);var d=function(e){e.persisted||s.destroy()};window.addEventListener("pagehide",d,!1),s.on("destroy",(function(){window.removeEventListener("visibilitychange",l),window.removeEventListener("pagehide",d)}))}s.on("playerready",(function(e,t){Object.assign(this.data,t)})),qL.forEach((function(e){s.on(e,(function(t,n){0!==e.indexOf("ad")&&this._updateStateData(),Object.assign(this.data,n),this._sanitizeData()})),s.on("after"+e,(function(){("error"!==e||this.errorTracker.viewErrored)&&this.send(e)}))})),s.on("viewend",(function(e,t){Object.assign(s.data,t)}));return s.one("playerready",(function(e){var t=this.mux.utils.now();this.data.player_init_time&&(this.data.player_startup_time=t-this.data.player_init_time),!this.mux.PLAYER_TRACKED&&this.NAVIGATION_START&&(this.mux.PLAYER_TRACKED=!0,(this.data.player_init_time||this.DOM_CONTENT_LOADED_EVENT_END)&&(this.data.page_load_time=Math.min(this.data.player_init_time||1/0,this.DOM_CONTENT_LOADED_EVENT_END||1/0)-this.NAVIGATION_START)),this.send("playerready"),delete this.data.player_startup_time,delete this.data.page_load_time})),s.longResumeTracker=new KL(yw(s)),s.errorTracker=new Xw(yw(s)),new vL(yw(s)),s.seekingTracker=new cL(yw(s)),s.playheadTime=new nL(yw(s)),s.playbackHeartbeat=new zw(yw(s)),new dL(yw(s)),s.watchTimeTracker=new Zw(yw(s)),new eL(yw(s)),s.adTracker=new pL(yw(s)),new aL(yw(s)),new rL(yw(s)),new lL(yw(s)),new gL(yw(s)),new GL(yw(s)),r.hlsjs&&s.addHLSJS(r),r.dashjs&&s.addDashJS(r),s.emit("viewinit",r.data),s}return _w(n,[{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,void 0!==this.data.view_start&&(this.emit("viewend"),this.send("viewend")),this.playbackEventDispatcher.destroy(),this.removeHLSJS(),this.removeDashJS(),window.clearTimeout(this._heartBeatTimeout))}},{key:"send",value:function(e){if(this.data.view_id){var t=Object.assign({},this.data);if(void 0===t.video_source_is_live&&(t.player_source_duration===1/0||t.video_source_duration===1/0?t.video_source_is_live=!0:(t.player_source_duration>0||t.video_source_duration>0)&&(t.video_source_is_live=!1)),t.video_source_is_live||["player_program_time","player_manifest_newest_program_time","player_live_edge_program_time","player_program_time","video_holdback","video_part_holdback","video_target_duration","video_part_target_duration"].forEach((function(e){t[e]=void 0})),t.video_source_url=t.video_source_url||t.player_source_url,t.video_source_url){var n=sw(Rw(t.video_source_url),2),i=n[0],r=n[1];t.video_source_domain=r,t.video_source_hostname=i}delete t.ad_request_id,this.playbackEventDispatcher.send(e,t),this.data.view_sequence_number++,this.data.player_sequence_number++,this._restartHeartBeat(),"viewend"===e&&delete this.data.view_id}}},{key:"_updateStateData",value:function(){Object.assign(this.data,this.getStateData()),this.playheadTime._updatePlayheadTime(),this._sanitizeData()}},{key:"_sanitizeData",value:function(){var e=this;["player_width","player_height","video_source_width","video_source_height","player_playhead_time","video_source_bitrate"].forEach((function(t){var n=parseInt(e.data[t],10);e.data[t]=isNaN(n)?void 0:n}));["player_source_url","video_source_url"].forEach((function(t){if(e.data[t]){var n=e.data[t].toLowerCase();(0===n.indexOf("data:")||0===n.indexOf("blob:"))&&(e.data[t]="MSE style URL")}}))}},{key:"_resetVideoData",value:function(){var e=this;Object.keys(this.data).forEach((function(t){0===t.indexOf("video_")&&delete e.data[t]}))}},{key:"_resetViewData",value:function(){var e=this;Object.keys(this.data).forEach((function(t){0===t.indexOf("view_")&&delete e.data[t]})),this.data.view_sequence_number=1}},{key:"_resetErrorData",value:function(){delete this.data.player_error_code,delete this.data.player_error_message,delete this.data.player_error_context,delete this.data.player_error_severity,delete this.data.player_error_business_exception}},{key:"_initializeViewData",value:function(){var e=this,t=this.data.view_id=ow(),n=function(){t===e.data.view_id&&xw(e.data,"player_view_count",1)};this.data.player_is_paused?this.one("play",n):n()}},{key:"_restartHeartBeat",value:function(){var e=this;window.clearTimeout(this._heartBeatTimeout),this.errorTracker.viewErrored||(this._heartBeatTimeout=window.setTimeout((function(){e.data.player_is_paused||e.emit("hb")}),1e4))}},{key:"addHLSJS",value:function(e){e.hlsjs?this.hlsjs?this.mux.log.warn("An instance of HLS.js is already being monitored for this player."):(this.hlsjs=e.hlsjs,function(e,t,n){var i=arguments.length>4?arguments[4]:void 0,r=e.log,s=e.utils.secondsToMs,a=function(e){var t,n=parseInt(i.version);return 1===n&&null!==e.programDateTime&&(t=e.programDateTime),0===n&&null!==e.pdt&&(t=e.pdt),t};if(Iw.exists()){var o=function(n,i){return e.emit(t,n,i)},l=function(e,t){var n=t.levels,i=t.audioTracks,r=t.url,s=t.stats,a=t.networkDetails,l=t.sessionData,d={},c={};n.forEach((function(e,t){d[t]={width:e.width,height:e.height,bitrate:e.bitrate,attrs:e.attrs}})),i.forEach((function(e,t){c[t]={name:e.name,language:e.lang,bitrate:e.bitrate}}));var u=Bw(s),h=u.bytesLoaded,m=u.requestStart,p=u.responseStart,f=u.responseEnd;o("requestcompleted",Mw(Dw({},Uw(l)),{request_event_type:e,request_bytes_loaded:h,request_start:m,request_response_start:p,request_response_end:f,request_type:"manifest",request_hostname:Lw(r),request_response_headers:$w(a),request_rendition_lists:{media:d,audio:c,video:{}}}))};n.on(i.Events.MANIFEST_LOADED,l);var d=function(e,t){var n=t.details,i=t.level,r=t.networkDetails,l=t.stats,d=Bw(l),c=d.bytesLoaded,u=d.requestStart,h=d.responseStart,m=d.responseEnd,p=n.fragments[n.fragments.length-1],f=a(p)+s(p.duration);o("requestcompleted",{request_event_type:e,request_bytes_loaded:c,request_start:u,request_response_start:h,request_response_end:m,request_current_level:i,request_type:"manifest",request_hostname:Lw(n.url),request_response_headers:$w(r),video_holdback:n.holdBack&&s(n.holdBack),video_part_holdback:n.partHoldBack&&s(n.partHoldBack),video_part_target_duration:n.partTarget&&s(n.partTarget),video_target_duration:n.targetduration&&s(n.targetduration),video_source_is_live:n.live,player_manifest_newest_program_time:isNaN(f)?void 0:f})};n.on(i.Events.LEVEL_LOADED,d);var c=function(e,t){var n=t.details,i=t.networkDetails,r=t.stats,s=Bw(r),a=s.bytesLoaded,l=s.requestStart,d=s.responseStart,c=s.responseEnd;o("requestcompleted",{request_event_type:e,request_bytes_loaded:a,request_start:l,request_response_start:d,request_response_end:c,request_type:"manifest",request_hostname:Lw(n.url),request_response_headers:$w(i)})};n.on(i.Events.AUDIO_TRACK_LOADED,c);var u=function(e,t){var i=t.stats,r=t.networkDetails,s=t.frag;i=i||s.stats;var a=Bw(i),l=a.bytesLoaded,d=a.requestStart,c=a.responseStart,u=a.responseEnd,h=r?$w(r):void 0,m={request_event_type:e,request_bytes_loaded:l,request_start:d,request_response_start:c,request_response_end:u,request_hostname:r?Lw(r.responseURL):void 0,request_id:h?Fw(h):void 0,request_response_headers:h,request_media_duration:s.duration,request_url:null==r?void 0:r.responseURL};"main"===s.type?(m.request_type="media",m.request_current_level=s.level,m.request_video_width=(n.levels[s.level]||{}).width,m.request_video_height=(n.levels[s.level]||{}).height,m.request_labeled_bitrate=(n.levels[s.level]||{}).bitrate):m.request_type=s.type,o("requestcompleted",m)};n.on(i.Events.FRAG_LOADED,u);var h=function(e,t){var n=t.frag,i=n.start,r={currentFragmentPDT:a(n),currentFragmentStart:s(i)};o("fragmentchange",r)};n.on(i.Events.FRAG_CHANGED,h);var m=function(e,t){var n=t.type,r=t.details,s=t.response,a=t.fatal,l=t.frag,d=t.networkDetails,c=(null==l?void 0:l.url)||t.url||"",u=d?$w(d):void 0;if((r===i.ErrorDetails.MANIFEST_LOAD_ERROR||r===i.ErrorDetails.MANIFEST_LOAD_TIMEOUT||r===i.ErrorDetails.FRAG_LOAD_ERROR||r===i.ErrorDetails.FRAG_LOAD_TIMEOUT||r===i.ErrorDetails.LEVEL_LOAD_ERROR||r===i.ErrorDetails.LEVEL_LOAD_TIMEOUT||r===i.ErrorDetails.AUDIO_TRACK_LOAD_ERROR||r===i.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT||r===i.ErrorDetails.SUBTITLE_LOAD_ERROR||r===i.ErrorDetails.SUBTITLE_LOAD_TIMEOUT||r===i.ErrorDetails.KEY_LOAD_ERROR||r===i.ErrorDetails.KEY_LOAD_TIMEOUT)&&o("requestfailed",{request_error:r,request_url:c,request_hostname:Lw(c),request_id:u?Fw(u):void 0,request_type:r===i.ErrorDetails.FRAG_LOAD_ERROR||r===i.ErrorDetails.FRAG_LOAD_TIMEOUT?"media":r===i.ErrorDetails.AUDIO_TRACK_LOAD_ERROR||r===i.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT?"audio":r===i.ErrorDetails.SUBTITLE_LOAD_ERROR||r===i.ErrorDetails.SUBTITLE_LOAD_TIMEOUT?"subtitle":r===i.ErrorDetails.KEY_LOAD_ERROR||r===i.ErrorDetails.KEY_LOAD_TIMEOUT?"encryption":"manifest",request_error_code:null==s?void 0:s.code,request_error_text:null==s?void 0:s.text}),a){var h,m="".concat(c?"url: ".concat(c,"\n"):"")+"".concat(s&&(s.code||s.text)?"response: ".concat(s.code,", ").concat(s.text,"\n"):"")+"".concat(t.reason?"failure reason: ".concat(t.reason,"\n"):"")+"".concat(t.level?"level: ".concat(t.level,"\n"):"")+"".concat(t.parent?"parent stream controller: ".concat(t.parent,"\n"):"")+"".concat(t.buffer?"buffer length: ".concat(t.buffer,"\n"):"")+"".concat(t.error?"error: ".concat(t.error,"\n"):"")+"".concat(t.event?"event: ".concat(t.event,"\n"):"")+"".concat(t.err?"error message: ".concat(null===(h=t.err)||void 0===h?void 0:h.message,"\n"):"");o("error",{player_error_code:n,player_error_message:r,player_error_context:m})}};n.on(i.Events.ERROR,m);var p=function(e,t){var n=t.frag,i=n&&n._url||"";o("requestcanceled",{request_event_type:e,request_url:i,request_type:"media",request_hostname:Lw(i)})};n.on(i.Events.FRAG_LOAD_EMERGENCY_ABORTED,p);var f=function(e,t){var i=t.level,s=n.levels[i];if(s&&s.attrs&&s.attrs.BANDWIDTH){var a,l=s.attrs.BANDWIDTH,d=parseFloat(s.attrs["FRAME-RATE"]);isNaN(d)||(a=d),l?o("renditionchange",{video_source_fps:a,video_source_bitrate:l,video_source_width:s.width,video_source_height:s.height,video_source_rendition_name:s.name,video_source_codec:null==s?void 0:s.videoCodec}):r.warn("missing BANDWIDTH from HLS manifest parsed by HLS.js")}};n.on(i.Events.LEVEL_SWITCHED,f),n._stopMuxMonitor=function(){n.off(i.Events.MANIFEST_LOADED,l),n.off(i.Events.LEVEL_LOADED,d),n.off(i.Events.AUDIO_TRACK_LOADED,c),n.off(i.Events.FRAG_LOADED,u),n.off(i.Events.FRAG_CHANGED,h),n.off(i.Events.ERROR,m),n.off(i.Events.FRAG_LOAD_EMERGENCY_ABORTED,p),n.off(i.Events.LEVEL_SWITCHED,f),n.off(i.Events.DESTROYING,n._stopMuxMonitor),delete n._stopMuxMonitor},n.on(i.Events.DESTROYING,n._stopMuxMonitor)}else r.warn("performance timing not supported. Not tracking HLS.js.")}(this.mux,this.id,e.hlsjs,{},e.Hls||window.Hls)):this.mux.log.warn("You must pass a valid hlsjs instance in order to track it.")}},{key:"removeHLSJS",value:function(){this.hlsjs&&(function(e){e&&"function"==typeof e._stopMuxMonitor&&e._stopMuxMonitor()}(this.hlsjs),this.hlsjs=void 0)}},{key:"addDashJS",value:function(e){e.dashjs?this.dashjs?this.mux.log.warn("An instance of Dash.js is already being monitored for this player."):(this.dashjs=e.dashjs,Ww(this.mux,this.id,e.dashjs)):this.mux.log.warn("You must pass a valid dashjs instance in order to track it.")}},{key:"removeDashJS",value:function(){this.dashjs&&(function(e){e&&"function"==typeof e._stopMuxMonitor&&e._stopMuxMonitor()}(this.dashjs),this.dashjs=void 0)}}]),n}(qw),YL=jL;Bk();var zL=Nk(iw());var XL=["loadstart","pause","play","playing","seeking","seeked","timeupdate","ratechange","stalled","waiting","error","ended"],QL={1:"MEDIA_ERR_ABORTED",2:"MEDIA_ERR_NETWORK",3:"MEDIA_ERR_DECODE",4:"MEDIA_ERR_SRC_NOT_SUPPORTED"};var ZL,JL=Nk(Fk());JL.default&&JL.default.WeakMap&&(ZL=new WeakMap);var eR="#EXT-X-TARGETDURATION",tR="#EXT-X-PART-INF",nR="#EXT-X-SERVER-CONTROL",iR="#EXTINF",rR="#EXT-X-PROGRAM-DATE-TIME",sR="#EXT-X-VERSION",aR="#EXT-X-SESSION-DATA",oR=function(e){return this.buffer="",this.manifest={segments:[],serverControl:{},sessionData:{}},this.currentUri={},this.process(e),this.manifest};oR.prototype.process=function(e){var t;for(this.buffer+=e,t=this.buffer.indexOf("\n");t>-1;t=this.buffer.indexOf("\n"))this.processLine(this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)},oR.prototype.processLine=function(e){var t=e.indexOf(":"),n=pR(e,t),i=n[0],r=2===n.length?cR(n[1]):void 0;if("#"!==i[0])this.currentUri.uri=i,this.manifest.segments.push(this.currentUri),this.manifest.targetDuration&&!("duration"in this.currentUri)&&(this.currentUri.duration=this.manifest.targetDuration),this.currentUri={};else switch(i){case eR:if(!isFinite(r)||r<0)return;this.manifest.targetDuration=r,this.setHoldBack();break;case tR:lR(this.manifest,n),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),this.setHoldBack();break;case nR:lR(this.manifest,n),this.setHoldBack();break;case iR:0===r?this.currentUri.duration=.01:r>0&&(this.currentUri.duration=r);break;case rR:var s=r,a=new Date(s);this.manifest.dateTimeString||(this.manifest.dateTimeString=s,this.manifest.dateTimeObject=a),this.currentUri.dateTimeString=s,this.currentUri.dateTimeObject=a;break;case sR:lR(this.manifest,n);break;case aR:var o=fR(n[1]),l=Uw(o);Object.assign(this.manifest.sessionData,l)}},oR.prototype.setHoldBack=function(){var e=this.manifest,t=e.serverControl,n=e.targetDuration,i=e.partTargetDuration;if(t){var r="holdBack",s="partHoldBack",a=n&&3*n,o=i&&2*i;n&&!t.hasOwnProperty(r)&&(t[r]=a),a&&t[r]<a&&(t[r]=a),i&&!t.hasOwnProperty(s)&&(t[s]=3*i),i&&t[s]<o&&(t[s]=o)}};var lR=function(e,t){var n,i=dR(t[0].replace("#EXT-X-",""));mR(t[1])?(n={},n=Object.assign(hR(t[1]),n)):n=cR(t[1]),e[i]=n},dR=function(e){return e.toLowerCase().replace(/-(\w)/g,(function(e){return e[1].toUpperCase()}))},cR=function(e){if("yes"===e.toLowerCase()||"no"===e.toLowerCase())return"yes"===e.toLowerCase();var t=-1!==e.indexOf(":")?e:parseFloat(e);return isNaN(t)?e:t},uR=function(e){var t={},n=e.split("=");n.length>1&&(t[dR(n[0])]=cR(n[1]));return t},hR=function(e){for(var t=e.split(","),n={},i=0;t.length>i;i++){var r=t[i],s=uR(r);n=Object.assign(s,n)}return n},mR=function(e){return e.indexOf("=")>-1},pR=function(e,t){return-1===t?[e]:[e.substring(0,t),e.substring(t+1)]},fR=function(e){var t={};if(e){var n=e.search(",");return[e.slice(0,n),e.slice(n+1)].forEach((function(e,n){for(var i=e.replace(/['"]+/g,"").split("="),r=0;r<i.length;r++)"DATA-ID"===i[r]&&(t["DATA-ID"]=i[1-r]),"VALUE"===i[r]&&(t.VALUE=i[1-r])})),{data:t}}},gR=oR,vR={safeCall:function(e,t,n,i){var r=i;if(e&&"function"==typeof e[t])try{r=e[t].apply(e,n)}catch(e){mw.info("safeCall error",e)}return r},safeIncrement:xw,getComputedStyle:function(e,t){return e&&t&&JL.default&&"function"==typeof JL.default.getComputedStyle?(ZL&&ZL.has(e)&&(n=ZL.get(e)),n||(n=JL.default.getComputedStyle(e,null),ZL&&ZL.set(e,n)),n.getPropertyValue(t)):"";var n},secondsToMs:function(e){return Math.floor(1e3*e)},assign:Object.assign,headersStringToObject:Nw,cdnHeadersToRequestId:Fw,extractHostnameAndDomain:Rw,extractHostname:Lw,manifestParser:gR,generateShortID:lw,generateUUID:ow,now:bw.now},bR=vR,yR={PLAYER_READY:"playerready",VIEW_INIT:"viewinit",VIDEO_CHANGE:"videochange",PLAY:"play",PAUSE:"pause",PLAYING:"playing",TIME_UPDATE:"timeupdate",SEEKING:"seeking",SEEKED:"seeked",REBUFFER_START:"rebufferstart",REBUFFER_END:"rebufferend",ERROR:"error",ENDED:"ended",RENDITION_CHANGE:"renditionchange",ORIENTATION_CHANGE:"orientationchange",AD_REQUEST:"adrequest",AD_RESPONSE:"adresponse",AD_BREAK_START:"adbreakstart",AD_PLAY:"adplay",AD_PLAYING:"adplaying",AD_PAUSE:"adpause",AD_FIRST_QUARTILE:"adfirstquartile",AD_MID_POINT:"admidpoint",AD_THIRD_QUARTILE:"adthirdquartile",AD_ENDED:"adended",AD_BREAK_END:"adbreakend",AD_ERROR:"aderror",REQUEST_COMPLETED:"requestcompleted",REQUEST_FAILED:"requestfailed",REQUEST_CANCELLED:"requestcanceled"},ER={},TR=function(e){var t=arguments;"string"==typeof e?TR.hasOwnProperty(e)?aw.default.setTimeout((function(){t=Array.prototype.splice.call(t,1),TR[e].apply(null,t)}),0):mw.warn("`"+e+"` is an unknown task"):"function"==typeof e?aw.default.setTimeout((function(){e(TR)}),0):mw.warn("`"+e+"` is invalid.")},_R={loaded:bw.now(),NAME:"mux-embed",VERSION:"5.2.0",API_VERSION:"2.1",PLAYER_TRACKED:!1,monitor:function(e,t){return function(e,t,n){var i=sw(cw(t),3),r=i[0],s=i[1],a=i[2],o=e.log,l=e.utils.getComputedStyle,d=e.utils.secondsToMs;if(!r)return o.error("No element was found with the `"+s+"` query selector.");if("video"!==a&&"audio"!==a)return o.error("The element of `"+s+"` was not a media element.");r.mux&&(r.mux.destroy(),delete r.mux,o.warn("Already monitoring this video element, replacing existing event listeners")),(n=Object.assign({automaticErrorTracking:!0},n)).data=Object.assign({player_software:"HTML5 Video Element",player_mux_plugin_name:"VideoElementMonitor",player_mux_plugin_version:e.VERSION},n.data),n.getPlayheadTime=function(){return d(r.currentTime)},n.getStateData=function(){var e,t=this.hlsjs&&this.hlsjs.url,i=this.dashjs&&Uk("function"===this.dashjs.getSource)&&this.dashjs.getSource(),s={player_is_paused:r.paused,player_playhead_time:d(r.currentTime),player_width:parseInt(l(r,"width")),player_height:parseInt(l(r,"height")),player_autoplay_on:r.autoplay,player_preload_on:r.preload,player_language_code:r.lang,player_is_fullscreen:zL.default&&!!(zL.default.fullscreenElement||zL.default.webkitFullscreenElement||zL.default.mozFullScreenElement||zL.default.msFullscreenElement),video_poster_url:r.poster,video_source_url:t||i||r.currentSrc,video_source_duration:d(r.duration),video_source_height:r.videoHeight,video_source_width:r.videoWidth,view_dropped_frame_count:null==r||null===(e=r.getVideoPlaybackQuality)||void 0===e?void 0:e.call(r).droppedVideoFrames},a=n.getPlayheadTime();if(r.getStartDate&&a>0){var o=r.getStartDate();if(o&&"function"==typeof o.getTime&&o.getTime()){var c=o.getTime();if(s.player_program_time=c+a,r.seekable.length>0){var u=c+r.seekable.end(r.seekable.length-1);s.player_live_edge_program_time=u}}}return s},r.mux=r.mux||{},r.mux.deleted=!1,r.mux.emit=function(t,n){e.emit(s,t,n)};var c=function(){o.error("The monitor for this video element has already been destroyed.")};r.mux.destroy=function(){Object.keys(r.mux.listeners).forEach((function(e){r.removeEventListener(e,r.mux.listeners[e],!1)})),delete r.mux.listeners,r.mux.destroy=c,r.mux.swapElement=c,r.mux.emit=c,r.mux.addHLSJS=c,r.mux.addDashJS=c,r.mux.removeHLSJS=c,r.mux.removeDashJS=c,r.mux.deleted=!0,e.emit(s,"destroy")},r.mux.swapElement=function(t){var n=sw(cw(t),3),i=n[0],s=n[1],a=n[2];return i?"video"!==a&&"audio"!==a?e.log.error("The element of `"+s+"` was not a media element."):(i.muxId=r.muxId,delete r.muxId,i.mux=i.mux||{},i.mux.listeners=Object.assign({},r.mux.listeners),delete r.mux.listeners,Object.keys(i.mux.listeners).forEach((function(e){r.removeEventListener(e,i.mux.listeners[e],!1),i.addEventListener(e,i.mux.listeners[e],!1)})),i.mux.swapElement=r.mux.swapElement,i.mux.destroy=r.mux.destroy,delete r.mux,void(r=i)):e.log.error("No element was found with the `"+s+"` query selector.")},r.mux.addHLSJS=function(t){e.addHLSJS(s,t)},r.mux.addDashJS=function(t){e.addDashJS(s,t)},r.mux.removeHLSJS=function(){e.removeHLSJS(s)},r.mux.removeDashJS=function(){e.removeDashJS(s)},e.init(s,n),e.emit(s,"playerready"),r.paused||(e.emit(s,"play"),r.readyState>2&&e.emit(s,"playing")),r.mux.listeners={},XL.forEach((function(t){"error"===t&&!n.automaticErrorTracking||(r.mux.listeners[t]=function(){var n={};if("error"===t){if(!r.error||1===r.error.code)return;n.player_error_code=r.error.code,n.player_error_message=QL[r.error.code]||r.error.message}e.emit(s,t,n)},r.addEventListener(t,r.mux.listeners[t],!1))}))}(TR,e,t)},destroyMonitor:function(e){var t=sw(cw(e),1)[0];t&&t.mux&&"function"==typeof t.mux.destroy?t.mux.destroy():mw.error("A video element monitor for `"+e+"` has not been initialized via `mux.monitor`.")},addHLSJS:function(e,t){var n=dw(e);ER[n]?ER[n].addHLSJS(t):mw.error("A monitor for `"+n+"` has not been initialized.")},addDashJS:function(e,t){var n=dw(e);ER[n]?ER[n].addDashJS(t):mw.error("A monitor for `"+n+"` has not been initialized.")},removeHLSJS:function(e){var t=dw(e);ER[t]?ER[t].removeHLSJS():mw.error("A monitor for `"+t+"` has not been initialized.")},removeDashJS:function(e){var t=dw(e);ER[t]?ER[t].removeDashJS():mw.error("A monitor for `"+t+"` has not been initialized.")},init:function(e,t){fw()&&t&&t.respectDoNotTrack&&mw.info("The browser's Do Not Track flag is enabled - Mux beaconing is disabled.");var n=dw(e);ER[n]=new YL(TR,n,t)},emit:function(e,t,n){var i=dw(e);ER[i]?(ER[i].emit(t,n),"destroy"===t&&delete ER[i]):mw.error("A monitor for `"+i+"` has not been initialized.")},checkDoNotTrack:fw,log:mw,utils:bR,events:yR,WINDOW_HIDDEN:!1,WINDOW_UNLOADING:!1};Object.assign(TR,_R),void 0!==aw.default&&"function"==typeof aw.default.addEventListener&&aw.default.addEventListener("pagehide",(function(e){e.persisted||(TR.WINDOW_UNLOADING=!0)}),!1);var AR=TR;function SR(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var kR,wR,LR,RR,CR,IR={exports:{}};kR=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,wR=/^(?=([^\/?#]*))\1([^]*)$/,LR=/(?:\/|^)\.(?=\/)/g,RR=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,IR.exports=CR={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),!(t=t.trim())){if(!n.alwaysNormalize)return e;var i=CR.parseURL(e);if(!i)throw new Error("Error trying to parse base URL.");return i.path=CR.normalizePath(i.path),CR.buildURLFromParts(i)}var r=CR.parseURL(t);if(!r)throw new Error("Error trying to parse relative URL.");if(r.scheme)return n.alwaysNormalize?(r.path=CR.normalizePath(r.path),CR.buildURLFromParts(r)):t;var s=CR.parseURL(e);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var a=wR.exec(s.path);s.netLoc=a[1],s.path=a[2]}s.netLoc&&!s.path&&(s.path="/");var o={scheme:s.scheme,netLoc:r.netLoc,path:null,params:r.params,query:r.query,fragment:r.fragment};if(!r.netLoc&&(o.netLoc=s.netLoc,"/"!==r.path[0]))if(r.path){var l=s.path,d=l.substring(0,l.lastIndexOf("/")+1)+r.path;o.path=CR.normalizePath(d)}else o.path=s.path,r.params||(o.params=s.params,r.query||(o.query=s.query));return null===o.path&&(o.path=n.alwaysNormalize?CR.normalizePath(r.path):r.path),CR.buildURLFromParts(o)},parseURL:function(e){var t=kR.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(LR,"");e.length!==(e=e.replace(RR,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};var xR=IR.exports;function DR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function MR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?DR(Object(n),!0).forEach((function(t){PR(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DR(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function OR(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function PR(e,t,n){return(t=OR(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function NR(){return NR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},NR.apply(this,arguments)}const FR=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)},UR=Number.isSafeInteger||function(e){return"number"==typeof e&&Math.abs(e)<=BR},BR=Number.MAX_SAFE_INTEGER||9007199254740991;let $R=function(e){return e.MEDIA_ATTACHING="hlsMediaAttaching",e.MEDIA_ATTACHED="hlsMediaAttached",e.MEDIA_DETACHING="hlsMediaDetaching",e.MEDIA_DETACHED="hlsMediaDetached",e.BUFFER_RESET="hlsBufferReset",e.BUFFER_CODECS="hlsBufferCodecs",e.BUFFER_CREATED="hlsBufferCreated",e.BUFFER_APPENDING="hlsBufferAppending",e.BUFFER_APPENDED="hlsBufferAppended",e.BUFFER_EOS="hlsBufferEos",e.BUFFER_FLUSHING="hlsBufferFlushing",e.BUFFER_FLUSHED="hlsBufferFlushed",e.MANIFEST_LOADING="hlsManifestLoading",e.MANIFEST_LOADED="hlsManifestLoaded",e.MANIFEST_PARSED="hlsManifestParsed",e.LEVEL_SWITCHING="hlsLevelSwitching",e.LEVEL_SWITCHED="hlsLevelSwitched",e.LEVEL_LOADING="hlsLevelLoading",e.LEVEL_LOADED="hlsLevelLoaded",e.LEVEL_UPDATED="hlsLevelUpdated",e.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",e.LEVELS_UPDATED="hlsLevelsUpdated",e.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",e.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",e.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",e.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",e.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",e.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",e.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",e.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",e.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",e.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",e.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",e.CUES_PARSED="hlsCuesParsed",e.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",e.INIT_PTS_FOUND="hlsInitPtsFound",e.FRAG_LOADING="hlsFragLoading",e.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",e.FRAG_LOADED="hlsFragLoaded",e.FRAG_DECRYPTED="hlsFragDecrypted",e.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",e.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",e.FRAG_PARSING_METADATA="hlsFragParsingMetadata",e.FRAG_PARSED="hlsFragParsed",e.FRAG_BUFFERED="hlsFragBuffered",e.FRAG_CHANGED="hlsFragChanged",e.FPS_DROP="hlsFpsDrop",e.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",e.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",e.ERROR="hlsError",e.DESTROYING="hlsDestroying",e.KEY_LOADING="hlsKeyLoading",e.KEY_LOADED="hlsKeyLoaded",e.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",e.BACK_BUFFER_REACHED="hlsBackBufferReached",e.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",e}({}),HR=function(e){return e.NETWORK_ERROR="networkError",e.MEDIA_ERROR="mediaError",e.KEY_SYSTEM_ERROR="keySystemError",e.MUX_ERROR="muxError",e.OTHER_ERROR="otherError",e}({}),VR=function(e){return e.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",e.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",e.KEY_SYSTEM_NO_SESSION="keySystemNoSession",e.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",e.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",e.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",e.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",e.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",e.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",e.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",e.MANIFEST_LOAD_ERROR="manifestLoadError",e.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",e.MANIFEST_PARSING_ERROR="manifestParsingError",e.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",e.LEVEL_EMPTY_ERROR="levelEmptyError",e.LEVEL_LOAD_ERROR="levelLoadError",e.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",e.LEVEL_PARSING_ERROR="levelParsingError",e.LEVEL_SWITCH_ERROR="levelSwitchError",e.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",e.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",e.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",e.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",e.FRAG_LOAD_ERROR="fragLoadError",e.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",e.FRAG_DECRYPT_ERROR="fragDecryptError",e.FRAG_PARSING_ERROR="fragParsingError",e.FRAG_GAP="fragGap",e.REMUX_ALLOC_ERROR="remuxAllocError",e.KEY_LOAD_ERROR="keyLoadError",e.KEY_LOAD_TIMEOUT="keyLoadTimeOut",e.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",e.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",e.BUFFER_APPEND_ERROR="bufferAppendError",e.BUFFER_APPENDING_ERROR="bufferAppendingError",e.BUFFER_STALLED_ERROR="bufferStalledError",e.BUFFER_FULL_ERROR="bufferFullError",e.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",e.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",e.INTERNAL_EXCEPTION="internalException",e.INTERNAL_ABORTED="aborted",e.UNKNOWN="unknown",e}({});const WR=function(){},GR={trace:WR,debug:WR,log:WR,warn:WR,info:WR,error:WR};let KR=GR;function qR(e,...t){t.forEach((function(t){KR[t]=e[t]?e[t].bind(e):function(e){const t=self.console[e];return t?t.bind(self.console,`[${e}] >`):WR}(t)}))}const jR=KR,YR=/^(\d+)x(\d+)$/,zR=/(.+?)=(".*?"|.*?)(?:,|$)/g;class XR{constructor(e){"string"==typeof e&&(e=XR.parseAttrList(e)),NR(this,e)}get clientAttrs(){return Object.keys(this).filter((e=>"X-"===e.substring(0,2)))}decimalInteger(e){const t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}hexadecimalInteger(e){if(this[e]){let t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;const n=new Uint8Array(t.length/2);for(let e=0;e<t.length/2;e++)n[e]=parseInt(t.slice(2*e,2*e+2),16);return n}return null}hexadecimalIntegerAsNumber(e){const t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,t){const n=this[e];return n?parseFloat(n):t}enumeratedString(e){return this[e]}bool(e){return"YES"===this[e]}decimalResolution(e){const t=YR.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}static parseAttrList(e){let t;const n={};for(zR.lastIndex=0;null!==(t=zR.exec(e));){let e=t[2];0===e.indexOf('"')&&e.lastIndexOf('"')===e.length-1&&(e=e.slice(1,-1));n[t[1].trim()]=e}return n}}function QR(e){return"SCTE35-OUT"===e||"SCTE35-IN"===e}class ZR{constructor(e,t){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,t){const n=t.attr;for(const t in n)if(Object.prototype.hasOwnProperty.call(e,t)&&e[t]!==n[t]){jR.warn(`DATERANGE tag attribute: "${t}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=t;break}e=NR(new XR({}),n,e)}if(this.attr=e,this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const e=new Date(this.attr["END-DATE"]);FR(e.getTime())&&(this._endDate=e)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get startDate(){return this._startDate}get endDate(){if(this._endDate)return this._endDate;const e=this.duration;return null!==e?new Date(this._startDate.getTime()+1e3*e):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(FR(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isValid(){return!!this.id&&!this._badValueForSameId&&FR(this.startDate.getTime())&&(null===this.duration||this.duration>=0)&&(!this.endOnNext||!!this.class)}}class JR{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var eC="audio",tC="video",nC="audiovideo";class iC{constructor(e){this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams={[eC]:null,[tC]:null,[nC]:null},this.baseurl=e}setByteRange(e,t){const n=e.split("@",2);let i;i=1===n.length?(null==t?void 0:t.byteRangeEndOffset)||0:parseInt(n[1]),this._byteRange=[i,parseInt(n[0])+i]}get byteRange(){return this._byteRange?this._byteRange:[]}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=xR.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}}class rC extends iC{constructor(e,t){super(t),this._decryptdata=null,this.rawProgramDateTime=null,this.programDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.stats=new JR,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=e}get decryptdata(){const{levelkeys:e}=this;if(!e&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){const e=this.levelkeys.identity;if(e)this._decryptdata=e.getDecryptData(this.sn);else{const e=Object.keys(this.levelkeys);if(1===e.length)return this._decryptdata=this.levelkeys[e[0]].getDecryptData(this.sn)}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(null===this.programDateTime)return null;if(!FR(this.programDateTime))return null;const e=FR(this.duration)?this.duration:0;return this.programDateTime+1e3*e}get encrypted(){var e;if(null!=(e=this._decryptdata)&&e.encrypted)return!0;if(this.levelkeys){const e=Object.keys(this.levelkeys),t=e.length;if(t>1||1===t&&this.levelkeys[e[0]].encrypted)return!0}return!1}setKeyFormat(e){if(this.levelkeys){const t=this.levelkeys[e];t&&!this._decryptdata&&(this._decryptdata=t.getDecryptData(this.sn))}}abortRequests(){var e,t;null==(e=this.loader)||e.abort(),null==(t=this.keyLoader)||t.abort()}setElementaryStreamInfo(e,t,n,i,r,s=!1){const{elementaryStreams:a}=this,o=a[e];o?(o.startPTS=Math.min(o.startPTS,t),o.endPTS=Math.max(o.endPTS,n),o.startDTS=Math.min(o.startDTS,i),o.endDTS=Math.max(o.endDTS,r)):a[e]={startPTS:t,endPTS:n,startDTS:i,endDTS:r,partial:s}}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[eC]=null,e[tC]=null,e[nC]=null}}class sC extends iC{constructor(e,t,n,i,r){super(n),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.stats=new JR,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=t,this.index=i;const s=e.enumeratedString("BYTERANGE");s&&this.setByteRange(s,r),r&&(this.fragOffset=r.fragOffset+r.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}}class aC{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e)return this.advanced=!0,void(this.updated=!0);const t=this.lastPartSn-e.lastPartSn,n=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!n||!!t||!this.live,this.advanced=this.endSN>e.endSN||t>0||0===t&&n>0,this.updated||this.advanced?this.misses=Math.floor(.6*e.misses):this.misses=e.misses+1,this.availabilityDelay=e.availabilityDelay}get hasProgramDateTime(){return!!this.fragments.length&&FR(this.fragments[this.fragments.length-1].programDateTime)}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||10}get drift(){const e=this.driftEndTime-this.driftStartTime;if(e>0){return 1e3*(this.driftEnd-this.driftStart)/e}return 1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){var e;return null!=(e=this.fragments)&&e.length?this.fragments[this.fragments.length-1].end:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].index:-1}get lastPartSn(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}function oC(e){return Uint8Array.from(atob(e),(e=>e.charCodeAt(0)))}function lC(e){const t=e.split(":");let n=null;if("data"===t[0]&&2===t.length){const e=t[1].split(";"),i=e[e.length-1].split(",");if(2===i.length){const t="base64"===i[0],r=i[1];t?(e.splice(-1,1),n=oC(r)):n=function(e){const t=dC(e).subarray(0,16),n=new Uint8Array(16);return n.set(t,16-t.length),n}(r)}}return n}function dC(e){return Uint8Array.from(unescape(encodeURIComponent(e)),(e=>e.charCodeAt(0)))}const cC="undefined"!=typeof self?self:void 0;var uC={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},hC="org.w3.clearkey",mC="com.apple.streamingkeydelivery",pC="com.microsoft.playready",fC="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";function gC(e){switch(e){case mC:return uC.FAIRPLAY;case pC:return uC.PLAYREADY;case fC:return uC.WIDEVINE;case hC:return uC.CLEARKEY}}var vC="edef8ba979d64acea3c827dcd51d21ed";function bC(e){switch(e){case uC.FAIRPLAY:return mC;case uC.PLAYREADY:return pC;case uC.WIDEVINE:return fC;case uC.CLEARKEY:return hC}}function yC(e){const{drmSystems:t,widevineLicenseUrl:n}=e,i=t?[uC.FAIRPLAY,uC.WIDEVINE,uC.PLAYREADY,uC.CLEARKEY].filter((e=>!!t[e])):[];return!i[uC.WIDEVINE]&&n&&i.push(uC.WIDEVINE),i}const EC=null!=cC&&null!=(TC=cC.navigator)&&TC.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null;var TC;function _C(e,t,n){return Uint8Array.prototype.slice?e.slice(t,n):new Uint8Array(Array.prototype.slice.call(e,t,n))}const AC=(e,t)=>t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128,SC=(e,t)=>t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128,kC=(e,t)=>{const n=t;let i=0;for(;AC(e,t);){i+=10;i+=wC(e,t+6),SC(e,t+10)&&(i+=10),t+=i}if(i>0)return e.subarray(n,n+i)},wC=(e,t)=>{let n=0;return n=(127&e[t])<<21,n|=(127&e[t+1])<<14,n|=(127&e[t+2])<<7,n|=127&e[t+3],n},LC=(e,t)=>AC(e,t)&&wC(e,t+6)+10<=e.length-t,RC=e=>{const t=xC(e);for(let e=0;e<t.length;e++){const n=t[e];if(CC(n))return NC(n)}},CC=e=>e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info,IC=e=>{const t=String.fromCharCode(e[0],e[1],e[2],e[3]),n=wC(e,4);return{type:t,size:n,data:e.subarray(10,10+n)}},xC=e=>{let t=0;const n=[];for(;AC(e,t);){const i=wC(e,t+6);t+=10;const r=t+i;for(;t+8<r;){const i=IC(e.subarray(t)),r=DC(i);r&&n.push(r),t+=i.size+10}SC(e,t)&&(t+=10)}return n},DC=e=>"PRIV"===e.type?MC(e):"W"===e.type[0]?PC(e):OC(e),MC=e=>{if(e.size<2)return;const t=FC(e.data,!0),n=new Uint8Array(e.data.subarray(t.length+1));return{key:e.type,info:t,data:n.buffer}},OC=e=>{if(e.size<2)return;if("TXXX"===e.type){let t=1;const n=FC(e.data.subarray(t),!0);t+=n.length+1;const i=FC(e.data.subarray(t));return{key:e.type,info:n,data:i}}const t=FC(e.data.subarray(1));return{key:e.type,data:t}},PC=e=>{if("WXXX"===e.type){if(e.size<2)return;let t=1;const n=FC(e.data.subarray(t),!0);t+=n.length+1;const i=FC(e.data.subarray(t));return{key:e.type,info:n,data:i}}const t=FC(e.data);return{key:e.type,data:t}},NC=e=>{if(8===e.data.byteLength){const t=new Uint8Array(e.data),n=1&t[3];let i=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return i/=45,n&&(i+=47721858.84),Math.round(i)}},FC=(e,t=!1)=>{const n=function(){if(navigator.userAgent.includes("PlayStation 4"))return;UC||void 0===self.TextDecoder||(UC=new self.TextDecoder("utf-8"));return UC}();if(n){const i=n.decode(e);if(t){const e=i.indexOf("\0");return-1!==e?i.substring(0,e):i}return i.replace(/\0/g,"")}const i=e.length;let r,s,a,o="",l=0;for(;l<i;){if(r=e[l++],0===r&&t)return o;if(0!==r&&3!==r)switch(r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o+=String.fromCharCode(r);break;case 12:case 13:s=e[l++],o+=String.fromCharCode((31&r)<<6|63&s);break;case 14:s=e[l++],a=e[l++],o+=String.fromCharCode((15&r)<<12|(63&s)<<6|63&a)}}return o};let UC;const BC=function(e){let t="";for(let n=0;n<e.length;n++){let i=e[n].toString(16);i.length<2&&(i="0"+i),t+=i}return t},$C=Math.pow(2,32)-1,HC=[].push,VC={video:1,audio:2,id3:3,text:4};function WC(e){return String.fromCharCode.apply(null,e)}function GC(e,t){const n=e[t]<<8|e[t+1];return n<0?65536+n:n}function KC(e,t){const n=jC(e,t);return n<0?4294967296+n:n}function qC(e,t){let n=KC(e,t);return n*=Math.pow(2,32),n+=KC(e,t+4),n}function jC(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function YC(e,t,n){e[t]=n>>24,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n}function zC(e,t){const n=[];if(!t.length)return n;const i=e.byteLength;for(let r=0;r<i;){const s=KC(e,r),a=s>1?r+s:i;if(WC(e.subarray(r+4,r+8))===t[0])if(1===t.length)n.push(e.subarray(r+8,a));else{const i=zC(e.subarray(r+8,a),t.slice(1));i.length&&HC.apply(n,i)}r=a}return n}function XC(e){const t=[],n=e[0];let i=8;const r=KC(e,i);i+=4;let s=0,a=0;0===n?(s=KC(e,i),a=KC(e,i+4),i+=8):(s=qC(e,i),a=qC(e,i+8),i+=16),i+=2;let o=e.length+a;const l=GC(e,i);i+=2;for(let n=0;n<l;n++){let n=i;const s=KC(e,n);n+=4;const a=2147483647&s;if(1===(2147483648&s)>>>31)return jR.warn("SIDX has hierarchical references (not supported)"),null;const l=KC(e,n);n+=4,t.push({referenceSize:a,subsegmentDuration:l,info:{duration:l/r,start:o,end:o+a-1}}),o+=a,n+=4,i=n}return{earliestPresentationTime:s,timescale:r,version:n,referencesCount:l,references:t}}function QC(e){const t=[],n=zC(e,["moov","trak"]);for(let e=0;e<n.length;e++){const i=n[e],r=zC(i,["tkhd"])[0];if(r){let e=r[0];const n=KC(r,0===e?12:20),s=zC(i,["mdia","mdhd"])[0];if(s){e=s[0];const r=KC(s,0===e?12:20),a=zC(i,["mdia","hdlr"])[0];if(a){const e=WC(a.subarray(8,12)),s={soun:eC,vide:tC}[e];if(s){const e=ZC(zC(i,["mdia","minf","stbl","stsd"])[0]);t[n]={timescale:r,type:s},t[s]=MR({timescale:r,id:n},e)}}}}}return zC(e,["moov","mvex","trex"]).forEach((e=>{const n=KC(e,4),i=t[n];i&&(i.default={duration:KC(e,12),flags:KC(e,20)})})),t}function ZC(e){const t=e.subarray(8),n=t.subarray(86),i=WC(t.subarray(4,8));let r=i;const s="enca"===i||"encv"===i;if(s){const e=zC(t,[i])[0];zC(e.subarray("enca"===i?28:78),["sinf"]).forEach((e=>{const t=zC(e,["schm"])[0];if(t){const n=WC(t.subarray(4,8));if("cbcs"===n||"cenc"===n){const t=zC(e,["frma"])[0];t&&(r=WC(t))}}}))}switch(r){case"avc1":case"avc2":case"avc3":case"avc4":{const e=zC(n,["avcC"])[0];r+="."+eI(e[1])+eI(e[2])+eI(e[3]);break}case"mp4a":{const e=zC(t,[i])[0],n=zC(e.subarray(28),["esds"])[0];if(n&&n.length>12){let e=4;if(3!==n[e++])break;e=JC(n,e),e+=2;const t=n[e++];if(128&t&&(e+=2),64&t&&(e+=n[e++]),4!==n[e++])break;e=JC(n,e);const i=n[e++];if(64!==i)break;if(r+="."+eI(i),e+=12,5!==n[e++])break;e=JC(n,e);const s=n[e++];let a=(248&s)>>3;31===a&&(a+=1+((7&s)<<3)+((224&n[e])>>5)),r+="."+a}break}case"hvc1":case"hev1":{const e=zC(n,["hvcC"])[0],t=e[1],i=["","A","B","C"][t>>6],s=31&t,a=KC(e,2),o=(32&t)>>5?"H":"L",l=e[12],d=e.subarray(6,12);r+="."+i+s,r+="."+a.toString(16).toUpperCase(),r+="."+o+l;let c="";for(let e=d.length;e--;){const t=d[e];if(t||c){c="."+t.toString(16).toUpperCase()+c}}r+=c;break}case"dvh1":case"dvhe":{const e=zC(n,["dvcC"])[0],t=e[2]>>1&127,i=e[2]<<5&32|e[3]>>3&31;r+="."+tI(t)+"."+tI(i);break}case"vp09":{const e=zC(n,["vpcC"])[0],t=e[4],i=e[5],s=e[6]>>4&15;r+="."+tI(t)+"."+tI(i)+"."+tI(s);break}case"av01":{const e=zC(n,["av1C"])[0],t=e[1]>>>5,i=31&e[1],s=e[2]>>>7?"H":"M",a=(64&e[2])>>6,o=(32&e[2])>>5,l=2===t&&a?o?12:10:a?10:8,d=(16&e[2])>>4,c=(8&e[2])>>3,u=(4&e[2])>>2,h=3&e[2],m=1,p=1,f=1,g=0;r+="."+t+"."+tI(i)+s+"."+tI(l)+"."+d+"."+c+u+h+"."+tI(m)+"."+tI(p)+"."+tI(f)+"."+g;break}}return{codec:r,encrypted:s}}function JC(e,t){const n=t+5;for(;128&e[t++]&&t<n;);return t}function eI(e){return("0"+e.toString(16).toUpperCase()).slice(-2)}function tI(e){return(e<10?"0":"")+e}function nI(e){const t=zC(e,["schm"])[0];if(t){const n=WC(t.subarray(4,8));if("cbcs"===n||"cenc"===n)return zC(e,["schi","tenc"])[0]}return jR.error("[eme] missing 'schm' box"),null}function iI(e){const t=KC(e,0);let n=8;1&t&&(n+=4),4&t&&(n+=4);let i=0;const r=KC(e,4);for(let s=0;s<r;s++){if(256&t){i+=KC(e,n),n+=4}512&t&&(n+=4),1024&t&&(n+=4),2048&t&&(n+=4)}return i}function rI(e,t){const n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function sI(e,t){const n=[],i=t.samples,r=t.timescale,s=t.id;let a=!1;return zC(i,["moof"]).map((o=>{const l=o.byteOffset-8;zC(o,["traf"]).map((o=>{const d=zC(o,["tfdt"]).map((e=>{const t=e[0];let n=KC(e,4);return 1===t&&(n*=Math.pow(2,32),n+=KC(e,8)),n/r}))[0];return void 0!==d&&(e=d),zC(o,["tfhd"]).map((d=>{const c=KC(d,4),u=16777215&KC(d,0);let h=0;const m=!!(16&u);let p=0;const f=!!(32&u);let g=8;c===s&&(!!(1&u)&&(g+=8),!!(2&u)&&(g+=4),!!(8&u)&&(h=KC(d,g),g+=4),m&&(p=KC(d,g),g+=4),f&&(g+=4),"video"===t.type&&(a=function(e){if(!e)return!1;const t=e.indexOf("."),n=t<0?e:e.substring(0,t);return"hvc1"===n||"hev1"===n||"dvh1"===n||"dvhe"===n}(t.codec)),zC(o,["trun"]).map((s=>{const o=s[0],d=16777215&KC(s,0),c=!!(1&d);let u=0;const m=!!(4&d),f=!!(256&d);let g=0;const v=!!(512&d);let b=0;const y=!!(1024&d),E=!!(2048&d);let T=0;const _=KC(s,4);let A=8;c&&(u=KC(s,A),A+=4),m&&(A+=4);let S=u+l;for(let l=0;l<_;l++){if(f?(g=KC(s,A),A+=4):g=h,v?(b=KC(s,A),A+=4):b=p,y&&(A+=4),E&&(T=0===o?KC(s,A):jC(s,A),A+=4),t.type===tC){let t=0;for(;t<b;){const s=KC(i,S);if(S+=4,aI(a,i[S])){oI(i.subarray(S,S+s),a?2:1,e+T/r,n)}S+=s,t+=s+4}}e+=g/r}})))}))}))})),n}function aI(e,t){if(e){const e=t>>1&63;return 39===e||40===e}return 6===(31&t)}function oI(e,t,n,i){const r=lI(e);let s=0;s+=t;let a=0,o=0,l=0;for(;s<r.length;){a=0;do{if(s>=r.length)break;l=r[s++],a+=l}while(255===l);o=0;do{if(s>=r.length)break;l=r[s++],o+=l}while(255===l);const e=r.length-s;let t=s;if(o<e)s+=o;else if(o>e){jR.error(`Malformed SEI payload. ${o} is too small, only ${e} bytes left to parse.`);break}if(4===a){if(181===r[t++]){const e=GC(r,t);if(t+=2,49===e){const e=KC(r,t);if(t+=4,1195456820===e){const e=r[t++];if(3===e){const s=r[t++],o=64&s,l=o?2+3*(31&s):0,d=new Uint8Array(l);if(o){d[0]=s;for(let e=1;e<l;e++)d[e]=r[t++]}i.push({type:e,payloadType:a,pts:n,bytes:d})}}}}}else if(5===a&&o>16){const e=[];for(let n=0;n<16;n++){const i=r[t++].toString(16);e.push(1==i.length?"0"+i:i),3!==n&&5!==n&&7!==n&&9!==n||e.push("-")}const s=o-16,l=new Uint8Array(s);for(let e=0;e<s;e++)l[e]=r[t++];i.push({payloadType:a,pts:n,uuid:e.join(""),userData:FC(l),userDataBytes:l})}}}function lI(e){const t=e.byteLength,n=[];let i=1;for(;i<t-2;)0===e[i]&&0===e[i+1]&&3===e[i+2]?(n.push(i+2),i+=2):i++;if(0===n.length)return e;const r=t-n.length,s=new Uint8Array(r);let a=0;for(i=0;i<r;a++,i++)a===n[0]&&(a++,n.shift()),s[i]=e[a];return s}function dI(e,t,n){if(16!==e.byteLength)throw new RangeError("Invalid system id");let i,r,s;if(t){i=1,r=new Uint8Array(16*t.length);for(let e=0;e<t.length;e++){const n=t[e];if(16!==n.byteLength)throw new RangeError("Invalid key");r.set(n,16*e)}}else i=0,r=new Uint8Array;i>0?(s=new Uint8Array(4),t.length>0&&new DataView(s.buffer).setUint32(0,t.length,!1)):s=new Uint8Array;const a=new Uint8Array(4);return n&&n.byteLength>0&&new DataView(a.buffer).setUint32(0,n.byteLength,!1),function(e,...t){const n=t.length;let i=8,r=n;for(;r--;)i+=t[r].byteLength;const s=new Uint8Array(i);for(s[0]=i>>24&255,s[1]=i>>16&255,s[2]=i>>8&255,s[3]=255&i,s.set(e,4),r=0,i=8;r<n;r++)s.set(t[r],i),i+=t[r].byteLength;return s}([112,115,115,104],new Uint8Array([i,0,0,0]),e,s,r,a,n||new Uint8Array)}let cI={};class uI{static clearKeyUriToKeyIdMap(){cI={}}constructor(e,t,n,i=[1],r=null){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=t,this.keyFormat=n,this.keyFormatVersions=i,this.iv=r,this.encrypted=!!e&&"NONE"!==e,this.isCommonEncryption=this.encrypted&&"AES-128"!==e}isSupported(){if(this.method){if("AES-128"===this.method||"NONE"===this.method)return!0;if("identity"===this.keyFormat)return"SAMPLE-AES"===this.method;switch(this.keyFormat){case mC:case fC:case pC:case hC:return-1!==["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)}}return!1}getDecryptData(e){if(!this.encrypted||!this.uri)return null;if("AES-128"===this.method&&this.uri&&!this.iv){"number"!=typeof e&&("AES-128"!==this.method||this.iv||jR.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0);const t=function(e){const t=new Uint8Array(16);for(let n=12;n<16;n++)t[n]=e>>8*(15-n)&255;return t}(e);return new uI(this.method,this.uri,"identity",this.keyFormatVersions,t)}const t=lC(this.uri);if(t)switch(this.keyFormat){case fC:this.pssh=t,t.length>=22&&(this.keyId=t.subarray(t.length-22,t.length-6));break;case pC:{const e=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=dI(e,null,t);const n=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2),i=String.fromCharCode.apply(null,Array.from(n)),r=i.substring(i.indexOf("<"),i.length),s=(new DOMParser).parseFromString(r,"text/xml").getElementsByTagName("KID")[0];if(s){const e=s.childNodes[0]?s.childNodes[0].nodeValue:s.getAttribute("VALUE");if(e){const t=oC(e).subarray(0,16);!function(e){const t=function(e,t,n){const i=e[t];e[t]=e[n],e[n]=i};t(e,0,3),t(e,1,2),t(e,4,5),t(e,6,7)}(t),this.keyId=t}}break}default:{let e=t.subarray(0,16);if(16!==e.length){const t=new Uint8Array(16);t.set(e,16-e.length),e=t}this.keyId=e;break}}if(!this.keyId||16!==this.keyId.byteLength){let e=cI[this.uri];if(!e){const t=Object.keys(cI).length%Number.MAX_SAFE_INTEGER;e=new Uint8Array(16);new DataView(e.buffer,12,4).setUint32(0,t),cI[this.uri]=e}this.keyId=e}return this}}const hI=/\{\$([a-zA-Z0-9-_]+)\}/g;function mI(e){return hI.test(e)}function pI(e,t,n){if(null!==e.variableList||e.hasVariableRefs)for(let i=n.length;i--;){const r=n[i],s=t[r];s&&(t[r]=fI(e,s))}}function fI(e,t){if(null!==e.variableList||e.hasVariableRefs){const n=e.variableList;return t.replace(hI,(t=>{const i=t.substring(2,t.length-1),r=null==n?void 0:n[i];return void 0===r?(e.playlistParsingError||(e.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${i}"`)),t):r}))}return t}function gI(e,t,n){let i,r,s=e.variableList;if(s||(e.variableList=s={}),"QUERYPARAM"in t){i=t.QUERYPARAM;try{const e=new self.URL(n).searchParams;if(!e.has(i))throw new Error(`"${i}" does not match any query parameter in URI: "${n}"`);r=e.get(i)}catch(t){e.playlistParsingError||(e.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${t.message}`))}}else i=t.NAME,r=t.VALUE;i in s?e.playlistParsingError||(e.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${i}"`)):s[i]=r||""}function vI(e,t,n){const i=t.IMPORT;if(n&&i in n){let t=e.variableList;t||(e.variableList=t={}),t[i]=n[i]}else e.playlistParsingError||(e.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${i}"`))}function bI(e=!0){if("undefined"==typeof self)return;return(e||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}const yI={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function EI(e,t,n=!0){return!e.split(",").some((e=>!TI(e,t,n)))}function TI(e,t,n=!0){var i;const r=bI(n);return null!=(i=null==r?void 0:r.isTypeSupported(_I(e,t)))&&i}function _I(e,t){return`${t}/mp4;codecs="${e}"`}function AI(e){if(e){const t=e.substring(0,4);return yI.video[t]}return 2}function SI(e){return e.split(",").reduce(((e,t)=>{const n=yI.video[t];return n?(2*n+e)/(e?3:2):(yI.audio[t]+e)/(e?2:1)}),0)}const kI={};const wI=/flac|opus/i;function LI(e,t=!0){return e.replace(wI,(e=>function(e,t=!0){if(kI[e])return kI[e];const n={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"]}[e];for(let i=0;i<n.length;i++)if(TI(n[i],"audio",t))return kI[e]=n[i],n[i];return e}(e.toLowerCase(),t)))}function RI(e,t){return e&&"mp4a"!==e?e:t?t.split(",")[0]:t}const CI=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,II=/#EXT-X-MEDIA:(.*)/g,xI=/^#EXT(?:INF|-X-TARGETDURATION):/m,DI=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),MI=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class OI{static findGroup(e,t){for(let n=0;n<e.length;n++){const i=e[n];if(i.id===t)return i}}static resolve(e,t){return xR.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return xI.test(e)}static parseMasterPlaylist(e,t){const n={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:mI(e)},i=[];let r;for(CI.lastIndex=0;null!=(r=CI.exec(e));)if(r[1]){var s;const e=new XR(r[1]);pI(n,e,["CODECS","SUPPLEMENTAL-CODECS","ALLOWED-CPC","PATHWAY-ID","STABLE-VARIANT-ID","AUDIO","VIDEO","SUBTITLES","CLOSED-CAPTIONS","NAME"]);const a=fI(n,r[2]),o={attrs:e,bitrate:e.decimalInteger("BANDWIDTH")||e.decimalInteger("AVERAGE-BANDWIDTH"),name:e.NAME,url:OI.resolve(a,t)},l=e.decimalResolution("RESOLUTION");l&&(o.width=l.width,o.height=l.height),FI(e.CODECS,o),null!=(s=o.unknownCodecs)&&s.length||i.push(o),n.levels.push(o)}else if(r[3]){const e=r[3],i=r[4];switch(e){case"SESSION-DATA":{const e=new XR(i);pI(n,e,["DATA-ID","LANGUAGE","VALUE","URI"]);const t=e["DATA-ID"];t&&(null===n.sessionData&&(n.sessionData={}),n.sessionData[t]=e);break}case"SESSION-KEY":{const e=PI(i,t,n);e.encrypted&&e.isSupported()?(null===n.sessionKeys&&(n.sessionKeys=[]),n.sessionKeys.push(e)):jR.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${i}"`);break}case"DEFINE":{const e=new XR(i);pI(n,e,["NAME","VALUE","QUERYPARAM"]),gI(n,e,t)}break;case"CONTENT-STEERING":{const e=new XR(i);pI(n,e,["SERVER-URI","PATHWAY-ID"]),n.contentSteering={uri:OI.resolve(e["SERVER-URI"],t),pathwayId:e["PATHWAY-ID"]||"."};break}case"START":n.startTimeOffset=NI(i)}}const a=i.length>0&&i.length<n.levels.length;return n.levels=a?i:n.levels,0===n.levels.length&&(n.playlistParsingError=new Error("no levels found in manifest")),n}static parseMasterPlaylistMedia(e,t,n){let i;const r={},s=n.levels,a={AUDIO:s.map((e=>({id:e.attrs.AUDIO,audioCodec:e.audioCodec}))),SUBTITLES:s.map((e=>({id:e.attrs.SUBTITLES,textCodec:e.textCodec}))),"CLOSED-CAPTIONS":[]};let o=0;for(II.lastIndex=0;null!==(i=II.exec(e));){const e=new XR(i[1]),s=e.TYPE;if(s){const i=a[s],l=r[s]||[];r[s]=l,pI(n,e,["URI","GROUP-ID","LANGUAGE","ASSOC-LANGUAGE","STABLE-RENDITION-ID","NAME","INSTREAM-ID","CHARACTERISTICS","CHANNELS"]);const d=e.LANGUAGE,c=e["ASSOC-LANGUAGE"],u=e.CHANNELS,h=e.CHARACTERISTICS,m=e["INSTREAM-ID"],p={attrs:e,bitrate:0,id:o++,groupId:e["GROUP-ID"]||"",name:e.NAME||d||"",type:s,default:e.bool("DEFAULT"),autoselect:e.bool("AUTOSELECT"),forced:e.bool("FORCED"),lang:d,url:e.URI?OI.resolve(e.URI,t):""};if(c&&(p.assocLang=c),u&&(p.channels=u),h&&(p.characteristics=h),m&&(p.instreamId=m),null!=i&&i.length){const e=OI.findGroup(i,p.groupId)||i[0];UI(p,e,"audioCodec"),UI(p,e,"textCodec")}l.push(p)}}return r}static parseLevelPlaylist(e,t,n,i,r,s){const a=new aC(t),o=a.fragments;let l,d,c,u=null,h=0,m=0,p=0,f=0,g=null,v=new rC(i,t),b=-1,y=!1,E=null;for(DI.lastIndex=0,a.m3u8=e,a.hasVariableRefs=mI(e);null!==(l=DI.exec(e));){y&&(y=!1,v=new rC(i,t),v.start=p,v.sn=h,v.cc=f,v.level=n,u&&(v.initSegment=u,v.rawProgramDateTime=u.rawProgramDateTime,u.rawProgramDateTime=null,E&&(v.setByteRange(E),E=null)));const e=l[1];if(e){v.duration=parseFloat(e);const t=(" "+l[2]).slice(1);v.title=t||null,v.tagList.push(t?["INF",e,t]:["INF",e])}else if(l[3]){if(FR(v.duration)){v.start=p,c&&HI(v,c,a),v.sn=h,v.level=n,v.cc=f,o.push(v);const e=(" "+l[3]).slice(1);v.relurl=fI(a,e),BI(v,g),g=v,p+=v.duration,h++,m=0,y=!0}}else if(l[4]){const e=(" "+l[4]).slice(1);g?v.setByteRange(e,g):v.setByteRange(e)}else if(l[5])v.rawProgramDateTime=(" "+l[5]).slice(1),v.tagList.push(["PROGRAM-DATE-TIME",v.rawProgramDateTime]),-1===b&&(b=o.length);else{if(l=l[0].match(MI),!l){jR.warn("No matches on slow regex match for level playlist!");continue}for(d=1;d<l.length&&void 0===l[d];d++);const e=(" "+l[d]).slice(1),r=(" "+l[d+1]).slice(1),p=l[d+2]?(" "+l[d+2]).slice(1):"";switch(e){case"PLAYLIST-TYPE":a.type=r.toUpperCase();break;case"MEDIA-SEQUENCE":h=a.startSN=parseInt(r);break;case"SKIP":{const e=new XR(r);pI(a,e,["RECENTLY-REMOVED-DATERANGES"]);const t=e.decimalInteger("SKIPPED-SEGMENTS");if(FR(t)){a.skippedSegments=t;for(let e=t;e--;)o.unshift(null);h+=t}const n=e.enumeratedString("RECENTLY-REMOVED-DATERANGES");n&&(a.recentlyRemovedDateranges=n.split("\t"));break}case"TARGETDURATION":a.targetduration=Math.max(parseInt(r),1);break;case"VERSION":a.version=parseInt(r);break;case"INDEPENDENT-SEGMENTS":case"EXTM3U":break;case"ENDLIST":a.live=!1;break;case"#":(r||p)&&v.tagList.push(p?[r,p]:[r]);break;case"DISCONTINUITY":f++,v.tagList.push(["DIS"]);break;case"GAP":v.gap=!0,v.tagList.push([e]);break;case"BITRATE":v.tagList.push([e,r]);break;case"DATERANGE":{const e=new XR(r);pI(a,e,["ID","CLASS","START-DATE","END-DATE","SCTE35-CMD","SCTE35-OUT","SCTE35-IN"]),pI(a,e,e.clientAttrs);const t=new ZR(e,a.dateRanges[e.ID]);t.isValid||a.skippedSegments?a.dateRanges[t.id]=t:jR.warn(`Ignoring invalid DATERANGE tag: "${r}"`),v.tagList.push(["EXT-X-DATERANGE",r]);break}case"DEFINE":{const e=new XR(r);pI(a,e,["NAME","VALUE","IMPORT","QUERYPARAM"]),"IMPORT"in e?vI(a,e,s):gI(a,e,t)}break;case"DISCONTINUITY-SEQUENCE":f=parseInt(r);break;case"KEY":{const e=PI(r,t,a);if(e.isSupported()){if("NONE"===e.method){c=void 0;break}c||(c={}),c[e.keyFormat]&&(c=NR({},c)),c[e.keyFormat]=e}else jR.warn(`[Keys] Ignoring invalid EXT-X-KEY tag: "${r}"`);break}case"START":a.startTimeOffset=NI(r);break;case"MAP":{const e=new XR(r);if(pI(a,e,["BYTERANGE","URI"]),v.duration){const r=new rC(i,t);$I(r,e,n,c),u=r,v.initSegment=u,u.rawProgramDateTime&&!v.rawProgramDateTime&&(v.rawProgramDateTime=u.rawProgramDateTime)}else{const t=v.byteRangeEndOffset;if(t){const e=v.byteRangeStartOffset;E=`${t-e}@${e}`}else E=null;$I(v,e,n,c),u=v,y=!0}break}case"SERVER-CONTROL":{const e=new XR(r);a.canBlockReload=e.bool("CAN-BLOCK-RELOAD"),a.canSkipUntil=e.optionalFloat("CAN-SKIP-UNTIL",0),a.canSkipDateRanges=a.canSkipUntil>0&&e.bool("CAN-SKIP-DATERANGES"),a.partHoldBack=e.optionalFloat("PART-HOLD-BACK",0),a.holdBack=e.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{const e=new XR(r);a.partTarget=e.decimalFloatingPoint("PART-TARGET");break}case"PART":{let e=a.partList;e||(e=a.partList=[]);const n=m>0?e[e.length-1]:void 0,i=m++,s=new XR(r);pI(a,s,["BYTERANGE","URI"]);const o=new sC(s,v,t,i,n);e.push(o),v.duration+=o.duration;break}case"PRELOAD-HINT":{const e=new XR(r);pI(a,e,["URI"]),a.preloadHint=e;break}case"RENDITION-REPORT":{const e=new XR(r);pI(a,e,["URI"]),a.renditionReports=a.renditionReports||[],a.renditionReports.push(e);break}default:jR.warn(`line parsed but not handled: ${l}`)}}}g&&!g.relurl?(o.pop(),p-=g.duration,a.partList&&(a.fragmentHint=g)):a.partList&&(BI(v,g),v.cc=f,a.fragmentHint=v,c&&HI(v,c,a));const T=o.length,_=o[0],A=o[T-1];if(p+=a.skippedSegments*a.targetduration,p>0&&T&&A){a.averagetargetduration=p/T;const e=A.sn;a.endSN="initSegment"!==e?e:0,a.live||(A.endList=!0),_&&(a.startCC=_.cc)}else a.endSN=0,a.startCC=0;return a.fragmentHint&&(p+=a.fragmentHint.duration),a.totalduration=p,a.endCC=f,b>0&&function(e,t){let n=e[t];for(let i=t;i--;){const t=e[i];if(!t)return;t.programDateTime=n.programDateTime-1e3*t.duration,n=t}}(o,b),a}}function PI(e,t,n){var i,r;const s=new XR(e);pI(n,s,["KEYFORMAT","KEYFORMATVERSIONS","URI","IV","URI"]);const a=null!=(i=s.METHOD)?i:"",o=s.URI,l=s.hexadecimalInteger("IV"),d=s.KEYFORMATVERSIONS,c=null!=(r=s.KEYFORMAT)?r:"identity";o&&s.IV&&!l&&jR.error(`Invalid IV: ${s.IV}`);const u=o?OI.resolve(o,t):"",h=(d||"1").split("/").map(Number).filter(Number.isFinite);return new uI(a,u,c,h,l)}function NI(e){const t=new XR(e).decimalFloatingPoint("TIME-OFFSET");return FR(t)?t:null}function FI(e,t){let n=(e||"").split(/[ ,]+/).filter((e=>e));["video","audio","text"].forEach((e=>{const i=n.filter((t=>function(e,t){const n=yI[t];return!!n&&!!n[e.slice(0,4)]}(t,e)));i.length&&(t[`${e}Codec`]=i.join(","),n=n.filter((e=>-1===i.indexOf(e))))})),t.unknownCodecs=n}function UI(e,t,n){const i=t[n];i&&(e[n]=i)}function BI(e,t){e.rawProgramDateTime?e.programDateTime=Date.parse(e.rawProgramDateTime):null!=t&&t.programDateTime&&(e.programDateTime=t.endProgramDateTime),FR(e.programDateTime)||(e.programDateTime=null,e.rawProgramDateTime=null)}function $I(e,t,n,i){e.relurl=t.URI,t.BYTERANGE&&e.setByteRange(t.BYTERANGE),e.level=n,e.sn="initSegment",i&&(e.levelkeys=i),e.initSegment=null}function HI(e,t,n){e.levelkeys=t;const{encryptedFragments:i}=n;i.length&&i[i.length-1].levelkeys===t||!Object.keys(t).some((e=>t[e].isCommonEncryption))||i.push(e)}var VI="manifest",WI="level",GI="audioTrack",KI="subtitleTrack",qI="main",jI="audio",YI="subtitle";function zI(e){const{type:t}=e;switch(t){case GI:return jI;case KI:return YI;default:return qI}}function XI(e,t){let n=e.url;return void 0!==n&&0!==n.indexOf("data:")||(n=t.url),n}class QI{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on($R.MANIFEST_LOADING,this.onManifestLoading,this),e.on($R.LEVEL_LOADING,this.onLevelLoading,this),e.on($R.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on($R.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}unregisterListeners(){const{hls:e}=this;e.off($R.MANIFEST_LOADING,this.onManifestLoading,this),e.off($R.LEVEL_LOADING,this.onLevelLoading,this),e.off($R.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off($R.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}createInternalLoader(e){const t=this.hls.config,n=t.pLoader,i=t.loader,r=new(n||i)(t);return this.loaders[e.type]=r,r}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,t){const{url:n}=t;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:VI,url:n,deliveryDirectives:null})}onLevelLoading(e,t){const{id:n,level:i,pathwayId:r,url:s,deliveryDirectives:a}=t;this.load({id:n,level:i,pathwayId:r,responseType:"text",type:WI,url:s,deliveryDirectives:a})}onAudioTrackLoading(e,t){const{id:n,groupId:i,url:r,deliveryDirectives:s}=t;this.load({id:n,groupId:i,level:null,responseType:"text",type:GI,url:r,deliveryDirectives:s})}onSubtitleTrackLoading(e,t){const{id:n,groupId:i,url:r,deliveryDirectives:s}=t;this.load({id:n,groupId:i,level:null,responseType:"text",type:KI,url:r,deliveryDirectives:s})}load(e){var t;const n=this.hls.config;let i,r=this.getInternalLoader(e);if(r){const t=r.context;if(t&&t.url===e.url&&t.level===e.level)return void jR.trace("[playlist-loader]: playlist request ongoing");jR.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),r.abort()}if(i=e.type===VI?n.manifestLoadPolicy.default:NR({},n.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),r=this.createInternalLoader(e),FR(null==(t=e.deliveryDirectives)?void 0:t.part)){let t;if(e.type===WI&&null!==e.level?t=this.hls.levels[e.level].details:e.type===GI&&null!==e.id?t=this.hls.audioTracks[e.id].details:e.type===KI&&null!==e.id&&(t=this.hls.subtitleTracks[e.id].details),t){const e=t.partTarget,n=t.targetduration;if(e&&n){const t=1e3*Math.max(3*e,.8*n);i=NR({},i,{maxTimeToFirstByteMs:Math.min(t,i.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(t,i.maxTimeToFirstByteMs)})}}}const s=i.errorRetry||i.timeoutRetry||{},a={loadPolicy:i,timeout:i.maxLoadTimeMs,maxRetry:s.maxNumRetry||0,retryDelay:s.retryDelayMs||0,maxRetryDelay:s.maxRetryDelayMs||0},o={onSuccess:(e,t,n,i)=>{const r=this.getInternalLoader(n);this.resetInternalLoader(n.type);const s=e.data;0===s.indexOf("#EXTM3U")?(t.parsing.start=performance.now(),OI.isMediaPlaylist(s)?this.handleTrackOrLevelPlaylist(e,t,n,i||null,r):this.handleMasterPlaylist(e,t,n,i)):this.handleManifestParsingError(e,n,new Error("no EXTM3U delimiter"),i||null,t)},onError:(e,t,n,i)=>{this.handleNetworkError(t,n,!1,e,i)},onTimeout:(e,t,n)=>{this.handleNetworkError(t,n,!0,void 0,e)}};r.load(e,a,o)}handleMasterPlaylist(e,t,n,i){const r=this.hls,s=e.data,a=XI(e,n),o=OI.parseMasterPlaylist(s,a);if(o.playlistParsingError)return void this.handleManifestParsingError(e,n,o.playlistParsingError,i,t);const{contentSteering:l,levels:d,sessionData:c,sessionKeys:u,startTimeOffset:h,variableList:m}=o;this.variableList=m;const{AUDIO:p=[],SUBTITLES:f,"CLOSED-CAPTIONS":g}=OI.parseMasterPlaylistMedia(s,a,o);if(p.length){p.some((e=>!e.url))||!d[0].audioCodec||d[0].attrs.AUDIO||(jR.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),p.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new XR({}),bitrate:0,url:""}))}r.trigger($R.MANIFEST_LOADED,{levels:d,audioTracks:p,subtitles:f,captions:g,contentSteering:l,url:a,stats:t,networkDetails:i,sessionData:c,sessionKeys:u,startTimeOffset:h,variableList:m})}handleTrackOrLevelPlaylist(e,t,n,i,r){const s=this.hls,{id:a,level:o,type:l}=n,d=XI(e,n),c=FR(o)?o:FR(a)?a:0,u=zI(n),h=OI.parseLevelPlaylist(e.data,d,c,u,0,this.variableList);if(l===VI){const e={attrs:new XR({}),bitrate:0,details:h,name:"",url:d};s.trigger($R.MANIFEST_LOADED,{levels:[e],audioTracks:[],url:d,stats:t,networkDetails:i,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}t.parsing.end=performance.now(),n.levelDetails=h,this.handlePlaylistLoaded(h,e,t,n,i,r)}handleManifestParsingError(e,t,n,i,r){this.hls.trigger($R.ERROR,{type:HR.NETWORK_ERROR,details:VR.MANIFEST_PARSING_ERROR,fatal:t.type===VI,url:e.url,err:n,error:n,reason:n.message,response:e,context:t,networkDetails:i,stats:r})}handleNetworkError(e,t,n=!1,i,r){let s=`A network ${n?"timeout":"error"+(i?" (status "+i.code+")":"")} occurred while loading ${e.type}`;e.type===WI?s+=`: ${e.level} id: ${e.id}`:e.type!==GI&&e.type!==KI||(s+=` id: ${e.id} group-id: "${e.groupId}"`);const a=new Error(s);jR.warn(`[playlist-loader]: ${s}`);let o=VR.UNKNOWN,l=!1;const d=this.getInternalLoader(e);switch(e.type){case VI:o=n?VR.MANIFEST_LOAD_TIMEOUT:VR.MANIFEST_LOAD_ERROR,l=!0;break;case WI:o=n?VR.LEVEL_LOAD_TIMEOUT:VR.LEVEL_LOAD_ERROR,l=!1;break;case GI:o=n?VR.AUDIO_TRACK_LOAD_TIMEOUT:VR.AUDIO_TRACK_LOAD_ERROR,l=!1;break;case KI:o=n?VR.SUBTITLE_TRACK_LOAD_TIMEOUT:VR.SUBTITLE_LOAD_ERROR,l=!1}d&&this.resetInternalLoader(e.type);const c={type:HR.NETWORK_ERROR,details:o,fatal:l,url:e.url,loader:d,context:e,error:a,networkDetails:t,stats:r};if(i){const n=(null==t?void 0:t.url)||e.url;c.response=MR({url:n,data:void 0},i)}this.hls.trigger($R.ERROR,c)}handlePlaylistLoaded(e,t,n,i,r,s){const a=this.hls,{type:o,level:l,id:d,groupId:c,deliveryDirectives:u}=i,h=XI(t,i),m=zI(i),p="number"==typeof i.level&&m===qI?l:void 0;if(!e.fragments.length){const e=new Error("No Segments found in Playlist");return void a.trigger($R.ERROR,{type:HR.NETWORK_ERROR,details:VR.LEVEL_EMPTY_ERROR,fatal:!1,url:h,error:e,reason:e.message,response:t,context:i,level:p,parent:m,networkDetails:r,stats:n})}e.targetduration||(e.playlistParsingError=new Error("Missing Target Duration"));const f=e.playlistParsingError;if(f)a.trigger($R.ERROR,{type:HR.NETWORK_ERROR,details:VR.LEVEL_PARSING_ERROR,fatal:!1,url:h,error:f,reason:f.message,response:t,context:i,level:p,parent:m,networkDetails:r,stats:n});else switch(e.live&&s&&(s.getCacheAge&&(e.ageHeader=s.getCacheAge()||0),s.getCacheAge&&!isNaN(e.ageHeader)||(e.ageHeader=0)),o){case VI:case WI:a.trigger($R.LEVEL_LOADED,{details:e,level:p||0,id:d||0,stats:n,networkDetails:r,deliveryDirectives:u});break;case GI:a.trigger($R.AUDIO_TRACK_LOADED,{details:e,id:d||0,groupId:c||"",stats:n,networkDetails:r,deliveryDirectives:u});break;case KI:a.trigger($R.SUBTITLE_TRACK_LOADED,{details:e,id:d||0,groupId:c||"",stats:n,networkDetails:r,deliveryDirectives:u})}}}function ZI(e,t){let n;try{n=new Event("addtrack")}catch(e){n=document.createEvent("Event"),n.initEvent("addtrack",!1,!1)}n.track=e,t.dispatchEvent(n)}function JI(e,t){const n=e.mode;if("disabled"===n&&(e.mode="hidden"),e.cues&&!e.cues.getCueById(t.id))try{if(e.addCue(t),!e.cues.getCueById(t.id))throw new Error(`addCue is failed for: ${t}`)}catch(n){jR.debug(`[texttrack-utils]: ${n}`);try{const n=new self.TextTrackCue(t.startTime,t.endTime,t.text);n.id=t.id,e.addCue(n)}catch(e){jR.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${e}`)}}"disabled"===n&&(e.mode=n)}function ex(e){const t=e.mode;if("disabled"===t&&(e.mode="hidden"),e.cues)for(let t=e.cues.length;t--;)e.removeCue(e.cues[t]);"disabled"===t&&(e.mode=t)}function tx(e,t,n,i){const r=e.mode;if("disabled"===r&&(e.mode="hidden"),e.cues&&e.cues.length>0){const r=function(e,t,n){const i=[],r=function(e,t){if(t<e[0].startTime)return 0;const n=e.length-1;if(t>e[n].endTime)return-1;let i=0,r=n;for(;i<=r;){const s=Math.floor((r+i)/2);if(t<e[s].startTime)r=s-1;else{if(!(t>e[s].startTime&&i<n))return s;i=s+1}}return e[i].startTime-t<t-e[r].startTime?i:r}(e,t);if(r>-1)for(let s=r,a=e.length;s<a;s++){const r=e[s];if(r.startTime>=t&&r.endTime<=n)i.push(r);else if(r.startTime>n)return i}return i}(e.cues,t,n);for(let t=0;t<r.length;t++)i&&!i(r[t])||e.removeCue(r[t])}"disabled"===r&&(e.mode=r)}function nx(e){const t=[];for(let n=0;n<e.length;n++){const i=e[n];"subtitles"!==i.kind&&"captions"!==i.kind||!i.label||t.push(e[n])}return t}var ix="org.id3",rx="com.apple.quicktime.HLS",sx="https://aomedia.org/emsg/ID3";function ax(){if("undefined"!=typeof self)return self.VTTCue||self.TextTrackCue}function ox(e,t,n,i,r){let s=new e(t,n,"");try{s.value=i,r&&(s.type=r)}catch(a){s=new e(t,n,JSON.stringify(r?MR({type:r},i):i))}return s}const lx=(()=>{const e=ax();try{e&&new e(0,Number.POSITIVE_INFINITY,"")}catch(e){return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();function dx(e,t){return e.getTime()/1e3-t}class cx{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null}_registerListeners(){const{hls:e}=this;e.on($R.MEDIA_ATTACHED,this.onMediaAttached,this),e.on($R.MEDIA_DETACHING,this.onMediaDetaching,this),e.on($R.MANIFEST_LOADING,this.onManifestLoading,this),e.on($R.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on($R.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on($R.LEVEL_UPDATED,this.onLevelUpdated,this)}_unregisterListeners(){const{hls:e}=this;e.off($R.MEDIA_ATTACHED,this.onMediaAttached,this),e.off($R.MEDIA_DETACHING,this.onMediaDetaching,this),e.off($R.MANIFEST_LOADING,this.onManifestLoading,this),e.off($R.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off($R.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off($R.LEVEL_UPDATED,this.onLevelUpdated,this)}onMediaAttached(e,t){this.media=t.media}onMediaDetaching(){this.id3Track&&(ex(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const t=this.getID3Track(e.textTracks);return t.mode="hidden",t}getID3Track(e){if(this.media){for(let t=0;t<e.length;t++){const n=e[t];if("metadata"===n.kind&&"id3"===n.label)return ZI(n,this.media),n}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,t){if(!this.media)return;const{hls:{config:{enableEmsgMetadataCues:n,enableID3MetadataCues:i}}}=this;if(!n&&!i)return;const{samples:r}=t;this.id3Track||(this.id3Track=this.createTrack(this.media));const s=ax();if(s)for(let e=0;e<r.length;e++){const t=r[e].type;if(t===sx&&!n||!i)continue;const a=xC(r[e].data);if(a){const n=r[e].pts;let i=n+r[e].duration;i>lx&&(i=lx);i-n<=0&&(i=n+.25);for(let e=0;e<a.length;e++){const r=a[e];if(!CC(r)){this.updateId3CueEnds(n,t);const e=ox(s,n,i,r,t);e&&this.id3Track.addCue(e)}}}}}updateId3CueEnds(e,t){var n;const i=null==(n=this.id3Track)?void 0:n.cues;if(i)for(let n=i.length;n--;){const r=i[n];r.type===t&&r.startTime<e&&r.endTime===lx&&(r.endTime=e)}}onBufferFlushing(e,{startOffset:t,endOffset:n,type:i}){const{id3Track:r,hls:s}=this;if(!s)return;const{config:{enableEmsgMetadataCues:a,enableID3MetadataCues:o}}=s;if(r&&(a||o)){let e;e="audio"===i?e=>e.type===ix&&o:"video"===i?e=>e.type===sx&&a:e=>e.type===ix&&o||e.type===sx&&a,tx(r,t,n,e)}}onLevelUpdated(e,{details:t}){if(!this.media||!t.hasProgramDateTime||!this.hls.config.enableDateRangeMetadataCues)return;const{dateRangeCuesAppended:n,id3Track:i}=this,{dateRanges:r}=t,s=Object.keys(r);if(i){const e=Object.keys(n).filter((e=>!s.includes(e)));for(let t=e.length;t--;){const r=e[t];Object.keys(n[r].cues).forEach((e=>{i.removeCue(n[r].cues[e])})),delete n[r]}}const a=t.fragments[t.fragments.length-1];if(0===s.length||!FR(null==a?void 0:a.programDateTime))return;this.id3Track||(this.id3Track=this.createTrack(this.media));const o=a.programDateTime/1e3-a.start,l=ax();for(let e=0;e<s.length;e++){const t=s[e],i=r[t],a=dx(i.startDate,o),u=n[t],h=(null==u?void 0:u.cues)||{};let m=(null==u?void 0:u.durationKnown)||!1,p=lx;const f=i.endDate;if(f)p=dx(f,o),m=!0;else if(i.endOnNext&&!m){const e=s.reduce(((e,t)=>{if(t!==i.id){const n=r[t];if(n.class===i.class&&n.startDate>i.startDate&&(!e||i.startDate<e.startDate))return n}return e}),null);e&&(p=dx(e.startDate,o),m=!0)}const g=Object.keys(i.attr);for(let e=0;e<g.length;e++){const n=g[e];if("ID"===(c=n)||"CLASS"===c||"START-DATE"===c||"DURATION"===c||"END-DATE"===c||"END-ON-NEXT"===c)continue;const r=h[n];if(r)m&&!u.durationKnown&&(r.endTime=p);else if(l){let e=i.attr[n];QR(n)&&(d=e,e=Uint8Array.from(d.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer);const r=ox(l,a,p,{key:n,data:e},rx);r&&(r.id=t,this.id3Track.addCue(r),h[n]=r)}}n[t]={cues:h,dateRange:i,durationKnown:m}}var d,c}}class ux{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=()=>this.timeupdate(),this.hls=e,this.config=e.config,this.registerListeners()}get latency(){return this._latency||0}get maxLatency(){const{config:e,levelDetails:t}=this;return void 0!==e.liveMaxLatencyDuration?e.liveMaxLatencyDuration:t?e.liveMaxLatencyDurationCount*t.targetduration:0}get targetLatency(){const{levelDetails:e}=this;if(null===e)return null;const{holdBack:t,partHoldBack:n,targetduration:i}=e,{liveSyncDuration:r,liveSyncDurationCount:s,lowLatencyMode:a}=this.config,o=this.hls.userConfig;let l=a&&n||t;(o.liveSyncDuration||o.liveSyncDurationCount||0===l)&&(l=void 0!==r?r:s*i);const d=i;return l+Math.min(1*this.stallCount,d)}get liveSyncPosition(){const e=this.estimateLiveEdge(),t=this.targetLatency,n=this.levelDetails;if(null===e||null===t||null===n)return null;const i=n.edge,r=e-t-this.edgeStalled,s=i-n.totalduration,a=i-(this.config.lowLatencyMode&&n.partTarget||n.targetduration);return Math.min(Math.max(s,r),a)}get drift(){const{levelDetails:e}=this;return null===e?1:e.drift}get edgeStalled(){const{levelDetails:e}=this;if(null===e)return 0;const t=3*(this.config.lowLatencyMode&&e.partTarget||e.targetduration);return Math.max(e.age-t,0)}get forwardBufferLength(){const{media:e,levelDetails:t}=this;if(!e||!t)return 0;const n=e.buffered.length;return(n?e.buffered.end(n-1):t.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null}registerListeners(){this.hls.on($R.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on($R.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on($R.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on($R.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on($R.ERROR,this.onError,this)}unregisterListeners(){this.hls.off($R.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off($R.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.off($R.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off($R.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.off($R.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)}onManifestLoading(){this.levelDetails=null,this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:t}){this.levelDetails=t,t.advanced&&this.timeupdate(),!t.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)}onError(e,t){var n;t.details===VR.BUFFER_STALLED_ERROR&&(this.stallCount++,null!=(n=this.levelDetails)&&n.live&&jR.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))}timeupdate(){const{media:e,levelDetails:t}=this;if(!e||!t)return;this.currentTime=e.currentTime;const n=this.computeLatency();if(null===n)return;this._latency=n;const{lowLatencyMode:i,maxLiveSyncPlaybackRate:r}=this.config;if(!i||1===r||!t.live)return;const s=this.targetLatency;if(null===s)return;const a=n-s;if(a<Math.min(this.maxLatency,s+t.targetduration)&&a>.05&&this.forwardBufferLength>1){const t=Math.min(2,Math.max(1,r)),n=Math.round(2/(1+Math.exp(-.75*a-this.edgeStalled))*20)/20;e.playbackRate=Math.min(t,Math.max(1,n))}else 1!==e.playbackRate&&0!==e.playbackRate&&(e.playbackRate=1)}estimateLiveEdge(){const{levelDetails:e}=this;return null===e?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return null===e?null:e-this.currentTime}}const hx=["NONE","TYPE-0","TYPE-1",null];const mx=["SDR","PQ","HLG"];var px="",fx="YES",gx="v2";function vx(e){const{canSkipUntil:t,canSkipDateRanges:n,age:i}=e;return t&&i<t/2?n?gx:fx:px}class bx{constructor(e,t,n){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=n}addDirectives(e){const t=new self.URL(e);return void 0!==this.msn&&t.searchParams.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href}}class yx{constructor(e){this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter((e=>!!e)).map((e=>e.substring(0,4))).join(","),this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return Ex(this._audioGroups,e)}hasSubtitleGroup(e){return Ex(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,t){if(t)if("audio"===e){let e=this._audioGroups;e||(e=this._audioGroups=[]),-1===e.indexOf(t)&&e.push(t)}else if("text"===e){let e=this._subtitleGroups;e||(e=this._subtitleGroups=[]),-1===e.indexOf(t)&&e.push(t)}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return null==(e=this.audioGroups)?void 0:e[0]}get textGroupId(){var e;return null==(e=this.subtitleGroups)?void 0:e[0]}addFallback(){}}function Ex(e,t){return!(!t||!e)&&-1!==e.indexOf(t)}function Tx(e,t){const n=t.startPTS;if(FR(n)){let i,r=0;t.sn>e.sn?(r=n-e.start,i=e):(r=e.start-n,i=t),i.duration!==r&&(i.duration=r)}else if(t.sn>e.sn){e.cc===t.cc&&e.minEndPTS?t.start=e.start+(e.minEndPTS-e.start):t.start=e.start+e.duration}else t.start=Math.max(e.start-t.duration,0)}function _x(e,t,n,i,r,s){i-n<=0&&(jR.warn("Fragment should have a positive duration",t),i=n+t.duration,s=r+t.duration);let a=n,o=i;const l=t.startPTS,d=t.endPTS;if(FR(l)){const e=Math.abs(l-n);FR(t.deltaPTS)?t.deltaPTS=Math.max(e,t.deltaPTS):t.deltaPTS=e,a=Math.max(n,l),n=Math.min(n,l),r=Math.min(r,t.startDTS),o=Math.min(i,d),i=Math.max(i,d),s=Math.max(s,t.endDTS)}const c=n-t.start;0!==t.start&&(t.start=n),t.duration=i-t.start,t.startPTS=n,t.maxStartPTS=a,t.startDTS=r,t.endPTS=i,t.minEndPTS=o,t.endDTS=s;const u=t.sn;if(!e||u<e.startSN||u>e.endSN)return 0;let h;const m=u-e.startSN,p=e.fragments;for(p[m]=t,h=m;h>0;h--)Tx(p[h],p[h-1]);for(h=m;h<p.length-1;h++)Tx(p[h],p[h+1]);return e.fragmentHint&&Tx(p[p.length-1],e.fragmentHint),e.PTSKnown=e.alignedSliding=!0,c}function Ax(e,t){let n=null;const i=e.fragments;for(let e=i.length-1;e>=0;e--){const t=i[e].initSegment;if(t){n=t;break}}e.fragmentHint&&delete e.fragmentHint.endPTS;let r,s=0;if(function(e,t,n){const i=t.skippedSegments,r=Math.max(e.startSN,t.startSN)-t.startSN,s=(e.fragmentHint?1:0)+(i?t.endSN:Math.min(e.endSN,t.endSN))-t.startSN,a=t.startSN-e.startSN,o=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments,l=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments;for(let e=r;e<=s;e++){const r=l[a+e];let s=o[e];i&&!s&&e<i&&(s=t.fragments[e]=r),r&&s&&n(r,s)}}(e,t,((e,i)=>{e.relurl&&(s=e.cc-i.cc),FR(e.startPTS)&&FR(e.endPTS)&&(i.start=i.startPTS=e.startPTS,i.startDTS=e.startDTS,i.maxStartPTS=e.maxStartPTS,i.endPTS=e.endPTS,i.endDTS=e.endDTS,i.minEndPTS=e.minEndPTS,i.duration=e.endPTS-e.startPTS,i.duration&&(r=i),t.PTSKnown=t.alignedSliding=!0),i.elementaryStreams=e.elementaryStreams,i.loader=e.loader,i.stats=e.stats,e.initSegment&&(i.initSegment=e.initSegment,n=e.initSegment)})),n){(t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments).forEach((e=>{var t;!e||e.initSegment&&e.initSegment.relurl!==(null==(t=n)?void 0:t.relurl)||(e.initSegment=n)}))}if(t.skippedSegments)if(t.deltaUpdateFailed=t.fragments.some((e=>!e)),t.deltaUpdateFailed){jR.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let e=t.skippedSegments;e--;)t.fragments.shift();t.startSN=t.fragments[0].sn,t.startCC=t.fragments[0].cc}else t.canSkipDateRanges&&(t.dateRanges=function(e,t,n){const i=NR({},e);n&&n.forEach((e=>{delete i[e]}));return Object.keys(t).forEach((e=>{const n=new ZR(t[e].attr,i[e]);n.isValid?i[e]=n:jR.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${JSON.stringify(t[e].attr)}"`)})),i}(e.dateRanges,t.dateRanges,t.recentlyRemovedDateranges));const a=t.fragments;if(s){jR.warn("discontinuity sliding from playlist, take drift into account");for(let e=0;e<a.length;e++)a[e].cc+=s}t.skippedSegments&&(t.startCC=t.fragments[0].cc),function(e,t,n){if(e&&t){let i=0;for(let r=0,s=e.length;r<=s;r++){const s=e[r],a=t[r+i];s&&a&&s.index===a.index&&s.fragment.sn===a.fragment.sn?n(s,a):i--}}}(e.partList,t.partList,((e,t)=>{t.elementaryStreams=e.elementaryStreams,t.stats=e.stats})),r?_x(t,r,r.startPTS,r.endPTS,r.startDTS,r.endDTS):Sx(e,t),a.length&&(t.totalduration=t.edge-a[0].start),t.driftStartTime=e.driftStartTime,t.driftStart=e.driftStart;const o=t.advancedDateTime;if(t.advanced&&o){const e=t.edge;t.driftStart||(t.driftStartTime=o,t.driftStart=e),t.driftEndTime=o,t.driftEnd=e}else t.driftEndTime=e.driftEndTime,t.driftEnd=e.driftEnd,t.advancedDateTime=e.advancedDateTime}function Sx(e,t){const n=t.startSN+t.skippedSegments-e.startSN,i=e.fragments;n<0||n>=i.length||kx(t,i[n].start)}function kx(e,t){if(t){const n=e.fragments;for(let i=e.skippedSegments;i<n.length;i++)n[i].start+=t;e.fragmentHint&&(e.fragmentHint.start+=t)}}function wx(e,t,n){var i;return null!=e&&e.details?Lx(null==(i=e.details)?void 0:i.partList,t,n):null}function Lx(e,t,n){if(e)for(let i=e.length;i--;){const r=e[i];if(r.index===n&&r.fragment.sn===t)return r}return null}function Rx(e){e.forEach(((e,t)=>{const{details:n}=e;null!=n&&n.fragments&&n.fragments.forEach((e=>{e.level=t}))}))}function Cx(e){switch(e.details){case VR.FRAG_LOAD_TIMEOUT:case VR.KEY_LOAD_TIMEOUT:case VR.LEVEL_LOAD_TIMEOUT:case VR.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function Ix(e,t){const n=Cx(t);return e.default[(n?"timeout":"error")+"Retry"]}function xx(e,t){const n="linear"===e.backoff?1:Math.pow(2,t);return Math.min(n*e.retryDelayMs,e.maxRetryDelayMs)}function Dx(e){return MR(MR({},e),{errorRetry:null,timeoutRetry:null})}function Mx(e,t,n,i){if(!e)return!1;const r=null==i?void 0:i.code,s=t<e.maxNumRetry&&(function(e){return 0===e&&!1===navigator.onLine||!!e&&(e<400||e>499)}(r)||!!n);return e.shouldRetry?e.shouldRetry(e,t,n,i,s):s}const Ox=function(e,t){let n=0,i=e.length-1,r=null,s=null;for(;n<=i;){r=(n+i)/2|0,s=e[r];const a=t(s);if(a>0)n=r+1;else{if(!(a<0))return s;i=r-1}}return null};function Px(e,t,n=0,i=0){let r=null;if(e){r=t[e.sn-t[0].sn+1]||null;const i=e.endDTS-n;i>0&&i<15e-7&&(n+=15e-7)}else 0===n&&0===t[0].start&&(r=t[0]);if(r&&(!e||e.level===r.level)&&0===Nx(n,i,r))return r;const s=Ox(t,Nx.bind(null,n,i));return!s||s===e&&r?r:s}function Nx(e=0,t=0,n){if(n.start<=e&&n.start+n.duration>e)return 0;const i=Math.min(t,n.duration+(n.deltaPTS?n.deltaPTS:0));return n.start+n.duration-i<=e?1:n.start-i>e&&n.start?-1:0}function Fx(e,t,n){const i=1e3*Math.min(t,n.duration+(n.deltaPTS?n.deltaPTS:0));return(n.endProgramDateTime||0)-i>e}var Ux=0,Bx=2,$x=3,Hx=5,Vx=0,Wx=1,Gx=2;class Kx{constructor(e,t){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.log=void 0,this.warn=void 0,this.log=jR.log.bind(jR,`${t}:`),this.warn=jR.warn.bind(jR,`${t}:`),this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){-1!==this.timer&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.requestScheduled=-1,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,t,n){const i=null==t?void 0:t.renditionReports;if(i){let r=-1;for(let n=0;n<i.length;n++){const s=i[n];let a;try{a=new self.URL(s.URI,t.url).href}catch(e){jR.warn(`Could not construct new URL for Rendition Report: ${e}`),a=s.URI||""}if(a===e){r=n;break}a===e.substring(0,a.length)&&(r=n)}if(-1!==r){const e=i[r],s=parseInt(e["LAST-MSN"])||(null==t?void 0:t.lastPartSn);let a=parseInt(e["LAST-PART"])||(null==t?void 0:t.lastPartIndex);if(this.hls.config.lowLatencyMode){const e=Math.min(t.age-t.partTarget,t.targetduration);a>=0&&e>t.partTarget&&(a+=1)}const o=n&&vx(n);return new bx(s,a>=0?a:void 0,o)}}}loadPlaylist(e){-1===this.requestScheduled&&(this.requestScheduled=self.performance.now())}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}shouldReloadPlaylist(e){return-1===this.timer&&-1===this.requestScheduled&&this.shouldLoadPlaylist(e)}playlistLoaded(e,t,n){const{details:i,stats:r}=t,s=self.performance.now(),a=r.loading.first?Math.max(0,s-r.loading.first):0;if(i.advancedDateTime=Date.now()-a,i.live||null!=n&&n.live){if(i.reloaded(n),n&&this.log(`live playlist ${e} ${i.advanced?"REFRESHED "+i.lastPartSn+"-"+i.lastPartIndex:i.updated?"UPDATED":"MISSED"}`),n&&i.fragments.length>0&&Ax(n,i),!this.canLoad||!i.live)return;let a,o,l;if(i.canBlockReload&&i.endSN&&i.advanced){const e=this.hls.config.lowLatencyMode,r=i.lastPartSn,s=i.endSN,d=i.lastPartIndex,c=r===s;-1!==d?(o=c?s+1:r,l=c?e?0:d:d+1):o=s+1;const u=i.age,h=u+i.ageHeader;let m=Math.min(h-i.partTarget,1.5*i.targetduration);if(m>0){if(n&&m>n.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${n.tuneInGoal} to: ${m} with playlist age: ${i.age}`),m=0;else{const e=Math.floor(m/i.targetduration);if(o+=e,void 0!==l){l+=Math.round(m%i.targetduration/i.partTarget)}this.log(`CDN Tune-in age: ${i.ageHeader}s last advanced ${u.toFixed(2)}s goal: ${m} skip sn ${e} to part ${l}`)}i.tuneInGoal=m}if(a=this.getDeliveryDirectives(i,t.deliveryDirectives,o,l),e||!c)return void this.loadPlaylist(a)}else(i.canBlockReload||i.canSkipUntil)&&(a=this.getDeliveryDirectives(i,t.deliveryDirectives,o,l));const d=this.hls.mainForwardBufferInfo,c=d?d.end-d.len:0,u=function(e,t=1/0){let n=1e3*e.targetduration;if(e.updated){const i=e.fragments,r=4;if(i.length&&n*r>t){const e=1e3*i[i.length-1].duration;e<n&&(n=e)}}else n/=2;return Math.round(n)}(i,1e3*(i.edge-c));i.updated&&s>this.requestScheduled+u&&(this.requestScheduled=r.loading.start),void 0!==o&&i.canBlockReload?this.requestScheduled=r.loading.first+u-(1e3*i.partTarget||1e3):-1===this.requestScheduled||this.requestScheduled+u<s?this.requestScheduled=s:this.requestScheduled-s<=0&&(this.requestScheduled+=u);let h=this.requestScheduled-s;h=Math.max(0,h),this.log(`reload live playlist ${e} in ${Math.round(h)} ms`),this.timer=self.setTimeout((()=>this.loadPlaylist(a)),h)}else this.clearTimer()}getDeliveryDirectives(e,t,n,i){let r=vx(e);return null!=t&&t.skip&&e.deltaUpdateFailed&&(n=t.msn,i=t.part,r=px),new bx(n,i,r)}checkRetry(e){const t=e.details,n=Cx(e),i=e.errorAction,{action:r,retryCount:s=0,retryConfig:a}=i||{},o=!!i&&!!a&&(r===Hx||!i.resolved&&r===Bx);if(o){var l;if(this.requestScheduled=-1,s>=a.maxNumRetry)return!1;if(n&&null!=(l=e.context)&&l.deliveryDirectives)this.warn(`Retrying playlist loading ${s+1}/${a.maxNumRetry} after "${t}" without delivery-directives`),this.loadPlaylist();else{const e=xx(a,s);this.timer=self.setTimeout((()=>this.loadPlaylist()),e),this.warn(`Retrying playlist loading ${s+1}/${a.maxNumRetry} after "${t}" in ${e}ms`)}e.levelRetry=!0,i.resolved=!0}return o}}class qx{constructor(e,t=0,n=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=n}sample(e,t){const n=Math.pow(this.alpha_,e);this.estimate_=t*(1-n)+n*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class jx{constructor(e,t,n,i=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new qx(e),this.fast_=new qx(t),this.defaultTTFB_=i,this.ttfb_=new qx(e)}update(e,t){const{slow_:n,fast_:i,ttfb_:r}=this;n.halfLife!==e&&(this.slow_=new qx(e,n.getEstimate(),n.getTotalWeight())),i.halfLife!==t&&(this.fast_=new qx(t,i.getEstimate(),i.getTotalWeight())),r.halfLife!==e&&(this.ttfb_=new qx(e,r.getEstimate(),r.getTotalWeight()))}sample(e,t){const n=(e=Math.max(e,this.minDelayMs_))/1e3,i=8*t/n;this.fast_.sample(n,i),this.slow_.sample(n,i)}sampleTTFB(e){const t=e/1e3,n=Math.sqrt(2)*Math.exp(-Math.pow(t,2)/2);this.ttfb_.sample(n,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}destroy(){}}const Yx={supported:!0,configurations:[],decodingInfoResults:[{supported:!0,powerEfficient:!0,smooth:!0}]},zx={};function Xx(e,t,n,i,r,s){const a=e.audioCodec?e.audioGroups:null,o=null==s?void 0:s.audioCodec,l=null==s?void 0:s.channels,d=l?parseInt(l):o?1/0:2;let c=null;if(null!=a&&a.length)try{c=1===a.length&&a[0]?t.groups[a[0]].channels:a.reduce(((e,n)=>{if(n){const i=t.groups[n];if(!i)throw new Error(`Audio track group ${n} not found`);Object.keys(i.channels).forEach((t=>{e[t]=(e[t]||0)+i.channels[t]}))}return e}),{2:0})}catch(e){return!0}return void 0!==e.videoCodec&&(e.width>1920&&e.height>1088||e.height>1920&&e.width>1088||e.frameRate>Math.max(i,30)||"SDR"!==e.videoRange&&e.videoRange!==n||e.bitrate>Math.max(r,8e6))||!!c&&FR(d)&&Object.keys(c).some((e=>parseInt(e)>d))}function Qx(e,t,n){const i=e.videoCodec,r=e.audioCodec;if(!i||!r||!n)return Promise.resolve(Yx);const s={width:e.width,height:e.height,bitrate:Math.ceil(Math.max(.9*e.bitrate,e.averageBitrate)),framerate:e.frameRate||30},a=e.videoRange;"SDR"!==a&&(s.transferFunction=a.toLowerCase());const o=i.split(",").map((e=>({type:"media-source",video:MR(MR({},s),{},{contentType:_I(e,"video")})})));return r&&e.audioGroups&&e.audioGroups.forEach((e=>{var n;e&&(null==(n=t.groups[e])||n.tracks.forEach((t=>{if(t.groupId===e){const e=t.channels||"",n=parseFloat(e);FR(n)&&n>2&&o.push.apply(o,r.split(",").map((e=>({type:"media-source",audio:{contentType:_I(e,"audio"),channels:""+n}}))))}})))})),Promise.all(o.map((e=>{const t=function(e){const{audio:t,video:n}=e,i=n||t;if(i){const e=i.contentType.split('"')[1];if(n)return`r${n.height}x${n.width}f${Math.ceil(n.framerate)}${n.transferFunction||"sd"}_${e}_${Math.ceil(n.bitrate/1e5)}`;if(t)return`c${t.channels}${t.spatialRendering?"s":"n"}_${e}`}return""}(e);return zx[t]||(zx[t]=n.decodingInfo(e))}))).then((e=>({supported:!e.some((e=>!e.supported)),configurations:o,decodingInfoResults:e}))).catch((e=>({supported:!1,configurations:o,decodingInfoResults:[],error:e})))}function Zx(e,t){let n=!1,i=[];return e&&(n="SDR"!==e,i=[e]),t&&(i=t.allowedVideoRanges||mx.slice(0),n=void 0!==t.preferHDR?t.preferHDR:function(){if("function"==typeof matchMedia){const e=matchMedia("(dynamic-range: high)"),t=matchMedia("bad query");if(e.media!==t.media)return!0===e.matches}return!1}(),i=n?i.filter((e=>"SDR"!==e)):["SDR"]),{preferHDR:n,allowedVideoRanges:i}}function Jx(e,t){jR.log(`[abr] start candidates with "${e}" ignored because ${t}`)}function eD(e,t,n){if("attrs"in e){const n=t.indexOf(e);if(-1!==n)return n}for(let i=0;i<t.length;i++){if(tD(e,t[i],n))return i}return-1}function tD(e,t,n){const{groupId:i,name:r,lang:s,assocLang:a,characteristics:o,default:l}=e,d=e.forced;return(void 0===i||t.groupId===i)&&(void 0===r||t.name===r)&&(void 0===s||t.lang===s)&&(void 0===s||t.assocLang===a)&&(void 0===l||t.default===l)&&(void 0===d||t.forced===d)&&(void 0===o||function(e,t=""){const n=e.split(","),i=t.split(",");return n.length===i.length&&!n.some((e=>-1===i.indexOf(e)))}(o,t.characteristics))&&(void 0===n||n(e,t))}function nD(e,t){const{audioCodec:n,channels:i}=e;return!(void 0!==n&&(t.audioCodec||"").substring(0,4)!==n.substring(0,4)||void 0!==i&&i!==(t.channels||"2"))}function iD(e,t,n){for(let i=t;i;i--)if(n(e[i]))return i;for(let i=t+1;i<e.length;i++)if(n(e[i]))return i;return-1}class rD{constructor(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return!this._tickInterval&&(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)}clearNextTick(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)}tick(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}var sD="NOT_LOADED",aD="APPENDING",oD="PARTIAL",lD="OK";class dD{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on($R.BUFFER_APPENDED,this.onBufferAppended,this),e.on($R.FRAG_BUFFERED,this.onFragBuffered,this),e.on($R.FRAG_LOADED,this.onFragLoaded,this)}_unregisterListeners(){const{hls:e}=this;e.off($R.BUFFER_APPENDED,this.onBufferAppended,this),e.off($R.FRAG_BUFFERED,this.onFragBuffered,this),e.off($R.FRAG_LOADED,this.onFragLoaded,this)}destroy(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,t){const n=this.activePartLists[t];if(n)for(let t=n.length;t--;){const i=n[t];if(!i)break;const r=i.end;if(i.start<=e&&null!==r&&e<=r)return i}return this.getBufferedFrag(e,t)}getBufferedFrag(e,t){const{fragments:n}=this,i=Object.keys(n);for(let r=i.length;r--;){const s=n[i[r]];if((null==s?void 0:s.body.type)===t&&s.buffered){const t=s.body;if(t.start<=e&&e<=t.end)return t}}return null}detectEvictedFragments(e,t,n,i){this.timeRanges&&(this.timeRanges[e]=t);const r=(null==i?void 0:i.fragment.sn)||-1;Object.keys(this.fragments).forEach((i=>{const s=this.fragments[i];if(!s)return;if(r>=s.body.sn)return;if(!s.buffered&&!s.loaded)return void(s.body.type===n&&this.removeFragment(s.body));const a=s.range[e];a&&a.time.some((e=>{const n=!this.isTimeBuffered(e.startPTS,e.endPTS,t);return n&&this.removeFragment(s.body),n}))}))}detectPartialFragments(e){const t=this.timeRanges,{frag:n,part:i}=e;if(!t||"initSegment"===n.sn)return;const r=uD(n),s=this.fragments[r];if(!s||s.buffered&&n.gap)return;const a=!n.relurl;if(Object.keys(t).forEach((e=>{const r=n.elementaryStreams[e];if(!r)return;const o=t[e],l=a||!0===r.partial;s.range[e]=this.getBufferedTimes(n,i,l,o)})),s.loaded=null,Object.keys(s.range).length){s.buffered=!0;(s.body.endList=n.endList||s.body.endList)&&(this.endListFragments[s.body.type]=s),cD(s)||this.removeParts(n.sn-1,n.type)}else this.removeFragment(s.body)}removeParts(e,t){const n=this.activePartLists[t];n&&(this.activePartLists[t]=n.filter((t=>t.fragment.sn>=e)))}fragBuffered(e,t){const n=uD(e);let i=this.fragments[n];!i&&t&&(i=this.fragments[n]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),i&&(i.loaded=null,i.buffered=!0)}getBufferedTimes(e,t,n,i){const r={time:[],partial:n},s=e.start,a=e.end,o=e.minEndPTS||a,l=e.maxStartPTS||s;for(let e=0;e<i.length;e++){const t=i.start(e)-this.bufferPadding,n=i.end(e)+this.bufferPadding;if(l>=t&&o<=n){r.time.push({startPTS:Math.max(s,i.start(e)),endPTS:Math.min(a,i.end(e))});break}if(s<n&&a>t){const t=Math.max(s,i.start(e)),n=Math.min(a,i.end(e));n>t&&(r.partial=!0,r.time.push({startPTS:t,endPTS:n}))}else if(a<=t)break}return r}getPartialFragment(e){let t,n,i,r=null,s=0;const{bufferPadding:a,fragments:o}=this;return Object.keys(o).forEach((l=>{const d=o[l];d&&cD(d)&&(n=d.body.start-a,i=d.body.end+a,e>=n&&e<=i&&(t=Math.min(e-n,i-e),s<=t&&(r=d.body,s=t)))})),r}isEndListAppended(e){const t=this.endListFragments[e];return void 0!==t&&(t.buffered||cD(t))}getState(e){const t=uD(e),n=this.fragments[t];return n?n.buffered?cD(n)?oD:lD:aD:sD}isTimeBuffered(e,t,n){let i,r;for(let s=0;s<n.length;s++){if(i=n.start(s)-this.bufferPadding,r=n.end(s)+this.bufferPadding,e>=i&&t<=r)return!0;if(t<=i)return!1}return!1}onFragLoaded(e,t){const{frag:n,part:i}=t;if("initSegment"===n.sn||n.bitrateTest)return;const r=i?null:t,s=uD(n);this.fragments[s]={body:n,appendedPTS:null,loaded:r,buffered:!1,range:Object.create(null)}}onBufferAppended(e,t){const{frag:n,part:i,timeRanges:r}=t;if("initSegment"===n.sn)return;const s=n.type;if(i){let e=this.activePartLists[s];e||(this.activePartLists[s]=e=[]),e.push(i)}this.timeRanges=r,Object.keys(r).forEach((e=>{const t=r[e];this.detectEvictedFragments(e,t,s,i)}))}onFragBuffered(e,t){this.detectPartialFragments(t)}hasFragment(e){const t=uD(e);return!!this.fragments[t]}hasParts(e){var t;return!(null==(t=this.activePartLists[e])||!t.length)}removeFragmentsInRange(e,t,n,i,r){i&&!this.hasGaps||Object.keys(this.fragments).forEach((s=>{const a=this.fragments[s];if(!a)return;const o=a.body;o.type!==n||i&&!o.gap||o.start<t&&o.end>e&&(a.buffered||r)&&this.removeFragment(o)}))}removeFragment(e){const t=uD(e);e.stats.loaded=0,e.clearElementaryStreamInfo();const n=this.activePartLists[e.type];if(n){const t=e.sn;this.activePartLists[e.type]=n.filter((e=>e.fragment.sn!==t))}delete this.fragments[t],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1}}function cD(e){var t,n,i;return e.buffered&&(e.body.gap||(null==(t=e.range.video)?void 0:t.partial)||(null==(n=e.range.audio)?void 0:n.partial)||(null==(i=e.range.audiovideo)?void 0:i.partial))}function uD(e){return`${e.type}_${e.level}_${e.sn}`}const hD={length:0,start:()=>0,end:()=>0};class mD{static isBuffered(e,t){try{if(e){const n=mD.getBuffered(e);for(let e=0;e<n.length;e++)if(t>=n.start(e)&&t<=n.end(e))return!0}}catch(e){}return!1}static bufferInfo(e,t,n){try{if(e){const i=mD.getBuffered(e),r=[];let s;for(s=0;s<i.length;s++)r.push({start:i.start(s),end:i.end(s)});return this.bufferedInfo(r,t,n)}}catch(e){}return{len:0,start:t,end:t,nextStart:void 0}}static bufferedInfo(e,t,n){t=Math.max(0,t),e.sort((function(e,t){const n=e.start-t.start;return n||t.end-e.end}));let i=[];if(n)for(let t=0;t<e.length;t++){const r=i.length;if(r){const s=i[r-1].end;e[t].start-s<n?e[t].end>s&&(i[r-1].end=e[t].end):i.push(e[t])}else i.push(e[t])}else i=e;let r,s=0,a=t,o=t;for(let e=0;e<i.length;e++){const l=i[e].start,d=i[e].end;if(t+n>=l&&t<d)a=l,o=d,s=o-t;else if(t+n<l){r=l;break}}return{len:s,start:a||0,end:o||0,nextStart:r}}static getBuffered(e){try{return e.buffered}catch(e){return jR.log("failed to get media.buffered",e),hD}}}class pD{constructor(e,t,n,i=0,r=-1,s=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=e,this.sn=t,this.id=n,this.size=i,this.part=r,this.partial=s}}function fD(e,t){for(let i=0,r=e.length;i<r;i++){var n;if((null==(n=e[i])?void 0:n.cc)===t)return e[i]}return null}function gD(e,t){if(e){const n=e.start+t;e.start=e.startPTS=n,e.endPTS=n+e.duration}}function vD(e,t){const n=t.fragments;for(let t=0,i=n.length;t<i;t++)gD(n[t],e);t.fragmentHint&&gD(t.fragmentHint,e),t.alignedSliding=!0}function bD(e,t,n){t&&(!function(e,t,n){if(function(e,t,n){return!(!t||!(n.endCC>n.startCC||e&&e.cc<n.startCC))}(e,n,t)){const e=function(e,t){const n=e.fragments,i=t.fragments;if(!i.length||!n.length)return void jR.log("No fragments to align");const r=fD(n,i[0].cc);if(r&&(!r||r.startPTS))return r;jR.log("No frag in previous level to align on")}(n,t);e&&FR(e.start)&&(jR.log(`Adjusting PTS using last level due to CC increase within current level ${t.url}`),vD(e.start,t))}}(e,n,t),!n.alignedSliding&&t&&yD(n,t),n.alignedSliding||!t||n.skippedSegments||Sx(t,n))}function yD(e,t){if(!e.hasProgramDateTime||!t.hasProgramDateTime)return;const n=e.fragments,i=t.fragments;if(!n.length||!i.length)return;let r,s;const a=Math.min(t.endCC,e.endCC);t.startCC<a&&e.startCC<a&&(r=fD(i,a),s=fD(n,a)),r&&s||(r=i[Math.floor(i.length/2)],s=fD(n,r.cc)||n[Math.floor(n.length/2)]);const o=r.programDateTime,l=s.programDateTime;if(!o||!l)return;vD((l-o)/1e3-(s.start-r.start),e)}const ED=Math.pow(2,17);class TD{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,t){const n=e.url;if(!n)return Promise.reject(new SD({type:HR.NETWORK_ERROR,details:VR.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error("Fragment does not have a "+(n?"part list":"url")),networkDetails:null}));this.abort();const i=this.config,r=i.fLoader,s=i.loader;return new Promise(((a,o)=>{if(this.loader&&this.loader.destroy(),e.gap){if(e.tagList.some((e=>"GAP"===e[0])))return void o(AD(e));e.gap=!1}const l=this.loader=e.loader=r?new r(i):new s(i),d=_D(e),c=Dx(i.fragLoadPolicy.default),u={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:"initSegment"===e.sn?1/0:ED};e.stats=l.stats,l.load(d,u,{onSuccess:(t,n,i,r)=>{this.resetLoader(e,l);let s=t.data;i.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(s.slice(0,16)),s=s.slice(16)),a({frag:e,part:null,payload:s,networkDetails:r})},onError:(t,i,r,s)=>{this.resetLoader(e,l),o(new SD({type:HR.NETWORK_ERROR,details:VR.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:MR({url:n,data:void 0},t),error:new Error(`HTTP Error ${t.code} ${t.text}`),networkDetails:r,stats:s}))},onAbort:(t,n,i)=>{this.resetLoader(e,l),o(new SD({type:HR.NETWORK_ERROR,details:VR.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:i,stats:t}))},onTimeout:(t,n,i)=>{this.resetLoader(e,l),o(new SD({type:HR.NETWORK_ERROR,details:VR.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${u.timeout}ms`),networkDetails:i,stats:t}))},onProgress:(n,i,r,s)=>{t&&t({frag:e,part:null,payload:r,networkDetails:s})}})}))}loadPart(e,t,n){this.abort();const i=this.config,r=i.fLoader,s=i.loader;return new Promise(((a,o)=>{if(this.loader&&this.loader.destroy(),e.gap||t.gap)return void o(AD(e,t));const l=this.loader=e.loader=r?new r(i):new s(i),d=_D(e,t),c=Dx(i.fragLoadPolicy.default),u={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:ED};t.stats=l.stats,l.load(d,u,{onSuccess:(i,r,s,o)=>{this.resetLoader(e,l),this.updateStatsFromPart(e,t);const d={frag:e,part:t,payload:i.data,networkDetails:o};n(d),a(d)},onError:(n,i,r,s)=>{this.resetLoader(e,l),o(new SD({type:HR.NETWORK_ERROR,details:VR.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:MR({url:d.url,data:void 0},n),error:new Error(`HTTP Error ${n.code} ${n.text}`),networkDetails:r,stats:s}))},onAbort:(n,i,r)=>{e.stats.aborted=t.stats.aborted,this.resetLoader(e,l),o(new SD({type:HR.NETWORK_ERROR,details:VR.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,error:new Error("Aborted"),networkDetails:r,stats:n}))},onTimeout:(n,i,r)=>{this.resetLoader(e,l),o(new SD({type:HR.NETWORK_ERROR,details:VR.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,error:new Error(`Timeout after ${u.timeout}ms`),networkDetails:r,stats:n}))}})}))}updateStatsFromPart(e,t){const n=e.stats,i=t.stats,r=i.total;if(n.loaded+=i.loaded,r){const i=Math.round(e.duration/t.duration),s=Math.min(Math.round(n.loaded/r),i),a=(i-s)*Math.round(n.loaded/s);n.total=n.loaded+a}else n.total=Math.max(n.loaded,n.total);const s=n.loading,a=i.loading;s.start?s.first+=a.first-a.start:(s.start=a.start,s.first=a.first),s.end=a.end}resetLoader(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()}}function _D(e,t=null){const n=t||e,i={frag:e,part:t,responseType:"arraybuffer",url:n.url,headers:{},rangeStart:0,rangeEnd:0},r=n.byteRangeStartOffset,s=n.byteRangeEndOffset;if(FR(r)&&FR(s)){var a;let t=r,n=s;if("initSegment"===e.sn&&"AES-128"===(null==(a=e.decryptdata)?void 0:a.method)){const e=s-r;e%16&&(n=s+(16-e%16)),0!==r&&(i.resetIV=!0,t=r-16)}i.rangeStart=t,i.rangeEnd=n}return i}function AD(e,t){const n=new Error(`GAP ${e.gap?"tag":"attribute"} found`),i={type:HR.MEDIA_ERROR,details:VR.FRAG_GAP,fatal:!1,frag:e,error:n,networkDetails:null};return t&&(i.part=t),(t||e).stats.aborted=!0,new SD(i)}class SD extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class kD{constructor(e,t){this.subtle=void 0,this.aesIV=void 0,this.subtle=e,this.aesIV=t}decrypt(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)}}class wD{constructor(e,t){this.subtle=void 0,this.key=void 0,this.subtle=e,this.key=t}expandKey(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])}}class LD{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const t=new DataView(e),n=new Uint32Array(4);for(let e=0;e<4;e++)n[e]=t.getUint32(4*e);return n}initTable(){const e=this.sBox,t=this.invSBox,n=this.subMix,i=n[0],r=n[1],s=n[2],a=n[3],o=this.invSubMix,l=o[0],d=o[1],c=o[2],u=o[3],h=new Uint32Array(256);let m=0,p=0,f=0;for(f=0;f<256;f++)h[f]=f<128?f<<1:f<<1^283;for(f=0;f<256;f++){let n=p^p<<1^p<<2^p<<3^p<<4;n=n>>>8^255&n^99,e[m]=n,t[n]=m;const o=h[m],f=h[o],g=h[f];let v=257*h[n]^16843008*n;i[m]=v<<24|v>>>8,r[m]=v<<16|v>>>16,s[m]=v<<8|v>>>24,a[m]=v,v=16843009*g^65537*f^257*o^16843008*m,l[n]=v<<24|v>>>8,d[n]=v<<16|v>>>16,c[n]=v<<8|v>>>24,u[n]=v,m?(m=o^h[h[h[g^o]]],p^=h[h[p]]):m=p=1}}expandKey(e){const t=this.uint8ArrayToUint32Array_(e);let n=!0,i=0;for(;i<t.length&&n;)n=t[i]===this.key[i],i++;if(n)return;this.key=t;const r=this.keySize=t.length;if(4!==r&&6!==r&&8!==r)throw new Error("Invalid aes key size="+r);const s=this.ksRows=4*(r+6+1);let a,o;const l=this.keySchedule=new Uint32Array(s),d=this.invKeySchedule=new Uint32Array(s),c=this.sBox,u=this.rcon,h=this.invSubMix,m=h[0],p=h[1],f=h[2],g=h[3];let v,b;for(a=0;a<s;a++)a<r?v=l[a]=t[a]:(b=v,a%r==0?(b=b<<8|b>>>24,b=c[b>>>24]<<24|c[b>>>16&255]<<16|c[b>>>8&255]<<8|c[255&b],b^=u[a/r|0]<<24):r>6&&a%r==4&&(b=c[b>>>24]<<24|c[b>>>16&255]<<16|c[b>>>8&255]<<8|c[255&b]),l[a]=v=(l[a-r]^b)>>>0);for(o=0;o<s;o++)a=s-o,b=3&o?l[a]:l[a-4],d[o]=o<4||a<=4?b:m[c[b>>>24]]^p[c[b>>>16&255]]^f[c[b>>>8&255]]^g[c[255&b]],d[o]=d[o]>>>0}networkToHostOrderSwap(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24}decrypt(e,t,n){const i=this.keySize+6,r=this.invKeySchedule,s=this.invSBox,a=this.invSubMix,o=a[0],l=a[1],d=a[2],c=a[3],u=this.uint8ArrayToUint32Array_(n);let h=u[0],m=u[1],p=u[2],f=u[3];const g=new Int32Array(e),v=new Int32Array(g.length);let b,y,E,T,_,A,S,k,w,L,R,C,I,x;const D=this.networkToHostOrderSwap;for(;t<g.length;){for(w=D(g[t]),L=D(g[t+1]),R=D(g[t+2]),C=D(g[t+3]),_=w^r[0],A=C^r[1],S=R^r[2],k=L^r[3],I=4,x=1;x<i;x++)b=o[_>>>24]^l[A>>16&255]^d[S>>8&255]^c[255&k]^r[I],y=o[A>>>24]^l[S>>16&255]^d[k>>8&255]^c[255&_]^r[I+1],E=o[S>>>24]^l[k>>16&255]^d[_>>8&255]^c[255&A]^r[I+2],T=o[k>>>24]^l[_>>16&255]^d[A>>8&255]^c[255&S]^r[I+3],_=b,A=y,S=E,k=T,I+=4;b=s[_>>>24]<<24^s[A>>16&255]<<16^s[S>>8&255]<<8^s[255&k]^r[I],y=s[A>>>24]<<24^s[S>>16&255]<<16^s[k>>8&255]<<8^s[255&_]^r[I+1],E=s[S>>>24]<<24^s[k>>16&255]<<16^s[_>>8&255]<<8^s[255&A]^r[I+2],T=s[k>>>24]<<24^s[_>>16&255]<<16^s[A>>8&255]<<8^s[255&S]^r[I+3],v[t]=D(b^h),v[t+1]=D(T^m),v[t+2]=D(E^p),v[t+3]=D(y^f),h=w,m=L,p=R,f=C,t+=4}return v.buffer}}class RD{constructor(e,{removePKCS7Padding:t=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=e.enableSoftwareAES,this.removePKCS7Padding=t,t)try{const e=self.crypto;e&&(this.subtle=e.subtle||e.webkitSubtle)}catch(e){}null===this.subtle&&(this.useSoftware=!0)}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:t}=this;if(!e||t)return this.reset(),null;const n=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?function(e){const t=e.byteLength,n=t&&new DataView(e.buffer).getUint8(t-1);return n?_C(e,0,t-n):e}(n):n}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,t,n){return this.useSoftware?new Promise(((i,r)=>{this.softwareDecrypt(new Uint8Array(e),t,n);const s=this.flush();s?i(s.buffer):r(new Error("[softwareDecrypt] Failed to decrypt data"))})):this.webCryptoDecrypt(new Uint8Array(e),t,n)}softwareDecrypt(e,t,n){const{currentIV:i,currentResult:r,remainderData:s}=this;this.logOnce("JS AES decrypt"),s&&(e=rI(s,e),this.remainderData=null);const a=this.getValidChunk(e);if(!a.length)return null;i&&(n=i);let o=this.softwareDecrypter;o||(o=this.softwareDecrypter=new LD),o.expandKey(t);const l=r;return this.currentResult=o.decrypt(a.buffer,0,n),this.currentIV=_C(a,-16).buffer,l||null}webCryptoDecrypt(e,t,n){const i=this.subtle;return this.key===t&&this.fastAesKey||(this.key=t,this.fastAesKey=new wD(i,t)),this.fastAesKey.expandKey().then((t=>{if(!i)return Promise.reject(new Error("web crypto not initialized"));this.logOnce("WebCrypto AES decrypt");return new kD(i,new Uint8Array(n)).decrypt(e.buffer,t)})).catch((i=>(jR.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${i.name}: ${i.message}`),this.onWebCryptoError(e,t,n))))}onWebCryptoError(e,t,n){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,t,n);const i=this.flush();if(i)return i.buffer;throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")}getValidChunk(e){let t=e;const n=e.length-e.length%16;return n!==e.length&&(t=_C(e,0,n),this.remainderData=_C(e,n)),t}logOnce(e){this.logEnabled&&(jR.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const CD=function(e){let t="";const n=e.length;for(let i=0;i<n;i++)t+=`[${e.start(i).toFixed(3)}-${e.end(i).toFixed(3)}]`;return t},ID="STOPPED",xD="IDLE",DD="KEY_LOADING",MD="FRAG_LOADING",OD="FRAG_LOADING_WAITING_RETRY",PD="WAITING_TRACK",ND="PARSING",FD="PARSED",UD="ENDED",BD="ERROR",$D="WAITING_INIT_PTS",HD="WAITING_LEVEL";class VD extends rD{constructor(e,t,n,i,r){super(),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=ID,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.loadedmetadata=!1,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.onvseeking=null,this.onvended=null,this.logPrefix="",this.log=void 0,this.warn=void 0,this.playlistType=r,this.logPrefix=i,this.log=jR.log.bind(jR,`${i}:`),this.warn=jR.warn.bind(jR,`${i}:`),this.hls=e,this.fragmentLoader=new TD(e.config),this.keyLoader=n,this.fragmentTracker=t,this.config=e.config,this.decrypter=new RD(e.config),e.on($R.MANIFEST_LOADED,this.onManifestLoaded,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;null!=e&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=ID}_streamEnded(e,t){if(t.live||e.nextStart||!e.end||!this.media)return!1;const n=t.partList;if(null!=n&&n.length){const e=n[n.length-1];return mD.isBuffered(this.media,e.start+e.duration/2)}const i=t.fragments[t.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(i)}getLevelDetails(){var e;if(this.levels&&null!==this.levelLastLoaded)return null==(e=this.levelLastLoaded)?void 0:e.details}onMediaAttached(e,t){const n=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),n.addEventListener("seeking",this.onvseeking),n.addEventListener("ended",this.onvended);const i=this.config;this.levels&&i.autoStartLoad&&this.state===ID&&this.startLoad(i.startPosition)}onMediaDetaching(){const e=this.media;null!=e&&e.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&this.onvseeking&&this.onvended&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}onMediaSeeking(){const{config:e,fragCurrent:t,media:n,mediaBuffer:i,state:r}=this,s=n?n.currentTime:0,a=mD.bufferInfo(i||n,s,e.maxBufferHole);if(this.log(`media seeking to ${FR(s)?s.toFixed(3):s}, state: ${r}`),this.state===UD)this.resetLoadingState();else if(t){const n=e.maxFragLookUpTolerance,i=t.start-n,r=t.start+t.duration+n;if(!a.len||r<a.start||i>a.end){const e=s>r;(s<i||e)&&(e&&t.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),t.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}n&&(this.fragmentTracker.removeFragmentsInRange(s,1/0,this.playlistType,!0),this.lastCurrentTime=s),this.loadedmetadata||a.len||(this.nextLoadPosition=this.startPosition=s),this.tickImmediate()}onMediaEnded(){this.startPosition=this.lastCurrentTime=0}onManifestLoaded(e,t){this.startTimeOffset=t.startTimeOffset,this.initPTS=[]}onHandlerDestroying(){this.hls.off($R.MANIFEST_LOADED,this.onManifestLoaded,this),this.stopLoad(),super.onHandlerDestroying(),this.hls=null}onHandlerDestroyed(){this.state=ID,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,t,n){this._loadFragForPlayback(e,t,n)}_loadFragForPlayback(e,t,n){this._doFragLoad(e,t,n,(t=>{if(this.fragContextChanged(e))return this.warn(`Fragment ${e.sn}${t.part?" p: "+t.part.index:""} of level ${e.level} was dropped during download.`),void this.fragmentTracker.removeFragment(e);e.stats.chunkCount++,this._handleFragmentLoadProgress(t)})).then((t=>{if(!t)return;const n=this.state;this.fragContextChanged(e)?(n===MD||!this.fragCurrent&&n===ND)&&(this.fragmentTracker.removeFragment(e),this.state=xD):("payload"in t&&(this.log(`Loaded fragment ${e.sn} of level ${e.level}`),this.hls.trigger($R.FRAG_LOADED,t)),this._handleFragmentLoadComplete(t))})).catch((t=>{this.state!==ID&&this.state!==BD&&(this.warn(t),this.resetFragmentLoading(e))}))}clearTrackerIfNeeded(e){var t;const{fragmentTracker:n}=this;if(n.getState(e)===aD){const t=e.type,i=this.getFwdBufferInfo(this.mediaBuffer,t),r=Math.max(e.duration,i?i.len:this.config.maxBufferLength);this.reduceMaxBufferLength(r)&&n.removeFragment(e)}else 0===(null==(t=this.mediaBuffer)?void 0:t.buffered.length)?n.removeAllFragments():n.hasParts(e.type)&&(n.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),n.getState(e)===oD&&n.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const t=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:t,part:null,stats:t.stats,id:t.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}flushMainBuffer(e,t,n=null){if(!(e-t))return;const i={startOffset:e,endOffset:t,type:n};this.hls.trigger($R.BUFFER_FLUSHING,i)}_loadInitSegment(e,t){this._doFragLoad(e,t).then((t=>{if(!t||this.fragContextChanged(e)||!this.levels)throw new Error("init load aborted");return t})).then((t=>{const{hls:n}=this,{payload:i}=t,r=e.decryptdata;if(i&&i.byteLength>0&&null!=r&&r.key&&r.iv&&"AES-128"===r.method){const s=self.performance.now();return this.decrypter.decrypt(new Uint8Array(i),r.key.buffer,r.iv.buffer).catch((t=>{throw n.trigger($R.ERROR,{type:HR.MEDIA_ERROR,details:VR.FRAG_DECRYPT_ERROR,fatal:!1,error:t,reason:t.message,frag:e}),t})).then((i=>{const r=self.performance.now();return n.trigger($R.FRAG_DECRYPTED,{frag:e,payload:i,stats:{tstart:s,tdecrypt:r}}),t.payload=i,this.completeInitSegmentLoad(t)}))}return this.completeInitSegmentLoad(t)})).catch((t=>{this.state!==ID&&this.state!==BD&&(this.warn(t),this.resetFragmentLoading(e))}))}completeInitSegmentLoad(e){const{levels:t}=this;if(!t)throw new Error("init load aborted, missing levels");const n=e.frag.stats;this.state=xD,e.frag.data=new Uint8Array(e.payload),n.parsing.start=n.buffering.start=self.performance.now(),n.parsing.end=n.buffering.end=self.performance.now(),this.tick()}fragContextChanged(e){const{fragCurrent:t}=this;return!e||!t||e.sn!==t.sn||e.level!==t.level}fragBufferedComplete(e,t){var n,i,r,s;const a=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.playlistType===qI?"level":"track"} ${e.level} (frag:[${(null!=(n=e.startPTS)?n:NaN).toFixed(3)}-${(null!=(i=e.endPTS)?i:NaN).toFixed(3)}] > buffer:${a?CD(mD.getBuffered(a)):"(detached)"})`),"initSegment"!==e.sn){var o;if(e.type!==YI){const t=e.elementaryStreams;if(!Object.keys(t).some((e=>!!t[e])))return void(this.state=xD)}const t=null==(o=this.levels)?void 0:o[e.level];null!=t&&t.fragmentError&&(this.log(`Resetting level fragment error count of ${t.fragmentError} on frag buffered`),t.fragmentError=0)}this.state=xD,a&&(!this.loadedmetadata&&e.type==qI&&a.buffered.length&&(null==(r=this.fragCurrent)?void 0:r.sn)===(null==(s=this.fragPrevious)?void 0:s.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())}seekToStartPos(){}_handleFragmentLoadComplete(e){const{transmuxer:t}=this;if(!t)return;const{frag:n,part:i,partsLoaded:r}=e,s=!r||0===r.length||r.some((e=>!e)),a=new pD(n.level,n.sn,n.stats.chunkCount+1,0,i?i.index:-1,!s);t.flush(a)}_handleFragmentLoadProgress(e){}_doFragLoad(e,t,n=null,i){var r;const s=null==t?void 0:t.details;if(!this.levels||!s)throw new Error(`frag load aborted, missing level${s?"":" detail"}s`);let a=null;if(!e.encrypted||null!=(r=e.decryptdata)&&r.key?!e.encrypted&&s.encryptedFragments.length&&this.keyLoader.loadClear(e,s.encryptedFragments):(this.log(`Loading key for ${e.sn} of [${s.startSN}-${s.endSN}], ${"[stream-controller]"===this.logPrefix?"level":"track"} ${e.level}`),this.state=DD,this.fragCurrent=e,a=this.keyLoader.load(e).then((e=>{if(!this.fragContextChanged(e.frag))return this.hls.trigger($R.KEY_LOADED,e),this.state===DD&&(this.state=xD),e})),this.hls.trigger($R.KEY_LOADING,{frag:e}),null===this.fragCurrent&&(a=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))),n=Math.max(e.start,n||0),this.config.lowLatencyMode&&"initSegment"!==e.sn){const r=s.partList;if(r&&i){n>e.end&&s.fragmentHint&&(e=s.fragmentHint);const o=this.getNextPart(r,e,n);if(o>-1){const l=r[o];let d;return this.log(`Loading part sn: ${e.sn} p: ${l.index} cc: ${e.cc} of playlist [${s.startSN}-${s.endSN}] parts [0-${o}-${r.length-1}] ${"[stream-controller]"===this.logPrefix?"level":"track"}: ${e.level}, target: ${parseFloat(n.toFixed(3))}`),this.nextLoadPosition=l.start+l.duration,this.state=MD,d=a?a.then((n=>!n||this.fragContextChanged(n.frag)?null:this.doFragPartsLoad(e,l,t,i))).catch((e=>this.handleFragLoadError(e))):this.doFragPartsLoad(e,l,t,i).catch((e=>this.handleFragLoadError(e))),this.hls.trigger($R.FRAG_LOADING,{frag:e,part:l,targetBufferTime:n}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):d}if(!e.url||this.loadedEndOfParts(r,n))return Promise.resolve(null)}}this.log(`Loading fragment ${e.sn} cc: ${e.cc} ${s?"of ["+s.startSN+"-"+s.endSN+"] ":""}${"[stream-controller]"===this.logPrefix?"level":"track"}: ${e.level}, target: ${parseFloat(n.toFixed(3))}`),FR(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=MD;const o=this.config.progressive;let l;return l=o&&a?a.then((t=>!t||this.fragContextChanged(null==t?void 0:t.frag)?null:this.fragmentLoader.load(e,i))).catch((e=>this.handleFragLoadError(e))):Promise.all([this.fragmentLoader.load(e,o?i:void 0),a]).then((([e])=>(!o&&e&&i&&i(e),e))).catch((e=>this.handleFragLoadError(e))),this.hls.trigger($R.FRAG_LOADING,{frag:e,targetBufferTime:n}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):l}doFragPartsLoad(e,t,n,i){return new Promise(((r,s)=>{var a;const o=[],l=null==(a=n.details)?void 0:a.partList,d=t=>{this.fragmentLoader.loadPart(e,t,i).then((i=>{o[t.index]=i;const s=i.part;this.hls.trigger($R.FRAG_LOADED,i);const a=wx(n,e.sn,t.index+1)||Lx(l,e.sn,t.index+1);if(!a)return r({frag:e,part:s,partsLoaded:o});d(a)})).catch(s)};d(t)}))}handleFragLoadError(e){if("data"in e){const t=e.data;e.data&&t.details===VR.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):this.hls.trigger($R.ERROR,t)}else this.hls.trigger($R.ERROR,{type:HR.OTHER_ERROR,details:VR.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const t=this.getCurrentContext(e);if(!t||this.state!==ND)return void(this.fragCurrent||this.state===ID||this.state===BD||(this.state=xD));const{frag:n,part:i,level:r}=t,s=self.performance.now();n.stats.parsing.end=s,i&&(i.stats.parsing.end=s),this.updateLevelTiming(n,i,r,e.partial)}getCurrentContext(e){const{levels:t,fragCurrent:n}=this,{level:i,sn:r,part:s}=e;if(null==t||!t[i])return this.warn(`Levels object was unset while buffering fragment ${r} of level ${i}. The current chunk will not be buffered.`),null;const a=t[i],o=s>-1?wx(a,r,s):null,l=o?o.fragment:function(e,t,n){if(null==e||!e.details)return null;const i=e.details;let r=i.fragments[t-i.startSN];return r||(r=i.fragmentHint,r&&r.sn===t?r:t<i.startSN&&n&&n.sn===t?n:null)}(a,r,n);return l?(n&&n!==l&&(l.stats=n.stats),{frag:l,part:o,level:a}):null}bufferFragmentData(e,t,n,i,r){var s;if(!e||this.state!==ND)return;const{data1:a,data2:o}=e;let l=a;if(a&&o&&(l=rI(a,o)),null==(s=l)||!s.length)return;const d={type:e.type,frag:t,part:n,chunkMeta:i,parent:t.type,data:l};if(this.hls.trigger($R.BUFFER_APPENDING,d),e.dropped&&e.independent&&!n){if(r)return;this.flushBufferGap(t)}}flushBufferGap(e){const t=this.media;if(!t)return;if(!mD.isBuffered(t,t.currentTime))return void this.flushMainBuffer(0,e.start);const n=t.currentTime,i=mD.bufferInfo(t,n,0),r=e.duration,s=Math.min(2*this.config.maxFragLookUpTolerance,.25*r),a=Math.max(Math.min(e.start-s,i.end-s),n+s);e.start-a>s&&this.flushMainBuffer(a,e.start)}getFwdBufferInfo(e,t){const n=this.getLoadPosition();return FR(n)?this.getFwdBufferInfoAtPos(e,n,t):null}getFwdBufferInfoAtPos(e,t,n){const{config:{maxBufferHole:i}}=this,r=mD.bufferInfo(e,t,i);if(0===r.len&&void 0!==r.nextStart){const s=this.fragmentTracker.getBufferedFrag(t,n);if(s&&r.nextStart<s.end)return mD.bufferInfo(e,t,Math.max(r.nextStart,i))}return r}getMaxBufferLength(e){const{config:t}=this;let n;return n=e?Math.max(8*t.maxBufferSize/e,t.maxBufferLength):t.maxBufferLength,Math.min(n,t.maxMaxBufferLength)}reduceMaxBufferLength(e){const t=this.config,n=e||t.maxBufferLength;return t.maxMaxBufferLength>=n&&(t.maxMaxBufferLength/=2,this.warn(`Reduce max buffer length to ${t.maxMaxBufferLength}s`),!0)}getAppendedFrag(e,t=qI){const n=this.fragmentTracker.getAppendedFrag(e,qI);return n&&"fragment"in n?n.fragment:n}getNextFragment(e,t){const n=t.fragments,i=n.length;if(!i)return null;const{config:r}=this,s=n[0].start;let a;if(t.live){const o=r.initialLiveManifestSize;if(i<o)return this.warn(`Not enough fragments to start playback (have: ${i}, need: ${o})`),null;(!t.PTSKnown&&!this.startFragRequested&&-1===this.startPosition||e<s)&&(a=this.getInitialLiveFragment(t,n),this.startPosition=this.nextLoadPosition=a?this.hls.liveSyncPosition||a.start:e)}else e<=s&&(a=n[0]);if(!a){const n=r.lowLatencyMode?t.partEnd:t.fragmentEnd;a=this.getFragmentAtPosition(e,n,t)}return this.mapToInitFragWhenRequired(a)}isLoopLoading(e,t){const n=this.fragmentTracker.getState(e);return(n===lD||n===oD&&!!e.gap)&&this.nextLoadPosition>t}getNextFragmentLoopLoading(e,t,n,i,r){const s=e.gap,a=this.getNextFragment(this.nextLoadPosition,t);if(null===a)return a;if(e=a,s&&e&&!e.gap&&n.nextStart){const t=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,n.nextStart,i);if(null!==t&&n.len+t.len>=r)return this.log(`buffer full after gaps in "${i}" playlist starting at sn: ${e.sn}`),null}return e}mapToInitFragWhenRequired(e){return null==e||!e.initSegment||null!=e&&e.initSegment.data||this.bitrateTest?e:e.initSegment}getNextPart(e,t,n){let i=-1,r=!1,s=!0;for(let a=0,o=e.length;a<o;a++){const o=e[a];if(s=s&&!o.independent,i>-1&&n<o.start)break;const l=o.loaded;l?i=-1:(r||o.independent||s)&&o.fragment===t&&(i=a),r=l}return i}loadedEndOfParts(e,t){const n=e[e.length-1];return n&&t>n.start&&n.loaded}getInitialLiveFragment(e,t){const n=this.fragPrevious;let i=null;if(n){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${n.programDateTime}`),i=function(e,t,n){if(null===t||!Array.isArray(e)||!e.length||!FR(t))return null;if(t<(e[0].programDateTime||0))return null;if(t>=(e[e.length-1].endProgramDateTime||0))return null;n=n||0;for(let i=0;i<e.length;++i){const r=e[i];if(Fx(t,n,r))return r}return null}(t,n.endProgramDateTime,this.config.maxFragLookUpTolerance)),!i){const r=n.sn+1;if(r>=e.startSN&&r<=e.endSN){const s=t[r-e.startSN];n.cc===s.cc&&(i=s,this.log(`Live playlist, switching playlist, load frag with next SN: ${i.sn}`))}i||(i=function(e,t){return Ox(e,(e=>e.cc<t?1:e.cc>t?-1:0))}(t,n.cc),i&&this.log(`Live playlist, switching playlist, load frag with same CC: ${i.sn}`))}}else{const t=this.hls.liveSyncPosition;null!==t&&(i=this.getFragmentAtPosition(t,this.bitrateTest?e.fragmentEnd:e.edge,e))}return i}getFragmentAtPosition(e,t,n){const{config:i}=this;let{fragPrevious:r}=this,{fragments:s,endSN:a}=n;const{fragmentHint:o}=n,l=i.maxFragLookUpTolerance,d=n.partList,c=!!(i.lowLatencyMode&&null!=d&&d.length&&o);let u;if(c&&o&&!this.bitrateTest&&(s=s.concat(o),a=o.sn),e<t){u=Px(r,s,e,e>t-l?0:l)}else u=s[s.length-1];if(u){const e=u.sn-n.startSN,t=this.fragmentTracker.getState(u);if((t===lD||t===oD&&u.gap)&&(r=u),r&&u.sn===r.sn&&(!c||d[0].fragment.sn>u.sn)){if(r&&u.level===r.level){const t=s[e+1];u=u.sn<a&&this.fragmentTracker.getState(t)!==lD?t:null}}}return u}synchronizeToLiveEdge(e){const{config:t,media:n}=this;if(!n)return;const i=this.hls.liveSyncPosition,r=n.currentTime,s=e.fragments[0].start,a=e.edge,o=r>=s-t.maxFragLookUpTolerance&&r<=a;if(null!==i&&n.duration>i&&(r<i||!o)){const s=void 0!==t.liveMaxLatencyDuration?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;(!o&&n.readyState<4||r<a-s)&&(this.loadedmetadata||(this.nextLoadPosition=i),n.readyState&&(this.warn(`Playback: ${r.toFixed(3)} is located too far from the end of live sliding playlist: ${a}, reset currentTime to : ${i.toFixed(3)}`),n.currentTime=i))}}alignPlaylists(e,t,n){const i=e.fragments.length;if(!i)return this.warn("No fragments in live playlist"),0;const r=e.fragments[0].start,s=!t,a=e.alignedSliding&&FR(r);if(s||!a&&!r){const{fragPrevious:r}=this;bD(r,n,e);const s=e.fragments[0].start;return this.log(`Live playlist sliding: ${s.toFixed(2)} start-sn: ${t?t.startSN:"na"}->${e.startSN} prev-sn: ${r?r.sn:"na"} fragments: ${i}`),s}return r}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,3*e.partTarget)}setStartPosition(e,t){let n=this.startPosition;if(n<t&&(n=-1),-1===n||-1===this.lastCurrentTime){const i=null!==this.startTimeOffset,r=i?this.startTimeOffset:e.startTimeOffset;null!==r&&FR(r)?(n=t+r,r<0&&(n+=e.totalduration),n=Math.min(Math.max(t,n),t+e.totalduration),this.log(`Start time offset ${r} found in ${i?"multivariant":"media"} playlist, adjust startPosition to ${n}`),this.startPosition=n):e.live?n=this.hls.liveSyncPosition||t:this.startPosition=n=0,this.lastCurrentTime=n}this.nextLoadPosition=n}getLoadPosition(){const{media:e}=this;let t=0;return this.loadedmetadata&&e?t=e.currentTime:this.nextLoadPosition&&(t=this.nextLoadPosition),t}handleFragLoadAborted(e,t){this.transmuxer&&"initSegment"!==e.sn&&e.stats.aborted&&(this.warn(`Fragment ${e.sn}${t?" part "+t.index:""} of level ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){this.fragCurrent&&(this.fragContextChanged(e)||this.state===OD)||(this.state=xD)}onFragmentOrKeyLoadError(e,t){if(t.chunkMeta&&!t.frag){const e=this.getCurrentContext(t.chunkMeta);e&&(t.frag=e.frag)}const n=t.frag;if(!n||n.type!==e||!this.levels)return;var i;if(this.fragContextChanged(n))return void this.warn(`Frag load error must match current frag to retry ${n.url} > ${null==(i=this.fragCurrent)?void 0:i.url}`);const r=t.details===VR.FRAG_GAP;r&&this.fragmentTracker.fragBuffered(n,!0);const s=t.errorAction,{action:a,retryCount:o=0,retryConfig:l}=s||{};if(s&&a===Hx&&l){this.resetStartWhenNotLoaded(this.levelLastLoaded);const i=xx(l,o);this.warn(`Fragment ${n.sn} of ${e} ${n.level} errored with ${t.details}, retrying loading ${o+1}/${l.maxNumRetry} in ${i}ms`),s.resolved=!0,this.retryDate=self.performance.now()+i,this.state=OD}else if(l&&s){if(this.resetFragmentErrors(e),!(o<l.maxNumRetry))return void jR.warn(`${t.details} reached or exceeded max retry (${o})`);r||a===$x||(s.resolved=!0)}else(null==s?void 0:s.action)===Bx?this.state=HD:this.state=BD;this.tickImmediate()}reduceLengthAndFlushBuffer(e){if(this.state===ND||this.state===FD){const t=e.parent,n=this.getFwdBufferInfo(this.mediaBuffer,t),i=n&&n.len>.5;i&&this.reduceMaxBufferLength(n.len);const r=!i;return r&&this.warn(`Buffer full error while media.currentTime is not buffered, flush ${t} buffer`),e.frag&&(this.fragmentTracker.removeFragment(e.frag),this.nextLoadPosition=e.frag.start),this.resetLoadingState(),r}return!1}resetFragmentErrors(e){e===jI&&(this.fragCurrent=null),this.loadedmetadata||(this.startFragRequested=!1),this.state!==ID&&(this.state=xD)}afterBufferFlushed(e,t,n){if(!e)return;const i=mD.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,i,n),this.state===UD&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state=xD}resetStartWhenNotLoaded(e){if(!this.loadedmetadata){this.startFragRequested=!1;const t=e?e.details:null;null!=t&&t.live?(this.startPosition=-1,this.setStartPosition(t,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.warn(`The loading context changed while buffering fragment ${e.sn} of level ${e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,t,n,i){var r;const s=n.details;if(!s)return void this.warn("level.details undefined");if(!Object.keys(e.elementaryStreams).reduce(((t,r)=>{const a=e.elementaryStreams[r];if(a){const o=a.endPTS-a.startPTS;if(o<=0)return this.warn(`Could not parse fragment ${e.sn} ${r} duration reliably (${o})`),t||!1;const l=i?0:_x(s,e,a.startPTS,a.endPTS,a.startDTS,a.endDTS);return this.hls.trigger($R.LEVEL_PTS_UPDATED,{details:s,level:n,drift:l,type:r,frag:e,start:a.startPTS,end:a.endPTS}),!0}return t}),!1)&&null===(null==(r=this.transmuxer)?void 0:r.error)){const t=new Error(`Found no media in fragment ${e.sn} of level ${e.level} resetting transmuxer to fallback to playlist timing`);if(0===n.fragmentError&&(n.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)),this.warn(t.message),this.hls.trigger($R.ERROR,{type:HR.MEDIA_ERROR,details:VR.FRAG_PARSING_ERROR,fatal:!1,error:t,frag:e,reason:`Found no media in msn ${e.sn} of level "${n.url}"`}),!this.hls)return;this.resetTransmuxer()}this.state=FD,this.hls.trigger($R.FRAG_PARSED,{frag:e,part:t})}resetTransmuxer(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)}recoverWorkerError(e){"demuxerWorker"===e.event&&(this.fragmentTracker.removeAllFragments(),this.resetTransmuxer(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState())}set state(e){const t=this._state;t!==e&&(this._state=e,this.log(`${t}->${e}`))}get state(){return this._state}}class WD{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:t}=this;let n;return e.length?(n=1===e.length?e[0]:function(e,t){const n=new Uint8Array(t);let i=0;for(let t=0;t<e.length;t++){const r=e[t];n.set(r,i),i+=r.length}return n}(e,t),this.reset(),n):new Uint8Array(0)}reset(){this.chunks.length=0,this.dataLength=0}}function GD(e="",t=9e4){return{type:e,id:-1,pid:-1,inputTimeScale:t,sequenceNumber:-1,samples:[],dropped:0}}class KD{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,t,n,i){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,t){return!1}appendFrame(e,t,n){}demux(e,t){this.cachedData&&(e=rI(this.cachedData,e),this.cachedData=null);let n,i=kC(e,0),r=i?i.length:0;const s=this._audioTrack,a=this._id3Track,o=i?RC(i):void 0,l=e.length;for((null===this.basePTS||0===this.frameIndex&&FR(o))&&(this.basePTS=qD(o,t,this.initPTS),this.lastPTS=this.basePTS),null===this.lastPTS&&(this.lastPTS=this.basePTS),i&&i.length>0&&a.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:i,type:ix,duration:Number.POSITIVE_INFINITY});r<l;){if(this.canParse(e,r)){const t=this.appendFrame(s,e,r);t?(this.frameIndex++,this.lastPTS=t.sample.pts,r+=t.length,n=r):r=l}else LC(e,r)?(i=kC(e,r),a.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:i,type:ix,duration:Number.POSITIVE_INFINITY}),r+=i.length,n=r):r++;if(r===l&&n!==l){const t=_C(e,n);this.cachedData?this.cachedData=rI(this.cachedData,t):this.cachedData=t}}return{audioTrack:s,videoTrack:GD(),id3Track:a,textTrack:GD()}}demuxSampleAes(e,t,n){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:GD(),id3Track:this._id3Track,textTrack:GD()}}destroy(){}}const qD=(e,t,n)=>{if(FR(e))return 90*e;return 9e4*t+(n?9e4*n.baseTime/n.timescale:0)};function jD(e,t){return 255===e[t]&&240==(246&e[t+1])}function YD(e,t){return 1&e[t+1]?7:9}function zD(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function XD(e,t){return t+1<e.length&&jD(e,t)}function QD(e,t){if(XD(e,t)){const n=YD(e,t);if(t+n>=e.length)return!1;const i=zD(e,t);if(i<=n)return!1;const r=t+i;return r===e.length||XD(e,r)}return!1}function ZD(e,t,n,i,r){if(!e.samplerate){const s=function(e,t,n,i){let r,s,a,o;const l=navigator.userAgent.toLowerCase(),d=i,c=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];r=1+((192&t[n+2])>>>6);const u=(60&t[n+2])>>>2;if(!(u>c.length-1))return a=(1&t[n+2])<<2,a|=(192&t[n+3])>>>6,jR.log(`manifest codec:${i}, ADTS type:${r}, samplingIndex:${u}`),/firefox/i.test(l)?u>=6?(r=5,o=new Array(4),s=u-3):(r=2,o=new Array(2),s=u):-1!==l.indexOf("android")?(r=2,o=new Array(2),s=u):(r=5,o=new Array(4),i&&(-1!==i.indexOf("mp4a.40.29")||-1!==i.indexOf("mp4a.40.5"))||!i&&u>=6?s=u-3:((i&&-1!==i.indexOf("mp4a.40.2")&&(u>=6&&1===a||/vivaldi/i.test(l))||!i&&1===a)&&(r=2,o=new Array(2)),s=u)),o[0]=r<<3,o[0]|=(14&u)>>1,o[1]|=(1&u)<<7,o[1]|=a<<3,5===r&&(o[1]|=(14&s)>>1,o[2]=(1&s)<<7,o[2]|=8,o[3]=0),{config:o,samplerate:c[u],channelCount:a,codec:"mp4a.40."+r,manifestCodec:d};{const t=new Error(`invalid ADTS sampling index:${u}`);e.emit($R.ERROR,$R.ERROR,{type:HR.MEDIA_ERROR,details:VR.FRAG_PARSING_ERROR,fatal:!0,error:t,reason:t.message})}}(t,n,i,r);if(!s)return;e.config=s.config,e.samplerate=s.samplerate,e.channelCount=s.channelCount,e.codec=s.codec,e.manifestCodec=s.manifestCodec,jR.log(`parsed codec:${e.codec}, rate:${s.samplerate}, channels:${s.channelCount}`)}}function JD(e){return 9216e4/e}function eM(e,t,n,i,r){const s=i+r*JD(e.samplerate),a=function(e,t){const n=YD(e,t);if(t+n<=e.length){const i=zD(e,t)-n;if(i>0)return{headerLength:n,frameLength:i}}}(t,n);let o;if(a){const{frameLength:i,headerLength:r}=a,l=r+i,d=Math.max(0,n+l-t.length);d?(o=new Uint8Array(l-r),o.set(t.subarray(n+r,t.length),0)):o=t.subarray(n+r,n+l);const c={unit:o,pts:s};return d||e.samples.push(c),{sample:c,length:l,missing:d}}const l=t.length-n;o=new Uint8Array(l),o.set(t.subarray(n,t.length),0);return{sample:{unit:o,pts:s},length:l,missing:-1}}let tM=null;const nM=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],iM=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],rM=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],sM=[0,1,1,4];function aM(e,t,n,i,r){if(n+24>t.length)return;const s=oM(t,n);if(s&&n+s.frameLength<=t.length){const a=i+r*(9e4*s.samplesPerFrame/s.sampleRate),o={unit:t.subarray(n,n+s.frameLength),pts:a,dts:a};return e.config=[],e.channelCount=s.channelCount,e.samplerate=s.sampleRate,e.samples.push(o),{sample:o,length:s.frameLength,missing:0}}}function oM(e,t){const n=e[t+1]>>3&3,i=e[t+1]>>1&3,r=e[t+2]>>4&15,s=e[t+2]>>2&3;if(1!==n&&0!==r&&15!==r&&3!==s){const a=e[t+2]>>1&1,o=e[t+3]>>6,l=1e3*nM[14*(3===n?3-i:3===i?3:4)+r-1],d=iM[3*(3===n?0:2===n?1:2)+s],c=3===o?1:2,u=rM[n][i],h=sM[i],m=8*u*h,p=Math.floor(u*l/d+a)*h;if(null===tM){const e=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);tM=e?parseInt(e[1]):0}return!!tM&&tM<=87&&2===i&&l>=224e3&&0===o&&(e[t+3]=128|e[t+3]),{sampleRate:d,channelCount:c,frameLength:p,samplesPerFrame:m}}}function lM(e,t){return!(255!==e[t]||224&~e[t+1]||!(6&e[t+1]))}function dM(e,t){return t+1<e.length&&lM(e,t)}function cM(e,t){if(t+1<e.length&&lM(e,t)){const n=4,i=oM(e,t);let r=n;null!=i&&i.frameLength&&(r=i.frameLength);const s=t+r;return s===e.length||dM(e,s)}return!1}const uM=/\/emsg[-/]ID3/i;const hM=(e,t)=>{let n=0,i=5;t+=i;const r=new Uint32Array(1),s=new Uint32Array(1),a=new Uint8Array(1);for(;i>0;){a[0]=e[t];const o=Math.min(i,8),l=8-o;s[0]=4278190080>>>24+l<<l,r[0]=(a[0]&s[0])>>l,n=n?n<<o|r[0]:r[0],t+=1,i-=o}return n};class mM extends KD{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,t,n,i){super.resetInitSegment(e,t,n,i),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}}canParse(e,t){return t+64<e.length}appendFrame(e,t,n){const i=pM(e,t,n,this.basePTS,this.frameIndex);if(-1!==i){return{sample:e.samples[e.samples.length-1],length:i,missing:0}}}static probe(e){if(!e)return!1;const t=kC(e,0);if(!t)return!1;const n=t.length;return 11===e[n]&&119===e[n+1]&&void 0!==RC(t)&&hM(e,n)<16}}function pM(e,t,n,i,r){if(n+8>t.length)return-1;if(11!==t[n]||119!==t[n+1])return-1;const s=t[n+4]>>6;if(s>=3)return-1;const a=[48e3,44100,32e3][s],o=63&t[n+4],l=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*o+s];if(n+l>t.length)return-1;const d=t[n+6]>>5;let c=0;2===d?c+=2:(1&d&&1!==d&&(c+=2),4&d&&(c+=2));const u=(t[n+6]<<8|t[n+7])>>12-c&1,h=[2,1,2,3,3,4,4,5][d]+u,m=t[n+5]>>3,p=7&t[n+5],f=new Uint8Array([s<<6|m<<1|p>>2,(3&p)<<6|d<<3|u<<2|o>>4,o<<4&224]),g=i+r*(1536/a*9e4),v=t.subarray(n,n+l);return e.config=f,e.channelCount=h,e.samplerate=a,e.samples.push({unit:v,pts:g}),l}class fM{constructor(){this.VideoSample=null}createVideoSample(e,t,n,i){return{key:e,frame:!1,pts:t,dts:n,units:[],debug:i,length:0}}getLastNalUnit(e){var t;let n,i=this.VideoSample;if(i&&0!==i.units.length||(i=e[e.length-1]),null!=(t=i)&&t.units){const e=i.units;n=e[e.length-1]}return n}pushAccessUnit(e,t){if(e.units.length&&e.frame){if(void 0===e.pts){const n=t.samples,i=n.length;if(!i)return void t.dropped++;{const t=n[i-1];e.pts=t.pts,e.dts=t.dts}}t.samples.push(e)}e.debug.length&&jR.log(e.pts+"/"+e.dts+":"+e.debug)}}class gM{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,t=this.bytesAvailable,n=e.byteLength-t,i=new Uint8Array(4),r=Math.min(4,t);if(0===r)throw new Error("no bytes available");i.set(e.subarray(n,n+r)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=8*r,this.bytesAvailable-=r}skipBits(e){let t;e=Math.min(e,8*this.bytesAvailable+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(t=(e-=this.bitsAvailable)>>3,e-=t<<3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let t=Math.min(this.bitsAvailable,e);const n=this.word>>>32-t;if(e>32&&jR.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0)this.word<<=t;else{if(!(this.bytesAvailable>0))throw new Error("no bits available");this.loadWord()}return t=e-t,t>0&&this.bitsAvailable?n<<t|this.readBits(t):n}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if(this.word&2147483648>>>e)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return 1===this.readBits(1)}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}skipScalingList(e){let t,n=8,i=8;for(let r=0;r<e;r++)0!==i&&(t=this.readEG(),i=(n+t+256)%256),n=0===i?n:i}readSPS(){let e,t,n,i=0,r=0,s=0,a=0;const o=this.readUByte.bind(this),l=this.readBits.bind(this),d=this.readUEG.bind(this),c=this.readBoolean.bind(this),u=this.skipBits.bind(this),h=this.skipEG.bind(this),m=this.skipUEG.bind(this),p=this.skipScalingList.bind(this);o();const f=o();if(l(5),u(3),o(),m(),100===f||110===f||122===f||244===f||44===f||83===f||86===f||118===f||128===f){const e=d();if(3===e&&u(1),m(),m(),u(1),c())for(t=3!==e?8:12,n=0;n<t;n++)c()&&p(n<6?16:64)}m();const g=d();if(0===g)d();else if(1===g)for(u(1),h(),h(),e=d(),n=0;n<e;n++)h();m(),u(1);const v=d(),b=d(),y=l(1);0===y&&u(1),u(1),c()&&(i=d(),r=d(),s=d(),a=d());let E=[1,1];if(c()&&c()){switch(o()){case 1:E=[1,1];break;case 2:E=[12,11];break;case 3:E=[10,11];break;case 4:E=[16,11];break;case 5:E=[40,33];break;case 6:E=[24,11];break;case 7:E=[20,11];break;case 8:E=[32,11];break;case 9:E=[80,33];break;case 10:E=[18,11];break;case 11:E=[15,11];break;case 12:E=[64,33];break;case 13:E=[160,99];break;case 14:E=[4,3];break;case 15:E=[3,2];break;case 16:E=[2,1];break;case 255:E=[o()<<8|o(),o()<<8|o()]}}return{width:Math.ceil(16*(v+1)-2*i-2*r),height:(2-y)*(b+1)*16-(y?2:4)*(s+a),pixelRatio:E}}readSliceType(){return this.readUByte(),this.readUEG(),this.readUEG()}}class vM extends fM{parseAVCPES(e,t,n,i,r){const s=this.parseAVCNALu(e,n.data);let a,o=this.VideoSample,l=!1;n.data=null,o&&s.length&&!e.audFound&&(this.pushAccessUnit(o,e),o=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts,"")),s.forEach((i=>{var s;switch(i.type){case 1:{let t=!1;a=!0;const r=i.data;if(l&&r.length>4){const e=new gM(r).readSliceType();2!==e&&4!==e&&7!==e&&9!==e||(t=!0)}var d;if(t)null!=(d=o)&&d.frame&&!o.key&&(this.pushAccessUnit(o,e),o=this.VideoSample=null);o||(o=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts,"")),o.frame=!0,o.key=t;break}case 5:a=!0,null!=(s=o)&&s.frame&&!o.key&&(this.pushAccessUnit(o,e),o=this.VideoSample=null),o||(o=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts,"")),o.key=!0,o.frame=!0;break;case 6:a=!0,oI(i.data,1,n.pts,t.samples);break;case 7:{var c,u;a=!0,l=!0;const t=i.data,n=new gM(t).readSPS();if(!e.sps||e.width!==n.width||e.height!==n.height||(null==(c=e.pixelRatio)?void 0:c[0])!==n.pixelRatio[0]||(null==(u=e.pixelRatio)?void 0:u[1])!==n.pixelRatio[1]){e.width=n.width,e.height=n.height,e.pixelRatio=n.pixelRatio,e.sps=[t],e.duration=r;const i=t.subarray(1,4);let s="avc1.";for(let e=0;e<3;e++){let t=i[e].toString(16);t.length<2&&(t="0"+t),s+=t}e.codec=s}break}case 8:a=!0,e.pps=[i.data];break;case 9:a=!0,e.audFound=!0,o&&this.pushAccessUnit(o,e),o=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts,"");break;case 12:a=!0;break;default:a=!1,o&&(o.debug+="unknown NAL "+i.type+" ")}if(o&&a){o.units.push(i)}})),i&&o&&(this.pushAccessUnit(o,e),this.VideoSample=null)}parseAVCNALu(e,t){const n=t.byteLength;let i=e.naluState||0;const r=i,s=[];let a,o,l,d=0,c=-1,u=0;for(-1===i&&(c=0,u=31&t[0],i=0,d=1);d<n;)if(a=t[d++],i)if(1!==i)if(a)if(1===a){if(o=d-i-1,c>=0){const e={data:t.subarray(c,o),type:u};s.push(e)}else{const n=this.getLastNalUnit(e.samples);n&&(r&&d<=4-r&&n.state&&(n.data=n.data.subarray(0,n.data.byteLength-r)),o>0&&(n.data=rI(n.data,t.subarray(0,o)),n.state=0))}d<n?(l=31&t[d],c=d,u=l,i=0):i=-1}else i=0;else i=3;else i=a?0:2;else i=a?0:1;if(c>=0&&i>=0){const e={data:t.subarray(c,n),type:u,state:i};s.push(e)}if(0===s.length){const n=this.getLastNalUnit(e.samples);n&&(n.data=rI(n.data,t))}return e.naluState=i,s}}class bM{constructor(e,t,n){this.keyData=void 0,this.decrypter=void 0,this.keyData=n,this.decrypter=new RD(t,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer)}decryptAacSample(e,t,n){const i=e[t].unit;if(i.length<=16)return;const r=i.subarray(16,i.length-i.length%16),s=r.buffer.slice(r.byteOffset,r.byteOffset+r.length);this.decryptBuffer(s).then((r=>{const s=new Uint8Array(r);i.set(s,16),this.decrypter.isSync()||this.decryptAacSamples(e,t+1,n)}))}decryptAacSamples(e,t,n){for(;;t++){if(t>=e.length)return void n();if(!(e[t].unit.length<32)&&(this.decryptAacSample(e,t,n),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const t=16*Math.floor((e.length-48)/160)+16,n=new Int8Array(t);let i=0;for(let t=32;t<e.length-16;t+=160,i+=16)n.set(e.subarray(t,t+16),i);return n}getAvcDecryptedUnit(e,t){const n=new Uint8Array(t);let i=0;for(let t=32;t<e.length-16;t+=160,i+=16)e.set(n.subarray(i,i+16),t);return e}decryptAvcSample(e,t,n,i,r){const s=lI(r.data),a=this.getAvcEncryptedData(s);this.decryptBuffer(a.buffer).then((a=>{r.data=this.getAvcDecryptedUnit(s,a),this.decrypter.isSync()||this.decryptAvcSamples(e,t,n+1,i)}))}decryptAvcSamples(e,t,n,i){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,n=0){if(t>=e.length)return void i();const r=e[t].units;for(;!(n>=r.length);n++){const s=r[n];if(!(s.data.length<=48||1!==s.type&&5!==s.type||(this.decryptAvcSample(e,t,n,i,s),this.decrypter.isSync())))return}}}}const yM=188;class EM{constructor(e,t,n){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=t,this.typeSupported=n,this.videoParser=new vM}static probe(e){const t=EM.syncOffset(e);return t>0&&jR.warn(`MPEG2-TS detected but first sync word found @ offset ${t}`),-1!==t}static syncOffset(e){const t=e.length;let n=Math.min(940,t-yM)+1,i=0;for(;i<n;){let r=!1,s=-1,a=0;for(let o=i;o<t;o+=yM){if(71!==e[o]||t-o!==yM&&71!==e[o+yM]){if(a)return-1;break}if(a++,-1===s&&(s=o,0!==s&&(n=Math.min(s+18612,e.length-yM)+1)),r||(r=0===TM(e,o)),r&&a>1&&(0===s&&a>2||o+yM>n))return s}i++}return-1}static createTrack(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:VC[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:"audio"===e?t:void 0}}resetInitSegment(e,t,n,i){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=EM.createTrack("video"),this._audioTrack=EM.createTrack("audio",i),this._id3Track=EM.createTrack("id3"),this._txtTrack=EM.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.remainderData=null,this.audioCodec=t,this.videoCodec=n,this._duration=i}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_videoTrack:t,_id3Track:n}=this;e&&(e.pesData=null),t&&(t.pesData=null),n&&(n.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,t,n=!1,i=!1){let r;n||(this.sampleAes=null);const s=this._videoTrack,a=this._audioTrack,o=this._id3Track,l=this._txtTrack;let d=s.pid,c=s.pesData,u=a.pid,h=o.pid,m=a.pesData,p=o.pesData,f=null,g=this.pmtParsed,v=this._pmtId,b=e.length;if(this.remainderData&&(b=(e=rI(this.remainderData,e)).length,this.remainderData=null),b<yM&&!i)return this.remainderData=e,{audioTrack:a,videoTrack:s,id3Track:o,textTrack:l};const y=Math.max(0,EM.syncOffset(e));b-=(b-y)%yM,b<e.byteLength&&!i&&(this.remainderData=new Uint8Array(e.buffer,b,e.buffer.byteLength-b));let E=0;for(let t=y;t<b;t+=yM)if(71===e[t]){const i=!!(64&e[t+1]),b=TM(e,t);let E;if((48&e[t+3])>>4>1){if(E=t+5+e[t+4],E===t+yM)continue}else E=t+4;switch(b){case d:i&&(c&&(r=kM(c))&&this.videoParser.parseAVCPES(s,l,r,!1,this._duration),c={data:[],size:0}),c&&(c.data.push(e.subarray(E,t+yM)),c.size+=t+yM-E);break;case u:if(i){if(m&&(r=kM(m)))switch(a.segmentCodec){case"aac":this.parseAACPES(a,r);break;case"mp3":this.parseMPEGPES(a,r);break;case"ac3":this.parseAC3PES(a,r)}m={data:[],size:0}}m&&(m.data.push(e.subarray(E,t+yM)),m.size+=t+yM-E);break;case h:i&&(p&&(r=kM(p))&&this.parseID3PES(o,r),p={data:[],size:0}),p&&(p.data.push(e.subarray(E,t+yM)),p.size+=t+yM-E);break;case 0:i&&(E+=e[E]+1),v=this._pmtId=_M(e,E);break;case v:{i&&(E+=e[E]+1);const r=AM(e,E,this.typeSupported,n);d=r.videoPid,d>0&&(s.pid=d,s.segmentCodec=r.segmentVideoCodec),u=r.audioPid,u>0&&(a.pid=u,a.segmentCodec=r.segmentAudioCodec),h=r.id3Pid,h>0&&(o.pid=h),null===f||g||(jR.warn(`MPEG-TS PMT found at ${t} after unknown PID '${f}'. Backtracking to sync byte @${y} to parse all TS packets.`),f=null,t=y-188),g=this.pmtParsed=!0;break}case 17:case 8191:break;default:f=b}}else E++;if(E>0){const e=new Error(`Found ${E} TS packet/s that do not start with 0x47`);this.observer.emit($R.ERROR,$R.ERROR,{type:HR.MEDIA_ERROR,details:VR.FRAG_PARSING_ERROR,fatal:!1,error:e,reason:e.message})}s.pesData=c,a.pesData=m,o.pesData=p;const T={audioTrack:a,videoTrack:s,id3Track:o,textTrack:l};return i&&this.extractRemainingSamples(T),T}flush(){const{remainderData:e}=this;let t;return this.remainderData=null,t=e?this.demux(e,-1,!1,!0):{videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t}extractRemainingSamples(e){const{audioTrack:t,videoTrack:n,id3Track:i,textTrack:r}=e,s=n.pesData,a=t.pesData,o=i.pesData;let l;if(s&&(l=kM(s))?(this.videoParser.parseAVCPES(n,r,l,!0,this._duration),n.pesData=null):n.pesData=s,a&&(l=kM(a))){switch(t.segmentCodec){case"aac":this.parseAACPES(t,l);break;case"mp3":this.parseMPEGPES(t,l);break;case"ac3":this.parseAC3PES(t,l)}t.pesData=null}else null!=a&&a.size&&jR.log("last AAC PES packet truncated,might overlap between fragments"),t.pesData=a;o&&(l=kM(o))?(this.parseID3PES(i,l),i.pesData=null):i.pesData=o}demuxSampleAes(e,t,n){const i=this.demux(e,n,!0,!this.config.progressive),r=this.sampleAes=new bM(this.observer,this.config,t);return this.decrypt(i,r)}decrypt(e,t){return new Promise((n=>{const{audioTrack:i,videoTrack:r}=e;i.samples&&"aac"===i.segmentCodec?t.decryptAacSamples(i.samples,0,(()=>{r.samples?t.decryptAvcSamples(r.samples,0,0,(()=>{n(e)})):n(e)})):r.samples&&t.decryptAvcSamples(r.samples,0,0,(()=>{n(e)}))}))}destroy(){this._duration=0}parseAACPES(e,t){let n=0;const i=this.aacOverFlow;let r,s,a,o=t.data;if(i){this.aacOverFlow=null;const t=i.missing,r=i.sample.unit.byteLength;if(-1===t)o=rI(i.sample.unit,o);else{const s=r-t;i.sample.unit.set(o.subarray(0,t),s),e.samples.push(i.sample),n=i.missing}}for(r=n,s=o.length;r<s-1&&!XD(o,r);r++);if(r!==n){let e;const t=r<s-1;e=t?`AAC PES did not start with ADTS header,offset:${r}`:"No ADTS header found in AAC PES";const n=new Error(e);if(jR.warn(`parsing error: ${e}`),this.observer.emit($R.ERROR,$R.ERROR,{type:HR.MEDIA_ERROR,details:VR.FRAG_PARSING_ERROR,fatal:!1,levelRetry:t,error:n,reason:e}),!t)return}if(ZD(e,this.observer,o,r,this.audioCodec),void 0!==t.pts)a=t.pts;else{if(!i)return void jR.warn("[tsdemuxer]: AAC PES unknown PTS");{const t=JD(e.samplerate);a=i.sample.pts+t}}let l,d=0;for(;r<s;){if(l=eM(e,o,r,a,d),r+=l.length,l.missing){this.aacOverFlow=l;break}for(d++;r<s-1&&!XD(o,r);r++);}}parseMPEGPES(e,t){const n=t.data,i=n.length;let r=0,s=0;const a=t.pts;if(void 0!==a)for(;s<i;)if(dM(n,s)){const t=aM(e,n,s,a,r);if(!t)break;s+=t.length,r++}else s++;else jR.warn("[tsdemuxer]: MPEG PES unknown PTS")}parseAC3PES(e,t){{const n=t.data,i=t.pts;if(void 0===i)return void jR.warn("[tsdemuxer]: AC3 PES unknown PTS");const r=n.length;let s,a=0,o=0;for(;o<r&&(s=pM(e,n,o,i,a++))>0;)o+=s}}parseID3PES(e,t){if(void 0===t.pts)return void jR.warn("[tsdemuxer]: ID3 PES unknown PTS");const n=NR({},t,{type:this._videoTrack?sx:ix,duration:Number.POSITIVE_INFINITY});e.samples.push(n)}}function TM(e,t){return((31&e[t+1])<<8)+e[t+2]}function _M(e,t){return(31&e[t+10])<<8|e[t+11]}function AM(e,t,n,i){const r={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},s=t+3+((15&e[t+1])<<8|e[t+2])-4;for(t+=12+((15&e[t+10])<<8|e[t+11]);t<s;){const s=TM(e,t),a=(15&e[t+3])<<8|e[t+4];switch(e[t]){case 207:if(!i){SM("ADTS AAC");break}case 15:-1===r.audioPid&&(r.audioPid=s);break;case 21:-1===r.id3Pid&&(r.id3Pid=s);break;case 219:if(!i){SM("H.264");break}case 27:-1===r.videoPid&&(r.videoPid=s,r.segmentVideoCodec="avc");break;case 3:case 4:n.mpeg||n.mp3?-1===r.audioPid&&(r.audioPid=s,r.segmentAudioCodec="mp3"):jR.log("MPEG audio found, not supported in this browser");break;case 193:if(!i){SM("AC-3");break}case 129:n.ac3?-1===r.audioPid&&(r.audioPid=s,r.segmentAudioCodec="ac3"):jR.log("AC-3 audio found, not supported in this browser");break;case 6:if(-1===r.audioPid&&a>0){let i=t+5,o=a;for(;o>2;){if(106===e[i])!0!==n.ac3?jR.log("AC-3 audio found, not supported in this browser for now"):(r.audioPid=s,r.segmentAudioCodec="ac3");const t=e[i+1]+2;i+=t,o-=t}}break;case 194:case 135:jR.warn("Unsupported EC-3 in M2TS found");break;case 36:jR.warn("Unsupported HEVC in M2TS found")}t+=a+5}return r}function SM(e){jR.log(`${e} with AES-128-CBC encryption found in unencrypted stream`)}function kM(e){let t,n,i,r,s,a=0;const o=e.data;if(!e||0===e.size)return null;for(;o[0].length<19&&o.length>1;)o[0]=rI(o[0],o[1]),o.splice(1,1);t=o[0];if(1===(t[0]<<16)+(t[1]<<8)+t[2]){if(n=(t[4]<<8)+t[5],n&&n>e.size-6)return null;const l=t[7];192&l&&(r=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2,64&l?(s=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2,r-s>54e5&&(jR.warn(`${Math.round((r-s)/9e4)}s delta between PTS and DTS, align them`),r=s)):s=r),i=t[8];let d=i+9;if(e.size<=d)return null;e.size-=d;const c=new Uint8Array(e.size);for(let e=0,n=o.length;e<n;e++){t=o[e];let n=t.byteLength;if(d){if(d>n){d-=n;continue}t=t.subarray(d),n-=d,d=0}c.set(t,a),a+=n}return n&&(n-=i+3),{data:c,pts:r,dts:s,len:n}}return null}class wM{static getSilentFrame(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}}}const LM=Math.pow(2,32)-1;class RM{static init(){let e;for(e in RM.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},RM.types)RM.types.hasOwnProperty(e)&&(RM.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);RM.HDLR_TYPES={video:t,audio:n};const i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),r=new Uint8Array([0,0,0,0,0,0,0,0]);RM.STTS=RM.STSC=RM.STCO=r,RM.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),RM.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),RM.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),RM.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const s=new Uint8Array([105,115,111,109]),a=new Uint8Array([97,118,99,49]),o=new Uint8Array([0,0,0,1]);RM.FTYP=RM.box(RM.types.ftyp,s,o,s,a),RM.DINF=RM.box(RM.types.dinf,RM.box(RM.types.dref,i))}static box(e,...t){let n=8,i=t.length;const r=i;for(;i--;)n+=t[i].byteLength;const s=new Uint8Array(n);for(s[0]=n>>24&255,s[1]=n>>16&255,s[2]=n>>8&255,s[3]=255&n,s.set(e,4),i=0,n=8;i<r;i++)s.set(t[i],n),n+=t[i].byteLength;return s}static hdlr(e){return RM.box(RM.types.hdlr,RM.HDLR_TYPES[e])}static mdat(e){return RM.box(RM.types.mdat,e)}static mdhd(e,t){t*=e;const n=Math.floor(t/(LM+1)),i=Math.floor(t%(LM+1));return RM.box(RM.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24,n>>16&255,n>>8&255,255&n,i>>24,i>>16&255,i>>8&255,255&i,85,196,0,0]))}static mdia(e){return RM.box(RM.types.mdia,RM.mdhd(e.timescale,e.duration),RM.hdlr(e.type),RM.minf(e))}static mfhd(e){return RM.box(RM.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))}static minf(e){return"audio"===e.type?RM.box(RM.types.minf,RM.box(RM.types.smhd,RM.SMHD),RM.DINF,RM.stbl(e)):RM.box(RM.types.minf,RM.box(RM.types.vmhd,RM.VMHD),RM.DINF,RM.stbl(e))}static moof(e,t,n){return RM.box(RM.types.moof,RM.mfhd(e),RM.traf(n,t))}static moov(e){let t=e.length;const n=[];for(;t--;)n[t]=RM.trak(e[t]);return RM.box.apply(null,[RM.types.moov,RM.mvhd(e[0].timescale,e[0].duration)].concat(n).concat(RM.mvex(e)))}static mvex(e){let t=e.length;const n=[];for(;t--;)n[t]=RM.trex(e[t]);return RM.box.apply(null,[RM.types.mvex,...n])}static mvhd(e,t){t*=e;const n=Math.floor(t/(LM+1)),i=Math.floor(t%(LM+1)),r=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24,n>>16&255,n>>8&255,255&n,i>>24,i>>16&255,i>>8&255,255&i,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return RM.box(RM.types.mvhd,r)}static sdtp(e){const t=e.samples||[],n=new Uint8Array(4+t.length);let i,r;for(i=0;i<t.length;i++)r=t[i].flags,n[i+4]=r.dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return RM.box(RM.types.sdtp,n)}static stbl(e){return RM.box(RM.types.stbl,RM.stsd(e),RM.box(RM.types.stts,RM.STTS),RM.box(RM.types.stsc,RM.STSC),RM.box(RM.types.stsz,RM.STSZ),RM.box(RM.types.stco,RM.STCO))}static avc1(e){let t,n,i,r=[],s=[];for(t=0;t<e.sps.length;t++)n=e.sps[t],i=n.byteLength,r.push(i>>>8&255),r.push(255&i),r=r.concat(Array.prototype.slice.call(n));for(t=0;t<e.pps.length;t++)n=e.pps[t],i=n.byteLength,s.push(i>>>8&255),s.push(255&i),s=s.concat(Array.prototype.slice.call(n));const a=RM.box(RM.types.avcC,new Uint8Array([1,r[3],r[4],r[5],255,224|e.sps.length].concat(r).concat([e.pps.length]).concat(s))),o=e.width,l=e.height,d=e.pixelRatio[0],c=e.pixelRatio[1];return RM.box(RM.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,o>>8&255,255&o,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),a,RM.box(RM.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),RM.box(RM.types.pasp,new Uint8Array([d>>24,d>>16&255,d>>8&255,255&d,c>>24,c>>16&255,c>>8&255,255&c])))}static esds(e){const t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))}static audioStsd(e){const t=e.samplerate;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,255&t,0,0])}static mp4a(e){return RM.box(RM.types.mp4a,RM.audioStsd(e),RM.box(RM.types.esds,RM.esds(e)))}static mp3(e){return RM.box(RM.types[".mp3"],RM.audioStsd(e))}static ac3(e){return RM.box(RM.types["ac-3"],RM.audioStsd(e),RM.box(RM.types.dac3,e.config))}static stsd(e){return"audio"===e.type?"mp3"===e.segmentCodec&&"mp3"===e.codec?RM.box(RM.types.stsd,RM.STSD,RM.mp3(e)):"ac3"===e.segmentCodec?RM.box(RM.types.stsd,RM.STSD,RM.ac3(e)):RM.box(RM.types.stsd,RM.STSD,RM.mp4a(e)):RM.box(RM.types.stsd,RM.STSD,RM.avc1(e))}static tkhd(e){const t=e.id,n=e.duration*e.timescale,i=e.width,r=e.height,s=Math.floor(n/(LM+1)),a=Math.floor(n%(LM+1));return RM.box(RM.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,0,0,0,0,s>>24,s>>16&255,s>>8&255,255&s,a>>24,a>>16&255,a>>8&255,255&a,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,255&i,0,0,r>>8&255,255&r,0,0]))}static traf(e,t){const n=RM.sdtp(e),i=e.id,r=Math.floor(t/(LM+1)),s=Math.floor(t%(LM+1));return RM.box(RM.types.traf,RM.box(RM.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i])),RM.box(RM.types.tfdt,new Uint8Array([1,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,s>>24,s>>16&255,s>>8&255,255&s])),RM.trun(e,n.length+16+20+8+16+8+8),n)}static trak(e){return e.duration=e.duration||4294967295,RM.box(RM.types.trak,RM.tkhd(e),RM.mdia(e))}static trex(e){const t=e.id;return RM.box(RM.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,t){const n=e.samples||[],i=n.length,r=12+16*i,s=new Uint8Array(r);let a,o,l,d,c,u;for(t+=8+r,s.set(["video"===e.type?1:0,0,15,1,i>>>24&255,i>>>16&255,i>>>8&255,255&i,t>>>24&255,t>>>16&255,t>>>8&255,255&t],0),a=0;a<i;a++)o=n[a],l=o.duration,d=o.size,c=o.flags,u=o.cts,s.set([l>>>24&255,l>>>16&255,l>>>8&255,255&l,d>>>24&255,d>>>16&255,d>>>8&255,255&d,c.isLeading<<2|c.dependsOn,c.isDependedOn<<6|c.hasRedundancy<<4|c.paddingValue<<1|c.isNonSync,61440&c.degradPrio,15&c.degradPrio,u>>>24&255,u>>>16&255,u>>>8&255,255&u],12+16*a);return RM.box(RM.types.trun,s)}static initSegment(e){RM.types||RM.init();const t=RM.moov(e);return rI(RM.FTYP,t)}}RM.types=void 0,RM.HDLR_TYPES=void 0,RM.STTS=void 0,RM.STSC=void 0,RM.STCO=void 0,RM.STSZ=void 0,RM.VMHD=void 0,RM.SMHD=void 0,RM.STSD=void 0,RM.FTYP=void 0,RM.DINF=void 0;const CM=9e4;function IM(e,t,n=1,i=!1){const r=e*t*n;return i?Math.round(r):r}function xM(e,t=!1){return IM(e,1e3,1/CM,t)}let DM,MM=null,OM=null;class PM{constructor(e,t,n,i=""){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=t,this.typeSupported=n,this.ISGenerated=!1,null===MM){const e=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);MM=e?parseInt(e[1]):0}if(null===OM){const e=navigator.userAgent.match(/Safari\/(\d+)/i);OM=e?parseInt(e[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){jR.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=e}resetNextTimestamp(){jR.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){jR.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let t=!1;const n=e.reduce(((e,n)=>{const i=n.pts-e;return i<-4294967296?(t=!0,NM(e,n.pts)):i>0?e:n.pts}),e[0].pts);return t&&jR.debug("PTS rollover detected"),n}remux(e,t,n,i,r,s,a,o){let l,d,c,u,h,m,p=r,f=r;const g=e.pid>-1,v=t.pid>-1,b=t.samples.length,y=e.samples.length>0,E=a&&b>0||b>1;if((!g||y)&&(!v||E)||this.ISGenerated||a){if(this.ISGenerated){var T,_,A,S;const e=this.videoTrackConfig;!e||t.width===e.width&&t.height===e.height&&(null==(T=t.pixelRatio)?void 0:T[0])===(null==(_=e.pixelRatio)?void 0:_[0])&&(null==(A=t.pixelRatio)?void 0:A[1])===(null==(S=e.pixelRatio)?void 0:S[1])||this.resetInitSegment()}else c=this.generateIS(e,t,r,s);const n=this.isVideoContiguous;let i,a=-1;if(E&&(a=function(e){for(let t=0;t<e.length;t++)if(e[t].key)return t;return-1}(t.samples),!n&&this.config.forceKeyFrameOnDiscontinuity))if(m=!0,a>0){jR.warn(`[mp4-remuxer]: Dropped ${a} out of ${b} video samples due to a missing keyframe`);const e=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(a),t.dropped+=a,f+=(t.samples[0].pts-e)/t.inputTimeScale,i=f}else-1===a&&(jR.warn(`[mp4-remuxer]: No keyframe found out of ${b} video samples`),m=!1);if(this.ISGenerated){if(y&&E){const n=this.getVideoStartPts(t.samples),i=(NM(e.samples[0].pts,n)-n)/t.inputTimeScale;p+=Math.max(0,i),f+=Math.max(0,-i)}if(y){if(e.samplerate||(jR.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),c=this.generateIS(e,t,r,s)),d=this.remuxAudio(e,p,this.isAudioContiguous,s,v||E||o===jI?f:void 0),E){const i=d?d.endPTS-d.startPTS:0;t.inputTimeScale||(jR.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),c=this.generateIS(e,t,r,s)),l=this.remuxVideo(t,f,n,i)}}else E&&(l=this.remuxVideo(t,f,n,0));l&&(l.firstKeyFrame=a,l.independent=-1!==a,l.firstKeyFramePTS=i)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(n.samples.length&&(h=FM(n,r,this._initPTS,this._initDTS)),i.samples.length&&(u=UM(i,r,this._initPTS))),{audio:d,video:l,initSegment:c,independent:m,text:u,id3:h}}generateIS(e,t,n,i){const r=e.samples,s=t.samples,a=this.typeSupported,o={},l=this._initPTS;let d,c,u,h=!l||i,m="audio/mp4";if(h&&(d=c=1/0),e.config&&r.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":a.mpeg?(m="audio/mpeg",e.codec=""):a.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3"}o.audio={id:"audio",container:m,codec:e.codec,initSegment:"mp3"===e.segmentCodec&&a.mpeg?new Uint8Array(0):RM.initSegment([e]),metadata:{channelCount:e.channelCount}},h&&(u=e.inputTimeScale,l&&u===l.timescale?h=!1:d=c=r[0].pts-Math.round(u*n))}if(t.sps&&t.pps&&s.length){if(t.timescale=t.inputTimeScale,o.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:RM.initSegment([t]),metadata:{width:t.width,height:t.height}},h)if(u=t.inputTimeScale,l&&u===l.timescale)h=!1;else{const e=this.getVideoStartPts(s),t=Math.round(u*n);c=Math.min(c,NM(s[0].dts,e)-t),d=Math.min(d,e-t)}this.videoTrackConfig={width:t.width,height:t.height,pixelRatio:t.pixelRatio}}if(Object.keys(o).length)return this.ISGenerated=!0,h?(this._initPTS={baseTime:d,timescale:u},this._initDTS={baseTime:c,timescale:u}):d=u=void 0,{tracks:o,initPTS:d,timescale:u}}remuxVideo(e,t,n,i){const r=e.inputTimeScale,s=e.samples,a=[],o=s.length,l=this._initPTS;let d,c,u=this.nextAvcDts,h=8,m=this.videoSampleDuration,p=Number.POSITIVE_INFINITY,f=Number.NEGATIVE_INFINITY,g=!1;if(!n||null===u){const e=t*r,i=s[0].pts-NM(s[0].dts,s[0].pts);MM&&null!==u&&Math.abs(e-i-u)<15e3?n=!0:u=e-i}const v=l.baseTime*r/l.timescale;for(let e=0;e<o;e++){const t=s[e];t.pts=NM(t.pts-v,u),t.dts=NM(t.dts-v,u),t.dts<s[e>0?e-1:e].dts&&(g=!0)}g&&s.sort((function(e,t){const n=e.dts-t.dts,i=e.pts-t.pts;return n||i})),d=s[0].dts,c=s[s.length-1].dts;const b=c-d,y=b?Math.round(b/(o-1)):m||e.inputTimeScale/30;if(n){const e=d-u,n=e>y,i=e<-1;if((n||i)&&(n?jR.warn(`AVC: ${xM(e,!0)} ms (${e}dts) hole between fragments detected at ${t.toFixed(3)}`):jR.warn(`AVC: ${xM(-e,!0)} ms (${e}dts) overlapping between fragments detected at ${t.toFixed(3)}`),!i||u>=s[0].pts||MM)){d=u;const t=s[0].pts-e;if(n)s[0].dts=d,s[0].pts=t;else for(let n=0;n<s.length&&!(s[n].dts>t);n++)s[n].dts-=e,s[n].pts-=e;jR.log(`Video: Initial PTS/DTS adjusted: ${xM(t,!0)}/${xM(d,!0)}, delta: ${xM(e,!0)} ms`)}}d=Math.max(0,d);let E=0,T=0,_=d;for(let e=0;e<o;e++){const t=s[e],n=t.units,i=n.length;let r=0;for(let e=0;e<i;e++)r+=n[e].data.length;T+=r,E+=i,t.length=r,t.dts<_?(t.dts=_,_+=y/4|0||1):_=t.dts,p=Math.min(t.pts,p),f=Math.max(t.pts,f)}c=s[o-1].dts;const A=T+4*E+8;let S;try{S=new Uint8Array(A)}catch(e){return void this.observer.emit($R.ERROR,$R.ERROR,{type:HR.MUX_ERROR,details:VR.REMUX_ALLOC_ERROR,fatal:!1,error:e,bytes:A,reason:`fail allocating video mdat ${A}`})}const k=new DataView(S.buffer);k.setUint32(0,A),S.set(RM.types.mdat,4);let w=!1,L=Number.POSITIVE_INFINITY,R=Number.POSITIVE_INFINITY,C=Number.NEGATIVE_INFINITY,I=Number.NEGATIVE_INFINITY;for(let e=0;e<o;e++){const t=s[e],n=t.units;let l,d=0;for(let e=0,t=n.length;e<t;e++){const t=n[e],i=t.data,r=t.data.byteLength;k.setUint32(h,r),h+=4,S.set(i,h),h+=r,d+=4+r}if(e<o-1)m=s[e+1].dts-t.dts,l=s[e+1].pts-t.pts;else{const n=this.config,a=e>0?t.dts-s[e-1].dts:y;if(l=e>0?t.pts-s[e-1].pts:y,n.stretchShortVideoTrack&&null!==this.nextAudioPts){const e=Math.floor(n.maxBufferHole*r),s=(i?p+i*r:this.nextAudioPts)-t.pts;s>e?(m=s-a,m<0?m=a:w=!0,jR.log(`[mp4-remuxer]: It is approximately ${s/90} ms to the next segment; using duration ${m/90} ms for the last video frame.`)):m=a}else m=a}const c=Math.round(t.pts-t.dts);L=Math.min(L,m),C=Math.max(C,m),R=Math.min(R,l),I=Math.max(I,l),a.push(new BM(t.key,m,d,c))}if(a.length)if(MM){if(MM<70){const e=a[0].flags;e.dependsOn=2,e.isNonSync=0}}else if(OM&&I-R<C-L&&y/C<.025&&0===a[0].cts){jR.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let e=d;for(let t=0,n=a.length;t<n;t++){const i=e+a[t].duration,r=e+a[t].cts;if(t<n-1){const e=i+a[t+1].cts;a[t].duration=e-r}else a[t].duration=t?a[t-1].duration:y;a[t].cts=0,e=i}}m=w||!m?y:m,this.nextAvcDts=u=c+m,this.videoSampleDuration=m,this.isVideoContiguous=!0;const x={data1:RM.moof(e.sequenceNumber++,d,NR({},e,{samples:a})),data2:S,startPTS:p/r,endPTS:(f+m)/r,startDTS:d/r,endDTS:u/r,type:"video",hasAudio:!1,hasVideo:!0,nb:a.length,dropped:e.dropped};return e.samples=[],e.dropped=0,x}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return 1152;case"ac3":return 1536;default:return 1024}}remuxAudio(e,t,n,i,r){const s=e.inputTimeScale,a=s/(e.samplerate?e.samplerate:s),o=this.getSamplesPerFrame(e),l=o*a,d=this._initPTS,c="mp3"===e.segmentCodec&&this.typeSupported.mpeg,u=[],h=void 0!==r;let m=e.samples,p=c?0:8,f=this.nextAudioPts||-1;const g=t*s,v=d.baseTime*s/d.timescale;if(this.isAudioContiguous=n=n||m.length&&f>0&&(i&&Math.abs(g-f)<9e3||Math.abs(NM(m[0].pts-v,g)-f)<20*l),m.forEach((function(e){e.pts=NM(e.pts-v,g)})),!n||f<0){if(m=m.filter((e=>e.pts>=0)),!m.length)return;f=0===r?0:i&&!h?Math.max(0,g):m[0].pts}if("aac"===e.segmentCodec){const t=this.config.maxAudioFramesDrift;for(let n=0,i=f;n<m.length;n++){const r=m[n],a=r.pts,o=a-i,d=Math.abs(1e3*o/s);if(o<=-t*l&&h)0===n&&(jR.warn(`Audio frame @ ${(a/s).toFixed(3)}s overlaps nextAudioPts by ${Math.round(1e3*o/s)} ms.`),this.nextAudioPts=f=i=a);else if(o>=t*l&&d<1e4&&h){let t=Math.round(o/l);i=a-t*l,i<0&&(t--,i+=l),0===n&&(this.nextAudioPts=f=i),jR.warn(`[mp4-remuxer]: Injecting ${t} audio frame @ ${(i/s).toFixed(3)}s due to ${Math.round(1e3*o/s)} ms gap.`);for(let s=0;s<t;s++){const t=Math.max(i,0);let s=wM.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);s||(jR.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),s=r.unit.subarray()),m.splice(n,0,{unit:s,pts:t}),i+=l,n++}}r.pts=i,i+=l}}let b,y=null,E=null,T=0,_=m.length;for(;_--;)T+=m[_].unit.byteLength;for(let t=0,i=m.length;t<i;t++){const i=m[t],r=i.unit;let s=i.pts;if(null!==E){u[t-1].duration=Math.round((s-E)/a)}else{if(n&&"aac"===e.segmentCodec&&(s=f),y=s,!(T>0))return;T+=p;try{b=new Uint8Array(T)}catch(e){return void this.observer.emit($R.ERROR,$R.ERROR,{type:HR.MUX_ERROR,details:VR.REMUX_ALLOC_ERROR,fatal:!1,error:e,bytes:T,reason:`fail allocating audio mdat ${T}`})}if(!c){new DataView(b.buffer).setUint32(0,T),b.set(RM.types.mdat,4)}}b.set(r,p);const l=r.byteLength;p+=l,u.push(new BM(!0,o,l,0)),E=s}const A=u.length;if(!A)return;const S=u[u.length-1];this.nextAudioPts=f=E+a*S.duration;const k=c?new Uint8Array(0):RM.moof(e.sequenceNumber++,y/a,NR({},e,{samples:u}));e.samples=[];const w=y/s,L=f/s,R={data1:k,data2:b,startPTS:w,endPTS:L,startDTS:w,endDTS:L,type:"audio",hasAudio:!0,hasVideo:!1,nb:A};return this.isAudioContiguous=!0,R}remuxEmptyAudio(e,t,n,i){const r=e.inputTimeScale,s=r/(e.samplerate?e.samplerate:r),a=this.nextAudioPts,o=this._initDTS,l=9e4*o.baseTime/o.timescale,d=(null!==a?a:i.startDTS*r)+l,c=i.endDTS*r+l,u=1024*s,h=Math.ceil((c-d)/u),m=wM.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(jR.warn("[mp4-remuxer]: remux empty Audio"),!m)return void jR.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec");const p=[];for(let e=0;e<h;e++){const t=d+e*u;p.push({unit:m,pts:t,dts:t})}return e.samples=p,this.remuxAudio(e,t,n,!1)}}function NM(e,t){let n;if(null===t)return e;for(n=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=n;return e}function FM(e,t,n,i){const r=e.samples.length;if(!r)return;const s=e.inputTimeScale;for(let a=0;a<r;a++){const r=e.samples[a];r.pts=NM(r.pts-n.baseTime*s/n.timescale,t*s)/s,r.dts=NM(r.dts-i.baseTime*s/i.timescale,t*s)/s}const a=e.samples;return e.samples=[],{samples:a}}function UM(e,t,n){const i=e.samples.length;if(!i)return;const r=e.inputTimeScale;for(let s=0;s<i;s++){const i=e.samples[s];i.pts=NM(i.pts-n.baseTime*r/n.timescale,t*r)/r}e.samples.sort(((e,t)=>e.pts-t.pts));const s=e.samples;return e.samples=[],{samples:s}}class BM{constructor(e,t,n,i){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=t,this.size=n,this.cts=i,this.flags={isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:e?2:1,isNonSync:e?0:1}}}function $M(e,t){const n=null==e?void 0:e.codec;if(n&&n.length>4)return n;if(t===eC){if("ec-3"===n||"ac-3"===n||"alac"===n)return n;if("fLaC"===n||"Opus"===n){return LI(n,!1)}const e="mp4a.40.5";return jR.info(`Parsed audio codec "${n}" or audio object type not handled. Using "${e}"`),e}return jR.warn(`Unhandled video codec "${n}"`),"hvc1"===n||"hev1"===n?"hvc1.1.6.L120.90":"av01"===n?"av01.0.04M.08":"avc1.42e01e"}try{DM=self.performance.now.bind(self.performance)}catch(e){jR.debug("Unable to use Performance API on this environment"),DM=null==cC?void 0:cC.Date.now}const HM=[{demux:class{constructor(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}resetTimeStamp(){}resetInitSegment(e,t,n,i){const r=this.videoTrack=GD("video",1),s=this.audioTrack=GD("audio",1),a=this.txtTrack=GD("text",1);if(this.id3Track=GD("id3",1),this.timeOffset=0,null==e||!e.byteLength)return;const o=QC(e);if(o.video){const{id:e,timescale:t,codec:n}=o.video;r.id=e,r.timescale=a.timescale=t,r.codec=n}if(o.audio){const{id:e,timescale:t,codec:n}=o.audio;s.id=e,s.timescale=t,s.codec=n}a.id=VC.text,r.sampleDuration=0,r.duration=s.duration=i}resetContiguity(){this.remainderData=null}static probe(e){return function(e){const t=e.byteLength;for(let n=0;n<t;){const i=KC(e,n);if(i>8&&109===e[n+4]&&111===e[n+5]&&111===e[n+6]&&102===e[n+7])return!0;n=i>1?n+i:t}return!1}(e)}demux(e,t){this.timeOffset=t;let n=e;const i=this.videoTrack,r=this.txtTrack;if(this.config.progressive){this.remainderData&&(n=rI(this.remainderData,e));const t=function(e){const t={valid:null,remainder:null},n=zC(e,["moof"]);if(n.length<2)return t.remainder=e,t;const i=n[n.length-1];return t.valid=_C(e,0,i.byteOffset-8),t.remainder=_C(e,i.byteOffset-8),t}(n);this.remainderData=t.remainder,i.samples=t.valid||new Uint8Array}else i.samples=n;const s=this.extractID3Track(i,t);return r.samples=sI(t,i),{videoTrack:i,audioTrack:this.audioTrack,id3Track:s,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,t=this.videoTrack,n=this.txtTrack;t.samples=this.remainderData||new Uint8Array,this.remainderData=null;const i=this.extractID3Track(t,this.timeOffset);return n.samples=sI(e,t),{videoTrack:t,audioTrack:GD(),id3Track:i,textTrack:GD()}}extractID3Track(e,t){const n=this.id3Track;if(e.samples.length){const i=zC(e.samples,["emsg"]);i&&i.forEach((e=>{const i=function(e){const t=e[0];let n="",i="",r=0,s=0,a=0,o=0,l=0,d=0;if(0===t){for(;"\0"!==WC(e.subarray(d,d+1));)n+=WC(e.subarray(d,d+1)),d+=1;for(n+=WC(e.subarray(d,d+1)),d+=1;"\0"!==WC(e.subarray(d,d+1));)i+=WC(e.subarray(d,d+1)),d+=1;i+=WC(e.subarray(d,d+1)),d+=1,r=KC(e,12),s=KC(e,16),o=KC(e,20),l=KC(e,24),d=28}else if(1===t){d+=4,r=KC(e,d),d+=4;const t=KC(e,d);d+=4;const s=KC(e,d);for(d+=4,a=2**32*t+s,UR(a)||(a=Number.MAX_SAFE_INTEGER,jR.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),o=KC(e,d),d+=4,l=KC(e,d),d+=4;"\0"!==WC(e.subarray(d,d+1));)n+=WC(e.subarray(d,d+1)),d+=1;for(n+=WC(e.subarray(d,d+1)),d+=1;"\0"!==WC(e.subarray(d,d+1));)i+=WC(e.subarray(d,d+1)),d+=1;i+=WC(e.subarray(d,d+1)),d+=1}return{schemeIdUri:n,value:i,timeScale:r,presentationTime:a,presentationTimeDelta:s,eventDuration:o,id:l,payload:e.subarray(d,e.byteLength)}}(e);if(uM.test(i.schemeIdUri)){const e=FR(i.presentationTime)?i.presentationTime/i.timeScale:t+i.presentationTimeDelta/i.timeScale;let r=4294967295===i.eventDuration?Number.POSITIVE_INFINITY:i.eventDuration/i.timeScale;r<=.001&&(r=Number.POSITIVE_INFINITY);const s=i.payload;n.samples.push({data:s,len:s.byteLength,dts:e,pts:e,type:sx,duration:r})}}))}return n}demuxSampleAes(e,t,n){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){}},remux:class{constructor(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null}destroy(){}resetTimeStamp(e){this.initPTS=e,this.lastEndTime=null}resetNextTimestamp(){this.lastEndTime=null}resetInitSegment(e,t,n,i){this.audioCodec=t,this.videoCodec=n,this.generateInitSegment(function(e,t){if(!e||!t)return e;const n=t.keyId;n&&t.isCommonEncryption&&zC(e,["moov","trak"]).forEach((e=>{const t=zC(e,["mdia","minf","stbl","stsd"])[0].subarray(8);let i=zC(t,["enca"]);const r=i.length>0;r||(i=zC(t,["encv"])),i.forEach((e=>{zC(r?e.subarray(28):e.subarray(78),["sinf"]).forEach((e=>{const t=nI(e);if(t){const e=t.subarray(8,24);e.some((e=>0!==e))||(jR.log(`[eme] Patching keyId in 'enc${r?"a":"v"}>sinf>>tenc' box: ${BC(e)} -> ${BC(n)}`),t.set(n,8))}}))}))}));return e}(e,i)),this.emitInitSegment=!0}generateInitSegment(e){let{audioCodec:t,videoCodec:n}=this;if(null==e||!e.byteLength)return this.initTracks=void 0,void(this.initData=void 0);const i=this.initData=QC(e);i.audio&&(t=$M(i.audio,eC)),i.video&&(n=$M(i.video,tC));const r={};i.audio&&i.video?r.audiovideo={container:"video/mp4",codec:t+","+n,initSegment:e,id:"main"}:i.audio?r.audio={container:"audio/mp4",codec:t,initSegment:e,id:"audio"}:i.video?r.video={container:"video/mp4",codec:n,initSegment:e,id:"main"}:jR.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=r}remux(e,t,n,i,r,s){var a,o;let{initPTS:l,lastEndTime:d}=this;const c={audio:void 0,video:void 0,text:i,id3:n,initSegment:void 0};FR(d)||(d=this.lastEndTime=r||0);const u=t.samples;if(null==u||!u.length)return c;const h={initPTS:void 0,timescale:1};let m=this.initData;if(null!=(a=m)&&a.length||(this.generateInitSegment(u),m=this.initData),null==(o=m)||!o.length)return jR.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),c;this.emitInitSegment&&(h.tracks=this.initTracks,this.emitInitSegment=!1);const p=function(e,t){let n=0,i=0,r=0;const s=zC(e,["moof","traf"]);for(let e=0;e<s.length;e++){const a=s[e],o=zC(a,["tfhd"])[0],l=t[KC(o,4)];if(!l)continue;const d=l.default,c=KC(o,0)|(null==d?void 0:d.flags);let u=null==d?void 0:d.duration;8&c&&(u=KC(o,2&c?12:8));const h=l.timescale||9e4,m=zC(a,["trun"]);for(let e=0;e<m.length;e++)n=iI(m[e]),!n&&u&&(n=u*KC(m[e],4)),l.type===tC?i+=n/h:l.type===eC&&(r+=n/h)}if(0===i&&0===r){let t=1/0,n=0,i=0;const r=zC(e,["sidx"]);for(let e=0;e<r.length;e++){const s=XC(r[e]);if(null!=s&&s.references){t=Math.min(t,s.earliestPresentationTime/s.timescale);const e=s.references.reduce(((e,t)=>e+t.info.duration||0),0);n=Math.max(n,e+s.earliestPresentationTime/s.timescale),i=n-t}}if(i&&FR(i))return i}return i||r}(u,m),f=function(e,t){return zC(t,["moof","traf"]).reduce(((t,n)=>{const i=zC(n,["tfdt"])[0],r=i[0],s=zC(n,["tfhd"]).reduce(((t,n)=>{const s=KC(n,4),a=e[s];if(a){let e=KC(i,4);if(1===r){if(e===$C)return jR.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"),t;e*=$C+1,e+=KC(i,8)}const n=e/(a.timescale||9e4);if(FR(n)&&(null===t||n<t))return n}return t}),null);return null!==s&&FR(s)&&(null===t||s<t)?s:t}),null)}(m,u),g=null===f?r:f;(function(e,t,n,i){if(null===e)return!0;const r=Math.max(i,1),s=t-e.baseTime/e.timescale;return Math.abs(s-n)>r}(l,g,r,p)||h.timescale!==l.timescale&&s)&&(h.initPTS=g-r,l&&1===l.timescale&&jR.warn("Adjusting initPTS by "+(h.initPTS-l.baseTime)),this.initPTS=l={baseTime:h.initPTS,timescale:1});const v=e?g-l.baseTime/l.timescale:d,b=v+p;!function(e,t,n){zC(t,["moof","traf"]).forEach((t=>{zC(t,["tfhd"]).forEach((i=>{const r=KC(i,4),s=e[r];if(!s)return;const a=s.timescale||9e4;zC(t,["tfdt"]).forEach((e=>{const t=e[0],i=n*a;if(i){let n=KC(e,4);if(0===t)n-=i,n=Math.max(n,0),YC(e,4,n);else{n*=Math.pow(2,32),n+=KC(e,8),n-=i,n=Math.max(n,0);const t=Math.floor(n/($C+1)),r=Math.floor(n%($C+1));YC(e,4,t),YC(e,8,r)}}}))}))}))}(m,u,l.baseTime/l.timescale),p>0?this.lastEndTime=b:(jR.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const y=!!m.audio,E=!!m.video;let T="";y&&(T+="audio"),E&&(T+="video");const _={data1:u,startPTS:v,startDTS:v,endPTS:b,endDTS:b,type:T,hasAudio:y,hasVideo:E,nb:1,dropped:0};return c.audio="audio"===_.type?_:void 0,c.video="audio"!==_.type?_:void 0,c.initSegment=h,c.id3=FM(n,r,l,l),i.samples.length&&(c.text=UM(i,r,l)),c}}},{demux:EM,remux:PM},{demux:class extends KD{constructor(e,t){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=t}resetInitSegment(e,t,n,i){super.resetInitSegment(e,t,n,i),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const t=kC(e,0);let n=(null==t?void 0:t.length)||0;if(cM(e,n))return!1;for(let t=e.length;n<t;n++)if(QD(e,n))return jR.log("ADTS sync word found !"),!0;return!1}canParse(e,t){return function(e,t){return function(e,t){return t+5<e.length}(e,t)&&jD(e,t)&&zD(e,t)<=e.length-t}(e,t)}appendFrame(e,t,n){ZD(e,this.observer,t,n,e.manifestCodec);const i=eM(e,t,n,this.basePTS,this.frameIndex);if(i&&0===i.missing)return i}},remux:PM},{demux:class extends KD{resetInitSegment(e,t,n,i){super.resetInitSegment(e,t,n,i),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const t=kC(e,0);let n=(null==t?void 0:t.length)||0;if(t&&11===e[n]&&119===e[n+1]&&void 0!==RC(t)&&hM(e,n)<=16)return!1;for(let t=e.length;n<t;n++)if(cM(e,n))return jR.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,t){return function(e,t){return lM(e,t)&&4<=e.length-t}(e,t)}appendFrame(e,t,n){if(null!==this.basePTS)return aM(e,t,n,this.basePTS,this.frameIndex)}},remux:PM}];HM.splice(2,0,{demux:mM,remux:PM});class VM{constructor(e,t,n,i,r){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=n,this.vendor=i,this.id=r}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,t,n,i){const r=n.transmuxing;r.executeStart=DM();let s=new Uint8Array(e);const{currentTransmuxState:a,transmuxConfig:o}=this;i&&(this.currentTransmuxState=i);const{contiguous:l,discontinuity:d,trackSwitch:c,accurateTimeOffset:u,timeOffset:h,initSegmentChange:m}=i||a,{audioCodec:p,videoCodec:f,defaultInitPts:g,duration:v,initSegmentData:b}=o,y=function(e,t){let n=null;e.byteLength>0&&null!=(null==t?void 0:t.key)&&null!==t.iv&&null!=t.method&&(n=t);return n}(s,t);if(y&&"AES-128"===y.method){const e=this.getDecrypter();if(!e.isSync())return this.decryptionPromise=e.webCryptoDecrypt(s,y.key.buffer,y.iv.buffer).then((e=>{const t=this.push(e,null,n);return this.decryptionPromise=null,t})),this.decryptionPromise;{let t=e.softwareDecrypt(s,y.key.buffer,y.iv.buffer);if(n.part>-1&&(t=e.flush()),!t)return r.executeEnd=DM(),WM(n);s=new Uint8Array(t)}}const E=this.needsProbing(d,c);if(E){const e=this.configureTransmuxer(s);if(e)return jR.warn(`[transmuxer] ${e.message}`),this.observer.emit($R.ERROR,$R.ERROR,{type:HR.MEDIA_ERROR,details:VR.FRAG_PARSING_ERROR,fatal:!1,error:e,reason:e.message}),r.executeEnd=DM(),WM(n)}(d||c||m||E)&&this.resetInitSegment(b,p,f,v,t),(d||m||E)&&this.resetInitialTimestamp(g),l||this.resetContiguity();const T=this.transmux(s,y,h,u,n),_=this.currentTransmuxState;return _.contiguous=!0,_.discontinuity=!1,_.trackSwitch=!1,r.executeEnd=DM(),T}flush(e){const t=e.transmuxing;t.executeStart=DM();const{decrypter:n,currentTransmuxState:i,decryptionPromise:r}=this;if(r)return r.then((()=>this.flush(e)));const s=[],{timeOffset:a}=i;if(n){const t=n.flush();t&&s.push(this.push(t,null,e))}const{demuxer:o,remuxer:l}=this;if(!o||!l)return t.executeEnd=DM(),[WM(e)];const d=o.flush(a);return GM(d)?d.then((t=>(this.flushRemux(s,t,e),s))):(this.flushRemux(s,d,e),s)}flushRemux(e,t,n){const{audioTrack:i,videoTrack:r,id3Track:s,textTrack:a}=t,{accurateTimeOffset:o,timeOffset:l}=this.currentTransmuxState;jR.log(`[transmuxer.ts]: Flushed fragment ${n.sn}${n.part>-1?" p: "+n.part:""} of level ${n.level}`);const d=this.remuxer.remux(i,r,s,a,l,o,!0,this.id);e.push({remuxResult:d,chunkMeta:n}),n.transmuxing.executeEnd=DM()}resetInitialTimestamp(e){const{demuxer:t,remuxer:n}=this;t&&n&&(t.resetTimeStamp(e),n.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:t}=this;e&&t&&(e.resetContiguity(),t.resetNextTimestamp())}resetInitSegment(e,t,n,i,r){const{demuxer:s,remuxer:a}=this;s&&a&&(s.resetInitSegment(e,t,n,i),a.resetInitSegment(e,t,n,r))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,t,n,i,r){let s;return s=t&&"SAMPLE-AES"===t.method?this.transmuxSampleAes(e,t,n,i,r):this.transmuxUnencrypted(e,n,i,r),s}transmuxUnencrypted(e,t,n,i){const{audioTrack:r,videoTrack:s,id3Track:a,textTrack:o}=this.demuxer.demux(e,t,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(r,s,a,o,t,n,!1,this.id),chunkMeta:i}}transmuxSampleAes(e,t,n,i,r){return this.demuxer.demuxSampleAes(e,t,n).then((e=>({remuxResult:this.remuxer.remux(e.audioTrack,e.videoTrack,e.id3Track,e.textTrack,n,i,!1,this.id),chunkMeta:r})))}configureTransmuxer(e){const{config:t,observer:n,typeSupported:i,vendor:r}=this;let s;for(let t=0,n=HM.length;t<n;t++){var a;if(null!=(a=HM[t].demux)&&a.probe(e)){s=HM[t];break}}if(!s)return new Error("Failed to find demuxer by probing fragment data");const o=this.demuxer,l=this.remuxer,d=s.remux,c=s.demux;l&&l instanceof d||(this.remuxer=new d(n,t,i,r)),o&&o instanceof c||(this.demuxer=new c(n,t,i),this.probe=c.probe)}needsProbing(e,t){return!this.demuxer||!this.remuxer||e||t}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new RD(this.config)),e}}const WM=e=>({remuxResult:{},chunkMeta:e});function GM(e){return"then"in e&&e.then instanceof Function}class KM{constructor(e,t,n,i,r){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=n,this.duration=i,this.defaultInitPts=r||null}}class qM{constructor(e,t,n,i,r,s){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=n,this.trackSwitch=i,this.timeOffset=r,this.initSegmentChange=s}}var jM={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,n="~";function i(){}function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function s(e,t,i,s,a){if("function"!=typeof i)throw new TypeError("The listener must be a function");var o=new r(i,s||e,a),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function o(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(n=!1)),o.prototype.eventNames=function(){var e,i,r=[];if(0===this._eventsCount)return r;for(i in e=this._events)t.call(e,i)&&r.push(n?i.slice(1):i);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},o.prototype.listeners=function(e){var t=n?n+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,s=i.length,a=new Array(s);r<s;r++)a[r]=i[r].fn;return a},o.prototype.listenerCount=function(e){var t=n?n+e:e,i=this._events[t];return i?i.fn?1:i.length:0},o.prototype.emit=function(e,t,i,r,s,a){var o=n?n+e:e;if(!this._events[o])return!1;var l,d,c=this._events[o],u=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),u){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,i),!0;case 4:return c.fn.call(c.context,t,i,r),!0;case 5:return c.fn.call(c.context,t,i,r,s),!0;case 6:return c.fn.call(c.context,t,i,r,s,a),!0}for(d=1,l=new Array(u-1);d<u;d++)l[d-1]=arguments[d];c.fn.apply(c.context,l)}else{var h,m=c.length;for(d=0;d<m;d++)switch(c[d].once&&this.removeListener(e,c[d].fn,void 0,!0),u){case 1:c[d].fn.call(c[d].context);break;case 2:c[d].fn.call(c[d].context,t);break;case 3:c[d].fn.call(c[d].context,t,i);break;case 4:c[d].fn.call(c[d].context,t,i,r);break;default:if(!l)for(h=1,l=new Array(u-1);h<u;h++)l[h-1]=arguments[h];c[d].fn.apply(c[d].context,l)}}return!0},o.prototype.on=function(e,t,n){return s(this,e,t,n,!1)},o.prototype.once=function(e,t,n){return s(this,e,t,n,!0)},o.prototype.removeListener=function(e,t,i,r){var s=n?n+e:e;if(!this._events[s])return this;if(!t)return a(this,s),this;var o=this._events[s];if(o.fn)o.fn!==t||r&&!o.once||i&&o.context!==i||a(this,s);else{for(var l=0,d=[],c=o.length;l<c;l++)(o[l].fn!==t||r&&!o[l].once||i&&o[l].context!==i)&&d.push(o[l]);d.length?this._events[s]=1===d.length?d[0]:d:a(this,s)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new i,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,e.exports=o}(jM);var YM=SR(jM.exports);class zM{constructor(e,t,n,i){this.error=null,this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;const r=e.config;this.hls=e,this.id=t,this.useWorker=!!r.enableWorker,this.onTransmuxComplete=n,this.onFlush=i;const s=(e,t)=>{(t=t||{}).frag=this.frag,t.id=this.id,e===$R.ERROR&&(this.error=t.error),this.hls.trigger(e,t)};this.observer=new YM,this.observer.on($R.FRAG_DECRYPTED,s),this.observer.on($R.ERROR,s);const a=bI(r.preferManagedMediaSource)||{isTypeSupported:()=>!1},o={mpeg:a.isTypeSupported("audio/mpeg"),mp3:a.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:a.isTypeSupported('audio/mp4; codecs="ac-3"')},l=navigator.vendor;if(this.useWorker&&"undefined"!=typeof Worker){if(r.workerPath||"function"==typeof __HLS_WORKER_BUNDLE__){try{r.workerPath?(jR.log(`loading Web Worker ${r.workerPath} for "${t}"`),this.workerContext=function(e){const t=new self.URL(e,self.location.href).href;return{worker:new self.Worker(t),scriptURL:t}}(r.workerPath)):(jR.log(`injecting Web Worker for "${t}"`),this.workerContext=function(){const e=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),t=self.URL.createObjectURL(e);return{worker:new self.Worker(t),objectURL:t}}()),this.onwmsg=e=>this.onWorkerMessage(e);const{worker:e}=this.workerContext;e.addEventListener("message",this.onwmsg),e.onerror=e=>{const n=new Error(`${e.message}  (${e.filename}:${e.lineno})`);r.enableWorker=!1,jR.warn(`Error in "${t}" Web Worker, fallback to inline`),this.hls.trigger($R.ERROR,{type:HR.OTHER_ERROR,details:VR.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:n})},e.postMessage({cmd:"init",typeSupported:o,vendor:l,id:t,config:JSON.stringify(r)})}catch(e){jR.warn(`Error setting up "${t}" Web Worker, fallback to inline`,e),this.resetWorker(),this.error=null,this.transmuxer=new VM(this.observer,o,r,l,t)}return}}this.transmuxer=new VM(this.observer,o,r,l,t)}resetWorker(){if(this.workerContext){const{worker:e,objectURL:t}=this.workerContext;t&&self.URL.revokeObjectURL(t),e.removeEventListener("message",this.onwmsg),e.onerror=null,e.terminate(),this.workerContext=null}}destroy(){if(this.workerContext)this.resetWorker(),this.onwmsg=void 0;else{const e=this.transmuxer;e&&(e.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null}push(e,t,n,i,r,s,a,o,l,d){var c,u;l.transmuxing.start=self.performance.now();const{transmuxer:h}=this,m=s?s.start:r.start,p=r.decryptdata,f=this.frag,g=!(f&&r.cc===f.cc),v=!(f&&l.level===f.level),b=f?l.sn-f.sn:-1,y=this.part?l.part-this.part.index:-1,E=0===b&&l.id>1&&l.id===(null==f?void 0:f.stats.chunkCount),T=!v&&(1===b||0===b&&(1===y||E&&y<=0)),_=self.performance.now();(v||b||0===r.stats.parsing.start)&&(r.stats.parsing.start=_),!s||!y&&T||(s.stats.parsing.start=_);const A=!(f&&(null==(c=r.initSegment)?void 0:c.url)===(null==(u=f.initSegment)?void 0:u.url)),S=new qM(g,T,o,v,m,A);if(!T||g||A){jR.log(`[transmuxer-interface, ${r.type}]: Starting new transmux session for sn: ${l.sn} p: ${l.part} level: ${l.level} id: ${l.id}\n        discontinuity: ${g}\n        trackSwitch: ${v}\n        contiguous: ${T}\n        accurateTimeOffset: ${o}\n        timeOffset: ${m}\n        initSegmentChange: ${A}`);const e=new KM(n,i,t,a,d);this.configureTransmuxer(e)}if(this.frag=r,this.part=s,this.workerContext)this.workerContext.worker.postMessage({cmd:"demux",data:e,decryptdata:p,chunkMeta:l,state:S},e instanceof ArrayBuffer?[e]:[]);else if(h){const t=h.push(e,p,l,S);GM(t)?(h.async=!0,t.then((e=>{this.handleTransmuxComplete(e)})).catch((e=>{this.transmuxerError(e,l,"transmuxer-interface push error")}))):(h.async=!1,this.handleTransmuxComplete(t))}}flush(e){e.transmuxing.start=self.performance.now();const{transmuxer:t}=this;if(this.workerContext)this.workerContext.worker.postMessage({cmd:"flush",chunkMeta:e});else if(t){let n=t.flush(e);GM(n)||t.async?(GM(n)||(n=Promise.resolve(n)),n.then((t=>{this.handleFlushResult(t,e)})).catch((t=>{this.transmuxerError(t,e,"transmuxer-interface flush error")}))):this.handleFlushResult(n,e)}}transmuxerError(e,t,n){this.hls&&(this.error=e,this.hls.trigger($R.ERROR,{type:HR.MEDIA_ERROR,details:VR.FRAG_PARSING_ERROR,chunkMeta:t,fatal:!1,error:e,err:e,reason:n}))}handleFlushResult(e,t){e.forEach((e=>{this.handleTransmuxComplete(e)})),this.onFlush(t)}onWorkerMessage(e){const t=e.data,n=this.hls;switch(t.event){case"init":{var i;const e=null==(i=this.workerContext)?void 0:i.objectURL;e&&self.URL.revokeObjectURL(e);break}case"transmuxComplete":this.handleTransmuxComplete(t.data);break;case"flush":this.onFlush(t.data);break;case"workerLog":jR[t.data.logType]&&jR[t.data.logType](t.data.message);break;default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,n.trigger(t.event,t.data)}}configureTransmuxer(e){const{transmuxer:t}=this;this.workerContext?this.workerContext.worker.postMessage({cmd:"configure",config:e}):t&&t.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}function XM(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!QM(e[n].attrs,t[n].attrs))return!1;return!0}function QM(e,t,n){const i=e["STABLE-RENDITION-ID"];return i&&!n?i===t["STABLE-RENDITION-ID"]:!(n||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some((n=>e[n]!==t[n]))}function ZM(e,t){return t.label.toLowerCase()===e.name.toLowerCase()&&(!t.language||t.language.toLowerCase()===(e.lang||"").toLowerCase())}class JM{constructor(e){this.buffered=void 0;const t=(t,n,i)=>{if((n>>>=0)>i-1)throw new DOMException(`Failed to execute '${t}' on 'TimeRanges': The index provided (${n}) is greater than the maximum bound (${i})`);return e[n][t]};this.buffered={get length(){return e.length},end:n=>t("end",n,e.length),start:n=>t("start",n,e.length)}}}class eO{constructor(e){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=e}append(e,t,n){const i=this.queues[t];i.push(e),1!==i.length||n||this.executeNext(t)}insertAbort(e,t){this.queues[t].unshift(e),this.executeNext(t)}appendBlocker(e){let t;const n=new Promise((e=>{t=e})),i={execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};return this.append(i,e),n}executeNext(e){const t=this.queues[e];if(t.length){const n=t[0];try{n.execute()}catch(t){jR.warn(`[buffer-operation-queue]: Exception executing "${e}" SourceBuffer operation: ${t}`),n.onError(t);const i=this.buffers[e];null!=i&&i.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){this.queues[e].shift(),this.executeNext(e)}current(e){return this.queues[e][0]}}const tO=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/;function nO(e){const t=e.querySelectorAll("source");[].slice.call(t).forEach((t=>{e.removeChild(t)}))}const iO={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},rO=function(e){let t=e;return iO.hasOwnProperty(e)&&(t=iO[e]),String.fromCharCode(t)},sO=15,aO=100,oO={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},lO={17:2,18:4,21:6,22:8,23:10,19:13,20:15},dO={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},cO={25:2,26:4,29:6,30:8,31:10,27:13,28:15},uO=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class hO{constructor(){this.time=null,this.verboseLevel=0}log(e,t){if(this.verboseLevel>=e){const n="function"==typeof t?t():t;jR.log(`${this.time} [${e}] ${n}`)}}}const mO=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].toString(16));return t};class pO{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const t=["foreground","underline","italics","background","flash"];for(let n=0;n<t.length;n++){const i=t[n];e.hasOwnProperty(i)&&(this[i]=e[i])}}isDefault(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class fO{constructor(){this.uchar=" ",this.penState=new pO}reset(){this.uchar=" ",this.penState.reset()}setChar(e,t){this.uchar=e,this.penState.copy(t)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return" "===this.uchar&&this.penState.isDefault()}}class gO{constructor(e){this.chars=[],this.pos=0,this.currPenState=new pO,this.cueStartTime=null,this.logger=void 0;for(let e=0;e<aO;e++)this.chars.push(new fO);this.logger=e}equals(e){for(let t=0;t<aO;t++)if(!this.chars[t].equals(e.chars[t]))return!1;return!0}copy(e){for(let t=0;t<aO;t++)this.chars[t].copy(e.chars[t])}isEmpty(){let e=!0;for(let t=0;t<aO;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>aO&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=aO)}moveCursor(e){const t=this.pos+e;if(e>1)for(let e=this.pos+1;e<t+1;e++)this.chars[e].setPenState(this.currPenState);this.setCursor(t)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const t=rO(e);this.pos>=aO?this.logger.log(0,(()=>"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!")):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))}clearFromPos(e){let t;for(t=e;t<aO;t++)this.chars[t].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let t=!0;for(let n=0;n<aO;n++){const i=this.chars[n].uchar;" "!==i&&(t=!1),e.push(i)}return t?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e);this.chars[this.pos].setPenState(this.currPenState)}}class vO{constructor(e){this.rows=[],this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let t=0;t<sO;t++)this.rows.push(new gO(e));this.logger=e}reset(){for(let e=0;e<sO;e++)this.rows[e].clear();this.currRow=14}equals(e){let t=!0;for(let n=0;n<sO;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t}copy(e){for(let t=0;t<sO;t++)this.rows[t].copy(e.rows[t])}isEmpty(){let e=!0;for(let t=0;t<sO;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e);this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,(()=>"pacData = "+JSON.stringify(e)));let t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(let e=0;e<sO;e++)this.rows[e].clear();const e=this.currRow+1-this.nrRollUpRows,n=this.lastOutputScreen;if(n){const i=n.rows[e].cueStartTime,r=this.logger.time;if(null!==i&&null!==r&&i<r)for(let i=0;i<this.nrRollUpRows;i++)this.rows[t-this.nrRollUpRows+i+1].copy(n.rows[e+i])}}this.currRow=t;const n=this.rows[this.currRow];if(null!==e.indent){const t=e.indent,i=Math.max(t-1,0);n.setCursor(e.indent),e.color=n.chars[i].penState.foreground}const i={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(i)}setBkgData(e){this.logger.log(2,(()=>"bkgData = "+JSON.stringify(e))),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(null===this.nrRollUpRows)return void this.logger.log(3,"roll_up but nrRollUpRows not set yet");this.logger.log(1,(()=>this.getDisplayText()));const e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const t=[];let n="",i=-1;for(let n=0;n<sO;n++){const r=this.rows[n].getTextString();r&&(i=n+1,e?t.push("Row "+i+": '"+r+"'"):t.push(r.trim()))}return t.length>0&&(n=e?"["+t.join(" | ")+"]":t.join("\n")),n}getTextAndFormat(){return this.rows}}class bO{constructor(e,t,n){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new vO(n),this.nonDisplayedMemory=new vO(n),this.lastOutputScreen=new vO(n),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=n}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,(()=>"MODE="+e)),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);const t=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,(()=>t+": "+this.writeScreen.getDisplayText(!0))),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(1,(()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0))),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,(()=>"DISP: "+this.displayedMemory.getDisplayText()))}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const t={flash:!1};if(t.underline=e%2==1,t.italics=e>=46,t.italics)t.foreground="white";else{const n=Math.floor(e/2)-16,i=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=i[n]}this.logger.log(2,"MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)}outputDataUpdate(e=!1){const t=this.logger.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class yO{constructor(e,t,n){this.channels=void 0,this.currentChannel=0,this.cmdHistory={a:null,b:null},this.logger=void 0;const i=this.logger=new hO;this.channels=[null,new bO(e,t,i),new bO(e+1,n,i)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,t){this.channels[e].setHandler(t)}addData(e,t){let n,i,r,s=!1;this.logger.time=e;for(let e=0;e<t.length;e+=2)if(i=127&t[e],r=127&t[e+1],0!==i||0!==r){if(this.logger.log(3,"["+mO([t[e],t[e+1]])+"] -> ("+mO([i,r])+")"),n=this.parseCmd(i,r),n||(n=this.parseMidrow(i,r)),n||(n=this.parsePAC(i,r)),n||(n=this.parseBackgroundAttributes(i,r)),!n&&(s=this.parseChars(i,r),s)){const e=this.currentChannel;if(e&&e>0){this.channels[e].insertChars(s)}else this.logger.log(2,"No channel found yet. TEXT-MODE?")}n||s||this.logger.log(2,"Couldn't parse cleaned data "+mO([i,r])+" orig: "+mO([t[e],t[e+1]]))}}parseCmd(e,t){const{cmdHistory:n}=this;if(!((20===e||28===e||21===e||29===e)&&t>=32&&t<=47)&&!((23===e||31===e)&&t>=33&&t<=35))return!1;if(TO(e,t,n))return EO(null,null,n),this.logger.log(3,"Repeated command ("+mO([e,t])+") is dropped"),!0;const i=20===e||21===e||23===e?1:2,r=this.channels[i];return 20===e||21===e||28===e||29===e?32===t?r.ccRCL():33===t?r.ccBS():34===t?r.ccAOF():35===t?r.ccAON():36===t?r.ccDER():37===t?r.ccRU(2):38===t?r.ccRU(3):39===t?r.ccRU(4):40===t?r.ccFON():41===t?r.ccRDC():42===t?r.ccTR():43===t?r.ccRTD():44===t?r.ccEDM():45===t?r.ccCR():46===t?r.ccENM():47===t&&r.ccEOC():r.ccTO(t-32),EO(e,t,n),this.currentChannel=i,!0}parseMidrow(e,t){let n=0;if((17===e||25===e)&&t>=32&&t<=47){if(n=17===e?1:2,n!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const i=this.channels[n];return!!i&&(i.ccMIDROW(t),this.logger.log(3,"MIDROW ("+mO([e,t])+")"),!0)}return!1}parsePAC(e,t){let n;const i=this.cmdHistory;if(!((e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127)&&!((16===e||24===e)&&t>=64&&t<=95))return!1;if(TO(e,t,i))return EO(null,null,i),!0;const r=e<=23?1:2;n=t>=64&&t<=95?1===r?oO[e]:dO[e]:1===r?lO[e]:cO[e];const s=this.channels[r];return!!s&&(s.setPAC(this.interpretPAC(n,t)),EO(e,t,i),this.currentChannel=r,!0)}interpretPAC(e,t){let n;const i={color:null,italics:!1,indent:null,underline:!1,row:e};return n=t>95?t-96:t-64,i.underline=!(1&~n),n<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(i.italics=!0,i.color="white"):i.indent=4*Math.floor((n-16)/2),i}parseChars(e,t){let n,i=null,r=null;if(e>=25?(n=2,r=e-8):(n=1,r=e),r>=17&&r<=19){let e;e=17===r?t+80:18===r?t+112:t+144,this.logger.log(2,"Special char '"+rO(e)+"' in channel "+n),i=[e]}else e>=32&&e<=127&&(i=0===t?[e]:[e,t]);if(i){const n=mO(i);this.logger.log(3,"Char codes =  "+n.join(",")),EO(e,t,this.cmdHistory)}return i}parseBackgroundAttributes(e,t){if(!((16===e||24===e)&&t>=32&&t<=47)&&!((23===e||31===e)&&t>=45&&t<=47))return!1;let n;const i={};16===e||24===e?(n=Math.floor((t-32)/2),i.background=uO[n],t%2==1&&(i.background=i.background+"_semi")):45===t?i.background="transparent":(i.foreground="black",47===t&&(i.underline=!0));const r=e<=23?1:2;return this.channels[r].setBkgData(i),EO(e,t,this.cmdHistory),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const t=this.channels[e];t&&t.reset()}this.cmdHistory={a:null,b:null}}cueSplitAtTime(e){for(let t=0;t<this.channels.length;t++){const n=this.channels[t];n&&n.cueSplitAtTime(e)}}}function EO(e,t,n){n.a=e,n.b=t}function TO(e,t,n){return n.a===e&&n.b===t}class _O{constructor(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}dispatchCue(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,t,n){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}var AO=function(){if(null!=cC&&cC.VTTCue)return self.VTTCue;const e=["","lr","rl"],t=["start","middle","end","left","right"];function n(e,t){if("string"!=typeof t)return!1;if(!Array.isArray(e))return!1;const n=t.toLowerCase();return!!~e.indexOf(n)&&n}function i(e){return n(t,e)}function r(e,...t){let n=1;for(;n<arguments.length;n++){const t=arguments[n];for(const n in t)e[n]=t[n]}return e}function s(t,s,a){const o=this,l={enumerable:!0};o.hasBeenReset=!1;let d="",c=!1,u=t,h=s,m=a,p=null,f="",g=!0,v="auto",b="start",y=50,E="middle",T=50,_="middle";Object.defineProperty(o,"id",r({},l,{get:function(){return d},set:function(e){d=""+e}})),Object.defineProperty(o,"pauseOnExit",r({},l,{get:function(){return c},set:function(e){c=!!e}})),Object.defineProperty(o,"startTime",r({},l,{get:function(){return u},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");u=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"endTime",r({},l,{get:function(){return h},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");h=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"text",r({},l,{get:function(){return m},set:function(e){m=""+e,this.hasBeenReset=!0}})),Object.defineProperty(o,"region",r({},l,{get:function(){return p},set:function(e){p=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"vertical",r({},l,{get:function(){return f},set:function(t){const i=function(t){return n(e,t)}(t);if(!1===i)throw new SyntaxError("An invalid or illegal string was specified.");f=i,this.hasBeenReset=!0}})),Object.defineProperty(o,"snapToLines",r({},l,{get:function(){return g},set:function(e){g=!!e,this.hasBeenReset=!0}})),Object.defineProperty(o,"line",r({},l,{get:function(){return v},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");v=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"lineAlign",r({},l,{get:function(){return b},set:function(e){const t=i(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");b=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"position",r({},l,{get:function(){return y},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");y=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"positionAlign",r({},l,{get:function(){return E},set:function(e){const t=i(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");E=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"size",r({},l,{get:function(){return T},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");T=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"align",r({},l,{get:function(){return _},set:function(e){const t=i(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");_=t,this.hasBeenReset=!0}})),o.displayState=void 0}return s.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},s}();class SO{decode(e,t){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function kO(e){function t(e,t,n,i){return 3600*(0|e)+60*(0|t)+(0|n)+parseFloat(i||0)}const n=e.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return n?parseFloat(n[2])>59?t(n[2],n[3],0,n[4]):t(n[1],n[2],n[3],n[4]):null}class wO{constructor(){this.values=Object.create(null)}set(e,t){this.get(e)||""===t||(this.values[e]=t)}get(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t}has(e){return e in this.values}alt(e,t,n){for(let i=0;i<n.length;++i)if(t===n[i]){this.set(e,t);break}}integer(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))}percent(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){const n=parseFloat(t);if(n>=0&&n<=100)return this.set(e,n),!0}return!1}}function LO(e,t,n,i){const r=i?e.split(i):[e];for(const e in r){if("string"!=typeof r[e])continue;const i=r[e].split(n);if(2!==i.length)continue;t(i[0],i[1])}}const RO=new AO(0,0,""),CO="middle"===RO.align?"middle":"center";function IO(e,t,n){const i=e;function r(){const t=kO(e);if(null===t)throw new Error("Malformed timestamp: "+i);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function s(){e=e.replace(/^\s+/,"")}if(s(),t.startTime=r(),s(),"--\x3e"!==e.slice(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+i);e=e.slice(3),s(),t.endTime=r(),s(),function(e,t){const i=new wO;LO(e,(function(e,t){let r;switch(e){case"region":for(let r=n.length-1;r>=0;r--)if(n[r].id===t){i.set(e,n[r].region);break}break;case"vertical":i.alt(e,t,["rl","lr"]);break;case"line":r=t.split(","),i.integer(e,r[0]),i.percent(e,r[0])&&i.set("snapToLines",!1),i.alt(e,r[0],["auto"]),2===r.length&&i.alt("lineAlign",r[1],["start",CO,"end"]);break;case"position":r=t.split(","),i.percent(e,r[0]),2===r.length&&i.alt("positionAlign",r[1],["start",CO,"end","line-left","line-right","auto"]);break;case"size":i.percent(e,t);break;case"align":i.alt(e,t,["start",CO,"end","left","right"])}}),/:/,/\s/),t.region=i.get("region",null),t.vertical=i.get("vertical","");let r=i.get("line","auto");"auto"===r&&-1===RO.line&&(r=-1),t.line=r,t.lineAlign=i.get("lineAlign","start"),t.snapToLines=i.get("snapToLines",!0),t.size=i.get("size",100),t.align=i.get("align",CO);let s=i.get("position","auto");"auto"===s&&50===RO.position&&(s="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=s}(e,t)}function xO(e){return e.replace(/<br(?: \/)?>/gi,"\n")}class DO{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new SO,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const t=this;function n(){let e=t.buffer,n=0;for(e=xO(e);n<e.length&&"\r"!==e[n]&&"\n"!==e[n];)++n;const i=e.slice(0,n);return"\r"===e[n]&&++n,"\n"===e[n]&&++n,t.buffer=e.slice(n),i}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{let e="";if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;e=n();const i=e.match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(null==i||!i[0])throw new Error("Malformed WebVTT signature.");t.state="HEADER"}let i=!1;for(;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(i?i=!1:e=n(),t.state){case"HEADER":/:/.test(e)?LO(e,(function(e,t){}),/:/):e||(t.state="ID");continue;case"NOTE":e||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(e)){t.state="NOTE";break}if(!e)continue;if(t.cue=new AO(0,0,""),t.state="CUE",-1===e.indexOf("--\x3e")){t.cue.id=e;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{IO(e,t.cue,t.regionList)}catch(e){t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":{const n=-1!==e.indexOf("--\x3e");if(!e||n&&(i=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(null===t.cue)continue;t.cue.text&&(t.cue.text+="\n"),t.cue.text+=e}continue;case"BADCUE":e||(t.state="ID")}}}catch(e){"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state||"BADWEBVTT"===e.state)throw new Error("Malformed WebVTT signature.")}catch(t){e.onparsingerror&&e.onparsingerror(t)}return e.onflush&&e.onflush(),this}}const MO=/\r\n|\n\r|\n|\r/g,OO=function(e,t,n=0){return e.slice(n,n+t.length)===t},PO=function(e){let t=5381,n=e.length;for(;n;)t=33*t^e.charCodeAt(--n);return(t>>>0).toString()};function NO(e,t,n){return PO(e.toString())+PO(t.toString())+PO(n)}function FO(e,t,n,i,r,s,a){const o=new DO,l=FC(new Uint8Array(e)).trim().replace(MO,"\n").split("\n"),d=[],c=t?function(e,t=1){return IM(e,CM,1/t)}(t.baseTime,t.timescale):0;let u,h="00:00.000",m=0,p=0,f=!0;o.oncue=function(e){const s=n[i];let a=n.ccOffset;const o=(m-c)/9e4;if(null!=s&&s.new&&(void 0!==p?a=n.ccOffset=s.start:function(e,t,n){let i=e[t],r=e[i.prevCC];if(!r||!r.new&&i.new)return e.ccOffset=e.presentationOffset=i.start,void(i.new=!1);for(;null!=(s=r)&&s.new;){var s;e.ccOffset+=i.start-r.start,i.new=!1,i=r,r=e[i.prevCC]}e.presentationOffset=n}(n,i,o)),o){if(!t)return void(u=new Error("Missing initPTS for VTT MPEGTS"));a=o-n.presentationOffset}const l=e.endTime-e.startTime,h=NM(9e4*(e.startTime+a-p),9e4*r)/9e4;e.startTime=Math.max(h,0),e.endTime=Math.max(h+l,0);const f=e.text.trim();e.text=decodeURIComponent(encodeURIComponent(f)),e.id||(e.id=NO(e.startTime,e.endTime,f)),e.endTime>0&&d.push(e)},o.onparsingerror=function(e){u=e},o.onflush=function(){u?a(u):s(d)},l.forEach((e=>{if(f){if(OO(e,"X-TIMESTAMP-MAP=")){f=!1,e.slice(16).split(",").forEach((e=>{OO(e,"LOCAL:")?h=e.slice(6):OO(e,"MPEGTS:")&&(m=parseInt(e.slice(7)))}));try{p=function(e){let t=parseInt(e.slice(-3));const n=parseInt(e.slice(-6,-4)),i=parseInt(e.slice(-9,-7)),r=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!(FR(t)&&FR(n)&&FR(i)&&FR(r)))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return t+=1e3*n,t+=6e4*i,t+=36e5*r,t}(h)/1e3}catch(e){u=e}return}""===e&&(f=!1)}o.parse(e+"\n")})),o.flush()}const UO="stpp.ttml.im1t",BO=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,$O=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,HO={left:"start",center:"center",right:"end",start:"start",end:"end"};function VO(e,t,n,i){const r=zC(new Uint8Array(e),["mdat"]);if(0===r.length)return void i(new Error("Could not parse IMSC1 mdat"));const s=r.map((e=>FC(e))),a=function(e,t,n=1,i=!1){return IM(e,t,1/n,i)}(t.baseTime,1,t.timescale);try{s.forEach((e=>n(function(e,t){const n=(new DOMParser).parseFromString(e,"text/xml"),i=n.getElementsByTagName("tt")[0];if(!i)throw new Error("Invalid ttml");const r={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},s=Object.keys(r).reduce(((e,t)=>(e[t]=i.getAttribute(`ttp:${t}`)||r[t],e)),{}),a="preserve"!==i.getAttribute("xml:space"),o=GO(WO(i,"styling","style")),l=GO(WO(i,"layout","region")),d=WO(i,"body","[begin]");return[].map.call(d,(e=>{const n=KO(e,a);if(!n||!e.hasAttribute("begin"))return null;const i=YO(e.getAttribute("begin"),s),r=YO(e.getAttribute("dur"),s);let d=YO(e.getAttribute("end"),s);if(null===i)throw jO(e);if(null===d){if(null===r)throw jO(e);d=i+r}const c=new AO(i-t,d-t,n);c.id=NO(c.startTime,c.endTime,c.text);const u=function(e,t,n){const i="http://www.w3.org/ns/ttml#styling";let r=null;const s=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],a=null!=e&&e.hasAttribute("style")?e.getAttribute("style"):null;a&&n.hasOwnProperty(a)&&(r=n[a]);return s.reduce(((n,s)=>{const a=qO(t,i,s)||qO(e,i,s)||qO(r,i,s);return a&&(n[s]=a),n}),{})}(l[e.getAttribute("region")],o[e.getAttribute("style")],o),{textAlign:h}=u;if(h){const e=HO[h];e&&(c.lineAlign=e),c.align=h}return NR(c,u),c})).filter((e=>null!==e))}(e,a))))}catch(e){i(e)}}function WO(e,t,n){const i=e.getElementsByTagName(t)[0];return i?[].slice.call(i.querySelectorAll(n)):[]}function GO(e){return e.reduce(((e,t)=>{const n=t.getAttribute("xml:id");return n&&(e[n]=t),e}),{})}function KO(e,t){return[].slice.call(e.childNodes).reduce(((e,n,i)=>{var r;return"br"===n.nodeName&&i?e+"\n":null!=(r=n.childNodes)&&r.length?KO(n,t):t?e+n.textContent.trim().replace(/\s+/g," "):e+n.textContent}),"")}function qO(e,t,n){return e&&e.hasAttributeNS(t,n)?e.getAttributeNS(t,n):null}function jO(e){return new Error(`Could not parse ttml timestamp ${e}`)}function YO(e,t){if(!e)return null;let n=kO(e);return null===n&&(BO.test(e)?n=function(e,t){const n=BO.exec(e),i=(0|n[4])+(0|n[5])/t.subFrameRate;return 3600*(0|n[1])+60*(0|n[2])+(0|n[3])+i/t.frameRate}(e,t):$O.test(e)&&(n=function(e,t){const n=$O.exec(e),i=Number(n[1]);switch(n[2]){case"h":return 3600*i;case"m":return 60*i;case"ms":return 1e3*i;case"f":return i/t.frameRate;case"t":return i/t.tickRate}return i}(e,t))),n}function zO(e){return e.characteristics&&/transcribes-spoken-dialog/gi.test(e.characteristics)&&/describes-music-and-sound/gi.test(e.characteristics)?"captions":"subtitles"}function XO(e,t){return!!e&&e.kind===zO(t)&&ZM(t,e)}class QO{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on($R.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on($R.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on($R.MANIFEST_PARSED,this.onManifestParsed,this),e.on($R.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on($R.BUFFER_CODECS,this.onBufferCodecs,this),e.on($R.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off($R.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off($R.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off($R.MANIFEST_PARSED,this.onManifestParsed,this),e.off($R.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off($R.BUFFER_CODECS,this.onBufferCodecs,this),e.off($R.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,t){const n=this.hls.levels[t.droppedLevel];this.isLevelAllowed(n)&&this.restrictedLevels.push({bitrate:n.bitrate,height:n.height,width:n.width})}onMediaAttaching(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,t){const n=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,n.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onLevelsUpdated(e,t){this.timer&&FR(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onMediaDetaching(){this.stopCapping()}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0)return void(this.clientRect=null);const e=this.hls.levels;if(e.length){const t=this.hls,n=this.getMaxLevel(e.length-1);n!==this.autoLevelCapping&&jR.log(`Setting autoLevelCapping to ${n}: ${e[n].height}p@${e[n].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),t.autoLevelCapping=n,t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}getMaxLevel(e){const t=this.hls.levels;if(!t.length)return-1;const n=t.filter(((t,n)=>this.isLevelAllowed(t)&&n<=e));return this.clientRect=null,QO.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,t={width:0,height:0};if(e){const n=e.getBoundingClientRect();t.width=n.width,t.height=n.height,t.width||t.height||(t.width=n.right-n.left||e.width||0,t.height=n.bottom-n.top||e.height||0)}return this.clientRect=t,t}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch(e){}return e}isLevelAllowed(e){return!this.restrictedLevels.some((t=>e.bitrate===t.bitrate&&e.width===t.width&&e.height===t.height))}static getMaxLevelByMediaSize(e,t,n){if(null==e||!e.length)return-1;let i=e.length-1;const r=Math.max(t,n);for(let t=0;t<e.length;t+=1){const n=e[t];if((n.width>=r||n.height>=r)&&(s=n,!(a=e[t+1])||s.width!==a.width||s.height!==a.height)){i=t;break}}var s,a;return i}}const ZO="[eme]";class JO{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=JO.CDMCleanupPromise?[JO.CDMCleanupPromise]:[],this.onMediaEncrypted=this._onMediaEncrypted.bind(this),this.onWaitingForKey=this._onWaitingForKey.bind(this),this.debug=jR.debug.bind(jR,ZO),this.log=jR.log.bind(jR,ZO),this.warn=jR.warn.bind(jR,ZO),this.error=jR.error.bind(jR,ZO),this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.unregisterListeners(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.onMediaEncrypted=this.onWaitingForKey=this.keyIdToKeySessionPromise=null,this.config=null}registerListeners(){this.hls.on($R.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on($R.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on($R.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on($R.MANIFEST_LOADED,this.onManifestLoaded,this)}unregisterListeners(){this.hls.off($R.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off($R.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off($R.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off($R.MANIFEST_LOADED,this.onManifestLoaded,this)}getLicenseServerUrl(e){const{drmSystems:t,widevineLicenseUrl:n}=this.config,i=t[e];if(i)return i.licenseUrl;if(e===uC.WIDEVINE&&n)return n;throw new Error(`no license server URL configured for key-system "${e}"`)}getServerCertificateUrl(e){const{drmSystems:t}=this.config,n=t[e];if(n)return n.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const t=this.hls.levels,n=(e,t,n)=>!!e&&n.indexOf(e)===t,i=t.map((e=>e.audioCodec)).filter(n),r=t.map((e=>e.videoCodec)).filter(n);return i.length+r.length===0&&r.push("avc1.42e01e"),new Promise(((t,n)=>{const s=e=>{const a=e.shift();this.getMediaKeysPromise(a,i,r).then((e=>t({keySystem:a,mediaKeys:e}))).catch((t=>{e.length?s(e):n(t instanceof eP?t:new eP({type:HR.KEY_SYSTEM_ERROR,details:VR.KEY_SYSTEM_NO_ACCESS,error:t,fatal:!0},t.message))}))};s(e)}))}requestMediaKeySystemAccess(e,t){const{requestMediaKeySystemAccessFunc:n}=this.config;if("function"!=typeof n){let e=`Configured requestMediaKeySystemAccess is not a function ${n}`;return null===EC&&"http:"===self.location.protocol&&(e=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(e))}return n(e,t)}getMediaKeysPromise(e,t,n){const i=function(e,t,n,i){let r;switch(e){case uC.FAIRPLAY:r=["cenc","sinf"];break;case uC.WIDEVINE:case uC.PLAYREADY:r=["cenc"];break;case uC.CLEARKEY:r=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${e}`)}return function(e,t,n,i){return[{initDataTypes:e,persistentState:i.persistentState||"optional",distinctiveIdentifier:i.distinctiveIdentifier||"optional",sessionTypes:i.sessionTypes||[i.sessionType||"temporary"],audioCapabilities:t.map((e=>({contentType:`audio/mp4; codecs="${e}"`,robustness:i.audioRobustness||"",encryptionScheme:i.audioEncryptionScheme||null}))),videoCapabilities:n.map((e=>({contentType:`video/mp4; codecs="${e}"`,robustness:i.videoRobustness||"",encryptionScheme:i.videoEncryptionScheme||null})))}]}(r,t,n,i)}(e,t,n,this.config.drmSystemOptions),r=this.keySystemAccessPromises[e];let s=null==r?void 0:r.keySystemAccess;if(!s){this.log(`Requesting encrypted media "${e}" key-system access with config: ${JSON.stringify(i)}`),s=this.requestMediaKeySystemAccess(e,i);const t=this.keySystemAccessPromises[e]={keySystemAccess:s};return s.catch((t=>{this.log(`Failed to obtain access to key-system "${e}": ${t}`)})),s.then((n=>{this.log(`Access for key-system "${n.keySystem}" obtained`);const i=this.fetchServerCertificate(e);return this.log(`Create media-keys for "${e}"`),t.mediaKeys=n.createMediaKeys().then((t=>(this.log(`Media-keys created for "${e}"`),i.then((n=>n?this.setMediaKeysServerCertificate(t,e,n):t))))),t.mediaKeys.catch((t=>{this.error(`Failed to create media-keys for "${e}"}: ${t}`)})),t.mediaKeys}))}return s.then((()=>r.mediaKeys))}createMediaKeySessionContext({decryptdata:e,keySystem:t,mediaKeys:n}){this.log(`Creating key-system session "${t}" keyId: ${BC(e.keyId||[])}`);const i=n.createSession(),r={decryptdata:e,keySystem:t,mediaKeys:n,mediaKeysSession:i,keyStatus:"status-pending"};return this.mediaKeySessions.push(r),r}renewKeySession(e){const t=e.decryptdata;if(t.pssh){const n=this.createMediaKeySessionContext(e),i=this.getKeyIdString(t),r="cenc";this.keyIdToKeySessionPromise[i]=this.generateRequestWithPreferredKeySession(n,r,t.pssh,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}getKeyIdString(e){if(!e)throw new Error("Could not read keyId of undefined decryptdata");if(null===e.keyId)throw new Error("keyId is null");return BC(e.keyId)}updateKeySession(e,t){var n;const i=e.mediaKeysSession;return this.log(`Updating key-session "${i.sessionId}" for keyID ${BC((null==(n=e.decryptdata)?void 0:n.keyId)||[])}\n      } (data length: ${t?t.byteLength:t})`),i.update(t)}selectKeySystemFormat(e){const t=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${t.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(t)),this.keyFormatPromise}getKeyFormatPromise(e){return new Promise(((t,n)=>{const i=yC(this.config),r=e.map(gC).filter((e=>!!e&&-1!==i.indexOf(e)));return this.getKeySystemSelectionPromise(r).then((({keySystem:e})=>{const i=bC(e);i?t(i):n(new Error(`Unable to find format for key-system "${e}"`))})).catch(n)}))}loadKey(e){const t=e.keyInfo.decryptdata,n=this.getKeyIdString(t),i=`(keyId: ${n} format: "${t.keyFormat}" method: ${t.method} uri: ${t.uri})`;this.log(`Starting session for key ${i}`);let r=this.keyIdToKeySessionPromise[n];return r||(r=this.keyIdToKeySessionPromise[n]=this.getKeySystemForKeyPromise(t).then((({keySystem:n,mediaKeys:r})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${i}`),this.attemptSetMediaKeys(n,r).then((()=>{this.throwIfDestroyed();const e=this.createMediaKeySessionContext({keySystem:n,mediaKeys:r,decryptdata:t});return this.generateRequestWithPreferredKeySession(e,"cenc",t.pssh,"playlist-key")}))))),r.catch((e=>this.handleError(e)))),r}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e){this.hls&&(this.error(e.message),e instanceof eP?this.hls.trigger($R.ERROR,e.data):this.hls.trigger($R.ERROR,{type:HR.KEY_SYSTEM_ERROR,details:VR.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0}))}getKeySystemForKeyPromise(e){const t=this.getKeyIdString(e),n=this.keyIdToKeySessionPromise[t];if(!n){const t=gC(e.keyFormat),n=t?[t]:yC(this.config);return this.attemptKeySystemAccess(n)}return n}getKeySystemSelectionPromise(e){if(e.length||(e=yC(this.config)),0===e.length)throw new eP({type:HR.KEY_SYSTEM_ERROR,details:VR.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${JSON.stringify({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}_onMediaEncrypted(e){const{initDataType:t,initData:n}=e;if(this.debug(`"${e.type}" event: init data type: "${t}"`),null===n)return;let i,r;if("sinf"===t&&this.config.drmSystems[uC.FAIRPLAY]){const e=WC(new Uint8Array(n));try{const t=oC(JSON.parse(e).sinf),n=nI(new Uint8Array(t));if(!n)return;i=n.subarray(8,24),r=uC.FAIRPLAY}catch(e){return void this.warn('Failed to parse sinf "encrypted" event message initData')}}else{const e=function(e){if(!(e instanceof ArrayBuffer)||e.byteLength<32)return null;const t={version:0,systemId:"",kids:null,data:null},n=new DataView(e),i=n.getUint32(0);if(e.byteLength!==i&&i>44)return null;if(1886614376!==n.getUint32(4))return null;if(t.version=n.getUint32(8)>>>24,t.version>1)return null;t.systemId=BC(new Uint8Array(e,12,16));const r=n.getUint32(28);if(0===t.version){if(i-32<r)return null;t.data=new Uint8Array(e,32,r)}else if(1===t.version){t.kids=[];for(let n=0;n<r;n++)t.kids.push(new Uint8Array(e,32+16*n,16))}return t}(n);if(null===e)return;0===e.version&&e.systemId===vC&&e.data&&(i=e.data.subarray(8,24)),r=function(e){if(e===vC)return uC.WIDEVINE}(e.systemId)}if(!r||!i)return;const s=BC(i),{keyIdToKeySessionPromise:a,mediaKeySessions:o}=this;let l=a[s];for(let e=0;e<o.length;e++){const r=o[e],d=r.decryptdata;if(d.pssh||!d.keyId)continue;const c=BC(d.keyId);if(s===c||-1!==d.uri.replace(/-/g,"").indexOf(s)){l=a[c],delete a[c],d.pssh=new Uint8Array(n),d.keyId=i,l=a[s]=l.then((()=>this.generateRequestWithPreferredKeySession(r,t,n,"encrypted-event-key-match")));break}}l||(l=a[s]=this.getKeySystemSelectionPromise([r]).then((({keySystem:e,mediaKeys:r})=>{var a;this.throwIfDestroyed();const o=new uI("ISO-23001-7",s,null!=(a=bC(e))?a:"");return o.pssh=new Uint8Array(n),o.keyId=i,this.attemptSetMediaKeys(e,r).then((()=>{this.throwIfDestroyed();const i=this.createMediaKeySessionContext({decryptdata:o,keySystem:e,mediaKeys:r});return this.generateRequestWithPreferredKeySession(i,t,n,"encrypted-event-no-match")}))}))),l.catch((e=>this.handleError(e)))}_onWaitingForKey(e){this.log(`"${e.type}" event`)}attemptSetMediaKeys(e,t){const n=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const i=Promise.all(n).then((()=>{if(!this.media)throw new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(t)}));return this.setMediaKeysQueue.push(i),i.then((()=>{this.log(`Media-keys set for "${e}"`),n.push(i),this.setMediaKeysQueue=this.setMediaKeysQueue.filter((e=>-1===n.indexOf(e)))}))}generateRequestWithPreferredKeySession(e,t,n,i){var r,s;const a=null==(r=this.config.drmSystems)||null==(s=r[e.keySystem])?void 0:s.generateRequest;if(a)try{const i=a.call(this.hls,t,n,e);if(!i)throw new Error("Invalid response from configured generateRequest filter");t=i.initDataType,n=e.decryptdata.pssh=i.initData?new Uint8Array(i.initData):null}catch(e){var o;if(this.warn(e.message),null!=(o=this.hls)&&o.config.debug)throw e}if(null===n)return this.log(`Skipping key-session request for "${i}" (no initData)`),Promise.resolve(e);const l=this.getKeyIdString(e.decryptdata);this.log(`Generating key-session request for "${i}": ${l} (init data type: ${t} length: ${n?n.byteLength:null})`);const d=new YM,c=e._onmessage=t=>{const n=e.mediaKeysSession;if(!n)return void d.emit("error",new Error("invalid state"));const{messageType:i,message:r}=t;this.log(`"${i}" message event for session "${n.sessionId}" message size: ${r.byteLength}`),"license-request"===i||"license-renewal"===i?this.renewLicense(e,r).catch((e=>{this.handleError(e),d.emit("error",e)})):"license-release"===i?e.keySystem===uC.FAIRPLAY&&(this.updateKeySession(e,dC("acknowledged")),this.removeSession(e)):this.warn(`unhandled media key message type "${i}"`)},u=e._onkeystatuseschange=t=>{if(!e.mediaKeysSession)return void d.emit("error",new Error("invalid state"));this.onKeyStatusChange(e);const n=e.keyStatus;d.emit("keyStatus",n),"expired"===n&&(this.warn(`${e.keySystem} expired for key ${l}`),this.renewKeySession(e))};e.mediaKeysSession.addEventListener("message",c),e.mediaKeysSession.addEventListener("keystatuseschange",u);const h=new Promise(((e,t)=>{d.on("error",t),d.on("keyStatus",(n=>{n.startsWith("usable")?e():"output-restricted"===n?t(new eP({type:HR.KEY_SYSTEM_ERROR,details:VR.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):"internal-error"===n?t(new eP({type:HR.KEY_SYSTEM_ERROR,details:VR.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},`key status changed to "${n}"`)):"expired"===n?t(new Error("key expired while generating request")):this.warn(`unhandled key status change "${n}"`)}))}));return e.mediaKeysSession.generateRequest(t,n).then((()=>{var t;this.log(`Request generated for key-session "${null==(t=e.mediaKeysSession)?void 0:t.sessionId}" keyId: ${l}`)})).catch((e=>{throw new eP({type:HR.KEY_SYSTEM_ERROR,details:VR.KEY_SYSTEM_NO_SESSION,error:e,fatal:!1},`Error generating key-session request: ${e}`)})).then((()=>h)).catch((t=>{throw d.removeAllListeners(),this.removeSession(e),t})).then((()=>(d.removeAllListeners(),e)))}onKeyStatusChange(e){e.mediaKeysSession.keyStatuses.forEach(((t,n)=>{this.log(`key status change "${t}" for keyStatuses keyId: ${BC("buffer"in n?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):new Uint8Array(n))} session keyId: ${BC(new Uint8Array(e.decryptdata.keyId||[]))} uri: ${e.decryptdata.uri}`),e.keyStatus=t}))}fetchServerCertificate(e){const t=this.config,n=new(0,t.loader)(t),i=this.getServerCertificateUrl(e);return i?(this.log(`Fetching server certificate for "${e}"`),new Promise(((r,s)=>{const a={responseType:"arraybuffer",url:i},o=t.certLoadPolicy.default,l={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(e,t,n,i)=>{r(e.data)},onError:(t,n,r,o)=>{s(new eP({type:HR.KEY_SYSTEM_ERROR,details:VR.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:r,response:MR({url:a.url,data:void 0},t)},`"${e}" certificate request failed (${i}). Status: ${t.code} (${t.text})`))},onTimeout:(t,n,r)=>{s(new eP({type:HR.KEY_SYSTEM_ERROR,details:VR.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:r,response:{url:a.url,data:void 0}},`"${e}" certificate request timed out (${i})`))},onAbort:(e,t,n)=>{s(new Error("aborted"))}};n.load(a,l,d)}))):Promise.resolve()}setMediaKeysServerCertificate(e,t,n){return new Promise(((i,r)=>{e.setServerCertificate(n).then((r=>{this.log(`setServerCertificate ${r?"success":"not supported by CDM"} (${null==n?void 0:n.byteLength}) on "${t}"`),i(e)})).catch((e=>{r(new eP({type:HR.KEY_SYSTEM_ERROR,details:VR.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:e,fatal:!0},e.message))}))}))}renewLicense(e,t){return this.requestLicense(e,new Uint8Array(t)).then((t=>this.updateKeySession(e,new Uint8Array(t)).catch((e=>{throw new eP({type:HR.KEY_SYSTEM_ERROR,details:VR.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:e,fatal:!0},e.message)}))))}unpackPlayReadyKeyMessage(e,t){const n=String.fromCharCode.apply(null,new Uint16Array(t.buffer));if(!n.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),t;const i=(new DOMParser).parseFromString(n,"application/xml"),r=i.querySelectorAll("HttpHeader");if(r.length>0){let t;for(let n=0,i=r.length;n<i;n++){var s,a;t=r[n];const i=null==(s=t.querySelector("name"))?void 0:s.textContent,o=null==(a=t.querySelector("value"))?void 0:a.textContent;i&&o&&e.setRequestHeader(i,o)}}const o=i.querySelector("Challenge"),l=null==o?void 0:o.textContent;if(!l)throw new Error("Cannot find <Challenge> in key message");return dC(atob(l))}setupLicenseXHR(e,t,n,i){const r=this.config.licenseXhrSetup;return r?Promise.resolve().then((()=>{if(!n.decryptdata)throw new Error("Key removed");return r.call(this.hls,e,t,n,i)})).catch((s=>{if(!n.decryptdata)throw s;return e.open("POST",t,!0),r.call(this.hls,e,t,n,i)})).then((n=>{e.readyState||e.open("POST",t,!0);return{xhr:e,licenseChallenge:n||i}})):(e.open("POST",t,!0),Promise.resolve({xhr:e,licenseChallenge:i}))}requestLicense(e,t){const n=this.config.keyLoadPolicy.default;return new Promise(((i,r)=>{const s=this.getLicenseServerUrl(e.keySystem);this.log(`Sending license request to URL: ${s}`);const a=new XMLHttpRequest;a.responseType="arraybuffer",a.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return r(new Error("invalid state"));if(4===a.readyState)if(200===a.status){this._requestLicenseFailureCount=0;let t=a.response;this.log(`License received ${t instanceof ArrayBuffer?t.byteLength:t}`);const n=this.config.licenseResponseCallback;if(n)try{t=n.call(this.hls,a,s,e)}catch(e){this.error(e)}i(t)}else{const o=n.errorRetry,l=o?o.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>l||a.status>=400&&a.status<500)r(new eP({type:HR.KEY_SYSTEM_ERROR,details:VR.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:a,response:{url:s,data:void 0,code:a.status,text:a.statusText}},`License Request XHR failed (${s}). Status: ${a.status} (${a.statusText})`));else{const n=l-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${n} attempts left`),this.requestLicense(e,t).then(i,r)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=a,this.setupLicenseXHR(a,s,e,t).then((({xhr:t,licenseChallenge:n})=>{e.keySystem==uC.PLAYREADY&&(n=this.unpackPlayReadyKeyMessage(t,n)),t.send(n)}))}))}onMediaAttached(e,t){if(!this.config.emeEnabled)return;const n=t.media;this.media=n,n.addEventListener("encrypted",this.onMediaEncrypted),n.addEventListener("waitingforkey",this.onWaitingForKey)}onMediaDetached(){const e=this.media,t=this.mediaKeySessions;e&&(e.removeEventListener("encrypted",this.onMediaEncrypted),e.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},uI.clearKeyUriToKeyIdMap();const n=t.length;JO.CDMCleanupPromise=Promise.all(t.map((e=>this.removeSession(e))).concat(null==e?void 0:e.setMediaKeys(null).catch((e=>{this.log(`Could not clear media keys: ${e}`)})))).then((()=>{n&&(this.log("finished closing key sessions and clearing media keys"),t.length=0)})).catch((e=>{this.log(`Could not close sessions and clear media keys: ${e}`)}))}onManifestLoading(){this.keyFormatPromise=null}onManifestLoaded(e,{sessionKeys:t}){if(t&&this.config.emeEnabled&&!this.keyFormatPromise){const e=t.reduce(((e,t)=>(-1===e.indexOf(t.keyFormat)&&e.push(t.keyFormat),e)),[]);this.log(`Selecting key-system from session-keys ${e.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(e)}}removeSession(e){const{mediaKeysSession:t,licenseXhr:n}=e;if(t){this.log(`Remove licenses and keys and close session ${t.sessionId}`),e._onmessage&&(t.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(t.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),n&&n.readyState!==XMLHttpRequest.DONE&&n.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const i=this.mediaKeySessions.indexOf(e);return i>-1&&this.mediaKeySessions.splice(i,1),t.remove().catch((e=>{this.log(`Could not remove session: ${e}`)})).then((()=>t.close())).catch((e=>{this.log(`Could not close session: ${e}`)}))}}}JO.CDMCleanupPromise=void 0;class eP extends Error{constructor(e,t){super(t),this.data=void 0,e.error||(e.error=new Error(t)),this.data=e,e.err=e.error}}var tP,nP,iP;!function(e){e.MANIFEST="m",e.AUDIO="a",e.VIDEO="v",e.MUXED="av",e.INIT="i",e.CAPTION="c",e.TIMED_TEXT="tt",e.KEY="k",e.OTHER="o"}(tP||(tP={})),function(e){e.DASH="d",e.HLS="h",e.SMOOTH="s",e.OTHER="o"}(nP||(nP={})),function(e){e.OBJECT="CMCD-Object",e.REQUEST="CMCD-Request",e.SESSION="CMCD-Session",e.STATUS="CMCD-Status"}(iP||(iP={}));const rP={[iP.OBJECT]:["br","d","ot","tb"],[iP.REQUEST]:["bl","dl","mtp","nor","nrr","su"],[iP.SESSION]:["cid","pr","sf","sid","st","v"],[iP.STATUS]:["bs","rtp"]};class sP{constructor(e,t){this.value=void 0,this.params=void 0,Array.isArray(e)&&(e=e.map((e=>e instanceof sP?e:new sP(e)))),this.value=e,this.params=t}}class aP{constructor(e){this.description=void 0,this.description=e}}const oP="Dict";function lP(e,t,n,i){return new Error(`failed to ${e} "${function(e){return Array.isArray(e)?JSON.stringify(e):e instanceof Map?"Map{}":e instanceof Set?"Set{}":"object"==typeof e?JSON.stringify(e):String(e)}(t)}" as ${n}`,{cause:i})}const dP="Bare Item",cP="Boolean",uP="Byte Sequence",hP="Decimal",mP="Integer";const pP=/[\x00-\x1f\x7f]+/,fP="Token",gP="Key";function vP(e,t,n){return lP("serialize",e,t,n)}function bP(e){if(!1===ArrayBuffer.isView(e))throw vP(e,uP);return`:${t=e,btoa(String.fromCharCode(...t))}:`;var t}function yP(e){if(function(e){return e<-999999999999999||999999999999999<e}(e))throw vP(e,mP);return e.toString()}function EP(e,t){if(e<0)return-EP(-e,t);const n=Math.pow(10,t);if(Math.abs(e*n%1-.5)<Number.EPSILON){const t=Math.floor(e*n);return(t%2==0?t:t+1)/n}return Math.round(e*n)/n}function TP(e){const t=EP(e,3);if(Math.floor(Math.abs(t)).toString().length>12)throw vP(e,hP);const n=t.toString();return n.includes(".")?n:`${n}.0`}const _P="String";function AP(e){const t=(n=e).description||n.toString().slice(7,-1);var n;if(!1===/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(t))throw vP(t,fP);return t}function SP(e){switch(typeof e){case"number":if(!FR(e))throw vP(e,dP);return Number.isInteger(e)?yP(e):TP(e);case"string":return function(e){if(pP.test(e))throw vP(e,_P);return`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}(e);case"symbol":return AP(e);case"boolean":return function(e){if("boolean"!=typeof e)throw vP(e,cP);return e?"?1":"?0"}(e);case"object":if(e instanceof Date)return function(e){return`@${yP(e.getTime()/1e3)}`}(e);if(e instanceof Uint8Array)return bP(e);if(e instanceof aP)return AP(e);default:throw vP(e,dP)}}function kP(e){if(!1===/^[a-z*][a-z0-9\-_.*]*$/.test(e))throw vP(e,gP);return e}function wP(e){return null==e?"":Object.entries(e).map((([e,t])=>!0===t?`;${kP(e)}`:`;${kP(e)}=${SP(t)}`)).join("")}function LP(e){return e instanceof sP?`${SP(e.value)}${wP(e.params)}`:SP(e)}function RP(e,t={whitespace:!0}){if("object"!=typeof e)throw vP(e,oP);const n=e instanceof Map?e.entries():Object.entries(e),i=null!=t&&t.whitespace?" ":"";return Array.from(n).map((([e,t])=>{t instanceof sP==!1&&(t=new sP(t));let n=kP(e);return!0===t.value?n+=wP(t.params):(n+="=",Array.isArray(t.value)?n+=function(e){return`(${e.value.map(LP).join(" ")})${wP(e.params)}`}(t):n+=LP(t)),n})).join(`,${i}`)}const CP=e=>"ot"===e||"sf"===e||"st"===e,IP=e=>"number"==typeof e?FR(e):null!=e&&""!==e&&!1!==e;const xP=e=>Math.round(e),DP=e=>100*xP(e/100),MP={br:xP,d:xP,bl:DP,dl:DP,mtp:DP,nor:(e,t)=>(null!=t&&t.baseUrl&&(e=function(e,t){const n=new URL(e),i=new URL(t);if(n.origin!==i.origin)return e;const r=n.pathname.split("/").slice(1),s=i.pathname.split("/").slice(1,-1);for(;r[0]===s[0];)r.shift(),s.shift();for(;s.length;)s.shift(),r.unshift("..");return r.join("/")}(e,t.baseUrl)),encodeURIComponent(e)),rtp:DP,tb:xP};function OP(e,t={}){return e?function(e,t){return RP(e,t)}(function(e,t){const n={};if(null==e||"object"!=typeof e)return n;const i=Object.keys(e).sort(),r=NR({},MP,null==t?void 0:t.formatters),s=null==t?void 0:t.filter;return i.forEach((i=>{if(null!=s&&s(i))return;let a=e[i];const o=r[i];o&&(a=o(a,t)),"v"===i&&1===a||"pr"==i&&1===a||IP(a)&&(CP(i)&&"string"==typeof a&&(a=new aP(a)),n[i]=a)})),n}(e,t),NR({whitespace:!1},t)):""}function PP(e,t,n){return NR(e,function(e,t={}){if(!e)return{};const n=Object.entries(e),i=Object.entries(rP).concat(Object.entries((null==t?void 0:t.customHeaderMap)||{})),r=n.reduce(((e,t)=>{var n;const[r,s]=t,a=(null==(n=i.find((e=>e[1].includes(r))))?void 0:n[0])||iP.REQUEST;return null!=e[a]||(e[a]={}),e[a][r]=s,e}),{});return Object.entries(r).reduce(((e,[n,i])=>(e[n]=OP(i,t),e)),{})}(t,n))}const NP="CMCD";const FP=/CMCD=[^&#]+/;function UP(e,t,n){const i=function(e,t={}){if(!e)return"";const n=OP(e,t);return`${NP}=${encodeURIComponent(n)}`}(t,n);if(!i)return e;if(FP.test(e))return e.replace(FP,i);const r=e.includes("?")?"&":"?";return`${e}${r}${i}`}function BP(e,t,n,i){e&&Object.keys(t).forEach((r=>{const s=e.filter((e=>e.groupId===r)).map((e=>{const s=NR({},e);return s.details=void 0,s.attrs=new XR(s.attrs),s.url=s.attrs.URI=$P(e.url,e.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",n),s.groupId=s.attrs["GROUP-ID"]=t[r],s.attrs["PATHWAY-ID"]=i,s}));e.push(...s)}))}function $P(e,t,n,i){const{HOST:r,PARAMS:s,[n]:a}=i;let o;t&&(o=null==a?void 0:a[t],o&&(e=o));const l=new self.URL(e);return r&&!o&&(l.host=r),s&&Object.keys(s).sort().forEach((e=>{e&&l.searchParams.set(e,s[e])})),l.href}const HP=/^age:\s*[\d.]+\s*$/im;class VP{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new JR,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null,this.stats=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,4!==e.readyState&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),null!=(e=this.callbacks)&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,t,n){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=n,this.loadInternal()}loadInternal(){const{config:e,context:t}=this;if(!e||!t)return;const n=this.loader=new self.XMLHttpRequest,i=this.stats;i.loading.first=0,i.loaded=0,i.aborted=!1;const r=this.xhrSetup;r?Promise.resolve().then((()=>{if(!this.stats.aborted)return r(n,t.url)})).catch((e=>(n.open("GET",t.url,!0),r(n,t.url)))).then((()=>{this.stats.aborted||this.openAndSendXhr(n,t,e)})).catch((e=>{this.callbacks.onError({code:n.status,text:e.message},t,n,i)})):this.openAndSendXhr(n,t,e)}openAndSendXhr(e,t,n){e.readyState||e.open("GET",t.url,!0);const i=t.headers,{maxTimeToFirstByteMs:r,maxLoadTimeMs:s}=n.loadPolicy;if(i)for(const t in i)e.setRequestHeader(t,i[t]);t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,self.clearTimeout(this.requestTimeout),n.timeout=r&&FR(r)?r:s,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),n.timeout),e.send()}readystatechange(){const{context:e,loader:t,stats:n}=this;if(!e||!t)return;const i=t.readyState,r=this.config;if(!n.aborted&&i>=2&&(0===n.loading.first&&(n.loading.first=Math.max(self.performance.now(),n.loading.start),r.timeout!==r.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),r.timeout=r.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),r.loadPolicy.maxLoadTimeMs-(n.loading.first-n.loading.start)))),4===i)){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;const i=t.status,s="text"!==t.responseType;if(i>=200&&i<300&&(s&&t.response||null!==t.responseText)){n.loading.end=Math.max(self.performance.now(),n.loading.first);const r=s?t.response:t.responseText,a="arraybuffer"===t.responseType?r.byteLength:r.length;if(n.loaded=n.total=a,n.bwEstimate=8e3*n.total/(n.loading.end-n.loading.first),!this.callbacks)return;const o=this.callbacks.onProgress;if(o&&o(n,e,r,t),!this.callbacks)return;const l={url:t.responseURL,data:r,code:i};this.callbacks.onSuccess(l,n,e,t)}else{const s=r.loadPolicy.errorRetry;Mx(s,n.retry,!1,{url:e.url,data:void 0,code:i})?this.retry(s):(jR.error(`${i} while loading ${e.url}`),this.callbacks.onError({code:i,text:t.statusText},e,t,n))}}}loadtimeout(){var e;const t=null==(e=this.config)?void 0:e.loadPolicy.timeoutRetry;if(Mx(t,this.stats.retry,!0))this.retry(t);else{var n;jR.warn(`timeout while loading ${null==(n=this.context)?void 0:n.url}`);const e=this.callbacks;e&&(this.abortInternal(),e.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:t,stats:n}=this;this.retryDelay=xx(e,n.retry),n.retry++,jR.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${null==t?void 0:t.url}, retrying ${n.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)}getCacheAge(){let e=null;if(this.loader&&HP.test(this.loader.getAllResponseHeaders())){const t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}const WP=/(\d+)-(\d+)\/(\d+)/;class GP{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||KP,this.controller=new self.AbortController,this.stats=new JR}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),null!=(e=this.callbacks)&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,t,n){const i=this.stats;if(i.loading.start)throw new Error("Loader can only be used once.");i.loading.start=self.performance.now();const r=function(e,t){const n={method:"GET",mode:"cors",credentials:"same-origin",signal:t,headers:new self.Headers(NR({},e.headers))};e.rangeEnd&&n.headers.set("Range","bytes="+e.rangeStart+"-"+String(e.rangeEnd-1));return n}(e,this.controller.signal),s=n.onProgress,a="arraybuffer"===e.responseType,o=a?"byteLength":"length",{maxTimeToFirstByteMs:l,maxLoadTimeMs:d}=t.loadPolicy;this.context=e,this.config=t,this.callbacks=n,this.request=this.fetchSetup(e,r),self.clearTimeout(this.requestTimeout),t.timeout=l&&FR(l)?l:d,this.requestTimeout=self.setTimeout((()=>{this.abortInternal(),n.onTimeout(i,e,this.response)}),t.timeout),self.fetch(this.request).then((r=>{this.response=this.loader=r;const o=Math.max(self.performance.now(),i.loading.start);if(self.clearTimeout(this.requestTimeout),t.timeout=d,this.requestTimeout=self.setTimeout((()=>{this.abortInternal(),n.onTimeout(i,e,this.response)}),d-(o-i.loading.start)),!r.ok){const{status:e,statusText:t}=r;throw new qP(t||"fetch, bad network response",e,r)}return i.loading.first=o,i.total=function(e){const t=e.get("Content-Range");if(t){const e=function(e){const t=WP.exec(e);if(t)return parseInt(t[2])-parseInt(t[1])+1}(t);if(FR(e))return e}const n=e.get("Content-Length");if(n)return parseInt(n)}(r.headers)||i.total,s&&FR(t.highWaterMark)?this.loadProgressively(r,i,e,t.highWaterMark,s):a?r.arrayBuffer():"json"===e.responseType?r.json():r.text()})).then((r=>{const a=this.response;if(!a)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),i.loading.end=Math.max(self.performance.now(),i.loading.first);const l=r[o];l&&(i.loaded=i.total=l);const d={url:a.url,data:r,code:a.status};s&&!FR(t.highWaterMark)&&s(i,e,r,a),n.onSuccess(d,i,e,a)})).catch((t=>{if(self.clearTimeout(this.requestTimeout),i.aborted)return;const r=t&&t.code||0,s=t?t.message:null;n.onError({code:r,text:s},e,t?t.details:null,i)}))}getCacheAge(){let e=null;if(this.response){const t=this.response.headers.get("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,t,n,i=0,r){const s=new WD,a=e.body.getReader(),o=()=>a.read().then((a=>{if(a.done)return s.dataLength&&r(t,n,s.flush(),e),Promise.resolve(new ArrayBuffer(0));const l=a.value,d=l.length;return t.loaded+=d,d<i||s.dataLength?(s.push(l),s.dataLength>=i&&r(t,n,s.flush(),e)):r(t,n,l,e),o()})).catch((()=>Promise.reject()));return o()}}function KP(e,t){return new self.Request(e.url,t)}class qP extends Error{constructor(e,t,n){super(e),this.code=void 0,this.details=void 0,this.code=t,this.details=n}}const jP=/\s/,YP={newCue(e,t,n,i){const r=[];let s,a,o,l,d;const c=self.VTTCue||self.TextTrackCue;for(let h=0;h<i.rows.length;h++)if(s=i.rows[h],o=!0,l=0,d="",!s.isEmpty()){var u;for(let e=0;e<s.chars.length;e++)jP.test(s.chars[e].uchar)&&o?l++:(d+=s.chars[e].uchar,o=!1);s.cueStartTime=t,t===n&&(n+=1e-4),l>=16?l--:l++;const i=xO(d.trim()),m=NO(t,n,i);null!=e&&null!=(u=e.cues)&&u.getCueById(m)||(a=new c(t,n,i),a.id=m,a.line=h+1,a.align="left",a.position=10+Math.min(80,10*Math.floor(8*l/32)),r.push(a))}return e&&r.length&&(r.sort(((e,t)=>"auto"===e.line||"auto"===t.line?0:e.line>8&&t.line>8?t.line-e.line:e.line-t.line)),r.forEach((t=>JI(e,t)))),r}},zP=MR(MR({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,maxBufferSize:6e7,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:VP,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:class{constructor(e){this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this._abandonRulesCheck=()=>{const{fragCurrent:e,partCurrent:t,hls:n}=this,{autoLevelEnabled:i,media:r}=n;if(!e||!r)return;const s=performance.now(),a=t?t.stats:e.stats,o=t?t.duration:e.duration,l=s-a.loading.start,d=n.minAutoLevel;if(a.aborted||a.loaded&&a.loaded===a.total||e.level<=d)return this.clearTimer(),void(this._nextAutoLevel=-1);if(!i||r.paused||!r.playbackRate||!r.readyState)return;const c=n.mainForwardBufferInfo;if(null===c)return;const u=this.bwEstimator.getEstimateTTFB(),h=Math.abs(r.playbackRate);if(l<=Math.max(u,o/(2*h)*1e3))return;const m=c.len/h,p=a.loading.first?a.loading.first-a.loading.start:-1,f=a.loaded&&p>-1,g=this.getBwEstimate(),v=n.levels,b=v[e.level],y=a.total||Math.max(a.loaded,Math.round(o*b.averageBitrate/8));let E=f?l-p:l;E<1&&f&&(E=Math.min(l,8*a.loaded/g));const T=f?1e3*a.loaded/E:0,_=T?(y-a.loaded)/T:8*y/g+u/1e3;if(_<=m)return;const A=T?8*T:g;let S,k=Number.POSITIVE_INFINITY;for(S=e.level-1;S>d;S--){const e=v[S].maxBitrate;if(k=this.getTimeToLoadFrag(u/1e3,A,o*e,!v[S].details),k<m)break}if(k>=_)return;if(k>10*o)return;n.nextLoadLevel=n.nextAutoLevel=S,f?this.bwEstimator.sample(l-Math.min(u,p),a.loaded):this.bwEstimator.sampleTTFB(l);const w=v[S].maxBitrate;this.getBwEstimate()*this.hls.config.abrBandWidthUpFactor>w&&this.resetEstimator(w),this.clearTimer(),jR.warn(`[abr] Fragment ${e.sn}${t?" part "+t.index:""} of level ${e.level} is loading too slowly;\n      Time to underbuffer: ${m.toFixed(3)} s\n      Estimated load time for current fragment: ${_.toFixed(3)} s\n      Estimated load time for down switch fragment: ${k.toFixed(3)} s\n      TTFB estimate: ${0|p} ms\n      Current BW estimate: ${FR(g)?0|g:"Unknown"} bps\n      New BW estimate: ${0|this.getBwEstimate()} bps\n      Switching to level ${S} @ ${0|w} bps`),n.trigger($R.FRAG_LOAD_EMERGENCY_ABORTED,{frag:e,part:t,stats:a})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(jR.log(`setting initial bwe to ${e}`),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const e=this.hls.config;return new jx(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){const{hls:e}=this;e.on($R.MANIFEST_LOADING,this.onManifestLoading,this),e.on($R.FRAG_LOADING,this.onFragLoading,this),e.on($R.FRAG_LOADED,this.onFragLoaded,this),e.on($R.FRAG_BUFFERED,this.onFragBuffered,this),e.on($R.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on($R.LEVEL_LOADED,this.onLevelLoaded,this),e.on($R.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on($R.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on($R.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e&&(e.off($R.MANIFEST_LOADING,this.onManifestLoading,this),e.off($R.FRAG_LOADING,this.onFragLoading,this),e.off($R.FRAG_LOADED,this.onFragLoaded,this),e.off($R.FRAG_BUFFERED,this.onFragBuffered,this),e.off($R.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off($R.LEVEL_LOADED,this.onLevelLoaded,this),e.off($R.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off($R.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off($R.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,t){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,t){const n=t.frag;if(!this.ignoreFragment(n)){var i;if(!n.bitrateTest)this.fragCurrent=n,this.partCurrent=null!=(i=t.part)?i:null;this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(e,t){this.clearTimer()}onError(e,t){if(!t.fatal)switch(t.details){case VR.BUFFER_ADD_CODEC_ERROR:case VR.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case VR.FRAG_LOAD_TIMEOUT:{const e=t.frag,{fragCurrent:n,partCurrent:i}=this;if(e&&n&&e.sn===n.sn&&e.level===n.level){const t=performance.now(),n=i?i.stats:e.stats,r=t-n.loading.start,s=n.loading.first?n.loading.first-n.loading.start:-1;if(n.loaded&&s>-1){const e=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(r-Math.min(e,s),n.loaded)}else this.bwEstimator.sampleTTFB(r)}break}}}getTimeToLoadFrag(e,t,n,i){return e+n/t+(i?this.lastLevelLoadSec:0)}onLevelLoaded(e,t){const n=this.hls.config,{loading:i}=t.stats,r=i.end-i.start;FR(r)&&(this.lastLevelLoadSec=r/1e3),t.details.live?this.bwEstimator.update(n.abrEwmaSlowLive,n.abrEwmaFastLive):this.bwEstimator.update(n.abrEwmaSlowVoD,n.abrEwmaFastVoD)}onFragLoaded(e,{frag:t,part:n}){const i=n?n.stats:t.stats;if(t.type===qI&&this.bwEstimator.sampleTTFB(i.loading.first-i.loading.start),!this.ignoreFragment(t)){if(this.clearTimer(),t.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const e=n?n.duration:t.duration,r=this.hls.levels[t.level],s=(r.loaded?r.loaded.bytes:0)+i.loaded,a=(r.loaded?r.loaded.duration:0)+e;r.loaded={bytes:s,duration:a},r.realBitrate=Math.round(8*s/a)}if(t.bitrateTest){const e={stats:i,frag:t,part:n,id:t.type};this.onFragBuffered($R.FRAG_BUFFERED,e),t.bitrateTest=!1}else this.lastLoadedFragLevel=t.level}}onFragBuffered(e,t){const{frag:n,part:i}=t,r=null!=i&&i.stats.loaded?i.stats:n.stats;if(r.aborted)return;if(this.ignoreFragment(n))return;const s=r.parsing.end-r.loading.start-Math.min(r.loading.first-r.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(s,r.loaded),r.bwEstimate=this.getBwEstimate(),n.bitrateTest?this.bitrateTestDelay=s/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==qI||"initSegment"===e.sn}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:e,minAutoLevel:t}=this.hls,n=this.getBwEstimate(),i=this.hls.config.maxStarvationDelay,r=this.findBestLevel(n,t,e,0,i,1,1);if(r>-1)return r;const s=this.hls.firstLevel,a=Math.min(Math.max(s,t),e);return jR.warn(`[abr] Could not find best starting auto level. Defaulting to first in playlist ${s} clamped to ${a}`),a}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const e=this.forcedAutoLevel,t=this.bwEstimator.canEstimate(),n=this.lastLoadedFragLevel>-1;if(!(-1===e||t&&n&&this.nextAutoLevelKey!==this.getAutoLevelKey()))return e;const i=t&&n?this.getNextABRAutoLevel():this.firstAutoLevel;if(-1!==e){const t=this.hls.levels;if(t.length>Math.max(e,i)&&t[e].loadError<=t[i].loadError)return e}return this._nextAutoLevel=i,this.nextAutoLevelKey=this.getAutoLevelKey(),i}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:t,hls:n}=this,{maxAutoLevel:i,config:r,minAutoLevel:s}=n,a=t?t.duration:e?e.duration:0,o=this.getBwEstimate(),l=this.getStarvationDelay();let d=r.abrBandWidthFactor,c=r.abrBandWidthUpFactor;if(l){const e=this.findBestLevel(o,s,i,l,0,d,c);if(e>=0)return e}let u=a?Math.min(a,r.maxStarvationDelay):r.maxStarvationDelay;if(!l){const e=this.bitrateTestDelay;if(e){u=(a?Math.min(a,r.maxLoadingDelay):r.maxLoadingDelay)-e,jR.info(`[abr] bitrate test took ${Math.round(1e3*e)}ms, set first fragment max fetchDuration to ${Math.round(1e3*u)} ms`),d=c=1}}const h=this.findBestLevel(o,s,i,l,u,d,c);if(jR.info(`[abr] ${l?"rebuffering expected":"buffer is empty"}, optimal quality level ${h}`),h>-1)return h;const m=n.levels[s],p=n.levels[n.loadLevel];return(null==m?void 0:m.bitrate)<(null==p?void 0:p.bitrate)?s:n.loadLevel}getStarvationDelay(){const e=this.hls,t=e.media;if(!t)return 1/0;const n=t&&0!==t.playbackRate?Math.abs(t.playbackRate):1,i=e.mainForwardBufferInfo;return(i?i.len:0)/n}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,t,n,i,r,s,a){var o;const l=i+r,d=this.lastLoadedFragLevel,c=-1===d?this.hls.firstLevel:d,{fragCurrent:u,partCurrent:h}=this,{levels:m,allAudioTracks:p,loadLevel:f,config:g}=this.hls;if(1===m.length)return 0;const v=m[c],b=!(null==v||null==(o=v.details)||!o.live),y=-1===f||-1===d;let E,T="SDR",_=(null==v?void 0:v.frameRate)||0;const{audioPreference:A,videoPreference:S}=g,k=this.audioTracksByGroup||(this.audioTracksByGroup=function(e){return e.reduce(((e,t)=>{let n=e.groups[t.groupId];n||(n=e.groups[t.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),n.tracks.push(t);const i=t.channels||"2";return n.channels[i]=(n.channels[i]||0)+1,n.hasDefault=n.hasDefault||t.default,n.hasAutoSelect=n.hasAutoSelect||t.autoselect,n.hasDefault&&(e.hasDefaultAudio=!0),n.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e}),{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}(p));if(y){if(-1!==this.firstSelection)return this.firstSelection;const i=this.codecTiers||(this.codecTiers=function(e,t,n,i){return e.slice(n,i+1).reduce(((e,n)=>{if(!n.codecSet)return e;const i=n.audioGroups;let r=e[n.codecSet];r||(e[n.codecSet]=r={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!i,fragmentError:0}),r.minBitrate=Math.min(r.minBitrate,n.bitrate);const s=Math.min(n.height,n.width);return r.minHeight=Math.min(r.minHeight,s),r.minFramerate=Math.min(r.minFramerate,n.frameRate),r.maxScore=Math.max(r.maxScore,n.score),r.fragmentError+=n.fragmentError,r.videoRanges[n.videoRange]=(r.videoRanges[n.videoRange]||0)+1,i&&i.forEach((e=>{if(!e)return;const n=t.groups[e];n&&(r.hasDefaultAudio=r.hasDefaultAudio||t.hasDefaultAudio?n.hasDefault:n.hasAutoSelect||!t.hasDefaultAudio&&!t.hasAutoSelectAudio,Object.keys(n.channels).forEach((e=>{r.channels[e]=(r.channels[e]||0)+n.channels[e]})))})),e}),{})}(m,k,t,n)),r=function(e,t,n,i,r){const s=Object.keys(e),a=null==i?void 0:i.channels,o=null==i?void 0:i.audioCodec,l=a&&2===parseInt(a);let d=!0,c=!1,u=1/0,h=1/0,m=1/0,p=0,f=[];const{preferHDR:g,allowedVideoRanges:v}=Zx(t,r);for(let t=s.length;t--;){const n=e[s[t]];d=n.channels[2]>0,u=Math.min(u,n.minHeight),h=Math.min(h,n.minFramerate),m=Math.min(m,n.minBitrate);const i=v.filter((e=>n.videoRanges[e]>0));i.length>0&&(c=!0,f=i)}u=FR(u)?u:0,h=FR(h)?h:0;const b=Math.max(1080,u),y=Math.max(30,h);m=FR(m)?m:n,n=Math.max(m,n),c||(t=void 0,f=[]);const E=s.reduce(((t,i)=>{const r=e[i];if(i===t)return t;if(r.minBitrate>n)return Jx(i,`min bitrate of ${r.minBitrate} > current estimate of ${n}`),t;if(!r.hasDefaultAudio)return Jx(i,"no renditions with default or auto-select sound found"),t;if(o&&i.indexOf(o.substring(0,4))%5!=0)return Jx(i,`audio codec preference "${o}" not found`),t;if(a&&!l){if(!r.channels[a])return Jx(i,`no renditions with ${a} channel sound found (channels options: ${Object.keys(r.channels)})`),t}else if((!o||l)&&d&&0===r.channels[2])return Jx(i,"no renditions with stereo sound found"),t;return r.minHeight>b?(Jx(i,`min resolution of ${r.minHeight} > maximum of ${b}`),t):r.minFramerate>y?(Jx(i,`min framerate of ${r.minFramerate} > maximum of ${y}`),t):f.some((e=>r.videoRanges[e]>0))?r.maxScore<p?(Jx(i,`max score of ${r.maxScore} < selected max of ${p}`),t):t&&(SI(i)>=SI(t)||r.fragmentError>e[t].fragmentError)?t:(p=r.maxScore,i):(Jx(i,`no variants with VIDEO-RANGE of ${JSON.stringify(f)} found`),t)}),void 0);return{codecSet:E,videoRanges:f,preferHDR:g,minFramerate:h,minBitrate:m}}(i,T,e,A,S),{codecSet:s,videoRanges:a,minFramerate:o,minBitrate:l,preferHDR:d}=r;E=s,T=d?a[a.length-1]:a[0],_=o,e=Math.max(e,l),jR.log(`[abr] picked start tier ${JSON.stringify(r)}`)}else E=null==v?void 0:v.codecSet,T=null==v?void 0:v.videoRange;const w=h?h.duration:u?u.duration:0,L=this.bwEstimator.getEstimateTTFB()/1e3,R=[];for(let o=n;o>=t;o--){var C;const t=m[o],u=o>c;if(!t)continue;if(g.useMediaCapabilities&&!t.supportedResult&&!t.supportedPromise){const n=navigator.mediaCapabilities;"function"==typeof(null==n?void 0:n.decodingInfo)&&Xx(t,k,T,_,e,A)?(t.supportedPromise=Qx(t,k,n),t.supportedPromise.then((e=>{if(!this.hls)return;t.supportedResult=e;const n=this.hls.levels,i=n.indexOf(t);e.error?jR.warn(`[abr] MediaCapabilities decodingInfo error: "${e.error}" for level ${i} ${JSON.stringify(e)}`):e.supported||(jR.warn(`[abr] Unsupported MediaCapabilities decodingInfo result for level ${i} ${JSON.stringify(e)}`),i>-1&&n.length>1&&(jR.log(`[abr] Removing unsupported level ${i}`),this.hls.removeLevel(i)))}))):t.supportedResult=Yx}if(E&&t.codecSet!==E||T&&t.videoRange!==T||u&&_>t.frameRate||!u&&_>0&&_<t.frameRate||t.supportedResult&&(null==(C=t.supportedResult.decodingInfoResults)||!C[0].smooth)){R.push(o);continue}const p=t.details,S=(h?null==p?void 0:p.partTarget:null==p?void 0:p.averagetargetduration)||w;let I;I=u?a*e:s*e;const x=w&&i>=2*w&&0===r?m[o].averageBitrate:m[o].maxBitrate,D=this.getTimeToLoadFrag(L,I,x*S,void 0===p);if(I>=x&&(o===d||0===t.loadError&&0===t.fragmentError)&&(D<=L||!FR(D)||b&&!this.bitrateTestDelay||D<l)){const e=this.forcedAutoLevel;return o===f||-1!==e&&e===f||(R.length&&jR.trace(`[abr] Skipped level(s) ${R.join(",")} of ${n} max with CODECS and VIDEO-RANGE:"${m[R[0]].codecs}" ${m[R[0]].videoRange}; not compatible with "${v.codecs}" ${T}`),jR.info(`[abr] switch candidate:${c}->${o} adjustedbw(${Math.round(I)})-bitrate=${Math.round(I-x)} ttfb:${L.toFixed(1)} avgDuration:${S.toFixed(1)} maxFetchDuration:${l.toFixed(1)} fetchDuration:${D.toFixed(1)} firstSelection:${y} codecSet:${E} videoRange:${T} hls.loadLevel:${f}`)),y&&(this.firstSelection=o),o}}return-1}set nextAutoLevel(e){const{maxAutoLevel:t,minAutoLevel:n}=this.hls,i=Math.min(Math.max(e,n),t);this._nextAutoLevel!==i&&(this.nextAutoLevelKey="",this._nextAutoLevel=i)}},bufferController:class{constructor(e){this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendSource=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this.log=void 0,this.warn=void 0,this.error=void 0,this._onEndStreaming=e=>{this.hls&&this.hls.pauseBuffering()},this._onStartStreaming=e=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=()=>{const{media:e,mediaSource:t}=this;this.log("Media source opened"),e&&(e.removeEventListener("emptied",this._onMediaEmptied),this.updateMediaElementDuration(),this.hls.trigger($R.MEDIA_ATTACHED,{media:e,mediaSource:t})),t&&t.removeEventListener("sourceopen",this._onMediaSourceOpen),this.checkPendingTracks()},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:e,_objectUrl:t}=this;e!==t&&jR.error(`Media element src was set while attaching MediaSource (${t} > ${e})`)},this.hls=e;const t="[buffer-controller]";var n;this.appendSource=(n=bI(e.config.preferManagedMediaSource),"undefined"!=typeof self&&n===self.ManagedMediaSource),this.log=jR.log.bind(jR,t),this.warn=jR.warn.bind(jR,t),this.error=jR.error.bind(jR,t),this._initSourceBuffer(),this.registerListeners()}hasSourceTypes(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null,this.hls=null}registerListeners(){const{hls:e}=this;e.on($R.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on($R.MEDIA_DETACHING,this.onMediaDetaching,this),e.on($R.MANIFEST_LOADING,this.onManifestLoading,this),e.on($R.MANIFEST_PARSED,this.onManifestParsed,this),e.on($R.BUFFER_RESET,this.onBufferReset,this),e.on($R.BUFFER_APPENDING,this.onBufferAppending,this),e.on($R.BUFFER_CODECS,this.onBufferCodecs,this),e.on($R.BUFFER_EOS,this.onBufferEos,this),e.on($R.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on($R.LEVEL_UPDATED,this.onLevelUpdated,this),e.on($R.FRAG_PARSED,this.onFragParsed,this),e.on($R.FRAG_CHANGED,this.onFragChanged,this)}unregisterListeners(){const{hls:e}=this;e.off($R.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off($R.MEDIA_DETACHING,this.onMediaDetaching,this),e.off($R.MANIFEST_LOADING,this.onManifestLoading,this),e.off($R.MANIFEST_PARSED,this.onManifestParsed,this),e.off($R.BUFFER_RESET,this.onBufferReset,this),e.off($R.BUFFER_APPENDING,this.onBufferAppending,this),e.off($R.BUFFER_CODECS,this.onBufferCodecs,this),e.off($R.BUFFER_EOS,this.onBufferEos,this),e.off($R.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off($R.LEVEL_UPDATED,this.onLevelUpdated,this),e.off($R.FRAG_PARSED,this.onFragParsed,this),e.off($R.FRAG_CHANGED,this.onFragChanged,this)}_initSourceBuffer(){this.sourceBuffer={},this.operationQueue=new eO(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.appendErrors={audio:0,video:0,audiovideo:0},this.lastMpegAudioChunk=null}onManifestLoading(){this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,t){let n=2;(t.audio&&!t.video||!t.altAudio)&&(n=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=n,this.log(`${this.bufferCodecEventsExpected} bufferCodec event(s) expected`)}onMediaAttaching(e,t){const n=this.media=t.media,i=bI(this.appendSource);if(n&&i){var r;const e=this.mediaSource=new i;this.log(`created media source: ${null==(r=e.constructor)?void 0:r.name}`),e.addEventListener("sourceopen",this._onMediaSourceOpen),e.addEventListener("sourceended",this._onMediaSourceEnded),e.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(e.addEventListener("startstreaming",this._onStartStreaming),e.addEventListener("endstreaming",this._onEndStreaming));const t=this._objectUrl=self.URL.createObjectURL(e);if(this.appendSource)try{n.removeAttribute("src");const i=self.ManagedMediaSource;n.disableRemotePlayback=n.disableRemotePlayback||i&&e instanceof i,nO(n),function(e,t){const n=self.document.createElement("source");n.type="video/mp4",n.src=t,e.appendChild(n)}(n,t),n.load()}catch(e){n.src=t}else n.src=t;n.addEventListener("emptied",this._onMediaEmptied)}}onMediaDetaching(){const{media:e,mediaSource:t,_objectUrl:n}=this;if(t){if(this.log("media source detaching"),"open"===t.readyState)try{t.endOfStream()}catch(e){this.warn(`onMediaDetaching: ${e.message} while calling endOfStream`)}this.onBufferReset(),t.removeEventListener("sourceopen",this._onMediaSourceOpen),t.removeEventListener("sourceended",this._onMediaSourceEnded),t.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(t.removeEventListener("startstreaming",this._onStartStreaming),t.removeEventListener("endstreaming",this._onEndStreaming)),e&&(e.removeEventListener("emptied",this._onMediaEmptied),n&&self.URL.revokeObjectURL(n),this.mediaSrc===n?(e.removeAttribute("src"),this.appendSource&&nO(e),e.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger($R.MEDIA_DETACHED,void 0)}onBufferReset(){this.getSourceBufferTypes().forEach((e=>{this.resetBuffer(e)})),this._initSourceBuffer()}resetBuffer(e){const t=this.sourceBuffer[e];try{var n;if(t)this.removeBufferListeners(e),this.sourceBuffer[e]=void 0,null!=(n=this.mediaSource)&&n.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(t)}catch(t){this.warn(`onBufferReset ${e}`,t)}}onBufferCodecs(e,t){const n=this.getSourceBufferTypes().length,i=Object.keys(t);if(i.forEach((e=>{if(n){const n=this.tracks[e];if(n&&"function"==typeof n.buffer.changeType){var i;const{id:r,codec:s,levelCodec:a,container:o,metadata:l}=t[e],d=RI(n.codec,n.levelCodec),c=null==d?void 0:d.replace(tO,"$1");let u=RI(s,a);const h=null==(i=u)?void 0:i.replace(tO,"$1");if(u&&c!==h){"audio"===e.slice(0,5)&&(u=LI(u,this.appendSource));const t=`${o};codecs=${u}`;this.appendChangeType(e,t),this.log(`switching codec ${d} to ${u}`),this.tracks[e]={buffer:n.buffer,codec:s,container:o,levelCodec:a,metadata:l,id:r}}}}else this.pendingTracks[e]=t[e]})),n)return;const r=Math.max(this.bufferCodecEventsExpected-1,0);this.bufferCodecEventsExpected!==r&&(this.log(`${r} bufferCodec event(s) expected ${i.join(",")}`),this.bufferCodecEventsExpected=r),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks()}appendChangeType(e,t){const{operationQueue:n}=this,i={execute:()=>{const i=this.sourceBuffer[e];i&&(this.log(`changing ${e} sourceBuffer type to ${t}`),i.changeType(t)),n.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:t=>{this.warn(`Failed to change ${e} SourceBuffer type`,t)}};n.append(i,e,!!this.pendingTracks[e])}onBufferAppending(e,t){const{hls:n,operationQueue:i,tracks:r}=this,{data:s,type:a,frag:o,part:l,chunkMeta:d}=t,c=d.buffering[a],u=self.performance.now();c.start=u;const h=o.stats.buffering,m=l?l.stats.buffering:null;0===h.start&&(h.start=u),m&&0===m.start&&(m.start=u);const p=r.audio;let f=!1;"audio"===a&&"audio/mpeg"===(null==p?void 0:p.container)&&(f=!this.lastMpegAudioChunk||1===d.id||this.lastMpegAudioChunk.sn!==d.sn,this.lastMpegAudioChunk=d);const g=o.start,v={execute:()=>{if(c.executeStart=self.performance.now(),f){const e=this.sourceBuffer[a];if(e){const t=g-e.timestampOffset;Math.abs(t)>=.1&&(this.log(`Updating audio SourceBuffer timestampOffset to ${g} (delta: ${t}) sn: ${o.sn})`),e.timestampOffset=g)}}this.appendExecutor(s,a)},onStart:()=>{},onComplete:()=>{const e=self.performance.now();c.executeEnd=c.end=e,0===h.first&&(h.first=e),m&&0===m.first&&(m.first=e);const{sourceBuffer:t}=this,n={};for(const e in t)n[e]=mD.getBuffered(t[e]);this.appendErrors[a]=0,"audio"===a||"video"===a?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger($R.BUFFER_APPENDED,{type:a,frag:o,part:l,chunkMeta:d,parent:o.type,timeRanges:n})},onError:e=>{const t={type:HR.MEDIA_ERROR,parent:o.type,details:VR.BUFFER_APPEND_ERROR,sourceBufferName:a,frag:o,part:l,chunkMeta:d,error:e,err:e,fatal:!1};if(e.code===DOMException.QUOTA_EXCEEDED_ERR)t.details=VR.BUFFER_FULL_ERROR;else{const e=++this.appendErrors[a];t.details=VR.BUFFER_APPEND_ERROR,this.warn(`Failed ${e}/${n.config.appendErrorMaxRetry} times to append segment in "${a}" sourceBuffer`),e>=n.config.appendErrorMaxRetry&&(t.fatal=!0)}n.trigger($R.ERROR,t)}};i.append(v,a,!!this.pendingTracks[a])}onBufferFlushing(e,t){const{operationQueue:n}=this,i=e=>({execute:this.removeExecutor.bind(this,e,t.startOffset,t.endOffset),onStart:()=>{},onComplete:()=>{this.hls.trigger($R.BUFFER_FLUSHED,{type:e})},onError:t=>{this.warn(`Failed to remove from ${e} SourceBuffer`,t)}});t.type?n.append(i(t.type),t.type):this.getSourceBufferTypes().forEach((e=>{n.append(i(e),e)}))}onFragParsed(e,t){const{frag:n,part:i}=t,r=[],s=i?i.elementaryStreams:n.elementaryStreams;s[nC]?r.push("audiovideo"):(s[eC]&&r.push("audio"),s[tC]&&r.push("video"));0===r.length&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${n.type} level: ${n.level} sn: ${n.sn}`),this.blockBuffers((()=>{const e=self.performance.now();n.stats.buffering.end=e,i&&(i.stats.buffering.end=e);const t=i?i.stats:n.stats;this.hls.trigger($R.FRAG_BUFFERED,{frag:n,part:i,stats:t,id:n.type})}),r)}onFragChanged(e,t){this.trimBuffers()}onBufferEos(e,t){this.getSourceBufferTypes().reduce(((e,n)=>{const i=this.sourceBuffer[n];return!i||t.type&&t.type!==n||(i.ending=!0,i.ended||(i.ended=!0,this.log(`${n} sourceBuffer now EOS`))),e&&!(i&&!i.ended)}),!0)&&(this.log("Queueing mediaSource.endOfStream()"),this.blockBuffers((()=>{this.getSourceBufferTypes().forEach((e=>{const t=this.sourceBuffer[e];t&&(t.ending=!1)}));const{mediaSource:e}=this;e&&"open"===e.readyState?(this.log("Calling mediaSource.endOfStream()"),e.endOfStream()):e&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${e.readyState}`)})))}onLevelUpdated(e,{details:t}){t.fragments.length&&(this.details=t,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())}trimBuffers(){const{hls:e,details:t,media:n}=this;if(!n||null===t)return;if(!this.getSourceBufferTypes().length)return;const i=e.config,r=n.currentTime,s=t.levelTargetDuration,a=t.live&&null!==i.liveBackBufferLength?i.liveBackBufferLength:i.backBufferLength;if(FR(a)&&a>0){const e=Math.max(a,s),t=Math.floor(r/s)*s-e;this.flushBackBuffer(r,s,t)}if(FR(i.frontBufferFlushThreshold)&&i.frontBufferFlushThreshold>0){const e=Math.max(i.maxBufferLength,i.frontBufferFlushThreshold),t=Math.max(e,s),n=Math.floor(r/s)*s+t;this.flushFrontBuffer(r,s,n)}}flushBackBuffer(e,t,n){const{details:i,sourceBuffer:r}=this;this.getSourceBufferTypes().forEach((s=>{const a=r[s];if(a){const r=mD.getBuffered(a);if(r.length>0&&n>r.start(0)){if(this.hls.trigger($R.BACK_BUFFER_REACHED,{bufferEnd:n}),null!=i&&i.live)this.hls.trigger($R.LIVE_BACK_BUFFER_REACHED,{bufferEnd:n});else if(a.ended&&r.end(r.length-1)-e<2*t)return void this.log(`Cannot flush ${s} back buffer while SourceBuffer is in ended state`);this.hls.trigger($R.BUFFER_FLUSHING,{startOffset:0,endOffset:n,type:s})}}}))}flushFrontBuffer(e,t,n){const{sourceBuffer:i}=this;this.getSourceBufferTypes().forEach((r=>{const s=i[r];if(s){const i=mD.getBuffered(s),a=i.length;if(a<2)return;const o=i.start(a-1),l=i.end(a-1);if(n>o||e>=o&&e<=l)return;if(s.ended&&e-l<2*t)return void this.log(`Cannot flush ${r} front buffer while SourceBuffer is in ended state`);this.hls.trigger($R.BUFFER_FLUSHING,{startOffset:o,endOffset:1/0,type:r})}}))}updateMediaElementDuration(){if(!this.details||!this.media||!this.mediaSource||"open"!==this.mediaSource.readyState)return;const{details:e,hls:t,media:n,mediaSource:i}=this,r=e.fragments[0].start+e.totalduration,s=n.duration,a=FR(i.duration)?i.duration:0;e.live&&t.config.liveDurationInfinity?(i.duration=1/0,this.updateSeekableRange(e)):(r>a&&r>s||!FR(s))&&(this.log(`Updating Media Source duration to ${r.toFixed(3)}`),i.duration=r)}updateSeekableRange(e){const t=this.mediaSource,n=e.fragments;if(n.length&&e.live&&null!=t&&t.setLiveSeekableRange){const i=Math.max(0,n[0].start),r=Math.max(i,i+e.totalduration);this.log(`Media Source duration is set to ${t.duration}. Setting seekable range to ${i}-${r}.`),t.setLiveSeekableRange(i,r)}}checkPendingTracks(){const{bufferCodecEventsExpected:e,operationQueue:t,pendingTracks:n}=this,i=Object.keys(n).length;if(i&&(!e||2===i||"audiovideo"in n)){this.createSourceBuffers(n),this.pendingTracks={};const e=this.getSourceBufferTypes();if(e.length)this.hls.trigger($R.BUFFER_CREATED,{tracks:this.tracks}),e.forEach((e=>{t.executeNext(e)}));else{const e=new Error("could not create source buffer for media codec(s)");this.hls.trigger($R.ERROR,{type:HR.MEDIA_ERROR,details:VR.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:e,reason:e.message})}}}createSourceBuffers(e){const{sourceBuffer:t,mediaSource:n}=this;if(!n)throw Error("createSourceBuffers called when mediaSource was null");for(const r in e)if(!t[r]){var i;const s=e[r];if(!s)throw Error(`source buffer exists for track ${r}, however track does not`);let a=-1===(null==(i=s.levelCodec)?void 0:i.indexOf(","))?s.levelCodec:s.codec;a&&"audio"===r.slice(0,5)&&(a=LI(a,this.appendSource));const o=`${s.container};codecs=${a}`;this.log(`creating sourceBuffer(${o})`);try{const e=t[r]=n.addSourceBuffer(o),i=r;this.addBufferListener(i,"updatestart",this._onSBUpdateStart),this.addBufferListener(i,"updateend",this._onSBUpdateEnd),this.addBufferListener(i,"error",this._onSBUpdateError),this.appendSource&&this.addBufferListener(i,"bufferedchange",((e,t)=>{const n=t.removedRanges;null!=n&&n.length&&this.hls.trigger($R.BUFFER_FLUSHED,{type:r})})),this.tracks[r]={buffer:e,codec:a,container:s.container,levelCodec:s.levelCodec,metadata:s.metadata,id:s.id}}catch(e){this.error(`error while trying to add sourceBuffer: ${e.message}`),this.hls.trigger($R.ERROR,{type:HR.MEDIA_ERROR,details:VR.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:e,sourceBufferName:r,mimeType:o})}}}get mediaSrc(){var e;const t=(null==(e=this.media)?void 0:e.firstChild)||this.media;return null==t?void 0:t.src}_onSBUpdateStart(e){const{operationQueue:t}=this;t.current(e).onStart()}_onSBUpdateEnd(e){var t;if("closed"===(null==(t=this.mediaSource)?void 0:t.readyState))return void this.resetBuffer(e);const{operationQueue:n}=this;n.current(e).onComplete(),n.shiftAndExecuteNext(e)}_onSBUpdateError(e,t){var n;const i=new Error(`${e} SourceBuffer error. MediaSource readyState: ${null==(n=this.mediaSource)?void 0:n.readyState}`);this.error(`${i}`,t),this.hls.trigger($R.ERROR,{type:HR.MEDIA_ERROR,details:VR.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:i,fatal:!1});const r=this.operationQueue.current(e);r&&r.onError(i)}removeExecutor(e,t,n){const{media:i,mediaSource:r,operationQueue:s,sourceBuffer:a}=this,o=a[e];if(!i||!r||!o)return this.warn(`Attempting to remove from the ${e} SourceBuffer, but it does not exist`),void s.shiftAndExecuteNext(e);const l=FR(i.duration)?i.duration:1/0,d=FR(r.duration)?r.duration:1/0,c=Math.max(0,t),u=Math.min(n,l,d);u>c&&(!o.ending||o.ended)?(o.ended=!1,this.log(`Removing [${c},${u}] from the ${e} SourceBuffer`),o.remove(c,u)):s.shiftAndExecuteNext(e)}appendExecutor(e,t){const n=this.sourceBuffer[t];if(n)n.ended=!1,n.appendBuffer(e);else if(!this.pendingTracks[t])throw new Error(`Attempting to append to the ${t} SourceBuffer, but it does not exist`)}blockBuffers(e,t=this.getSourceBufferTypes()){if(!t.length)return this.log("Blocking operation requested, but no SourceBuffers exist"),void Promise.resolve().then(e);const{operationQueue:n}=this,i=t.map((e=>n.appendBlocker(e)));Promise.all(i).then((()=>{e(),t.forEach((e=>{const t=this.sourceBuffer[e];null!=t&&t.updating||n.shiftAndExecuteNext(e)}))}))}getSourceBufferTypes(){return Object.keys(this.sourceBuffer)}addBufferListener(e,t,n){const i=this.sourceBuffer[e];if(!i)return;const r=n.bind(this,e);this.listeners[e].push({event:t,listener:r}),i.addEventListener(t,r)}removeBufferListeners(e){const t=this.sourceBuffer[e];t&&this.listeners[e].forEach((e=>{t.removeEventListener(e.event,e.listener)}))}},capLevelController:QO,errorController:class{constructor(e){this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.log=void 0,this.warn=void 0,this.error=void 0,this.hls=e,this.log=jR.log.bind(jR,"[info]:"),this.warn=jR.warn.bind(jR,"[warning]:"),this.error=jR.error.bind(jR,"[error]:"),this.registerListeners()}registerListeners(){const e=this.hls;e.on($R.ERROR,this.onError,this),e.on($R.MANIFEST_LOADING,this.onManifestLoading,this),e.on($R.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off($R.ERROR,this.onError,this),e.off($R.ERROR,this.onErrorOut,this),e.off($R.MANIFEST_LOADING,this.onManifestLoading,this),e.off($R.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return(null==e?void 0:e.type)===qI?e.level:this.hls.loadLevel}onManifestLoading(){this.playlistError=0,this.penalizedRenditions={}}onLevelUpdated(){this.playlistError=0}onError(e,t){var n,i;if(t.fatal)return;const r=this.hls,s=t.context;switch(t.details){case VR.FRAG_LOAD_ERROR:case VR.FRAG_LOAD_TIMEOUT:case VR.KEY_LOAD_ERROR:case VR.KEY_LOAD_TIMEOUT:return void(t.errorAction=this.getFragRetryOrSwitchAction(t));case VR.FRAG_PARSING_ERROR:if(null!=(n=t.frag)&&n.gap)return void(t.errorAction={action:Ux,flags:Vx});case VR.FRAG_GAP:case VR.FRAG_DECRYPT_ERROR:return t.errorAction=this.getFragRetryOrSwitchAction(t),void(t.errorAction.action=Bx);case VR.LEVEL_EMPTY_ERROR:case VR.LEVEL_PARSING_ERROR:{var a,o;const e=t.parent===qI?t.level:r.loadLevel;t.details===VR.LEVEL_EMPTY_ERROR&&null!=(a=t.context)&&null!=(o=a.levelDetails)&&o.live?t.errorAction=this.getPlaylistRetryOrSwitchAction(t,e):(t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,e))}return;case VR.LEVEL_LOAD_ERROR:case VR.LEVEL_LOAD_TIMEOUT:return void("number"==typeof(null==s?void 0:s.level)&&(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,s.level)));case VR.AUDIO_TRACK_LOAD_ERROR:case VR.AUDIO_TRACK_LOAD_TIMEOUT:case VR.SUBTITLE_LOAD_ERROR:case VR.SUBTITLE_TRACK_LOAD_TIMEOUT:if(s){const e=r.levels[r.loadLevel];if(e&&(s.type===GI&&e.hasAudioGroup(s.groupId)||s.type===KI&&e.hasSubtitleGroup(s.groupId)))return t.errorAction=this.getPlaylistRetryOrSwitchAction(t,r.loadLevel),t.errorAction.action=Bx,void(t.errorAction.flags=Wx)}return;case VR.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{const e=r.levels[r.loadLevel],n=null==e?void 0:e.attrs["HDCP-LEVEL"];n?t.errorAction={action:Bx,flags:Gx,hdcpLevel:n}:this.keySystemError(t)}return;case VR.BUFFER_ADD_CODEC_ERROR:case VR.REMUX_ALLOC_ERROR:case VR.BUFFER_APPEND_ERROR:return void(t.errorAction=this.getLevelSwitchAction(t,null!=(i=t.level)?i:r.loadLevel));case VR.INTERNAL_EXCEPTION:case VR.BUFFER_APPENDING_ERROR:case VR.BUFFER_FULL_ERROR:case VR.LEVEL_SWITCH_ERROR:case VR.BUFFER_STALLED_ERROR:case VR.BUFFER_SEEK_OVER_HOLE:case VR.BUFFER_NUDGE_ON_STALL:return void(t.errorAction={action:Ux,flags:Vx})}t.type===HR.KEY_SYSTEM_ERROR&&this.keySystemError(t)}keySystemError(e){const t=this.getVariantLevelIndex(e.frag);e.levelRetry=!1,e.errorAction=this.getLevelSwitchAction(e,t)}getPlaylistRetryOrSwitchAction(e,t){const n=Ix(this.hls.config.playlistLoadPolicy,e),i=this.playlistError++;if(Mx(n,i,Cx(e),e.response))return{action:Hx,flags:Vx,retryConfig:n,retryCount:i};const r=this.getLevelSwitchAction(e,t);return n&&(r.retryConfig=n,r.retryCount=i),r}getFragRetryOrSwitchAction(e){const t=this.hls,n=this.getVariantLevelIndex(e.frag),i=t.levels[n],{fragLoadPolicy:r,keyLoadPolicy:s}=t.config,a=Ix(e.details.startsWith("key")?s:r,e),o=t.levels.reduce(((e,t)=>e+t.fragmentError),0);if(i){e.details!==VR.FRAG_GAP&&i.fragmentError++;if(Mx(a,o,Cx(e),e.response))return{action:Hx,flags:Vx,retryConfig:a,retryCount:o}}const l=this.getLevelSwitchAction(e,n);return a&&(l.retryConfig=a,l.retryCount=o),l}getLevelSwitchAction(e,t){const n=this.hls;null==t&&(t=n.loadLevel);const i=this.hls.levels[t];if(i){var r,s;const t=e.details;i.loadError++,t===VR.BUFFER_APPEND_ERROR&&i.fragmentError++;let l=-1;const{levels:d,loadLevel:c,minAutoLevel:u,maxAutoLevel:h}=n;n.autoLevelEnabled||(n.loadLevel=-1);const m=null==(r=e.frag)?void 0:r.type,p=(m===jI&&t===VR.FRAG_PARSING_ERROR||"audio"===e.sourceBufferName&&(t===VR.BUFFER_ADD_CODEC_ERROR||t===VR.BUFFER_APPEND_ERROR))&&d.some((({audioCodec:e})=>i.audioCodec!==e)),f="video"===e.sourceBufferName&&(t===VR.BUFFER_ADD_CODEC_ERROR||t===VR.BUFFER_APPEND_ERROR)&&d.some((({codecSet:e,audioCodec:t})=>i.codecSet!==e&&i.audioCodec===t)),{type:g,groupId:v}=null!=(s=e.context)?s:{};for(let n=d.length;n--;){const r=(n+c)%d.length;if(r!==c&&r>=u&&r<=h&&0===d[r].loadError){var a,o;const n=d[r];if(t===VR.FRAG_GAP&&e.frag){const t=d[r].details;if(t){const n=Px(e.frag,t.fragments,e.frag.start);if(null!=n&&n.gap)continue}}else{if(g===GI&&n.hasAudioGroup(v)||g===KI&&n.hasSubtitleGroup(v))continue;if(m===jI&&null!=(a=i.audioGroups)&&a.some((e=>n.hasAudioGroup(e)))||m===YI&&null!=(o=i.subtitleGroups)&&o.some((e=>n.hasSubtitleGroup(e)))||p&&i.audioCodec===n.audioCodec||!p&&i.audioCodec!==n.audioCodec||f&&i.codecSet===n.codecSet)continue}l=r;break}}if(l>-1&&n.loadLevel!==l)return e.levelRetry=!0,this.playlistError=0,{action:Bx,flags:Vx,nextAutoLevel:l}}return{action:Bx,flags:Wx}}onErrorOut(e,t){var n;switch(null==(n=t.errorAction)?void 0:n.action){case Ux:break;case Bx:this.sendAlternateToPenaltyBox(t),t.errorAction.resolved||t.details===VR.FRAG_GAP?/MediaSource readyState: ended/.test(t.error.message)&&(this.warn(`MediaSource ended after "${t.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError()):t.fatal=!0}t.fatal&&this.hls.stopLoad()}sendAlternateToPenaltyBox(e){const t=this.hls,n=e.errorAction;if(!n)return;const{flags:i,hdcpLevel:r,nextAutoLevel:s}=n;switch(i){case Vx:this.switchLevel(e,s);break;case Gx:r&&(t.maxHdcpLevel=hx[hx.indexOf(r)-1],n.resolved=!0),this.warn(`Restricting playback to HDCP-LEVEL of "${t.maxHdcpLevel}" or lower`)}n.resolved||this.switchLevel(e,s)}switchLevel(e,t){void 0!==t&&e.errorAction&&(this.warn(`switching to level ${t} after ${e.details}`),this.hls.nextAutoLevel=t,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel)}},fpsController:class{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on($R.MEDIA_ATTACHING,this.onMediaAttaching,this)}unregisterListeners(){this.hls.off($R.MEDIA_ATTACHING,this.onMediaAttaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,t){const n=this.hls.config;if(n.capLevelOnFPSDrop){const e=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=e,e&&"function"==typeof e.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),n.fpsDroppedMonitoringPeriod)}}checkFPS(e,t,n){const i=performance.now();if(t){if(this.lastTime){const e=i-this.lastTime,r=n-this.lastDroppedFrames,s=t-this.lastDecodedFrames,a=1e3*r/e,o=this.hls;if(o.trigger($R.FPS_DROP,{currentDropped:r,currentDecoded:s,totalDroppedFrames:n}),a>0&&r>o.config.fpsDroppedMonitoringThreshold*s){let e=o.currentLevel;jR.warn("drop FPS ratio greater than max allowed value for currentLevel: "+e),e>0&&(-1===o.autoLevelCapping||o.autoLevelCapping>=e)&&(e-=1,o.trigger($R.FPS_DROP_LEVEL_CAPPING,{level:e,droppedLevel:o.currentLevel}),o.autoLevelCapping=e,this.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=n,this.lastDecodedFrames=t}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}},stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:EC,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0,useMediaCapabilities:!0,certLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null}},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},{cueHandler:YP,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:class extends VD{constructor(e,t,n){super(e,t,n,"[subtitle-stream-controller]",YI),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}_registerListeners(){const{hls:e}=this;e.on($R.MEDIA_ATTACHED,this.onMediaAttached,this),e.on($R.MEDIA_DETACHING,this.onMediaDetaching,this),e.on($R.MANIFEST_LOADING,this.onManifestLoading,this),e.on($R.LEVEL_LOADED,this.onLevelLoaded,this),e.on($R.ERROR,this.onError,this),e.on($R.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on($R.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on($R.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on($R.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on($R.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on($R.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off($R.MEDIA_ATTACHED,this.onMediaAttached,this),e.off($R.MEDIA_DETACHING,this.onMediaDetaching,this),e.off($R.MANIFEST_LOADING,this.onManifestLoading,this),e.off($R.LEVEL_LOADED,this.onLevelLoaded,this),e.off($R.ERROR,this.onError,this),e.off($R.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off($R.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off($R.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off($R.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off($R.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off($R.FRAG_BUFFERED,this.onFragBuffered,this)}startLoad(e){this.stopLoad(),this.state=xD,this.setInterval(500),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}onManifestLoading(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()}onMediaDetaching(){this.tracksBuffered=[],super.onMediaDetaching()}onLevelLoaded(e,t){this.mainDetails=t.details}onSubtitleFragProcessed(e,t){const{frag:n,success:i}=t;if(this.fragPrevious=n,this.state=xD,!i)return;const r=this.tracksBuffered[this.currentTrackId];if(!r)return;let s;const a=n.start;for(let e=0;e<r.length;e++)if(a>=r[e].start&&a<=r[e].end){s=r[e];break}const o=n.start+n.duration;s?s.end=o:(s={start:a,end:o},r.push(s)),this.fragmentTracker.fragBuffered(n),this.fragBufferedComplete(n,null)}onBufferFlushing(e,t){const{startOffset:n,endOffset:i}=t;if(0===n&&i!==Number.POSITIVE_INFINITY){const e=i-1;if(e<=0)return;t.endOffsetSubtitles=Math.max(0,e),this.tracksBuffered.forEach((t=>{for(let n=0;n<t.length;)if(t[n].end<=e)t.shift();else{if(!(t[n].start<e))break;t[n].start=e,n++}})),this.fragmentTracker.removeFragmentsInRange(n,e,YI)}}onFragBuffered(e,t){var n;this.loadedmetadata||t.frag.type!==qI||null!=(n=this.media)&&n.buffered.length&&(this.loadedmetadata=!0)}onError(e,t){const n=t.frag;(null==n?void 0:n.type)===YI&&(this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==ID&&(this.state=xD))}onSubtitleTracksUpdated(e,{subtitleTracks:t}){this.levels&&XM(this.levels,t)?this.levels=t.map((e=>new yx(e))):(this.tracksBuffered=[],this.levels=t.map((e=>{const t=new yx(e);return this.tracksBuffered[t.id]=[],t})),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,YI),this.fragPrevious=null,this.mediaBuffer=null)}onSubtitleTrackSwitch(e,t){var n;if(this.currentTrackId=t.id,null==(n=this.levels)||!n.length||-1===this.currentTrackId)return void this.clearInterval();const i=this.levels[this.currentTrackId];null!=i&&i.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,i&&this.setInterval(500)}onSubtitleTrackLoaded(e,t){var n;const{currentTrackId:i,levels:r}=this,{details:s,id:a}=t;if(!r)return void this.warn(`Subtitle tracks were reset while loading level ${a}`);const o=r[i];if(a>=r.length||a!==i||!o)return;this.log(`Subtitle track ${a} loaded [${s.startSN},${s.endSN}]${s.lastPartSn?`[part-${s.lastPartSn}-${s.lastPartIndex}]`:""},duration:${s.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let l=0;if(s.live||null!=(n=o.details)&&n.live){const e=this.mainDetails;if(s.deltaUpdateFailed||!e)return;const t=e.fragments[0];var d;if(o.details)l=this.alignPlaylists(s,o.details,null==(d=this.levelLastLoaded)?void 0:d.details),0===l&&t&&(l=t.start,kx(s,l));else s.hasProgramDateTime&&e.hasProgramDateTime?(yD(s,e),l=s.fragments[0].start):t&&(l=t.start,kx(s,l))}if(o.details=s,this.levelLastLoaded=o,this.startFragRequested||!this.mainDetails&&s.live||this.setStartPosition(this.mainDetails||s,l),this.tick(),s.live&&!this.fragCurrent&&this.media&&this.state===xD){Px(null,s.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),o.details=void 0)}}_handleFragmentLoadComplete(e){const{frag:t,payload:n}=e,i=t.decryptdata,r=this.hls;if(!this.fragContextChanged(t)&&n&&n.byteLength>0&&null!=i&&i.key&&i.iv&&"AES-128"===i.method){const e=performance.now();this.decrypter.decrypt(new Uint8Array(n),i.key.buffer,i.iv.buffer).catch((e=>{throw r.trigger($R.ERROR,{type:HR.MEDIA_ERROR,details:VR.FRAG_DECRYPT_ERROR,fatal:!1,error:e,reason:e.message,frag:t}),e})).then((n=>{const i=performance.now();r.trigger($R.FRAG_DECRYPTED,{frag:t,payload:n,stats:{tstart:e,tdecrypt:i}})})).catch((e=>{this.warn(`${e.name}: ${e.message}`),this.state=xD}))}}doTick(){if(this.media){if(this.state===xD){const{currentTrackId:e,levels:t}=this,n=null==t?void 0:t[e];if(!n||!t.length||!n.details)return;const{config:i}=this,r=this.getLoadPosition(),s=mD.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],r,i.maxBufferHole),{end:a,len:o}=s,l=this.getFwdBufferInfo(this.media,qI),d=n.details;if(o>this.getMaxBufferLength(null==l?void 0:l.len)+d.levelTargetDuration)return;const c=d.fragments,u=c.length,h=d.edge;let m=null;const p=this.fragPrevious;if(a<h){const e=i.maxFragLookUpTolerance,t=a>h-e?0:e;m=Px(p,c,Math.max(c[0].start,a),t),!m&&p&&p.start<c[0].start&&(m=c[0])}else m=c[u-1];if(!m)return;if(m=this.mapToInitFragWhenRequired(m),"initSegment"!==m.sn){const e=c[m.sn-d.startSN-1];e&&e.cc===m.cc&&this.fragmentTracker.getState(e)===sD&&(m=e)}this.fragmentTracker.getState(m)===sD&&this.loadFragment(m,n,a)}}else this.state=xD}getMaxBufferLength(e){const t=super.getMaxBufferLength();return e?Math.max(t,e):t}loadFragment(e,t,n){this.fragCurrent=e,"initSegment"===e.sn?this._loadInitSegment(e,t):(this.startFragRequested=!0,super.loadFragment(e,t,n))}get mediaBufferTimeRanges(){return new JM(this.tracksBuffered[this.currentTrackId]||[])}},subtitleTrackController:class extends Kx{constructor(e){super(e,"[subtitle-track-controller]"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let e=null;const t=nx(this.media.textTracks);for(let n=0;n<t.length;n++)if("hidden"===t[n].mode)e=t[n];else if("showing"===t[n].mode){e=t[n];break}const n=this.findTrackForTextTrack(e);this.subtitleTrack!==n&&this.setSubtitleTrack(n)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:e}=this;e.on($R.MEDIA_ATTACHED,this.onMediaAttached,this),e.on($R.MEDIA_DETACHING,this.onMediaDetaching,this),e.on($R.MANIFEST_LOADING,this.onManifestLoading,this),e.on($R.MANIFEST_PARSED,this.onManifestParsed,this),e.on($R.LEVEL_LOADING,this.onLevelLoading,this),e.on($R.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on($R.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on($R.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off($R.MEDIA_ATTACHED,this.onMediaAttached,this),e.off($R.MEDIA_DETACHING,this.onMediaDetaching,this),e.off($R.MANIFEST_LOADING,this.onManifestLoading,this),e.off($R.MANIFEST_PARSED,this.onManifestParsed,this),e.off($R.LEVEL_LOADING,this.onLevelLoading,this),e.off($R.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off($R.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off($R.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(){if(!this.media)return;self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId);nx(this.media.textTracks).forEach((e=>{ex(e)})),this.subtitleTrack=-1,this.media=null}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.subtitleTracks}onSubtitleTrackLoaded(e,t){const{id:n,groupId:i,details:r}=t,s=this.tracksInGroup[n];if(!s||s.groupId!==i)return void this.warn(`Subtitle track with id:${n} and group:${i} not found in active group ${null==s?void 0:s.groupId}`);const a=s.details;s.details=t.details,this.log(`Subtitle track ${n} "${s.name}" lang:${s.lang} group:${i} loaded [${r.startSN}-${r.endSN}]`),n===this.trackId&&this.playlistLoaded(n,t,a)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const n=t.subtitleGroups||null,i=this.groupIds;let r=this.currentTrack;if(!n||(null==i?void 0:i.length)!==(null==n?void 0:n.length)||null!=n&&n.some((e=>-1===(null==i?void 0:i.indexOf(e))))){this.groupIds=n,this.trackId=-1,this.currentTrack=null;const e=this.tracks.filter((e=>!n||-1!==n.indexOf(e.groupId)));if(e.length)this.selectDefaultTrack&&!e.some((e=>e.default))&&(this.selectDefaultTrack=!1),e.forEach(((e,t)=>{e.id=t}));else if(!r&&!this.tracksInGroup.length)return;this.tracksInGroup=e;const t=this.hls.config.subtitlePreference;if(!r&&t){this.selectDefaultTrack=!1;const n=eD(t,e);if(n>-1)r=e[n];else{const e=eD(t,this.tracks);r=this.tracks[e]}}let i=this.findTrackId(r);-1===i&&r&&(i=this.findTrackId(null));const s={subtitleTracks:e};this.log(`Updating subtitle tracks, ${e.length} track(s) found in "${null==n?void 0:n.join(",")}" group-id`),this.hls.trigger($R.SUBTITLE_TRACKS_UPDATED,s),-1!==i&&-1===this.trackId&&this.setSubtitleTrack(i)}else this.shouldReloadPlaylist(r)&&this.setSubtitleTrack(this.trackId)}findTrackId(e){const t=this.tracksInGroup,n=this.selectDefaultTrack;for(let i=0;i<t.length;i++){const r=t[i];if((!n||r.default)&&(n||e)&&(!e||tD(r,e)))return i}if(e){for(let n=0;n<t.length;n++){const i=t[n];if(QM(e.attrs,i.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return n}for(let n=0;n<t.length;n++){const i=t[n];if(QM(e.attrs,i.attrs,["LANGUAGE"]))return n}}return-1}findTrackForTextTrack(e){if(e){const t=this.tracksInGroup;for(let n=0;n<t.length;n++){if(ZM(t[n],e))return n}}return-1}onError(e,t){!t.fatal&&t.context&&(t.context.type!==KI||t.context.id!==this.trackId||this.groupIds&&-1===this.groupIds.indexOf(t.context.groupId)||this.checkRetry(t))}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){const t=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,t.length){const n=this.currentTrack;if(n&&tD(e,n))return n;const i=eD(e,this.tracksInGroup);if(i>-1){const e=this.tracksInGroup[i];return this.setSubtitleTrack(i),e}if(n)return null;{const n=eD(e,t);if(n>-1)return t[n]}}}return null}loadPlaylist(e){super.loadPlaylist();const t=this.currentTrack;if(this.shouldLoadPlaylist(t)&&t){const n=t.id,i=t.groupId;let r=t.url;if(e)try{r=e.addDirectives(r)}catch(e){this.warn(`Could not construct new URL with HLS Delivery Directives: ${e}`)}this.log(`Loading subtitle playlist for id ${n}`),this.hls.trigger($R.SUBTITLE_TRACK_LOADING,{url:r,id:n,groupId:i,deliveryDirectives:e||null})}}toggleTrackModes(){const{media:e}=this;if(!e)return;const t=nx(e.textTracks),n=this.currentTrack;let i;if(n&&(i=t.filter((e=>ZM(n,e)))[0],i||this.warn(`Unable to find subtitle TextTrack with name "${n.name}" and language "${n.lang}"`)),[].slice.call(t).forEach((e=>{"disabled"!==e.mode&&e!==i&&(e.mode="disabled")})),i){const e=this.subtitleDisplay?"showing":"hidden";i.mode!==e&&(i.mode=e)}}setSubtitleTrack(e){const t=this.tracksInGroup;if(!this.media)return void(this.queuedDefaultTrack=e);if(e<-1||e>=t.length||!FR(e))return void this.warn(`Invalid subtitle track id: ${e}`);this.clearTimer(),this.selectDefaultTrack=!1;const n=this.currentTrack,i=t[e]||null;if(this.trackId=e,this.currentTrack=i,this.toggleTrackModes(),!i)return void this.hls.trigger($R.SUBTITLE_TRACK_SWITCH,{id:e});const r=!!i.details&&!i.details.live;if(e===this.trackId&&i===n&&r)return;this.log(`Switching to subtitle-track ${e}`+(i?` "${i.name}" lang:${i.lang} group:${i.groupId}`:""));const{id:s,groupId:a="",name:o,type:l,url:d}=i;this.hls.trigger($R.SUBTITLE_TRACK_SWITCH,{id:s,groupId:a,name:o,type:l,url:d});const c=this.switchParams(i.url,null==n?void 0:n.details,i.details);this.loadPlaylist(c)}},timelineController:class{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on($R.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on($R.MEDIA_DETACHING,this.onMediaDetaching,this),e.on($R.MANIFEST_LOADING,this.onManifestLoading,this),e.on($R.MANIFEST_LOADED,this.onManifestLoaded,this),e.on($R.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on($R.FRAG_LOADING,this.onFragLoading,this),e.on($R.FRAG_LOADED,this.onFragLoaded,this),e.on($R.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on($R.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on($R.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on($R.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on($R.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off($R.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off($R.MEDIA_DETACHING,this.onMediaDetaching,this),e.off($R.MANIFEST_LOADING,this.onManifestLoading,this),e.off($R.MANIFEST_LOADED,this.onManifestLoaded,this),e.off($R.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off($R.FRAG_LOADING,this.onFragLoading,this),e.off($R.FRAG_LOADED,this.onFragLoaded,this),e.off($R.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off($R.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off($R.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off($R.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off($R.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){if(this.config.enableCEA708Captions&&(!this.cea608Parser1||!this.cea608Parser2)){const e=new _O(this,"textTrack1"),t=new _O(this,"textTrack2"),n=new _O(this,"textTrack3"),i=new _O(this,"textTrack4");this.cea608Parser1=new yO(1,e,t),this.cea608Parser2=new yO(3,n,i)}}addCues(e,t,n,i,r){let s=!1;for(let e=r.length;e--;){const i=r[e],c=(a=i[0],o=i[1],l=t,d=n,Math.min(o,d)-Math.max(a,l));if(c>=0&&(i[0]=Math.min(i[0],t),i[1]=Math.max(i[1],n),s=!0,c/(n-t)>.5))return}var a,o,l,d;if(s||r.push([t,n]),this.config.renderTextTracksNatively){const r=this.captionsTracks[e];this.Cues.newCue(r,t,n,i)}else{const r=this.Cues.newCue(null,t,n,i);this.hls.trigger($R.CUES_PARSED,{type:"captions",cues:r,track:e})}}onInitPtsFound(e,{frag:t,id:n,initPTS:i,timescale:r}){const{unparsedVttFrags:s}=this;"main"===n&&(this.initPTS[t.cc]={baseTime:i,timescale:r}),s.length&&(this.unparsedVttFrags=[],s.forEach((e=>{this.onFragLoaded($R.FRAG_LOADED,e)})))}getExistingTrack(e,t){const{media:n}=this;if(n)for(let i=0;i<n.textTracks.length;i++){const r=n.textTracks[i];if(XO(r,{name:e,lang:t,attrs:{}}))return r}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:t,captionsTracks:n,media:i}=this,{label:r,languageCode:s}=t[e],a=this.getExistingTrack(r,s);if(a)n[e]=a,ex(n[e]),ZI(n[e],i);else{const t=this.createTextTrack("captions",r,s);t&&(t[e]=!0,n[e]=t)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const t=this.captionsProperties[e];if(!t)return;const n={_id:e,label:t.label,kind:"captions",default:!!t.media&&!!t.media.default,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=n,this.hls.trigger($R.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[n]})}createTextTrack(e,t,n){const i=this.media;if(i)return i.addTextTrack(e,t,n)}onMediaAttaching(e,t){this.media=t.media,this._cleanTracks()}onMediaDetaching(){const{captionsTracks:e}=this;Object.keys(e).forEach((t=>{ex(e[t]),delete e[t]})),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const t=e.textTracks;if(t)for(let e=0;e<t.length;e++)ex(t[e])}onSubtitleTracksUpdated(e,t){const n=t.subtitleTracks||[],i=n.some((e=>e.textCodec===UO));if(this.config.enableWebVTT||i&&this.config.enableIMSC1){if(XM(this.tracks,n))return void(this.tracks=n);if(this.textTracks=[],this.tracks=n,this.config.renderTextTracksNatively){const e=this.media,t=e?nx(e.textTracks):null;if(this.tracks.forEach(((e,n)=>{let i;if(t){let n=null;for(let i=0;i<t.length;i++)if(t[i]&&XO(t[i],e)){n=t[i],t[i]=null;break}n&&(i=n)}if(i)ex(i);else{const t=zO(e);i=this.createTextTrack(t,e.name,e.lang),i&&(i.mode="disabled")}i&&this.textTracks.push(i)})),null!=t&&t.length){const e=t.filter((e=>null!==e)).map((e=>e.label));e.length&&jR.warn(`Media element contains unused subtitle tracks: ${e.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const e=this.tracks.map((e=>({label:e.name,kind:e.type.toLowerCase(),default:e.default,subtitleTrack:e})));this.hls.trigger($R.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:e})}}}onManifestLoaded(e,t){this.config.enableCEA708Captions&&t.captions&&t.captions.forEach((e=>{const t=/(?:CC|SERVICE)([1-4])/.exec(e.instreamId);if(!t)return;const n=`textTrack${t[1]}`,i=this.captionsProperties[n];i&&(i.label=e.name,e.lang&&(i.languageCode=e.lang),i.media=e)}))}closedCaptionsForLevel(e){const t=this.hls.levels[e.level];return null==t?void 0:t.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,t){this.initCea608Parsers();const{cea608Parser1:n,cea608Parser2:i,lastCc:r,lastSn:s,lastPartIndex:a}=this;if(this.enabled&&n&&i&&t.frag.type===qI){var o,l;const{cc:e,sn:d}=t.frag,c=null!=(o=null==t||null==(l=t.part)?void 0:l.index)?o:-1;d===s+1||d===s&&c===a+1||e===r||(n.reset(),i.reset()),this.lastCc=e,this.lastSn=d,this.lastPartIndex=c}}onFragLoaded(e,t){const{frag:n,payload:i}=t;if(n.type===YI)if(i.byteLength){const e=n.decryptdata,r="stats"in t;if(null==e||!e.encrypted||r){const e=this.tracks[n.level],r=this.vttCCs;r[n.cc]||(r[n.cc]={start:n.start,prevCC:this.prevCC,new:!0},this.prevCC=n.cc),e&&e.textCodec===UO?this._parseIMSC1(n,i):this._parseVTTs(t)}}else this.hls.trigger($R.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,t){const n=this.hls;VO(t,this.initPTS[e.cc],(t=>{this._appendCues(t,e.level),n.trigger($R.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})}),(t=>{jR.log(`Failed to parse IMSC1: ${t}`),n.trigger($R.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:t})}))}_parseVTTs(e){var t;const{frag:n,payload:i}=e,{initPTS:r,unparsedVttFrags:s}=this,a=r.length-1;if(!r[n.cc]&&-1===a)return void s.push(e);const o=this.hls;FO(null!=(t=n.initSegment)&&t.data?rI(n.initSegment.data,new Uint8Array(i)):i,this.initPTS[n.cc],this.vttCCs,n.cc,n.start,(e=>{this._appendCues(e,n.level),o.trigger($R.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:n})}),(t=>{const r="Missing initPTS for VTT MPEGTS"===t.message;r?s.push(e):this._fallbackToIMSC1(n,i),jR.log(`Failed to parse VTT cue: ${t}`),r&&a>n.cc||o.trigger($R.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:t})}))}_fallbackToIMSC1(e,t){const n=this.tracks[e.level];n.textCodec||VO(t,this.initPTS[e.cc],(()=>{n.textCodec=UO,this._parseIMSC1(e,t)}),(()=>{n.textCodec="wvtt"}))}_appendCues(e,t){const n=this.hls;if(this.config.renderTextTracksNatively){const n=this.textTracks[t];if(!n||"disabled"===n.mode)return;e.forEach((e=>JI(n,e)))}else{const i=this.tracks[t];if(!i)return;const r=i.default?"default":"subtitles"+t;n.trigger($R.CUES_PARSED,{type:"subtitles",cues:e,track:r})}}onFragDecrypted(e,t){const{frag:n}=t;n.type===YI&&this.onFragLoaded($R.FRAG_LOADED,t)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,t){this.initCea608Parsers();const{cea608Parser1:n,cea608Parser2:i}=this;if(!this.enabled||!n||!i)return;const{frag:r,samples:s}=t;if(r.type!==qI||"NONE"!==this.closedCaptionsForLevel(r))for(let e=0;e<s.length;e++){const t=s[e].bytes;if(t){const r=this.extractCea608Data(t);n.addData(s[e].pts,r[0]),i.addData(s[e].pts,r[1])}}}onBufferFlushing(e,{startOffset:t,endOffset:n,endOffsetSubtitles:i,type:r}){const{media:s}=this;if(s&&!(s.currentTime<n)){if(!r||"video"===r){const{captionsTracks:e}=this;Object.keys(e).forEach((i=>tx(e[i],t,n)))}if(this.config.renderTextTracksNatively&&0===t&&void 0!==i){const{textTracks:e}=this;Object.keys(e).forEach((n=>tx(e[n],t,i)))}}}extractCea608Data(e){const t=[[],[]],n=31&e[0];let i=2;for(let r=0;r<n;r++){const n=e[i++],r=127&e[i++],s=127&e[i++];if(0===r&&0===s)continue;if(!!(4&n)){const e=3&n;0!==e&&1!==e||(t[e].push(r),t[e].push(s))}}return t}},audioStreamController:class extends VD{constructor(e,t,n){super(e,t,n,"[audio-stream-controller]",jI),this.videoBuffer=null,this.videoTrackCC=-1,this.waitingVideoCC=-1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null,this.bufferedTrack=null,this.switchingTrack=null}_registerListeners(){const{hls:e}=this;e.on($R.MEDIA_ATTACHED,this.onMediaAttached,this),e.on($R.MEDIA_DETACHING,this.onMediaDetaching,this),e.on($R.MANIFEST_LOADING,this.onManifestLoading,this),e.on($R.LEVEL_LOADED,this.onLevelLoaded,this),e.on($R.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on($R.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on($R.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on($R.ERROR,this.onError,this),e.on($R.BUFFER_RESET,this.onBufferReset,this),e.on($R.BUFFER_CREATED,this.onBufferCreated,this),e.on($R.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on($R.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on($R.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on($R.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off($R.MEDIA_ATTACHED,this.onMediaAttached,this),e.off($R.MEDIA_DETACHING,this.onMediaDetaching,this),e.off($R.MANIFEST_LOADING,this.onManifestLoading,this),e.off($R.LEVEL_LOADED,this.onLevelLoaded,this),e.off($R.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off($R.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off($R.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off($R.ERROR,this.onError,this),e.off($R.BUFFER_RESET,this.onBufferReset,this),e.off($R.BUFFER_CREATED,this.onBufferCreated,this),e.off($R.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off($R.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off($R.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off($R.FRAG_BUFFERED,this.onFragBuffered,this)}onInitPtsFound(e,{frag:t,id:n,initPTS:i,timescale:r}){if("main"===n){const e=t.cc;this.initPTS[t.cc]={baseTime:i,timescale:r},this.log(`InitPTS for cc: ${e} found from main: ${i}`),this.videoTrackCC=e,this.state===$D&&this.tick()}}startLoad(e){if(!this.levels)return this.startPosition=e,void(this.state=ID);const t=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),t>0&&-1===e?(this.log(`Override startPosition with lastCurrentTime @${t.toFixed(3)}`),e=t,this.state=xD):(this.loadedmetadata=!1,this.state=PD),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}doTick(){switch(this.state){case xD:this.doTickIdle();break;case PD:{var e;const{levels:t,trackId:n}=this,i=null==t||null==(e=t[n])?void 0:e.details;if(i){if(this.waitForCdnTuneIn(i))break;this.state=$D}break}case OD:{var t;const e=performance.now(),n=this.retryDate;if(!n||e>=n||null!=(t=this.media)&&t.seeking){const{levels:e,trackId:t}=this;this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded((null==e?void 0:e[t])||null),this.state=xD}break}case $D:{const e=this.waitingData;if(e){const{frag:t,part:n,cache:i,complete:r}=e;if(void 0!==this.initPTS[t.cc]){this.waitingData=null,this.waitingVideoCC=-1,this.state=MD;const e={frag:t,part:n,payload:i.flush(),networkDetails:null};this._handleFragmentLoadProgress(e),r&&super._handleFragmentLoadComplete(e)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log(`Waiting fragment cc (${t.cc}) cancelled because video is at cc ${this.videoTrackCC}`),this.clearWaitingFragment();else{const e=this.getLoadPosition(),n=mD.bufferInfo(this.mediaBuffer,e,this.config.maxBufferHole);Nx(n.end,this.config.maxFragLookUpTolerance,t)<0&&(this.log(`Waiting fragment cc (${t.cc}) @ ${t.start} cancelled because another fragment at ${n.end} is needed`),this.clearWaitingFragment())}}else this.state=xD}}this.onTickEnd()}clearWaitingFragment(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=xD)}resetLoadingState(){this.clearWaitingFragment(),super.resetLoadingState()}onTickEnd(){const{media:e}=this;null!=e&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){const{hls:e,levels:t,media:n,trackId:i}=this,r=e.config;if(!n&&(this.startFragRequested||!r.startFragPrefetch)||null==t||!t[i])return;const s=t[i],a=s.details;if(!a||a.live&&this.levelLastLoaded!==s||this.waitForCdnTuneIn(a))return void(this.state=PD);const o=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&o&&(this.bufferFlushed=!1,this.afterBufferFlushed(o,eC,jI));const l=this.getFwdBufferInfo(o,jI);if(null===l)return;const{bufferedTrack:d,switchingTrack:c}=this;if(!c&&this._streamEnded(l,a))return e.trigger($R.BUFFER_EOS,{type:"audio"}),void(this.state=UD);const u=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,qI),h=l.len,m=this.getMaxBufferLength(null==u?void 0:u.len),p=a.fragments,f=p[0].start;let g=this.flushing?this.getLoadPosition():l.end;if(c&&n){const e=this.getLoadPosition();d&&!QM(c.attrs,d.attrs)&&(g=e),a.PTSKnown&&e<f&&(l.end>f||l.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),n.currentTime=f+.05)}if(h>=m&&!c&&g<p[p.length-1].start)return;let v=this.getNextFragment(g,a),b=!1;if(v&&this.isLoopLoading(v,g)&&(b=!!v.gap,v=this.getNextFragmentLoopLoading(v,a,l,qI,m)),!v)return void(this.bufferFlushed=!0);const y=u&&v.start>u.end+a.targetduration;if(y||(null==u||!u.len)&&l.len){const e=this.getAppendedFrag(v.start,qI);if(null===e)return;if(b||(b=!!e.gap||!!y&&0===u.len),y&&!b||b&&l.nextStart&&l.nextStart<e.end)return}this.loadFragment(v,s,g)}getMaxBufferLength(e){const t=super.getMaxBufferLength();return e?Math.min(Math.max(t,e),this.config.maxMaxBufferLength):t}onMediaDetaching(){this.videoBuffer=null,this.bufferFlushed=this.flushing=!1,super.onMediaDetaching()}onAudioTracksUpdated(e,{audioTracks:t}){this.resetTransmuxer(),this.levels=t.map((e=>new yx(e)))}onAudioTrackSwitching(e,t){const n=!!t.url;this.trackId=t.id;const{fragCurrent:i}=this;i&&(i.abortRequests(),this.removeUnbufferedFrags(i.start)),this.resetLoadingState(),n?this.setInterval(100):this.resetTransmuxer(),n?(this.switchingTrack=t,this.state=xD,this.flushAudioIfNeeded(t)):(this.switchingTrack=null,this.bufferedTrack=t,this.state=ID),this.tick()}onManifestLoading(){this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=this.flushing=!1,this.levels=this.mainDetails=this.waitingData=this.bufferedTrack=this.cachedTrackLoadedData=this.switchingTrack=null,this.startFragRequested=!1,this.trackId=this.videoTrackCC=this.waitingVideoCC=-1}onLevelLoaded(e,t){this.mainDetails=t.details,null!==this.cachedTrackLoadedData&&(this.hls.trigger($R.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)}onAudioTrackLoaded(e,t){var n;if(null==this.mainDetails)return void(this.cachedTrackLoadedData=t);const{levels:i}=this,{details:r,id:s}=t;if(!i)return void this.warn(`Audio tracks were reset while loading level ${s}`);this.log(`Audio track ${s} loaded [${r.startSN},${r.endSN}]${r.lastPartSn?`[part-${r.lastPartSn}-${r.lastPartIndex}]`:""},duration:${r.totalduration}`);const a=i[s];let o=0;if(r.live||null!=(n=a.details)&&n.live){this.checkLiveUpdate(r);const e=this.mainDetails;if(r.deltaUpdateFailed||!e)return;var l;if(!a.details&&r.hasProgramDateTime&&e.hasProgramDateTime)yD(r,e),o=r.fragments[0].start;else o=this.alignPlaylists(r,a.details,null==(l=this.levelLastLoaded)?void 0:l.details)}a.details=r,this.levelLastLoaded=a,this.startFragRequested||!this.mainDetails&&r.live||this.setStartPosition(this.mainDetails||r,o),this.state!==PD||this.waitForCdnTuneIn(r)||(this.state=xD),this.tick()}_handleFragmentLoadProgress(e){var t;const{frag:n,part:i,payload:r}=e,{config:s,trackId:a,levels:o}=this;if(!o)return void this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);const l=o[a];if(!l)return void this.warn("Audio track is undefined on fragment load progress");const d=l.details;if(!d)return this.warn("Audio track details undefined on fragment load progress"),void this.removeUnbufferedFrags(n.start);const c=s.defaultAudioCodec||l.audioCodec||"mp4a.40.2";let u=this.transmuxer;u||(u=this.transmuxer=new zM(this.hls,jI,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const h=this.initPTS[n.cc],m=null==(t=n.initSegment)?void 0:t.data;if(void 0!==h){const e=!1,t=i?i.index:-1,s=-1!==t,a=new pD(n.level,n.sn,n.stats.chunkCount,r.byteLength,t,s);u.push(r,m,c,"",n,i,d.totalduration,e,a,h)}else{this.log(`Unknown video PTS for cc ${n.cc}, waiting for video PTS before demuxing audio frag ${n.sn} of [${d.startSN} ,${d.endSN}],track ${a}`);const{cache:e}=this.waitingData=this.waitingData||{frag:n,part:i,cache:new WD,complete:!1};e.push(new Uint8Array(r)),this.waitingVideoCC=this.videoTrackCC,this.state=$D}}_handleFragmentLoadComplete(e){this.waitingData?this.waitingData.complete=!0:super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1}onBufferCreated(e,t){const n=t.tracks.audio;n&&(this.mediaBuffer=n.buffer||null),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer||null)}onFragBuffered(e,t){const{frag:n,part:i}=t;if(n.type===jI)if(this.fragContextChanged(n))this.warn(`Fragment ${n.sn}${i?" p: "+i.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);else{if("initSegment"!==n.sn){this.fragPrevious=n;const e=this.switchingTrack;e&&(this.bufferedTrack=e,this.switchingTrack=null,this.hls.trigger($R.AUDIO_TRACK_SWITCHED,MR({},e)))}this.fragBufferedComplete(n,i)}else if(!this.loadedmetadata&&n.type===qI){const e=this.videoBuffer||this.media;if(e){mD.getBuffered(e).length&&(this.loadedmetadata=!0)}}}onError(e,t){var n;if(t.fatal)this.state=BD;else switch(t.details){case VR.FRAG_GAP:case VR.FRAG_PARSING_ERROR:case VR.FRAG_DECRYPT_ERROR:case VR.FRAG_LOAD_ERROR:case VR.FRAG_LOAD_TIMEOUT:case VR.KEY_LOAD_ERROR:case VR.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(jI,t);break;case VR.AUDIO_TRACK_LOAD_ERROR:case VR.AUDIO_TRACK_LOAD_TIMEOUT:case VR.LEVEL_PARSING_ERROR:t.levelRetry||this.state!==PD||(null==(n=t.context)?void 0:n.type)!==GI||(this.state=xD);break;case VR.BUFFER_APPEND_ERROR:case VR.BUFFER_FULL_ERROR:if(!t.parent||"audio"!==t.parent)return;if(t.details===VR.BUFFER_APPEND_ERROR)return void this.resetLoadingState();this.reduceLengthAndFlushBuffer(t)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case VR.INTERNAL_EXCEPTION:this.recoverWorkerError(t)}}onBufferFlushing(e,{type:t}){t!==tC&&(this.flushing=!0)}onBufferFlushed(e,{type:t}){if(t!==tC){this.flushing=!1,this.bufferFlushed=!0,this.state===UD&&(this.state=xD);const e=this.mediaBuffer||this.media;e&&(this.afterBufferFlushed(e,t,jI),this.tick())}}_handleTransmuxComplete(e){var t;const n="audio",{hls:i}=this,{remuxResult:r,chunkMeta:s}=e,a=this.getCurrentContext(s);if(!a)return void this.resetWhenMissingContext(s);const{frag:o,part:l,level:d}=a,{details:c}=d,{audio:u,text:h,id3:m,initSegment:p}=r;if(!this.fragContextChanged(o)&&c){if(this.state=ND,this.switchingTrack&&u&&this.completeAudioSwitch(this.switchingTrack),null!=p&&p.tracks){const e=o.initSegment||o;this._bufferInitSegment(d,p.tracks,e,s),i.trigger($R.FRAG_PARSING_INIT_SEGMENT,{frag:e,id:n,tracks:p.tracks})}if(u){const{startPTS:e,endPTS:t,startDTS:n,endDTS:i}=u;l&&(l.elementaryStreams[eC]={startPTS:e,endPTS:t,startDTS:n,endDTS:i}),o.setElementaryStreamInfo(eC,e,t,n,i),this.bufferFragmentData(u,o,l,s)}if(null!=m&&null!=(t=m.samples)&&t.length){const e=NR({id:n,frag:o,details:c},m);i.trigger($R.FRAG_PARSING_METADATA,e)}if(h){const e=NR({id:n,frag:o,details:c},h);i.trigger($R.FRAG_PARSING_USERDATA,e)}}else this.fragmentTracker.removeFragment(o)}_bufferInitSegment(e,t,n,i){if(this.state!==ND)return;t.video&&delete t.video;const r=t.audio;if(!r)return;r.id="audio";const s=e.audioCodec;this.log(`Init audio buffer, container:${r.container}, codecs[level/parsed]=[${s}/${r.codec}]`),s&&1===s.split(",").length&&(r.levelCodec=s),this.hls.trigger($R.BUFFER_CODECS,t);const a=r.initSegment;if(null!=a&&a.byteLength){const e={type:"audio",frag:n,part:null,chunkMeta:i,parent:n.type,data:a};this.hls.trigger($R.BUFFER_APPENDING,e)}this.tickImmediate()}loadFragment(e,t,n){const i=this.fragmentTracker.getState(e);var r;if(this.fragCurrent=e,this.switchingTrack||i===sD||i===oD)if("initSegment"===e.sn)this._loadInitSegment(e,t);else if(null!=(r=t.details)&&r.live&&!this.initPTS[e.cc]){this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=$D;const n=this.mainDetails;n&&n.fragments[0].start!==t.details.fragments[0].start&&yD(t.details,n)}else this.startFragRequested=!0,super.loadFragment(e,t,n);else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){const{media:t,bufferedTrack:n}=this,i=null==n?void 0:n.attrs,r=e.attrs;t&&i&&(i.CHANNELS!==r.CHANNELS||n.name!==e.name||n.lang!==e.lang)&&(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null)}completeAudioSwitch(e){const{hls:t}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,t.trigger($R.AUDIO_TRACK_SWITCHED,MR({},e))}},audioTrackController:class extends Kx{constructor(e){super(e,"[audio-track-controller]"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on($R.MANIFEST_LOADING,this.onManifestLoading,this),e.on($R.MANIFEST_PARSED,this.onManifestParsed,this),e.on($R.LEVEL_LOADING,this.onLevelLoading,this),e.on($R.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on($R.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on($R.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off($R.MANIFEST_LOADING,this.onManifestLoading,this),e.off($R.MANIFEST_PARSED,this.onManifestParsed,this),e.off($R.LEVEL_LOADING,this.onLevelLoading,this),e.off($R.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off($R.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off($R.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.audioTracks||[]}onAudioTrackLoaded(e,t){const{id:n,groupId:i,details:r}=t,s=this.tracksInGroup[n];if(!s||s.groupId!==i)return void this.warn(`Audio track with id:${n} and group:${i} not found in active group ${null==s?void 0:s.groupId}`);const a=s.details;s.details=t.details,this.log(`Audio track ${n} "${s.name}" lang:${s.lang} group:${i} loaded [${r.startSN}-${r.endSN}]`),n===this.trackId&&this.playlistLoaded(n,t,a)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const n=t.audioGroups||null,i=this.groupIds;let r=this.currentTrack;if(!n||(null==i?void 0:i.length)!==(null==n?void 0:n.length)||null!=n&&n.some((e=>-1===(null==i?void 0:i.indexOf(e))))){this.groupIds=n,this.trackId=-1,this.currentTrack=null;const e=this.tracks.filter((e=>!n||-1!==n.indexOf(e.groupId)));if(e.length)this.selectDefaultTrack&&!e.some((e=>e.default))&&(this.selectDefaultTrack=!1),e.forEach(((e,t)=>{e.id=t}));else if(!r&&!this.tracksInGroup.length)return;this.tracksInGroup=e;const t=this.hls.config.audioPreference;if(!r&&t){const n=eD(t,e,nD);if(n>-1)r=e[n];else{const e=eD(t,this.tracks);r=this.tracks[e]}}let i=this.findTrackId(r);-1===i&&r&&(i=this.findTrackId(null));const a={audioTracks:e};this.log(`Updating audio tracks, ${e.length} track(s) found in group(s): ${null==n?void 0:n.join(",")}`),this.hls.trigger($R.AUDIO_TRACKS_UPDATED,a);const o=this.trackId;if(-1!==i&&-1===o)this.setAudioTrack(i);else if(e.length&&-1===o){var s;const t=new Error(`No audio track selected for current audio group-ID(s): ${null==(s=this.groupIds)?void 0:s.join(",")} track count: ${e.length}`);this.warn(t.message),this.hls.trigger($R.ERROR,{type:HR.MEDIA_ERROR,details:VR.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:t})}}else this.shouldReloadPlaylist(r)&&this.setAudioTrack(this.trackId)}onError(e,t){!t.fatal&&t.context&&(t.context.type!==GI||t.context.id!==this.trackId||this.groupIds&&-1===this.groupIds.indexOf(t.context.groupId)||(this.requestScheduled=-1,this.checkRetry(t)))}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){const t=this.hls;if(t.config.audioPreference=e,e){const n=this.allAudioTracks;if(this.selectDefaultTrack=!1,n.length){const i=this.currentTrack;if(i&&tD(e,i,nD))return i;const r=eD(e,this.tracksInGroup,nD);if(r>-1){const e=this.tracksInGroup[r];return this.setAudioTrack(r),e}if(i){let i=t.loadLevel;-1===i&&(i=t.firstAutoLevel);const r=function(e,t,n,i,r){const s=t[i],a=t.reduce(((e,t,n)=>{const i=t.uri;return(e[i]||(e[i]=[])).push(n),e}),{})[s.uri];a.length>1&&(i=Math.max.apply(Math,a));const o=s.videoRange,l=s.frameRate,d=s.codecSet.substring(0,4),c=iD(t,i,(t=>{if(t.videoRange!==o||t.frameRate!==l||t.codecSet.substring(0,4)!==d)return!1;const i=t.audioGroups,s=n.filter((e=>!i||-1!==i.indexOf(e.groupId)));return eD(e,s,r)>-1}));return c>-1?c:iD(t,i,(t=>{const i=t.audioGroups,s=n.filter((e=>!i||-1!==i.indexOf(e.groupId)));return eD(e,s,r)>-1}))}(e,t.levels,n,i,nD);if(-1===r)return null;t.nextLoadLevel=r}if(e.channels||e.audioCodec){const t=eD(e,n);if(t>-1)return n[t]}}}return null}setAudioTrack(e){const t=this.tracksInGroup;if(e<0||e>=t.length)return void this.warn(`Invalid audio track id: ${e}`);this.clearTimer(),this.selectDefaultTrack=!1;const n=this.currentTrack,i=t[e],r=i.details&&!i.details.live;if(e===this.trackId&&i===n&&r)return;if(this.log(`Switching to audio-track ${e} "${i.name}" lang:${i.lang} group:${i.groupId} channels:${i.channels}`),this.trackId=e,this.currentTrack=i,this.hls.trigger($R.AUDIO_TRACK_SWITCHING,MR({},i)),r)return;const s=this.switchParams(i.url,null==n?void 0:n.details,i.details);this.loadPlaylist(s)}findTrackId(e){const t=this.tracksInGroup;for(let n=0;n<t.length;n++){const i=t[n];if((!this.selectDefaultTrack||i.default)&&(!e||tD(e,i,nD)))return n}if(e){const{name:n,lang:i,assocLang:r,characteristics:s,audioCodec:a,channels:o}=e;for(let e=0;e<t.length;e++){if(tD({name:n,lang:i,assocLang:r,characteristics:s,audioCodec:a,channels:o},t[e],nD))return e}for(let n=0;n<t.length;n++){const i=t[n];if(QM(e.attrs,i.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return n}for(let n=0;n<t.length;n++){const i=t[n];if(QM(e.attrs,i.attrs,["LANGUAGE"]))return n}}return-1}loadPlaylist(e){const t=this.currentTrack;if(this.shouldLoadPlaylist(t)&&t){super.loadPlaylist();const n=t.id,i=t.groupId;let r=t.url;if(e)try{r=e.addDirectives(r)}catch(e){this.warn(`Could not construct new URL with HLS Delivery Directives: ${e}`)}this.log(`loading audio-track playlist ${n} "${t.name}" lang:${t.lang} group:${i}`),this.clearTimer(),this.hls.trigger($R.AUDIO_TRACK_LOADING,{url:r,id:n,groupId:i,deliveryDirectives:e||null})}}},emeController:JO,cmcdController:class{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=e=>{try{this.apply(e,{ot:tP.MANIFEST,su:!this.initialized})}catch(e){jR.warn("Could not generate manifest CMCD data.",e)}},this.applyFragmentData=e=>{try{const t=e.frag,n=this.hls.levels[t.level],i=this.getObjectType(t),r={d:1e3*t.duration,ot:i};i!==tP.VIDEO&&i!==tP.AUDIO&&i!=tP.MUXED||(r.br=n.bitrate/1e3,r.tb=this.getTopBandwidth(i)/1e3,r.bl=this.getBufferLength(i)),this.apply(e,r)}catch(e){jR.warn("Could not generate segment CMCD data.",e)}},this.hls=e;const t=this.config=e.config,{cmcd:n}=t;null!=n&&(t.pLoader=this.createPlaylistLoader(),t.fLoader=this.createFragmentLoader(),this.sid=n.sessionId||function(){try{return crypto.randomUUID()}catch(e){try{const e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)}catch(e){let t=(new Date).getTime();const n="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:3&n|8).toString(16)}));return n}}}(),this.cid=n.contentId,this.useHeaders=!0===n.useHeaders,this.includeKeys=n.includeKeys,this.registerListeners())}registerListeners(){const e=this.hls;e.on($R.MEDIA_ATTACHED,this.onMediaAttached,this),e.on($R.MEDIA_DETACHED,this.onMediaDetached,this),e.on($R.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off($R.MEDIA_ATTACHED,this.onMediaAttached,this),e.off($R.MEDIA_DETACHED,this.onMediaDetached,this),e.off($R.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=null}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,t){var n,i;this.audioBuffer=null==(n=t.tracks.audio)?void 0:n.buffer,this.videoBuffer=null==(i=t.tracks.video)?void 0:i.buffer}createData(){var e;return{v:1,sf:nP.HLS,sid:this.sid,cid:this.cid,pr:null==(e=this.media)?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,t={}){NR(t,this.createData());const n=t.ot===tP.INIT||t.ot===tP.VIDEO||t.ot===tP.MUXED;this.starved&&n&&(t.bs=!0,t.su=!0,this.starved=!1),null==t.su&&(t.su=this.buffering);const{includeKeys:i}=this;i&&(t=Object.keys(t).reduce(((e,n)=>(i.includes(n)&&(e[n]=t[n]),e)),{})),this.useHeaders?(e.headers||(e.headers={}),PP(e.headers,t)):e.url=UP(e.url,t)}getObjectType(e){const{type:t}=e;return"subtitle"===t?tP.TIMED_TEXT:"initSegment"===e.sn?tP.INIT:"audio"===t?tP.AUDIO:"main"===t?this.hls.audioTracks.length?tP.VIDEO:tP.MUXED:void 0}getTopBandwidth(e){let t,n=0;const i=this.hls;if(e===tP.AUDIO)t=i.audioTracks;else{const e=i.maxAutoLevel,n=e>-1?e+1:i.levels.length;t=i.levels.slice(0,n)}for(const e of t)e.bitrate>n&&(n=e.bitrate);return n>0?n:NaN}getBufferLength(e){const t=this.hls.media,n=e===tP.AUDIO?this.audioBuffer:this.videoBuffer;if(!n||!t)return NaN;return 1e3*mD.bufferInfo(n,t.currentTime,this.config.maxBufferHole).len}createPlaylistLoader(){const{pLoader:e}=this.config,t=this.applyPlaylistData,n=e||this.config.loader;return class{constructor(e){this.loader=void 0,this.loader=new n(e)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(e,n,i){t(e),this.loader.load(e,n,i)}}}createFragmentLoader(){const{fLoader:e}=this.config,t=this.applyFragmentData,n=e||this.config.loader;return class{constructor(e){this.loader=void 0,this.loader=new n(e)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(e,n,i){t(e),this.loader.load(e,n,i)}}}},contentSteeringController:class{constructor(e){this.hls=void 0,this.log=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this.pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.log=jR.log.bind(jR,"[content-steering]:"),this.registerListeners()}registerListeners(){const e=this.hls;e.on($R.MANIFEST_LOADING,this.onManifestLoading,this),e.on($R.MANIFEST_LOADED,this.onManifestLoaded,this),e.on($R.MANIFEST_PARSED,this.onManifestParsed,this),e.on($R.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off($R.MANIFEST_LOADING,this.onManifestLoading,this),e.off($R.MANIFEST_LOADED,this.onManifestLoaded,this),e.off($R.MANIFEST_PARSED,this.onManifestParsed,this),e.off($R.ERROR,this.onError,this))}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const e=1e3*this.timeToLoad-(performance.now()-this.updated);if(e>0)return void this.scheduleRefresh(this.uri,e)}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){-1!==this.reloadTimer&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const t=this.levels;t&&(this.levels=t.filter((t=>t!==e)))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,t){const{contentSteering:n}=t;null!==n&&(this.pathwayId=n.pathwayId,this.uri=n.uri,this.started&&this.startLoad())}onManifestParsed(e,t){this.audioTracks=t.audioTracks,this.subtitleTracks=t.subtitleTracks}onError(e,t){const{errorAction:n}=t;if((null==n?void 0:n.action)===Bx&&n.flags===Wx){const e=this.levels;let i=this.pathwayPriority,r=this.pathwayId;if(t.context){const{groupId:n,pathwayId:i,type:s}=t.context;n&&e?r=this.getPathwayForGroupId(n,s,r):i&&(r=i)}r in this.penalizedPathways||(this.penalizedPathways[r]=performance.now()),!i&&e&&(i=e.reduce(((e,t)=>(-1===e.indexOf(t.pathwayId)&&e.push(t.pathwayId),e)),[])),i&&i.length>1&&(this.updatePathwayPriority(i),n.resolved=this.pathwayId!==r),n.resolved||jR.warn(`Could not resolve ${t.details} ("${t.error.message}") with content-steering for Pathway: ${r} levels: ${e?e.length:e} priorities: ${JSON.stringify(i)} penalized: ${JSON.stringify(this.penalizedPathways)}`)}}filterParsedLevels(e){this.levels=e;let t=this.getLevelsForPathway(this.pathwayId);if(0===t.length){const n=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${n}"`),t=this.getLevelsForPathway(n),this.pathwayId=n}return t.length!==e.length?(this.log(`Found ${t.length}/${e.length} levels in Pathway "${this.pathwayId}"`),t):e}getLevelsForPathway(e){return null===this.levels?[]:this.levels.filter((t=>e===t.pathwayId))}updatePathwayPriority(e){let t;this.pathwayPriority=e;const n=this.penalizedPathways,i=performance.now();Object.keys(n).forEach((e=>{i-n[e]>3e5&&delete n[e]}));for(let i=0;i<e.length;i++){const r=e[i];if(r in n)continue;if(r===this.pathwayId)return;const s=this.hls.nextLoadLevel,a=this.hls.levels[s];if(t=this.getLevelsForPathway(r),t.length>0){this.log(`Setting Pathway to "${r}"`),this.pathwayId=r,Rx(t),this.hls.trigger($R.LEVELS_UPDATED,{levels:t});const e=this.hls.levels[s];a&&e&&this.levels&&(e.attrs["STABLE-VARIANT-ID"]!==a.attrs["STABLE-VARIANT-ID"]&&e.bitrate!==a.bitrate&&this.log(`Unstable Pathways change from bitrate ${a.bitrate} to ${e.bitrate}`),this.hls.nextLoadLevel=s);break}}}getPathwayForGroupId(e,t,n){const i=this.getLevelsForPathway(n).concat(this.levels||[]);for(let n=0;n<i.length;n++)if(t===GI&&i[n].hasAudioGroup(e)||t===KI&&i[n].hasSubtitleGroup(e))return i[n].pathwayId;return n}clonePathways(e){const t=this.levels;if(!t)return;const n={},i={};e.forEach((e=>{const{ID:r,"BASE-ID":s,"URI-REPLACEMENT":a}=e;if(t.some((e=>e.pathwayId===r)))return;const o=this.getLevelsForPathway(s).map((e=>{const t=new XR(e.attrs);t["PATHWAY-ID"]=r;const s=t.AUDIO&&`${t.AUDIO}_clone_${r}`,o=t.SUBTITLES&&`${t.SUBTITLES}_clone_${r}`;s&&(n[t.AUDIO]=s,t.AUDIO=s),o&&(i[t.SUBTITLES]=o,t.SUBTITLES=o);const l=$P(e.uri,t["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",a),d=new yx({attrs:t,audioCodec:e.audioCodec,bitrate:e.bitrate,height:e.height,name:e.name,url:l,videoCodec:e.videoCodec,width:e.width});if(e.audioGroups)for(let t=1;t<e.audioGroups.length;t++)d.addGroupId("audio",`${e.audioGroups[t]}_clone_${r}`);if(e.subtitleGroups)for(let t=1;t<e.subtitleGroups.length;t++)d.addGroupId("text",`${e.subtitleGroups[t]}_clone_${r}`);return d}));t.push(...o),BP(this.audioTracks,n,a,r),BP(this.subtitleTracks,i,a,r)}))}loadSteeringManifest(e){const t=this.hls.config,n=t.loader;let i;this.loader&&this.loader.destroy(),this.loader=new n(t);try{i=new self.URL(e)}catch(t){return this.enabled=!1,void this.log(`Failed to parse Steering Manifest URI: ${e}`)}if("data:"!==i.protocol){const e=0|(this.hls.bandwidthEstimate||t.abrEwmaDefaultEstimate);i.searchParams.set("_HLS_pathway",this.pathwayId),i.searchParams.set("_HLS_throughput",""+e)}const r={responseType:"json",url:i.href},s=t.steeringManifestLoadPolicy.default,a=s.errorRetry||s.timeoutRetry||{},o={loadPolicy:s,timeout:s.maxLoadTimeMs,maxRetry:a.maxNumRetry||0,retryDelay:a.retryDelayMs||0,maxRetryDelay:a.maxRetryDelayMs||0},l={onSuccess:(e,t,n,r)=>{this.log(`Loaded steering manifest: "${i}"`);const s=e.data;if(1!==s.VERSION)return void this.log(`Steering VERSION ${s.VERSION} not supported!`);this.updated=performance.now(),this.timeToLoad=s.TTL;const{"RELOAD-URI":a,"PATHWAY-CLONES":o,"PATHWAY-PRIORITY":l}=s;if(a)try{this.uri=new self.URL(a,i).href}catch(e){return this.enabled=!1,void this.log(`Failed to parse Steering Manifest RELOAD-URI: ${a}`)}this.scheduleRefresh(this.uri||n.url),o&&this.clonePathways(o);const d={steeringManifest:s,url:i.toString()};this.hls.trigger($R.STEERING_MANIFEST_LOADED,d),l&&this.updatePathwayPriority(l)},onError:(e,t,n,i)=>{if(this.log(`Error loading steering manifest: ${e.code} ${e.text} (${t.url})`),this.stopLoad(),410===e.code)return this.enabled=!1,void this.log(`Steering manifest ${t.url} no longer available`);let r=1e3*this.timeToLoad;if(429!==e.code)this.scheduleRefresh(this.uri||t.url,r);else{const e=this.loader;if("function"==typeof(null==e?void 0:e.getResponseHeader)){const t=e.getResponseHeader("Retry-After");t&&(r=1e3*parseFloat(t))}this.log(`Steering manifest ${t.url} rate limited`)}},onTimeout:(e,t,n)=>{this.log(`Timeout loading steering manifest (${t.url})`),this.scheduleRefresh(this.uri||t.url)}};this.log(`Requesting steering manifest: ${i}`),this.loader.load(r,o,l)}scheduleRefresh(e,t=1e3*this.timeToLoad){this.clearTimeout(),this.reloadTimer=self.setTimeout((()=>{var t;const n=null==(t=this.hls)?void 0:t.media;!n||n.ended?this.scheduleRefresh(e,1e3*this.timeToLoad):this.loadSteeringManifest(e)}),t)}}});function XP(e){return e&&"object"==typeof e?Array.isArray(e)?e.map(XP):Object.keys(e).reduce(((t,n)=>(t[n]=XP(e[n]),t)),{}):e}function QP(e){const t=e.loader;if(t!==GP&&t!==VP)jR.log("[config]: Custom loader detected, cannot enable progressive streaming"),e.progressive=!1;else{(function(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch(e){}return!1})()&&(e.loader=GP,e.progressive=!0,e.enableSoftwareAES=!0,jR.log("[config]: Progressive streaming enabled, using FetchLoader"))}}let ZP;class JP extends Kx{constructor(e,t){super(e,"[level-controller]"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=t,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on($R.MANIFEST_LOADING,this.onManifestLoading,this),e.on($R.MANIFEST_LOADED,this.onManifestLoaded,this),e.on($R.LEVEL_LOADED,this.onLevelLoaded,this),e.on($R.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on($R.FRAG_BUFFERED,this.onFragBuffered,this),e.on($R.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off($R.MANIFEST_LOADING,this.onManifestLoading,this),e.off($R.MANIFEST_LOADED,this.onManifestLoaded,this),e.off($R.LEVEL_LOADED,this.onLevelLoaded,this),e.off($R.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off($R.FRAG_BUFFERED,this.onFragBuffered,this),e.off($R.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach((e=>{e.loadError=0,e.fragmentError=0})),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(e,t){this.resetLevels()}onManifestLoaded(e,t){const n=this.hls.config.preferManagedMediaSource,i=[],r={},s={};let a=!1,o=!1,l=!1;t.levels.forEach((e=>{var t,d;const c=e.attrs;let{audioCodec:u,videoCodec:h}=e;-1!==(null==(t=u)?void 0:t.indexOf("mp4a.40.34"))&&(ZP||(ZP=/chrome|firefox/i.test(navigator.userAgent)),ZP&&(e.audioCodec=u=void 0)),u&&(e.audioCodec=u=LI(u,n)),0===(null==(d=h)?void 0:d.indexOf("avc1"))&&(h=e.videoCodec=function(e){const t=e.split(".");if(t.length>2){let e=t.shift()+".";return e+=parseInt(t.shift()).toString(16),e+=("000"+parseInt(t.shift()).toString(16)).slice(-4),e}return e}(h));const{width:m,height:p,unknownCodecs:f}=e;if(a||(a=!(!m||!p)),o||(o=!!h),l||(l=!!u),null!=f&&f.length||u&&!EI(u,"audio",n)||h&&!EI(h,"video",n))return;const{CODECS:g,"FRAME-RATE":v,"HDCP-LEVEL":b,"PATHWAY-ID":y,RESOLUTION:E,"VIDEO-RANGE":T}=c,_=`${`${y||"."}-`}${e.bitrate}-${E}-${v}-${g}-${T}-${b}`;if(r[_])if(r[_].uri===e.url||e.attrs["PATHWAY-ID"])r[_].addGroupId("audio",c.AUDIO),r[_].addGroupId("text",c.SUBTITLES);else{const t=s[_]+=1;e.attrs["PATHWAY-ID"]=new Array(t+1).join(".");const n=new yx(e);r[_]=n,i.push(n)}else{const t=new yx(e);r[_]=t,s[_]=1,i.push(t)}})),this.filterAndSortMediaOptions(i,t,a,o,l)}filterAndSortMediaOptions(e,t,n,i,r){let s=[],a=[],o=e;if((n||i)&&r&&(o=o.filter((({videoCodec:e,videoRange:t,width:n,height:i})=>(!!e||!(!n||!i))&&function(e){return!!e&&mx.indexOf(e)>-1}(t)))),0===o.length)return void Promise.resolve().then((()=>{if(this.hls){t.levels.length&&this.warn(`One or more CODECS in variant not supported: ${JSON.stringify(t.levels[0].attrs)}`);const e=new Error("no level with compatible codecs found in manifest");this.hls.trigger($R.ERROR,{type:HR.MEDIA_ERROR,details:VR.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,error:e,reason:e.message})}}));if(t.audioTracks){const{preferManagedMediaSource:e}=this.hls.config;s=t.audioTracks.filter((t=>!t.audioCodec||EI(t.audioCodec,"audio",e))),eN(s)}t.subtitles&&(a=t.subtitles,eN(a));const l=o.slice(0);o.sort(((e,t)=>{if(e.attrs["HDCP-LEVEL"]!==t.attrs["HDCP-LEVEL"])return(e.attrs["HDCP-LEVEL"]||"")>(t.attrs["HDCP-LEVEL"]||"")?1:-1;if(n&&e.height!==t.height)return e.height-t.height;if(e.frameRate!==t.frameRate)return e.frameRate-t.frameRate;if(e.videoRange!==t.videoRange)return mx.indexOf(e.videoRange)-mx.indexOf(t.videoRange);if(e.videoCodec!==t.videoCodec){const n=AI(e.videoCodec),i=AI(t.videoCodec);if(n!==i)return i-n}if(e.uri===t.uri&&e.codecSet!==t.codecSet){const n=SI(e.codecSet),i=SI(t.codecSet);if(n!==i)return i-n}return e.averageBitrate!==t.averageBitrate?e.averageBitrate-t.averageBitrate:0}));let d=l[0];if(this.steering&&(o=this.steering.filterParsedLevels(o),o.length!==l.length))for(let e=0;e<l.length;e++)if(l[e].pathwayId===o[0].pathwayId){d=l[e];break}this._levels=o;for(let e=0;e<o.length;e++)if(o[e]===d){var c;this._firstLevel=e;const t=d.bitrate,n=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${o.length} level(s) found, first bitrate: ${t}`),void 0===(null==(c=this.hls.userConfig)?void 0:c.abrEwmaDefaultEstimate)){const e=Math.min(t,this.hls.config.abrEwmaDefaultEstimateMax);e>n&&n===zP.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=e)}break}const u=r&&!i,h={levels:o,audioTracks:s,subtitleTracks:a,sessionData:t.sessionData,sessionKeys:t.sessionKeys,firstLevel:this._firstLevel,stats:t.stats,audio:r,video:i,altAudio:!u&&s.some((e=>!!e.url))};this.hls.trigger($R.MANIFEST_PARSED,h),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}get levels(){return 0===this._levels.length?null:this._levels}get level(){return this.currentLevelIndex}set level(e){const t=this._levels;if(0===t.length)return;if(e<0||e>=t.length){const n=new Error("invalid level idx"),i=e<0;if(this.hls.trigger($R.ERROR,{type:HR.OTHER_ERROR,details:VR.LEVEL_SWITCH_ERROR,level:e,fatal:i,error:n,reason:n.message}),i)return;e=Math.min(e,t.length-1)}const n=this.currentLevelIndex,i=this.currentLevel,r=i?i.attrs["PATHWAY-ID"]:void 0,s=t[e],a=s.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=s,n===e&&s.details&&i&&r===a)return;this.log(`Switching to level ${e} (${s.height?s.height+"p ":""}${s.videoRange?s.videoRange+" ":""}${s.codecSet?s.codecSet+" ":""}@${s.bitrate})${a?" with Pathway "+a:""} from level ${n}${r?" with Pathway "+r:""}`);const o={level:e,attrs:s.attrs,details:s.details,bitrate:s.bitrate,averageBitrate:s.averageBitrate,maxBitrate:s.maxBitrate,realBitrate:s.realBitrate,width:s.width,height:s.height,codecSet:s.codecSet,audioCodec:s.audioCodec,videoCodec:s.videoCodec,audioGroups:s.audioGroups,subtitleGroups:s.subtitleGroups,loaded:s.loaded,loadError:s.loadError,fragmentError:s.fragmentError,name:s.name,id:s.id,uri:s.uri,url:s.url,urlId:0,audioGroupIds:s.audioGroupIds,textGroupIds:s.textGroupIds};this.hls.trigger($R.LEVEL_SWITCHING,o);const l=s.details;if(!l||l.live){const e=this.switchParams(s.uri,null==i?void 0:i.details,l);this.loadPlaylist(e)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(void 0===this._startLevel){const e=this.hls.config.startLevel;return void 0!==e?e:this.hls.firstAutoLevel}return this._startLevel}set startLevel(e){this._startLevel=e}onError(e,t){!t.fatal&&t.context&&t.context.type===WI&&t.context.level===this.level&&this.checkRetry(t)}onFragBuffered(e,{frag:t}){if(void 0!==t&&t.type===qI){const e=t.elementaryStreams;if(!Object.keys(e).some((t=>!!e[t])))return;const n=this._levels[t.level];null!=n&&n.loadError&&(this.log(`Resetting level error count of ${n.loadError} on frag buffered`),n.loadError=0)}}onLevelLoaded(e,t){var n;const{level:i,details:r}=t,s=this._levels[i];var a;if(!s)return this.warn(`Invalid level index ${i}`),void(null!=(a=t.deliveryDirectives)&&a.skip&&(r.deltaUpdateFailed=!0));i===this.currentLevelIndex?(0===s.fragmentError&&(s.loadError=0),this.playlistLoaded(i,t,s.details)):null!=(n=t.deliveryDirectives)&&n.skip&&(r.deltaUpdateFailed=!0)}loadPlaylist(e){super.loadPlaylist();const t=this.currentLevelIndex,n=this.currentLevel;if(n&&this.shouldLoadPlaylist(n)){let i=n.uri;if(e)try{i=e.addDirectives(i)}catch(e){this.warn(`Could not construct new URL with HLS Delivery Directives: ${e}`)}const r=n.attrs["PATHWAY-ID"];this.log(`Loading level index ${t}${void 0!==(null==e?void 0:e.msn)?" at sn "+e.msn+" part "+e.part:""} with${r?" Pathway "+r:""} ${i}`),this.clearTimer(),this.hls.trigger($R.LEVEL_LOADING,{url:i,level:t,pathwayId:n.attrs["PATHWAY-ID"],id:0,deliveryDirectives:e||null})}}get nextLoadLevel(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}removeLevel(e){var t;const n=this._levels.filter(((t,n)=>n!==e||(this.steering&&this.steering.removeLevel(t),t===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,t.details&&t.details.fragments.forEach((e=>e.level=-1))),!1)));Rx(n),this._levels=n,this.currentLevelIndex>-1&&null!=(t=this.currentLevel)&&t.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.hls.trigger($R.LEVELS_UPDATED,{levels:n})}onLevelsUpdated(e,{levels:t}){this._levels=t}checkMaxAutoUpdated(){const{autoLevelCapping:e,maxAutoLevel:t,maxHdcpLevel:n}=this.hls;this._maxAutoLevel!==t&&(this._maxAutoLevel=t,this.hls.trigger($R.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:e,levels:this.levels,maxAutoLevel:t,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:n}))}}function eN(e){const t={};e.forEach((e=>{const n=e.groupId||"";e.id=t[n]=t[n]||0,t[n]++}))}class tN{constructor(e){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const n in this.keyUriToKeyInfo){const i=this.keyUriToKeyInfo[n].loader;if(i){var t;if(e&&e!==(null==(t=i.context)?void 0:t.frag.type))return;i.abort()}}}detach(){for(const e in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[e];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[e].loader;t&&t.destroy()}this.keyUriToKeyInfo={}}createKeyLoadError(e,t=VR.KEY_LOAD_ERROR,n,i,r){return new SD({type:HR.NETWORK_ERROR,details:t,fatal:!1,frag:e,response:r,error:n,networkDetails:i})}loadClear(e,t){if(this.emeController&&this.config.emeEnabled){const{sn:n,cc:i}=e;for(let e=0;e<t.length;e++){const r=t[e];if(i<=r.cc&&("initSegment"===n||"initSegment"===r.sn||n<r.sn)){this.emeController.selectKeySystemFormat(r).then((e=>{r.setKeyFormat(e)}));break}}}}load(e){return!e.decryptdata&&e.encrypted&&this.emeController?this.emeController.selectKeySystemFormat(e).then((t=>this.loadInternal(e,t))):this.loadInternal(e)}loadInternal(e,t){var n,i;t&&e.setKeyFormat(t);const r=e.decryptdata;if(!r){const n=new Error(t?`Expected frag.decryptdata to be defined after setting format ${t}`:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(e,VR.KEY_LOAD_ERROR,n))}const s=r.uri;if(!s)return Promise.reject(this.createKeyLoadError(e,VR.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${s}"`)));let a=this.keyUriToKeyInfo[s];if(null!=(n=a)&&n.decryptdata.key)return r.key=a.decryptdata.key,Promise.resolve({frag:e,keyInfo:a});var o;if(null!=(i=a)&&i.keyLoadPromise)switch(null==(o=a.mediaKeySessionContext)?void 0:o.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return a.keyLoadPromise.then((t=>(r.key=t.keyInfo.decryptdata.key,{frag:e,keyInfo:a})))}switch(a=this.keyUriToKeyInfo[s]={decryptdata:r,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},r.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return"identity"===r.keyFormat?this.loadKeyHTTP(a,e):this.loadKeyEME(a,e);case"AES-128":return this.loadKeyHTTP(a,e);default:return Promise.reject(this.createKeyLoadError(e,VR.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${r.method}"`)))}}loadKeyEME(e,t){const n={frag:t,keyInfo:e};if(this.emeController&&this.config.emeEnabled){const t=this.emeController.loadKey(n);if(t)return(e.keyLoadPromise=t.then((t=>(e.mediaKeySessionContext=t,n)))).catch((t=>{throw e.keyLoadPromise=null,t}))}return Promise.resolve(n)}loadKeyHTTP(e,t){const n=this.config,i=new(0,n.loader)(n);return t.keyLoader=e.loader=i,e.keyLoadPromise=new Promise(((r,s)=>{const a={keyInfo:e,frag:t,responseType:"arraybuffer",url:e.decryptdata.uri},o=n.keyLoadPolicy.default,l={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(e,t,n,i)=>{const{frag:a,keyInfo:o,url:l}=n;if(!a.decryptdata||o!==this.keyUriToKeyInfo[l])return s(this.createKeyLoadError(a,VR.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),i));o.decryptdata.key=a.decryptdata.key=new Uint8Array(e.data),a.keyLoader=null,o.loader=null,r({frag:a,keyInfo:o})},onError:(e,n,i,r)=>{this.resetLoader(n),s(this.createKeyLoadError(t,VR.KEY_LOAD_ERROR,new Error(`HTTP Error ${e.code} loading key ${e.text}`),i,MR({url:a.url,data:void 0},e)))},onTimeout:(e,n,i)=>{this.resetLoader(n),s(this.createKeyLoadError(t,VR.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),i))},onAbort:(e,n,i)=>{this.resetLoader(n),s(this.createKeyLoadError(t,VR.INTERNAL_ABORTED,new Error("key loading aborted"),i))}};i.load(a,l,d)}))}resetLoader(e){const{frag:t,keyInfo:n,url:i}=e,r=n.loader;t.keyLoader===r&&(t.keyLoader=null,n.loader=null),delete this.keyUriToKeyInfo[i],r&&r.destroy()}}function nN(){return self.SourceBuffer||self.WebKitSourceBuffer}function iN(){if(!bI())return!1;const e=nN();return!e||e.prototype&&"function"==typeof e.prototype.appendBuffer&&"function"==typeof e.prototype.remove}class rN{constructor(e,t,n,i){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=e,this.media=t,this.fragmentTracker=n,this.hls=i}destroy(){this.media=null,this.hls=this.fragmentTracker=null}poll(e,t){const{config:n,media:i,stalled:r}=this;if(null===i)return;const{currentTime:s,seeking:a}=i,o=this.seeking&&!a,l=!this.seeking&&a;if(this.seeking=a,s!==e){if(this.moved=!0,a||(this.nudgeRetry=0),null!==r){if(this.stallReported){const e=self.performance.now()-r;jR.warn(`playback not stuck anymore @${s}, after ${Math.round(e)}ms`),this.stallReported=!1}this.stalled=null}return}if(l||o)return void(this.stalled=null);if(i.paused&&!a||i.ended||0===i.playbackRate||!mD.getBuffered(i).length)return void(this.nudgeRetry=0);const d=mD.bufferInfo(i,s,0),c=d.nextStart||0;if(a){const e=d.len>2,n=!c||t&&t.start<=s||c-s>2&&!this.fragmentTracker.getPartialFragment(s);if(e||n)return;this.moved=!1}if(!this.moved&&null!==this.stalled){var u;if(!(d.len>0)&&!c)return;const e=Math.max(c,d.start||0)-s,t=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,n=(null==t||null==(u=t.details)?void 0:u.live)?2*t.details.targetduration:2,r=this.fragmentTracker.getPartialFragment(s);if(e>0&&(e<=n||r))return void(i.paused||this._trySkipBufferHole(r))}const h=self.performance.now();if(null===r)return void(this.stalled=h);const m=h-r;if(!a&&m>=250&&(this._reportStall(d),!this.media))return;const p=mD.bufferInfo(i,s,n.maxBufferHole);this._tryFixBufferStall(p,m)}_tryFixBufferStall(e,t){const{config:n,fragmentTracker:i,media:r}=this;if(null===r)return;const s=r.currentTime,a=i.getPartialFragment(s);if(a){if(this._trySkipBufferHole(a)||!this.media)return}(e.len>n.maxBufferHole||e.nextStart&&e.nextStart-s<n.maxBufferHole)&&t>1e3*n.highBufferWatchdogPeriod&&(jR.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}_reportStall(e){const{hls:t,media:n,stallReported:i}=this;if(!i&&n){this.stallReported=!0;const i=new Error(`Playback stalling at @${n.currentTime} due to low buffer (${JSON.stringify(e)})`);jR.warn(i.message),t.trigger($R.ERROR,{type:HR.MEDIA_ERROR,details:VR.BUFFER_STALLED_ERROR,fatal:!1,error:i,buffer:e.len})}}_trySkipBufferHole(e){const{config:t,hls:n,media:i}=this;if(null===i)return 0;const r=i.currentTime,s=mD.bufferInfo(i,r,0),a=r<s.start?s.start:s.nextStart;if(a){const o=s.len<=t.maxBufferHole,l=s.len>0&&s.len<1&&i.readyState<3,d=a-r;if(d>0&&(o||l)){if(d>t.maxBufferHole){const{fragmentTracker:t}=this;let n=!1;if(0===r){const e=t.getAppendedFrag(0,qI);e&&a<e.end&&(n=!0)}if(!n){const n=e||t.getAppendedFrag(r,qI);if(n){let e=!1,i=n.end;for(;i<a;){const n=t.getPartialFragment(i);if(!n){e=!0;break}i+=n.duration}if(e)return 0}}}const s=Math.max(a+.05,r+.1);if(jR.warn(`skipping hole, adjusting currentTime from ${r} to ${s}`),this.moved=!0,this.stalled=null,i.currentTime=s,e&&!e.gap){const t=new Error(`fragment loaded with buffer holes, seeking from ${r} to ${s}`);n.trigger($R.ERROR,{type:HR.MEDIA_ERROR,details:VR.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:t,reason:t.message,frag:e})}return s}}return 0}_tryNudgeBuffer(){const{config:e,hls:t,media:n,nudgeRetry:i}=this;if(null===n)return;const r=n.currentTime;if(this.nudgeRetry++,i<e.nudgeMaxRetry){const s=r+(i+1)*e.nudgeOffset,a=new Error(`Nudging 'currentTime' from ${r} to ${s}`);jR.warn(a.message),n.currentTime=s,t.trigger($R.ERROR,{type:HR.MEDIA_ERROR,details:VR.BUFFER_NUDGE_ON_STALL,error:a,fatal:!1})}else{const n=new Error(`Playhead still not moving while enough data buffered @${r} after ${e.nudgeMaxRetry} nudges`);jR.error(n.message),t.trigger($R.ERROR,{type:HR.MEDIA_ERROR,details:VR.BUFFER_STALLED_ERROR,error:n,fatal:!0})}}}class sN extends VD{constructor(e,t,n){super(e,t,n,"[stream-controller]",qI),this.audioCodecSwap=!1,this.gapController=null,this.level=-1,this._forceStartLoad=!1,this.altAudio=!1,this.audioOnly=!1,this.fragPlaying=null,this.onvplaying=null,this.onvseeked=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on($R.MEDIA_ATTACHED,this.onMediaAttached,this),e.on($R.MEDIA_DETACHING,this.onMediaDetaching,this),e.on($R.MANIFEST_LOADING,this.onManifestLoading,this),e.on($R.MANIFEST_PARSED,this.onManifestParsed,this),e.on($R.LEVEL_LOADING,this.onLevelLoading,this),e.on($R.LEVEL_LOADED,this.onLevelLoaded,this),e.on($R.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on($R.ERROR,this.onError,this),e.on($R.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on($R.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on($R.BUFFER_CREATED,this.onBufferCreated,this),e.on($R.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on($R.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on($R.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off($R.MEDIA_ATTACHED,this.onMediaAttached,this),e.off($R.MEDIA_DETACHING,this.onMediaDetaching,this),e.off($R.MANIFEST_LOADING,this.onManifestLoading,this),e.off($R.MANIFEST_PARSED,this.onManifestParsed,this),e.off($R.LEVEL_LOADED,this.onLevelLoaded,this),e.off($R.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off($R.ERROR,this.onError,this),e.off($R.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off($R.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off($R.BUFFER_CREATED,this.onBufferCreated,this),e.off($R.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off($R.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off($R.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying()}startLoad(e){if(this.levels){const{lastCurrentTime:t,hls:n}=this;if(this.stopLoad(),this.setInterval(100),this.level=-1,!this.startFragRequested){let e=n.startLevel;-1===e&&(n.config.testBandwidth&&this.levels.length>1?(e=0,this.bitrateTest=!0):e=n.firstAutoLevel),n.nextLoadLevel=e,this.level=n.loadLevel,this.loadedmetadata=!1}t>0&&-1===e&&(this.log(`Override startPosition with lastCurrentTime @${t.toFixed(3)}`),e=t),this.state=xD,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this._forceStartLoad=!0,this.state=ID}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case HD:{const{levels:e,level:t}=this,n=null==e?void 0:e[t],i=null==n?void 0:n.details;if(i&&(!i.live||this.levelLastLoaded===n)){if(this.waitForCdnTuneIn(i))break;this.state=xD;break}if(this.hls.nextLoadLevel!==this.level){this.state=xD;break}break}case OD:{var e;const t=self.performance.now(),n=this.retryDate;if(!n||t>=n||null!=(e=this.media)&&e.seeking){const{levels:e,level:t}=this,n=null==e?void 0:e[t];this.resetStartWhenNotLoaded(n||null),this.state=xD}}}this.state===xD&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){super.onTickEnd(),this.checkBuffer(),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:t,levels:n,media:i}=this;if(null===t||!i&&(this.startFragRequested||!e.config.startFragPrefetch))return;if(this.altAudio&&this.audioOnly)return;const r=e.nextLoadLevel;if(null==n||!n[r])return;const s=n[r],a=this.getMainFwdBufferInfo();if(null===a)return;const o=this.getLevelDetails();if(o&&this._streamEnded(a,o)){const e={};return this.altAudio&&(e.type="video"),this.hls.trigger($R.BUFFER_EOS,e),void(this.state=UD)}e.loadLevel!==r&&-1===e.manualLevel&&this.log(`Adapting to level ${r} from level ${this.level}`),this.level=e.nextLoadLevel=r;const l=s.details;if(!l||this.state===HD||l.live&&this.levelLastLoaded!==s)return this.level=r,void(this.state=HD);const d=a.len,c=this.getMaxBufferLength(s.maxBitrate);if(d>=c)return;this.backtrackFragment&&this.backtrackFragment.start>a.end&&(this.backtrackFragment=null);const u=this.backtrackFragment?this.backtrackFragment.start:a.end;let h=this.getNextFragment(u,l);if(this.couldBacktrack&&!this.fragPrevious&&h&&"initSegment"!==h.sn&&this.fragmentTracker.getState(h)!==lD){var m;const e=(null!=(m=this.backtrackFragment)?m:h).sn-l.startSN,t=l.fragments[e-1];t&&h.cc===t.cc&&(h=t,this.fragmentTracker.removeFragment(t))}else this.backtrackFragment&&a.len&&(this.backtrackFragment=null);if(h&&this.isLoopLoading(h,u)){if(!h.gap){const e=this.audioOnly&&!this.altAudio?eC:tC,t=(e===tC?this.videoBuffer:this.mediaBuffer)||this.media;t&&this.afterBufferFlushed(t,e,qI)}h=this.getNextFragmentLoopLoading(h,l,a,qI,c)}h&&(!h.initSegment||h.initSegment.data||this.bitrateTest||(h=h.initSegment),this.loadFragment(h,s,u))}loadFragment(e,t,n){const i=this.fragmentTracker.getState(e);this.fragCurrent=e,i===sD||i===oD?"initSegment"===e.sn?this._loadInitSegment(e,t):this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,t)):(this.startFragRequested=!0,super.loadFragment(e,t,n)):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,qI)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:t}=this;if(null!=t&&t.readyState){let n;const i=this.getAppendedFrag(t.currentTime);i&&i.start>1&&this.flushMainBuffer(0,i.start-1);const r=this.getLevelDetails();if(null!=r&&r.live){const e=this.getMainFwdBufferInfo();if(!e||e.len<2*r.targetduration)return}if(!t.paused&&e){const t=e[this.hls.nextLoadLevel],i=this.fragLastKbps;n=i&&this.fragCurrent?this.fragCurrent.duration*t.maxBitrate/(1e3*i)+1:0}else n=0;const s=this.getBufferedFrag(t.currentTime+n);if(s){const e=this.followingBufferedFrag(s);if(e){this.abortCurrentFrag();const t=e.maxStartPTS?e.maxStartPTS:e.start,n=e.duration,i=Math.max(s.end,t+Math.min(Math.max(n-this.config.maxFragLookUpTolerance,n*(this.couldBacktrack?.5:.125)),n*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(i,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case DD:case MD:case OD:case ND:case FD:this.state=xD}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,t){super.flushMainBuffer(e,t,this.altAudio?"video":null)}onMediaAttached(e,t){super.onMediaAttached(e,t);const n=t.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),n.addEventListener("playing",this.onvplaying),n.addEventListener("seeked",this.onvseeked),this.gapController=new rN(this.config,n,this.fragmentTracker,this.hls)}onMediaDetaching(){const{media:e}=this;e&&this.onvplaying&&this.onvseeked&&(e.removeEventListener("playing",this.onvplaying),e.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),super.onMediaDetaching()}onMediaPlaying(){this.tick()}onMediaSeeked(){const e=this.media,t=e?e.currentTime:null;FR(t)&&this.log(`Media seeked to ${t.toFixed(3)}`);const n=this.getMainFwdBufferInfo();null!==n&&0!==n.len?this.tick():this.warn(`Main forward buffer length on "seeked" event ${n?n.len:"empty"})`)}onManifestLoading(){this.log("Trigger BUFFER_RESET"),this.hls.trigger($R.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=this.fragLastKbps=0,this.levels=this.fragPlaying=this.backtrackFragment=this.levelLastLoaded=null,this.altAudio=this.audioOnly=this.startFragRequested=!1}onManifestParsed(e,t){let n=!1,i=!1;t.levels.forEach((e=>{const t=e.audioCodec;t&&(n=n||-1!==t.indexOf("mp4a.40.2"),i=i||-1!==t.indexOf("mp4a.40.5"))})),this.audioCodecSwitch=n&&i&&!function(){var e;const t=nN();return"function"==typeof(null==t||null==(e=t.prototype)?void 0:e.changeType)}(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1}onLevelLoading(e,t){const{levels:n}=this;if(!n||this.state!==xD)return;const i=n[t.level];(!i.details||i.details.live&&this.levelLastLoaded!==i||this.waitForCdnTuneIn(i.details))&&(this.state=HD)}onLevelLoaded(e,t){var n;const{levels:i}=this,r=t.level,s=t.details,a=s.totalduration;if(!i)return void this.warn(`Levels were reset while loading level ${r}`);this.log(`Level ${r} loaded [${s.startSN},${s.endSN}]${s.lastPartSn?`[part-${s.lastPartSn}-${s.lastPartIndex}]`:""}, cc [${s.startCC}, ${s.endCC}] duration:${a}`);const o=i[r],l=this.fragCurrent;!l||this.state!==MD&&this.state!==OD||l.level!==t.level&&l.loader&&this.abortCurrentFrag();let d=0;if(s.live||null!=(n=o.details)&&n.live){var c;if(this.checkLiveUpdate(s),s.deltaUpdateFailed)return;d=this.alignPlaylists(s,o.details,null==(c=this.levelLastLoaded)?void 0:c.details)}if(o.details=s,this.levelLastLoaded=o,this.hls.trigger($R.LEVEL_UPDATED,{details:s,level:r}),this.state===HD){if(this.waitForCdnTuneIn(s))return;this.state=xD}this.startFragRequested?s.live&&this.synchronizeToLiveEdge(s):this.setStartPosition(s,d),this.tick()}_handleFragmentLoadProgress(e){var t;const{frag:n,part:i,payload:r}=e,{levels:s}=this;if(!s)return void this.warn(`Levels were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);const a=s[n.level],o=a.details;if(!o)return this.warn(`Dropping fragment ${n.sn} of level ${n.level} after level details were reset`),void this.fragmentTracker.removeFragment(n);const l=a.videoCodec,d=o.PTSKnown||!o.live,c=null==(t=n.initSegment)?void 0:t.data,u=this._getAudioCodec(a),h=this.transmuxer=this.transmuxer||new zM(this.hls,qI,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),m=i?i.index:-1,p=-1!==m,f=new pD(n.level,n.sn,n.stats.chunkCount,r.byteLength,m,p),g=this.initPTS[n.cc];h.push(r,c,u,l,n,i,o.totalduration,d,f,g)}onAudioTrackSwitching(e,t){const n=this.altAudio;if(!!!t.url){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const e=this.fragCurrent;e&&(this.log("Switching to main audio track, cancel main fragment load"),e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();const e=this.hls;n&&(e.trigger($R.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null}),this.fragmentTracker.removeAllFragments()),e.trigger($R.AUDIO_TRACK_SWITCHED,t)}}onAudioTrackSwitched(e,t){const n=t.id,i=!!this.hls.audioTracks[n].url;if(i){const e=this.videoBuffer;e&&this.mediaBuffer!==e&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=e)}this.altAudio=i,this.tick()}onBufferCreated(e,t){const n=t.tracks;let i,r,s=!1;for(const e in n){const t=n[e];if("main"===t.id){if(r=e,i=t,"video"===e){const t=n[e];t&&(this.videoBuffer=t.buffer)}}else s=!0}s&&i?(this.log(`Alternate track found, use ${r}.buffered to schedule main fragment loading`),this.mediaBuffer=i.buffer):this.mediaBuffer=this.media}onFragBuffered(e,t){const{frag:n,part:i}=t;if(n&&n.type!==qI)return;if(this.fragContextChanged(n))return this.warn(`Fragment ${n.sn}${i?" p: "+i.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}`),void(this.state===FD&&(this.state=xD));const r=i?i.stats:n.stats;this.fragLastKbps=Math.round(8*r.total/(r.buffering.end-r.loading.first)),"initSegment"!==n.sn&&(this.fragPrevious=n),this.fragBufferedComplete(n,i)}onError(e,t){var n;if(t.fatal)this.state=BD;else switch(t.details){case VR.FRAG_GAP:case VR.FRAG_PARSING_ERROR:case VR.FRAG_DECRYPT_ERROR:case VR.FRAG_LOAD_ERROR:case VR.FRAG_LOAD_TIMEOUT:case VR.KEY_LOAD_ERROR:case VR.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(qI,t);break;case VR.LEVEL_LOAD_ERROR:case VR.LEVEL_LOAD_TIMEOUT:case VR.LEVEL_PARSING_ERROR:t.levelRetry||this.state!==HD||(null==(n=t.context)?void 0:n.type)!==WI||(this.state=xD);break;case VR.BUFFER_APPEND_ERROR:case VR.BUFFER_FULL_ERROR:if(!t.parent||"main"!==t.parent)return;if(t.details===VR.BUFFER_APPEND_ERROR)return void this.resetLoadingState();this.reduceLengthAndFlushBuffer(t)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case VR.INTERNAL_EXCEPTION:this.recoverWorkerError(t)}}checkBuffer(){const{media:e,gapController:t}=this;if(e&&t&&e.readyState){if(this.loadedmetadata||!mD.getBuffered(e).length){const e=this.state!==xD?this.fragCurrent:null;t.poll(this.lastCurrentTime,e)}this.lastCurrentTime=e.currentTime}}onFragLoadEmergencyAborted(){this.state=xD,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()}onBufferFlushed(e,{type:t}){if(t!==eC||this.audioOnly&&!this.altAudio){const e=(t===tC?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(e,t,qI),this.tick()}}onLevelsUpdated(e,t){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level),this.levels=t.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const t=e.currentTime;let n=this.startPosition;if(n>=0&&t<n){if(e.seeking)return void this.log(`could not seek to ${n}, already seeking at ${t}`);const i=mD.getBuffered(e),r=(i.length?i.start(0):0)-n;r>0&&(r<this.config.maxBufferHole||r<this.config.maxFragLookUpTolerance)&&(this.log(`adjusting start position by ${r} to match buffer start`),n+=r,this.startPosition=n),this.log(`seek to target start position ${n} from current time ${t}`),e.currentTime=n}}_getAudioCodec(e){let t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),t}_loadBitrateTestFrag(e,t){e.bitrateTest=!0,this._doFragLoad(e,t).then((n=>{const{hls:i}=this;if(!n||this.fragContextChanged(e))return;t.fragmentError=0,this.state=xD,this.startFragRequested=!1,this.bitrateTest=!1;const r=e.stats;r.parsing.start=r.parsing.end=r.buffering.start=r.buffering.end=self.performance.now(),i.trigger($R.FRAG_LOADED,n),e.bitrateTest=!1}))}_handleTransmuxComplete(e){var t;const n="main",{hls:i}=this,{remuxResult:r,chunkMeta:s}=e,a=this.getCurrentContext(s);if(!a)return void this.resetWhenMissingContext(s);const{frag:o,part:l,level:d}=a,{video:c,text:u,id3:h,initSegment:m}=r,{details:p}=d,f=this.altAudio?void 0:r.audio;if(this.fragContextChanged(o))this.fragmentTracker.removeFragment(o);else{if(this.state=ND,m){if(null!=m&&m.tracks){const e=o.initSegment||o;this._bufferInitSegment(d,m.tracks,e,s),i.trigger($R.FRAG_PARSING_INIT_SEGMENT,{frag:e,id:n,tracks:m.tracks})}const e=m.initPTS,t=m.timescale;FR(e)&&(this.initPTS[o.cc]={baseTime:e,timescale:t},i.trigger($R.INIT_PTS_FOUND,{frag:o,id:n,initPTS:e,timescale:t}))}if(c&&p&&"initSegment"!==o.sn){const e=p.fragments[o.sn-1-p.startSN],t=o.sn===p.startSN,n=!e||o.cc>e.cc;if(!1!==r.independent){const{startPTS:e,endPTS:i,startDTS:r,endDTS:a}=c;if(l)l.elementaryStreams[c.type]={startPTS:e,endPTS:i,startDTS:r,endDTS:a};else if(c.firstKeyFrame&&c.independent&&1===s.id&&!n&&(this.couldBacktrack=!0),c.dropped&&c.independent){const r=this.getMainFwdBufferInfo(),s=(r?r.end:this.getLoadPosition())+this.config.maxBufferHole,l=c.firstKeyFramePTS?c.firstKeyFramePTS:e;if(!t&&s<l-this.config.maxBufferHole&&!n)return void this.backtrack(o);n&&(o.gap=!0),o.setElementaryStreamInfo(c.type,o.start,i,o.start,a,!0)}else t&&e>2&&(o.gap=!0);o.setElementaryStreamInfo(c.type,e,i,r,a),this.backtrackFragment&&(this.backtrackFragment=o),this.bufferFragmentData(c,o,l,s,t||n)}else{if(!t&&!n)return void this.backtrack(o);o.gap=!0}}if(f){const{startPTS:e,endPTS:t,startDTS:n,endDTS:i}=f;l&&(l.elementaryStreams[eC]={startPTS:e,endPTS:t,startDTS:n,endDTS:i}),o.setElementaryStreamInfo(eC,e,t,n,i),this.bufferFragmentData(f,o,l,s)}if(p&&null!=h&&null!=(t=h.samples)&&t.length){const e={id:n,frag:o,details:p,samples:h.samples};i.trigger($R.FRAG_PARSING_METADATA,e)}if(p&&u){const e={id:n,frag:o,details:p,samples:u.samples};i.trigger($R.FRAG_PARSING_USERDATA,e)}}}_bufferInitSegment(e,t,n,i){if(this.state!==ND)return;this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&delete t.audio;const{audio:r,video:s,audiovideo:a}=t;if(r){let t=e.audioCodec;const n=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(t&&(t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),1!==r.metadata.channelCount&&-1===n.indexOf("firefox")&&(t="mp4a.40.5")),t&&-1!==t.indexOf("mp4a.40.5")&&-1!==n.indexOf("android")&&"audio/mpeg"!==r.container&&(t="mp4a.40.2",this.log(`Android: force audio codec to ${t}`)),e.audioCodec&&e.audioCodec!==t&&this.log(`Swapping manifest audio codec "${e.audioCodec}" for "${t}"`),r.levelCodec=t,r.id="main",this.log(`Init audio buffer, container:${r.container}, codecs[selected/level/parsed]=[${t||""}/${e.audioCodec||""}/${r.codec}]`)}s&&(s.levelCodec=e.videoCodec,s.id="main",this.log(`Init video buffer, container:${s.container}, codecs[level/parsed]=[${e.videoCodec||""}/${s.codec}]`)),a&&this.log(`Init audiovideo buffer, container:${a.container}, codecs[level/parsed]=[${e.codecs}/${a.codec}]`),this.hls.trigger($R.BUFFER_CODECS,t),Object.keys(t).forEach((e=>{const r=t[e].initSegment;null!=r&&r.byteLength&&this.hls.trigger($R.BUFFER_APPENDING,{type:e,data:r,frag:n,part:null,chunkMeta:i,parent:n.type})})),this.tickImmediate()}getMainFwdBufferInfo(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,qI)}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=xD}checkFragmentChanged(){const e=this.media;let t=null;if(e&&e.readyState>1&&!1===e.seeking){const n=e.currentTime;if(mD.isBuffered(e,n)?t=this.getAppendedFrag(n):mD.isBuffered(e,n+.1)&&(t=this.getAppendedFrag(n+.1)),t){this.backtrackFragment=null;const e=this.fragPlaying,n=t.level;e&&t.sn===e.sn&&e.level===n||(this.fragPlaying=t,this.hls.trigger($R.FRAG_CHANGED,{frag:t}),e&&e.level===n||this.hls.trigger($R.LEVEL_SWITCHED,{level:n}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){const e=this.media;return e?this.fragPlaying||this.getAppendedFrag(e.currentTime):null}get currentProgramDateTime(){const e=this.media;if(e){const t=e.currentTime,n=this.currentFrag;if(n&&FR(t)&&FR(n.programDateTime)){const e=n.programDateTime+1e3*(t-n.start);return new Date(e)}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class aN{static get version(){return"1.5.8"}static isMSESupported(){return iN()}static isSupported(){return function(){if(!iN())return!1;const e=bI();return"function"==typeof(null==e?void 0:e.isTypeSupported)&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some((t=>e.isTypeSupported(_I(t,"video"))))||["mp4a.40.2","fLaC"].some((t=>e.isTypeSupported(_I(t,"audio")))))}()}static getMediaSource(){return bI()}static get Events(){return $R}static get ErrorTypes(){return HR}static get ErrorDetails(){return VR}static get DefaultConfig(){return aN.defaultConfig?aN.defaultConfig:zP}static set DefaultConfig(e){aN.defaultConfig=e}constructor(e={}){this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this.started=!1,this._emitter=new YM,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null,this.triggeringException=void 0,function(e,t){if("object"==typeof console&&!0===e||"object"==typeof e){qR(e,"debug","log","info","warn","error");try{KR.log(`Debug logs enabled for "${t}" in hls.js version 1.5.8`)}catch(e){KR=GR}}else KR=GR}(e.debug||!1,"Hls instance");const t=this.config=function(e,t){if((t.liveSyncDurationCount||t.liveMaxLatencyDurationCount)&&(t.liveSyncDuration||t.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(void 0!==t.liveMaxLatencyDurationCount&&(void 0===t.liveSyncDurationCount||t.liveMaxLatencyDurationCount<=t.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(void 0!==t.liveMaxLatencyDuration&&(void 0===t.liveSyncDuration||t.liveMaxLatencyDuration<=t.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const n=XP(e),i=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return["manifest","level","frag"].forEach((e=>{const r=`${"level"===e?"playlist":e}LoadPolicy`,s=void 0===t[r],a=[];i.forEach((i=>{const o=`${e}Loading${i}`,l=t[o];if(void 0!==l&&s){a.push(o);const e=n[r].default;switch(t[r]={default:e},i){case"TimeOut":e.maxLoadTimeMs=l,e.maxTimeToFirstByteMs=l;break;case"MaxRetry":e.errorRetry.maxNumRetry=l,e.timeoutRetry.maxNumRetry=l;break;case"RetryDelay":e.errorRetry.retryDelayMs=l,e.timeoutRetry.retryDelayMs=l;break;case"MaxRetryTimeout":e.errorRetry.maxRetryDelayMs=l,e.timeoutRetry.maxRetryDelayMs=l}}})),a.length&&jR.warn(`hls.js config: "${a.join('", "')}" setting(s) are deprecated, use "${r}": ${JSON.stringify(t[r])}`)})),MR(MR({},n),t)}(aN.DefaultConfig,e);this.userConfig=e,t.progressive&&QP(t);const{abrController:n,bufferController:i,capLevelController:r,errorController:s,fpsController:a}=t,o=new s(this),l=this.abrController=new n(this),d=this.bufferController=new i(this),c=this.capLevelController=new r(this),u=new a(this),h=new QI(this),m=new cx(this),p=t.contentSteeringController,f=p?new p(this):null,g=this.levelController=new JP(this,f),v=new dD(this),b=new tN(this.config),y=this.streamController=new sN(this,v,b);c.setStreamController(y),u.setStreamController(y);const E=[h,g,y];f&&E.splice(1,0,f),this.networkControllers=E;const T=[l,d,c,u,m,v];this.audioTrackController=this.createController(t.audioTrackController,E);const _=t.audioStreamController;_&&E.push(new _(this,v,b)),this.subtitleTrackController=this.createController(t.subtitleTrackController,E);const A=t.subtitleStreamController;A&&E.push(new A(this,v,b)),this.createController(t.timelineController,T),b.emeController=this.emeController=this.createController(t.emeController,T),this.cmcdController=this.createController(t.cmcdController,T),this.latencyController=this.createController(ux,T),this.coreComponents=T,E.push(o);const S=o.onErrorOut;"function"==typeof S&&this.on($R.ERROR,S,o)}createController(e,t){if(e){const n=new e(this);return t&&t.push(n),n}return null}on(e,t,n=this){this._emitter.on(e,t,n)}once(e,t,n=this){this._emitter.once(e,t,n)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,t,n=this,i){this._emitter.off(e,t,n,i)}listeners(e){return this._emitter.listeners(e)}emit(e,t,n){return this._emitter.emit(e,t,n)}trigger(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(t){if(jR.error("An internal error happened while handling event "+e+'. Error message: "'+t.message+'". Here is a stacktrace:',t),!this.triggeringException){this.triggeringException=!0;const n=e===$R.ERROR;this.trigger($R.ERROR,{type:HR.OTHER_ERROR,details:VR.INTERNAL_EXCEPTION,fatal:n,event:e,error:t}),this.triggeringException=!1}}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){jR.log("destroy"),this.trigger($R.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach((e=>e.destroy())),this.networkControllers.length=0,this.coreComponents.forEach((e=>e.destroy())),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){jR.log("attachMedia"),this._media=e,this.trigger($R.MEDIA_ATTACHING,{media:e})}detachMedia(){jR.log("detachMedia"),this.trigger($R.MEDIA_DETACHING,void 0),this._media=null}loadSource(e){this.stopLoad();const t=this.media,n=this.url,i=this.url=xR.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,jR.log(`loadSource:${i}`),t&&n&&(n!==i||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(t)),this.trigger($R.MANIFEST_LOADING,{url:e})}startLoad(e=-1){jR.log(`startLoad(${e})`),this.started=!0,this.networkControllers.forEach((t=>{t.startLoad(e)}))}stopLoad(){jR.log("stopLoad"),this.started=!1,this.networkControllers.forEach((e=>{e.stopLoad()}))}resumeBuffering(){this.started&&this.networkControllers.forEach((e=>{"fragmentLoader"in e&&e.startLoad(-1)}))}pauseBuffering(){this.networkControllers.forEach((e=>{"fragmentLoader"in e&&e.stopLoad()}))}swapAudioCodec(){jR.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){jR.log("recoverMediaError");const e=this._media;this.detachMedia(),e&&this.attachMedia(e)}removeLevel(e){this.levelController.removeLevel(e)}get levels(){const e=this.levelController.levels;return e||[]}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){jR.log(`set currentLevel:${e}`),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){jR.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){jR.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){jR.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){const e=this.levelController.startLevel;return-1===e&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e}set startLevel(e){jR.log(`set startLevel:${e}`),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}set bandwidthEstimate(e){this.abrController.resetEstimator(e)}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(jR.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){(function(e){return hx.indexOf(e)>-1})(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return-1===this.levelController.manualLevel}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:t}}=this;if(!e)return 0;const n=e.length;for(let i=0;i<n;i++)if(e[i].maxBitrate>=t)return i;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:t,maxHdcpLevel:n}=this;let i;if(i=-1===t&&null!=e&&e.length?e.length-1:t,n)for(let t=i;t--;){const i=e[t].attrs["HDCP-LEVEL"];if(i&&i<=n)return t}return i}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(e){this.abrController.nextAutoLevel=e}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}setAudioOption(e){var t;return null==(t=this.audioTrackController)?void 0:t.setAudioOption(e)}setSubtitleOption(e){var t;return null==(t=this.subtitleTrackController)||t.setSubtitleOption(e),null}get allAudioTracks(){const e=this.audioTrackController;return e?e.allAudioTracks:[]}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const t=this.audioTrackController;t&&(t.audioTrack=e)}get allSubtitleTracks(){const e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return!!e&&e.subtitleDisplay}set subtitleDisplay(e){const t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}}aN.defaultConfig=void 0;var oN=aN,lN=class e extends Error{constructor(t,n=e.MEDIA_ERR_CUSTOM,i,r){var s;super(t),this.name="MediaError",this.code=n,this.context=r,this.fatal=null!=i?i:n>=e.MEDIA_ERR_NETWORK&&n<=e.MEDIA_ERR_ENCRYPTED,this.message||(this.message=null!=(s=e.defaultMessages[this.code])?s:"")}};lN.MEDIA_ERR_ABORTED=1,lN.MEDIA_ERR_NETWORK=2,lN.MEDIA_ERR_DECODE=3,lN.MEDIA_ERR_SRC_NOT_SUPPORTED=4,lN.MEDIA_ERR_ENCRYPTED=5,lN.MEDIA_ERR_CUSTOM=100,lN.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail.",3:"A media error caused playback to be aborted. The media could be corrupt or your browser does not support this format.",4:"An unsupported error occurred. The server or network failed, or your browser does not support this format.",5:"The media is encrypted and there are no keys to decrypt it."};var dN=lN,cN=(e,t)=>!(e=>null==e)(t)&&e in t,uN={ANY:"any",MUTED:"muted"},hN={ON_DEMAND:"on-demand",LIVE:"live",UNKNOWN:"unknown"},mN="mse",pN="native",fN={HEADER:"header",QUERY:"query",NONE:"none"},gN=Object.values(fN),vN={M3U8:"application/vnd.apple.mpegurl",MP4:"video/mp4"},bN={HLS:vN.M3U8},yN=(Object.keys(bN),Object.values(vN),(e,t,n,i,r=e)=>{r.addEventListener(t,n,i),e.addEventListener("teardown",(()=>{r.removeEventListener(t,n)}),{once:!0})});var EN=e=>{let t=e.type;if(t){let e=t.toUpperCase();return cN(e,bN)?bN[e]:t}let{src:n}=e;return n?AN(n):""},TN=e=>"VOD"===e?hN.ON_DEMAND:hN.LIVE,_N=e=>"EVENT"===e?Number.POSITIVE_INFINITY:"VOD"===e?Number.NaN:0,AN=e=>{let t="";try{t=new URL(e).pathname}catch{console.error("invalid url")}let n=t.lastIndexOf(".");if(n<0)return"";let i=t.slice(n+1).toUpperCase();return cN(i,vN)?vN[i]:""},SN=Object.values(uN),kN=e=>"boolean"==typeof e||"string"==typeof e&&SN.includes(e),wN=(e,t)=>{if(!t)return;let n=e.muted,i=()=>e.muted=n;switch(t){case uN.ANY:e.play().catch((()=>{e.muted=!0,e.play().catch(i)}));break;case uN.MUTED:e.muted=!0,e.play().catch(i);break;default:e.play().catch((()=>{}))}};function LN(e,t){var n;if(!("videoTracks"in e))return;let i=new WeakMap;t.on(oN.Events.MANIFEST_PARSED,(function(t,n){a();let r=e.addVideoTrack("main");r.selected=!0;for(let[e,t]of n.levels.entries()){let n=r.addRendition(t.url[0],t.width,t.height,t.videoCodec,t.bitrate);i.set(t,`${e}`),n.id=`${e}`}})),t.on(oN.Events.AUDIO_TRACKS_UPDATED,(function(t,n){s();for(let t of n.audioTracks){let n=t.default?"main":"alternative",i=e.addAudioTrack(n,t.name,t.lang);i.id=`${t.id}`,t.default&&(i.enabled=!0)}})),e.audioTracks.addEventListener("change",(()=>{var n;let i=+(null==(n=[...e.audioTracks].find((e=>e.enabled)))?void 0:n.id),r=t.audioTracks.map((e=>e.id));i!=t.audioTrack&&r.includes(i)&&(t.audioTrack=i)})),t.on(oN.Events.LEVELS_UPDATED,(function(t,n){var r;let s=e.videoTracks[null!=(r=e.videoTracks.selectedIndex)?r:0];if(!s)return;let a=n.levels.map((e=>i.get(e)));for(let t of e.videoRenditions)t.id&&!a.includes(t.id)&&s.removeRendition(t)}));let r=n=>{let i=e.currentTime,r=!1,s=(e,t)=>{r||(r=!Number.isFinite(t.endOffset))};t.on(oN.Events.BUFFER_FLUSHING,s),t.nextLevel=n,t.off(oN.Events.BUFFER_FLUSHING,s),r||t.trigger(oN.Events.BUFFER_FLUSHING,{startOffset:i+10,endOffset:1/0,type:"video"})};null==(n=e.videoRenditions)||n.addEventListener("change",(e=>{let n=e.target.selectedIndex;n!=t.nextLevel&&r(n)}));let s=()=>{for(let t of e.audioTracks)e.removeAudioTrack(t)},a=()=>{(()=>{for(let t of e.videoTracks)e.removeVideoTrack(t)})(),s()};t.once(oN.Events.DESTROYING,a)}function RN(e,t,n,i,r){let s=document.createElement("track");return s.kind=t,s.label=n,i&&(s.srclang=i),r&&(s.id=r),s.track.mode=["subtitles","captions"].includes(t)?"disabled":"hidden",s.setAttribute("data-removeondestroy",""),e.append(s),s.track}var CN="cuepoints",IN=Object.freeze({label:CN}),xN=(e,{label:t=CN}=IN)=>{var n;return null==(n=Array.from(e.querySelectorAll("track")).find((e=>e.track.label===t&&"metadata"===e.track.kind)))?void 0:n.track};async function DN(e,t,n=IN){let i=xN(e,n);if(!i){let{label:t=CN}=n;i=RN(e,"metadata",t),i.mode="hidden",await new Promise((e=>setTimeout((()=>e(void 0)),0)))}return"hidden"!==i.mode&&(i.mode="hidden"),[...t].sort((({time:e},{time:t})=>t-e)).forEach((({time:t,value:n})=>{var r,s;let a=Array.prototype.findIndex.call(null==i?void 0:i.cues,(e=>e.startTime>=t)),o=null==(r=null==i?void 0:i.cues)?void 0:r[a],l=o?o.startTime:Number.isFinite(e.duration)?e.duration:Number.MAX_SAFE_INTEGER,d=null==(s=null==i?void 0:i.cues)?void 0:s[a-1];d&&(d.endTime=t);let c=new VTTCue(t,l,JSON.stringify(null!=n?n:null));i.addCue(c)})),i}var MN=e=>({time:e.startTime,value:JSON.parse(e.text)});function ON(e,t={label:CN}){var n,i;let r=xN(e,t);if(null==(n=null==r?void 0:r.activeCues)||!n.length)return;let{currentTime:s}=e,a=Array.prototype.find.call(null!=(i=r.activeCues)?i:[],(({startTime:e,endTime:t})=>e<=s&&t>s));return MN(a)}var PN,NN,FN,UN,BN=async(e,t)=>{if(t===vN.MP4)return{streamType:hN.ON_DEMAND,targetLiveWindow:Number.NaN,liveEdgeStartOffset:void 0};if(t===vN.M3U8){let t=await(async e=>fetch(e).then((e=>e.text())).then((e=>{let t=e.split("\n").find(((e,t,n)=>t&&n[t-1].startsWith("#EXT-X-STREAM-INF")));return fetch(t).then((e=>e.text())).then((e=>e.split("\n")))})))(e);return(e=>{var t,n,i;let r,s=null==(n=(null!=(t=e.find((e=>e.startsWith("#EXT-X-PLAYLIST-TYPE"))))?t:"").split(":")[1])?void 0:n.trim(),a=TN(s),o=_N(s);if(a===hN.LIVE){let t=e.find((e=>e.startsWith("#EXT-X-PART-INF")));if(t)r=2*+t.split(":")[1].split("=")[1];else{let t=e.find((e=>e.startsWith("#EXT-X-TARGETDURATION"))),n=null==(i=null==t?void 0:t.split(":"))?void 0:i[1];r=3*+(null!=n?n:6)}}return{streamType:a,targetLiveWindow:o,liveEdgeStartOffset:r}})(t)}return console.error(`Media type ${t} is an unrecognized or unsupported type for src ${e}.`),{streamType:void 0,targetLiveWindow:void 0,liveEdgeStartOffset:void 0}},$N=async(e,t,n=EN({src:e}))=>{var i,r,s;let{streamType:a,targetLiveWindow:o,liveEdgeStartOffset:l}=await BN(e,n);(null!=(i=WN.get(t))?i:{}).liveEdgeStartOffset=l,(null!=(r=WN.get(t))?r:{}).targetLiveWindow=o,t.dispatchEvent(new CustomEvent("targetlivewindowchange",{composed:!0,bubbles:!0})),(null!=(s=WN.get(t))?s:{}).streamType=a,t.dispatchEvent(new CustomEvent("streamtypechange",{composed:!0,bubbles:!0}))},HN=(e,t,n)=>{var i,r,s,a,o,l,d,c;let{streamType:u,targetLiveWindow:h,liveEdgeStartOffset:m,lowLatency:p}=(e=>{var t;let n,i=e.type,r=TN(i),s=_N(i),a=!(null==(t=e.partList)||!t.length);return r===hN.LIVE&&(n=a?2*e.partTarget:3*e.targetduration),{streamType:r,targetLiveWindow:s,liveEdgeStartOffset:n,lowLatency:a}})(e);if(u===hN.LIVE){p?(n.config.backBufferLength=null!=(i=n.userConfig.backBufferLength)?i:4,n.config.maxFragLookUpTolerance=null!=(r=n.userConfig.maxFragLookUpTolerance)?r:.001,n.config.abrBandWidthUpFactor=null!=(s=n.userConfig.abrBandWidthUpFactor)?s:n.config.abrBandWidthFactor):n.config.backBufferLength=null!=(a=n.userConfig.backBufferLength)?a:8;let e=Object.freeze({get length(){return t.seekable.length},start:e=>t.seekable.start(e),end(e){var i;return e>this.length||e<0||Number.isFinite(t.duration)?t.seekable.end(e):null!=(i=n.liveSyncPosition)?i:t.seekable.end(e)}});(null!=(o=WN.get(t))?o:{}).seekable=e}(null!=(l=WN.get(t))?l:{}).liveEdgeStartOffset=m,(null!=(d=WN.get(t))?d:{}).targetLiveWindow=h,t.dispatchEvent(new CustomEvent("targetlivewindowchange",{composed:!0,bubbles:!0})),(null!=(c=WN.get(t))?c:{}).streamType=u,t.dispatchEvent(new CustomEvent("streamtypechange",{composed:!0,bubbles:!0}))},VN=-1!==(null!=(NN=null==(PN=null==globalThis?void 0:globalThis.navigator)?void 0:PN.userAgent)?NN:"").toLowerCase().indexOf("android"),WN=new WeakMap,GN="mux.com",KN=null==(UN=(FN=oN).isSupported)?void 0:UN.call(FN),qN=VN,jN=AR.utils.generateUUID,YN=({playbackId:e,customDomain:t=GN,maxResolution:n,minResolution:i,renditionOrder:r,tokens:{playback:s}={},extraSourceParams:a={}}={})=>{if(!e)return;let[o,l=""]=(e=>{let t=e.indexOf("?");return t<0?[e]:[e.slice(0,t),e.slice(t)]})(e),d=new URL(`https://stream.${t}/${o}.m3u8${l}`);return s||d.searchParams.has("token")?(d.searchParams.forEach(((e,t)=>{"token"!=t&&d.searchParams.delete(t)})),s&&d.searchParams.set("token",s)):(n&&d.searchParams.set("max_resolution",n),i&&(d.searchParams.set("min_resolution",i),n&&+n.slice(0,-1)<+i.slice(0,-1)&&console.error("minResolution must be <= maxResolution","minResolution",i,"maxResolution",n)),r&&d.searchParams.set("rendition_order",r),Object.entries(a).forEach((([e,t])=>{null!=t&&d.searchParams.set(e,t)}))),d.toString()},zN=e=>{var t,n,i;return null!=(t=null==e?void 0:e.metadata)&&t.video_id?e.metadata.video_id:oF(e)&&null!=(i=null!=(n=(e=>{if(!e)return;let[t]=e.split("?");return t||void 0})(e.playbackId))?n:(e=>{if(!e||!e.startsWith("https://stream."))return;let[t]=new URL(e).pathname.slice(1).split(".m3u8");return t||void 0})(e.src))?i:e.src},XN=e=>{var t,n;return null!=(n=null==(t=WN.get(e))?void 0:t.streamType)?n:hN.UNKNOWN},QN=e=>{var t,n;return null!=(n=null==(t=WN.get(e))?void 0:t.seekable)?n:e.seekable},ZN=.034,JN=(e,t,n=ZN)=>e>t||((e,t,n=ZN)=>Math.abs(e-t)<=n)(e,t,n),eF=(e,t)=>{var n,i,r;if(!t)return;if(e.readyState>2)return!1;let s=t.currentLevel>=0?null==(i=null==(n=t.levels)?void 0:n[t.currentLevel])?void 0:i.details:null==(r=t.levels.find((e=>!!e.details)))?void 0:r.details;if(!s||s.live)return;let{fragments:a}=s;if(null==a||!a.length)return;if(e.currentTime<e.duration-(s.targetduration+.5))return!1;let o=a[a.length-1];if(e.currentTime<=o.start)return!1;let l=o.start+o.duration/2,d=e.buffered.start(e.buffered.length-1),c=e.buffered.end(e.buffered.length-1);return l>d&&l<c},tF=(e,t)=>e.ended||e.loop?e.ended:!(!t||!eF(e,t))||((e,t=ZN)=>e.paused&&JN(e.currentTime,e.duration,t))(e),nF=(e,t,n)=>{iF(t,n);let{metadata:i={}}=e,{view_session_id:r=jN()}=i,s=zN(e);i.view_session_id=r,i.video_id=s,e.metadata=i,WN.set(t,{});let a=sF(e,t);lF(e,t,a),dF(e,t,a),async function(e,t=IN){new Promise((n=>{yN(e,"loadstart",(async()=>{let i=await DN(e,[],t);yN(e,"cuechange",(()=>{let t=ON(e);if(t){let n=new CustomEvent("cuepointchange",{composed:!0,bubbles:!0,detail:t});e.dispatchEvent(n)}}),{},i),n(i)}))}))}(t);let o=((e,t,n)=>{let{autoplay:i}=e,r=!1,s=!1,a=kN(i)?i:!!i,o=()=>{r||yN(t,"playing",(()=>{r=!0}),{once:!0})};if(o(),yN(t,"loadstart",(()=>{r=!1,o(),wN(t,a)}),{once:!0}),yN(t,"loadstart",(()=>{n||(s=e.streamType&&e.streamType!==hN.UNKNOWN?e.streamType===hN.LIVE:!Number.isFinite(t.duration)),wN(t,a)}),{once:!0}),n&&n.once(oN.Events.LEVEL_LOADED,((t,n)=>{var i;s=e.streamType&&e.streamType!==hN.UNKNOWN?e.streamType===hN.LIVE:null!=(i=n.details.live)&&i})),!a){let i=()=>{!s||Number.isFinite(e.startTime)||(null!=n&&n.liveSyncPosition?t.currentTime=n.liveSyncPosition:Number.isFinite(t.seekable.end(0))&&(t.currentTime=t.seekable.end(0)))};n&&yN(t,"play",(()=>{"metadata"===t.preload?n.once(oN.Events.LEVEL_UPDATED,i):i()}),{once:!0})}return e=>{r||(a=kN(e)?e:!!e,wN(t,a))}})(e,t,a),l=(({preload:e,src:t},n,i)=>{let r=e=>{null!=e&&["","none","metadata","auto"].includes(e)?n.setAttribute("preload",e):n.removeAttribute("preload")};if(!i)return r(e),r;let s=!1,a=!1,o=i.config.maxBufferLength,l=i.config.maxBufferSize,d=e=>{r(e);let t=null!=e?e:n.preload;a||"none"===t||("metadata"===t?(i.config.maxBufferLength=1,i.config.maxBufferSize=1):(i.config.maxBufferLength=o,i.config.maxBufferSize=l),c())},c=()=>{!s&&t&&(s=!0,i.loadSource(t))};return yN(n,"play",(()=>{a=!0,i.config.maxBufferLength=o,i.config.maxBufferSize=l,c()}),{once:!0}),d(e),d})(e,t,a);return{engine:a,setAutoplay:o,setPreload:l}},iF=(e,t)=>{let n=null==t?void 0:t.engine;n&&(n.detachMedia(),n.destroy()),null!=e&&e.mux&&!e.mux.deleted&&(e.mux.destroy(),delete e.mux),e&&(e.removeAttribute("src"),e.load(),e.removeEventListener("error",uF),e.removeEventListener("error",hF),e.removeEventListener("durationchange",cF),WN.delete(e),e.dispatchEvent(new Event("teardown")))};function rF(e,t){var n;let i=EN(e);if(i!==vN.M3U8)return!0;let r=!i||null==(n=t.canPlayType(i))||n,{preferPlayback:s}=e;return r&&(s===pN||!(KN&&(s===mN||qN)))}var sF=(e,t)=>{let{debug:n,streamType:i,startTime:r=-1,metadata:s,preferCmcd:a,_hlsConfig:o={}}=e,l=EN(e)===vN.M3U8,d=rF(e,t);if(l&&!d&&KN){let e={backBufferLength:30,renderTextTracksNatively:!1,liveDurationInfinity:!0,capLevelToPlayerSize:!0,capLevelOnFPSDrop:!0},t=aF(i),l=a!==fN.NONE?{useHeaders:a===fN.HEADER,sessionId:null==s?void 0:s.view_session_id,contentId:null==s?void 0:s.video_id}:void 0;return new oN({debug:n,startPosition:r,cmcd:l,xhrSetup:(e,t)=>{var n,i;if(a&&a!==fN.QUERY)return;let r=new URL(t);if(!r.searchParams.has("CMCD"))return;let s=(null!=(i=null==(n=r.searchParams.get("CMCD"))?void 0:n.split(","))?i:[]).filter((e=>e.startsWith("sid")||e.startsWith("cid"))).join(",");r.searchParams.set("CMCD",s),e.open("GET",r)},...e,...t,...o})}},aF=e=>e===hN.LIVE?{backBufferLength:8}:{},oF=({playbackId:e,src:t,customDomain:n})=>{if(e)return!0;if("string"!=typeof t)return!1;let i=null==window?void 0:window.location.href,r=new URL(t,i).hostname.toLocaleLowerCase();return r.includes(GN)||!!n&&r.includes(n.toLocaleLowerCase())},lF=(e,t,n)=>{var i;let{envKey:r,disableTracking:s}=e,a=oF(e);if(!s&&(r||a)){let{playerInitTime:s,playerSoftwareName:a,playerSoftwareVersion:o,beaconCollectionDomain:l,debug:d,disableCookies:c}=e,u={...e.metadata,video_title:(null==(i=null==e?void 0:e.metadata)?void 0:i.video_title)||void 0},h=t=>"string"!=typeof t.player_error_code&&("function"==typeof e.errorTranslator?e.errorTranslator(t):t);AR.monitor(t,{debug:d,beaconCollectionDomain:l,hlsjs:n,Hls:n?oN:void 0,automaticErrorTracking:!1,errorTranslator:h,disableCookies:c,data:{...r?{env_key:r}:{},player_software_name:a,player_software:a,player_software_version:o,player_init_time:s,...u}})}},dF=(e,t,n)=>{var i;let r,s,a=rF(e,t),{src:o}=e,l=()=>{t.ended||!tF(t,n)||(eF(t,n)?t.currentTime=t.buffered.end(t.buffered.length-1):t.dispatchEvent(new Event("ended")))},d=()=>{var e,n;let i=null==(e=QN(t))?void 0:e.start(0),a=null==(n=QN(t))?void 0:n.end(0);(s!==a||r!==i)&&t.dispatchEvent(new CustomEvent("seekablechange",{composed:!0})),r=i,s=a};if(yN(t,"durationchange",d),t&&a){let n=EN(e);if("string"==typeof o){let r=()=>{if(XN(t)!==hN.LIVE||Number.isFinite(t.duration))return;let e=setInterval(d,1e3);t.addEventListener("teardown",(()=>{clearInterval(e)}),{once:!0}),yN(t,"durationchange",(()=>{Number.isFinite(t.duration)&&clearInterval(e)}))};"none"===t.preload?yN(t,"loadstart",(()=>{$N(o,t,n).then(r)})):$N(o,t,n).then(r),t.setAttribute("src",o),e.startTime&&((null!=(i=WN.get(t))?i:{}).startTime=e.startTime,t.addEventListener("durationchange",cF,{once:!0}))}else t.removeAttribute("src");t.addEventListener("error",uF),t.addEventListener("error",hF),t.addEventListener("emptied",(()=>{t.querySelectorAll("track[data-removeondestroy]").forEach((e=>{e.remove()}))}),{once:!0}),yN(t,"pause",l),yN(t,"seeked",l),yN(t,"play",(()=>{t.ended||JN(t.currentTime,t.duration)&&(t.currentTime=t.seekable.start(0))}))}else n&&o?(n.once(oN.Events.LEVEL_LOADED,((e,i)=>{HN(i.details,t,n),d(),XN(t)===hN.LIVE&&!Number.isFinite(t.duration)&&(n.on(oN.Events.LEVEL_UPDATED,d),yN(t,"durationchange",(()=>{Number.isFinite(t.duration)&&n.off(oN.Events.LEVELS_UPDATED,d)})))})),n.on(oN.Events.ERROR,((e,n)=>{let i={[oN.ErrorTypes.NETWORK_ERROR]:dN.MEDIA_ERR_NETWORK,[oN.ErrorTypes.MEDIA_ERROR]:dN.MEDIA_ERR_DECODE},r=new dN("",i[n.type]);r.fatal=n.fatal,r.data=n,t.dispatchEvent(new CustomEvent("error",{detail:r}))})),t.addEventListener("error",hF),yN(t,"waiting",l),LN(e,n),function(e,t){t.on(oN.Events.NON_NATIVE_TEXT_TRACKS_FOUND,((n,{tracks:i})=>{i.forEach((n=>{var i;let r=null!=(i=n.subtitleTrack)?i:n.closedCaptions,s=t.subtitleTracks.findIndex((({lang:e,name:t,type:i})=>e==(null==r?void 0:r.lang)&&t===n.label&&i.toLowerCase()===n.kind));RN(e,n.kind,n.label,null==r?void 0:r.lang,`${n.kind}${s}`)}))}));let n=()=>{var n;if(!t.subtitleTracks.length)return;let i=Array.from(e.textTracks).find((e=>e.id&&"showing"===e.mode&&["subtitles","captions"].includes(e.kind))),r=`${null==(n=t.subtitleTracks[t.subtitleTrack])?void 0:n.type.toLowerCase()}${t.subtitleTrack}`;if(i&&(t.subtitleTrack<0||(null==i?void 0:i.id)!==r)){let e=t.subtitleTracks.findIndex((({lang:e,name:t,type:n})=>e==i.language&&t===i.label&&n.toLowerCase()===i.kind));t.subtitleTrack=e}i&&(null==i?void 0:i.id)===r&&i.cues&&Array.from(i.cues).forEach((e=>{i.addCue(e)}))};e.textTracks.addEventListener("change",n),t.on(oN.Events.CUES_PARSED,((t,{track:n,cues:i})=>{let r=e.textTracks.getTrackById(n);if(!r)return;let s="disabled"===r.mode;s&&(r.mode="hidden"),i.forEach((e=>{var t;null!=(t=r.cues)&&t.getCueById(e.id)||r.addCue(e)})),s&&(r.mode="disabled")})),t.once(oN.Events.DESTROYING,(()=>{e.textTracks.removeEventListener("change",n),e.querySelectorAll("track[data-removeondestroy]").forEach((e=>{e.remove()}))}));let i=()=>{Array.from(e.textTracks).forEach((t=>{var n,i;if(!["subtitles","caption"].includes(t.kind)&&"thumbnails"===t.label){if(null==(n=t.cues)||!n.length){let t=e.querySelector('track[label="thumbnails"]'),n=null!=(i=null==t?void 0:t.getAttribute("src"))?i:"";null==t||t.removeAttribute("src"),setTimeout((()=>{null==t||t.setAttribute("src",n)}),0)}"hidden"!==t.mode&&(t.mode="hidden")}}))};t.once(oN.Events.MANIFEST_LOADED,i),t.once(oN.Events.MEDIA_ATTACHED,i)}(t,n),n.attachMedia(t)):console.error("It looks like the video you're trying to play will not work on this system! If possible, try upgrading to the newest versions of your browser or software.")};function cF(e){var t;let n=e.target,i=null==(t=WN.get(n))?void 0:t.startTime;if(i&&function(e,t,n){t&&n>t&&(n=t);for(let t=0;t<e.length;t++)if(e.start(t)<=n&&e.end(t)>=n)return!0;return!1}(n.seekable,n.duration,i)){let e="auto"===n.preload;e&&(n.preload="none"),n.currentTime=i,e&&(n.preload="auto")}}async function uF(e){if(!e.isTrusted)return;e.stopImmediatePropagation();let t=e.target;if(null==t||!t.error)return;let{message:n,code:i}=t.error,r=new dN(n,i);if(t.src&&(i!==dN.MEDIA_ERR_DECODE||void 0!==i))try{let{status:e}=await fetch(t.src);r.data={response:{code:e}}}catch{}t.dispatchEvent(new CustomEvent("error",{detail:r}))}function hF(e){var t,n;if(!(e instanceof CustomEvent&&e.detail instanceof dN))return;let i=e.target,r=e.detail;!r||!r.fatal||((null!=(t=WN.get(i))?t:{}).error=r,null==(n=i.mux)||n.emit("error",{player_error_code:r.code,player_error_message:r.message,player_error_context:r.context}))}var mF=Object.defineProperty,pF=Object.getPrototypeOf,fF=Reflect.get,gF=(e,t,n)=>(((e,t,n)=>{t in e?mF(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n),vF=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},bF=(e,t,n)=>(vF(e,t,"read from private field"),n?n.call(e):t.get(e)),yF=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},EF=(e,t,n,i)=>(vF(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),TF=(e,t,n)=>(vF(e,t,"access private method"),n),_F=(e,t,n)=>fF(pF(e),n,t),AF=class{addEventListener(){}removeEventListener(){}dispatchEvent(e){return!0}};if("undefined"==typeof DocumentFragment){class e extends AF{}globalThis.DocumentFragment=e}var SF,kF=class extends AF{},wF={get(e){},define(e,t,n){},upgrade(e){},whenDefined:e=>Promise.resolve(kF)};SF=new WeakMap;var LF,RF={document:{createElement:function(e,t){return new kF}},DocumentFragment,customElements:wF,CustomEvent:class{constructor(e,t={}){yF(this,SF,void 0),EF(this,SF,null==t?void 0:t.detail)}get detail(){return bF(this,SF)}initCustomEvent(){}},EventTarget:AF,HTMLElement:kF,HTMLVideoElement:class extends AF{}},CF="undefined"==typeof window||void 0===globalThis.customElements,IF=CF?RF:globalThis,xF=(CF||globalThis.document,(()=>{try{return"0.18.0"}catch{}return"UNKNOWN"})()),DF=["abort","canplay","canplaythrough","durationchange","emptied","encrypted","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting","waitingforkey","resize","enterpictureinpicture","leavepictureinpicture","webkitbeginfullscreen","webkitendfullscreen","webkitpresentationmodechanged"],MF=null==(LF=globalThis.document)?void 0:LF.createElement("template");MF&&(MF.innerHTML='\n    <style>\n      :host {\n        display: inline-flex;\n        line-height: 0;\n        flex-direction: column;\n        justify-content: end;\n      }\n\n      audio {\n        width: 100%;\n      }\n    </style>\n    <slot name="media"></slot>\n    <slot></slot>\n  ');var OF,PF=null==(OF=globalThis.document)?void 0:OF.createElement("template");PF&&(PF.innerHTML='\n    <style>\n      :host {\n        display: inline-block;\n        line-height: 0;\n      }\n\n      video {\n        max-width: 100%;\n        max-height: 100%;\n        min-width: 100%;\n        min-height: 100%;\n        object-fit: var(--media-object-fit, contain);\n        object-position: var(--media-object-position, 50% 50%);\n      }\n\n      video::-webkit-media-text-track-container {\n        transform: var(--media-webkit-text-track-transform);\n        transition: var(--media-webkit-text-track-transition);\n      }\n    </style>\n    <slot name="media"></slot>\n    <slot></slot>\n  ');var NF=(e,{tag:t,is:n})=>{var i,r,s,a,o,l,d,c,u,h,m,p,f,g,v,b;let y=null==(i=globalThis.document)?void 0:i.createElement(t,{is:n}),E=y?function(e){let t=[];for(let n=Object.getPrototypeOf(e);n&&n!==HTMLElement.prototype;n=Object.getPrototypeOf(n))t.push(...Object.getOwnPropertyNames(n));return t}(y):[];return r=class extends e{constructor(){super(),yF(this,u),yF(this,m),yF(this,f),yF(this,v),yF(this,l,void 0),yF(this,d,void 0),yF(this,c,new Map),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.append(this.constructor.template.content.cloneNode(!0)))}static get observedAttributes(){var e,t,n;return TF(e=r,a,o).call(e),[...null!=(n=null==(t=null==y?void 0:y.constructor)?void 0:t.observedAttributes)?n:[],"autopictureinpicture","disablepictureinpicture","disableremoteplayback","autoplay","controls","controlslist","crossorigin","loop","muted","playsinline","poster","preload","src"]}get nativeEl(){var e,n,i;return null!=(i=null!=(n=null!=(e=bF(this,d))?e:this.shadowRoot.querySelector(t))?n:this.querySelector(":scope > [slot=media]"))?i:this.querySelector(t)}set nativeEl(e){EF(this,d,e)}get defaultMuted(){return this.hasAttribute("muted")}set defaultMuted(e){this.toggleAttribute("muted",!!e)}get src(){return this.getAttribute("src")}set src(e){this.setAttribute("src",`${e}`)}get preload(){var e,t;return null!=(t=this.getAttribute("preload"))?t:null==(e=this.nativeEl)?void 0:e.preload}set preload(e){this.setAttribute("preload",`${e}`)}init(){var e,i;if(!this.nativeEl){let e=document.createElement(t,{is:n});e.part=t,this.shadowRoot.querySelector('slot[name="media"]').append(e)}this.nativeEl.muted=this.hasAttribute("muted");for(let e of E)TF(this,f,g).call(this,e);this.shadowRoot.addEventListener("slotchange",this);for(let t of this.constructor.Events)null==(i=(e=this.shadowRoot).addEventListener)||i.call(e,t,this,!0)}handleEvent(e){"slotchange"!==e.type?e.target===this.nativeEl&&this.dispatchEvent(new CustomEvent(e.type,{detail:e.detail})):TF(this,m,p).call(this)}attributeChangedCallback(e,t,n){TF(this,u,h).call(this),TF(this,v,b).call(this,e,t,n)}connectedCallback(){TF(this,u,h).call(this)}},s=new WeakMap,a=new WeakSet,o=function(){if(bF(this,s))return;EF(this,s,!0);let e=new Set(this.observedAttributes);e.delete("muted");for(let t of E)if(!(t in this.prototype))if("function"==typeof y[t])this.prototype[t]=function(...e){return TF(this,u,h).call(this),this.call?this.call(t,...e):this.nativeEl[t].apply(this.nativeEl,e)};else{let n={get(){var n,i,r;TF(this,u,h).call(this);let s=t.toLowerCase();if(e.has(s)){let e=this.getAttribute(s);return null!==e&&(""===e||e)}return null!=(r=null==(n=this.get)?void 0:n.call(this,t))?r:null==(i=this.nativeEl)?void 0:i[t]}};t!==t.toUpperCase()&&(n.set=function(n){TF(this,u,h).call(this);let i=t.toLowerCase();e.has(i)?!0===n||!1===n||null==n?this.toggleAttribute(i,!!n):this.setAttribute(i,n):this.set?this.set(t,n):this.nativeEl[t]=n}),Object.defineProperty(this.prototype,t,n)}},l=new WeakMap,d=new WeakMap,c=new WeakMap,u=new WeakSet,h=function(){bF(this,l)||(EF(this,l,!0),this.init())},m=new WeakSet,p=function(){let e=new Map(bF(this,c));this.shadowRoot.querySelector("slot:not([name])").assignedElements().filter((e=>["track","source"].includes(e.localName))).forEach((t=>{var n,i;e.delete(t);let r=bF(this,c).get(t);r||(r=t.cloneNode(),bF(this,c).set(t,r)),null==(i=(n=this.nativeEl).append)||i.call(n,r),"track"===r.localName&&r.default&&("chapters"===r.kind||"metadata"===r.kind)&&"disabled"===r.track.mode&&(r.track.mode="hidden")})),e.forEach((e=>e.remove()))},f=new WeakSet,g=function(e){if(Object.prototype.hasOwnProperty.call(this,e)){let t=this[e];delete this[e],this[e]=t}},v=new WeakSet,b=function(e,t,n){var i,s,a,o,l,d;["id","class"].includes(e)||!r.observedAttributes.includes(e)&&this.constructor.observedAttributes.includes(e)||(null===n?null==(s=(i=this.nativeEl).removeAttribute)||s.call(i,e):(null==(o=(a=this.nativeEl).getAttribute)?void 0:o.call(a,e))!=n&&(null==(d=(l=this.nativeEl).setAttribute)||d.call(l,e,n)))},yF(r,a),gF(r,"Events",DF),gF(r,"template",t.endsWith("audio")?MF:PF),yF(r,s,void 0),r};var FF=globalThis.document?NF(HTMLElement,{tag:"video"}):class{},UF=(globalThis.document&&NF(HTMLElement,{tag:"audio"}),new WeakMap),BF=class extends Error{},$F=class extends Error{},HF=globalThis.WeakRef?class extends Set{add(e){super.add(new WeakRef(e))}forEach(e){super.forEach((t=>{let n=t.deref();n&&e(n)}))}}:Set;function VF(){return"undefined"!=typeof chrome&&chrome.cast&&chrome.cast.isAvailable}function WF(){return"undefined"!=typeof cast&&cast.framework}function GF(){if(WF())return cast.framework.CastContext.getInstance()}function KF(){var e;return null==(e=GF())?void 0:e.getCurrentSession()}function qF(){var e;return null==(e=KF())?void 0:e.getSessionObj().media[0]}function jF(e){return GF().setOptions({receiverApplicationId:"CC1AD845",autoJoinPolicy:"origin_scoped",androidReceiverCompatible:!1,language:"en-US",resumeSavedSession:!0,...e})}var YF,zF,XF=new HF,QF=new WeakSet;zF=e=>{e&&!YF&&(YF=cast.framework,GF().addEventListener(YF.CastContextEventType.CAST_STATE_CHANGED,(e=>{XF.forEach((t=>{var n,i;return null==(i=(n=UF.get(t)).onCastStateChanged)?void 0:i.call(n,e)}))})),GF().addEventListener(YF.CastContextEventType.SESSION_STATE_CHANGED,(e=>{XF.forEach((t=>{var n,i;return null==(i=(n=UF.get(t)).onSessionStateChanged)?void 0:i.call(n,e)}))})),XF.forEach((e=>{var t,n;return null==(n=(t=UF.get(e)).init)?void 0:n.call(t)})))},VF()?WF()?zF(chrome.cast.isAvailable):customElements.whenDefined("google-cast-button").then((()=>zF(chrome.cast.isAvailable))):globalThis.__onGCastApiAvailable=()=>{customElements.whenDefined("google-cast-button").then((()=>zF(chrome.cast.isAvailable)))};var ZF,JF,eU,tU,nU,iU,rU,sU,aU,oU,lU,dU,cU,uU,hU,mU,pU,fU,gU,vU,bU,yU,EU=0,TU=class extends EventTarget{constructor(e){super(),yF(this,aU),yF(this,lU),yF(this,cU),yF(this,hU),yF(this,pU),yF(this,gU),yF(this,bU),yF(this,ZF,void 0),yF(this,JF,void 0),yF(this,eU,void 0),yF(this,tU,void 0),yF(this,nU,"disconnected"),yF(this,iU,!1),yF(this,rU,new Set),yF(this,sU,new WeakMap),EF(this,ZF,e),XF.add(this),UF.set(this,{init:()=>TF(this,pU,fU).call(this),onCastStateChanged:()=>TF(this,cU,uU).call(this),onSessionStateChanged:()=>TF(this,hU,mU).call(this),getCastPlayer:()=>bF(this,aU,oU)}),TF(this,pU,fU).call(this)}get state(){return bF(this,nU)}async watchAvailability(e){if(bF(this,ZF).disableRemotePlayback)throw new BF("disableRemotePlayback attribute is present.");return bF(this,sU).set(e,++EU),bF(this,rU).add(e),EU}async cancelWatchAvailability(e){if(bF(this,ZF).disableRemotePlayback)throw new BF("disableRemotePlayback attribute is present.");e?bF(this,rU).delete(e):bF(this,rU).clear()}async prompt(){var e,t;if(bF(this,ZF).disableRemotePlayback)throw new BF("disableRemotePlayback attribute is present.");if(!VF())throw new $F("The RemotePlayback API is disabled on this platform.");let n=QF.has(bF(this,ZF));QF.add(bF(this,ZF)),jF(bF(this,ZF).castOptions),Object.entries(bF(this,tU)).forEach((([e,t])=>{bF(this,eU).controller.addEventListener(e,t)}));try{await GF().requestSession()}catch(e){if("cancel"===e)return void(n||QF.delete(bF(this,ZF)));throw new Error(e)}null==(t=null==(e=UF.get(bF(this,ZF)))?void 0:e.loadOnPrompt)||t.call(e)}};ZF=new WeakMap,JF=new WeakMap,eU=new WeakMap,tU=new WeakMap,nU=new WeakMap,iU=new WeakMap,rU=new WeakMap,sU=new WeakMap,aU=new WeakSet,oU=function(){if(QF.has(bF(this,ZF)))return bF(this,eU)},lU=new WeakSet,dU=function(){QF.has(bF(this,ZF))&&(Object.entries(bF(this,tU)).forEach((([e,t])=>{bF(this,eU).controller.removeEventListener(e,t)})),QF.delete(bF(this,ZF)),bF(this,ZF).muted=bF(this,eU).isMuted,bF(this,ZF).currentTime=bF(this,eU).savedPlayerState.currentTime,!1===bF(this,eU).savedPlayerState.isPaused&&bF(this,ZF).play())},cU=new WeakSet,uU=function(){let e=GF().getCastState();if(QF.has(bF(this,ZF))&&"CONNECTING"===e&&(EF(this,nU,"connecting"),this.dispatchEvent(new Event("connecting"))),!bF(this,iU)&&null!=e&&e.includes("CONNECT")){EF(this,iU,!0);for(let e of bF(this,rU))e(!0)}else if(bF(this,iU)&&(!e||"NO_DEVICES_AVAILABLE"===e)){EF(this,iU,!1);for(let e of bF(this,rU))e(!1)}},hU=new WeakSet,mU=async function(){var e;let{SESSION_RESUMED:t}=YF.SessionState;if(GF().getSessionState()===t&&bF(this,ZF).castSrc===(null==(e=qF())?void 0:e.media.contentId)){QF.add(bF(this,ZF)),Object.entries(bF(this,tU)).forEach((([e,t])=>{bF(this,eU).controller.addEventListener(e,t)}));try{await function(e){return new Promise(((t,n)=>{qF().getStatus(e,t,n)}))}(new chrome.cast.media.GetStatusRequest)}catch(e){console.error(e)}bF(this,tU)[YF.RemotePlayerEventType.IS_PAUSED_CHANGED](),bF(this,tU)[YF.RemotePlayerEventType.PLAYER_STATE_CHANGED]()}},pU=new WeakSet,fU=function(){!YF||bF(this,JF)||(EF(this,JF,!0),jF(bF(this,ZF).castOptions),bF(this,ZF).textTracks.addEventListener("change",(()=>TF(this,bU,yU).call(this))),TF(this,cU,uU).call(this),EF(this,eU,new YF.RemotePlayer),new YF.RemotePlayerController(bF(this,eU)),EF(this,tU,{[YF.RemotePlayerEventType.IS_CONNECTED_CHANGED]:({value:e})=>{!0===e?(EF(this,nU,"connected"),this.dispatchEvent(new Event("connect"))):(TF(this,lU,dU).call(this),EF(this,nU,"disconnected"),this.dispatchEvent(new Event("disconnect")))},[YF.RemotePlayerEventType.DURATION_CHANGED]:()=>{bF(this,ZF).dispatchEvent(new Event("durationchange"))},[YF.RemotePlayerEventType.VOLUME_LEVEL_CHANGED]:()=>{bF(this,ZF).dispatchEvent(new Event("volumechange"))},[YF.RemotePlayerEventType.IS_MUTED_CHANGED]:()=>{bF(this,ZF).dispatchEvent(new Event("volumechange"))},[YF.RemotePlayerEventType.CURRENT_TIME_CHANGED]:()=>{var e;null!=(e=bF(this,aU,oU))&&e.isMediaLoaded&&bF(this,ZF).dispatchEvent(new Event("timeupdate"))},[YF.RemotePlayerEventType.VIDEO_INFO_CHANGED]:()=>{bF(this,ZF).dispatchEvent(new Event("resize"))},[YF.RemotePlayerEventType.IS_PAUSED_CHANGED]:()=>{bF(this,ZF).dispatchEvent(new Event(this.paused?"pause":"play"))},[YF.RemotePlayerEventType.PLAYER_STATE_CHANGED]:()=>{var e,t;(null==(e=bF(this,aU,oU))?void 0:e.playerState)!==chrome.cast.media.PlayerState.PAUSED&&bF(this,ZF).dispatchEvent(new Event({[chrome.cast.media.PlayerState.PLAYING]:"playing",[chrome.cast.media.PlayerState.BUFFERING]:"waiting",[chrome.cast.media.PlayerState.IDLE]:"emptied"}[null==(t=bF(this,aU,oU))?void 0:t.playerState]))},[YF.RemotePlayerEventType.IS_MEDIA_LOADED_CHANGED]:async()=>{var e;null!=(e=bF(this,aU,oU))&&e.isMediaLoaded&&(await Promise.resolve(),TF(this,gU,vU).call(this))}}))},gU=new WeakSet,vU=function(){TF(this,bU,yU).call(this)},bU=new WeakSet,yU=async function(){var e,t,n,i,r;if(!bF(this,aU,oU))return;let s=(null!=(t=null==(e=bF(this,eU).mediaInfo)?void 0:e.tracks)?t:[]).filter((({type:e})=>e===chrome.cast.media.TrackType.TEXT)),a=[...bF(this,ZF).textTracks].filter((({kind:e})=>"subtitles"===e||"captions"===e)),o=s.map((({language:e,name:t,trackId:n})=>{var i;let{mode:r}=null!=(i=a.find((n=>n.language===e&&n.label===t)))?i:{};return!!r&&{mode:r,trackId:n}})).filter(Boolean),l=o.filter((({mode:e})=>"showing"!==e)).map((({trackId:e})=>e)),d=o.find((({mode:e})=>"showing"===e)),c=null!=(r=null==(i=null==(n=KF())?void 0:n.getSessionObj().media[0])?void 0:i.activeTrackIds)?r:[],u=c;if(c.length&&(u=u.filter((e=>!l.includes(e)))),null!=d&&d.trackId&&(u=[...u,d.trackId]),u=[...new Set(u)],!((e,t)=>e.length===t.length&&e.every((e=>t.includes(e))))(c,u))try{let e=new chrome.cast.media.EditTracksInfoRequest(u);await function(e){return new Promise(((t,n)=>{qF().editTracksInfo(e,t,n)}))}(e)}catch(e){console.error(e)}};var _U=e=>{var t,n,i,r,s,a,o,l,d;return n=class extends e{constructor(){super(...arguments),yF(this,a),yF(this,l),yF(this,i,{paused:!1}),yF(this,r,{receiverApplicationId:"CC1AD845",autoJoinPolicy:"origin_scoped",androidReceiverCompatible:!1,language:"en-US",resumeSavedSession:!0}),yF(this,s,void 0)}get remote(){return bF(this,s)?bF(this,s):globalThis.chrome?(function(){let e="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1";if(globalThis.chrome.cast||document.querySelector(`script[src="${e}"]`))return;let t=document.createElement("script");t.src=e,document.head.append(t)}(),UF.set(this,{loadOnPrompt:()=>TF(this,l,d).call(this)}),EF(this,s,new TU(this))):super.remote}attributeChangedCallback(e,t,n){if(super.attributeChangedCallback(e,t,n),"cast-receiver"===e&&n)bF(this,r).receiverApplicationId=n;else if(bF(this,a,o))switch(e){case"cast-stream-type":case"cast-src":this.load()}}async load(){var e,t;if(!bF(this,a,o))return super.load();let n=new chrome.cast.media.MediaInfo(this.castSrc,this.castContentType),r=[...this.querySelectorAll("track")].filter((({kind:e,src:t})=>t&&("subtitles"===e||"captions"===e))),s=[],l=0;r.length&&(n.tracks=r.map((e=>{let t=++l;0===s.length&&"showing"===e.track.mode&&s.push(t);let n=new chrome.cast.media.Track(t,chrome.cast.media.TrackType.TEXT);return n.trackContentId=e.src,n.trackContentType="text/vtt",n.subtype="captions"===e.kind?chrome.cast.media.TextTrackType.CAPTIONS:chrome.cast.media.TextTrackType.SUBTITLES,n.name=e.label,n.language=e.srclang,n}))),"live"===this.castStreamType?n.streamType=chrome.cast.media.StreamType.LIVE:n.streamType=chrome.cast.media.StreamType.BUFFERED,n.metadata=new chrome.cast.media.GenericMediaMetadata,n.metadata.title=this.title,n.metadata.images=[{url:this.poster}];let d=new chrome.cast.media.LoadRequest(n);d.currentTime=null!=(e=super.currentTime)?e:0,d.autoplay=!bF(this,i).paused,d.activeTrackIds=s,await(null==(t=KF())?void 0:t.loadMedia(d)),this.dispatchEvent(new Event("volumechange"))}play(){var e;if(!bF(this,a,o))return super.play();bF(this,a,o).isPaused&&(null==(e=bF(this,a,o).controller)||e.playOrPause())}pause(){var e;bF(this,a,o)?bF(this,a,o).isPaused||null==(e=bF(this,a,o).controller)||e.playOrPause():super.pause()}get castOptions(){return bF(this,r)}get castReceiver(){var e;return null!=(e=this.getAttribute("cast-receiver"))?e:void 0}set castReceiver(e){this.castReceiver!=e&&this.setAttribute("cast-receiver",`${e}`)}get castSrc(){var e,t,n;return null!=(n=null!=(t=this.getAttribute("cast-src"))?t:null==(e=this.querySelector("source"))?void 0:e.src)?n:this.currentSrc}set castSrc(e){this.castSrc!=e&&this.setAttribute("cast-src",`${e}`)}get castContentType(){var e;return null!=(e=this.getAttribute("cast-content-type"))?e:void 0}set castContentType(e){this.setAttribute("cast-content-type",`${e}`)}get castStreamType(){var e,t;return null!=(t=null!=(e=this.getAttribute("cast-stream-type"))?e:this.streamType)?t:void 0}set castStreamType(e){this.setAttribute("cast-stream-type",`${e}`)}get readyState(){if(bF(this,a,o))switch(bF(this,a,o).playerState){case chrome.cast.media.PlayerState.IDLE:return 0;case chrome.cast.media.PlayerState.BUFFERING:return 2;default:return 3}return super.readyState}get paused(){return bF(this,a,o)?bF(this,a,o).isPaused:super.paused}get muted(){var e;return bF(this,a,o)?null==(e=bF(this,a,o))?void 0:e.isMuted:super.muted}set muted(e){var t;bF(this,a,o)?(e&&!bF(this,a,o).isMuted||!e&&bF(this,a,o).isMuted)&&(null==(t=bF(this,a,o).controller)||t.muteOrUnmute()):super.muted=e}get volume(){var e,t;return bF(this,a,o)?null!=(t=null==(e=bF(this,a,o))?void 0:e.volumeLevel)?t:1:super.volume}set volume(e){var t;if(bF(this,a,o))return bF(this,a,o).volumeLevel=+e,void(null==(t=bF(this,a,o).controller)||t.setVolumeLevel());super.volume=e}get duration(){var e,t,n;return bF(this,a,o)&&null!=(e=bF(this,a,o))&&e.isMediaLoaded?null!=(n=null==(t=bF(this,a,o))?void 0:t.duration)?n:NaN:super.duration}get currentTime(){var e,t,n;return bF(this,a,o)&&null!=(e=bF(this,a,o))&&e.isMediaLoaded?null!=(n=null==(t=bF(this,a,o))?void 0:t.currentTime)?n:0:super.currentTime}set currentTime(e){var t;if(bF(this,a,o))return bF(this,a,o).currentTime=e,void(null==(t=bF(this,a,o).controller)||t.seek());super.currentTime=e}},i=new WeakMap,r=new WeakMap,s=new WeakMap,a=new WeakSet,o=function(){var e,t;return null==(t=null==(e=UF.get(this.remote))?void 0:e.getCastPlayer)?void 0:t.call(e)},l=new WeakSet,d=async function(){bF(this,i).paused=_F(n.prototype,this,"paused"),_F(n.prototype,this,"pause").call(this),this.muted=_F(n.prototype,this,"muted");try{await this.load()}catch(e){console.error(e)}},gF(n,"observedAttributes",[...null!=(t=e.observedAttributes)?t:[],"cast-src","cast-content-type","cast-stream-type","cast-receiver"]),n},AU=class extends Event{constructor(e,t){super(e),gF(this,"track"),this.track=t.track}},SU=new WeakMap;function kU(e){var t;return null!=(t=SU.get(e))?t:function(e,t){let n=SU.get(e);return n||SU.set(e,n={}),Object.assign(n,t)}(e,{})}function wU(e,t){let n=e.videoTracks;kU(t).media=e,kU(t).renditionSet||(kU(t).renditionSet=new Set);let i=kU(n).trackSet;i.add(t);let r=i.size-1;r in MU.prototype||Object.defineProperty(MU.prototype,r,{get(){return[...kU(this).trackSet][r]}}),queueMicrotask((()=>{n.dispatchEvent(new AU("addtrack",{track:t}))}))}function LU(e){var t;let n=null==(t=kU(e).media)?void 0:t.videoTracks;n&&(kU(n).trackSet.delete(e),queueMicrotask((()=>{n.dispatchEvent(new AU("removetrack",{track:e}))})))}var RU,CU,IU,xU,DU,MU=class extends EventTarget{constructor(){super(),yF(this,xU),yF(this,RU,void 0),yF(this,CU,void 0),yF(this,IU,void 0),kU(this).trackSet=new Set}[Symbol.iterator](){return bF(this,xU,DU).values()}get length(){return bF(this,xU,DU).size}getTrackById(e){var t;return null!=(t=[...bF(this,xU,DU)].find((t=>t.id===e)))?t:null}get selectedIndex(){return[...bF(this,xU,DU)].findIndex((e=>e.selected))}get onaddtrack(){return bF(this,RU)}set onaddtrack(e){bF(this,RU)&&(this.removeEventListener("addtrack",bF(this,RU)),EF(this,RU,void 0)),"function"==typeof e&&(EF(this,RU,e),this.addEventListener("addtrack",e))}get onremovetrack(){return bF(this,CU)}set onremovetrack(e){bF(this,CU)&&(this.removeEventListener("removetrack",bF(this,CU)),EF(this,CU,void 0)),"function"==typeof e&&(EF(this,CU,e),this.addEventListener("removetrack",e))}get onchange(){return bF(this,IU)}set onchange(e){bF(this,IU)&&(this.removeEventListener("change",bF(this,IU)),EF(this,IU,void 0)),"function"==typeof e&&(EF(this,IU,e),this.addEventListener("change",e))}};RU=new WeakMap,CU=new WeakMap,IU=new WeakMap,xU=new WeakSet,DU=function(){return kU(this).trackSet};var OU=class extends Event{constructor(e,t){super(e),gF(this,"rendition"),this.rendition=t.rendition}};function PU(e){return[...kU(e).media.videoTracks].filter((e=>e.selected)).flatMap((e=>[...kU(e).renditionSet]))}var NU,FU,UU,BU=class extends EventTarget{constructor(){super(...arguments),yF(this,NU,void 0),yF(this,FU,void 0),yF(this,UU,void 0)}[Symbol.iterator](){return PU(this).values()}get length(){return PU(this).length}getRenditionById(e){var t;return null!=(t=PU(this).find((t=>`${t.id}`==`${e}`)))?t:null}get selectedIndex(){return PU(this).findIndex((e=>e.selected))}set selectedIndex(e){for(let[t,n]of PU(this).entries())n.selected=t===e}get onaddrendition(){return bF(this,NU)}set onaddrendition(e){bF(this,NU)&&(this.removeEventListener("addrendition",bF(this,NU)),EF(this,NU,void 0)),"function"==typeof e&&(EF(this,NU,e),this.addEventListener("addrendition",e))}get onremoverendition(){return bF(this,FU)}set onremoverendition(e){bF(this,FU)&&(this.removeEventListener("removerendition",bF(this,FU)),EF(this,FU,void 0)),"function"==typeof e&&(EF(this,FU,e),this.addEventListener("removerendition",e))}get onchange(){return bF(this,UU)}set onchange(e){bF(this,UU)&&(this.removeEventListener("change",bF(this,UU)),EF(this,UU,void 0)),"function"==typeof e&&(EF(this,UU,e),this.addEventListener("change",e))}};NU=new WeakMap,FU=new WeakMap,UU=new WeakMap;var $U,HU=class{constructor(){gF(this,"src"),gF(this,"id"),gF(this,"width"),gF(this,"height"),gF(this,"bitrate"),gF(this,"frameRate"),gF(this,"codec"),yF(this,$U,!1)}get selected(){return bF(this,$U)}set selected(e){bF(this,$U)!==e&&(EF(this,$U,e),function(e){let t=kU(e).media.videoRenditions;!t||kU(t).changeRequested||(kU(t).changeRequested=!0,queueMicrotask((()=>{delete kU(t).changeRequested,kU(e).track.selected&&t.dispatchEvent(new Event("change"))})))}(this))}};$U=new WeakMap;var VU,WU=class{constructor(){gF(this,"id"),gF(this,"kind"),gF(this,"label",""),gF(this,"language",""),gF(this,"sourceBuffer"),yF(this,VU,!1)}addRendition(e,t,n,i,r,s){let a=new HU;return a.src=e,a.width=t,a.height=n,a.frameRate=s,a.bitrate=r,a.codec=i,function(e,t){let n=kU(e).media.videoRenditions;kU(t).media=kU(e).media,kU(t).track=e;let i=kU(e).renditionSet;i.add(t);let r=i.size-1;r in BU.prototype||Object.defineProperty(BU.prototype,r,{get(){return PU(this)[r]}}),queueMicrotask((()=>{e.selected&&n.dispatchEvent(new OU("addrendition",{rendition:t}))}))}(this,a),a}removeRendition(e){!function(e){let t=kU(e).media.videoRenditions,n=kU(e).track;kU(n).renditionSet.delete(e),queueMicrotask((()=>{kU(e).track.selected&&t.dispatchEvent(new OU("removerendition",{rendition:e}))}))}(e)}get selected(){return bF(this,VU)}set selected(e){bF(this,VU)!==e&&(EF(this,VU,e),!0===e&&function(e){var t;let n=null!=(t=kU(e).media.videoTracks)?t:[],i=!1;for(let t of n)t!==e&&(t.selected=!1,i=!0);if(i){if(kU(n).changeRequested)return;kU(n).changeRequested=!0,queueMicrotask((()=>{delete kU(n).changeRequested,n.dispatchEvent(new Event("change"))}))}}(this))}};function GU(e){return[...kU(e).media.audioTracks].filter((e=>e.enabled)).flatMap((e=>[...kU(e).renditionSet]))}VU=new WeakMap;var KU,qU,jU,YU=class extends EventTarget{constructor(){super(...arguments),yF(this,KU,void 0),yF(this,qU,void 0),yF(this,jU,void 0)}[Symbol.iterator](){return GU(this).values()}get length(){return GU(this).length}getRenditionById(e){var t;return null!=(t=GU(this).find((t=>`${t.id}`==`${e}`)))?t:null}get selectedIndex(){return GU(this).findIndex((e=>e.selected))}set selectedIndex(e){for(let[t,n]of GU(this).entries())n.selected=t===e}get onaddrendition(){return bF(this,KU)}set onaddrendition(e){bF(this,KU)&&(this.removeEventListener("addrendition",bF(this,KU)),EF(this,KU,void 0)),"function"==typeof e&&(EF(this,KU,e),this.addEventListener("addrendition",e))}get onremoverendition(){return bF(this,qU)}set onremoverendition(e){bF(this,qU)&&(this.removeEventListener("removerendition",bF(this,qU)),EF(this,qU,void 0)),"function"==typeof e&&(EF(this,qU,e),this.addEventListener("removerendition",e))}get onchange(){return bF(this,jU)}set onchange(e){bF(this,jU)&&(this.removeEventListener("change",bF(this,jU)),EF(this,jU,void 0)),"function"==typeof e&&(EF(this,jU,e),this.addEventListener("change",e))}};KU=new WeakMap,qU=new WeakMap,jU=new WeakMap;var zU,XU=class{constructor(){gF(this,"src"),gF(this,"id"),gF(this,"bitrate"),gF(this,"codec"),yF(this,zU,!1)}get selected(){return bF(this,zU)}set selected(e){bF(this,zU)!==e&&(EF(this,zU,e),function(e){let t=kU(e).media.audioRenditions;!t||kU(t).changeRequested||(kU(t).changeRequested=!0,queueMicrotask((()=>{delete kU(t).changeRequested,kU(e).track.enabled&&t.dispatchEvent(new Event("change"))})))}(this))}};function QU(e,t){let n=e.audioTracks;kU(t).media=e,kU(t).renditionSet||(kU(t).renditionSet=new Set);let i=kU(n).trackSet;i.add(t);let r=i.size-1;r in rB.prototype||Object.defineProperty(rB.prototype,r,{get(){return[...kU(this).trackSet][r]}}),queueMicrotask((()=>{n.dispatchEvent(new AU("addtrack",{track:t}))}))}function ZU(e){var t;let n=null==(t=kU(e).media)?void 0:t.audioTracks;n&&(kU(n).trackSet.delete(e),queueMicrotask((()=>{n.dispatchEvent(new AU("removetrack",{track:e}))})))}zU=new WeakMap;var JU,eB,tB,nB,iB,rB=class extends EventTarget{constructor(){super(),yF(this,nB),yF(this,JU,void 0),yF(this,eB,void 0),yF(this,tB,void 0),kU(this).trackSet=new Set}[Symbol.iterator](){return bF(this,nB,iB).values()}get length(){return bF(this,nB,iB).size}getTrackById(e){var t;return null!=(t=[...bF(this,nB,iB)].find((t=>t.id===e)))?t:null}get onaddtrack(){return bF(this,JU)}set onaddtrack(e){bF(this,JU)&&(this.removeEventListener("addtrack",bF(this,JU)),EF(this,JU,void 0)),"function"==typeof e&&(EF(this,JU,e),this.addEventListener("addtrack",e))}get onremovetrack(){return bF(this,eB)}set onremovetrack(e){bF(this,eB)&&(this.removeEventListener("removetrack",bF(this,eB)),EF(this,eB,void 0)),"function"==typeof e&&(EF(this,eB,e),this.addEventListener("removetrack",e))}get onchange(){return bF(this,tB)}set onchange(e){bF(this,tB)&&(this.removeEventListener("change",bF(this,tB)),EF(this,tB,void 0)),"function"==typeof e&&(EF(this,tB,e),this.addEventListener("change",e))}};JU=new WeakMap,eB=new WeakMap,tB=new WeakMap,nB=new WeakSet,iB=function(){return kU(this).trackSet};var sB,aB=class{constructor(){gF(this,"id"),gF(this,"kind"),gF(this,"label",""),gF(this,"language",""),gF(this,"sourceBuffer"),yF(this,sB,!1)}addRendition(e,t,n){let i=new XU;return i.src=e,i.codec=t,i.bitrate=n,function(e,t){let n=kU(e).media.audioRenditions;kU(t).media=kU(e).media,kU(t).track=e;let i=kU(e).renditionSet;i.add(t);let r=i.size-1;r in YU.prototype||Object.defineProperty(YU.prototype,r,{get(){return GU(this)[r]}}),queueMicrotask((()=>{e.enabled&&n.dispatchEvent(new OU("addrendition",{rendition:t}))}))}(this,i),i}removeRendition(e){!function(e){let t=kU(e).media.audioRenditions,n=kU(e).track;kU(n).renditionSet.delete(e),queueMicrotask((()=>{kU(e).track.enabled&&t.dispatchEvent(new OU("removerendition",{rendition:e}))}))}(e)}get enabled(){return bF(this,sB)}set enabled(e){bF(this,sB)!==e&&(EF(this,sB,e),function(e){let t=kU(e).media.audioTracks;!t||kU(t).changeRequested||(kU(t).changeRequested=!0,queueMicrotask((()=>{delete kU(t).changeRequested,t.dispatchEvent(new Event("change"))})))}(this))}};sB=new WeakMap;var oB=cB(globalThis.HTMLMediaElement,"video"),lB=cB(globalThis.HTMLMediaElement,"audio");function dB(e){if(null==e||!e.prototype)return e;let t=cB(e,"video");(!t||`${t}`.includes("[native code]"))&&Object.defineProperty(e.prototype,"videoTracks",{get(){return function(e){var t;let n=kU(e).videoTracks;if(!n&&(n=new MU,kU(e).videoTracks=n,oB)){let i=oB.call(null!=(t=e.nativeEl)?t:e);for(let t of i)wU(e,t);i.addEventListener("change",(()=>{n.dispatchEvent(new Event("change"))})),i.addEventListener("addtrack",(t=>{if([...n].some((e=>e instanceof WU)))for(let e of i)LU(e);else wU(e,t.track)})),i.addEventListener("removetrack",(e=>{LU(e.track)}))}return n}(this)}});let n=cB(e,"audio");(!n||`${n}`.includes("[native code]"))&&Object.defineProperty(e.prototype,"audioTracks",{get(){return function(e){var t;let n=kU(e).audioTracks;if(!n&&(n=new rB,kU(e).audioTracks=n,lB)){let i=lB.call(null!=(t=e.nativeEl)?t:e);for(let t of i)QU(e,t);i.addEventListener("change",(()=>{n.dispatchEvent(new Event("change"))})),i.addEventListener("addtrack",(t=>{if([...n].some((e=>e instanceof aB)))for(let e of i)ZU(e);else QU(e,t.track)})),i.addEventListener("removetrack",(e=>{ZU(e.track)}))}return n}(this)}}),"addVideoTrack"in e.prototype||(e.prototype.addVideoTrack=function(e,t="",n=""){let i=new WU;return i.kind=e,i.label=t,i.language=n,wU(this,i),i}),"removeVideoTrack"in e.prototype||(e.prototype.removeVideoTrack=LU),"addAudioTrack"in e.prototype||(e.prototype.addAudioTrack=function(e,t="",n=""){let i=new aB;return i.kind=e,i.label=t,i.language=n,QU(this,i),i}),"removeAudioTrack"in e.prototype||(e.prototype.removeAudioTrack=ZU),"videoRenditions"in e.prototype||Object.defineProperty(e.prototype,"videoRenditions",{get(){return i(this)}});let i=e=>{let t=kU(e).videoRenditions;return t||(t=new BU,kU(t).media=e,kU(e).videoRenditions=t),t};"audioRenditions"in e.prototype||Object.defineProperty(e.prototype,"audioRenditions",{get(){return r(this)}});let r=e=>{let t=kU(e).audioRenditions;return t||(t=new YU,kU(t).media=e,kU(e).audioRenditions=t),t};return e}function cB(e,t){var n;if(null!=e&&e.prototype)return null==(n=Object.getOwnPropertyDescriptor(e.prototype,`${t}Tracks`))?void 0:n.get}DF.push("castchange","entercast","leavecast");var uB,hB,mB,pB,fB,gB,vB,bB,yB,EB,TB={BEACON_COLLECTION_DOMAIN:"beacon-collection-domain",CUSTOM_DOMAIN:"custom-domain",DEBUG:"debug",DISABLE_TRACKING:"disable-tracking",DISABLE_COOKIES:"disable-cookies",ENV_KEY:"env-key",MAX_RESOLUTION:"max-resolution",MIN_RESOLUTION:"min-resolution",RENDITION_ORDER:"rendition-order",METADATA_URL:"metadata-url",PLAYBACK_ID:"playback-id",PLAYER_SOFTWARE_NAME:"player-software-name",PLAYER_SOFTWARE_VERSION:"player-software-version",PREFER_CMCD:"prefer-cmcd",PREFER_PLAYBACK:"prefer-playback",START_TIME:"start-time",STREAM_TYPE:"stream-type",TARGET_LIVE_WINDOW:"target-live-window",LIVE_EDGE_OFFSET:"live-edge-offset",TYPE:"type"},_B=Object.values(TB),AB=xF,SB=class extends FF{constructor(){super(),yF(this,yB),yF(this,uB,void 0),yF(this,hB,void 0),yF(this,mB,void 0),yF(this,pB,{}),yF(this,fB,void 0),yF(this,gB,void 0),yF(this,vB,void 0),yF(this,bB,void 0),EF(this,mB,AR.utils.now())}static get observedAttributes(){var e;return[..._B,...null!=(e=FF.observedAttributes)?e:[]]}get preferCmcd(){var e;return null!=(e=this.getAttribute(TB.PREFER_CMCD))?e:void 0}set preferCmcd(e){e!==this.preferCmcd&&(e?gN.includes(e)?this.setAttribute(TB.PREFER_CMCD,e):console.warn(`Invalid value for preferCmcd. Must be one of ${gN.join()}`):this.removeAttribute(TB.PREFER_CMCD))}get playerInitTime(){return bF(this,mB)}get playerSoftwareName(){var e;return null!=(e=bF(this,vB))?e:"mux-video"}set playerSoftwareName(e){EF(this,vB,e)}get playerSoftwareVersion(){var e;return null!=(e=bF(this,gB))?e:AB}set playerSoftwareVersion(e){EF(this,gB,e)}get _hls(){var e;return null==(e=bF(this,uB))?void 0:e.engine}get mux(){var e;return null==(e=this.nativeEl)?void 0:e.mux}get error(){var e;return null!=(e=(e=>{var t;return null==(t=WN.get(e))?void 0:t.error})(this.nativeEl))?e:null}get errorTranslator(){return bF(this,bB)}set errorTranslator(e){EF(this,bB,e)}get src(){return this.getAttribute("src")}set src(e){e!==this.src&&(null==e?this.removeAttribute("src"):this.setAttribute("src",e))}get type(){var e;return null!=(e=this.getAttribute(TB.TYPE))?e:void 0}set type(e){e!==this.type&&(e?this.setAttribute(TB.TYPE,e):this.removeAttribute(TB.TYPE))}get autoplay(){let e=this.getAttribute("autoplay");return null!==e&&(""===e||e)}set autoplay(e){e!==this.autoplay&&(e?this.setAttribute("autoplay","string"==typeof e?e:""):this.removeAttribute("autoplay"))}get preload(){let e=this.getAttribute("preload");return""===e?"auto":["none","metadata","auto"].includes(e)?e:super.preload}set preload(e){e!=this.getAttribute("preload")&&(["","none","metadata","auto"].includes(e)?this.setAttribute("preload",e):this.removeAttribute("preload"))}get debug(){return null!=this.getAttribute(TB.DEBUG)}set debug(e){e!==this.debug&&(e?this.setAttribute(TB.DEBUG,""):this.removeAttribute(TB.DEBUG))}get disableTracking(){return this.hasAttribute(TB.DISABLE_TRACKING)}set disableTracking(e){e!==this.disableTracking&&this.toggleAttribute(TB.DISABLE_TRACKING,!!e)}get disableCookies(){return this.hasAttribute(TB.DISABLE_COOKIES)}set disableCookies(e){e!==this.disableCookies&&(e?this.setAttribute(TB.DISABLE_COOKIES,""):this.removeAttribute(TB.DISABLE_COOKIES))}get startTime(){let e=this.getAttribute(TB.START_TIME);if(null==e)return;let t=+e;return Number.isNaN(t)?void 0:t}set startTime(e){e!==this.startTime&&(null==e?this.removeAttribute(TB.START_TIME):this.setAttribute(TB.START_TIME,`${e}`))}get playbackId(){var e;return null!=(e=this.getAttribute(TB.PLAYBACK_ID))?e:void 0}set playbackId(e){e!==this.playbackId&&(e?this.setAttribute(TB.PLAYBACK_ID,e):this.removeAttribute(TB.PLAYBACK_ID))}get maxResolution(){var e;return null!=(e=this.getAttribute(TB.MAX_RESOLUTION))?e:void 0}set maxResolution(e){e!==this.maxResolution&&(e?this.setAttribute(TB.MAX_RESOLUTION,e):this.removeAttribute(TB.MAX_RESOLUTION))}get minResolution(){var e;return null!=(e=this.getAttribute(TB.MIN_RESOLUTION))?e:void 0}set minResolution(e){e!==this.minResolution&&(e?this.setAttribute(TB.MIN_RESOLUTION,e):this.removeAttribute(TB.MIN_RESOLUTION))}get renditionOrder(){var e;return null!=(e=this.getAttribute(TB.RENDITION_ORDER))?e:void 0}set renditionOrder(e){e!==this.renditionOrder&&(e?this.setAttribute(TB.RENDITION_ORDER,e):this.removeAttribute(TB.RENDITION_ORDER))}get customDomain(){var e;return null!=(e=this.getAttribute(TB.CUSTOM_DOMAIN))?e:void 0}set customDomain(e){e!==this.customDomain&&(e?this.setAttribute(TB.CUSTOM_DOMAIN,e):this.removeAttribute(TB.CUSTOM_DOMAIN))}get ended(){return tF(this.nativeEl,this._hls)}get envKey(){var e;return null!=(e=this.getAttribute(TB.ENV_KEY))?e:void 0}set envKey(e){e!==this.envKey&&(e?this.setAttribute(TB.ENV_KEY,e):this.removeAttribute(TB.ENV_KEY))}get beaconCollectionDomain(){var e;return null!=(e=this.getAttribute(TB.BEACON_COLLECTION_DOMAIN))?e:void 0}set beaconCollectionDomain(e){e!==this.beaconCollectionDomain&&(e?this.setAttribute(TB.BEACON_COLLECTION_DOMAIN,e):this.removeAttribute(TB.BEACON_COLLECTION_DOMAIN))}get streamType(){var e;return null!=(e=this.getAttribute(TB.STREAM_TYPE))?e:XN(this.nativeEl)}set streamType(e){e!==this.streamType&&(e?this.setAttribute(TB.STREAM_TYPE,e):this.removeAttribute(TB.STREAM_TYPE))}get targetLiveWindow(){return this.hasAttribute(TB.TARGET_LIVE_WINDOW)?+this.getAttribute(TB.TARGET_LIVE_WINDOW):(e=>{var t,n;return null!=(n=null==(t=WN.get(e))?void 0:t.targetLiveWindow)?n:Number.NaN})(this.nativeEl)}set targetLiveWindow(e){e!=this.targetLiveWindow&&(null==e?this.removeAttribute(TB.TARGET_LIVE_WINDOW):this.setAttribute(TB.TARGET_LIVE_WINDOW,""+ +e))}get liveEdgeStart(){var e,t;if(this.hasAttribute(TB.LIVE_EDGE_OFFSET)){let{liveEdgeOffset:n}=this,i=null!=(e=this.nativeEl.seekable.end(0))?e:0,r=null!=(t=this.nativeEl.seekable.start(0))?t:0;return Math.max(r,i-n)}return(e=>{var t;let n=null==(t=WN.get(e))?void 0:t.liveEdgeStartOffset;if("number"!=typeof n)return Number.NaN;let i=QN(e);return i.length?i.end(i.length-1)-n:Number.NaN})(this.nativeEl)}get liveEdgeOffset(){if(this.hasAttribute(TB.LIVE_EDGE_OFFSET))return+this.getAttribute(TB.LIVE_EDGE_OFFSET)}set liveEdgeOffset(e){e!=this.targetLiveWindow&&(null==e?this.removeAttribute(TB.LIVE_EDGE_OFFSET):this.setAttribute(TB.LIVE_EDGE_OFFSET,""+ +e))}get seekable(){return QN(this.nativeEl)}async addCuePoints(e){return DN(this.nativeEl,e)}get activeCuePoint(){return ON(this.nativeEl)}get cuePoints(){return function(e,t={label:CN}){let n=xN(e,t);return null!=n&&n.cues?Array.from(n.cues,(e=>MN(e))):[]}(this.nativeEl)}getStartDate(){return function(e,t){if(t){let n=t.playingDate;if(null!=n)return new Date(n.getTime()-1e3*e.currentTime)}return"function"==typeof e.getStartDate?e.getStartDate():new Date(NaN)}(this.nativeEl,this._hls)}get currentPdt(){return function(e,t){if(t&&t.playingDate)return t.playingDate;if("function"==typeof e.getStartDate){let t=e.getStartDate();return new Date(t.getTime()+1e3*e.currentTime)}return new Date(NaN)}(this.nativeEl,this._hls)}get preferPlayback(){let e=this.getAttribute(TB.PREFER_PLAYBACK);if(e===mN||e===pN)return e}set preferPlayback(e){e!==this.preferPlayback&&(e===mN||e===pN?this.setAttribute(TB.PREFER_PLAYBACK,e):this.removeAttribute(TB.PREFER_PLAYBACK))}get metadata(){return{...this.getAttributeNames().filter((e=>e.startsWith("metadata-")&&![TB.METADATA_URL].includes(e))).reduce(((e,t)=>{let n=this.getAttribute(t);return null!=n&&(e[t.replace(/^metadata-/,"").replace(/-/g,"_")]=n),e}),{}),...bF(this,pB)}}set metadata(e){EF(this,pB,null!=e?e:{}),this.mux&&this.mux.emit("hb",bF(this,pB))}get _hlsConfig(){return bF(this,fB)}set _hlsConfig(e){EF(this,fB,e)}load(){EF(this,uB,nF(this,this.nativeEl,bF(this,uB)))}unload(){iF(this.nativeEl,bF(this,uB)),EF(this,uB,void 0)}attributeChangedCallback(e,t,n){var i,r;switch(FF.observedAttributes.includes(e)&&!["src","autoplay","preload"].includes(e)&&super.attributeChangedCallback(e,t,n),e){case TB.PLAYER_SOFTWARE_NAME:this.playerSoftwareName=null!=n?n:void 0;break;case TB.PLAYER_SOFTWARE_VERSION:this.playerSoftwareVersion=null!=n?n:void 0;break;case"src":{let e=!!t,i=!!n;!e&&i?TF(this,yB,EB).call(this):e&&!i?this.unload():e&&i&&(this.unload(),TF(this,yB,EB).call(this));break}case"autoplay":if(n===t)break;null==(i=bF(this,uB))||i.setAutoplay(this.autoplay);break;case"preload":if(n===t)break;null==(r=bF(this,uB))||r.setPreload(n);break;case TB.PLAYBACK_ID:this.src=YN(this);break;case TB.DEBUG:{let e=this.debug;this.mux&&console.info("Cannot toggle debug mode of mux data after initialization. Make sure you set all metadata to override before setting the src."),this._hls&&(this._hls.config.debug=e);break}case TB.METADATA_URL:n&&fetch(n).then((e=>e.json())).then((e=>this.metadata=e)).catch((()=>console.error(`Unable to load or parse metadata JSON from metadata-url ${n}!`)));break;case TB.STREAM_TYPE:(null==n||n!==t)&&this.dispatchEvent(new CustomEvent("streamtypechange",{composed:!0,bubbles:!0}));break;case TB.TARGET_LIVE_WINDOW:(null==n||n!==t)&&this.dispatchEvent(new CustomEvent("targetlivewindowchange",{composed:!0,bubbles:!0,detail:this.targetLiveWindow}))}}connectedCallback(){var e;null==(e=super.connectedCallback)||e.call(this),this.nativeEl&&this.src&&!bF(this,uB)&&TF(this,yB,EB).call(this)}disconnectedCallback(){this.unload()}};uB=new WeakMap,hB=new WeakMap,mB=new WeakMap,pB=new WeakMap,fB=new WeakMap,gB=new WeakMap,vB=new WeakMap,bB=new WeakMap,yB=new WeakSet,EB=async function(){bF(this,hB)||(await EF(this,hB,Promise.resolve()),EF(this,hB,null),this.load())};var kB=class extends(_U(dB(SB))){};IF.customElements.get("mux-video")||(IF.customElements.define("mux-video",kB),IF.MuxVideoElement=kB);var wB,LB,RB,CB,IB,xB,DB,MB,OB,PB,NB,FB=kB,UB=Object.defineProperty,BB=(e,t,n)=>(((e,t,n)=>{t in e?UB(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n),$B=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},HB=(e,t,n)=>($B(e,t,"read from private field"),n?n.call(e):t.get(e)),VB=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},WB=(e,t,n,i)=>($B(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n);const GB={processCallback(e,t,n){if(n)for(const[e,i]of t)if(e in n){const t=n[e];"boolean"==typeof t&&i instanceof ZB&&"boolean"==typeof i.element[i.attributeName]?i.booleanValue=t:"function"==typeof t&&i instanceof ZB?i.element[i.attributeName]=t:i.value=t}}};class KB extends Cm.DocumentFragment{constructor(e,t,n=GB){var i;super(),VB(this,wB,void 0),VB(this,LB,void 0),this.append(e.content.cloneNode(!0)),WB(this,wB,qB(this)),WB(this,LB,n),null==(i=n.createCallback)||i.call(n,this,HB(this,wB),t),n.processCallback(this,HB(this,wB),t)}update(e){HB(this,LB).processCallback(this,HB(this,wB),e)}}wB=new WeakMap,LB=new WeakMap;const qB=(e,t=[])=>{let n,i;for(let r of e.attributes||[])if(r.value.includes("{{")){const s=new QB;for([n,i]of YB(r.value))if(n){const n=new ZB(e,r.name,r.namespaceURI);s.append(n),t.push([i,n])}else s.append(i);r.value=s.toString()}for(let r of e.childNodes)if(1!==r.nodeType||r instanceof HTMLTemplateElement){if(1===r.nodeType||r.data.includes("{{")){const s=[];if(r.data)for([n,i]of YB(r.data))if(n){const n=new JB(e);s.push(n),t.push([i,n])}else s.push(new Text(i));else if(r instanceof HTMLTemplateElement){const n=new e$(e,r);s.push(n),t.push([n.expression,n])}r.replaceWith(...s.flatMap((e=>e.replacementNodes||[e])))}}else qB(r,t);return t},jB={},YB=e=>{let t,n="",i=0,r=jB[e],s=0;if(r)return r;for(r=[];t=e[s];s++)"{"===t&&"{"===e[s+1]&&"\\"!==e[s-1]&&e[s+2]&&1==++i?(n&&r.push([0,n]),n="",s++):"}"!==t||"}"!==e[s+1]||"\\"===e[s-1]||--i?n+=t||"":(r.push([1,n.trim()]),n="",s++);return n&&r.push([0,(i>0?"{{":"")+n]),jB[e]=r};class zB{get value(){return""}set value(e){}toString(){return this.value}}const XB=new WeakMap;class QB{constructor(){VB(this,RB,[])}[Symbol.iterator](){return HB(this,RB).values()}get length(){return HB(this,RB).length}item(e){return HB(this,RB)[e]}append(...e){for(const t of e)t instanceof ZB&&XB.set(t,this),HB(this,RB).push(t)}toString(){return HB(this,RB).join("")}}RB=new WeakMap;class ZB extends zB{constructor(e,t,n){super(),VB(this,MB),VB(this,CB,""),VB(this,IB,void 0),VB(this,xB,void 0),VB(this,DB,void 0),WB(this,IB,e),WB(this,xB,t),WB(this,DB,n)}get attributeName(){return HB(this,xB)}get attributeNamespace(){return HB(this,DB)}get element(){return HB(this,IB)}get value(){return HB(this,CB)}set value(e){HB(this,CB)!==e&&(WB(this,CB,e),HB(this,MB,OB)&&1!==HB(this,MB,OB).length?HB(this,IB).setAttributeNS(HB(this,DB),HB(this,xB),HB(this,MB,OB)):null==e?HB(this,IB).removeAttributeNS(HB(this,DB),HB(this,xB)):HB(this,IB).setAttributeNS(HB(this,DB),HB(this,xB),e))}get booleanValue(){return HB(this,IB).hasAttributeNS(HB(this,DB),HB(this,xB))}set booleanValue(e){if(HB(this,MB,OB)&&1!==HB(this,MB,OB).length)throw new DOMException("Value is not fully templatized");this.value=e?"":null}}CB=new WeakMap,IB=new WeakMap,xB=new WeakMap,DB=new WeakMap,MB=new WeakSet,OB=function(){return XB.get(this)};class JB extends zB{constructor(e,t){super(),VB(this,PB,void 0),VB(this,NB,void 0),WB(this,PB,e),WB(this,NB,t?[...t]:[new Text])}get replacementNodes(){return HB(this,NB)}get parentNode(){return HB(this,PB)}get nextSibling(){return HB(this,NB)[HB(this,NB).length-1].nextSibling}get previousSibling(){return HB(this,NB)[0].previousSibling}get value(){return HB(this,NB).map((e=>e.textContent)).join("")}set value(e){this.replace(e)}replace(...e){const t=e.flat().flatMap((e=>null==e?[new Text]:e.forEach?[...e]:11===e.nodeType?[...e.childNodes]:e.nodeType?[e]:[new Text(e)]));t.length||t.push(new Text),WB(this,NB,function(e,t,n,i=null){let r,s,a,o=0,l=n.length,d=t.length;for(;o<l&&o<d&&t[o]==n[o];)o++;for(;o<l&&o<d&&n[l-1]==t[d-1];)i=n[(--d,--l)];if(o==d)for(;o<l;)e.insertBefore(n[o++],i);if(o==l)for(;o<d;)e.removeChild(t[o++]);else{for(r=t[o];o<l;)a=n[o++],s=r?r.nextSibling:i,r==a?r=s:o<l&&n[o]==s?(e.replaceChild(a,r),r=s):e.insertBefore(a,r);for(;r!=i;)s=r.nextSibling,e.removeChild(r),r=s}return n}(HB(this,NB)[0].parentNode,HB(this,NB),t,this.nextSibling))}}PB=new WeakMap,NB=new WeakMap;class e$ extends JB{constructor(e,t){let n=t.getAttribute("directive")||t.getAttribute("type"),i=t.getAttribute("expression")||t.getAttribute(n)||"";i.startsWith("{{")&&(i=i.trim().slice(2,-2).trim()),super(e),BB(this,"directive"),this.expression=i,this.template=t,this.directive=n}}const t$={string:e=>String(e)};class n${constructor(e){this.template=e,this.state=void 0}}const i$=new WeakMap,r$=new WeakMap,s$={partial:(e,t)=>{t[e.expression]=new n$(e.template)},if:(e,t)=>{var n;if(d$(e.expression,t))if(i$.get(e)!==e.template){i$.set(e,e.template);const n=new KB(e.template,t,o$);e.replace(n),r$.set(e,n)}else null==(n=r$.get(e))||n.update(t);else e.replace(""),i$.delete(e),r$.delete(e)}},a$=Object.keys(s$),o$={processCallback(e,t,n){var i,r;if(n)for(const[e,s]of t){if(s instanceof e$){if(!s.directive){const e=a$.find((e=>s.template.hasAttribute(e)));e&&(s.directive=e,s.expression=s.template.getAttribute(e))}null==(i=s$[s.directive])||i.call(s$,s,n);continue}let t=d$(e,n);t instanceof n$?i$.get(s)!==t.template?(i$.set(s,t.template),t=new KB(t.template,t.state,o$),s.value=t,r$.set(s,t)):null==(r=r$.get(s))||r.update(t.state):t?(s instanceof ZB&&s.attributeName.startsWith("aria-")&&(t=String(t)),s instanceof ZB?"boolean"==typeof t?s.booleanValue=t:"function"==typeof t?s.element[s.attributeName]=t:s.value=t:(s.value=t,i$.delete(s),r$.delete(s))):s instanceof ZB?s.value=void 0:(s.value=void 0,i$.delete(s),r$.delete(s))}}},l$={"!":e=>!e,"!!":e=>!!e,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,">":(e,t)=>e>t,">=":(e,t)=>e>=t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,"??":(e,t)=>null!=e?e:t,"|":(e,t)=>{var n;return null==(n=t$[t])?void 0:n.call(t$,e)}};function d$(e,t={}){var n,i,r,s,a,o,l;const d=function(e){return function(e,t){let n,i,r,s=[];for(;e;){r=null,n=e.length;for(let s in t)i=t[s].exec(e),i&&i.index<n&&(r={token:i[0],type:s,matches:i.slice(1)},n=i.index);n&&s.push({token:e.substr(0,n),type:void 0}),r&&s.push(r),e=e.substr(n+(r?r.token.length:0))}return s}(e,{boolean:/true|false/,number:/-?\d+\.?\d*/,string:/(["'])((?:\\.|[^\\])*?)\1/,operator:/[!=><][=!]?|\?\?|\|/,ws:/\s+/,param:/[$a-z_][$\w]*/i}).filter((({type:e})=>"ws"!==e))}(e);if(0===d.length||d.some((({type:e})=>!e)))return c$(e);if(">"===(null==(n=d[0])?void 0:n.token)){const n=t[null==(i=d[1])?void 0:i.token];if(!n)return c$(e);const o={...t};n.state=o;const l=d.slice(2);for(let e=0;e<l.length;e+=3){const n=null==(r=l[e])?void 0:r.token,i=null==(s=l[e+1])?void 0:s.token,d=null==(a=l[e+2])?void 0:a.token;n&&"="===i&&(o[n]=h$(d,t))}return n}if(1===d.length)return u$(d[0])?h$(d[0].token,t):c$(e);if(2===d.length){const n=null==(o=d[0])?void 0:o.token,i=l$[n];if(!i||!u$(d[1]))return c$(e);return i(h$(d[1].token,t))}if(3===d.length){const n=null==(l=d[1])?void 0:l.token,i=l$[n];if(!i||!u$(d[0])||!u$(d[2]))return c$(e);const r=h$(d[0].token,t);if("|"===n)return i(r,d[2].token);return i(r,h$(d[2].token,t))}}function c$(e){return console.warn(`Warning: invalid expression \`${e}\``),!1}function u$({type:e}){return["number","boolean","string","param"].includes(e)}function h$(e,t){const n=e[0],i=e.slice(-1);return"true"===e||"false"===e?"true"===e:n===i&&["'",'"'].includes(n)?e.slice(1,-1):bm(e)?parseFloat(e):t[e]}var m$,p$,f$,g$,v$,b$,y$,E$=Object.defineProperty,T$=(e,t,n)=>(((e,t,n)=>{t in e?E$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n),_$=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},A$=(e,t,n)=>(_$(e,t,"read from private field"),n?n.call(e):t.get(e)),S$=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},k$=(e,t,n,i)=>(_$(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),w$=(e,t,n)=>(_$(e,t,"access private method"),n);const L$={mediatargetlivewindow:"targetlivewindow",mediastreamtype:"streamtype"},R$=Im.createElement("template");R$.innerHTML="\n  <style>\n    :host {\n      display: inline-block;\n      line-height: 0;\n    }\n\n    media-controller {\n      width: 100%;\n      height: 100%;\n    }\n\n    media-controller:not([mediasubtitleslist]) media-captions-selectmenu,\n    media-captions-button:not([mediasubtitleslist]),\n    media-rendition-selectmenu[mediarenditionunavailable],\n    media-audio-track-selectmenu[mediaaudiotrackunavailable],\n    media-volume-range[mediavolumeunavailable],\n    media-airplay-button[mediaairplayunavailable],\n    media-fullscreen-button[mediafullscreenunavailable],\n    media-cast-button[mediacastunavailable],\n    media-pip-button[mediapipunavailable] {\n      display: none;\n    }\n  </style>\n";class C$ extends Cm.HTMLElement{constructor(){super(),S$(this,g$),S$(this,b$),T$(this,"renderRoot"),T$(this,"renderer"),S$(this,m$,void 0),S$(this,p$,void 0),S$(this,f$,void 0),this.shadowRoot?this.renderRoot=this.shadowRoot:(this.renderRoot=this.attachShadow({mode:"open"}),this.createRenderer());const e=new MutationObserver((e=>{var t;this.mediaController&&!(null==(t=this.mediaController)?void 0:t.breakpointsComputed)||e.some((e=>{const t=e.target;return t===this||"media-controller"===t.localName&&(!!L$[e.attributeName]||!!e.attributeName.startsWith("breakpoint"))}))&&this.render()}));e.observe(this,{attributes:!0}),e.observe(this.renderRoot,{attributes:!0,subtree:!0}),this.addEventListener(Zh.BREAKPOINTS_COMPUTED,this.render),w$(this,g$,v$).call(this,"template")}get mediaController(){return this.renderRoot.querySelector("media-controller")}get template(){var e;return null!=(e=A$(this,m$))?e:this.constructor.template}set template(e){k$(this,f$,null),k$(this,m$,e),this.createRenderer()}get props(){var e,t,n;const i=[...Array.from(null!=(t=null==(e=this.mediaController)?void 0:e.attributes)?t:[]).filter((({name:e})=>L$[e]||e.startsWith("breakpoint"))),...Array.from(this.attributes)],r={};for(let e of i){const t=null!=(n=L$[e.name])?n:vm(e.name);let{value:i}=e;null!=i?(bm(i)&&(i=parseFloat(i)),r[t]=""===i||i):r[t]=!1}return r}attributeChangedCallback(e,t,n){"template"===e&&t!=n&&w$(this,b$,y$).call(this)}connectedCallback(){w$(this,b$,y$).call(this)}createRenderer(){this.template&&this.template!==A$(this,p$)&&(k$(this,p$,this.template),this.renderer=new KB(this.template,this.props,this.constructor.processor),this.renderRoot.textContent="",this.renderRoot.append(R$.content.cloneNode(!0),this.renderer))}render(){var e;null==(e=this.renderer)||e.update(this.props)}}m$=new WeakMap,p$=new WeakMap,f$=new WeakMap,g$=new WeakSet,v$=function(e){if(Object.prototype.hasOwnProperty.call(this,e)){const t=this[e];delete this[e],this[e]=t}},b$=new WeakSet,y$=function(){var e;const t=this.getAttribute("template");if(!t||t===A$(this,f$))return;const n=this.getRootNode(),i=null==(e=null==n?void 0:n.getElementById)?void 0:e.call(n,t);if(i)return k$(this,f$,t),k$(this,m$,i),void this.createRenderer();(function(e){if(!/^(\/|\.\/|https?:\/\/)/.test(e))return!1;const t=/^https?:\/\//.test(e)?void 0:location.origin;try{new URL(e,t)}catch(e){return!1}return!0})(t)&&(k$(this,f$,t),async function(e){const t=await fetch(e);if(200!==t.status)throw new Error(`Failed to load resource: the server responded with a status of ${t.status}`);return t.text()}(t).then((e=>{const t=Im.createElement("template");t.innerHTML=e,k$(this,m$,t),this.createRenderer()})).catch(console.error))},T$(C$,"template"),T$(C$,"observedAttributes",["template"]),T$(C$,"processor",o$),Cm.customElements.get("media-theme")||Cm.customElements.define("media-theme",C$);var I$=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},x$=(e,t,n)=>(I$(e,t,"read from private field"),n?n.call(e):t.get(e)),D$=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},M$=(e,t,n,i)=>(I$(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),O$=(e,t,n)=>(I$(e,t,"access private method"),n),P$=class{addEventListener(){}removeEventListener(){}dispatchEvent(e){return!0}};if("undefined"==typeof DocumentFragment){class e extends P${}globalThis.DocumentFragment=e}var N$,F$=class extends P${},U$={get(e){},define(e,t,n){},upgrade(e){},whenDefined:e=>Promise.resolve(F$)};N$=new WeakMap;var B$={document:{createElement:function(e,t){return new F$}},DocumentFragment,customElements:U$,CustomEvent:class{constructor(e,t={}){D$(this,N$,void 0),M$(this,N$,null==t?void 0:t.detail)}get detail(){return x$(this,N$)}initCustomEvent(){}},EventTarget:P$,HTMLElement:F$,HTMLVideoElement:class extends P${}},$$="undefined"==typeof window||void 0===globalThis.customElements,H$=$$?B$:globalThis,V$=$$?B$.document:globalThis.document,W$={code:"en"},G$="en";function K$(e,t=!0){var n,i;let r=t&&null!=(i=null==(n=W$)?void 0:n[e])?i:e,s=t?W$.code:G$;return new q$(r,s)}var q$=class{constructor(e,t=(e=>null!=(e=W$.code)?e:G$)()){this.message=e,this.locale=t}format(e){return this.message.replace(/\{(\w+)\}/g,((t,n)=>{var i;return null!=(i=e[n])?i:""}))}toString(){return this.message}};function j$(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Y$(e){return e.replace(/[-_]([a-z])/g,((e,t)=>t.toUpperCase()))}function z$(e){if(null==e)return;let t=+e;return Number.isNaN(t)?void 0:t}function X$(e){let t=function(e){let t={};for(let n in e)null!=e[n]&&(t[n]=e[n]);return new URLSearchParams(t)}(e).toString();return t?"?"+t:""}function Q$(e){let t=(null!=e?e:"").split(".")[1];if(!t)return{};let n=t.replace(/-/g,"+").replace(/_/g,"/"),i=decodeURIComponent(atob(n).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(i)}var Z$=(e,t)=>!(!e||!t)&&(!!e.contains(t)||Z$(e,t.getRootNode().host)),J$="mux.com",eH=(()=>{try{return"2.5.0"}catch{}return"UNKNOWN"})(),tH=()=>eH,nH=e=>{if(e){if([hN.LIVE,hN.ON_DEMAND].includes(e))return e;if(null!=e&&e.includes("live"))return hN.LIVE}},iH={crossorigin:"crossOrigin",playsinline:"playsInline"};function rH(e){var t;return null!=(t=iH[e])?t:Y$(e)}var sH,aH,oH,lH=class{constructor(e,t){D$(this,sH,void 0),D$(this,aH,void 0),D$(this,oH,[]),M$(this,sH,e),M$(this,aH,t)}[Symbol.iterator](){return x$(this,oH).values()}get length(){return x$(this,oH).length}get value(){var e;return null!=(e=x$(this,oH).join(" "))?e:""}set value(e){var t;e!==this.value&&(M$(this,oH,[]),this.add(...null!=(t=null==e?void 0:e.split(" "))?t:[]))}toString(){return this.value}item(e){return x$(this,oH)[e]}values(){return x$(this,oH).values()}keys(){return x$(this,oH).keys()}forEach(e){x$(this,oH).forEach(e)}add(...e){var t,n;e.forEach((e=>{this.contains(e)||x$(this,oH).push(e)})),(""!==this.value||null!=(t=x$(this,sH))&&t.hasAttribute(`${x$(this,aH)}`))&&(null==(n=x$(this,sH))||n.setAttribute(`${x$(this,aH)}`,`${this.value}`))}remove(...e){var t;e.forEach((e=>{x$(this,oH).splice(x$(this,oH).indexOf(e),1)})),null==(t=x$(this,sH))||t.setAttribute(`${x$(this,aH)}`,`${this.value}`)}contains(e){return x$(this,oH).includes(e)}toggle(e,t){return void 0!==t?t?(this.add(e),!0):(this.remove(e),!1):this.contains(e)?(this.remove(e),!1):(this.add(e),!0)}replace(e,t){this.remove(e),this.add(t)}};sH=new WeakMap,aH=new WeakMap,oH=new WeakMap;var dH=`[mux-player ${tH()}]`;function cH(...e){console.warn(dH,...e)}function uH(...e){console.error(dH,...e)}function hH(e){var t;let n=null!=(t=e.message)?t:"";if(e.context&&(n+=` ${e.context}`),e.file){let t="https://github.com/muxinc/elements/blob/main/errors/";n+=` ${K$("Read more: ")}\n${t}${e.file}`}cH(n)}var mH={AUTOPLAY:"autoplay",CROSSORIGIN:"crossorigin",LOOP:"loop",MUTED:"muted",PLAYSINLINE:"playsinline",PRELOAD:"preload"},pH={VOLUME:"volume",PLAYBACKRATE:"playbackrate",MUTED:"muted"},fH=Object.freeze({length:0,start(e){let t=e>>>0;if(t>=this.length)throw new DOMException(`Failed to execute 'start' on 'TimeRanges': The index provided (${t}) is greater than or equal to the maximum bound (${this.length}).`);return 0},end(e){let t=e>>>0;if(t>=this.length)throw new DOMException(`Failed to execute 'end' on 'TimeRanges': The index provided (${t}) is greater than or equal to the maximum bound (${this.length}).`);return 0}}),gH=DF.filter((e=>"error"!==e)),vH=Object.values(mH).filter((e=>![mH.PLAYSINLINE].includes(e))),bH=Object.values(pH);var yH=class extends H$.HTMLElement{static get observedAttributes(){return[...vH,...bH]}constructor(){super(),this.querySelectorAll(":scope > track").forEach((e=>{var t;null==(t=this.media)||t.append(e.cloneNode())}));new MutationObserver((e=>{for(let t of e)"childList"===t.type&&(t.removedNodes.forEach((e=>{var t,n;let i=null==(t=this.media)?void 0:t.querySelector(`track[src="${e.src}"]`);i&&(null==(n=this.media)||n.removeChild(i))})),t.addedNodes.forEach((e=>{var t;null==(t=this.media)||t.append(e.cloneNode())})))})).observe(this,{childList:!0,subtree:!0})}attributeChangedCallback(e,t,n){var i,r;switch(e){case pH.MUTED:return void(this.media&&(this.media.muted=null!=n,this.media.defaultMuted=null!=n));case pH.VOLUME:{let e=null!=(i=z$(n))?i:1;return void(this.media&&(this.media.volume=e))}case pH.PLAYBACKRATE:{let e=null!=(r=z$(n))?r:1;return void(this.media&&(this.media.playbackRate=e,this.media.defaultPlaybackRate=e))}}}play(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.play())?t:Promise.reject()}pause(){var e;null==(e=this.media)||e.pause()}requestCast(e){var t;return null==(t=this.media)?void 0:t.requestCast(e)}get media(){var e;return null==(e=this.shadowRoot)?void 0:e.querySelector("mux-video")}get audioTracks(){return this.media.audioTracks}get videoTracks(){return this.media.videoTracks}get audioRenditions(){return this.media.audioRenditions}get videoRenditions(){return this.media.videoRenditions}get paused(){var e,t;return null==(t=null==(e=this.media)?void 0:e.paused)||t}get duration(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.duration)?t:NaN}get ended(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.ended)&&t}get buffered(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.buffered)?t:fH}get seekable(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.seekable)?t:fH}get readyState(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.readyState)?t:0}get videoWidth(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.videoWidth)?t:0}get videoHeight(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.videoHeight)?t:0}get currentTime(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.currentTime)?t:0}set currentTime(e){this.media&&(this.media.currentTime=Number(e))}get volume(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.volume)?t:1}set volume(e){this.media&&(this.media.volume=Number(e))}get playbackRate(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.playbackRate)?t:1}set playbackRate(e){this.media&&(this.media.playbackRate=Number(e))}get defaultPlaybackRate(){var e;return null!=(e=z$(this.getAttribute(pH.PLAYBACKRATE)))?e:1}set defaultPlaybackRate(e){null!=e?this.setAttribute(pH.PLAYBACKRATE,`${e}`):this.removeAttribute(pH.PLAYBACKRATE)}get crossOrigin(){return EH(this,mH.CROSSORIGIN)}set crossOrigin(e){this.setAttribute(mH.CROSSORIGIN,`${e}`)}get autoplay(){return null!=EH(this,mH.AUTOPLAY)}set autoplay(e){e?this.setAttribute(mH.AUTOPLAY,"string"==typeof e?e:""):this.removeAttribute(mH.AUTOPLAY)}get loop(){return null!=EH(this,mH.LOOP)}set loop(e){e?this.setAttribute(mH.LOOP,""):this.removeAttribute(mH.LOOP)}get muted(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.muted)&&t}set muted(e){this.media&&(this.media.muted=!!e)}get defaultMuted(){return null!=EH(this,mH.MUTED)}set defaultMuted(e){e?this.setAttribute(mH.MUTED,""):this.removeAttribute(mH.MUTED)}get playsInline(){return null!=EH(this,mH.PLAYSINLINE)}set playsInline(e){uH("playsInline is set to true by default and is not currently supported as a setter.")}get preload(){return this.media?this.media.preload:this.getAttribute("preload")}set preload(e){["","none","metadata","auto"].includes(e)?this.setAttribute(mH.PRELOAD,e):this.removeAttribute(mH.PRELOAD)}};function EH(e,t){return e.media?e.media.getAttribute(t):e.getAttribute(t)}var TH=yH,_H="\n  :host {\n    z-index: 100;\n    display: var(--media-dialog-display, flex);\n    justify-content: center;\n    align-items: center;\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 0;\n    left: 0;\n    box-sizing: border-box;\n    color: #fff;\n    line-height: 18px;\n    font-family: Arial, sans-serif;\n    padding: var(--media-dialog-backdrop-padding, 0);\n    background: var(--media-dialog-backdrop-background,\n      linear-gradient(to bottom, rgba(20, 20, 30, 0.7) 50%, rgba(20, 20, 30, 0.9))\n    );\n    /* Needs to use !important to prevent overwrite of media-chrome */\n    transition: var(--media-dialog-transition-open, visibility .2s, opacity .2s) !important;\n    transform: var(--media-dialog-transform-open, none) !important;\n    visibility: visible !important;\n    opacity: 1 !important;\n    pointer-events: auto !important;\n  }\n\n  :host(:not([open])) {\n    /* Needs to use !important to prevent overwrite of media-chrome */\n    transition: var(--media-dialog-transition-close, visibility .1s, opacity .1s) !important;\n    transform: var(--media-dialog-transform-close, none) !important;\n    visibility: hidden !important;\n    opacity: 0 !important;\n    pointer-events: none !important;\n  }\n\n  :focus-visible {\n    box-shadow: 0 0 0 2px rgba(27, 127, 204, 0.9);\n  }\n\n  .dialog {\n    position: relative;\n    box-sizing: border-box;\n    background: var(--media-dialog-background, none);\n    padding: var(--media-dialog-padding, 10px);\n    width: min(320px, 100%);\n    word-wrap: break-word;\n    max-height: 100%;\n    overflow: auto;\n    text-align: center;\n    line-height: 1.4;\n  }\n",AH=V$.createElement("template");AH.innerHTML=`\n  <style>\n    ${_H}\n  </style>\n\n  <div class="dialog">\n    <slot></slot>\n  </div>\n`;var SH=class extends H$.HTMLElement{constructor(){var e;super(),this.attachShadow({mode:"open"}),null==(e=this.shadowRoot)||e.appendChild(this.constructor.template.content.cloneNode(!0))}show(){this.setAttribute("open",""),this.dispatchEvent(new CustomEvent("open",{composed:!0,bubbles:!0})),kH(this)}close(){this.hasAttribute("open")&&(this.removeAttribute("open"),this.dispatchEvent(new CustomEvent("close",{composed:!0,bubbles:!0})),function(e){e._previouslyFocusedElement instanceof HTMLElement&&e._previouslyFocusedElement.focus()}(this))}attributeChangedCallback(e,t,n){"open"===e&&t!==n&&(null!=n?this.show():this.close())}connectedCallback(){this.hasAttribute("role")||this.setAttribute("role","dialog"),this.hasAttribute("open")&&kH(this)}};function kH(e){let t=new CustomEvent("initfocus",{composed:!0,bubbles:!0,cancelable:!0});if(e.dispatchEvent(t),t.defaultPrevented)return;let n=e.querySelector("[autofocus]:not([disabled])");!n&&e.tabIndex>=0&&(n=e),n||(n=wH(e.shadowRoot)),e._previouslyFocusedElement=V$.activeElement,V$.activeElement instanceof HTMLElement&&V$.activeElement.blur(),e.addEventListener("transitionend",(()=>{n instanceof HTMLElement&&n.focus({preventScroll:!0})}),{once:!0})}function wH(e){let t=["button","input","keygen","select","textarea"].map((function(e){return e+":not([disabled])"}));t.push('[tabindex]:not([disabled]):not([tabindex=""])');let n=null==e?void 0:e.querySelector(t.join(", "));if(!n&&"attachShadow"in Element.prototype){let t=(null==e?void 0:e.querySelectorAll("*"))||[];for(let e=0;e<t.length&&!(t[e].tagName&&t[e].shadowRoot&&(n=wH(t[e].shadowRoot),n));e++);}return n}SH.styles=_H,SH.template=AH,SH.observedAttributes=["open"],H$.customElements.get("media-dialog")||(H$.customElements.define("media-dialog",SH),H$.MediaDialog=SH);var LH=SH,RH=V$.createElement("template");RH.innerHTML=`\n  <style>\n    ${LH.styles}\n\n    .close {\n      background: none;\n      color: inherit;\n      border: none;\n      padding: 0;\n      font: inherit;\n      cursor: pointer;\n      outline: inherit;\n      width: 28px;\n      height: 28px;\n      position: absolute;\n      top: 1rem;\n      right: 1rem;\n    }\n  </style>\n\n  <div class="dialog">\n    <slot></slot>\n  </div>\n\n  <slot name="close">\n    <button class="close" tabindex="0">\n      <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">\n        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />\n      </svg>\n    </button>\n  </slot>\n`;var CH=class extends LH{constructor(){var e,t;super(),null==(t=null==(e=this.shadowRoot)?void 0:e.querySelector(".close"))||t.addEventListener("click",(()=>{this.close()}))}};CH.template=RH,H$.customElements.get("mxp-dialog")||(H$.customElements.define("mxp-dialog",CH),H$.MxpDialog=CH);var IH=new WeakMap,xH=class e{constructor(e,t){this.element=e,this.type=t,this.element.addEventListener(this.type,this);let n=IH.get(this.element);n&&n.set(this.type,this)}set(e){if("function"==typeof e)this.handleEvent=e.bind(this.element);else if("object"==typeof e&&"function"==typeof e.handleEvent)this.handleEvent=e.handleEvent.bind(e);else{this.element.removeEventListener(this.type,this);let e=IH.get(this.element);e&&e.delete(this.type)}}static for(t){IH.has(t.element)||IH.set(t.element,new Map);let n=t.attributeName.slice(2),i=IH.get(t.element);return i&&i.has(n)?i.get(n):new e(t.element,n)}};function DH(e,t){(function(e,t){if(e instanceof ZB&&t instanceof Element){let n=e.element;return n[e.attributeName]!==t&&(e.element.removeAttributeNS(e.attributeNamespace,e.attributeName),n[e.attributeName]=t),!0}return!1})(e,t)||function(e,t){if("boolean"==typeof t&&e instanceof ZB){let n=e.attributeNamespace;return t!==e.element.hasAttributeNS(n,e.attributeName)&&(e.booleanValue=t),!0}return!1}(e,t)||function(e,t){return!!(e instanceof ZB&&e.attributeName.startsWith("on"))&&(xH.for(e).set(t),e.element.removeAttributeNS(e.attributeNamespace,e.attributeName),!0)}(e,t)||function(e,t){return!1===t&&e instanceof JB&&(e.replace(""),!0)}(e,t)||function(e,t){return t instanceof NH&&e instanceof JB&&(t.renderInto(e),!0)}(e,t)||function(e,t){return t instanceof DocumentFragment&&e instanceof JB&&(t.childNodes.length&&e.replace(...t.childNodes),!0)}(e,t)||function(e,t){if(e instanceof ZB){let n=e.attributeNamespace,i=e.element.getAttributeNS(n,e.attributeName);return String(t)!==i&&(e.value=String(t)),!0}e.value=String(t)}(e,t)}var MH=new Map,OH=new WeakMap,PH=new WeakMap,NH=class{constructor(e,t,n){this.strings=e,this.values=t,this.processor=n,this.stringsKey=this.strings.join("")}get template(){if(MH.has(this.stringsKey))return MH.get(this.stringsKey);{let e=V$.createElement("template"),t=this.strings.length-1;return e.innerHTML=this.strings.reduce(((e,n,i)=>e+n+(i<t?`{{ ${i} }}`:"")),""),MH.set(this.stringsKey,e),e}}renderInto(e){var t;let n=this.template;if(OH.get(e)!==n){OH.set(e,n);let t=new KB(n,this.values,this.processor);return PH.set(e,t),void(e instanceof JB?e.replace(...t.children):e.appendChild(t))}let i=PH.get(e);null==(t=null==i?void 0:i.update)||t.call(i,this.values)}},FH={processCallback(e,t,n){var i;if(n)for(let[e,r]of t)if(e in n){DH(r,null!=(i=n[e])?i:"")}}};function UH(e,...t){return new NH(e,t,FH)}var BH=Object.values({TOP:"top",CENTER:"center",BOTTOM:"bottom",LAYER:"layer",MEDIA_LAYER:"media-layer",POSTER_LAYER:"poster-layer",VERTICAL_LAYER:"vertical-layer",CENTERED_LAYER:"centered-layer",GESTURE_LAYER:"gesture-layer",CONTROLLER_LAYER:"controller",BUTTON:"button",RANGE:"range",DISPLAY:"display",CONTROL_BAR:"control-bar",SELECTMENU:"selectmenu",LISTBOX:"listbox",OPTION:"option",POSTER:"poster",LIVE:"live",PLAY:"play",PRE_PLAY:"pre-play",SEEK_BACKWARD:"seek-backward",SEEK_FORWARD:"seek-forward",MUTE:"mute",CAPTIONS:"captions",AIRPLAY:"airplay",PIP:"pip",FULLSCREEN:"fullscreen",CAST:"cast",PLAYBACK_RATE:"playback-rate",VOLUME:"volume",TIME:"time",TITLE:"title",AUDIO_TRACK:"audio-track",RENDITION:"rendition"}).join(", "),$H=e=>{var t,n,i,r,s,a,o,l,d,c,u,h,m,p,f,g,v,b,y,E,T,_,A,S,k,w,L,R,C,I,x,D,M,O,P,N;return UH`
  <media-theme
    template="${e.themeTemplate||!1}"
    defaultstreamtype="${null!=(t=e.defaultStreamType)&&t}"
    hotkeys="${(e=>{let t=e.hotKeys?`${e.hotKeys}`:"";return"live"===nH(e.streamType)&&(t+=" noarrowleft noarrowright"),t})(e)||!1}"
    nohotkeys="${e.noHotKeys||!e.hasSrc||e.isDialogOpen||!1}"
    noautoseektolive="${!(null==(n=e.streamType)||!n.includes(hN.LIVE))&&0!==e.targetLiveWindow}"
    novolumepref="${e.novolumepref||!1}"
    disabled="${!e.hasSrc||e.isDialogOpen}"
    audio="${null!=(i=e.audio)&&i}"
    style="${null!=(r=function(e){let t="";return Object.entries(e).forEach((([e,n])=>{null!=n&&(t+=`${j$(e)}: ${n}; `)})),t?t.trim():void 0}({"--media-primary-color":e.primaryColor,"--media-secondary-color":e.secondaryColor,"--media-accent-color":e.accentColor}))&&r}"
    defaultsubtitles="${!e.defaultHiddenCaptions}"
    forwardseekoffset="${null!=(s=e.forwardSeekOffset)&&s}"
    backwardseekoffset="${null!=(a=e.backwardSeekOffset)&&a}"
    playbackrates="${null!=(o=e.playbackRates)&&o}"
    defaultshowremainingtime="${null!=(l=e.defaultShowRemainingTime)&&l}"
    defaultduration="${null!=(d=e.defaultDuration)&&d}"
    hideduration="${null!=(c=e.hideDuration)&&c}"
    title="${null!=(u=e.title)&&u}"
    exportparts="${BH}"
  >
    <mux-video
      slot="media"
      target-live-window="${null!=(h=e.targetLiveWindow)&&h}"
      stream-type="${null!=(m=nH(e.streamType))&&m}"
      crossorigin="${null!=(p=e.crossOrigin)?p:""}"
      playsinline
      autoplay="${null!=(f=e.autoplay)&&f}"
      muted="${null!=(g=e.muted)&&g}"
      loop="${null!=(v=e.loop)&&v}"
      preload="${null!=(b=e.preload)&&b}"
      debug="${null!=(y=e.debug)&&y}"
      prefer-cmcd="${null!=(E=e.preferCmcd)&&E}"
      disable-tracking="${null!=(T=e.disableTracking)&&T}"
      disable-cookies="${null!=(_=e.disableCookies)&&_}"
      prefer-playback="${null!=(A=e.preferPlayback)&&A}"
      start-time="${null!=e.startTime&&e.startTime}"
      beacon-collection-domain="${null!=(S=e.beaconCollectionDomain)&&S}"
      player-software-name="${null!=(k=e.playerSoftwareName)&&k}"
      player-software-version="${null!=(w=e.playerSoftwareVersion)&&w}"
      env-key="${null!=(L=e.envKey)&&L}"
      custom-domain="${null!=(R=e.customDomain)&&R}"
      src="${e.src?e.src:!!e.playbackId&&YN(e)}"
      cast-src="${e.src?e.src:!!e.playbackId&&YN(e)}"
      exportparts="video"
    >
      ${e.storyboard?UH`<track label="thumbnails" default kind="metadata" src="${e.storyboard}" />`:UH``}
    </mux-video>
    <slot name="poster" slot="poster">
      <media-poster-image
        part="poster"
        exportparts="poster, img"
        src="${""!==e.poster&&(null!=(C=e.poster)&&C)}"
        placeholdersrc="${null!=(I=e.placeholder)&&I}"
      ></media-poster-image>
    </slot>
    <mxp-dialog
      no-auto-hide
      open="${null!=(x=e.isDialogOpen)&&x}"
      onclose="${e.onCloseErrorDialog}"
      oninitfocus="${e.onInitFocusDialog}"
    >
      ${null!=(D=e.dialog)&&D.title?UH`<h3>${e.dialog.title}</h3>`:UH``}
      <p>
        ${null==(M=e.dialog)?void 0:M.message}
        ${null!=(O=e.dialog)&&O.linkUrl?UH`<a
              href="${e.dialog.linkUrl}"
              target="_blank"
              rel="external noopener"
              aria-label="${null!=(P=e.dialog.linkText)?P:""} ${K$("(opens in a new window)")}"
              >${null!=(N=e.dialog.linkText)?N:e.dialog.linkUrl}</a
            >`:UH``}
      </p>
    </mxp-dialog>
  </media-theme>
`};function HH(e,t,n,i,r){var s,a,o;let l={},d={};switch(e.code){case dN.MEDIA_ERR_NETWORK:switch(l.title=K$("Network Error",r),l.message=e.message,null==(s=e.data)?void 0:s.response.code){case 412:l.title=K$("Video is not currently available",r),l.message=K$("The live stream or video file are not yet ready.",r),d.message=K$("This playback-id may belong to a live stream that is not currently active or an asset that is not ready.",r),d.file="412-not-playable.md";break;case 404:l.title=K$("Video does not exist",r),l.message="",d.message=K$("This playback-id does not exist. You may have used an Asset ID or an ID from a different resource.",r),d.file="404-not-found.md";break;case 403:{if(l.title=K$("Invalid playback URL",r),l.message=K$("The video URL or playback-token are formatted with incorrect or incomplete information.",r),d.message=K$("403 error trying to access this playback URL. If this is a signed URL, you might need to provide a playback-token.",r),d.file="missing-signed-tokens.md",!i)break;let{exp:e,aud:t,sub:s}=Q$(i),a=s!==n,o="v"!==t,c={timeStyle:"medium",dateStyle:"medium"};if(Date.now()>1e3*e){l.title=K$("Video URL has expired",r),l.message=K$("The video’s secured playback-token has expired.",r),d.message=K$("The video’s secured playback-token has expired.",r),d.context=K$("Expired at: {expiredDate}. Current time: {currentDate}.",r).format({expiredDate:new Intl.DateTimeFormat(W$.code,c).format(1e3*e),currentDate:new Intl.DateTimeFormat(W$.code,c).format(Date.now())}),d.file="403-expired-token.md";break}if(a){l.title=K$("Video URL is formatted incorrectly",r),l.message=K$("The video’s playback ID does not match the one encoded in the playback-token.",r),d.message=K$("The video’s playback ID does not match the one encoded in the playback-token.",r),d.context=K$("Specified playback ID: {playbackId} and the playback ID encoded in the playback-token: {tokenPlaybackId}",r).format({playbackId:n,tokenPlaybackId:s}),d.file="403-playback-id-mismatch.md";break}if(o){l.title=K$("Video URL is formatted incorrectly",r),l.message=K$("The playback-token is formatted with incorrect information.",r),d.message=K$("The playback-token is formatted with incorrect information.",r),d.context=K$("The playback-token has an incorrect aud value: {tokenType}. aud value should be v.",r).format({tokenType:t}),d.file="403-incorrect-aud-value.md";break}d.message=K$("403 error trying to access this playback URL. If this is a signed playback ID, the token might not have been generated correctly.",r),d.file="403-malformatted-token.md";break}}break;case dN.MEDIA_ERR_DECODE:{let{message:t}=e;l={title:K$("Media Error",r),message:t},d.file="media-decode-error.md";break}case dN.MEDIA_ERR_SRC_NOT_SUPPORTED:{let s=null==(o=null==(a=e.data)?void 0:a.response)?void 0:o.code;if(s>=400&&s<500){e.code=dN.MEDIA_ERR_NETWORK,e.data={response:{code:s}},({dialog:l,devlog:d}=HH(e,t,n,i));break}l={title:K$("Source Not Supported",r),message:e.message},d.file="media-src-not-supported.md";break}default:l={title:K$("Error",r),message:e.message}}return t&&(l={title:K$("Your device appears to be offline",r),message:K$("Check your internet connection and try reloading this video.",r)}),{dialog:l,devlog:d}}var VH=V$.createElement("template");"innerHTML"in VH&&(VH.innerHTML='<template id="media-theme-gerwig">\n  <style>\n    @keyframes pre-play-hide {\n      0% {\n        transform: scale(1);\n        opacity: 1;\n      }\n\n      30% {\n        transform: scale(0.7);\n      }\n\n      100% {\n        transform: scale(1.5);\n        opacity: 0;\n      }\n    }\n\n    :host {\n      --_primary-color: var(--media-primary-color, #fff);\n      --_secondary-color: var(--media-secondary-color, transparent);\n      --_accent-color: var(--media-accent-color, #fa50b5);\n      --_text-color: var(--media-text-color, #000);\n\n      --media-icon-color: var(--_primary-color);\n      --media-control-background: var(--_secondary-color);\n      --media-control-hover-background: var(--_accent-color);\n      --media-time-buffered-color: rgba(255, 255, 255, 0.4);\n      --media-preview-time-text-shadow: none;\n      --media-control-height: 14px;\n      --media-control-padding: 6px;\n\n      color: var(--_primary-color);\n      display: inline-block;\n      width: 100%;\n      height: 100%;\n    }\n\n    :host([audio]) {\n      --_secondary-color: var(--media-secondary-color, black);\n      --media-preview-time-text-shadow: none;\n    }\n\n    :host([audio]) ::slotted([slot=\'media\']) {\n      height: 0px;\n    }\n\n    :host([audio]) media-loading-indicator {\n      display: none;\n    }\n\n    :host([audio]) media-controller {\n      background: transparent;\n    }\n\n    :host([audio]) media-controller::part(vertical-layer) {\n      background: transparent;\n    }\n\n    :host([audio]) media-control-bar {\n      width: 100%;\n      background-color: var(--media-control-background);\n    }\n\n    /*\n     * 0.433s is the transition duration for VTT Regions.\n     * Borrowed here, so the captions don\'t move too fast.\n     */\n    media-controller ::slotted([slot=\'media\']) {\n      --media-webkit-text-track-transform: translateY(0) scale(0.98);\n      --media-webkit-text-track-transition: transform 0.433s ease-out 0.3s;\n    }\n    media-controller:is([mediapaused], :not([userinactive])) ::slotted([slot=\'media\']) {\n      --media-webkit-text-track-transform: translateY(-50px) scale(0.98);\n      --media-webkit-text-track-transition: transform 0.15s ease;\n    }\n\n    media-time-range {\n      --media-box-padding-left: 6px;\n      --media-box-padding-right: 6px;\n      --media-range-bar-color: var(--_accent-color);\n      --media-time-range-buffered-color: var(--_primary-color);\n      --media-range-track-color: transparent;\n      --media-range-track-background: rgba(255, 255, 255, 0.4);\n      --media-range-thumb-background: radial-gradient(\n        circle,\n        #000 0%,\n        #000 25%,\n        var(--_accent-color) 25%,\n        var(--_accent-color)\n      );\n      --media-range-thumb-width: 12px;\n      --media-range-thumb-height: 12px;\n      --media-range-thumb-transform: scale(0);\n      --media-range-thumb-transition: transform 0.3s;\n      --media-range-thumb-opacity: 1;\n      --media-preview-background: var(--_primary-color);\n      --media-box-arrow-background: var(--_primary-color);\n      --media-preview-thumbnail-border: 5px solid var(--_primary-color);\n      --media-preview-border-radius: 5px;\n      --media-text-color: var(--_text-color);\n      --media-control-hover-background: transparent;\n      color: var(--_accent-color);\n      padding: 0 6px;\n    }\n\n    :host([audio]) media-time-range {\n      --media-preview-time-padding: 1.5px 6px;\n      --media-preview-box-margin: 0 0 -5px;\n    }\n\n    media-time-range:hover {\n      --media-range-thumb-transform: scale(1);\n    }\n\n    media-preview-thumbnail {\n      border-bottom-width: 0;\n    }\n\n    [part~=\'listbox\'] {\n      border-radius: 2px;\n      border: 1px solid rgba(0, 0, 0, 0.1);\n      bottom: calc(100% + 16px);\n      padding: 2.5px 10px;\n    }\n\n    [part~=\'listbox\']::part(indicator) {\n      fill: var(--_accent-color);\n    }\n\n    [part~=\'listbox\']::part(option) {\n      box-sizing: border-box;\n      display: flex;\n      align-items: center;\n      padding: 6px 10px;\n      min-height: 34px;\n    }\n\n    [part~=\'listbox\']::part(option-selected) {\n      font-weight: 700;\n    }\n\n    media-captions-selectmenu,\n    media-rendition-selectmenu,\n    media-audio-track-selectmenu,\n    media-playback-rate-listbox[part~=\'listbox\'] {\n      --media-listbox-background: var(--_primary-color);\n      --media-option-selected-background: transparent;\n      --media-option-hover-background: transparent;\n      --media-option-hover-outline: var(--_accent-color) solid 1px;\n      --media-text-color: var(--_text-color);\n    }\n\n    /* The icon is a circle so make it 16px high instead of 14px for more balance. */\n    media-audio-track-selectmenu {\n      --media-control-padding: 5px;\n      --media-control-height: 16px;\n    }\n\n    media-playback-rate-button {\n      --media-control-padding: 6px 3px;\n      min-width: 4.4ch;\n    }\n\n    media-playback-rate-listbox[part~=\'listbox\'] {\n      --media-listbox-layout: row;\n      --media-option-selected-background: var(--_accent-color);\n      margin-right: 6px;\n      padding: 0;\n    }\n\n    media-playback-rate-listbox[part~=\'listbox\']::part(option) {\n      padding: 6px 4px;\n    }\n\n    media-playback-rate-listbox[part~=\'listbox\']::part(option-selected) {\n      color: #fff;\n    }\n\n    :host(:not([audio])) media-time-range {\n      /* Adding px is required here for calc() */\n      --media-range-padding: 0px;\n      background: transparent;\n      z-index: 10;\n      height: 10px;\n      bottom: -3px;\n      width: 100%;\n    }\n\n    media-control-bar :is([role=\'button\'], [role=\'switch\'], button) {\n      line-height: 0;\n    }\n\n    media-control-bar :is([part*=\'button\'], [part*=\'range\'], [part*=\'display\']) {\n      border-radius: 3px;\n    }\n\n    .spacer {\n      flex-grow: 1;\n      background-color: var(--media-control-background, rgba(20, 20, 30, 0.7));\n    }\n\n    media-control-bar[slot~=\'top-chrome\'] {\n      min-height: 42px;\n      pointer-events: none;\n    }\n\n    media-control-bar {\n      --gradient-steps: hsl(0 0% 0% / 0) 0%, hsl(0 0% 0% / 0.013) 8.1%, hsl(0 0% 0% / 0.049) 15.5%,\n        hsl(0 0% 0% / 0.104) 22.5%, hsl(0 0% 0% / 0.175) 29%, hsl(0 0% 0% / 0.259) 35.3%, hsl(0 0% 0% / 0.352) 41.2%,\n        hsl(0 0% 0% / 0.45) 47.1%, hsl(0 0% 0% / 0.55) 52.9%, hsl(0 0% 0% / 0.648) 58.8%, hsl(0 0% 0% / 0.741) 64.7%,\n        hsl(0 0% 0% / 0.825) 71%, hsl(0 0% 0% / 0.896) 77.5%, hsl(0 0% 0% / 0.951) 84.5%, hsl(0 0% 0% / 0.987) 91.9%,\n        hsl(0 0% 0%) 100%;\n    }\n\n    :host([title]:not([audio])) media-control-bar[slot=\'top-chrome\']::before {\n      content: \'\';\n      position: absolute;\n      width: 100%;\n      padding-bottom: min(100px, 25%);\n      background: linear-gradient(to top, var(--gradient-steps));\n      opacity: 0.8;\n      pointer-events: none;\n    }\n\n    :host(:not([audio])) media-control-bar[part~=\'bottom\']::before {\n      content: \'\';\n      position: absolute;\n      width: 100%;\n      bottom: 0;\n      left: 0;\n      padding-bottom: min(100px, 25%);\n      background: linear-gradient(to bottom, var(--gradient-steps));\n      opacity: 0.8;\n      z-index: 1;\n      pointer-events: none;\n    }\n\n    media-control-bar[part~=\'bottom\'] > * {\n      z-index: 2;\n    }\n\n    media-control-bar[part~=\'bottom\'] {\n      padding: 6px 6px;\n    }\n\n    media-control-bar[slot~=\'top-chrome\'] > * {\n      --media-control-background: transparent;\n      --media-control-hover-background: transparent;\n      position: relative;\n    }\n\n    media-controller::part(vertical-layer) {\n      transition: background-color 1s;\n    }\n\n    media-controller:is([mediapaused], :not([userinactive]))::part(vertical-layer) {\n      background-color: var(--controls-backdrop-color, var(--controls, transparent));\n      transition: background-color 0.25s;\n    }\n\n    .center-controls {\n      --media-button-icon-width: 100%;\n      --media-button-icon-height: auto;\n      pointer-events: none;\n      width: 100%;\n      display: flex;\n      flex-flow: row;\n      align-items: center;\n      justify-content: center;\n      filter: drop-shadow(0 0 2px rgb(0 0 0 / 0.25)) drop-shadow(0 0 6px rgb(0 0 0 / 0.25));\n      paint-order: stroke;\n      stroke: rgba(102, 102, 102, 1);\n      stroke-width: 0.3px;\n      text-shadow: 0 0 2px rgb(0 0 0 / 0.25), 0 0 6px rgb(0 0 0 / 0.25);\n    }\n\n    .center-controls media-play-button {\n      --media-control-background: transparent;\n      --media-control-hover-background: transparent;\n      --media-control-padding: 0;\n      width: 40px;\n    }\n\n    [breakpointsm] .center-controls media-play-button {\n      width: 90px;\n      height: 90px;\n      border-radius: 50%;\n      transition: background 0.4s;\n      padding: 24px;\n      --media-control-background: #000;\n      --media-control-hover-background: var(--_accent-color);\n    }\n\n    .center-controls media-seek-backward-button,\n    .center-controls media-seek-forward-button {\n      --media-control-background: transparent;\n      --media-control-hover-background: transparent;\n      padding: 0;\n      margin: 0 20px;\n      width: max(33px, min(8%, 40px));\n    }\n\n    [breakpointsm]:not([audio]) .center-controls.pre-playback {\n      display: grid;\n      align-items: initial;\n      justify-content: initial;\n      height: 100%;\n      overflow: hidden;\n    }\n\n    [breakpointsm]:not([audio]) .center-controls.pre-playback media-play-button {\n      place-self: var(--_pre-playback-place, center);\n      grid-area: 1 / 1;\n      margin: 16px;\n    }\n\n    /* Show and hide controls or pre-playback state */\n\n    [breakpointsm]:is([mediahasplayed], :not([mediapaused])):not([audio])\n      .center-controls.pre-playback\n      media-play-button {\n      animation: 0.3s linear forwards pre-play-hide;\n    }\n\n    .autoplay-unmute {\n      --media-control-hover-background: transparent;\n      width: 100%;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      filter: drop-shadow(0 0 2px rgb(0 0 0 / 0.25)) drop-shadow(0 0 6px rgb(0 0 0 / 0.25));\n    }\n\n    .autoplay-unmute-btn {\n      --media-control-height: 16px;\n      border-radius: 8px;\n      background: #000;\n      color: var(--_primary-color);\n      display: flex;\n      align-items: center;\n      padding: 8px 16px;\n      font-size: 18px;\n      font-weight: 500;\n      cursor: pointer;\n    }\n\n    .autoplay-unmute-btn:hover {\n      background: var(--_accent-color);\n    }\n\n    [breakpointsm] .autoplay-unmute-btn {\n      --media-control-height: 30px;\n      padding: 14px 24px;\n      font-size: 26px;\n    }\n\n    .autoplay-unmute-btn svg {\n      margin: 0 6px 0 0;\n    }\n\n    [breakpointsm] .autoplay-unmute-btn svg {\n      margin: 0 10px 0 0;\n    }\n\n    media-controller:not([audio]):not([mediahasplayed]) *:is(media-control-bar, media-time-range) {\n      display: none;\n    }\n\n    media-loading-indicator {\n      --media-loading-icon-width: 100%;\n      --media-button-icon-height: auto;\n      display: var(--media-control-display, var(--media-loading-indicator-display, flex));\n      pointer-events: none;\n      position: absolute;\n      width: min(15%, 150px);\n      flex-flow: row;\n      align-items: center;\n      justify-content: center;\n    }\n\n    /* Intentionally don\'t target the div for transition but the children\n     of the div. Prevents messing with media-chrome\'s autohide feature. */\n    media-loading-indicator + div * {\n      transition: opacity 0.15s;\n      opacity: 1;\n    }\n\n    media-loading-indicator[medialoading]:not([mediapaused]) ~ div > * {\n      opacity: 0;\n      transition-delay: 400ms;\n    }\n\n    media-volume-range {\n      width: min(100%, 100px);\n      --media-range-padding-left: 10px;\n      --media-range-padding-right: 10px;\n      --media-range-thumb-width: 12px;\n      --media-range-thumb-height: 12px;\n      --media-range-thumb-background: radial-gradient(\n        circle,\n        #000 0%,\n        #000 25%,\n        var(--_primary-color) 25%,\n        var(--_primary-color)\n      );\n      --media-control-hover-background: none;\n    }\n\n    media-time-display {\n      white-space: nowrap;\n    }\n\n    /* Generic style for explicitly disabled controls */\n    media-control-bar[part~=\'bottom\'] [disabled],\n    media-control-bar[part~=\'bottom\'] [aria-disabled=\'true\'] {\n      opacity: 60%;\n      cursor: not-allowed;\n    }\n\n    media-text-display {\n      --media-font-size: 16px;\n      --media-control-padding: 14px;\n      font-weight: 500;\n    }\n\n    media-play-button.animated *:is(g, path) {\n      transition: all 0.3s;\n    }\n\n    media-play-button.animated[mediapaused] .pause-icon-pt1 {\n      opacity: 0;\n    }\n\n    media-play-button.animated[mediapaused] .pause-icon-pt2 {\n      transform-origin: center center;\n      transform: scaleY(0);\n    }\n\n    media-play-button.animated[mediapaused] .play-icon {\n      clip-path: inset(0 0 0 0);\n    }\n\n    media-play-button.animated:not([mediapaused]) .play-icon {\n      clip-path: inset(0 0 0 100%);\n    }\n\n    media-seek-forward-button,\n    media-seek-backward-button {\n      --media-font-weight: 400;\n    }\n\n    .mute-icon {\n      display: inline-block;\n    }\n\n    .mute-icon :is(path, g) {\n      transition: opacity 0.5s;\n    }\n\n    .muted {\n      opacity: 0;\n    }\n\n    media-mute-button[mediavolumelevel=\'low\'] :is(.volume-medium, .volume-high),\n    media-mute-button[mediavolumelevel=\'medium\'] :is(.volume-high) {\n      opacity: 0;\n    }\n\n    media-mute-button[mediavolumelevel=\'off\'] .unmuted {\n      opacity: 0;\n    }\n\n    media-mute-button[mediavolumelevel=\'off\'] .muted {\n      opacity: 1;\n    }\n\n    /**\n     * Our defaults for these buttons are to hide them at small sizes\n     * users can override this with CSS\n     */\n    media-controller:not([breakpointsm]):not([audio]) {\n      --bottom-play-button: none;\n      --bottom-seek-backward-button: none;\n      --bottom-seek-forward-button: none;\n      --bottom-time-display: none;\n      --bottom-playback-rate-selectmenu: none;\n      --bottom-pip-button: none;\n    }\n  </style>\n\n  <template partial="TitleDisplay">\n    <template if="title">\n      <media-text-display part="top title display" class="title-display">{{title}}</media-text-display>\n    </template>\n  </template>\n\n  <template partial="PlayButton">\n    <media-play-button\n      part="{{section ?? \'bottom\'}} play button"\n      disabled="{{disabled}}"\n      aria-disabled="{{disabled}}"\n      class="animated"\n    >\n      <svg aria-hidden="true" viewBox="0 0 18 14" slot="icon">\n        <g class="play-icon">\n          <path\n            d="M15.5987 6.2911L3.45577 0.110898C2.83667 -0.204202 2.06287 0.189698 2.06287 0.819798V13.1802C2.06287 13.8103 2.83667 14.2042 3.45577 13.8891L15.5987 7.7089C16.2178 7.3938 16.2178 6.6061 15.5987 6.2911Z"\n          />\n        </g>\n        <g class="pause-icon">\n          <path\n            class="pause-icon-pt1"\n            d="M5.90709 0H2.96889C2.46857 0 2.06299 0.405585 2.06299 0.9059V13.0941C2.06299 13.5944 2.46857 14 2.96889 14H5.90709C6.4074 14 6.81299 13.5944 6.81299 13.0941V0.9059C6.81299 0.405585 6.4074 0 5.90709 0Z"\n          />\n          <path\n            class="pause-icon-pt2"\n            d="M15.1571 0H12.2189C11.7186 0 11.313 0.405585 11.313 0.9059V13.0941C11.313 13.5944 11.7186 14 12.2189 14H15.1571C15.6574 14 16.063 13.5944 16.063 13.0941V0.9059C16.063 0.405585 15.6574 0 15.1571 0Z"\n          />\n        </g>\n      </svg>\n    </media-play-button>\n  </template>\n\n  <template partial="PrePlayButton">\n    <media-play-button\n      part="{{section ?? \'center\'}} play button pre-play"\n      disabled="{{disabled}}"\n      aria-disabled="{{disabled}}"\n    >\n      <svg aria-hidden="true" viewBox="0 0 18 14" slot="icon" style="transform: translate(3px, 0)">\n        <path\n          d="M15.5987 6.2911L3.45577 0.110898C2.83667 -0.204202 2.06287 0.189698 2.06287 0.819798V13.1802C2.06287 13.8103 2.83667 14.2042 3.45577 13.8891L15.5987 7.7089C16.2178 7.3938 16.2178 6.6061 15.5987 6.2911Z"\n        />\n      </svg>\n    </media-play-button>\n  </template>\n\n  <template partial="SeekBackwardButton">\n    <media-seek-backward-button\n      seekoffset="{{backwardseekoffset}}"\n      part="{{section ?? \'bottom\'}} seek-backward button"\n      disabled="{{disabled}}"\n      aria-disabled="{{disabled}}"\n    >\n      <svg viewBox="0 0 22 14" aria-hidden="true" slot="icon">\n        <path\n          d="M3.65 2.07888L0.0864 6.7279C-0.0288 6.87812 -0.0288 7.12188 0.0864 7.2721L3.65 11.9211C3.7792 12.0896 4 11.9703 4 11.7321V2.26787C4 2.02968 3.7792 1.9104 3.65 2.07888Z"\n        />\n        <text transform="translate(6 12)" style="font-size: 14px; font-family: \'ArialMT\', \'Arial\'">\n          {{backwardseekoffset}}\n        </text>\n      </svg>\n    </media-seek-backward-button>\n  </template>\n\n  <template partial="SeekForwardButton">\n    <media-seek-forward-button\n      seekoffset="{{forwardseekoffset}}"\n      part="{{section ?? \'bottom\'}} seek-forward button"\n      disabled="{{disabled}}"\n      aria-disabled="{{disabled}}"\n    >\n      <svg viewBox="0 0 22 14" aria-hidden="true" slot="icon">\n        <g>\n          <text transform="translate(-1 12)" style="font-size: 14px; font-family: \'ArialMT\', \'Arial\'">\n            {{forwardseekoffset}}\n          </text>\n          <path\n            d="M18.35 11.9211L21.9136 7.2721C22.0288 7.12188 22.0288 6.87812 21.9136 6.7279L18.35 2.07888C18.2208 1.91041 18 2.02968 18 2.26787V11.7321C18 11.9703 18.2208 12.0896 18.35 11.9211Z"\n          />\n        </g>\n      </svg>\n    </media-seek-forward-button>\n  </template>\n\n  <template partial="MuteButton">\n    <media-mute-button part="bottom mute button" disabled="{{disabled}}" aria-disabled="{{disabled}}">\n      <svg viewBox="0 0 18 14" slot="icon" class="mute-icon" aria-hidden="true">\n        <g class="unmuted">\n          <path\n            d="M6.76786 1.21233L3.98606 3.98924H1.19937C0.593146 3.98924 0.101743 4.51375 0.101743 5.1607V6.96412L0 6.99998L0.101743 7.03583V8.83926C0.101743 9.48633 0.593146 10.0108 1.19937 10.0108H3.98606L6.76773 12.7877C7.23561 13.2547 8 12.9007 8 12.2171V1.78301C8 1.09925 7.23574 0.745258 6.76786 1.21233Z"\n          />\n          <path\n            class="volume-low"\n            d="M10 3.54781C10.7452 4.55141 11.1393 5.74511 11.1393 6.99991C11.1393 8.25471 10.7453 9.44791 10 10.4515L10.7988 11.0496C11.6734 9.87201 12.1356 8.47161 12.1356 6.99991C12.1356 5.52821 11.6735 4.12731 10.7988 2.94971L10 3.54781Z"\n          />\n          <path\n            class="volume-medium"\n            d="M12.3778 2.40086C13.2709 3.76756 13.7428 5.35806 13.7428 7.00026C13.7428 8.64246 13.2709 10.233 12.3778 11.5992L13.2106 12.1484C14.2107 10.6185 14.739 8.83796 14.739 7.00016C14.739 5.16236 14.2107 3.38236 13.2106 1.85156L12.3778 2.40086Z"\n          />\n          <path\n            class="volume-high"\n            d="M15.5981 0.75L14.7478 1.2719C15.7937 2.9919 16.3468 4.9723 16.3468 7C16.3468 9.0277 15.7937 11.0082 14.7478 12.7281L15.5981 13.25C16.7398 11.3722 17.343 9.211 17.343 7C17.343 4.789 16.7398 2.6268 15.5981 0.75Z"\n          />\n        </g>\n        <g class="muted">\n          <path\n            fill-rule="evenodd"\n            clip-rule="evenodd"\n            d="M4.39976 4.98924H1.19937C1.19429 4.98924 1.17777 4.98961 1.15296 5.01609C1.1271 5.04369 1.10174 5.09245 1.10174 5.1607V8.83926C1.10174 8.90761 1.12714 8.95641 1.15299 8.984C1.17779 9.01047 1.1943 9.01084 1.19937 9.01084H4.39977L7 11.6066V2.39357L4.39976 4.98924ZM7.47434 1.92006C7.4743 1.9201 7.47439 1.92002 7.47434 1.92006V1.92006ZM6.76773 12.7877L3.98606 10.0108H1.19937C0.593146 10.0108 0.101743 9.48633 0.101743 8.83926V7.03583L0 6.99998L0.101743 6.96412V5.1607C0.101743 4.51375 0.593146 3.98924 1.19937 3.98924H3.98606L6.76786 1.21233C7.23574 0.745258 8 1.09925 8 1.78301V12.2171C8 12.9007 7.23561 13.2547 6.76773 12.7877Z"\n          />\n          <path\n            fill-rule="evenodd"\n            clip-rule="evenodd"\n            d="M15.2677 9.30323C15.463 9.49849 15.7796 9.49849 15.9749 9.30323C16.1701 9.10796 16.1701 8.79138 15.9749 8.59612L14.2071 6.82841L15.9749 5.06066C16.1702 4.8654 16.1702 4.54882 15.9749 4.35355C15.7796 4.15829 15.4631 4.15829 15.2678 4.35355L13.5 6.1213L11.7322 4.35348C11.537 4.15822 11.2204 4.15822 11.0251 4.35348C10.8298 4.54874 10.8298 4.86532 11.0251 5.06058L12.7929 6.82841L11.0251 8.59619C10.8299 8.79146 10.8299 9.10804 11.0251 9.3033C11.2204 9.49856 11.537 9.49856 11.7323 9.3033L13.5 7.53552L15.2677 9.30323Z"\n          />\n        </g>\n      </svg>\n    </media-mute-button>\n  </template>\n\n  <template partial="PipButton">\n    <media-pip-button part="bottom pip button" disabled="{{disabled}}" aria-disabled="{{disabled}}">\n      <svg viewBox="0 0 18 14" aria-hidden="true" slot="icon">\n        <path\n          d="M15.9891 0H2.011C0.9004 0 0 0.9003 0 2.0109V11.989C0 13.0996 0.9004 14 2.011 14H15.9891C17.0997 14 18 13.0997 18 11.9891V2.0109C18 0.9003 17.0997 0 15.9891 0ZM17 11.9891C17 12.5465 16.5465 13 15.9891 13H2.011C1.4536 13 1.0001 12.5465 1.0001 11.9891V2.0109C1.0001 1.4535 1.4536 0.9999 2.011 0.9999H15.9891C16.5465 0.9999 17 1.4535 17 2.0109V11.9891Z"\n        />\n        <path\n          d="M15.356 5.67822H8.19523C8.03253 5.67822 7.90063 5.81012 7.90063 5.97282V11.3836C7.90063 11.5463 8.03253 11.6782 8.19523 11.6782H15.356C15.5187 11.6782 15.6506 11.5463 15.6506 11.3836V5.97282C15.6506 5.81012 15.5187 5.67822 15.356 5.67822Z"\n        />\n      </svg>\n    </media-pip-button>\n  </template>\n\n  <template partial="CaptionsMenuButton">\n    <media-captions-selectmenu part="bottom captions selectmenu" disabled="{{disabled}}" aria-disabled="{{disabled}}">\n      <media-captions-button\n        slot="button"\n        part="bottom captions button"\n        disabled="{{disabled}}"\n        aria-disabled="{{disabled}}"\n      >\n        <svg aria-hidden="true" viewBox="0 0 18 14" slot="on">\n          <path\n            d="M15.989 0H2.011C0.9004 0 0 0.9003 0 2.0109V11.9891C0 13.0997 0.9004 14 2.011 14H15.989C17.0997 14 18 13.0997 18 11.9891V2.0109C18 0.9003 17.0997 0 15.989 0ZM4.2292 8.7639C4.5954 9.1902 5.0935 9.4031 5.7233 9.4031C6.1852 9.4031 6.5544 9.301 6.8302 9.0969C7.1061 8.8933 7.2863 8.614 7.3702 8.26H8.4322C8.3062 8.884 8.0093 9.3733 7.5411 9.7273C7.0733 10.0813 6.4703 10.2581 5.732 10.2581C5.108 10.2581 4.5699 10.1219 4.1168 9.8489C3.6637 9.5759 3.3141 9.1946 3.0685 8.7058C2.8224 8.2165 2.6994 7.6511 2.6994 7.009C2.6994 6.3611 2.8224 5.7927 3.0685 5.3034C3.3141 4.8146 3.6637 4.4323 4.1168 4.1559C4.5699 3.88 5.108 3.7418 5.732 3.7418C6.4703 3.7418 7.0733 3.922 7.5411 4.2818C8.0094 4.6422 8.3062 5.1461 8.4322 5.794H7.3702C7.2862 5.4283 7.106 5.1368 6.8302 4.921C6.5544 4.7052 6.1852 4.5968 5.7233 4.5968C5.0934 4.5968 4.5954 4.8116 4.2292 5.2404C3.8635 5.6696 3.6804 6.259 3.6804 7.009C3.6804 7.7531 3.8635 8.3381 4.2292 8.7639ZM11.0974 8.7639C11.4636 9.1902 11.9617 9.4031 12.5915 9.4031C13.0534 9.4031 13.4226 9.301 13.6984 9.0969C13.9743 8.8933 14.1545 8.614 14.2384 8.26H15.3004C15.1744 8.884 14.8775 9.3733 14.4093 9.7273C13.9415 10.0813 13.3385 10.2581 12.6002 10.2581C11.9762 10.2581 11.4381 10.1219 10.985 9.8489C10.5319 9.5759 10.1823 9.1946 9.9367 8.7058C9.6906 8.2165 9.5676 7.6511 9.5676 7.009C9.5676 6.3611 9.6906 5.7927 9.9367 5.3034C10.1823 4.8146 10.5319 4.4323 10.985 4.1559C11.4381 3.88 11.9762 3.7418 12.6002 3.7418C13.3385 3.7418 13.9415 3.922 14.4093 4.2818C14.8776 4.6422 15.1744 5.1461 15.3004 5.794H14.2384C14.1544 5.4283 13.9742 5.1368 13.6984 4.921C13.4226 4.7052 13.0534 4.5968 12.5915 4.5968C11.9616 4.5968 11.4636 4.8116 11.0974 5.2404C10.7317 5.6696 10.5486 6.259 10.5486 7.009C10.5486 7.7531 10.7317 8.3381 11.0974 8.7639Z"\n          />\n        </svg>\n        <svg aria-hidden="true" viewBox="0 0 18 14" slot="off">\n          <path\n            d="M5.73219 10.258C5.10819 10.258 4.57009 10.1218 4.11699 9.8488C3.66389 9.5758 3.31429 9.1945 3.06869 8.7057C2.82259 8.2164 2.69958 7.651 2.69958 7.0089C2.69958 6.361 2.82259 5.7926 3.06869 5.3033C3.31429 4.8145 3.66389 4.4322 4.11699 4.1558C4.57009 3.8799 5.10819 3.7417 5.73219 3.7417C6.47049 3.7417 7.07348 3.9219 7.54128 4.2817C8.00958 4.6421 8.30638 5.146 8.43238 5.7939H7.37039C7.28639 5.4282 7.10618 5.1367 6.83039 4.9209C6.55459 4.7051 6.18538 4.5967 5.72348 4.5967C5.09358 4.5967 4.59559 4.8115 4.22939 5.2403C3.86369 5.6695 3.68058 6.2589 3.68058 7.0089C3.68058 7.753 3.86369 8.338 4.22939 8.7638C4.59559 9.1901 5.09368 9.403 5.72348 9.403C6.18538 9.403 6.55459 9.3009 6.83039 9.0968C7.10629 8.8932 7.28649 8.6139 7.37039 8.2599H8.43238C8.30638 8.8839 8.00948 9.3732 7.54128 9.7272C7.07348 10.0812 6.47049 10.258 5.73219 10.258Z"\n          />\n          <path\n            d="M12.6003 10.258C11.9763 10.258 11.4382 10.1218 10.9851 9.8488C10.532 9.5758 10.1824 9.1945 9.93685 8.7057C9.69075 8.2164 9.56775 7.651 9.56775 7.0089C9.56775 6.361 9.69075 5.7926 9.93685 5.3033C10.1824 4.8145 10.532 4.4322 10.9851 4.1558C11.4382 3.8799 11.9763 3.7417 12.6003 3.7417C13.3386 3.7417 13.9416 3.9219 14.4094 4.2817C14.8777 4.6421 15.1745 5.146 15.3005 5.7939H14.2385C14.1545 5.4282 13.9743 5.1367 13.6985 4.9209C13.4227 4.7051 13.0535 4.5967 12.5916 4.5967C11.9617 4.5967 11.4637 4.8115 11.0975 5.2403C10.7318 5.6695 10.5487 6.2589 10.5487 7.0089C10.5487 7.753 10.7318 8.338 11.0975 8.7638C11.4637 9.1901 11.9618 9.403 12.5916 9.403C13.0535 9.403 13.4227 9.3009 13.6985 9.0968C13.9744 8.8932 14.1546 8.6139 14.2385 8.2599H15.3005C15.1745 8.8839 14.8776 9.3732 14.4094 9.7272C13.9416 10.0812 13.3386 10.258 12.6003 10.258Z"\n          />\n          <path\n            d="M15.9891 1C16.5465 1 17 1.4535 17 2.011V11.9891C17 12.5465 16.5465 13 15.9891 13H2.0109C1.4535 13 1 12.5465 1 11.9891V2.0109C1 1.4535 1.4535 0.9999 2.0109 0.9999L15.9891 1ZM15.9891 0H2.0109C0.9003 0 0 0.9003 0 2.0109V11.9891C0 13.0997 0.9003 14 2.0109 14H15.9891C17.0997 14 18 13.0997 18 11.9891V2.0109C18 0.9003 17.0997 0 15.9891 0Z"\n          />\n        </svg>\n      </media-captions-button>\n      <media-captions-listbox slot="listbox" exportparts="option" part="bottom captions listbox">\n        <div slot="select-indicator">\n          <style>\n            .listbox-indicator {\n              position: relative;\n              top: 1px;\n              width: 0.9em;\n              height: auto;\n              fill: var(--_accent-color);\n            }\n\n            [aria-selected=\'false\'] .listbox-indicator {\n              display: none;\n            }\n          </style>\n          <svg viewBox="0 0 14 18" class="listbox-indicator">\n            <path\n              d="M12.252 3.48c-.115.033-.301.161-.425.291-.059.063-1.407 1.815-2.995 3.894s-2.897 3.79-2.908 3.802c-.013.014-.661-.616-1.672-1.624-.908-.905-1.702-1.681-1.765-1.723-.401-.27-.783-.211-1.176.183a1.285 1.285 0 0 0-.261.342.582.582 0 0 0-.082.35c0 .165.01.205.08.35.075.153.213.296 2.182 2.271 1.156 1.159 2.17 2.159 2.253 2.222.189.143.338.196.539.194.203-.003.412-.104.618-.299.205-.193 6.7-8.693 6.804-8.903a.716.716 0 0 0 .085-.345c.01-.179.005-.203-.062-.339-.124-.252-.45-.531-.746-.639a.784.784 0 0 0-.469-.027"\n              fill-rule="evenodd"\n            />\n          </svg>\n        </div>\n      </media-captions-listbox>\n    </media-captions-selectmenu>\n  </template>\n\n  <template partial="AirplayButton">\n    <media-airplay-button part="bottom airplay button" disabled="{{disabled}}" aria-disabled="{{disabled}}">\n      <svg viewBox="0 0 18 14" aria-hidden="true" slot="icon">\n        <path\n          d="M16.1383 0H1.8618C0.8335 0 0 0.8335 0 1.8617V10.1382C0 11.1664 0.8335 12 1.8618 12H3.076C3.1204 11.9433 3.1503 11.8785 3.2012 11.826L4.004 11H1.8618C1.3866 11 1 10.6134 1 10.1382V1.8617C1 1.3865 1.3866 0.9999 1.8618 0.9999H16.1383C16.6135 0.9999 17.0001 1.3865 17.0001 1.8617V10.1382C17.0001 10.6134 16.6135 11 16.1383 11H13.9961L14.7989 11.826C14.8499 11.8785 14.8798 11.9432 14.9241 12H16.1383C17.1665 12 18.0001 11.1664 18.0001 10.1382V1.8617C18 0.8335 17.1665 0 16.1383 0Z"\n        />\n        <path\n          d="M9.55061 8.21903C9.39981 8.06383 9.20001 7.98633 9.00011 7.98633C8.80021 7.98633 8.60031 8.06383 8.44951 8.21903L4.09771 12.697C3.62471 13.1838 3.96961 13.9998 4.64831 13.9998H13.3518C14.0304 13.9998 14.3754 13.1838 13.9023 12.697L9.55061 8.21903Z"\n        />\n      </svg>\n    </media-airplay-button>\n  </template>\n\n  <template partial="FullscreenButton">\n    <media-fullscreen-button part="bottom fullscreen button" disabled="{{disabled}}" aria-disabled="{{disabled}}">\n      <svg viewBox="0 0 18 14" aria-hidden="true" slot="enter">\n        <path\n          d="M1.00745 4.39539L1.01445 1.98789C1.01605 1.43049 1.47085 0.978289 2.02835 0.979989L6.39375 0.992589L6.39665 -0.007411L2.03125 -0.020011C0.920646 -0.023211 0.0176463 0.874489 0.0144463 1.98509L0.00744629 4.39539H1.00745Z"\n        />\n        <path\n          d="M17.0144 2.03431L17.0076 4.39541H18.0076L18.0144 2.03721C18.0176 0.926712 17.1199 0.0237125 16.0093 0.0205125L11.6439 0.0078125L11.641 1.00781L16.0064 1.02041C16.5638 1.02201 17.016 1.47681 17.0144 2.03431Z"\n        />\n        <path\n          d="M16.9925 9.60498L16.9855 12.0124C16.9839 12.5698 16.5291 13.022 15.9717 13.0204L11.6063 13.0078L11.6034 14.0078L15.9688 14.0204C17.0794 14.0236 17.9823 13.1259 17.9855 12.0153L17.9925 9.60498H16.9925Z"\n        />\n        <path\n          d="M0.985626 11.9661L0.992426 9.60498H-0.0074737L-0.0142737 11.9632C-0.0174737 13.0738 0.880226 13.9767 1.99083 13.98L6.35623 13.9926L6.35913 12.9926L1.99373 12.98C1.43633 12.9784 0.983926 12.5236 0.985626 11.9661Z"\n        />\n      </svg>\n      <svg viewBox="0 0 18 14" aria-hidden="true" slot="exit">\n        <path\n          d="M5.39655 -0.0200195L5.38955 2.38748C5.38795 2.94488 4.93315 3.39708 4.37565 3.39538L0.0103463 3.38278L0.00744629 4.38278L4.37285 4.39538C5.48345 4.39858 6.38635 3.50088 6.38965 2.39028L6.39665 -0.0200195H5.39655Z"\n        />\n        <path\n          d="M12.6411 2.36891L12.6479 0.0078125H11.6479L11.6411 2.36601C11.6379 3.47651 12.5356 4.37951 13.6462 4.38271L18.0116 4.39531L18.0145 3.39531L13.6491 3.38271C13.0917 3.38111 12.6395 2.92641 12.6411 2.36891Z"\n        />\n        <path\n          d="M12.6034 14.0204L12.6104 11.613C12.612 11.0556 13.0668 10.6034 13.6242 10.605L17.9896 10.6176L17.9925 9.61759L13.6271 9.60499C12.5165 9.60179 11.6136 10.4995 11.6104 11.6101L11.6034 14.0204H12.6034Z"\n        />\n        <path\n          d="M5.359 11.6315L5.3522 13.9926H6.3522L6.359 11.6344C6.3622 10.5238 5.4645 9.62088 4.3539 9.61758L-0.0115043 9.60498L-0.0144043 10.605L4.351 10.6176C4.9084 10.6192 5.3607 11.074 5.359 11.6315Z"\n        />\n      </svg>\n    </media-fullscreen-button>\n  </template>\n\n  <template partial="CastButton">\n    <media-cast-button part="bottom cast button" disabled="{{disabled}}" aria-disabled="{{disabled}}">\n      <svg viewBox="0 0 18 14" aria-hidden="true" slot="enter">\n        <path\n          d="M16.0072 0H2.0291C0.9185 0 0.0181 0.9003 0.0181 2.011V5.5009C0.357 5.5016 0.6895 5.5275 1.0181 5.5669V2.011C1.0181 1.4536 1.4716 1 2.029 1H16.0072C16.5646 1 17.0181 1.4536 17.0181 2.011V11.9891C17.0181 12.5465 16.5646 13 16.0072 13H8.4358C8.4746 13.3286 8.4999 13.6611 8.4999 13.9999H16.0071C17.1177 13.9999 18.018 13.0996 18.018 11.989V2.011C18.0181 0.9003 17.1178 0 16.0072 0ZM0 6.4999V7.4999C3.584 7.4999 6.5 10.4159 6.5 13.9999H7.5C7.5 9.8642 4.1357 6.4999 0 6.4999ZM0 8.7499V9.7499C2.3433 9.7499 4.25 11.6566 4.25 13.9999H5.25C5.25 11.1049 2.895 8.7499 0 8.7499ZM0.0181 11V14H3.0181C3.0181 12.3431 1.675 11 0.0181 11Z"\n        />\n      </svg>\n      <svg viewBox="0 0 18 14" aria-hidden="true" slot="exit">\n        <path\n          d="M15.9891 0H2.01103C0.900434 0 3.35947e-05 0.9003 3.35947e-05 2.011V5.5009C0.338934 5.5016 0.671434 5.5275 1.00003 5.5669V2.011C1.00003 1.4536 1.45353 1 2.01093 1H15.9891C16.5465 1 17 1.4536 17 2.011V11.9891C17 12.5465 16.5465 13 15.9891 13H8.41773C8.45653 13.3286 8.48183 13.6611 8.48183 13.9999H15.989C17.0996 13.9999 17.9999 13.0996 17.9999 11.989V2.011C18 0.9003 17.0997 0 15.9891 0ZM-0.0180664 6.4999V7.4999C3.56593 7.4999 6.48193 10.4159 6.48193 13.9999H7.48193C7.48193 9.8642 4.11763 6.4999 -0.0180664 6.4999ZM-0.0180664 8.7499V9.7499C2.32523 9.7499 4.23193 11.6566 4.23193 13.9999H5.23193C5.23193 11.1049 2.87693 8.7499 -0.0180664 8.7499ZM3.35947e-05 11V14H3.00003C3.00003 12.3431 1.65693 11 3.35947e-05 11Z"\n        />\n        <path d="M2.15002 5.634C5.18352 6.4207 7.57252 8.8151 8.35282 11.8499H15.8501V2.1499H2.15002V5.634Z" />\n      </svg>\n    </media-cast-button>\n  </template>\n\n  <template partial="LiveButton">\n    <media-live-button part="{{section ?? \'top\'}} live button" disabled="{{disabled}}" aria-disabled="{{disabled}}">\n      <span slot="text">Live</span>\n    </media-live-button>\n  </template>\n\n  <template partial="PlaybackRateSelect">\n    <media-playback-rate-selectmenu\n      part="bottom playback-rate selectmenu"\n      disabled="{{disabled}}"\n      aria-disabled="{{disabled}}"\n    >\n      <media-playback-rate-button slot="button" part="bottom playback-rate button"></media-playback-rate-button>\n      <media-playback-rate-listbox\n        slot="listbox"\n        rates="{{playbackrates}}"\n        exportparts="option"\n        part="bottom playback-rate listbox"\n      ></media-playback-rate-listbox>\n    </media-playback-rate-selectmenu>\n  </template>\n\n  <template partial="VolumeRange">\n    <media-volume-range\n      part="bottom volume range"\n      disabled="{{disabled}}"\n      aria-disabled="{{disabled}}"\n    ></media-volume-range>\n  </template>\n\n  <template partial="TimeDisplay">\n    <media-time-display\n      remaining="{{defaultshowremainingtime}}"\n      showduration="{{!hideduration}}"\n      part="bottom time display"\n      disabled="{{disabled}}"\n      aria-disabled="{{disabled}}"\n    ></media-time-display>\n  </template>\n\n  <template partial="TimeRange">\n    <media-time-range part="bottom time range" disabled="{{disabled}}" aria-disabled="{{disabled}}">\n      <media-preview-thumbnail slot="preview"></media-preview-thumbnail>\n      <media-preview-chapter-display slot="preview"></media-preview-chapter-display>\n      <media-preview-time-display slot="preview"></media-preview-time-display>\n      <div slot="preview" part="arrow"></div>\n    </media-time-range>\n  </template>\n\n  <template partial="AudioTrackSelect">\n    <media-audio-track-selectmenu\n      part="bottom audio-track selectmenu"\n      disabled="{{disabled}}"\n      aria-disabled="{{disabled}}"\n    >\n      <media-audio-track-button slot="button" part="bottom audio-track button">\n        <svg aria-hidden="true" slot="icon" viewBox="0 0 18 16">\n          <path d="M9 15A7 7 0 1 1 9 1a7 7 0 0 1 0 14Zm0 1A8 8 0 1 0 9 0a8 8 0 0 0 0 16Z" />\n          <path\n            d="M5.2 6.3a.5.5 0 0 1 .5.5v2.4a.5.5 0 1 1-1 0V6.8a.5.5 0 0 1 .5-.5Zm2.4-2.4a.5.5 0 0 1 .5.5v7.2a.5.5 0 0 1-1 0V4.4a.5.5 0 0 1 .5-.5ZM10 5.5a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5Zm2.4-.8a.5.5 0 0 1 .5.5v5.6a.5.5 0 0 1-1 0V5.2a.5.5 0 0 1 .5-.5Z"\n          />\n        </svg>\n      </media-audio-track-button>\n      <media-audio-track-listbox slot="listbox" exportparts="option" part="bottom audio-track listbox">\n        <div slot="select-indicator">\n          <style>\n            .listbox-indicator {\n              position: relative;\n              top: 1px;\n              width: 0.9em;\n              height: auto;\n              fill: var(--_accent-color);\n            }\n\n            [aria-selected=\'false\'] .listbox-indicator {\n              display: none;\n            }\n          </style>\n          <svg viewBox="0 0 14 18" class="listbox-indicator">\n            <path\n              d="M12.252 3.48c-.115.033-.301.161-.425.291-.059.063-1.407 1.815-2.995 3.894s-2.897 3.79-2.908 3.802c-.013.014-.661-.616-1.672-1.624-.908-.905-1.702-1.681-1.765-1.723-.401-.27-.783-.211-1.176.183a1.285 1.285 0 0 0-.261.342.582.582 0 0 0-.082.35c0 .165.01.205.08.35.075.153.213.296 2.182 2.271 1.156 1.159 2.17 2.159 2.253 2.222.189.143.338.196.539.194.203-.003.412-.104.618-.299.205-.193 6.7-8.693 6.804-8.903a.716.716 0 0 0 .085-.345c.01-.179.005-.203-.062-.339-.124-.252-.45-.531-.746-.639a.784.784 0 0 0-.469-.027"\n              fill-rule="evenodd"\n            />\n          </svg>\n        </div>\n      </media-audio-track-listbox>\n    </media-audio-track-selectmenu>\n  </template>\n\n  <template partial="RenditionSelect">\n    <media-rendition-selectmenu part="bottom rendition selectmenu" disabled="{{disabled}}" aria-disabled="{{disabled}}">\n      <media-rendition-button slot="button" part="bottom rendition button">\n        <svg aria-hidden="true" slot="icon" viewBox="0 0 18 14">\n          <path\n            d="M2.25 9a2 2 0 1 0 0-4 2 2 0 0 0 0 4ZM9 9a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm6.75 0a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z"\n          />\n        </svg>\n      </media-rendition-button>\n      <media-rendition-listbox slot="listbox" exportparts="option" part="bottom rendition listbox">\n        <div slot="select-indicator">\n          <style>\n            .listbox-indicator {\n              position: relative;\n              top: 1px;\n              width: 0.9em;\n              height: auto;\n              fill: var(--_accent-color);\n            }\n\n            [aria-selected=\'false\'] .listbox-indicator {\n              display: none;\n            }\n          </style>\n          <svg viewBox="0 0 14 18" class="listbox-indicator">\n            <path\n              d="M12.252 3.48c-.115.033-.301.161-.425.291-.059.063-1.407 1.815-2.995 3.894s-2.897 3.79-2.908 3.802c-.013.014-.661-.616-1.672-1.624-.908-.905-1.702-1.681-1.765-1.723-.401-.27-.783-.211-1.176.183a1.285 1.285 0 0 0-.261.342.582.582 0 0 0-.082.35c0 .165.01.205.08.35.075.153.213.296 2.182 2.271 1.156 1.159 2.17 2.159 2.253 2.222.189.143.338.196.539.194.203-.003.412-.104.618-.299.205-.193 6.7-8.693 6.804-8.903a.716.716 0 0 0 .085-.345c.01-.179.005-.203-.062-.339-.124-.252-.45-.531-.746-.639a.784.784 0 0 0-.469-.027"\n              fill-rule="evenodd"\n            />\n          </svg>\n        </div>\n      </media-rendition-listbox>\n    </media-rendition-selectmenu>\n  </template>\n\n  <media-controller\n    part="controller"\n    defaultstreamtype="{{defaultstreamtype ?? \'on-demand\'}}"\n    breakpoints="sm:470"\n    gesturesdisabled="{{disabled}}"\n    hotkeys="{{hotkeys}}"\n    nohotkeys="{{nohotkeys}}"\n    novolumepref="{{novolumepref}}"\n    audio="{{audio}}"\n    noautoseektolive="{{noautoseektolive}}"\n    defaultsubtitles="{{defaultsubtitles}}"\n    defaultduration="{{defaultduration ?? false}}"\n    keyboardforwardseekoffset="{{forwardseekoffset}}"\n    keyboardbackwardseekoffset="{{backwardseekoffset}}"\n    exportparts="layer, media-layer, poster-layer, vertical-layer, centered-layer, gesture-layer"\n    style="--_pre-playback-place:{{preplaybackplace ?? \'center\'}}"\n  >\n    <slot name="media" slot="media"></slot>\n    <slot name="poster" slot="poster"></slot>\n\n    <media-loading-indicator slot="centered-chrome" noautohide></media-loading-indicator>\n\n    <template if="!audio">\n      \x3c!-- Pre-playback UI --\x3e\n      <div slot="centered-chrome" class="center-controls pre-playback">\n        <template if="streamtype == \'on-demand\'">\n          <template if="!breakpointsm"> {{>SeekBackwardButton section="center"}} </template>\n          <template if="!breakpointsm"> {{>PlayButton section="center"}} </template>\n          <template if="breakpointsm"> {{>PrePlayButton section="center"}} </template>\n          <template if="!breakpointsm"> {{>SeekForwardButton section="center"}} </template>\n        </template>\n\n        <template if="streamtype == \'live\'">\n          <template if="!breakpointsm">\n            <template if="targetlivewindow > 0"> {{>SeekBackwardButton section="center"}} </template>\n          </template>\n          <template if="!breakpointsm"> {{>PlayButton section="center"}} </template>\n          <template if="breakpointsm"> {{>PrePlayButton section="center"}} </template>\n          <template if="!breakpointsm">\n            <template if="targetlivewindow > 0"> {{>SeekForwardButton section="center"}} </template>\n          </template>\n        </template>\n      </div>\n\n      \x3c!-- Auotplay centered unmute button --\x3e\n      \x3c!--\n        todo: figure out how show this with available state variables\n        needs to show when:\n        - autoplay is enabled\n        - playback has been successful\n        - audio is muted\n        - in place / instead of the pre-plaback play button\n        - not to show again after user has interacted with this button\n          - OR user has interacted with the mute button in the control bar\n      --\x3e\n      \x3c!--\n        There should be a >MuteButton to the left of the "Unmute" text, but a templating bug\n        makes it appear even if commented out in the markup, add it back when code is un-commented\n      --\x3e\n      \x3c!-- <div slot="centered-chrome" class="autoplay-unmute">\n        <div role="button" class="autoplay-unmute-btn">Unmute</div>\n      </div> --\x3e\n\n      <template if="streamtype == \'on-demand\'">\n        <template if="breakpointsm">\n          <media-control-bar part="control-bar top" slot="top-chrome">{{>TitleDisplay}} </media-control-bar>\n        </template>\n        {{>TimeRange}}\n        <media-control-bar part="control-bar bottom">\n          {{>PlayButton}} {{>SeekBackwardButton}} {{>SeekForwardButton}} {{>TimeDisplay}} {{>MuteButton}}\n          {{>VolumeRange}}\n          <div class="spacer"></div>\n          {{>RenditionSelect}} {{>PlaybackRateSelect}} {{>AudioTrackSelect}} {{>CaptionsMenuButton}} {{>AirplayButton}}\n          {{>CastButton}} {{>PipButton}} {{>FullscreenButton}}\n        </media-control-bar>\n      </template>\n\n      <template if="streamtype == \'live\'">\n        <media-control-bar part="control-bar top" slot="top-chrome">\n          {{>LiveButton}}\n          <template if="breakpointsm"> {{>TitleDisplay}} </template>\n        </media-control-bar>\n        <template if="targetlivewindow > 0">{{>TimeRange}}</template>\n        <media-control-bar part="control-bar bottom">\n          {{>PlayButton}}\n          <template if="targetlivewindow > 0">{{>SeekBackwardButton}} {{>SeekForwardButton}}</template>\n          {{>MuteButton}} {{>VolumeRange}}\n          <div class="spacer"></div>\n          {{>RenditionSelect}} {{>AudioTrackSelect}} {{>CaptionsMenuButton}} {{>AirplayButton}} {{>CastButton}}\n          {{>PipButton}} {{>FullscreenButton}}\n        </media-control-bar>\n      </template>\n    </template>\n\n    <template if="audio">\n      <template if="streamtype == \'on-demand\'">\n        <template if="title">\n          <media-control-bar part="control-bar top">{{>TitleDisplay}}</media-control-bar>\n        </template>\n        <media-control-bar part="control-bar bottom">\n          {{>PlayButton}}\n          <template if="breakpointsm"> {{>SeekBackwardButton}} {{>SeekForwardButton}} </template>\n          {{>MuteButton}}\n          <template if="breakpointsm">{{>VolumeRange}}</template>\n          {{>TimeDisplay}} {{>TimeRange}}\n          <template if="breakpointsm">{{>PlaybackRateSelect}}</template>\n          {{>AirplayButton}} {{>CastButton}}\n        </media-control-bar>\n      </template>\n\n      <template if="streamtype == \'live\'">\n        <template if="title">\n          <media-control-bar part="control-bar top">{{>TitleDisplay}}</media-control-bar>\n        </template>\n        <media-control-bar part="control-bar bottom">\n          <template if="breakpointsm">\n            {{>PlayButton}} {{>LiveButton section="bottom"}} {{>MuteButton}} {{>VolumeRange}}\n            <template if="targetlivewindow > 0"> {{>SeekBackwardButton}} {{>SeekForwardButton}} </template>\n          </template>\n          <template if="targetlivewindow > 0"> {{>TimeDisplay}} {{>TimeRange}} </template>\n          <template if="!targetlivewindow"><div class="spacer"></div></template>\n          {{>AirplayButton}} {{>CastButton}}\n        </media-control-bar>\n      </template>\n    </template>\n\n    <slot></slot>\n  </media-controller>\n</template>\n');var WH,GH,KH=class extends C${};KH.template=null==(GH=null==(WH=VH.content)?void 0:WH.children)?void 0:GH[0],H$.customElements.get("media-theme-gerwig")||H$.customElements.define("media-theme-gerwig",KH);var qH={SRC:"src",POSTER:"poster"},jH={STYLE:"style",DEFAULT_HIDDEN_CAPTIONS:"default-hidden-captions",PRIMARY_COLOR:"primary-color",SECONDARY_COLOR:"secondary-color",ACCENT_COLOR:"accent-color",FORWARD_SEEK_OFFSET:"forward-seek-offset",BACKWARD_SEEK_OFFSET:"backward-seek-offset",PLAYBACK_TOKEN:"playback-token",THUMBNAIL_TOKEN:"thumbnail-token",STORYBOARD_TOKEN:"storyboard-token",STORYBOARD_SRC:"storyboard-src",THUMBNAIL_TIME:"thumbnail-time",AUDIO:"audio",NOHOTKEYS:"nohotkeys",HOTKEYS:"hotkeys",PLAYBACK_RATES:"playbackrates",DEFAULT_SHOW_REMAINING_TIME:"default-show-remaining-time",DEFAULT_DURATION:"default-duration",TITLE:"title",PLACEHOLDER:"placeholder",THEME:"theme",DEFAULT_STREAM_TYPE:"default-stream-type",TARGET_LIVE_WINDOW:"target-live-window",EXTRA_SOURCE_PARAMS:"extra-source-params",NO_VOLUME_PREF:"no-volume-pref"},YH=["audio","backwardseekoffset","defaultduration","defaultshowremainingtime","defaultsubtitles","noautoseektolive","disabled","exportparts","forwardseekoffset","hideduration","hotkeys","nohotkeys","playbackrates","defaultstreamtype","streamtype","style","targetlivewindow","template","title","novolumepref"];function zH(e){var t,n;let i=e.theme;if(i){let r=null==(n=null==(t=e.getRootNode())?void 0:t.getElementById)?void 0:n.call(t,i);if(r&&r instanceof HTMLTemplateElement)return r;i.startsWith("media-theme-")||(i=`media-theme-${i}`);let s=H$.customElements.get(i);if(null!=s&&s.template)return s.template}}function XH(e){var t;let n=null==(t=e.mediaController)?void 0:t.querySelector("media-time-display");return n&&"none"===getComputedStyle(n).getPropertyValue("--media-duration-display-display").trim()}function QH(e){let t=e.hasAttribute(jH.TITLE)?{video_title:e.getAttribute(jH.TITLE)}:{};return e.getAttributeNames().filter((e=>e.startsWith("metadata-"))).reduce(((t,n)=>{let i=e.getAttribute(n);return null!==i&&(t[n.replace(/^metadata-/,"").replace(/-/g,"_")]=i),t}),t)}var ZH,JH,eV,tV,nV,iV,rV,sV,aV,oV,lV,dV,cV,uV,hV,mV,pV,fV,gV,vV,bV,yV=Object.values(TB),EV=Object.values(qH),TV=Object.values(jH),_V=tH(),AV={dialog:void 0,isDialogOpen:!1},SV={redundant_streams:!0},kV=class extends TH{constructor(){super(),D$(this,iV),D$(this,sV),D$(this,oV),D$(this,dV),D$(this,uV),D$(this,mV),D$(this,fV),D$(this,vV),D$(this,ZH,!1),D$(this,JH,{}),D$(this,eV,!0),D$(this,tV,new lH(this,"hotkeys")),D$(this,nV,{...AV,onCloseErrorDialog:()=>O$(this,oV,lV).call(this,{dialog:void 0,isDialogOpen:!1}),onInitFocusDialog:e=>{Z$(this,V$.activeElement)||e.preventDefault()}}),this.attachShadow({mode:"open"}),O$(this,sV,aV).call(this),this.isConnected&&O$(this,iV,rV).call(this)}static get observedAttributes(){var e;return[...null!=(e=TH.observedAttributes)?e:[],...EV,...yV,...TV]}get mediaTheme(){var e;return null==(e=this.shadowRoot)?void 0:e.querySelector("media-theme")}get mediaController(){var e,t;return null==(t=null==(e=this.mediaTheme)?void 0:e.shadowRoot)?void 0:t.querySelector("media-controller")}connectedCallback(){var e;let t=null==(e=this.shadowRoot)?void 0:e.querySelector("mux-video");t&&(t.metadata=QH(this))}attributeChangedCallback(e,t,n){switch(O$(this,iV,rV).call(this),super.attributeChangedCallback(e,t,n),e){case jH.HOTKEYS:x$(this,tV).value=n;break;case jH.THUMBNAIL_TIME:null!=n&&this.tokens.thumbnail&&cH(K$("Use of thumbnail-time with thumbnail-token is currently unsupported. Ignore thumbnail-time.").format({}));break;case jH.THUMBNAIL_TOKEN:{let{aud:e}=Q$(n);n&&"t"!==e&&cH(K$("The provided thumbnail-token should have audience value 't' instead of '{aud}'.").format({aud:e}));break}case jH.STORYBOARD_TOKEN:{let{aud:e}=Q$(n);n&&"s"!==e&&cH(K$("The provided storyboard-token should have audience value 's' instead of '{aud}'.").format({aud:e}));break}case TB.PLAYBACK_ID:null!=n&&n.includes("?token")&&uH(K$("The specificed playback ID {playbackId} contains a token which must be provided via the playback-token attribute.").format({playbackId:n}));break;case TB.STREAM_TYPE:n&&![hN.LIVE,hN.ON_DEMAND,hN.UNKNOWN].includes(n)?["ll-live","live:dvr","ll-live:dvr"].includes(this.streamType)?this.targetLiveWindow=n.includes("dvr")?Number.POSITIVE_INFINITY:0:hH({file:"invalid-stream-type.md",message:K$("Invalid stream-type value supplied: `{streamType}`. Please provide stream-type as either: `on-demand` or `live`").format({streamType:this.streamType})}):n===hN.LIVE?null==this.getAttribute(jH.TARGET_LIVE_WINDOW)&&(this.targetLiveWindow=0):this.targetLiveWindow=Number.NaN}[TB.PLAYBACK_ID,qH.SRC,jH.PLAYBACK_TOKEN].includes(e)&&t!==n&&M$(this,nV,{...x$(this,nV),...AV}),O$(this,dV,cV).call(this,{[rH(e)]:n})}get preferCmcd(){var e;return null!=(e=this.getAttribute(TB.PREFER_CMCD))?e:void 0}set preferCmcd(e){e!==this.preferCmcd&&(e?gN.includes(e)?this.setAttribute(TB.PREFER_CMCD,e):cH(`Invalid value for preferCmcd. Must be one of ${gN.join()}`):this.removeAttribute(TB.PREFER_CMCD))}get hasPlayed(){var e,t;return null!=(t=null==(e=this.mediaController)?void 0:e.hasAttribute(Qh.MEDIA_HAS_PLAYED))&&t}get inLiveWindow(){var e;return null==(e=this.mediaController)?void 0:e.hasAttribute(Qh.MEDIA_TIME_IS_LIVE)}get _hls(){var e;return null==(e=this.media)?void 0:e._hls}get mux(){var e;return null==(e=this.media)?void 0:e.mux}get theme(){var e;return null!=(e=this.getAttribute(jH.THEME))?e:"gerwig"}set theme(e){this.setAttribute(jH.THEME,`${e}`)}get themeProps(){let e=this.mediaTheme;if(!e)return;let t={};for(let n of e.getAttributeNames()){if(YH.includes(n))continue;let i=e.getAttribute(n);t[Y$(n)]=""===i||i}return t}set themeProps(e){var t,n;O$(this,iV,rV).call(this);let i={...this.themeProps,...e};for(let r in i){if(YH.includes(r))continue;let i=null==e?void 0:e[r];"boolean"==typeof i||null==i?null==(t=this.mediaTheme)||t.toggleAttribute(j$(r),!!i):null==(n=this.mediaTheme)||n.setAttribute(j$(r),i)}}get playbackId(){var e;return null!=(e=this.getAttribute(TB.PLAYBACK_ID))?e:void 0}set playbackId(e){e?this.setAttribute(TB.PLAYBACK_ID,e):this.removeAttribute(TB.PLAYBACK_ID)}get src(){var e,t;return this.playbackId?null!=(e=wV(this,qH.SRC))?e:void 0:null!=(t=this.getAttribute(qH.SRC))?t:void 0}set src(e){e?this.setAttribute(qH.SRC,e):this.removeAttribute(qH.SRC)}get poster(){var e;let t=this.getAttribute(qH.POSTER);return null!=t?t:this.playbackId&&!this.audio?((e,{token:t,customDomain:n=J$,thumbnailTime:i}={})=>{let r=null==t?i:void 0,{aud:s}=Q$(t);if(!t||"t"===s)return`https://image.${n}/${e}/thumbnail.webp${X$({token:t,time:r})}`})(this.playbackId,{customDomain:this.customDomain,thumbnailTime:null!=(e=this.thumbnailTime)?e:this.startTime,token:this.tokens.thumbnail}):void 0}set poster(e){e||""===e?this.setAttribute(qH.POSTER,e):this.removeAttribute(qH.POSTER)}get storyboardSrc(){var e;return null!=(e=this.getAttribute(jH.STORYBOARD_SRC))?e:void 0}set storyboardSrc(e){e?this.setAttribute(jH.STORYBOARD_SRC,e):this.removeAttribute(jH.STORYBOARD_SRC)}get storyboard(){return this.storyboardSrc&&!this.tokens.storyboard?this.storyboardSrc:!this.audio&&this.playbackId&&this.streamType&&![hN.LIVE,hN.UNKNOWN].includes(this.streamType)?((e,{token:t,customDomain:n=J$}={})=>{let{aud:i}=Q$(t);if(!t||"s"===i)return`https://image.${n}/${e}/storyboard.vtt${X$({token:t,format:"webp"})}`})(this.playbackId,{customDomain:this.customDomain,token:this.tokens.storyboard}):void 0}get audio(){return this.hasAttribute(jH.AUDIO)}set audio(e){e?this.setAttribute(jH.AUDIO,""):this.removeAttribute(jH.AUDIO)}get hotkeys(){return x$(this,tV)}get nohotkeys(){return this.hasAttribute(jH.NOHOTKEYS)}set nohotkeys(e){e?this.setAttribute(jH.NOHOTKEYS,""):this.removeAttribute(jH.NOHOTKEYS)}get thumbnailTime(){return z$(this.getAttribute(jH.THUMBNAIL_TIME))}set thumbnailTime(e){this.setAttribute(jH.THUMBNAIL_TIME,`${e}`)}get title(){var e;return null!=(e=this.getAttribute(jH.TITLE))?e:""}set title(e){e!==this.title&&(e?this.setAttribute(jH.TITLE,e):this.removeAttribute("title"),super.title=e)}get placeholder(){var e;return null!=(e=wV(this,jH.PLACEHOLDER))?e:""}set placeholder(e){this.setAttribute(jH.PLACEHOLDER,`${e}`)}get primaryColor(){var e,t;let n=this.getAttribute(jH.PRIMARY_COLOR);if(null!=n||this.mediaTheme&&(n=null==(t=null==(e=H$.getComputedStyle(this.mediaTheme))?void 0:e.getPropertyValue("--_primary-color"))?void 0:t.trim(),n))return n}set primaryColor(e){this.setAttribute(jH.PRIMARY_COLOR,`${e}`)}get secondaryColor(){var e,t;let n=this.getAttribute(jH.SECONDARY_COLOR);if(null!=n||this.mediaTheme&&(n=null==(t=null==(e=H$.getComputedStyle(this.mediaTheme))?void 0:e.getPropertyValue("--_secondary-color"))?void 0:t.trim(),n))return n}set secondaryColor(e){this.setAttribute(jH.SECONDARY_COLOR,`${e}`)}get accentColor(){var e,t;let n=this.getAttribute(jH.ACCENT_COLOR);if(null!=n||this.mediaTheme&&(n=null==(t=null==(e=H$.getComputedStyle(this.mediaTheme))?void 0:e.getPropertyValue("--_accent-color"))?void 0:t.trim(),n))return n}set accentColor(e){this.setAttribute(jH.ACCENT_COLOR,`${e}`)}get defaultShowRemainingTime(){return this.hasAttribute(jH.DEFAULT_SHOW_REMAINING_TIME)}set defaultShowRemainingTime(e){e?this.setAttribute(jH.DEFAULT_SHOW_REMAINING_TIME,""):this.removeAttribute(jH.DEFAULT_SHOW_REMAINING_TIME)}get playbackRates(){if(this.hasAttribute(jH.PLAYBACK_RATES))return this.getAttribute(jH.PLAYBACK_RATES).trim().split(/\s*,?\s+/).map((e=>Number(e))).filter((e=>!Number.isNaN(e))).sort(((e,t)=>e-t))}set playbackRates(e){e?this.setAttribute(jH.PLAYBACK_RATES,e.join(" ")):this.removeAttribute(jH.PLAYBACK_RATES)}get forwardSeekOffset(){var e;return null!=(e=z$(this.getAttribute(jH.FORWARD_SEEK_OFFSET)))?e:10}set forwardSeekOffset(e){this.setAttribute(jH.FORWARD_SEEK_OFFSET,`${e}`)}get backwardSeekOffset(){var e;return null!=(e=z$(this.getAttribute(jH.BACKWARD_SEEK_OFFSET)))?e:10}set backwardSeekOffset(e){this.setAttribute(jH.BACKWARD_SEEK_OFFSET,`${e}`)}get defaultHiddenCaptions(){return this.hasAttribute(jH.DEFAULT_HIDDEN_CAPTIONS)}set defaultHiddenCaptions(e){e?this.setAttribute(jH.DEFAULT_HIDDEN_CAPTIONS,""):this.removeAttribute(jH.DEFAULT_HIDDEN_CAPTIONS)}get defaultDuration(){return z$(this.getAttribute(jH.DEFAULT_DURATION))}set defaultDuration(e){null==e?this.removeAttribute(jH.DEFAULT_DURATION):this.setAttribute(jH.DEFAULT_DURATION,`${e}`)}get playerSoftwareName(){var e;return null!=(e=this.getAttribute(TB.PLAYER_SOFTWARE_NAME))?e:"mux-player"}get playerSoftwareVersion(){var e;return null!=(e=this.getAttribute(TB.PLAYER_SOFTWARE_VERSION))?e:_V}get beaconCollectionDomain(){var e;return null!=(e=this.getAttribute(TB.BEACON_COLLECTION_DOMAIN))?e:void 0}set beaconCollectionDomain(e){e!==this.beaconCollectionDomain&&(e?this.setAttribute(TB.BEACON_COLLECTION_DOMAIN,e):this.removeAttribute(TB.BEACON_COLLECTION_DOMAIN))}get maxResolution(){var e;return null!=(e=this.getAttribute(TB.MAX_RESOLUTION))?e:void 0}set maxResolution(e){e!==this.maxResolution&&(e?this.setAttribute(TB.MAX_RESOLUTION,e):this.removeAttribute(TB.MAX_RESOLUTION))}get minResolution(){var e;return null!=(e=this.getAttribute(TB.MIN_RESOLUTION))?e:void 0}set minResolution(e){e!==this.minResolution&&(e?this.setAttribute(TB.MIN_RESOLUTION,e):this.removeAttribute(TB.MIN_RESOLUTION))}get renditionOrder(){var e;return null!=(e=this.getAttribute(TB.RENDITION_ORDER))?e:void 0}set renditionOrder(e){e!==this.renditionOrder&&(e?this.setAttribute(TB.RENDITION_ORDER,e):this.removeAttribute(TB.RENDITION_ORDER))}get extraSourceParams(){return this.hasAttribute(jH.EXTRA_SOURCE_PARAMS)?[...new URLSearchParams(this.getAttribute(jH.EXTRA_SOURCE_PARAMS)).entries()].reduce(((e,[t,n])=>(e[t]=n,e)),{}):SV}set extraSourceParams(e){null==e?this.removeAttribute(jH.EXTRA_SOURCE_PARAMS):this.setAttribute(jH.EXTRA_SOURCE_PARAMS,new URLSearchParams(e).toString())}get customDomain(){var e;return null!=(e=this.getAttribute(TB.CUSTOM_DOMAIN))?e:void 0}set customDomain(e){e!==this.customDomain&&(e?this.setAttribute(TB.CUSTOM_DOMAIN,e):this.removeAttribute(TB.CUSTOM_DOMAIN))}get envKey(){var e;return null!=(e=wV(this,TB.ENV_KEY))?e:void 0}set envKey(e){this.setAttribute(TB.ENV_KEY,`${e}`)}get noVolumePref(){return this.hasAttribute(jH.NO_VOLUME_PREF)}set noVolumePref(e){e?this.setAttribute(jH.NO_VOLUME_PREF,""):this.removeAttribute(jH.NO_VOLUME_PREF)}get debug(){return null!=wV(this,TB.DEBUG)}set debug(e){e?this.setAttribute(TB.DEBUG,""):this.removeAttribute(TB.DEBUG)}get disableTracking(){return null!=wV(this,TB.DISABLE_TRACKING)}set disableTracking(e){this.toggleAttribute(TB.DISABLE_TRACKING,!!e)}get disableCookies(){return null!=wV(this,TB.DISABLE_COOKIES)}set disableCookies(e){e?this.setAttribute(TB.DISABLE_COOKIES,""):this.removeAttribute(TB.DISABLE_COOKIES)}get streamType(){var e,t,n;return null!=(n=null!=(t=this.getAttribute(TB.STREAM_TYPE))?t:null==(e=this.media)?void 0:e.streamType)?n:hN.UNKNOWN}set streamType(e){this.setAttribute(TB.STREAM_TYPE,`${e}`)}get defaultStreamType(){var e,t,n;return null!=(n=null!=(t=this.getAttribute(jH.DEFAULT_STREAM_TYPE))?t:null==(e=this.mediaController)?void 0:e.getAttribute(jH.DEFAULT_STREAM_TYPE))?n:hN.ON_DEMAND}set defaultStreamType(e){e?this.setAttribute(jH.DEFAULT_STREAM_TYPE,e):this.removeAttribute(jH.DEFAULT_STREAM_TYPE)}get targetLiveWindow(){var e,t;return this.hasAttribute(jH.TARGET_LIVE_WINDOW)?+this.getAttribute(jH.TARGET_LIVE_WINDOW):null!=(t=null==(e=this.media)?void 0:e.targetLiveWindow)?t:Number.NaN}set targetLiveWindow(e){e==this.targetLiveWindow||Number.isNaN(e)&&Number.isNaN(this.targetLiveWindow)||(null==e?this.removeAttribute(jH.TARGET_LIVE_WINDOW):this.setAttribute(jH.TARGET_LIVE_WINDOW,""+ +e))}get liveEdgeStart(){var e;return null==(e=this.media)?void 0:e.liveEdgeStart}get startTime(){return z$(wV(this,TB.START_TIME))}set startTime(e){this.setAttribute(TB.START_TIME,`${e}`)}get preferPlayback(){let e=this.getAttribute(TB.PREFER_PLAYBACK);if(e===mN||e===pN)return e}set preferPlayback(e){e!==this.preferPlayback&&(e===mN||e===pN?this.setAttribute(TB.PREFER_PLAYBACK,e):this.removeAttribute(TB.PREFER_PLAYBACK))}get metadata(){var e;return null==(e=this.media)?void 0:e.metadata}set metadata(e){O$(this,iV,rV).call(this),this.media?this.media.metadata={...QH(this),...e}:uH("underlying media element missing when trying to set metadata. metadata will not be set.")}get _hlsConfig(){var e;return null==(e=this.media)?void 0:e._hlsConfig}set _hlsConfig(e){O$(this,iV,rV).call(this),this.media?this.media._hlsConfig=e:uH("underlying media element missing when trying to set _hlsConfig. _hlsConfig will not be set.")}async addCuePoints(e){var t;if(O$(this,iV,rV).call(this),this.media)return null==(t=this.media)?void 0:t.addCuePoints(e);uH("underlying media element missing when trying to addCuePoints. cuePoints will not be added.")}get activeCuePoint(){var e;return null==(e=this.media)?void 0:e.activeCuePoint}get cuePoints(){var e,t;return null!=(t=null==(e=this.media)?void 0:e.cuePoints)?t:[]}getStartDate(){var e;return null==(e=this.media)?void 0:e.getStartDate()}get currentPdt(){var e;return null==(e=this.media)?void 0:e.currentPdt}get tokens(){let e=this.getAttribute(jH.PLAYBACK_TOKEN),t=this.getAttribute(jH.THUMBNAIL_TOKEN),n=this.getAttribute(jH.STORYBOARD_TOKEN);return{...x$(this,JH),...null!=e?{playback:e}:{},...null!=t?{thumbnail:t}:{},...null!=n?{storyboard:n}:{}}}set tokens(e){M$(this,JH,null!=e?e:{})}get playbackToken(){var e;return null!=(e=this.getAttribute(jH.PLAYBACK_TOKEN))?e:void 0}set playbackToken(e){this.setAttribute(jH.PLAYBACK_TOKEN,`${e}`)}get thumbnailToken(){var e;return null!=(e=this.getAttribute(jH.THUMBNAIL_TOKEN))?e:void 0}set thumbnailToken(e){this.setAttribute(jH.THUMBNAIL_TOKEN,`${e}`)}get storyboardToken(){var e;return null!=(e=this.getAttribute(jH.STORYBOARD_TOKEN))?e:void 0}set storyboardToken(e){this.setAttribute(jH.STORYBOARD_TOKEN,`${e}`)}addTextTrack(e,t,n,i){var r;let s=null==(r=this.media)?void 0:r.nativeEl;if(s)return RN(s,e,t,n,i)}removeTextTrack(e){var t;let n=null==(t=this.media)?void 0:t.nativeEl;if(n)return function(e,t){let n=Array.prototype.find.call(e.querySelectorAll("track"),(e=>e.track===t));null==n||n.remove()}(n,e)}get textTracks(){var e;return null==(e=this.media)?void 0:e.textTracks}};function wV(e,t){return e.media?e.media.getAttribute(t):e.getAttribute(t)}ZH=new WeakMap,JH=new WeakMap,eV=new WeakMap,tV=new WeakMap,nV=new WeakMap,iV=new WeakSet,rV=function(){var e,t,n;if(!x$(this,ZH)){M$(this,ZH,!0),O$(this,dV,cV).call(this);try{if(customElements.upgrade(this.mediaTheme),!(this.mediaTheme instanceof H$.HTMLElement))throw""}catch{uH("<media-theme> failed to upgrade!")}try{if(customElements.upgrade(this.media),!(this.media instanceof FB))throw""}catch{uH("<mux-video> failed to upgrade!")}try{if(customElements.upgrade(this.mediaController),!(this.mediaController instanceof dg))throw""}catch{uH("<media-controller> failed to upgrade!")}(function(e){e.querySelectorAll(":scope > track").forEach((t=>{var n;null==(n=e.media)||n.append(t.cloneNode())})),gH.forEach((t=>{var n;null==(n=e.media)||n.addEventListener(t,(t=>{e.dispatchEvent(new Event(t.type))}))}))})(this),O$(this,uV,hV).call(this),O$(this,mV,pV).call(this),O$(this,fV,gV).call(this),M$(this,eV,null==(t=null==(e=this.mediaController)?void 0:e.hasAttribute(Sp.USER_INACTIVE))||t),O$(this,vV,bV).call(this),null==(n=this.media)||n.addEventListener("streamtypechange",(()=>{O$(this,dV,cV).call(this)}))}},sV=new WeakSet,aV=function(){var e,t;try{null==(e=null==window?void 0:window.CSS)||e.registerProperty({name:"--media-primary-color",syntax:"<color>",inherits:!0}),null==(t=null==window?void 0:window.CSS)||t.registerProperty({name:"--media-secondary-color",syntax:"<color>",inherits:!0})}catch{}},oV=new WeakSet,lV=function(e){Object.assign(x$(this,nV),e),O$(this,dV,cV).call(this)},dV=new WeakSet,cV=function(e={}){!function(e,t){e.renderInto(t)}((e=>UH`
  <style>
    ${":host {\n  --media-control-display: var(--controls);\n  --media-loading-indicator-display: var(--loading-indicator);\n  --media-dialog-display: var(--dialog);\n  --media-play-button-display: var(--play-button);\n  --media-live-button-display: var(--live-button);\n  --media-seek-backward-button-display: var(--seek-backward-button);\n  --media-seek-forward-button-display: var(--seek-forward-button);\n  --media-mute-button-display: var(--mute-button);\n  --media-captions-button-display: var(--captions-button);\n  --media-captions-selectmenu-display: var(--captions-selectmenu, var(--media-captions-button-display));\n  --media-rendition-selectmenu-display: var(--rendition-selectmenu);\n  --media-audio-track-selectmenu-display: var(--audio-track-selectmenu);\n  --media-airplay-button-display: var(--airplay-button);\n  --media-pip-button-display: var(--pip-button);\n  --media-fullscreen-button-display: var(--fullscreen-button);\n  --media-cast-button-display: var(--cast-button);\n  --media-playback-rate-button-display: var(--playback-rate-button);\n  --media-playback-rate-selectmenu-display: var(--playback-rate-selectmenu);\n  --media-volume-range-display: var(--volume-range);\n  --media-time-range-display: var(--time-range);\n  --media-time-display-display: var(--time-display);\n  --media-duration-display-display: var(--duration-display);\n  --media-title-display-display: var(--title-display);\n\n  display: inline-block;\n  width: 100%;\n  line-height: 0;\n}\n\n/* Hide custom elements that are not defined yet */\n:not(:defined) {\n  display: none;\n}\n\na {\n  color: #fff;\n  font-size: 0.9em;\n  text-decoration: underline;\n}\n\nmedia-theme {\n  width: 100%;\n  height: 100%;\n  direction: ltr;\n}\n\nmedia-poster-image {\n  width: 100%;\n  height: 100%;\n}\n\nmedia-poster-image:not([src]):not([placeholdersrc]) {\n  display: none;\n}\n\n::part(top),\n[part~='top'] {\n  --media-control-display: var(--controls, var(--top-controls));\n  --media-play-button-display: var(--play-button, var(--top-play-button));\n  --media-live-button-display: var(--live-button, var(--top-live-button));\n  --media-seek-backward-button-display: var(--seek-backward-button, var(--top-seek-backward-button));\n  --media-seek-forward-button-display: var(--seek-forward-button, var(--top-seek-forward-button));\n  --media-mute-button-display: var(--mute-button, var(--top-mute-button));\n  --media-captions-button-display: var(--captions-button, var(--top-captions-button));\n  --media-captions-selectmenu-display: var(\n    --captions-selectmenu,\n    var(--media-captions-button-display, var(--top-captions-selectmenu))\n  );\n  --media-rendition-selectmenu-display: var(--rendition-selectmenu, var(--top-rendition-selectmenu));\n  --media-audio-track-selectmenu-display: var(--audio-track-selectmenu, var(--top-audio-track-selectmenu));\n  --media-airplay-button-display: var(--airplay-button, var(--top-airplay-button));\n  --media-pip-button-display: var(--pip-button, var(--top-pip-button));\n  --media-fullscreen-button-display: var(--fullscreen-button, var(--top-fullscreen-button));\n  --media-cast-button-display: var(--cast-button, var(--top-cast-button));\n  --media-playback-rate-button-display: var(--playback-rate-button, var(--top-playback-rate-button));\n  --media-playback-rate-selectmenu-display: var(\n    --captions-selectmenu,\n    var(--media-playback-rate-button-display, var(--top-playback-rate-selectmenu))\n  );\n  --media-volume-range-display: var(--volume-range, var(--top-volume-range));\n  --media-time-range-display: var(--time-range, var(--top-time-range));\n  --media-time-display-display: var(--time-display, var(--top-time-display));\n  --media-duration-display-display: var(--duration-display, var(--top-duration-display));\n  --media-title-display-display: var(--title-display, var(--top-title-display));\n}\n\n::part(center),\n[part~='center'] {\n  --media-control-display: var(--controls, var(--center-controls));\n  --media-play-button-display: var(--play-button, var(--center-play-button));\n  --media-live-button-display: var(--live-button, var(--center-live-button));\n  --media-seek-backward-button-display: var(--seek-backward-button, var(--center-seek-backward-button));\n  --media-seek-forward-button-display: var(--seek-forward-button, var(--center-seek-forward-button));\n  --media-mute-button-display: var(--mute-button, var(--center-mute-button));\n  --media-captions-button-display: var(--captions-button, var(--center-captions-button));\n  --media-captions-selectmenu-display: var(\n    --captions-selectmenu,\n    var(--media-captions-button-display, var(--center-captions-selectmenu))\n  );\n  --media-rendition-selectmenu-display: var(--rendition-selectmenu, var(--center-rendition-selectmenu));\n  --media-audio-track-selectmenu-display: var(--audio-track-selectmenu, var(--center-audio-track-selectmenu));\n  --media-airplay-button-display: var(--airplay-button, var(--center-airplay-button));\n  --media-pip-button-display: var(--pip-button, var(--center-pip-button));\n  --media-fullscreen-button-display: var(--fullscreen-button, var(--center-fullscreen-button));\n  --media-cast-button-display: var(--cast-button, var(--center-cast-button));\n  --media-playback-rate-button-display: var(--playback-rate-button, var(--center-playback-rate-button));\n  --media-playback-rate-selectmenu-display: var(\n    --playback-rate-selectmenu,\n    var(--media-playback-rate-button-display, var(--center-playback-rate-selectmenu))\n  );\n  --media-volume-range-display: var(--volume-range, var(--center-volume-range));\n  --media-time-range-display: var(--time-range, var(--center-time-range));\n  --media-time-display-display: var(--time-display, var(--center-time-display));\n  --media-duration-display-display: var(--duration-display, var(--center-duration-display));\n}\n\n::part(bottom),\n[part~='bottom'] {\n  --media-control-display: var(--controls, var(--bottom-controls));\n  --media-play-button-display: var(--play-button, var(--bottom-play-button));\n  --media-live-button-display: var(--live-button, var(--bottom-live-button));\n  --media-seek-backward-button-display: var(--seek-backward-button, var(--bottom-seek-backward-button));\n  --media-seek-forward-button-display: var(--seek-forward-button, var(--bottom-seek-forward-button));\n  --media-mute-button-display: var(--mute-button, var(--bottom-mute-button));\n  --media-captions-button-display: var(--captions-button, var(--bottom-captions-button));\n  --media-captions-selectmenu-display: var(\n    --captions-selectmenu,\n    var(--media-captions-button-display, var(--bottom-captions-selectmenu))\n  );\n  --media-rendition-selectmenu-display: var(--rendition-selectmenu, var(--bottom-rendition-selectmenu));\n  --media-audio-track-selectmenu-display: var(--audio-track-selectmenu, var(--bottom-audio-track-selectmenu));\n  --media-airplay-button-display: var(--airplay-button, var(--bottom-airplay-button));\n  --media-pip-button-display: var(--pip-button, var(--bottom-pip-button));\n  --media-fullscreen-button-display: var(--fullscreen-button, var(--bottom-fullscreen-button));\n  --media-cast-button-display: var(--cast-button, var(--bottom-cast-button));\n  --media-playback-rate-button-display: var(--playback-rate-button, var(--bottom-playback-rate-button));\n  --media-playback-rate-selectmenu-display: var(\n    --playback-rate-selectmenu,\n    var(--media-playback-rate-button-display, var(--bottom-playback-rate-selectmenu))\n  );\n  --media-volume-range-display: var(--volume-range, var(--bottom-volume-range));\n  --media-time-range-display: var(--time-range, var(--bottom-time-range));\n  --media-time-display-display: var(--time-display, var(--bottom-time-display));\n  --media-duration-display-display: var(--duration-display, var(--bottom-duration-display));\n  --media-title-display-display: var(--title-display, var(--bottom-title-display));\n}\n"}
  </style>
  ${$H(e)}
`)(function(e,t){var n;return{src:!e.playbackId&&e.src,playbackId:e.playbackId,hasSrc:!!e.playbackId||!!e.src,poster:e.poster,storyboard:e.storyboard,storyboardSrc:e.getAttribute(jH.STORYBOARD_SRC),placeholder:e.getAttribute("placeholder"),themeTemplate:zH(e),thumbnailTime:!e.tokens.thumbnail&&e.thumbnailTime,autoplay:e.autoplay,crossOrigin:e.crossOrigin,loop:e.loop,noHotKeys:e.hasAttribute(jH.NOHOTKEYS),hotKeys:e.getAttribute(jH.HOTKEYS),muted:e.muted,paused:e.paused,preload:e.preload,envKey:e.envKey,preferCmcd:e.preferCmcd,debug:e.debug,disableTracking:e.disableTracking,disableCookies:e.disableCookies,tokens:e.tokens,beaconCollectionDomain:e.beaconCollectionDomain,maxResolution:e.maxResolution,minResolution:e.minResolution,renditionOrder:e.renditionOrder,metadata:e.metadata,playerSoftwareName:e.playerSoftwareName,playerSoftwareVersion:e.playerSoftwareVersion,startTime:e.startTime,preferPlayback:e.preferPlayback,audio:e.audio,defaultStreamType:e.defaultStreamType,targetLiveWindow:e.getAttribute(TB.TARGET_LIVE_WINDOW),streamType:nH(e.getAttribute(TB.STREAM_TYPE)),primaryColor:e.getAttribute(jH.PRIMARY_COLOR),secondaryColor:e.getAttribute(jH.SECONDARY_COLOR),accentColor:e.getAttribute(jH.ACCENT_COLOR),forwardSeekOffset:e.forwardSeekOffset,backwardSeekOffset:e.backwardSeekOffset,defaultHiddenCaptions:e.defaultHiddenCaptions,defaultDuration:e.defaultDuration,defaultShowRemainingTime:e.defaultShowRemainingTime,hideDuration:XH(e),playbackRates:e.getAttribute(jH.PLAYBACK_RATES),customDomain:null!=(n=e.getAttribute(TB.CUSTOM_DOMAIN))?n:void 0,title:e.getAttribute(jH.TITLE),novolumepref:e.hasAttribute(jH.NO_VOLUME_PREF),...t,extraSourceParams:e.extraSourceParams}}(this,{...x$(this,nV),...e})),this.shadowRoot)},uV=new WeakSet,hV=function(){let e=e=>{var t,n;if(null==e||!e.startsWith("theme-"))return;let i=e.replace(/^theme-/,"");if(YH.includes(i))return;let r=this.getAttribute(e);null!=r?null==(t=this.mediaTheme)||t.setAttribute(i,r):null==(n=this.mediaTheme)||n.removeAttribute(i)};new MutationObserver((t=>{for(let{attributeName:n}of t)e(n)})).observe(this,{attributes:!0}),this.getAttributeNames().forEach(e)},mV=new WeakSet,pV=function(){var e;this.addEventListener("error",(e=>{let{detail:t}=e;if(t instanceof dN||(t=new dN(t.message,t.code,t.fatal)),null==t||!t.fatal)return cH(t),void(t.data&&cH(`${t.name} data:`,t.data));let{dialog:n,devlog:i}=HH(t,!window.navigator.onLine,this.playbackId,this.playbackToken);i.message&&hH(i),uH(t),t.data&&uH(`${t.name} data:`,t.data),O$(this,oV,lV).call(this,{isDialogOpen:!0,dialog:n})})),this.media&&(this.media.errorTranslator=(e={})=>{var t,n,i;if(!((null==(t=this.media)?void 0:t.error)instanceof dN))return e;let{devlog:r}=HH(null==(n=this.media)?void 0:n.error,!window.navigator.onLine,this.playbackId,this.playbackToken,!1);return{player_error_code:null==(i=this.media)?void 0:i.error.code,player_error_message:r.message?String(r.message):e.player_error_message,player_error_context:r.context?String(r.context):e.player_error_context}}),null==(e=this.media)||e.addEventListener("error",(e=>{var t,n;let{detail:i}=e;if(!i){let{message:e,code:r}=null!=(n=null==(t=this.media)?void 0:t.error)?n:{};i=new dN(e,r)}null!=i&&i.fatal&&this.dispatchEvent(new CustomEvent("error",{detail:i}))}))},fV=new WeakSet,gV=function(){var e,t,n,i;let r=()=>O$(this,dV,cV).call(this);null==(t=null==(e=this.media)?void 0:e.textTracks)||t.addEventListener("addtrack",r),null==(i=null==(n=this.media)?void 0:n.textTracks)||i.addEventListener("removetrack",r)},vV=new WeakSet,bV=function(){var e,t;if(!/Firefox/i.test(navigator.userAgent))return;let n,i=new WeakMap,r=()=>this.streamType===hN.LIVE&&!this.secondaryColor&&this.offsetWidth>=800,s=(e,t,n=!1)=>{r()||Array.from(e&&e.activeCues||[]).forEach((e=>{if(!(!e.snapToLines||e.line<-5||e.line>=0&&e.line<10))if(!t||this.paused){let t=e.text.split("\n").length,r=-3;this.streamType===hN.LIVE&&(r=-2);let s=r-t;if(e.line===s&&!n)return;i.has(e)||i.set(e,e.line),e.line=s}else setTimeout((()=>{e.line=i.get(e)||"auto"}),500)}))},a=()=>{var e,t;s(n,null!=(t=null==(e=this.mediaController)?void 0:e.hasAttribute(Sp.USER_INACTIVE))&&t)},o=()=>{var e,t;let i=Array.from((null==(t=null==(e=this.mediaController)?void 0:e.media)?void 0:t.textTracks)||[]).filter((e=>["subtitles","captions"].includes(e.kind)&&"showing"===e.mode))[0];i!==n&&(null==n||n.removeEventListener("cuechange",a)),n=i,null==n||n.addEventListener("cuechange",a),s(n,x$(this,eV))};o(),null==(e=this.textTracks)||e.addEventListener("change",o),null==(t=this.textTracks)||t.addEventListener("addtrack",o),this.addEventListener("userinactivechange",(()=>{var e,t;let i=null==(t=null==(e=this.mediaController)?void 0:e.hasAttribute(Sp.USER_INACTIVE))||t;x$(this,eV)!==i&&(M$(this,eV,i),s(n,x$(this,eV)))}))},H$.customElements.get("mux-player")||(H$.customElements.define("mux-player",kV),H$.MuxPlayerElement=kV);var LV={class:""},RV=["accept","multiple"];function CV(e){return function(e){if(Array.isArray(e))return IV(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return IV(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return IV(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function IV(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}const xV={props:{multiple:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},acceptExtensions:{type:String,default:""},maxFileSize:{type:Number,default:NaN},validateFn:{type:Function,default:function(){return!0}}},emits:["changed","validated"],setup:function(e,t){var n=t.emit,i=jt(),r=jt(!1),s=function(t){return!e.multiple&&t.length>1?"MULTIFILES_ERROR":function(t){var n=CV(new Set(e.acceptExtensions.toLowerCase().split(",").filter(Boolean)));return-1===Array.from(t).findIndex((function(e){var t=".".concat(e.name.toLowerCase().split(".").pop());return!n.includes(t)}))}(t)?function(t){return!!Number.isNaN(e.maxFileSize)||-1===Array.from(t).findIndex((function(t){return t.size>e.maxFileSize}))}(t)?e.validateFn(t):"FILE_SIZE_ERROR":"EXTENSION_ERROR"},a=function(e){var t=s(e);n("validated",t,e),!0===t&&n("changed",e),i.value=""};return{fsFileInput:i,isDragEnter:r,onFileSelect:function(e){a(e.dataTransfer.files)},openFileSelectWindow:function(e){i.value.click()},handleDrop:function(e){r.value=!1,a(e.dataTransfer.files)},validate:s}}};var DV=n(72),MV=n.n(DV),OV=n(663),PV={insert:"head",singleton:!1};MV()(OV.A,PV);OV.A.locals;var NV=n(262);const FV=(0,NV.A)(xV,[["render",function(e,t,n,i,r,s){return ia(),da("div",null,[ga("div",LV,[ga("button",{type:"button",class:Z(["btn",[i.isDragEnter?"":" dashed"]]),"data-icon":"upload","aria-label":"Upload a video",onClick:t[0]||(t[0]=Ul((function(){return i.openFileSelectWindow&&i.openFileSelectWindow.apply(i,arguments)}),["stop","prevent"])),onDragenter:t[1]||(t[1]=Ul((function(e){return i.isDragEnter=!0}),["stop","prevent"])),onDragover:Ul((function(){}),["stop","prevent"]),onDragleave:t[2]||(t[2]=Ul((function(e){return i.isDragEnter=!1}),["stop","prevent"])),onDrop:t[3]||(t[3]=Ul((function(){return i.handleDrop&&i.handleDrop.apply(i,arguments)}),["stop","prevent"]))}," Upload a video to MUX ",34),ga("input",{ref:"fsFileInput",id:"file-upload",name:"file-upload",accept:n.acceptExtensions,tabindex:"-1",multiple:n.multiple,type:"file",class:"sr-only",onChange:t[4]||(t[4]=function(){return i.onFileSelect&&i.onFileSelect.apply(i,arguments)})},null,40,RV)]),Tr(e.$slots,"files")])}]]);var UV=function(e){return zn("data-v-28f3dfbc"),e=e(),Xn(),e},BV={class:"mux-field-main flex-grow"},$V={class:"mux-field"},HV={class:""},VV={class:"mux-asset-menu"},WV=[UV((function(){return ga("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[ga("path",{path:"currentColor","stroke-linecap":"round","stroke-linejoin":"round",d:"M8.625 12a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H8.25m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H12m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0h-.375M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)}))],GV={key:0,class:"menu menu--disclosure",ref:"muxAssetMenu"},KV={class:"flex-grow"},qV={class:"flex flex-nowrap"},jV=UV((function(){return ga("span",null,"Add Language Track",-1)})),YV={class:"flex-grow"},zV={class:"flex flex-nowrap"},XV=UV((function(){return ga("span",null,"Remove Asset",-1)}));var QV,ZV=n(606),JV=Object.create,eW=Object.defineProperty,tW=Object.getOwnPropertyDescriptor,nW=Object.getOwnPropertyNames,iW=Object.getPrototypeOf,rW=Object.prototype.hasOwnProperty,sW=(e,t)=>function(){return t||(0,e[nW(e)[0]])((t={exports:{}}).exports,t),t.exports},aW=sW({"node_modules/global/window.js"(e,t){var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t.exports=n}}),oW=sW({"node_modules/is-function/index.js"(e,t){t.exports=function(e){if(!e)return!1;var t=n.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)};var n=Object.prototype.toString}}),lW=sW({"node_modules/parse-headers/parse-headers.js"(e,t){var n=function(e){return e.replace(/^\s+|\s+$/g,"")};t.exports=function(e){if(!e)return{};for(var t,i={},r=n(e).split("\n"),s=0;s<r.length;s++){var a=r[s],o=a.indexOf(":"),l=n(a.slice(0,o)).toLowerCase(),d=n(a.slice(o+1));void 0===i[l]?i[l]=d:(t=i[l],"[object Array]"===Object.prototype.toString.call(t)?i[l].push(d):i[l]=[i[l],d])}return i}}}),dW=sW({"node_modules/xtend/immutable.js"(e,t){t.exports=function(){for(var e={},t=0;t<arguments.length;t++){var i=arguments[t];for(var r in i)n.call(i,r)&&(e[r]=i[r])}return e};var n=Object.prototype.hasOwnProperty}}),cW=sW({"node_modules/xhr/index.js"(e,t){var n=aW(),i=oW(),r=lW(),s=dW();function a(e,t,n){var r=e;return i(t)?(n=t,"string"==typeof e&&(r={uri:e})):r=s(t,{uri:e}),r.callback=n,r}function o(e,t,n){return l(t=a(e,t,n))}function l(e){if(void 0===e.callback)throw new Error("callback argument missing");var t=!1,n=function(n,i,r){t||(t=!0,e.callback(n,i,r))};function i(){var e=void 0;if(e=c.response?c.response:c.responseText||function(e){try{if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;if(""===e.responseType&&!t)return e.responseXML}catch(e){}return null}(c),v)try{e=JSON.parse(e)}catch(e){}return e}function s(e){return clearTimeout(u),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,n(e,b)}function a(){if(!d){var t;clearTimeout(u),t=e.useXDR&&void 0===c.status?200:1223===c.status?204:c.status;var s=b,a=null;return 0!==t?(s={body:i(),statusCode:t,method:m,headers:{},url:h,rawRequest:c},c.getAllResponseHeaders&&(s.headers=r(c.getAllResponseHeaders()))):a=new Error("Internal XMLHttpRequest Error"),n(a,s,s.body)}}var l,d,c=e.xhr||null;c||(c=e.cors||e.useXDR?new o.XDomainRequest:new o.XMLHttpRequest);var u,h=c.url=e.uri||e.url,m=c.method=e.method||"GET",p=e.body||e.data,f=c.headers=e.headers||{},g=!!e.sync,v=!1,b={body:void 0,headers:{},statusCode:0,method:m,url:h,rawRequest:c};if("json"in e&&!1!==e.json&&(v=!0,f.accept||f.Accept||(f.Accept="application/json"),"GET"!==m&&"HEAD"!==m&&(f["content-type"]||f["Content-Type"]||(f["Content-Type"]="application/json"),p=JSON.stringify(!0===e.json?p:e.json))),c.onreadystatechange=function(){4===c.readyState&&setTimeout(a,0)},c.onload=a,c.onerror=s,c.onprogress=function(){},c.onabort=function(){d=!0},c.ontimeout=s,c.open(m,h,!g,e.username,e.password),g||(c.withCredentials=!!e.withCredentials),!g&&e.timeout>0&&(u=setTimeout((function(){if(!d){d=!0,c.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",s(e)}}),e.timeout)),c.setRequestHeader)for(l in f)f.hasOwnProperty(l)&&c.setRequestHeader(l,f[l]);else if(e.headers&&!function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(c.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(c),c.send(p||null),c}t.exports=o,t.exports.default=o,o.XMLHttpRequest=n.XMLHttpRequest||function(){},o.XDomainRequest="withCredentials"in new o.XMLHttpRequest?o.XMLHttpRequest:n.XDomainRequest,function(e,t){for(var n=0;n<e.length;n++)t(e[n])}(["get","put","post","patch","head","delete"],(function(e){o["delete"===e?"del":e]=function(t,n,i){return(n=a(t,n,i)).method=e.toUpperCase(),l(n)}}))}});function uW(e,t,...n){if(!e)throw new TypeError(hW(t,n))}function hW(e,t){let n=0;return e.replace(/%[os]/gu,(()=>mW(t[n++])))}function mW(e){return"object"!=typeof e||null===e?String(e):Object.prototype.toString.call(e)}var pW,fW="undefined"!=typeof window?window:"undefined"!=typeof self?self:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:void 0,gW=class{constructor(e,t){this.code=e,this.message=t}warn(...e){var t;try{pW;const n=(null!==(t=(new Error).stack)&&void 0!==t?t:"").replace(/^(?:.+?\n){2}/gu,"\n");console.warn(this.message,...e,n)}catch(e){}}},vW=new gW("W01","Unable to initialize event under dispatching."),bW=new gW("W02","Assigning any falsy value to 'cancelBubble' property has no effect."),yW=new gW("W03","Assigning any truthy value to 'returnValue' property has no effect."),EW=new gW("W04","Unable to preventDefault on non-cancelable events."),TW=new gW("W05","Unable to preventDefault inside passive event listener invocation."),_W=new gW("W06","An event listener wasn't added because it has been added already: %o, %o"),AW=new gW("W07","The %o option value was abandoned because the event listener wasn't added as duplicated."),SW=new gW("W08","The 'callback' argument must be a function or an object that has 'handleEvent' method: %o"),kW=(new gW("W09","Event attribute handler must be a function: %o"),class{static get NONE(){return wW}static get CAPTURING_PHASE(){return LW}static get AT_TARGET(){return RW}static get BUBBLING_PHASE(){return CW}constructor(e,t){Object.defineProperty(this,"isTrusted",{value:!1,enumerable:!0});const n=null!=t?t:{};IW.set(this,{type:String(e),bubbles:Boolean(n.bubbles),cancelable:Boolean(n.cancelable),composed:Boolean(n.composed),target:null,currentTarget:null,stopPropagationFlag:!1,stopImmediatePropagationFlag:!1,canceledFlag:!1,inPassiveListenerFlag:!1,dispatchFlag:!1,timeStamp:Date.now()})}get type(){return xW(this).type}get target(){return xW(this).target}get srcElement(){return xW(this).target}get currentTarget(){return xW(this).currentTarget}composedPath(){const e=xW(this).currentTarget;return e?[e]:[]}get NONE(){return wW}get CAPTURING_PHASE(){return LW}get AT_TARGET(){return RW}get BUBBLING_PHASE(){return CW}get eventPhase(){return xW(this).dispatchFlag?2:0}stopPropagation(){xW(this).stopPropagationFlag=!0}get cancelBubble(){return xW(this).stopPropagationFlag}set cancelBubble(e){e?xW(this).stopPropagationFlag=!0:bW.warn()}stopImmediatePropagation(){const e=xW(this);e.stopPropagationFlag=e.stopImmediatePropagationFlag=!0}get bubbles(){return xW(this).bubbles}get cancelable(){return xW(this).cancelable}get returnValue(){return!xW(this).canceledFlag}set returnValue(e){e?yW.warn():DW(xW(this))}preventDefault(){DW(xW(this))}get defaultPrevented(){return xW(this).canceledFlag}get composed(){return xW(this).composed}get isTrusted(){return!1}get timeStamp(){return xW(this).timeStamp}initEvent(e,t=!1,n=!1){const i=xW(this);i.dispatchFlag?vW.warn():IW.set(this,{...i,type:String(e),bubbles:Boolean(t),cancelable:Boolean(n),target:null,currentTarget:null,stopPropagationFlag:!1,stopImmediatePropagationFlag:!1,canceledFlag:!1})}}),wW=0,LW=1,RW=2,CW=3,IW=new WeakMap;function xW(e,t="this"){const n=IW.get(e);return uW(null!=n,"'%s' must be an object that Event constructor created, but got another one: %o",t,e),n}function DW(e){e.inPassiveListenerFlag?TW.warn():e.cancelable?e.canceledFlag=!0:EW.warn()}Object.defineProperty(kW,"NONE",{enumerable:!0}),Object.defineProperty(kW,"CAPTURING_PHASE",{enumerable:!0}),Object.defineProperty(kW,"AT_TARGET",{enumerable:!0}),Object.defineProperty(kW,"BUBBLING_PHASE",{enumerable:!0});var MW,OW=Object.getOwnPropertyNames(kW.prototype);for(let e=0;e<OW.length;++e)"constructor"!==OW[e]&&Object.defineProperty(kW.prototype,OW[e],{enumerable:!0});void 0!==fW&&void 0!==fW.Event&&Object.setPrototypeOf(kW.prototype,fW.Event.prototype);var PW={INDEX_SIZE_ERR:1,DOMSTRING_SIZE_ERR:2,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,INVALID_CHARACTER_ERR:5,NO_DATA_ALLOWED_ERR:6,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INUSE_ATTRIBUTE_ERR:10,INVALID_STATE_ERR:11,SYNTAX_ERR:12,INVALID_MODIFICATION_ERR:13,NAMESPACE_ERR:14,INVALID_ACCESS_ERR:15,VALIDATION_ERR:16,TYPE_MISMATCH_ERR:17,SECURITY_ERR:18,NETWORK_ERR:19,ABORT_ERR:20,URL_MISMATCH_ERR:21,QUOTA_EXCEEDED_ERR:22,TIMEOUT_ERR:23,INVALID_NODE_TYPE_ERR:24,DATA_CLONE_ERR:25};function NW(e){const t=Object.keys(PW);for(let n=0;n<t.length;++n){const i=t[n],r=PW[i];Object.defineProperty(e,i,{get:()=>r,configurable:!0,enumerable:!0})}}var FW=class extends kW{static wrap(e){return new(HW(e))(e)}constructor(e){super(e.type,{bubbles:e.bubbles,cancelable:e.cancelable,composed:e.composed}),e.cancelBubble&&super.stopPropagation(),e.defaultPrevented&&super.preventDefault(),UW.set(this,{original:e});const t=Object.keys(e);for(let n=0;n<t.length;++n){const i=t[n];i in this||Object.defineProperty(this,i,VW(e,i))}}stopPropagation(){super.stopPropagation();const{original:e}=BW(this);"stopPropagation"in e&&e.stopPropagation()}get cancelBubble(){return super.cancelBubble}set cancelBubble(e){super.cancelBubble=e;const{original:t}=BW(this);"cancelBubble"in t&&(t.cancelBubble=e)}stopImmediatePropagation(){super.stopImmediatePropagation();const{original:e}=BW(this);"stopImmediatePropagation"in e&&e.stopImmediatePropagation()}get returnValue(){return super.returnValue}set returnValue(e){super.returnValue=e;const{original:t}=BW(this);"returnValue"in t&&(t.returnValue=e)}preventDefault(){super.preventDefault();const{original:e}=BW(this);"preventDefault"in e&&e.preventDefault()}get timeStamp(){const{original:e}=BW(this);return"timeStamp"in e?e.timeStamp:super.timeStamp}},UW=new WeakMap;function BW(e){const t=UW.get(e);return uW(null!=t,"'this' is expected an Event object, but got",e),t}var $W=new WeakMap;function HW(e){const t=Object.getPrototypeOf(e);if(null==t)return FW;let n=$W.get(t);return null==n&&(n=function(e,t){class n extends e{}const i=Object.keys(t);for(let e=0;e<i.length;++e)Object.defineProperty(n.prototype,i[e],VW(t,i[e]));return n}(HW(t),t),$W.set(t,n)),n}function VW(e,t){const n=Object.getOwnPropertyDescriptor(e,t);return{get(){const e=BW(this).original,n=e[t];return"function"==typeof n?n.bind(e):n},set(e){BW(this).original[t]=e},configurable:n.configurable,enumerable:n.enumerable}}function WW(e){return!(1&~e.flags)}function GW(e){return!(2&~e.flags)}function KW(e){return!(4&~e.flags)}function qW(e){return!(8&~e.flags)}function jW({callback:e},t,n){try{"function"==typeof e?e.call(t,n):"function"==typeof e.handleEvent&&e.handleEvent(n)}catch(e){!function(e){try{const t=e instanceof Error?e:new Error(mW(e));if(QV)return void QV(t);if("function"==typeof dispatchEvent&&"function"==typeof ErrorEvent)dispatchEvent(new ErrorEvent("error",{error:t,message:t.message}));else if(void 0!==ZV&&"function"==typeof ZV.emit)return void ZV.emit("uncaughtException",t);console.error(t)}catch(e){}}(e)}}function YW({listeners:e},t,n){for(let i=0;i<e.length;++i)if(e[i].callback===t&&WW(e[i])===n)return i;return-1}function zW(e,t,n){const i=YW(e,t,n);return-1!==i&&XW(e,i)}function XW(e,t,n=!1){const i=e.listeners[t];return function(e){e.flags|=8}(i),i.signal&&i.signal.removeEventListener("abort",i.signalListener),e.cow&&!n?(e.cow=!1,e.listeners=e.listeners.filter(((e,n)=>n!==t)),!1):(e.listeners.splice(t,1),!0)}$W.set(Object.prototype,FW),void 0!==fW&&void 0!==fW.Event&&$W.set(fW.Event.prototype,FW);var QW=class{constructor(){ZW.set(this,Object.create(null))}addEventListener(e,t,n){const i=JW(this),{callback:r,capture:s,once:a,passive:o,signal:l,type:d}=function(e,t,n){var i;if(eG(t),"object"==typeof n&&null!==n)return{type:String(e),callback:null!=t?t:void 0,capture:Boolean(n.capture),passive:Boolean(n.passive),once:Boolean(n.once),signal:null!==(i=n.signal)&&void 0!==i?i:void 0};return{type:String(e),callback:null!=t?t:void 0,capture:Boolean(n),passive:!1,once:!1,signal:void 0}}(e,t,n);if(null==r||(null==l?void 0:l.aborted))return;const c=function(e,t){var n;return null!==(n=e[t])&&void 0!==n?n:e[t]={attrCallback:void 0,attrListener:void 0,cow:!1,listeners:[]}}(i,d),u=YW(c,r,s);-1===u?function(e,t,n,i,r,s){let a;s&&(a=zW.bind(null,e,t,n),s.addEventListener("abort",a));const o=function(e,t,n,i,r,s){return{callback:e,flags:(t?1:0)|(n?2:0)|(i?4:0),signal:r,signalListener:s}}(t,n,i,r,s,a);e.cow?(e.cow=!1,e.listeners=[...e.listeners,o]):e.listeners.push(o)}(c,r,s,o,a,l):function(e,t,n,i){_W.warn(WW(e)?"capture":"bubble",e.callback),GW(e)!==t&&AW.warn("passive");KW(e)!==n&&AW.warn("once");e.signal!==i&&AW.warn("signal")}(c.listeners[u],o,a,l)}removeEventListener(e,t,n){const i=JW(this),{callback:r,capture:s,type:a}=function(e,t,n){if(eG(t),"object"==typeof n&&null!==n)return{type:String(e),callback:null!=t?t:void 0,capture:Boolean(n.capture)};return{type:String(e),callback:null!=t?t:void 0,capture:Boolean(n)}}(e,t,n),o=i[a];null!=r&&o&&zW(o,r,s)}dispatchEvent(e){const t=JW(this)[String(e.type)];if(null==t)return!0;const n=e instanceof kW?e:FW.wrap(e),i=xW(n,"event");if(i.dispatchFlag)throw r="This event has been in dispatching.",fW.DOMException?new fW.DOMException(r,"InvalidStateError"):(null==MW&&(MW=class e extends Error{constructor(t){super(t),Error.captureStackTrace&&Error.captureStackTrace(this,e)}get code(){return 11}get name(){return"InvalidStateError"}},Object.defineProperties(MW.prototype,{code:{enumerable:!0},name:{enumerable:!0}}),NW(MW),NW(MW.prototype)),new MW(r));var r;if(i.dispatchFlag=!0,i.target=i.currentTarget=this,!i.stopPropagationFlag){const{cow:e,listeners:r}=t;t.cow=!0;for(let s=0;s<r.length;++s){const a=r[s];if(!qW(a)&&(KW(a)&&XW(t,s,!e)&&(s-=1),i.inPassiveListenerFlag=GW(a),jW(a,this,n),i.inPassiveListenerFlag=!1,i.stopImmediatePropagationFlag))break}e||(t.cow=!1)}return i.target=null,i.currentTarget=null,i.stopImmediatePropagationFlag=!1,i.stopPropagationFlag=!1,i.dispatchFlag=!1,!i.canceledFlag}},ZW=new WeakMap;function JW(e,t="this"){const n=ZW.get(e);return uW(null!=n,"'%s' must be an object that EventTarget constructor created, but got another one: %o",t,e),n}function eG(e){if("function"!=typeof e&&("object"!=typeof e||null===e||"function"!=typeof e.handleEvent)){if(null!=e&&"object"!=typeof e)throw new TypeError(hW(SW.message,[e]));SW.warn(e)}}var tG=Object.getOwnPropertyNames(QW.prototype);for(let e=0;e<tG.length;++e)"constructor"!==tG[e]&&Object.defineProperty(QW.prototype,tG[e],{enumerable:!0});void 0!==fW&&void 0!==fW.EventTarget&&Object.setPrototypeOf(QW.prototype,fW.EventTarget.prototype);var nG,iG,rG,sG=(nG=cW(),rG=null!=nG?JV(iW(nG)):{},((e,t,n,i)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of nW(t))rW.call(e,r)||r===n||eW(e,r,{get:()=>t[r],enumerable:!(i=tW(t,r))||i.enumerable});return e})(!iG&&nG&&nG.__esModule?rG:eW(rG,"default",{value:nG,enumerable:!0}),nG)),aG=30720,oG=512e3,lG=256,dG=(e,{minChunkSize:t=256,maxChunkSize:n=512e3}={})=>null==e||"number"==typeof e&&e>=256&&e%256==0&&e>=t&&e<=n,cG=(e,{minChunkSize:t=256,maxChunkSize:n=512e3}={})=>new TypeError(`chunkSize ${e} must be a positive number in multiples of 256, between ${t} and ${n}`),uG=class{constructor(e,t={}){var n,i,r;if(this.readableStream=e,!dG(t.defaultChunkSize,t))throw cG(t.defaultChunkSize,t);this.defaultChunkSize=null!=(n=t.defaultChunkSize)?n:aG,this.minChunkSize=null!=(i=t.minChunkSize)?i:lG,this.maxChunkSize=null!=(r=t.maxChunkSize)?r:oG}get chunkSize(){var e;return null!=(e=this._chunkSize)?e:this.defaultChunkSize}set chunkSize(e){if(!dG(e,this))throw cG(e,this);this._chunkSize=e}get chunkByteSize(){return 1024*this.chunkSize}get error(){return this._error}async*[Symbol.asyncIterator](){let e;const t=this.readableStream.getReader();try{for(;;){const{done:n,value:i}=await t.read();if(n){if(e){const t=e;e=void 0,yield t}break}const r=i instanceof Uint8Array?new Blob([i],{type:"application/octet-stream"}):i;for(e=e?new Blob([e,r]):r;e;){if(e.size===this.chunkByteSize){const t=e;e=void 0,yield t;break}if(e.size<this.chunkByteSize)break;{const t=e.slice(0,this.chunkByteSize);e=e.slice(this.chunkByteSize),yield t}}}}catch(e){this._error=e}finally{if(e){const t=e;e=void 0,yield t}return void t.releaseLock()}}},hG=class{constructor(e,t={}){var n,i,r;if(this.file=e,!dG(t.defaultChunkSize,t))throw cG(t.defaultChunkSize,t);this.defaultChunkSize=null!=(n=t.defaultChunkSize)?n:aG,this.minChunkSize=null!=(i=t.minChunkSize)?i:lG,this.maxChunkSize=null!=(r=t.maxChunkSize)?r:oG}get chunkSize(){var e;return null!=(e=this._chunkSize)?e:this.defaultChunkSize}set chunkSize(e){if(!dG(e,this))throw cG(e,this);this._chunkSize=e}get chunkByteSize(){return 1024*this.chunkSize}get error(){return this._error}async*[Symbol.asyncIterator](){const e=new FileReader;let t=0;const n=()=>new Promise((n=>{if(t>=this.file.size)return void n(void 0);const i=Math.min(this.chunkByteSize,this.file.size-t);e.onload=()=>{null!==e.result?n(new Blob([e.result],{type:"application/octet-stream"})):n(void 0)},e.readAsArrayBuffer(this.file.slice(t,t+i))}));try{for(;;){const e=await n();if(!e)break;t+=e.size,yield e}}catch(e){this._error=e}}},mG=[200,201,202,204,308],pG=[408,502,503,504],fG=[308],gG=(e,t)=>!!e&&mG.includes(e.statusCode),vG=(e,t)=>t.attemptCount>=t.attempts||!(gG(e)||((e,{retryCodes:t=pG})=>!e||t.includes(e.statusCode))(e,t)),bG=class{static createUpload(e){return new bG(e)}constructor(e){if(this.eventTarget=new QW,this.endpoint=e.endpoint,this.file=e.file,this.headers=e.headers||{},this.method=e.method||"PUT",this.attempts=e.attempts||5,this.delayBeforeAttempt=e.delayBeforeAttempt||1,this.retryCodes=e.retryCodes||pG,this.dynamicChunkSize=e.dynamicChunkSize||!1,this.maxFileBytes=1024*(e.maxFileSize||0),this.chunkCount=0,this.attemptCount=0,this._offline="undefined"!=typeof window&&!window.navigator.onLine,this._paused=!1,this.success=!1,this.nextChunkRangeStart=0,e.useLargeFileWorkaround){const t=n=>{this.chunkedIterable.error&&(console.warn(`Unable to read file of size ${this.file.size} bytes via a ReadableStream. Falling back to in-memory FileReader!`),n.stopImmediatePropagation(),this.chunkedIterable=new hG(this.file,{...e,defaultChunkSize:e.chunkSize}),this.chunkedIterator=this.chunkedIterable[Symbol.asyncIterator](),this.getEndpoint().then((()=>{this.sendChunks()})),this.off("error",t))};this.on("error",t)}this.chunkedIterable=new uG(this.file.stream(),{...e,defaultChunkSize:e.chunkSize}),this.chunkedIterator=this.chunkedIterable[Symbol.asyncIterator](),this.totalChunks=Math.ceil(this.file.size/this.chunkByteSize),this.validateOptions(),this.getEndpoint().then((()=>this.sendChunks())),"undefined"!=typeof window&&(window.addEventListener("online",(()=>{this.offline&&(this._offline=!1,this.dispatch("online"),this.sendChunks())})),window.addEventListener("offline",(()=>{this.offline||(this._offline=!0,this.dispatch("offline"))})))}get maxChunkSize(){var e,t;return null!=(t=null==(e=this.chunkedIterable)?void 0:e.maxChunkSize)?t:oG}get minChunkSize(){var e,t;return null!=(t=null==(e=this.chunkedIterable)?void 0:e.minChunkSize)?t:lG}get chunkSize(){var e,t;return null!=(t=null==(e=this.chunkedIterable)?void 0:e.chunkSize)?t:aG}set chunkSize(e){this.chunkedIterable.chunkSize=e}get chunkByteSize(){return this.chunkedIterable.chunkByteSize}get totalChunkSize(){return Math.ceil(this.file.size/this.chunkByteSize)}on(e,t){this.eventTarget.addEventListener(e,t)}once(e,t){this.eventTarget.addEventListener(e,t,{once:!0})}off(e,t){this.eventTarget.removeEventListener(e,t)}get offline(){return this._offline}get paused(){return this._paused}abort(){var e;this.pause(),null==(e=this.currentXhr)||e.abort()}pause(){this._paused=!0}resume(){this._paused&&(this._paused=!1,this.sendChunks())}get successfulPercentage(){return this.nextChunkRangeStart/this.file.size}dispatch(e,t){const n=new CustomEvent(e,{detail:t});this.eventTarget.dispatchEvent(n)}validateOptions(){if(!this.endpoint||"function"!=typeof this.endpoint&&"string"!=typeof this.endpoint)throw new TypeError("endpoint must be defined as a string or a function that returns a promise");if(!(this.file instanceof File))throw new TypeError("file must be a File object");if(this.headers&&"function"!=typeof this.headers&&"object"!=typeof this.headers)throw new TypeError("headers must be null, an object, or a function that returns an object or a promise");if(!dG(this.chunkSize,{maxChunkSize:this.maxChunkSize,minChunkSize:this.minChunkSize}))throw cG(this.chunkSize,{maxChunkSize:this.maxChunkSize,minChunkSize:this.minChunkSize});if(this.maxChunkSize&&("number"!=typeof this.maxChunkSize||this.maxChunkSize<256||this.maxChunkSize%256!=0||this.maxChunkSize<this.chunkSize||this.maxChunkSize<this.minChunkSize))throw new TypeError(`maxChunkSize must be a positive number in multiples of 256, and larger than or equal to both ${this.minChunkSize} and ${this.chunkSize}`);if(this.minChunkSize&&("number"!=typeof this.minChunkSize||this.minChunkSize<256||this.minChunkSize%256!=0||this.minChunkSize>this.chunkSize||this.minChunkSize>this.maxChunkSize))throw new TypeError(`minChunkSize must be a positive number in multiples of 256, and smaller than ${this.chunkSize} and ${this.maxChunkSize}`);if(this.maxFileBytes>0&&this.maxFileBytes<this.file.size)throw new Error(`file size exceeds maximum (${this.file.size} > ${this.maxFileBytes})`);if(this.attempts&&("number"!=typeof this.attempts||this.attempts<=0))throw new TypeError("retries must be a positive number");if(this.delayBeforeAttempt&&("number"!=typeof this.delayBeforeAttempt||this.delayBeforeAttempt<0))throw new TypeError("delayBeforeAttempt must be a positive number")}getEndpoint(){return"string"==typeof this.endpoint?(this.endpointValue=this.endpoint,Promise.resolve(this.endpoint)):this.endpoint(this.file).then((e=>(this.endpointValue=e,this.endpointValue)))}xhrPromise(e){const t=e=>{e.upload.onprogress=e=>{var t;const n=this.totalChunks-this.chunkCount,i=(this.file.size-this.nextChunkRangeStart)/this.file.size/n,r=e.loaded/(null!=(t=e.total)?t:this.chunkByteSize)*i;this.dispatch("progress",Math.min(100*(this.successfulPercentage+r),100))}};return new Promise(((n,i)=>{this.currentXhr=(0,sG.default)({...e,beforeSend:t},((e,t)=>(this.currentXhr=void 0,e?i(e):n(t))))}))}async sendChunk(e){const t=this.nextChunkRangeStart,n=t+e.size-1,i={...await("function"==typeof this.headers?this.headers():this.headers),"Content-Type":this.file.type,"Content-Range":`bytes ${t}-${n}/${this.file.size}`};return this.dispatch("attempt",{chunkNumber:this.chunkCount,totalChunks:this.totalChunks,chunkSize:this.chunkSize}),this.xhrPromise({headers:i,url:this.endpointValue,method:this.method,body:e})}async sendChunkWithRetries(e){const t=async(e,t)=>{var n;const i=((new Date).getTime()-this.lastChunkStart.getTime())/1e3;if(this.dispatch("chunkSuccess",{chunk:this.chunkCount,chunkSize:this.chunkSize,attempts:this.attemptCount,timeInterval:i,response:e}),this.attemptCount=0,this.chunkCount=(null!=(n=this.chunkCount)?n:0)+1,this.nextChunkRangeStart=this.nextChunkRangeStart+this.chunkByteSize,this.dynamicChunkSize){let e=this.chunkSize;i<10?e=Math.min(2*this.chunkSize,this.maxChunkSize):i>30&&(e=Math.max(this.chunkSize/2,this.minChunkSize)),this.chunkSize=256*Math.ceil(e/256);const t=(this.file.size-this.nextChunkRangeStart)/this.chunkByteSize;this.totalChunks=Math.ceil(this.chunkCount+t)}return!0},n=async(e,t)=>(this.dispatch("progress",Math.min(100*this.successfulPercentage,100)),this.dispatch("error",{message:`Server responded with ${e.statusCode}. Stopping upload.`,chunk:this.chunkCount,attempts:this.attemptCount,response:e}),!1),i=async(t,n)=>(this.dispatch("attemptFailure",{message:`An error occured uploading chunk ${this.chunkCount}. ${this.attempts-this.attemptCount} retries left.`,chunkNumber:this.chunkCount,attemptsLeft:this.attempts-this.attemptCount,response:t}),new Promise((t=>{setTimeout((async()=>{if(this._paused||this.offline)return this.pendingChunk=e,void t(!1);const n=await this.sendChunkWithRetries(e);t(n)}),1e3*this.delayBeforeAttempt)})));let r;try{this.attemptCount=this.attemptCount+1,this.lastChunkStart=new Date,r=await this.sendChunk(e)}catch(e){"number"==typeof(null==e?void 0:e.statusCode)&&(r=e)}const s={retryCodes:this.retryCodes,attemptCount:this.attemptCount,attempts:this.attempts,currentChunkEndByte:this.nextChunkRangeStart+e.size-1};return((e,t)=>{var n;if(!e||!fG.includes(e.statusCode)||!(null==(n=e.headers)?void 0:n.range))return!1;const i=e.headers.range.match(/bytes=(\d+)-(\d+)/);return!!i&&parseInt(i[2],10)!==t.currentChunkEndByte})(r,s)?i(r):gG(r)?t(r):vG(r,s)?n(r):i(r)}async sendChunks(){if(this.pendingChunk&&!this._paused&&!this.offline){const e=this.pendingChunk;this.pendingChunk=void 0;const t=await this.sendChunkWithRetries(e);this.success&&t&&this.dispatch("success")}for(;!(this.success||this._paused||this.offline);){const{value:e,done:t}=await this.chunkedIterator.next();let n=!e&&t;if(e&&(n=await this.sendChunkWithRetries(e)),this.chunkedIterable.error)return n=!1,void this.dispatch("error",{message:`Unable to read file of size ${this.file.size} bytes. Try loading from another browser.`});if(this.success=!!t,this.success&&n&&this.dispatch("success"),!n)return}}};Ct({assets:[],asset:null,total:0,selected:null,loading:!1,params:{limit:12,page:1}}),Ct({progress:0,progressTotal:100,uploading:!1,uploadingFile:null});var yG=function(e){return zn("data-v-05a8ed02"),e=e(),Xn(),e},EG={class:"mux-asset-track-form"},TG={class:"field width-100"},_G=_a('<div class="heading" data-v-05a8ed02><label id="mux-track-url-heading" for="mux-track-url" data-v-05a8ed02> Caption/Subtitles File URL <span class="visually-hidden" data-v-05a8ed02>Required</span><span class="required" aria-hidden="true" data-v-05a8ed02></span><span class="info" data-v-05a8ed02><ol data-v-05a8ed02><li data-v-05a8ed02>Upload the caption file of the asset in either .srt or .vtt format to Craft CMS Assets.</li><li data-v-05a8ed02>Retrieve the URL associated with this input.</li></ol></span></label></div>',1),AG={class:"input ltr"},SG={class:"field-group"},kG={class:"field width-100"},wG=yG((function(){return ga("div",{class:"heading"},[ga("label",{id:"mux-track-language-name-heading",for:"mux-track-language-name"},[Ta("Language Name "),ga("span",{class:"visually-hidden"},"Required"),ga("span",{class:"required","aria-hidden":"true"})])],-1)})),LG={class:"input ltr"},RG={class:"field width-100"},CG=yG((function(){return ga("div",{class:"heading"},[ga("label",{id:"mux-track-language-code-heading",for:"mux-track-language-code"},[Ta("Language Code"),ga("span",{class:"visually-hidden"},"Required"),ga("span",{class:"required","aria-hidden":"true"})])],-1)})),IG={class:"input ltr"},xG={class:"field lightswitch-field"},DG=yG((function(){return ga("div",{class:"heading"},[ga("label",{id:"mux-track-closed-captions-heading",for:"mux-track-closed-captions"},"Closed Captions")],-1)})),MG={class:"input ltr"},OG=[yG((function(){return ga("div",{class:"handle"},null,-1)}))],PG={class:"field"},NG=[yG((function(){return ga("div",{class:"label"},"Add Track",-1)})),yG((function(){return ga("div",{class:"spinner spinner-absolute"},null,-1)}))];const FG={__name:"MuxAssetTrackForm",props:{assetId:{type:[Number,String],required:!0}},setup:function(e){var t=os("emitter"),n=e,i=jt(!1),r=Ct({url:"",type:"text",text_type:"subtitles",language_code:"",name:"",closed_captions:!0}),s=function(e){i.value=!0,function(e,t){return new Promise((function(n,i){var r={id:e,track:t};r[window.Craft.csrfTokenName]=window.Craft.csrfTokenValue,fetch("/actions/mux/assets/add-asset-track-by-id",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(r)}).then((function(e){if(!e.ok)throw new Error("HTTP error ".concat(e.status));return e.json()})).then((function(e){n(e)})).catch((function(e){console.log(e),i("Adding asset track failed!")}))}))}(n.assetId,r).then((function(e){i.value=!1,t.emit("mux-asset-track-added")})).catch((function(e){i.value=!1}))};return function(e,t){return ia(),da("div",EG,[ga("div",TG,[_G,ga("div",AG,[Di(ga("input",{id:"mux-track-url","onUpdate:modelValue":t[0]||(t[0]=function(e){return r.url=e}),type:"text",class:"nicetext code text fullwidth",autocomplete:"off",placeholder:"",dir:"ltr",required:""},null,512),[[kl,r.url]])])]),ga("div",SG,[ga("div",kG,[wG,ga("div",LG,[Di(ga("input",{id:"mux-track-language-name","onUpdate:modelValue":t[1]||(t[1]=function(e){return r.name=e}),type:"text",class:"nicetext text fullwidth",autocomplete:"off",placeholder:"US English",dir:"ltr",required:""},null,512),[[kl,r.name]])])]),ga("div",RG,[CG,ga("div",IG,[Di(ga("input",{id:"mux-track-language-code","onUpdate:modelValue":t[2]||(t[2]=function(e){return r.language_code=e}),type:"text",class:"nicetext text fullwidth",autocomplete:"off",placeholder:"en-US",dir:"ltr",required:""},null,512),[[kl,r.language_code]])])]),ga("div",xG,[DG,ga("div",MG,[ga("button",{id:"mux-track-closed-captions",type:"button",class:Z(["lightswitch",[r.closed_captions?"on":""]]),role:"switch","aria-checked":"true","aria-labelledby":"mux-track-closed-captions","aria-describedby":"mux-track-closed-captions-instructions",onClick:t[4]||(t[4]=Ul((function(e){return r.closed_captions=!r.closed_captions}),["prevent"]))},[ga("div",{class:"lightswitch-container",style:j([r.closed_captions?"margin-left: 0px;":"margin-left: -12px;"])},OG,4),Di(ga("input",{"onUpdate:modelValue":t[3]||(t[3]=function(e){return r.closed_captions=e}),type:"hidden",name:"mux-track-closed-captions"},null,512),[[kl,r.closed_captions]])],2)])])]),ga("div",PG,[ga("button",{type:"button",class:Z(["btn submit",{loading:i.value}]),onClick:t[5]||(t[5]=function(e){return s()})},NG,2)])])}}};var UG=n(49),BG={insert:"head",singleton:!1};MV()(UG.A,BG);UG.A.locals;const $G=(0,NV.A)(FG,[["__scopeId","data-v-05a8ed02"]]);function HG(e){return!!Ee()&&(Te(e),!0)}function VG(e){return"function"==typeof e?e():Zt(e)}const WG="undefined"!=typeof window&&"undefined"!=typeof document,GG=("undefined"!=typeof WorkerGlobalScope&&(globalThis,WorkerGlobalScope),Object.prototype.toString),KG=e=>"[object Object]"===GG.call(e),qG=()=>{},jG=YG();function YG(){var e,t;return WG&&(null==(e=null==window?void 0:window.navigator)?void 0:e.userAgent)&&(/iP(ad|hone|od)/.test(window.navigator.userAgent)||(null==(t=null==window?void 0:window.navigator)?void 0:t.maxTouchPoints)>2&&/iPad|Macintosh/.test(null==window?void 0:window.navigator.userAgent))}function zG(e){const t=Object.create(null);return n=>t[n]||(t[n]=e(n))}const XG=/\B([A-Z])/g,QG=(zG((e=>e.replace(XG,"-$1").toLowerCase())),/-(\w)/g);zG((e=>e.replace(QG,((e,t)=>t?t.toUpperCase():""))));function ZG(e){var t;const n=VG(e);return null!=(t=null==n?void 0:n.$el)?t:n}const JG=WG?window:void 0;WG&&window.document,WG&&window.navigator,WG&&window.location;function eK(...e){let t,n,i,r;if("string"==typeof e[0]||Array.isArray(e[0])?([n,i,r]=e,t=JG):[t,n,i,r]=e,!t)return qG;Array.isArray(n)||(n=[n]),Array.isArray(i)||(i=[i]);const s=[],a=()=>{s.forEach((e=>e())),s.length=0},o=Li((()=>[ZG(t),VG(r)]),(([e,t])=>{if(a(),!e)return;const r=KG(t)?{...t}:t;s.push(...n.flatMap((t=>i.map((n=>((e,t,n,i)=>(e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)))(e,t,n,r))))))}),{immediate:!0,flush:"post"}),l=()=>{o(),a()};return HG(l),l}let tK=!1;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;Number.POSITIVE_INFINITY;const nK={props:{file:{type:Object,default:{asset_id:null,playback_ids:[]}}},emits:["mux-asset-deleted"],setup:function(e,t){var n=t.emit,i=jt(!1),r=jt(!1),s=jt(null);!function(e,t,n={}){const{window:i=JG,ignore:r=[],capture:s=!0,detectIframe:a=!1}=n;if(!i)return qG;jG&&!tK&&(tK=!0,Array.from(i.document.body.children).forEach((e=>e.addEventListener("click",qG))),i.document.documentElement.addEventListener("click",qG));let o=!0;const l=e=>r.some((t=>{if("string"==typeof t)return Array.from(i.document.querySelectorAll(t)).some((t=>t===e.target||e.composedPath().includes(t)));{const n=ZG(t);return n&&(e.target===n||e.composedPath().includes(n))}})),d=[eK(i,"click",(n=>{const i=ZG(e);i&&i!==n.target&&!n.composedPath().includes(i)&&(0===n.detail&&(o=!l(n)),o?t(n):o=!0)}),{passive:!0,capture:s}),eK(i,"pointerdown",(t=>{const n=ZG(e);o=!l(t)&&!(!n||t.composedPath().includes(n))}),{passive:!0}),a&&eK(i,"blur",(n=>{setTimeout((()=>{var r;const s=ZG(e);"IFRAME"!==(null==(r=i.document.activeElement)?void 0:r.tagName)||(null==s?void 0:s.contains(i.document.activeElement))||t(n)}),0)}))].filter(Boolean)}(s,(function(e){i.value=!1}));return{menuOpen:i,muxAssetMenu:s,onDeleteAsset:function(t){i.value=!1,function(e){return new Promise((function(t,n){var i={id:e};i[window.Craft.csrfTokenName]=window.Craft.csrfTokenValue,fetch("/actions/mux/assets/delete-asset-by-id",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(i)}).then((function(e){if(!e.ok)throw new Error("HTTP error ".concat(e.status));return e.json()})).then((function(e){t(e)})).catch((function(e){console.log(e)}))}))}(e.file.id).then((function(t){n("mux-asset-deleted",e.file)}))},onTrackAdded:function(e){},trackFormOpen:r}},components:{EllipsisHorizontalCircleIcon:function(e,t){return ia(),da("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[ga("path",{"fill-rule":"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm0 8.625a1.125 1.125 0 1 0 0 2.25 1.125 1.125 0 0 0 0-2.25ZM15.375 12a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0ZM7.5 10.875a1.125 1.125 0 1 0 0 2.25 1.125 1.125 0 0 0 0-2.25Z","clip-rule":"evenodd"})])},PlusCircleIcon:function(e,t){return ia(),da("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[ga("path",{"fill-rule":"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 9a.75.75 0 0 0-1.5 0v2.25H9a.75.75 0 0 0 0 1.5h2.25V15a.75.75 0 0 0 1.5 0v-2.25H15a.75.75 0 0 0 0-1.5h-2.25V9Z","clip-rule":"evenodd"})])},XCircleIcon:function(e,t){return ia(),da("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[ga("path",{"fill-rule":"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-1.72 6.97a.75.75 0 1 0-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 1 0 1.06 1.06L12 13.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L13.06 12l1.72-1.72a.75.75 0 1 0-1.06-1.06L12 10.94l-1.72-1.72Z","clip-rule":"evenodd"})])},MuxAssetTrackForm:$G}};var iK=n(483),rK={insert:"head",singleton:!1};MV()(iK.A,rK);iK.A.locals;const sK=(0,NV.A)(nK,[["render",function(e,t,n,i,r,s){var a=oi("mux-player"),o=oi("PlusCircleIcon"),l=oi("XCircleIcon"),d=oi("mux-asset-track-form");return ia(),da("div",BV,[ga("div",$V,[ga("figure",HV,[va(a,{"playback-id":n.file.playback_ids[0].id,"metadata-video-id":"props.file.id","stream-type":"on-demand","primary-color":"#ffffff","secondary-color":"rgba(0,0,0,.3)"},null,8,["playback-id"])]),ga("div",VV,[ga("button",{onClick:t[0]||(t[0]=Ul((function(e){return i.menuOpen=!i.menuOpen}),["prevent"]))},WV),i.menuOpen?(ia(),da("div",GV,[ga("ul",null,[ga("li",null,[ga("a",{href:"#",class:"",onClick:t[1]||(t[1]=Ul((function(e){return i.trackFormOpen=!i.trackFormOpen}),["prevent"]))},[ga("div",KV,[ga("div",qV,[va(o,{class:"pluscircleicon"}),Ta(),jV])])])]),ga("li",null,[ga("a",{href:"#",class:"error",alt:"Delete Mux Asset",onClick:t[2]||(t[2]=Ul((function(){return i.onDeleteAsset&&i.onDeleteAsset.apply(i,arguments)}),["prevent"]))},[ga("div",YV,[ga("div",zV,[va(l,{class:"xcircleicon"}),Ta(),XV])])])])])],512)):Aa("",!0)])]),i.trackFormOpen?(ia(),ca(d,{key:0,"asset-id":n.file.id,onMuxAssetTrackAdded:i.onTrackAdded},null,8,["asset-id","onMuxAssetTrackAdded"])):Aa("",!0)])}],["__scopeId","data-v-28f3dfbc"]]);var aK={class:"progressbar"};const oK={props:{value:{type:Number,default:0}},setup:function(e){return{bar:jt()}}};var lK=n(896),dK={insert:"head",singleton:!1};MV()(lK.A,dK);lK.A.locals;const cK={components:{FileInput:FV,File:sK,ProgressBar:(0,NV.A)(oK,[["render",function(e,t,n,i,r,s){return ia(),da("div",aK,[ga("div",{ref:"bar",class:"progressbar-inner",style:j("--progressbar-width:".concat(n.value,"%;"))},null,4)])}],["__scopeId","data-v-198a6554"]])},props:{name:{type:String,default:""},value:{type:Object,default:null}},setup:function(e,t){t.emit;var n=jt([]),i=jt(0);return cr((function(){null!==e.value&&""!==e.value&&(n.value=[e.value])})),{onFileValidated:function(e){},onFileSelect:function(e){var t=e[0];new Promise((function(e,t){fetch("/actions/mux/assets/upload-asset").then((function(e){if(!e.ok)throw new Error("HTTP error ".concat(e.status));return e.json()})).then((function(t){e(t)})).catch((function(){t()}))})).then((function(e){var r=function(e){return bG.createUpload(e)}({endpoint:e.url,file:t,chunkSize:30720});r.on("error",(function(e){console.error("💥 🙀",e.detail)})),r.on("progress",(function(e){i.value=e.detail})),r.on("success",(function(t){var r;(r=e.id,new Promise((function(e,t){var n={id:r};n[window.Craft.csrfTokenName]=window.Craft.csrfTokenValue,fetch("/actions/mux/assets/get-upload-by-id",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){if(!e.ok)throw new Error("HTTP error ".concat(e.status));return e.json()})).then((function(t){e(t)})).catch((function(e){console.log(e)}))}))).then((function(e){(function(e){return new Promise((function(t,n){var i={id:e};i[window.Craft.csrfTokenName]=window.Craft.csrfTokenValue,fetch("/actions/mux/assets/get-asset-by-id",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(i)}).then((function(e){if(!e.ok)throw new Error("HTTP error ".concat(e.status));return e.json()})).then((function(e){t(e)})).catch((function(e){console.log(e)}))}))})(e.asset_id).then((function(e){n.value=[e],i.value=0}))}))}))}))},onDeletedAsset:function(e){n.value=[]},assets:n,progress:i}}};Yl({name:"MuxField",components:{MuxAsset:(0,NV.A)(cK,[["render",function(e,t,n,i,r,s){var a=oi("progress-bar"),o=oi("file-input"),l=oi("file");return ia(),da("div",null,[0==i.assets.length?(ia(),ca(o,{key:0,"accept-extensions":".mp4,.mov",multiple:!1,"max-file-size":734003200,onValidated:i.onFileValidated,onChanged:i.onFileSelect},{files:Zn((function(){return[va(a,{value:i.progress},null,8,["value"])]})),_:1},8,["onValidated","onChanged"])):Aa("",!0),i.assets.length>0?(ia(),da("div",Kh,[(ia(!0),da(Qs,null,yr(i.assets,(function(e){return ia(),ca(l,{key:e.id,file:e,onMuxAssetDeleted:i.onDeletedAsset},null,8,["file","onMuxAssetDeleted"])})),128))])):Aa("",!0),ga("input",{type:"hidden",name:n.name,value:i.assets.length>0?JSON.stringify(i.assets[0]):""},null,8,qh)])}]])}}).mount("[id*=mux-muxfield]")},483:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(314),r=n.n(i)()((function(e){return e[1]}));r.push([e.id,".mux-field-main[data-v-28f3dfbc]{display:flex;flex-wrap:wrap;margin-top:16px}.mux-field[data-v-28f3dfbc],.mux-field-main[data-v-28f3dfbc]{align-items:flex-start;flex-direction:row;gap:14px;justify-content:flex-start}.mux-field[data-v-28f3dfbc]{display:inline-flex;position:relative}.mux-field>button[data-v-28f3dfbc]{color:var(--ui-control-color);z-index:2}button[data-v-28f3dfbc]:hover{color:rgba(96,125,159,.9)}figure[data-v-28f3dfbc]{max-width:360px;width:360px;z-index:1}.mux-asset-menu[data-v-28f3dfbc],figure[data-v-28f3dfbc]{position:relative}.mux-asset-menu>div[data-v-28f3dfbc]{right:0;top:100%;z-index:50}.mux-asset-menu>.menu[data-v-28f3dfbc]{display:block!important}.mux-asset-menu>.menu li[data-v-28f3dfbc]{align-items:center;display:flex}.mux-asset-menu>button>svg[data-v-28f3dfbc]{color:currentColor;height:32px;width:32px}.pluscircleicon[data-v-28f3dfbc],.xcircleicon[data-v-28f3dfbc]{color:currentColor;height:20px;width:20px}mux-player[data-v-28f3dfbc]{--controls-backdrop-color:rgba(0,0,0,.6)}",""]);const s=r},663:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(314),r=n.n(i)()((function(e){return e[1]}));r.push([e.id,".sr-only{clip:rect(0,0,0,0);border-width:0;height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}",""]);const s=r},49:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(314),r=n.n(i)()((function(e){return e[1]}));r.push([e.id,".mux-asset-track-form[data-v-05a8ed02]{flex:1 1 auto}.field-group[data-v-05a8ed02]{align-items:flex-start;display:flex;flex-wrap:wrap;gap:24px}.field-group .field[data-v-05a8ed02]{margin:0!important}.field-group>div[data-v-05a8ed02]:not(:last-child){flex:1 1 auto}.field-group>div[data-v-05a8ed02]:last-child{flex:1 0 auto}",""]);const s=r},896:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(314),r=n.n(i)()((function(e){return e[1]}));r.push([e.id,".progressbar[data-v-198a6554]{left:0;margin-top:16px;position:relative;width:100%}.progressbar-inner[data-v-198a6554]{--progressbar-width:0}.progressbar:not(.pending) .progressbar-inner[data-v-198a6554]{width:var(--progressbar-width)}",""]);const s=r},314:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,i){"string"==typeof e&&(e=[[null,e,""]]);var r={};if(i)for(var s=0;s<this.length;s++){var a=this[s][0];null!=a&&(r[a]=!0)}for(var o=0;o<e.length;o++){var l=[].concat(e[o]);i&&r[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),t.push(l))}},t}},556:()=>{},606:e=>{var t,n,i=e.exports={};function r(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(e){t=r}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(e){n=s}}();var o,l=[],d=!1,c=-1;function u(){d&&o&&(d=!1,o.length?l=o.concat(l):c=-1,l.length&&h())}function h(){if(!d){var e=a(u);d=!0;for(var t=l.length;t;){for(o=l,l=[];++c<t;)o&&o[c].run();c=-1,t=l.length}o=null,d=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function p(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new m(e,t)),1!==l.length||d||a(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=p,i.addListener=p,i.once=p,i.off=p,i.removeListener=p,i.removeAllListeners=p,i.emit=p,i.prependListener=p,i.prependOnceListener=p,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},72:(e,t,n)=>{"use strict";var i,r=function(){return void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i},s=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),a=[];function o(e){for(var t=-1,n=0;n<a.length;n++)if(a[n].identifier===e){t=n;break}return t}function l(e,t){for(var n={},i=[],r=0;r<e.length;r++){var s=e[r],l=t.base?s[0]+t.base:s[0],d=n[l]||0,c="".concat(l," ").concat(d);n[l]=d+1;var u=o(c),h={css:s[1],media:s[2],sourceMap:s[3]};-1!==u?(a[u].references++,a[u].updater(h)):a.push({identifier:c,updater:g(h,t),references:1}),i.push(c)}return i}function d(e){var t=document.createElement("style"),i=e.attributes||{};if(void 0===i.nonce){var r=n.nc;r&&(i.nonce=r)}if(Object.keys(i).forEach((function(e){t.setAttribute(e,i[e])})),"function"==typeof e.insert)e.insert(t);else{var a=s(e.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(t)}return t}var c,u=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function h(e,t,n,i){var r=n?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(e.styleSheet)e.styleSheet.cssText=u(t,r);else{var s=document.createTextNode(r),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(s,a[t]):e.appendChild(s)}}function m(e,t,n){var i=n.css,r=n.media,s=n.sourceMap;if(r?e.setAttribute("media",r):e.removeAttribute("media"),s&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var p=null,f=0;function g(e,t){var n,i,r;if(t.singleton){var s=f++;n=p||(p=d(t)),i=h.bind(null,n,s,!1),r=h.bind(null,n,s,!0)}else n=d(t),i=m.bind(null,n,t),r=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else r()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=r());var n=l(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var i=0;i<n.length;i++){var r=o(n[i]);a[r].references--}for(var s=l(e,t),d=0;d<n.length;d++){var c=o(n[d]);0===a[c].references&&(a[c].updater(),a.splice(c,1))}n=s}}}},262:(e,t)=>{"use strict";t.A=(e,t)=>{const n=e.__vccOpts||e;for(const[e,i]of t)n[e]=i;return n}}},n={};function i(e){var r=n[e];if(void 0!==r)return r.exports;var s=n[e]={id:e,exports:{}};return t[e](s,s.exports,i),s.exports}i.m=t,e=[],i.O=(t,n,r,s)=>{if(!n){var a=1/0;for(c=0;c<e.length;c++){for(var[n,r,s]=e[c],o=!0,l=0;l<n.length;l++)(!1&s||a>=s)&&Object.keys(i.O).every((e=>i.O[e](n[l])))?n.splice(l--,1):(o=!1,s<a&&(a=s));if(o){e.splice(c--,1);var d=r();void 0!==d&&(t=d)}}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[n,r,s]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={328:0,100:0};i.O.j=t=>0===e[t];var t=(t,n)=>{var r,s,[a,o,l]=n,d=0;if(a.some((t=>0!==e[t]))){for(r in o)i.o(o,r)&&(i.m[r]=o[r]);if(l)var c=l(i)}for(t&&t(n);d<a.length;d++)s=a[d],i.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return i.O(c)},n=self.webpackChunkmux=self.webpackChunkmux||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),i.nc=void 0,i.O(void 0,[100],(()=>i(662)));var r=i.O(void 0,[100],(()=>i(556)));r=i.O(r)})();